var e6=Object.defineProperty;var nR=t=>{throw TypeError(t)};var t6=(t,e,n)=>e in t?e6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var at=(t,e,n)=>t6(t,typeof e!="symbol"?e+"":e,n),AC=(t,e,n)=>e.has(t)||nR("Cannot "+n);var X=(t,e,n)=>(AC(t,e,"read from private field"),n?n.call(t):e.get(t)),Tt=(t,e,n)=>e.has(t)?nR("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),rt=(t,e,n,r)=>(AC(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Yt=(t,e,n)=>(AC(t,e,"access private method"),n);var Pb=(t,e,n,r)=>({set _(i){rt(t,e,i,n)},get _(){return X(t,e,r)}});function n6(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var NC={exports:{}},vv={},OC={exports:{}},Zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rR;function r6(){if(rR)return Zt;rR=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function v(B){return B===null||typeof B!="object"?null:(B=m&&B[m]||B["@@iterator"],typeof B=="function"?B:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,C={};function E(B,fe,ie){this.props=B,this.context=fe,this.refs=C,this.updater=ie||S}E.prototype.isReactComponent={},E.prototype.setState=function(B,fe){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,fe,"setState")},E.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function _(){}_.prototype=E.prototype;function M(B,fe,ie){this.props=B,this.context=fe,this.refs=C,this.updater=ie||S}var A=M.prototype=new _;A.constructor=M,k(A,E.prototype),A.isPureReactComponent=!0;var I=Array.isArray,N=Object.prototype.hasOwnProperty,O={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function V(B,fe,ie){var pe,ke={},Pe=null,de=null;if(fe!=null)for(pe in fe.ref!==void 0&&(de=fe.ref),fe.key!==void 0&&(Pe=""+fe.key),fe)N.call(fe,pe)&&!j.hasOwnProperty(pe)&&(ke[pe]=fe[pe]);var ge=arguments.length-2;if(ge===1)ke.children=ie;else if(1<ge){for(var _e=Array(ge),We=0;We<ge;We++)_e[We]=arguments[We+2];ke.children=_e}if(B&&B.defaultProps)for(pe in ge=B.defaultProps,ge)ke[pe]===void 0&&(ke[pe]=ge[pe]);return{$$typeof:t,type:B,key:Pe,ref:de,props:ke,_owner:O.current}}function z(B,fe){return{$$typeof:t,type:B.type,key:fe,ref:B.ref,props:B.props,_owner:B._owner}}function W(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function J(B){var fe={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ie){return fe[ie]})}var Y=/\/+/g;function me(B,fe){return typeof B=="object"&&B!==null&&B.key!=null?J(""+B.key):fe.toString(36)}function ue(B,fe,ie,pe,ke){var Pe=typeof B;(Pe==="undefined"||Pe==="boolean")&&(B=null);var de=!1;if(B===null)de=!0;else switch(Pe){case"string":case"number":de=!0;break;case"object":switch(B.$$typeof){case t:case e:de=!0}}if(de)return de=B,ke=ke(de),B=pe===""?"."+me(de,0):pe,I(ke)?(ie="",B!=null&&(ie=B.replace(Y,"$&/")+"/"),ue(ke,fe,ie,"",function(We){return We})):ke!=null&&(W(ke)&&(ke=z(ke,ie+(!ke.key||de&&de.key===ke.key?"":(""+ke.key).replace(Y,"$&/")+"/")+B)),fe.push(ke)),1;if(de=0,pe=pe===""?".":pe+":",I(B))for(var ge=0;ge<B.length;ge++){Pe=B[ge];var _e=pe+me(Pe,ge);de+=ue(Pe,fe,ie,_e,ke)}else if(_e=v(B),typeof _e=="function")for(B=_e.call(B),ge=0;!(Pe=B.next()).done;)Pe=Pe.value,_e=pe+me(Pe,ge++),de+=ue(Pe,fe,ie,_e,ke);else if(Pe==="object")throw fe=String(B),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.");return de}function Ie(B,fe,ie){if(B==null)return B;var pe=[],ke=0;return ue(B,pe,"","",function(Pe){return fe.call(ie,Pe,ke++)}),pe}function se(B){if(B._status===-1){var fe=B._result;fe=fe(),fe.then(function(ie){(B._status===0||B._status===-1)&&(B._status=1,B._result=ie)},function(ie){(B._status===0||B._status===-1)&&(B._status=2,B._result=ie)}),B._status===-1&&(B._status=0,B._result=fe)}if(B._status===1)return B._result.default;throw B._result}var xe={current:null},q={transition:null},te={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:q,ReactCurrentOwner:O};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Zt.Children={map:Ie,forEach:function(B,fe,ie){Ie(B,function(){fe.apply(this,arguments)},ie)},count:function(B){var fe=0;return Ie(B,function(){fe++}),fe},toArray:function(B){return Ie(B,function(fe){return fe})||[]},only:function(B){if(!W(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Zt.Component=E,Zt.Fragment=n,Zt.Profiler=i,Zt.PureComponent=M,Zt.StrictMode=r,Zt.Suspense=u,Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,Zt.act=ae,Zt.cloneElement=function(B,fe,ie){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var pe=k({},B.props),ke=B.key,Pe=B.ref,de=B._owner;if(fe!=null){if(fe.ref!==void 0&&(Pe=fe.ref,de=O.current),fe.key!==void 0&&(ke=""+fe.key),B.type&&B.type.defaultProps)var ge=B.type.defaultProps;for(_e in fe)N.call(fe,_e)&&!j.hasOwnProperty(_e)&&(pe[_e]=fe[_e]===void 0&&ge!==void 0?ge[_e]:fe[_e])}var _e=arguments.length-2;if(_e===1)pe.children=ie;else if(1<_e){ge=Array(_e);for(var We=0;We<_e;We++)ge[We]=arguments[We+2];pe.children=ge}return{$$typeof:t,type:B.type,key:ke,ref:Pe,props:pe,_owner:de}},Zt.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:s,_context:B},B.Consumer=B},Zt.createElement=V,Zt.createFactory=function(B){var fe=V.bind(null,B);return fe.type=B,fe},Zt.createRef=function(){return{current:null}},Zt.forwardRef=function(B){return{$$typeof:a,render:B}},Zt.isValidElement=W,Zt.lazy=function(B){return{$$typeof:h,_payload:{_status:-1,_result:B},_init:se}},Zt.memo=function(B,fe){return{$$typeof:f,type:B,compare:fe===void 0?null:fe}},Zt.startTransition=function(B){var fe=q.transition;q.transition={};try{B()}finally{q.transition=fe}},Zt.unstable_act=ae,Zt.useCallback=function(B,fe){return xe.current.useCallback(B,fe)},Zt.useContext=function(B){return xe.current.useContext(B)},Zt.useDebugValue=function(){},Zt.useDeferredValue=function(B){return xe.current.useDeferredValue(B)},Zt.useEffect=function(B,fe){return xe.current.useEffect(B,fe)},Zt.useId=function(){return xe.current.useId()},Zt.useImperativeHandle=function(B,fe,ie){return xe.current.useImperativeHandle(B,fe,ie)},Zt.useInsertionEffect=function(B,fe){return xe.current.useInsertionEffect(B,fe)},Zt.useLayoutEffect=function(B,fe){return xe.current.useLayoutEffect(B,fe)},Zt.useMemo=function(B,fe){return xe.current.useMemo(B,fe)},Zt.useReducer=function(B,fe,ie){return xe.current.useReducer(B,fe,ie)},Zt.useRef=function(B){return xe.current.useRef(B)},Zt.useState=function(B){return xe.current.useState(B)},Zt.useSyncExternalStore=function(B,fe,ie){return xe.current.useSyncExternalStore(B,fe,ie)},Zt.useTransition=function(){return xe.current.useTransition()},Zt.version="18.3.1",Zt}var iR;function nE(){return iR||(iR=1,OC.exports=r6()),OC.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sR;function i6(){if(sR)return vv;sR=1;var t=nE(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,f){var h,m={},v=null,S=null;f!==void 0&&(v=""+f),u.key!==void 0&&(v=""+u.key),u.ref!==void 0&&(S=u.ref);for(h in u)r.call(u,h)&&!s.hasOwnProperty(h)&&(m[h]=u[h]);if(a&&a.defaultProps)for(h in u=a.defaultProps,u)m[h]===void 0&&(m[h]=u[h]);return{$$typeof:e,type:a,key:v,ref:S,props:m,_owner:i.current}}return vv.Fragment=n,vv.jsx=o,vv.jsxs=o,vv}var oR;function s6(){return oR||(oR=1,NC.exports=i6()),NC.exports}var b=s6(),w=nE();const Re=Pw(w),rE=n6({__proto__:null,default:Re},[w]);var Rb={},DC={exports:{}},Is={},LC={exports:{}},jC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aR;function o6(){return aR||(aR=1,function(t){function e(q,te){var ae=q.length;q.push(te);e:for(;0<ae;){var B=ae-1>>>1,fe=q[B];if(0<i(fe,te))q[B]=te,q[ae]=fe,ae=B;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var te=q[0],ae=q.pop();if(ae!==te){q[0]=ae;e:for(var B=0,fe=q.length,ie=fe>>>1;B<ie;){var pe=2*(B+1)-1,ke=q[pe],Pe=pe+1,de=q[Pe];if(0>i(ke,ae))Pe<fe&&0>i(de,ke)?(q[B]=de,q[Pe]=ae,B=Pe):(q[B]=ke,q[pe]=ae,B=pe);else if(Pe<fe&&0>i(de,ae))q[B]=de,q[Pe]=ae,B=Pe;else break e}}return te}function i(q,te){var ae=q.sortIndex-te.sortIndex;return ae!==0?ae:q.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],f=[],h=1,m=null,v=3,S=!1,k=!1,C=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(q){for(var te=n(f);te!==null;){if(te.callback===null)r(f);else if(te.startTime<=q)r(f),te.sortIndex=te.expirationTime,e(u,te);else break;te=n(f)}}function I(q){if(C=!1,A(q),!k)if(n(u)!==null)k=!0,se(N);else{var te=n(f);te!==null&&xe(I,te.startTime-q)}}function N(q,te){k=!1,C&&(C=!1,_(V),V=-1),S=!0;var ae=v;try{for(A(te),m=n(u);m!==null&&(!(m.expirationTime>te)||q&&!J());){var B=m.callback;if(typeof B=="function"){m.callback=null,v=m.priorityLevel;var fe=B(m.expirationTime<=te);te=t.unstable_now(),typeof fe=="function"?m.callback=fe:m===n(u)&&r(u),A(te)}else r(u);m=n(u)}if(m!==null)var ie=!0;else{var pe=n(f);pe!==null&&xe(I,pe.startTime-te),ie=!1}return ie}finally{m=null,v=ae,S=!1}}var O=!1,j=null,V=-1,z=5,W=-1;function J(){return!(t.unstable_now()-W<z)}function Y(){if(j!==null){var q=t.unstable_now();W=q;var te=!0;try{te=j(!0,q)}finally{te?me():(O=!1,j=null)}}else O=!1}var me;if(typeof M=="function")me=function(){M(Y)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,Ie=ue.port2;ue.port1.onmessage=Y,me=function(){Ie.postMessage(null)}}else me=function(){E(Y,0)};function se(q){j=q,O||(O=!0,me())}function xe(q,te){V=E(function(){q(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){k||S||(k=!0,se(N))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(v){case 1:case 2:case 3:var te=3;break;default:te=v}var ae=v;v=te;try{return q()}finally{v=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,te){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ae=v;v=q;try{return te()}finally{v=ae}},t.unstable_scheduleCallback=function(q,te,ae){var B=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?B+ae:B):ae=B,q){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=ae+fe,q={id:h++,callback:te,priorityLevel:q,startTime:ae,expirationTime:fe,sortIndex:-1},ae>B?(q.sortIndex=ae,e(f,q),n(u)===null&&q===n(f)&&(C?(_(V),V=-1):C=!0,xe(I,ae-B))):(q.sortIndex=fe,e(u,q),k||S||(k=!0,se(N))),q},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(q){var te=v;return function(){var ae=v;v=te;try{return q.apply(this,arguments)}finally{v=ae}}}}(jC)),jC}var lR;function a6(){return lR||(lR=1,LC.exports=o6()),LC.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cR;function l6(){if(cR)return Is;cR=1;var t=nE(),e=a6();function n(l){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+l,g=1;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(l,c){o(l,c),o(l+"Capture",c)}function o(l,c){for(i[l]=c,l=0;l<c.length;l++)r.add(c[l])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},m={};function v(l){return u.call(m,l)?!0:u.call(h,l)?!1:f.test(l)?m[l]=!0:(h[l]=!0,!1)}function S(l,c,g,y){if(g!==null&&g.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return y?!1:g!==null?!g.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function k(l,c,g,y){if(c===null||typeof c>"u"||S(l,c,g,y))return!0;if(y)return!1;if(g!==null)switch(g.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function C(l,c,g,y,T,P,L){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=y,this.attributeNamespace=T,this.mustUseProperty=g,this.propertyName=l,this.type=c,this.sanitizeURL=P,this.removeEmptyString=L}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){E[l]=new C(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var c=l[0];E[c]=new C(c,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){E[l]=new C(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){E[l]=new C(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){E[l]=new C(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){E[l]=new C(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){E[l]=new C(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){E[l]=new C(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){E[l]=new C(l,5,!1,l.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function M(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var c=l.replace(_,M);E[c]=new C(c,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var c=l.replace(_,M);E[c]=new C(c,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var c=l.replace(_,M);E[c]=new C(c,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){E[l]=new C(l,1,!1,l.toLowerCase(),null,!1,!1)}),E.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){E[l]=new C(l,1,!1,l.toLowerCase(),null,!0,!0)});function A(l,c,g,y){var T=E.hasOwnProperty(c)?E[c]:null;(T!==null?T.type!==0:y||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(k(c,g,T,y)&&(g=null),y||T===null?v(c)&&(g===null?l.removeAttribute(c):l.setAttribute(c,""+g)):T.mustUseProperty?l[T.propertyName]=g===null?T.type===3?!1:"":g:(c=T.attributeName,y=T.attributeNamespace,g===null?l.removeAttribute(c):(T=T.type,g=T===3||T===4&&g===!0?"":""+g,y?l.setAttributeNS(y,c,g):l.setAttribute(c,g))))}var I=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),O=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),J=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),Ie=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),q=Symbol.iterator;function te(l){return l===null||typeof l!="object"?null:(l=q&&l[q]||l["@@iterator"],typeof l=="function"?l:null)}var ae=Object.assign,B;function fe(l){if(B===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);B=c&&c[1]||""}return`
`+B+l}var ie=!1;function pe(l,c){if(!l||ie)return"";ie=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Ce){var y=Ce}Reflect.construct(l,[],c)}else{try{c.call()}catch(Ce){y=Ce}l.call(c.prototype)}else{try{throw Error()}catch(Ce){y=Ce}l()}}catch(Ce){if(Ce&&y&&typeof Ce.stack=="string"){for(var T=Ce.stack.split(`
`),P=y.stack.split(`
`),L=T.length-1,$=P.length-1;1<=L&&0<=$&&T[L]!==P[$];)$--;for(;1<=L&&0<=$;L--,$--)if(T[L]!==P[$]){if(L!==1||$!==1)do if(L--,$--,0>$||T[L]!==P[$]){var Z=`
`+T[L].replace(" at new "," at ");return l.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",l.displayName)),Z}while(1<=L&&0<=$);break}}}finally{ie=!1,Error.prepareStackTrace=g}return(l=l?l.displayName||l.name:"")?fe(l):""}function ke(l){switch(l.tag){case 5:return fe(l.type);case 16:return fe("Lazy");case 13:return fe("Suspense");case 19:return fe("SuspenseList");case 0:case 2:case 15:return l=pe(l.type,!1),l;case 11:return l=pe(l.type.render,!1),l;case 1:return l=pe(l.type,!0),l;default:return""}}function Pe(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case j:return"Fragment";case O:return"Portal";case z:return"Profiler";case V:return"StrictMode";case me:return"Suspense";case ue:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case J:return(l.displayName||"Context")+".Consumer";case W:return(l._context.displayName||"Context")+".Provider";case Y:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Ie:return c=l.displayName||null,c!==null?c:Pe(l.type)||"Memo";case se:c=l._payload,l=l._init;try{return Pe(l(c))}catch{}}return null}function de(l){var c=l.type;switch(l.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=c.render,l=l.displayName||l.name||"",c.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(c);case 8:return c===V?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function ge(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function _e(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function We(l){var c=_e(l)?"checked":"value",g=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),y=""+l[c];if(!l.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var T=g.get,P=g.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return T.call(this)},set:function(L){y=""+L,P.call(this,L)}}),Object.defineProperty(l,c,{enumerable:g.enumerable}),{getValue:function(){return y},setValue:function(L){y=""+L},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function dt(l){l._valueTracker||(l._valueTracker=We(l))}function mt(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var g=c.getValue(),y="";return l&&(y=_e(l)?l.checked?"true":"false":l.value),l=y,l!==g?(c.setValue(l),!0):!1}function Et(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Ct(l,c){var g=c.checked;return ae({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??l._wrapperState.initialChecked})}function jn(l,c){var g=c.defaultValue==null?"":c.defaultValue,y=c.checked!=null?c.checked:c.defaultChecked;g=ge(c.value!=null?c.value:g),l._wrapperState={initialChecked:y,initialValue:g,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function wn(l,c){c=c.checked,c!=null&&A(l,"checked",c,!1)}function ln(l,c){wn(l,c);var g=ge(c.value),y=c.type;if(g!=null)y==="number"?(g===0&&l.value===""||l.value!=g)&&(l.value=""+g):l.value!==""+g&&(l.value=""+g);else if(y==="submit"||y==="reset"){l.removeAttribute("value");return}c.hasOwnProperty("value")?En(l,c.type,g):c.hasOwnProperty("defaultValue")&&En(l,c.type,ge(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(l.defaultChecked=!!c.defaultChecked)}function Mn(l,c,g){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var y=c.type;if(!(y!=="submit"&&y!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+l._wrapperState.initialValue,g||c===l.value||(l.value=c),l.defaultValue=c}g=l.name,g!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,g!==""&&(l.name=g)}function En(l,c,g){(c!=="number"||Et(l.ownerDocument)!==l)&&(g==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+g&&(l.defaultValue=""+g))}var Q=Array.isArray;function le(l,c,g,y){if(l=l.options,c){c={};for(var T=0;T<g.length;T++)c["$"+g[T]]=!0;for(g=0;g<l.length;g++)T=c.hasOwnProperty("$"+l[g].value),l[g].selected!==T&&(l[g].selected=T),T&&y&&(l[g].defaultSelected=!0)}else{for(g=""+ge(g),c=null,T=0;T<l.length;T++){if(l[T].value===g){l[T].selected=!0,y&&(l[T].defaultSelected=!0);return}c!==null||l[T].disabled||(c=l[T])}c!==null&&(c.selected=!0)}}function ye(l,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return ae({},c,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function qe(l,c){var g=c.value;if(g==null){if(g=c.children,c=c.defaultValue,g!=null){if(c!=null)throw Error(n(92));if(Q(g)){if(1<g.length)throw Error(n(93));g=g[0]}c=g}c==null&&(c=""),g=c}l._wrapperState={initialValue:ge(g)}}function Ge(l,c){var g=ge(c.value),y=ge(c.defaultValue);g!=null&&(g=""+g,g!==l.value&&(l.value=g),c.defaultValue==null&&l.defaultValue!==g&&(l.defaultValue=g)),y!=null&&(l.defaultValue=""+y)}function Be(l){var c=l.textContent;c===l._wrapperState.initialValue&&c!==""&&c!==null&&(l.value=c)}function Xe(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ne(l,c){return l==null||l==="http://www.w3.org/1999/xhtml"?Xe(c):l==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var ht,$t=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,g,y,T){MSApp.execUnsafeLocalFunction(function(){return l(c,g,y,T)})}:l}(function(l,c){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=c;else{for(ht=ht||document.createElement("div"),ht.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=ht.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;c.firstChild;)l.appendChild(c.firstChild)}});function cn(l,c){if(c){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=c;return}}l.textContent=c}var dn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bt=["Webkit","ms","Moz","O"];Object.keys(dn).forEach(function(l){bt.forEach(function(c){c=c+l.charAt(0).toUpperCase()+l.substring(1),dn[c]=dn[l]})});function fn(l,c,g){return c==null||typeof c=="boolean"||c===""?"":g||typeof c!="number"||c===0||dn.hasOwnProperty(l)&&dn[l]?(""+c).trim():c+"px"}function _n(l,c){l=l.style;for(var g in c)if(c.hasOwnProperty(g)){var y=g.indexOf("--")===0,T=fn(g,c[g],y);g==="float"&&(g="cssFloat"),y?l.setProperty(g,T):l[g]=T}}var or=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ci(l,c){if(c){if(or[l]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,l));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function Ur(l,c){if(l.indexOf("-")===-1)return typeof c.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ci=null;function ki(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Jo=null,Ks=null,Ki=null;function Dl(l){if(l=hi(l)){if(typeof Jo!="function")throw Error(n(280));var c=l.stateNode;c&&(c=Mh(c),Jo(l.stateNode,l.type,c))}}function Dt(l){Ks?Ki?Ki.push(l):Ki=[l]:Ks=l}function Vn(){if(Ks){var l=Ks,c=Ki;if(Ki=Ks=null,Dl(l),c)for(l=0;l<c.length;l++)Dl(c[l])}}function Gn(l,c){return l(c)}function Pr(){}var bo=!1;function G(l,c,g){if(bo)return l(c,g);bo=!0;try{return Gn(l,c,g)}finally{bo=!1,(Ks!==null||Ki!==null)&&(Pr(),Vn())}}function re(l,c){var g=l.stateNode;if(g===null)return null;var y=Mh(g);if(y===null)return null;g=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(n(231,c,typeof g));return g}var Se=!1;if(a)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Se=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch{Se=!1}function He(l,c,g,y,T,P,L,$,Z){var Ce=Array.prototype.slice.call(arguments,3);try{c.apply(g,Ce)}catch(Ue){this.onError(Ue)}}var lt=!1,it=null,ct=!1,xt=null,It={onError:function(l){lt=!0,it=l}};function Pt(l,c,g,y,T,P,L,$,Z){lt=!1,it=null,He.apply(It,arguments)}function yt(l,c,g,y,T,P,L,$,Z){if(Pt.apply(this,arguments),lt){if(lt){var Ce=it;lt=!1,it=null}else throw Error(n(198));ct||(ct=!0,xt=Ce)}}function Mt(l){var c=l,g=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(g=c.return),l=c.return;while(l)}return c.tag===3?g:null}function Sn(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function ar(l){if(Mt(l)!==l)throw Error(n(188))}function Yr(l){var c=l.alternate;if(!c){if(c=Mt(l),c===null)throw Error(n(188));return c!==l?null:l}for(var g=l,y=c;;){var T=g.return;if(T===null)break;var P=T.alternate;if(P===null){if(y=T.return,y!==null){g=y;continue}break}if(T.child===P.child){for(P=T.child;P;){if(P===g)return ar(T),l;if(P===y)return ar(T),c;P=P.sibling}throw Error(n(188))}if(g.return!==y.return)g=T,y=P;else{for(var L=!1,$=T.child;$;){if($===g){L=!0,g=T,y=P;break}if($===y){L=!0,y=T,g=P;break}$=$.sibling}if(!L){for($=P.child;$;){if($===g){L=!0,g=P,y=T;break}if($===y){L=!0,y=P,g=T;break}$=$.sibling}if(!L)throw Error(n(189))}}if(g.alternate!==y)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?l:c}function Bn(l){return l=Yr(l),l!==null?An(l):null}function An(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var c=An(l);if(c!==null)return c;l=l.sibling}return null}var xo=e.unstable_scheduleCallback,Da=e.unstable_cancelCallback,Gi=e.unstable_shouldYield,ps=e.unstable_requestPaint,Nn=e.unstable_now,Ll=e.unstable_getCurrentPriorityLevel,Gs=e.unstable_ImmediatePriority,jl=e.unstable_UserBlockingPriority,wo=e.unstable_NormalPriority,Xt=e.unstable_LowPriority,mr=e.unstable_IdlePriority,Ys=null,Vr=null;function lr(l){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(Ys,l,void 0,(l.current.flags&128)===128)}catch{}}var ui=Math.clz32?Math.clz32:c0,gd=Math.log,ih=Math.LN2;function c0(l){return l>>>=0,l===0?32:31-(gd(l)/ih|0)|0}var jc=64,sh=4194304;function Fc(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function Fl(l,c){var g=l.pendingLanes;if(g===0)return 0;var y=0,T=l.suspendedLanes,P=l.pingedLanes,L=g&268435455;if(L!==0){var $=L&~T;$!==0?y=Fc($):(P&=L,P!==0&&(y=Fc(P)))}else L=g&~T,L!==0?y=Fc(L):P!==0&&(y=Fc(P));if(y===0)return 0;if(c!==0&&c!==y&&(c&T)===0&&(T=y&-y,P=c&-c,T>=P||T===16&&(P&4194240)!==0))return c;if((y&4)!==0&&(y|=g&16),c=l.entangledLanes,c!==0)for(l=l.entanglements,c&=y;0<c;)g=31-ui(c),T=1<<g,y|=l[g],c&=~T;return y}function u0(l,c){switch(l){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DS(l,c){for(var g=l.suspendedLanes,y=l.pingedLanes,T=l.expirationTimes,P=l.pendingLanes;0<P;){var L=31-ui(P),$=1<<L,Z=T[L];Z===-1?(($&g)===0||($&y)!==0)&&(T[L]=u0($,c)):Z<=c&&(l.expiredLanes|=$),P&=~$}}function oh(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function Zm(){var l=jc;return jc<<=1,(jc&4194240)===0&&(jc=64),l}function vd(l){for(var c=[],g=0;31>g;g++)c.push(l);return c}function yd(l,c,g){l.pendingLanes|=c,c!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,c=31-ui(c),l[c]=g}function d0(l,c){var g=l.pendingLanes&~c;l.pendingLanes=c,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=c,l.mutableReadLanes&=c,l.entangledLanes&=c,c=l.entanglements;var y=l.eventTimes;for(l=l.expirationTimes;0<g;){var T=31-ui(g),P=1<<T;c[T]=0,y[T]=-1,l[T]=-1,g&=~P}}function bd(l,c){var g=l.entangledLanes|=c;for(l=l.entanglements;g;){var y=31-ui(g),T=1<<y;T&c|l[y]&c&&(l[y]|=c),g&=~T}}var bn=0;function Ul(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var eg,ah,f0,tg,ng,lh=!1,xd=[],La=null,ja=null,Fa=null,Uc=new Map,wd=new Map,Ua=[],LS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function h0(l,c){switch(l){case"focusin":case"focusout":La=null;break;case"dragenter":case"dragleave":ja=null;break;case"mouseover":case"mouseout":Fa=null;break;case"pointerover":case"pointerout":Uc.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":wd.delete(c.pointerId)}}function Vl(l,c,g,y,T,P){return l===null||l.nativeEvent!==P?(l={blockedOn:c,domEventName:g,eventSystemFlags:y,nativeEvent:P,targetContainers:[T]},c!==null&&(c=hi(c),c!==null&&ah(c)),l):(l.eventSystemFlags|=y,c=l.targetContainers,T!==null&&c.indexOf(T)===-1&&c.push(T),l)}function jS(l,c,g,y,T){switch(c){case"focusin":return La=Vl(La,l,c,g,y,T),!0;case"dragenter":return ja=Vl(ja,l,c,g,y,T),!0;case"mouseover":return Fa=Vl(Fa,l,c,g,y,T),!0;case"pointerover":var P=T.pointerId;return Uc.set(P,Vl(Uc.get(P)||null,l,c,g,y,T)),!0;case"gotpointercapture":return P=T.pointerId,wd.set(P,Vl(wd.get(P)||null,l,c,g,y,T)),!0}return!1}function p0(l){var c=To(l.target);if(c!==null){var g=Mt(c);if(g!==null){if(c=g.tag,c===13){if(c=Sn(g),c!==null){l.blockedOn=c,ng(l.priority,function(){f0(g)});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function ch(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var g=fh(l.domEventName,l.eventSystemFlags,c[0],l.nativeEvent);if(g===null){g=l.nativeEvent;var y=new g.constructor(g.type,g);Ci=y,g.target.dispatchEvent(y),Ci=null}else return c=hi(g),c!==null&&ah(c),l.blockedOn=g,!1;c.shift()}return!0}function m0(l,c,g){ch(l)&&g.delete(c)}function FS(){lh=!1,La!==null&&ch(La)&&(La=null),ja!==null&&ch(ja)&&(ja=null),Fa!==null&&ch(Fa)&&(Fa=null),Uc.forEach(m0),wd.forEach(m0)}function Pn(l,c){l.blockedOn===c&&(l.blockedOn=null,lh||(lh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,FS)))}function Cn(l){function c(T){return Pn(T,l)}if(0<xd.length){Pn(xd[0],l);for(var g=1;g<xd.length;g++){var y=xd[g];y.blockedOn===l&&(y.blockedOn=null)}}for(La!==null&&Pn(La,l),ja!==null&&Pn(ja,l),Fa!==null&&Pn(Fa,l),Uc.forEach(c),wd.forEach(c),g=0;g<Ua.length;g++)y=Ua[g],y.blockedOn===l&&(y.blockedOn=null);for(;0<Ua.length&&(g=Ua[0],g.blockedOn===null);)p0(g),g.blockedOn===null&&Ua.shift()}var Vc=I.ReactCurrentBatchConfig,uh=!0;function US(l,c,g,y){var T=bn,P=Vc.transition;Vc.transition=null;try{bn=1,rg(l,c,g,y)}finally{bn=T,Vc.transition=P}}function VS(l,c,g,y){var T=bn,P=Vc.transition;Vc.transition=null;try{bn=4,rg(l,c,g,y)}finally{bn=T,Vc.transition=P}}function rg(l,c,g,y){if(uh){var T=fh(l,c,g,y);if(T===null)xg(l,c,y,dh,g),h0(l,y);else if(jS(T,l,c,g,y))y.stopPropagation();else if(h0(l,y),c&4&&-1<LS.indexOf(l)){for(;T!==null;){var P=hi(T);if(P!==null&&eg(P),P=fh(l,c,g,y),P===null&&xg(l,c,y,dh,g),P===T)break;T=P}T!==null&&y.stopPropagation()}else xg(l,c,y,null,g)}}var dh=null;function fh(l,c,g,y){if(dh=null,l=ki(y),l=To(l),l!==null)if(c=Mt(l),c===null)l=null;else if(g=c.tag,g===13){if(l=Sn(c),l!==null)return l;l=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null);return dh=l,null}function g0(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ll()){case Gs:return 1;case jl:return 4;case wo:case Xt:return 16;case mr:return 536870912;default:return 16}default:return 16}}var Yn=null,Sd=null,So=null;function ig(){if(So)return So;var l,c=Sd,g=c.length,y,T="value"in Yn?Yn.value:Yn.textContent,P=T.length;for(l=0;l<g&&c[l]===T[l];l++);var L=g-l;for(y=1;y<=L&&c[g-y]===T[P-y];y++);return So=T.slice(l,1<y?1-y:void 0)}function Bc(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function Ti(){return!0}function sg(){return!1}function Li(l){function c(g,y,T,P,L){this._reactName=g,this._targetInst=T,this.type=y,this.nativeEvent=P,this.target=L,this.currentTarget=null;for(var $ in l)l.hasOwnProperty($)&&(g=l[$],this[$]=g?g(P):P[$]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Ti:sg,this.isPropagationStopped=sg,this}return ae(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Ti)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Ti)},persist:function(){},isPersistent:Ti}),c}var Bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hh=Li(Bl),zc=ae({},Bl,{view:0,detail:0}),v0=Li(zc),Ei,og,di,ph=ae({},zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dg,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==di&&(di&&l.type==="mousemove"?(Ei=l.screenX-di.screenX,og=l.screenY-di.screenY):og=Ei=0,di=l),Ei)},movementY:function(l){return"movementY"in l?l.movementY:og}}),ag=Li(ph),Va=ae({},ph,{dataTransfer:0}),mh=Li(Va),lg=ae({},zc,{relatedTarget:0}),zn=Li(lg),Ba=ae({},Bl,{animationName:0,elapsedTime:0,pseudoElement:0}),cg=Li(Ba),BS=ae({},Bl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),ug=Li(BS),zS=ae({},Bl,{data:0}),y0=Li(zS),$S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $c(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=gh[l])?!!c[l]:!1}function dg(){return $c}var x0=ae({},zc,{key:function(l){if(l.key){var c=$S[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=Bc(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?b0[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dg,charCode:function(l){return l.type==="keypress"?Bc(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Bc(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),w0=Li(x0),fg=ae({},ph,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vh=Li(fg),S0=ae({},zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dg}),WS=Li(S0),hg=ae({},Bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),pg=Li(hg),HS=ae({},ph,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),C0=Li(HS),Yi=[9,13,27,32],Cd=a&&"CompositionEvent"in window,Xo=null;a&&"documentMode"in document&&(Xo=document.documentMode);var k0=a&&"TextEvent"in window&&!Xo,mg=a&&(!Cd||Xo&&8<Xo&&11>=Xo),T0=" ",E0=!1;function _0(l,c){switch(l){case"keyup":return Yi.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function P0(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Wc=!1;function Hc(l,c){switch(l){case"compositionend":return P0(c);case"keypress":return c.which!==32?null:(E0=!0,T0);case"textInput":return l=c.data,l===T0&&E0?null:l;default:return null}}function qS(l,c){if(Wc)return l==="compositionend"||!Cd&&_0(l,c)?(l=ig(),So=Sd=Yn=null,Wc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return mg&&c.locale!=="ko"?null:c.data;default:return null}}var KS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yh(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!KS[l.type]:c==="textarea"}function gg(l,c,g,y){Dt(y),c=_h(c,"onChange"),0<c.length&&(g=new hh("onChange","change",null,g,y),l.push({event:g,listeners:c}))}var ms=null,za=null;function GS(l){D0(l,0)}function bh(l){var c=Bt(l);if(mt(c))return l}function YS(l,c){if(l==="change")return c}var zl=!1;if(a){var Qi;if(a){var xh="oninput"in document;if(!xh){var R0=document.createElement("div");R0.setAttribute("oninput","return;"),xh=typeof R0.oninput=="function"}Qi=xh}else Qi=!1;zl=Qi&&(!document.documentMode||9<document.documentMode)}function I0(){ms&&(ms.detachEvent("onpropertychange",M0),za=ms=null)}function M0(l){if(l.propertyName==="value"&&bh(za)){var c=[];gg(c,za,l,ki(l)),G(GS,c)}}function QS(l,c,g){l==="focusin"?(I0(),ms=c,za=g,ms.attachEvent("onpropertychange",M0)):l==="focusout"&&I0()}function JS(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return bh(za)}function qc(l,c){if(l==="click")return bh(c)}function oe(l,c){if(l==="input"||l==="change")return bh(c)}function Me(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var we=typeof Object.is=="function"?Object.is:Me;function tt(l,c){if(we(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var g=Object.keys(l),y=Object.keys(c);if(g.length!==y.length)return!1;for(y=0;y<g.length;y++){var T=g[y];if(!u.call(c,T)||!we(l[T],c[T]))return!1}return!0}function jt(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function gn(l,c){var g=jt(l);l=0;for(var y;g;){if(g.nodeType===3){if(y=l+g.textContent.length,l<=c&&y>=c)return{node:g,offset:c-l};l=y}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=jt(g)}}function gr(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?gr(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function On(){for(var l=window,c=Et();c instanceof l.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)l=c.contentWindow;else break;c=Et(l.document)}return c}function kd(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}function XS(l){var c=On(),g=l.focusedElem,y=l.selectionRange;if(c!==g&&g&&g.ownerDocument&&gr(g.ownerDocument.documentElement,g)){if(y!==null&&kd(g)){if(c=y.start,l=y.end,l===void 0&&(l=c),"selectionStart"in g)g.selectionStart=c,g.selectionEnd=Math.min(l,g.value.length);else if(l=(c=g.ownerDocument||document)&&c.defaultView||window,l.getSelection){l=l.getSelection();var T=g.textContent.length,P=Math.min(y.start,T);y=y.end===void 0?P:Math.min(y.end,T),!l.extend&&P>y&&(T=y,y=P,P=T),T=gn(g,P);var L=gn(g,y);T&&L&&(l.rangeCount!==1||l.anchorNode!==T.node||l.anchorOffset!==T.offset||l.focusNode!==L.node||l.focusOffset!==L.offset)&&(c=c.createRange(),c.setStart(T.node,T.offset),l.removeAllRanges(),P>y?(l.addRange(c),l.extend(L.node,L.offset)):(c.setEnd(L.node,L.offset),l.addRange(c)))}}for(c=[],l=g;l=l.parentNode;)l.nodeType===1&&c.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<c.length;g++)l=c[g],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var gs=a&&"documentMode"in document&&11>=document.documentMode,Zo=null,vg=null,Co=null,Kc=!1;function Td(l,c,g){var y=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Kc||Zo==null||Zo!==Et(y)||(y=Zo,"selectionStart"in y&&kd(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Co&&tt(Co,y)||(Co=y,y=_h(vg,"onSelect"),0<y.length&&(c=new hh("onSelect","select",null,c,g),l.push({event:c,listeners:y}),c.target=Zo)))}function vn(l,c){var g={};return g[l.toLowerCase()]=c.toLowerCase(),g["Webkit"+l]="webkit"+c,g["Moz"+l]="moz"+c,g}var Gc={animationend:vn("Animation","AnimationEnd"),animationiteration:vn("Animation","AnimationIteration"),animationstart:vn("Animation","AnimationStart"),transitionend:vn("Transition","TransitionEnd")},wh={},Ed={};a&&(Ed=document.createElement("div").style,"AnimationEvent"in window||(delete Gc.animationend.animation,delete Gc.animationiteration.animation,delete Gc.animationstart.animation),"TransitionEvent"in window||delete Gc.transitionend.transition);function Sh(l){if(wh[l])return wh[l];if(!Gc[l])return l;var c=Gc[l],g;for(g in c)if(c.hasOwnProperty(g)&&g in Ed)return wh[l]=c[g];return l}var A0=Sh("animationend"),N0=Sh("animationiteration"),_d=Sh("animationstart"),ea=Sh("transitionend"),Pd=new Map,yg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qs(l,c){Pd.set(l,c),s(c,[l])}for(var Ch=0;Ch<yg.length;Ch++){var kh=yg[Ch],Th=kh.toLowerCase(),O0=kh[0].toUpperCase()+kh.slice(1);Qs(Th,"on"+O0)}Qs(A0,"onAnimationEnd"),Qs(N0,"onAnimationIteration"),Qs(_d,"onAnimationStart"),Qs("dblclick","onDoubleClick"),Qs("focusin","onFocus"),Qs("focusout","onBlur"),Qs(ea,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$l=new Set("cancel close invalid load scroll toggle".split(" ").concat(ta));function Rd(l,c,g){var y=l.type||"unknown-event";l.currentTarget=g,yt(y,c,void 0,l),l.currentTarget=null}function D0(l,c){c=(c&4)!==0;for(var g=0;g<l.length;g++){var y=l[g],T=y.event;y=y.listeners;e:{var P=void 0;if(c)for(var L=y.length-1;0<=L;L--){var $=y[L],Z=$.instance,Ce=$.currentTarget;if($=$.listener,Z!==P&&T.isPropagationStopped())break e;Rd(T,$,Ce),P=Z}else for(L=0;L<y.length;L++){if($=y[L],Z=$.instance,Ce=$.currentTarget,$=$.listener,Z!==P&&T.isPropagationStopped())break e;Rd(T,$,Ce),P=Z}}}if(ct)throw l=xt,ct=!1,xt=null,l}function Hn(l,c){var g=c[Ih];g===void 0&&(g=c[Ih]=new Set);var y=l+"__bubble";g.has(y)||(Eh(c,l,2,!1),g.add(y))}function bg(l,c,g){var y=0;c&&(y|=4),Eh(g,l,y,c)}var Wl="_reactListening"+Math.random().toString(36).slice(2);function $a(l){if(!l[Wl]){l[Wl]=!0,r.forEach(function(g){g!=="selectionchange"&&($l.has(g)||bg(g,!1,l),bg(g,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[Wl]||(c[Wl]=!0,bg("selectionchange",!1,c))}}function Eh(l,c,g,y){switch(g0(c)){case 1:var T=US;break;case 4:T=VS;break;default:T=rg}g=T.bind(null,c,g,l),T=void 0,!Se||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(T=!0),y?T!==void 0?l.addEventListener(c,g,{capture:!0,passive:T}):l.addEventListener(c,g,!0):T!==void 0?l.addEventListener(c,g,{passive:T}):l.addEventListener(c,g,!1)}function xg(l,c,g,y,T){var P=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var L=y.tag;if(L===3||L===4){var $=y.stateNode.containerInfo;if($===T||$.nodeType===8&&$.parentNode===T)break;if(L===4)for(L=y.return;L!==null;){var Z=L.tag;if((Z===3||Z===4)&&(Z=L.stateNode.containerInfo,Z===T||Z.nodeType===8&&Z.parentNode===T))return;L=L.return}for(;$!==null;){if(L=To($),L===null)return;if(Z=L.tag,Z===5||Z===6){y=P=L;continue e}$=$.parentNode}}y=y.return}G(function(){var Ce=P,Ue=ki(g),$e=[];e:{var Fe=Pd.get(l);if(Fe!==void 0){var nt=hh,ut=l;switch(l){case"keypress":if(Bc(g)===0)break e;case"keydown":case"keyup":nt=w0;break;case"focusin":ut="focus",nt=zn;break;case"focusout":ut="blur",nt=zn;break;case"beforeblur":case"afterblur":nt=zn;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=ag;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=mh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=WS;break;case A0:case N0:case _d:nt=cg;break;case ea:nt=pg;break;case"scroll":nt=v0;break;case"wheel":nt=C0;break;case"copy":case"cut":case"paste":nt=ug;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=vh}var pt=(c&4)!==0,ur=!pt&&l==="scroll",he=pt?Fe!==null?Fe+"Capture":null:Fe;pt=[];for(var ne=Ce,ve;ne!==null;){ve=ne;var Ke=ve.stateNode;if(ve.tag===5&&Ke!==null&&(ve=Ke,he!==null&&(Ke=re(ne,he),Ke!=null&&pt.push(Yc(ne,Ke,ve)))),ur)break;ne=ne.return}0<pt.length&&(Fe=new nt(Fe,ut,null,g,Ue),$e.push({event:Fe,listeners:pt}))}}if((c&7)===0){e:{if(Fe=l==="mouseover"||l==="pointerover",nt=l==="mouseout"||l==="pointerout",Fe&&g!==Ci&&(ut=g.relatedTarget||g.fromElement)&&(To(ut)||ut[Ji]))break e;if((nt||Fe)&&(Fe=Ue.window===Ue?Ue:(Fe=Ue.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,nt?(ut=g.relatedTarget||g.toElement,nt=Ce,ut=ut?To(ut):null,ut!==null&&(ur=Mt(ut),ut!==ur||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(nt=null,ut=Ce),nt!==ut)){if(pt=ag,Ke="onMouseLeave",he="onMouseEnter",ne="mouse",(l==="pointerout"||l==="pointerover")&&(pt=vh,Ke="onPointerLeave",he="onPointerEnter",ne="pointer"),ur=nt==null?Fe:Bt(nt),ve=ut==null?Fe:Bt(ut),Fe=new pt(Ke,ne+"leave",nt,g,Ue),Fe.target=ur,Fe.relatedTarget=ve,Ke=null,To(Ue)===Ce&&(pt=new pt(he,ne+"enter",ut,g,Ue),pt.target=ve,pt.relatedTarget=ur,Ke=pt),ur=Ke,nt&&ut)t:{for(pt=nt,he=ut,ne=0,ve=pt;ve;ve=Qc(ve))ne++;for(ve=0,Ke=he;Ke;Ke=Qc(Ke))ve++;for(;0<ne-ve;)pt=Qc(pt),ne--;for(;0<ve-ne;)he=Qc(he),ve--;for(;ne--;){if(pt===he||he!==null&&pt===he.alternate)break t;pt=Qc(pt),he=Qc(he)}pt=null}else pt=null;nt!==null&&vr($e,Fe,nt,pt,!1),ut!==null&&ur!==null&&vr($e,ur,ut,pt,!0)}}e:{if(Fe=Ce?Bt(Ce):window,nt=Fe.nodeName&&Fe.nodeName.toLowerCase(),nt==="select"||nt==="input"&&Fe.type==="file")var gt=YS;else if(yh(Fe))if(zl)gt=oe;else{gt=JS;var _t=QS}else(nt=Fe.nodeName)&&nt.toLowerCase()==="input"&&(Fe.type==="checkbox"||Fe.type==="radio")&&(gt=qc);if(gt&&(gt=gt(l,Ce))){gg($e,gt,g,Ue);break e}_t&&_t(l,Fe,Ce),l==="focusout"&&(_t=Fe._wrapperState)&&_t.controlled&&Fe.type==="number"&&En(Fe,"number",Fe.value)}switch(_t=Ce?Bt(Ce):window,l){case"focusin":(yh(_t)||_t.contentEditable==="true")&&(Zo=_t,vg=Ce,Co=null);break;case"focusout":Co=vg=Zo=null;break;case"mousedown":Kc=!0;break;case"contextmenu":case"mouseup":case"dragend":Kc=!1,Td($e,g,Ue);break;case"selectionchange":if(gs)break;case"keydown":case"keyup":Td($e,g,Ue)}var kt;if(Cd)e:{switch(l){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else Wc?_0(l,g)&&(At="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(At="onCompositionStart");At&&(mg&&g.locale!=="ko"&&(Wc||At!=="onCompositionStart"?At==="onCompositionEnd"&&Wc&&(kt=ig()):(Yn=Ue,Sd="value"in Yn?Yn.value:Yn.textContent,Wc=!0)),_t=_h(Ce,At),0<_t.length&&(At=new y0(At,l,null,g,Ue),$e.push({event:At,listeners:_t}),kt?At.data=kt:(kt=P0(g),kt!==null&&(At.data=kt)))),(kt=k0?Hc(l,g):qS(l,g))&&(Ce=_h(Ce,"onBeforeInput"),0<Ce.length&&(Ue=new y0("onBeforeInput","beforeinput",null,g,Ue),$e.push({event:Ue,listeners:Ce}),Ue.data=kt))}D0($e,c)})}function Yc(l,c,g){return{instance:l,listener:c,currentTarget:g}}function _h(l,c){for(var g=c+"Capture",y=[];l!==null;){var T=l,P=T.stateNode;T.tag===5&&P!==null&&(T=P,P=re(l,g),P!=null&&y.unshift(Yc(l,P,T)),P=re(l,c),P!=null&&y.push(Yc(l,P,T))),l=l.return}return y}function Qc(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function vr(l,c,g,y,T){for(var P=c._reactName,L=[];g!==null&&g!==y;){var $=g,Z=$.alternate,Ce=$.stateNode;if(Z!==null&&Z===y)break;$.tag===5&&Ce!==null&&($=Ce,T?(Z=re(g,P),Z!=null&&L.unshift(Yc(g,Z,$))):T||(Z=re(g,P),Z!=null&&L.push(Yc(g,Z,$)))),g=g.return}L.length!==0&&l.push({event:c,listeners:L})}var fi=/\r\n?/g,ZS=/\u0000|\uFFFD/g;function L0(l){return(typeof l=="string"?l:""+l).replace(fi,`
`).replace(ZS,"")}function Id(l,c,g){if(c=L0(c),L0(l)!==c&&g)throw Error(n(425))}function Ph(){}var Md=null,Hl=null;function Ad(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Wa=typeof setTimeout=="function"?setTimeout:void 0,Nd=typeof clearTimeout=="function"?clearTimeout:void 0,Jc=typeof Promise=="function"?Promise:void 0,Rh=typeof queueMicrotask=="function"?queueMicrotask:typeof Jc<"u"?function(l){return Jc.resolve(null).then(l).catch(Xc)}:Wa;function Xc(l){setTimeout(function(){throw l})}function wg(l,c){var g=c,y=0;do{var T=g.nextSibling;if(l.removeChild(g),T&&T.nodeType===8)if(g=T.data,g==="/$"){if(y===0){l.removeChild(T),Cn(c);return}y--}else g!=="$"&&g!=="$?"&&g!=="$!"||y++;g=T}while(g);Cn(c)}function Ha(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return l}function j0(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"){if(c===0)return l;c--}else g==="/$"&&c++}l=l.previousSibling}return null}var Zc=Math.random().toString(36).slice(2),ko="__reactFiber$"+Zc,qa="__reactProps$"+Zc,Ji="__reactContainer$"+Zc,Ih="__reactEvents$"+Zc,F="__reactListeners$"+Zc,eu="__reactHandles$"+Zc;function To(l){var c=l[ko];if(c)return c;for(var g=l.parentNode;g;){if(c=g[Ji]||g[ko]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(l=j0(l);l!==null;){if(g=l[ko])return g;l=j0(l)}return c}l=g,g=l.parentNode}return null}function hi(l){return l=l[ko]||l[Ji],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Bt(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(n(33))}function Mh(l){return l[qa]||null}var Sg=[],tu=-1;function ji(l){return{current:l}}function qn(l){0>tu||(l.current=Sg[tu],Sg[tu]=null,tu--)}function $n(l,c){tu++,Sg[tu]=l.current,l.current=c}var Ka={},pi=ji(Ka),Fi=ji(!1),_i=Ka;function nu(l,c){var g=l.type.contextTypes;if(!g)return Ka;var y=l.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var T={},P;for(P in g)T[P]=c[P];return y&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=c,l.__reactInternalMemoizedMaskedChildContext=T),T}function Ui(l){return l=l.childContextTypes,l!=null}function Ah(){qn(Fi),qn(pi)}function F0(l,c,g){if(pi.current!==Ka)throw Error(n(168));$n(pi,c),$n(Fi,g)}function U0(l,c,g){var y=l.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return g;y=y.getChildContext();for(var T in y)if(!(T in c))throw Error(n(108,de(l)||"Unknown",T));return ae({},g,y)}function vs(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Ka,_i=pi.current,$n(pi,l),$n(Fi,Fi.current),!0}function V0(l,c,g){var y=l.stateNode;if(!y)throw Error(n(169));g?(l=U0(l,c,_i),y.__reactInternalMemoizedMergedChildContext=l,qn(Fi),qn(pi),$n(pi,l)):qn(Fi),$n(Fi,g)}var na=null,Nh=!1,Cg=!1;function B0(l){na===null?na=[l]:na.push(l)}function ql(l){Nh=!0,B0(l)}function Ga(){if(!Cg&&na!==null){Cg=!0;var l=0,c=bn;try{var g=na;for(bn=1;l<g.length;l++){var y=g[l];do y=y(!0);while(y!==null)}na=null,Nh=!1}catch(T){throw na!==null&&(na=na.slice(l+1)),xo(Gs,Ga),T}finally{bn=c,Cg=!1}}return null}var ru=[],mi=0,Oh=null,Dh=0,ys=[],bs=0,Kl=null,Eo=1,_o="";function Gl(l,c){ru[mi++]=Dh,ru[mi++]=Oh,Oh=l,Dh=c}function z0(l,c,g){ys[bs++]=Eo,ys[bs++]=_o,ys[bs++]=Kl,Kl=l;var y=Eo;l=_o;var T=32-ui(y)-1;y&=~(1<<T),g+=1;var P=32-ui(c)+T;if(30<P){var L=T-T%5;P=(y&(1<<L)-1).toString(32),y>>=L,T-=L,Eo=1<<32-ui(c)+T|g<<T|y,_o=P+l}else Eo=1<<P|g<<T|y,_o=l}function Od(l){l.return!==null&&(Gl(l,1),z0(l,1,0))}function Yl(l){for(;l===Oh;)Oh=ru[--mi],ru[mi]=null,Dh=ru[--mi],ru[mi]=null;for(;l===Kl;)Kl=ys[--bs],ys[bs]=null,_o=ys[--bs],ys[bs]=null,Eo=ys[--bs],ys[bs]=null}var gi=null,Xi=null,Kn=!1,Js=null;function Po(l,c){var g=Es(5,null,null,0);g.elementType="DELETED",g.stateNode=c,g.return=l,c=l.deletions,c===null?(l.deletions=[g],l.flags|=16):c.push(g)}function Lh(l,c){switch(l.tag){case 5:var g=l.type;return c=c.nodeType!==1||g.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(l.stateNode=c,gi=l,Xi=Ha(c.firstChild),!0):!1;case 6:return c=l.pendingProps===""||c.nodeType!==3?null:c,c!==null?(l.stateNode=c,gi=l,Xi=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(g=Kl!==null?{id:Eo,overflow:_o}:null,l.memoizedState={dehydrated:c,treeContext:g,retryLane:1073741824},g=Es(18,null,null,0),g.stateNode=c,g.return=l,l.child=g,gi=l,Xi=null,!0):!1;default:return!1}}function ra(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Vi(l){if(Kn){var c=Xi;if(c){var g=c;if(!Lh(l,c)){if(ra(l))throw Error(n(418));c=Ha(g.nextSibling);var y=gi;c&&Lh(l,c)?Po(y,g):(l.flags=l.flags&-4097|2,Kn=!1,gi=l)}}else{if(ra(l))throw Error(n(418));l.flags=l.flags&-4097|2,Kn=!1,gi=l}}}function $0(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;gi=l}function Dd(l){if(l!==gi)return!1;if(!Kn)return $0(l),Kn=!0,!1;var c;if((c=l.tag!==3)&&!(c=l.tag!==5)&&(c=l.type,c=c!=="head"&&c!=="body"&&!Ad(l.type,l.memoizedProps)),c&&(c=Xi)){if(ra(l))throw kg(),Error(n(418));for(;c;)Po(l,c),c=Ha(c.nextSibling)}if($0(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8){var g=l.data;if(g==="/$"){if(c===0){Xi=Ha(l.nextSibling);break e}c--}else g!=="$"&&g!=="$!"&&g!=="$?"||c++}l=l.nextSibling}Xi=null}}else Xi=gi?Ha(l.stateNode.nextSibling):null;return!0}function kg(){for(var l=Xi;l;)l=Ha(l.nextSibling)}function Ro(){Xi=gi=null,Kn=!1}function Io(l){Js===null?Js=[l]:Js.push(l)}var W0=I.ReactCurrentBatchConfig;function Ld(l,c,g){if(l=g.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(n(309));var y=g.stateNode}if(!y)throw Error(n(147,l));var T=y,P=""+l;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===P?c.ref:(c=function(L){var $=T.refs;L===null?delete $[P]:$[P]=L},c._stringRef=P,c)}if(typeof l!="string")throw Error(n(284));if(!g._owner)throw Error(n(290,l))}return l}function Ql(l,c){throw l=Object.prototype.toString.call(c),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l))}function H0(l){var c=l._init;return c(l._payload)}function Tg(l){function c(he,ne){if(l){var ve=he.deletions;ve===null?(he.deletions=[ne],he.flags|=16):ve.push(ne)}}function g(he,ne){if(!l)return null;for(;ne!==null;)c(he,ne),ne=ne.sibling;return null}function y(he,ne){for(he=new Map;ne!==null;)ne.key!==null?he.set(ne.key,ne):he.set(ne.index,ne),ne=ne.sibling;return he}function T(he,ne){return he=io(he,ne),he.index=0,he.sibling=null,he}function P(he,ne,ve){return he.index=ve,l?(ve=he.alternate,ve!==null?(ve=ve.index,ve<ne?(he.flags|=2,ne):ve):(he.flags|=2,ne)):(he.flags|=1048576,ne)}function L(he){return l&&he.alternate===null&&(he.flags|=2),he}function $(he,ne,ve,Ke){return ne===null||ne.tag!==6?(ne=dv(ve,he.mode,Ke),ne.return=he,ne):(ne=T(ne,ve),ne.return=he,ne)}function Z(he,ne,ve,Ke){var gt=ve.type;return gt===j?Ue(he,ne,ve.props.children,Ke,ve.key):ne!==null&&(ne.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===se&&H0(gt)===ne.type)?(Ke=T(ne,ve.props),Ke.ref=Ld(he,ne,ve),Ke.return=he,Ke):(Ke=vp(ve.type,ve.key,ve.props,null,he.mode,Ke),Ke.ref=Ld(he,ne,ve),Ke.return=he,Ke)}function Ce(he,ne,ve,Ke){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ve.containerInfo||ne.stateNode.implementation!==ve.implementation?(ne=fv(ve,he.mode,Ke),ne.return=he,ne):(ne=T(ne,ve.children||[]),ne.return=he,ne)}function Ue(he,ne,ve,Ke,gt){return ne===null||ne.tag!==7?(ne=ac(ve,he.mode,Ke,gt),ne.return=he,ne):(ne=T(ne,ve),ne.return=he,ne)}function $e(he,ne,ve){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=dv(""+ne,he.mode,ve),ne.return=he,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case N:return ve=vp(ne.type,ne.key,ne.props,null,he.mode,ve),ve.ref=Ld(he,null,ne),ve.return=he,ve;case O:return ne=fv(ne,he.mode,ve),ne.return=he,ne;case se:var Ke=ne._init;return $e(he,Ke(ne._payload),ve)}if(Q(ne)||te(ne))return ne=ac(ne,he.mode,ve,null),ne.return=he,ne;Ql(he,ne)}return null}function Fe(he,ne,ve,Ke){var gt=ne!==null?ne.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number")return gt!==null?null:$(he,ne,""+ve,Ke);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case N:return ve.key===gt?Z(he,ne,ve,Ke):null;case O:return ve.key===gt?Ce(he,ne,ve,Ke):null;case se:return gt=ve._init,Fe(he,ne,gt(ve._payload),Ke)}if(Q(ve)||te(ve))return gt!==null?null:Ue(he,ne,ve,Ke,null);Ql(he,ve)}return null}function nt(he,ne,ve,Ke,gt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return he=he.get(ve)||null,$(ne,he,""+Ke,gt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case N:return he=he.get(Ke.key===null?ve:Ke.key)||null,Z(ne,he,Ke,gt);case O:return he=he.get(Ke.key===null?ve:Ke.key)||null,Ce(ne,he,Ke,gt);case se:var _t=Ke._init;return nt(he,ne,ve,_t(Ke._payload),gt)}if(Q(Ke)||te(Ke))return he=he.get(ve)||null,Ue(ne,he,Ke,gt,null);Ql(ne,Ke)}return null}function ut(he,ne,ve,Ke){for(var gt=null,_t=null,kt=ne,At=ne=0,$r=null;kt!==null&&At<ve.length;At++){kt.index>At?($r=kt,kt=null):$r=kt.sibling;var yn=Fe(he,kt,ve[At],Ke);if(yn===null){kt===null&&(kt=$r);break}l&&kt&&yn.alternate===null&&c(he,kt),ne=P(yn,ne,At),_t===null?gt=yn:_t.sibling=yn,_t=yn,kt=$r}if(At===ve.length)return g(he,kt),Kn&&Gl(he,At),gt;if(kt===null){for(;At<ve.length;At++)kt=$e(he,ve[At],Ke),kt!==null&&(ne=P(kt,ne,At),_t===null?gt=kt:_t.sibling=kt,_t=kt);return Kn&&Gl(he,At),gt}for(kt=y(he,kt);At<ve.length;At++)$r=nt(kt,he,At,ve[At],Ke),$r!==null&&(l&&$r.alternate!==null&&kt.delete($r.key===null?At:$r.key),ne=P($r,ne,At),_t===null?gt=$r:_t.sibling=$r,_t=$r);return l&&kt.forEach(function(ol){return c(he,ol)}),Kn&&Gl(he,At),gt}function pt(he,ne,ve,Ke){var gt=te(ve);if(typeof gt!="function")throw Error(n(150));if(ve=gt.call(ve),ve==null)throw Error(n(151));for(var _t=gt=null,kt=ne,At=ne=0,$r=null,yn=ve.next();kt!==null&&!yn.done;At++,yn=ve.next()){kt.index>At?($r=kt,kt=null):$r=kt.sibling;var ol=Fe(he,kt,yn.value,Ke);if(ol===null){kt===null&&(kt=$r);break}l&&kt&&ol.alternate===null&&c(he,kt),ne=P(ol,ne,At),_t===null?gt=ol:_t.sibling=ol,_t=ol,kt=$r}if(yn.done)return g(he,kt),Kn&&Gl(he,At),gt;if(kt===null){for(;!yn.done;At++,yn=ve.next())yn=$e(he,yn.value,Ke),yn!==null&&(ne=P(yn,ne,At),_t===null?gt=yn:_t.sibling=yn,_t=yn);return Kn&&Gl(he,At),gt}for(kt=y(he,kt);!yn.done;At++,yn=ve.next())yn=nt(kt,he,At,yn.value,Ke),yn!==null&&(l&&yn.alternate!==null&&kt.delete(yn.key===null?At:yn.key),ne=P(yn,ne,At),_t===null?gt=yn:_t.sibling=yn,_t=yn);return l&&kt.forEach(function(xC){return c(he,xC)}),Kn&&Gl(he,At),gt}function ur(he,ne,ve,Ke){if(typeof ve=="object"&&ve!==null&&ve.type===j&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case N:e:{for(var gt=ve.key,_t=ne;_t!==null;){if(_t.key===gt){if(gt=ve.type,gt===j){if(_t.tag===7){g(he,_t.sibling),ne=T(_t,ve.props.children),ne.return=he,he=ne;break e}}else if(_t.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===se&&H0(gt)===_t.type){g(he,_t.sibling),ne=T(_t,ve.props),ne.ref=Ld(he,_t,ve),ne.return=he,he=ne;break e}g(he,_t);break}else c(he,_t);_t=_t.sibling}ve.type===j?(ne=ac(ve.props.children,he.mode,Ke,ve.key),ne.return=he,he=ne):(Ke=vp(ve.type,ve.key,ve.props,null,he.mode,Ke),Ke.ref=Ld(he,ne,ve),Ke.return=he,he=Ke)}return L(he);case O:e:{for(_t=ve.key;ne!==null;){if(ne.key===_t)if(ne.tag===4&&ne.stateNode.containerInfo===ve.containerInfo&&ne.stateNode.implementation===ve.implementation){g(he,ne.sibling),ne=T(ne,ve.children||[]),ne.return=he,he=ne;break e}else{g(he,ne);break}else c(he,ne);ne=ne.sibling}ne=fv(ve,he.mode,Ke),ne.return=he,he=ne}return L(he);case se:return _t=ve._init,ur(he,ne,_t(ve._payload),Ke)}if(Q(ve))return ut(he,ne,ve,Ke);if(te(ve))return pt(he,ne,ve,Ke);Ql(he,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"?(ve=""+ve,ne!==null&&ne.tag===6?(g(he,ne.sibling),ne=T(ne,ve),ne.return=he,he=ne):(g(he,ne),ne=dv(ve,he.mode,Ke),ne.return=he,he=ne),L(he)):g(he,ne)}return ur}var rr=Tg(!0),jh=Tg(!1),jd=ji(null),Zi=null,Ya=null,iu=null;function ia(){iu=Ya=Zi=null}function Fh(l){var c=jd.current;qn(jd),l._currentValue=c}function Qr(l,c,g){for(;l!==null;){var y=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),l===g)break;l=l.return}}function Qa(l,c){Zi=l,iu=Ya=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&c)!==0&&(Ri=!0),l.firstContext=null)}function xs(l){var c=l._currentValue;if(iu!==l)if(l={context:l,memoizedValue:c,next:null},Ya===null){if(Zi===null)throw Error(n(308));Ya=l,Zi.dependencies={lanes:0,firstContext:l}}else Ya=Ya.next=l;return c}var Jl=null;function Eg(l){Jl===null?Jl=[l]:Jl.push(l)}function Uh(l,c,g,y){var T=c.interleaved;return T===null?(g.next=g,Eg(c)):(g.next=T.next,T.next=g),c.interleaved=g,sa(l,y)}function sa(l,c){l.lanes|=c;var g=l.alternate;for(g!==null&&(g.lanes|=c),g=l,l=l.return;l!==null;)l.childLanes|=c,g=l.alternate,g!==null&&(g.childLanes|=c),g=l,l=l.return;return g.tag===3?g.stateNode:null}var ws=!1;function Vh(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function q0(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function oa(l,c){return{eventTime:l,lane:c,tag:0,payload:null,callback:null,next:null}}function Ss(l,c,g){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(hn&2)!==0){var T=y.pending;return T===null?c.next=c:(c.next=T.next,T.next=c),y.pending=c,sa(l,g)}return T=y.interleaved,T===null?(c.next=c,Eg(y)):(c.next=T.next,T.next=c),y.interleaved=c,sa(l,g)}function Bh(l,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194240)!==0)){var y=c.lanes;y&=l.pendingLanes,g|=y,c.lanes=g,bd(l,g)}}function K0(l,c){var g=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,g===y)){var T=null,P=null;if(g=g.firstBaseUpdate,g!==null){do{var L={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};P===null?T=P=L:P=P.next=L,g=g.next}while(g!==null);P===null?T=P=c:P=P.next=c}else T=P=c;g={baseState:y.baseState,firstBaseUpdate:T,lastBaseUpdate:P,shared:y.shared,effects:y.effects},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=c:l.next=c,g.lastBaseUpdate=c}function su(l,c,g,y){var T=l.updateQueue;ws=!1;var P=T.firstBaseUpdate,L=T.lastBaseUpdate,$=T.shared.pending;if($!==null){T.shared.pending=null;var Z=$,Ce=Z.next;Z.next=null,L===null?P=Ce:L.next=Ce,L=Z;var Ue=l.alternate;Ue!==null&&(Ue=Ue.updateQueue,$=Ue.lastBaseUpdate,$!==L&&($===null?Ue.firstBaseUpdate=Ce:$.next=Ce,Ue.lastBaseUpdate=Z))}if(P!==null){var $e=T.baseState;L=0,Ue=Ce=Z=null,$=P;do{var Fe=$.lane,nt=$.eventTime;if((y&Fe)===Fe){Ue!==null&&(Ue=Ue.next={eventTime:nt,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var ut=l,pt=$;switch(Fe=c,nt=g,pt.tag){case 1:if(ut=pt.payload,typeof ut=="function"){$e=ut.call(nt,$e,Fe);break e}$e=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=pt.payload,Fe=typeof ut=="function"?ut.call(nt,$e,Fe):ut,Fe==null)break e;$e=ae({},$e,Fe);break e;case 2:ws=!0}}$.callback!==null&&$.lane!==0&&(l.flags|=64,Fe=T.effects,Fe===null?T.effects=[$]:Fe.push($))}else nt={eventTime:nt,lane:Fe,tag:$.tag,payload:$.payload,callback:$.callback,next:null},Ue===null?(Ce=Ue=nt,Z=$e):Ue=Ue.next=nt,L|=Fe;if($=$.next,$===null){if($=T.shared.pending,$===null)break;Fe=$,$=Fe.next,Fe.next=null,T.lastBaseUpdate=Fe,T.shared.pending=null}}while(!0);if(Ue===null&&(Z=$e),T.baseState=Z,T.firstBaseUpdate=Ce,T.lastBaseUpdate=Ue,c=T.shared.interleaved,c!==null){T=c;do L|=T.lane,T=T.next;while(T!==c)}else P===null&&(T.shared.lanes=0);tl|=L,l.lanes=L,l.memoizedState=$e}}function _g(l,c,g){if(l=c.effects,c.effects=null,l!==null)for(c=0;c<l.length;c++){var y=l[c],T=y.callback;if(T!==null){if(y.callback=null,y=g,typeof T!="function")throw Error(n(191,T));T.call(y)}}}var Fd={},Mo=ji(Fd),Ud=ji(Fd),ou=ji(Fd);function aa(l){if(l===Fd)throw Error(n(174));return l}function Pg(l,c){switch($n(ou,c),$n(Ud,l),$n(Mo,Fd),l=c.nodeType,l){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Ne(null,"");break;default:l=l===8?c.parentNode:c,c=l.namespaceURI||null,l=l.tagName,c=Ne(c,l)}qn(Mo),$n(Mo,c)}function Ja(){qn(Mo),qn(Ud),qn(ou)}function Rg(l){aa(ou.current);var c=aa(Mo.current),g=Ne(c,l.type);c!==g&&($n(Ud,l),$n(Mo,g))}function zh(l){Ud.current===l&&(qn(Mo),qn(Ud))}var Qn=ji(0);function Xl(l){for(var c=l;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Ig=[];function $h(){for(var l=0;l<Ig.length;l++)Ig[l]._workInProgressVersionPrimary=null;Ig.length=0}var Vd=I.ReactCurrentDispatcher,Mg=I.ReactCurrentBatchConfig,Xa=0,Zn=null,cr=null,Rr=null,au=!1,Bd=!1,Zl=0,Ht=0;function vi(){throw Error(n(321))}function Ag(l,c){if(c===null)return!1;for(var g=0;g<c.length&&g<l.length;g++)if(!we(l[g],c[g]))return!1;return!0}function ec(l,c,g,y,T,P){if(Xa=P,Zn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Vd.current=l===null||l.memoizedState===null?tC:Qh,l=g(y,T),Bd){P=0;do{if(Bd=!1,Zl=0,25<=P)throw Error(n(301));P+=1,Rr=cr=null,c.updateQueue=null,Vd.current=du,l=g(y,T)}while(Bd)}if(Vd.current=Yh,c=cr!==null&&cr.next!==null,Xa=0,Rr=cr=Zn=null,au=!1,c)throw Error(n(300));return l}function Wh(){var l=Zl!==0;return Zl=0,l}function Ao(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rr===null?Zn.memoizedState=Rr=l:Rr=Rr.next=l,Rr}function Cs(){if(cr===null){var l=Zn.alternate;l=l!==null?l.memoizedState:null}else l=cr.next;var c=Rr===null?Zn.memoizedState:Rr.next;if(c!==null)Rr=c,cr=l;else{if(l===null)throw Error(n(310));cr=l,l={memoizedState:cr.memoizedState,baseState:cr.baseState,baseQueue:cr.baseQueue,queue:cr.queue,next:null},Rr===null?Zn.memoizedState=Rr=l:Rr=Rr.next=l}return Rr}function yi(l,c){return typeof c=="function"?c(l):c}function Ng(l){var c=Cs(),g=c.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=l;var y=cr,T=y.baseQueue,P=g.pending;if(P!==null){if(T!==null){var L=T.next;T.next=P.next,P.next=L}y.baseQueue=T=P,g.pending=null}if(T!==null){P=T.next,y=y.baseState;var $=L=null,Z=null,Ce=P;do{var Ue=Ce.lane;if((Xa&Ue)===Ue)Z!==null&&(Z=Z.next={lane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),y=Ce.hasEagerState?Ce.eagerState:l(y,Ce.action);else{var $e={lane:Ue,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null};Z===null?($=Z=$e,L=y):Z=Z.next=$e,Zn.lanes|=Ue,tl|=Ue}Ce=Ce.next}while(Ce!==null&&Ce!==P);Z===null?L=y:Z.next=$,we(y,c.memoizedState)||(Ri=!0),c.memoizedState=y,c.baseState=L,c.baseQueue=Z,g.lastRenderedState=y}if(l=g.interleaved,l!==null){T=l;do P=T.lane,Zn.lanes|=P,tl|=P,T=T.next;while(T!==l)}else T===null&&(g.lanes=0);return[c.memoizedState,g.dispatch]}function lu(l){var c=Cs(),g=c.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=l;var y=g.dispatch,T=g.pending,P=c.memoizedState;if(T!==null){g.pending=null;var L=T=T.next;do P=l(P,L.action),L=L.next;while(L!==T);we(P,c.memoizedState)||(Ri=!0),c.memoizedState=P,c.baseQueue===null&&(c.baseState=P),g.lastRenderedState=P}return[P,y]}function Hh(){}function Og(l,c){var g=Zn,y=Cs(),T=c(),P=!we(y.memoizedState,T);if(P&&(y.memoizedState=T,Ri=!0),y=y.queue,No(la.bind(null,g,y,l),[l]),y.getSnapshot!==c||P||Rr!==null&&Rr.memoizedState.tag&1){if(g.flags|=2048,cu(9,Bi.bind(null,g,y,T,c),void 0,null),zr===null)throw Error(n(349));(Xa&30)!==0||Dg(g,c,T)}return T}function Dg(l,c,g){l.flags|=16384,l={getSnapshot:c,value:g},c=Zn.updateQueue,c===null?(c={lastEffect:null,stores:null},Zn.updateQueue=c,c.stores=[l]):(g=c.stores,g===null?c.stores=[l]:g.push(l))}function Bi(l,c,g,y){c.value=g,c.getSnapshot=y,qh(c)&&Lg(l)}function la(l,c,g){return g(function(){qh(c)&&Lg(l)})}function qh(l){var c=l.getSnapshot;l=l.value;try{var g=c();return!we(l,g)}catch{return!0}}function Lg(l){var c=sa(l,1);c!==null&&ro(c,l,1,-1)}function zd(l){var c=Ao();return typeof l=="function"&&(l=l()),c.memoizedState=c.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:l},c.queue=l,l=l.dispatch=Z0.bind(null,Zn,l),[c.memoizedState,l]}function cu(l,c,g,y){return l={tag:l,create:c,destroy:g,deps:y,next:null},c=Zn.updateQueue,c===null?(c={lastEffect:null,stores:null},Zn.updateQueue=c,c.lastEffect=l.next=l):(g=c.lastEffect,g===null?c.lastEffect=l.next=l:(y=g.next,g.next=l,l.next=y,c.lastEffect=l)),l}function Kh(){return Cs().memoizedState}function $d(l,c,g,y){var T=Ao();Zn.flags|=l,T.memoizedState=cu(1|c,g,void 0,y===void 0?null:y)}function uu(l,c,g,y){var T=Cs();y=y===void 0?null:y;var P=void 0;if(cr!==null){var L=cr.memoizedState;if(P=L.destroy,y!==null&&Ag(y,L.deps)){T.memoizedState=cu(c,g,P,y);return}}Zn.flags|=l,T.memoizedState=cu(1|c,g,P,y)}function Gh(l,c){return $d(8390656,8,l,c)}function No(l,c){return uu(2048,8,l,c)}function G0(l,c){return uu(4,2,l,c)}function ca(l,c){return uu(4,4,l,c)}function jg(l,c){if(typeof c=="function")return l=l(),c(l),function(){c(null)};if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function Fg(l,c,g){return g=g!=null?g.concat([l]):null,uu(4,4,jg.bind(null,c,l),g)}function Wd(){}function Y0(l,c){var g=Cs();c=c===void 0?null:c;var y=g.memoizedState;return y!==null&&c!==null&&Ag(c,y[1])?y[0]:(g.memoizedState=[l,c],l)}function Q0(l,c){var g=Cs();c=c===void 0?null:c;var y=g.memoizedState;return y!==null&&c!==null&&Ag(c,y[1])?y[0]:(l=l(),g.memoizedState=[l,c],l)}function J0(l,c,g){return(Xa&21)===0?(l.baseState&&(l.baseState=!1,Ri=!0),l.memoizedState=g):(we(g,c)||(g=Zm(),Zn.lanes|=g,tl|=g,l.baseState=!0),c)}function X0(l,c){var g=bn;bn=g!==0&&4>g?g:4,l(!0);var y=Mg.transition;Mg.transition={};try{l(!1),c()}finally{bn=g,Mg.transition=y}}function Ug(){return Cs().memoizedState}function eC(l,c,g){var y=il(l);if(g={lane:y,action:g,hasEagerState:!1,eagerState:null,next:null},Vg(l))Pi(c,g);else if(g=Uh(l,c,g,y),g!==null){var T=Ai();ro(g,l,y,T),Xs(g,c,y)}}function Z0(l,c,g){var y=il(l),T={lane:y,action:g,hasEagerState:!1,eagerState:null,next:null};if(Vg(l))Pi(c,T);else{var P=l.alternate;if(l.lanes===0&&(P===null||P.lanes===0)&&(P=c.lastRenderedReducer,P!==null))try{var L=c.lastRenderedState,$=P(L,g);if(T.hasEagerState=!0,T.eagerState=$,we($,L)){var Z=c.interleaved;Z===null?(T.next=T,Eg(c)):(T.next=Z.next,Z.next=T),c.interleaved=T;return}}catch{}finally{}g=Uh(l,c,T,y),g!==null&&(T=Ai(),ro(g,l,y,T),Xs(g,c,y))}}function Vg(l){var c=l.alternate;return l===Zn||c!==null&&c===Zn}function Pi(l,c){Bd=au=!0;var g=l.pending;g===null?c.next=c:(c.next=g.next,g.next=c),l.pending=c}function Xs(l,c,g){if((g&4194240)!==0){var y=c.lanes;y&=l.pendingLanes,g|=y,c.lanes=g,bd(l,g)}}var Yh={readContext:xs,useCallback:vi,useContext:vi,useEffect:vi,useImperativeHandle:vi,useInsertionEffect:vi,useLayoutEffect:vi,useMemo:vi,useReducer:vi,useRef:vi,useState:vi,useDebugValue:vi,useDeferredValue:vi,useTransition:vi,useMutableSource:vi,useSyncExternalStore:vi,useId:vi,unstable_isNewReconciler:!1},tC={readContext:xs,useCallback:function(l,c){return Ao().memoizedState=[l,c===void 0?null:c],l},useContext:xs,useEffect:Gh,useImperativeHandle:function(l,c,g){return g=g!=null?g.concat([l]):null,$d(4194308,4,jg.bind(null,c,l),g)},useLayoutEffect:function(l,c){return $d(4194308,4,l,c)},useInsertionEffect:function(l,c){return $d(4,2,l,c)},useMemo:function(l,c){var g=Ao();return c=c===void 0?null:c,l=l(),g.memoizedState=[l,c],l},useReducer:function(l,c,g){var y=Ao();return c=g!==void 0?g(c):c,y.memoizedState=y.baseState=c,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:c},y.queue=l,l=l.dispatch=eC.bind(null,Zn,l),[y.memoizedState,l]},useRef:function(l){var c=Ao();return l={current:l},c.memoizedState=l},useState:zd,useDebugValue:Wd,useDeferredValue:function(l){return Ao().memoizedState=l},useTransition:function(){var l=zd(!1),c=l[0];return l=X0.bind(null,l[1]),Ao().memoizedState=l,[c,l]},useMutableSource:function(){},useSyncExternalStore:function(l,c,g){var y=Zn,T=Ao();if(Kn){if(g===void 0)throw Error(n(407));g=g()}else{if(g=c(),zr===null)throw Error(n(349));(Xa&30)!==0||Dg(y,c,g)}T.memoizedState=g;var P={value:g,getSnapshot:c};return T.queue=P,Gh(la.bind(null,y,P,l),[l]),y.flags|=2048,cu(9,Bi.bind(null,y,P,g,c),void 0,null),g},useId:function(){var l=Ao(),c=zr.identifierPrefix;if(Kn){var g=_o,y=Eo;g=(y&~(1<<32-ui(y)-1)).toString(32)+g,c=":"+c+"R"+g,g=Zl++,0<g&&(c+="H"+g.toString(32)),c+=":"}else g=Ht++,c=":"+c+"r"+g.toString(32)+":";return l.memoizedState=c},unstable_isNewReconciler:!1},Qh={readContext:xs,useCallback:Y0,useContext:xs,useEffect:No,useImperativeHandle:Fg,useInsertionEffect:G0,useLayoutEffect:ca,useMemo:Q0,useReducer:Ng,useRef:Kh,useState:function(){return Ng(yi)},useDebugValue:Wd,useDeferredValue:function(l){var c=Cs();return J0(c,cr.memoizedState,l)},useTransition:function(){var l=Ng(yi)[0],c=Cs().memoizedState;return[l,c]},useMutableSource:Hh,useSyncExternalStore:Og,useId:Ug,unstable_isNewReconciler:!1},du={readContext:xs,useCallback:Y0,useContext:xs,useEffect:No,useImperativeHandle:Fg,useInsertionEffect:G0,useLayoutEffect:ca,useMemo:Q0,useReducer:lu,useRef:Kh,useState:function(){return lu(yi)},useDebugValue:Wd,useDeferredValue:function(l){var c=Cs();return cr===null?c.memoizedState=l:J0(c,cr.memoizedState,l)},useTransition:function(){var l=lu(yi)[0],c=Cs().memoizedState;return[l,c]},useMutableSource:Hh,useSyncExternalStore:Og,useId:Ug,unstable_isNewReconciler:!1};function ks(l,c){if(l&&l.defaultProps){c=ae({},c),l=l.defaultProps;for(var g in l)c[g]===void 0&&(c[g]=l[g]);return c}return c}function Jh(l,c,g,y){c=l.memoizedState,g=g(y,c),g=g==null?c:ae({},c,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var Xh={isMounted:function(l){return(l=l._reactInternals)?Mt(l)===l:!1},enqueueSetState:function(l,c,g){l=l._reactInternals;var y=Ai(),T=il(l),P=oa(y,T);P.payload=c,g!=null&&(P.callback=g),c=Ss(l,P,T),c!==null&&(ro(c,l,T,y),Bh(c,l,T))},enqueueReplaceState:function(l,c,g){l=l._reactInternals;var y=Ai(),T=il(l),P=oa(y,T);P.tag=1,P.payload=c,g!=null&&(P.callback=g),c=Ss(l,P,T),c!==null&&(ro(c,l,T,y),Bh(c,l,T))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var g=Ai(),y=il(l),T=oa(g,y);T.tag=2,c!=null&&(T.callback=c),c=Ss(l,T,y),c!==null&&(ro(c,l,y,g),Bh(c,l,y))}};function Bg(l,c,g,y,T,P,L){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,P,L):c.prototype&&c.prototype.isPureReactComponent?!tt(g,y)||!tt(T,P):!0}function tc(l,c,g){var y=!1,T=Ka,P=c.contextType;return typeof P=="object"&&P!==null?P=xs(P):(T=Ui(c)?_i:pi.current,y=c.contextTypes,P=(y=y!=null)?nu(l,T):Ka),c=new c(g,P),l.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Xh,l.stateNode=c,c._reactInternals=l,y&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=T,l.__reactInternalMemoizedMaskedChildContext=P),c}function fu(l,c,g,y){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,y),c.state!==l&&Xh.enqueueReplaceState(c,c.state,null)}function zg(l,c,g,y){var T=l.stateNode;T.props=g,T.state=l.memoizedState,T.refs={},Vh(l);var P=c.contextType;typeof P=="object"&&P!==null?T.context=xs(P):(P=Ui(c)?_i:pi.current,T.context=nu(l,P)),T.state=l.memoizedState,P=c.getDerivedStateFromProps,typeof P=="function"&&(Jh(l,c,P,g),T.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(c=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),c!==T.state&&Xh.enqueueReplaceState(T,T.state,null),su(l,g,T,y),T.state=l.memoizedState),typeof T.componentDidMount=="function"&&(l.flags|=4194308)}function nc(l,c){try{var g="",y=c;do g+=ke(y),y=y.return;while(y);var T=g}catch(P){T=`
Error generating stack: `+P.message+`
`+P.stack}return{value:l,source:c,stack:T,digest:null}}function Zh(l,c,g){return{value:l,source:null,stack:g??null,digest:c??null}}function hu(l,c){try{console.error(c.value)}catch(g){setTimeout(function(){throw g})}}var eb=typeof WeakMap=="function"?WeakMap:Map;function Hd(l,c,g){g=oa(-1,g),g.tag=3,g.payload={element:null};var y=c.value;return g.callback=function(){up||(up=!0,iv=y),hu(l,c)},g}function ep(l,c,g){g=oa(-1,g),g.tag=3;var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var T=c.value;g.payload=function(){return y(T)},g.callback=function(){hu(l,c)}}var P=l.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(g.callback=function(){hu(l,c),typeof y!="function"&&(nl===null?nl=new Set([this]):nl.add(this));var L=c.stack;this.componentDidCatch(c.value,{componentStack:L!==null?L:""})}),g}function qd(l,c,g){var y=l.pingCache;if(y===null){y=l.pingCache=new eb;var T=new Set;y.set(c,T)}else T=y.get(c),T===void 0&&(T=new Set,y.set(c,T));T.has(g)||(T.add(g),l=cC.bind(null,l,c,g),c.then(l,l))}function tb(l){do{var c;if((c=l.tag===13)&&(c=l.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return l;l=l.return}while(l!==null);return null}function $g(l,c,g,y,T){return(l.mode&1)===0?(l===c?l.flags|=65536:(l.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(c=oa(-1,1),c.tag=2,Ss(g,c,1))),g.lanes|=1),l):(l.flags|=65536,l.lanes=T,l)}var tp=I.ReactCurrentOwner,Ri=!1;function Jr(l,c,g,y){c.child=l===null?jh(c,null,g,y):rr(c,l.child,g,y)}function nb(l,c,g,y,T){g=g.render;var P=c.ref;return Qa(c,T),y=ec(l,c,g,y,P,T),g=Wh(),l!==null&&!Ri?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~T,Zs(l,c,T)):(Kn&&g&&Od(c),c.flags|=1,Jr(l,c,y,T),c.child)}function Wg(l,c,g,y,T){if(l===null){var P=g.type;return typeof P=="function"&&!gp(P)&&P.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(c.tag=15,c.type=P,Oo(l,c,P,y,T)):(l=vp(g.type,null,y,c,c.mode,T),l.ref=c.ref,l.return=c,c.child=l)}if(P=l.child,(l.lanes&T)===0){var L=P.memoizedProps;if(g=g.compare,g=g!==null?g:tt,g(L,y)&&l.ref===c.ref)return Zs(l,c,T)}return c.flags|=1,l=io(P,y),l.ref=c.ref,l.return=c,c.child=l}function Oo(l,c,g,y,T){if(l!==null){var P=l.memoizedProps;if(tt(P,y)&&l.ref===c.ref)if(Ri=!1,c.pendingProps=y=P,(l.lanes&T)!==0)(l.flags&131072)!==0&&(Ri=!0);else return c.lanes=l.lanes,Zs(l,c,T)}return Kg(l,c,g,y,T)}function Hg(l,c,g){var y=c.pendingProps,T=y.children,P=l!==null?l.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},$n(vu,ts),ts|=g;else{if((g&1073741824)===0)return l=P!==null?P.baseLanes|g:g,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:l,cachePool:null,transitions:null},c.updateQueue=null,$n(vu,ts),ts|=l,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=P!==null?P.baseLanes:g,$n(vu,ts),ts|=y}else P!==null?(y=P.baseLanes|g,c.memoizedState=null):y=g,$n(vu,ts),ts|=y;return Jr(l,c,T,g),c.child}function qg(l,c){var g=c.ref;(l===null&&g!==null||l!==null&&l.ref!==g)&&(c.flags|=512,c.flags|=2097152)}function Kg(l,c,g,y,T){var P=Ui(g)?_i:pi.current;return P=nu(c,P),Qa(c,T),g=ec(l,c,g,y,P,T),y=Wh(),l!==null&&!Ri?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~T,Zs(l,c,T)):(Kn&&y&&Od(c),c.flags|=1,Jr(l,c,g,T),c.child)}function Gg(l,c,g,y,T){if(Ui(g)){var P=!0;vs(c)}else P=!1;if(Qa(c,T),c.stateNode===null)rp(l,c),tc(c,g,y),zg(c,g,y,T),y=!0;else if(l===null){var L=c.stateNode,$=c.memoizedProps;L.props=$;var Z=L.context,Ce=g.contextType;typeof Ce=="object"&&Ce!==null?Ce=xs(Ce):(Ce=Ui(g)?_i:pi.current,Ce=nu(c,Ce));var Ue=g.getDerivedStateFromProps,$e=typeof Ue=="function"||typeof L.getSnapshotBeforeUpdate=="function";$e||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||($!==y||Z!==Ce)&&fu(c,L,y,Ce),ws=!1;var Fe=c.memoizedState;L.state=Fe,su(c,y,L,T),Z=c.memoizedState,$!==y||Fe!==Z||Fi.current||ws?(typeof Ue=="function"&&(Jh(c,g,Ue,y),Z=c.memoizedState),($=ws||Bg(c,g,$,y,Fe,Z,Ce))?($e||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(c.flags|=4194308)):(typeof L.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=Z),L.props=y,L.state=Z,L.context=Ce,y=$):(typeof L.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{L=c.stateNode,q0(l,c),$=c.memoizedProps,Ce=c.type===c.elementType?$:ks(c.type,$),L.props=Ce,$e=c.pendingProps,Fe=L.context,Z=g.contextType,typeof Z=="object"&&Z!==null?Z=xs(Z):(Z=Ui(g)?_i:pi.current,Z=nu(c,Z));var nt=g.getDerivedStateFromProps;(Ue=typeof nt=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||($!==$e||Fe!==Z)&&fu(c,L,y,Z),ws=!1,Fe=c.memoizedState,L.state=Fe,su(c,y,L,T);var ut=c.memoizedState;$!==$e||Fe!==ut||Fi.current||ws?(typeof nt=="function"&&(Jh(c,g,nt,y),ut=c.memoizedState),(Ce=ws||Bg(c,g,Ce,y,Fe,ut,Z)||!1)?(Ue||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(y,ut,Z),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(y,ut,Z)),typeof L.componentDidUpdate=="function"&&(c.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof L.componentDidUpdate!="function"||$===l.memoizedProps&&Fe===l.memoizedState||(c.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||$===l.memoizedProps&&Fe===l.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=ut),L.props=y,L.state=ut,L.context=Z,y=Ce):(typeof L.componentDidUpdate!="function"||$===l.memoizedProps&&Fe===l.memoizedState||(c.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||$===l.memoizedProps&&Fe===l.memoizedState||(c.flags|=1024),y=!1)}return Yg(l,c,g,y,P,T)}function Yg(l,c,g,y,T,P){qg(l,c);var L=(c.flags&128)!==0;if(!y&&!L)return T&&V0(c,g,!1),Zs(l,c,P);y=c.stateNode,tp.current=c;var $=L&&typeof g.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,l!==null&&L?(c.child=rr(c,l.child,null,P),c.child=rr(c,null,$,P)):Jr(l,c,$,P),c.memoizedState=y.state,T&&V0(c,g,!0),c.child}function rb(l){var c=l.stateNode;c.pendingContext?F0(l,c.pendingContext,c.pendingContext!==c.context):c.context&&F0(l,c.context,!1),Pg(l,c.containerInfo)}function Do(l,c,g,y,T){return Ro(),Io(T),c.flags|=256,Jr(l,c,g,y),c.child}var Kd={dehydrated:null,treeContext:null,retryLane:0};function Gd(l){return{baseLanes:l,cachePool:null,transitions:null}}function np(l,c,g){var y=c.pendingProps,T=Qn.current,P=!1,L=(c.flags&128)!==0,$;if(($=L)||($=l!==null&&l.memoizedState===null?!1:(T&2)!==0),$?(P=!0,c.flags&=-129):(l===null||l.memoizedState!==null)&&(T|=1),$n(Qn,T&1),l===null)return Vi(c),l=c.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((c.mode&1)===0?c.lanes=1:l.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(L=y.children,l=y.fallback,P?(y=c.mode,P=c.child,L={mode:"hidden",children:L},(y&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=L):P=yp(L,y,0,null),l=ac(l,y,g,null),P.return=c,l.return=c,P.sibling=l,c.child=P,c.child.memoizedState=Gd(g),c.memoizedState=Kd,l):pu(c,L));if(T=l.memoizedState,T!==null&&($=T.dehydrated,$!==null))return Rt(l,c,L,y,$,T,g);if(P){P=y.fallback,L=c.mode,T=l.child,$=T.sibling;var Z={mode:"hidden",children:y.children};return(L&1)===0&&c.child!==T?(y=c.child,y.childLanes=0,y.pendingProps=Z,c.deletions=null):(y=io(T,Z),y.subtreeFlags=T.subtreeFlags&14680064),$!==null?P=io($,P):(P=ac(P,L,g,null),P.flags|=2),P.return=c,y.return=c,y.sibling=P,c.child=y,y=P,P=c.child,L=l.child.memoizedState,L=L===null?Gd(g):{baseLanes:L.baseLanes|g,cachePool:null,transitions:L.transitions},P.memoizedState=L,P.childLanes=l.childLanes&~g,c.memoizedState=Kd,y}return P=l.child,l=P.sibling,y=io(P,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=g),y.return=c,y.sibling=null,l!==null&&(g=c.deletions,g===null?(c.deletions=[l],c.flags|=16):g.push(l)),c.child=y,c.memoizedState=null,y}function pu(l,c){return c=yp({mode:"visible",children:c},l.mode,0,null),c.return=l,l.child=c}function ua(l,c,g,y){return y!==null&&Io(y),rr(c,l.child,null,g),l=pu(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function Rt(l,c,g,y,T,P,L){if(g)return c.flags&256?(c.flags&=-257,y=Zh(Error(n(422))),ua(l,c,L,y)):c.memoizedState!==null?(c.child=l.child,c.flags|=128,null):(P=y.fallback,T=c.mode,y=yp({mode:"visible",children:y.children},T,0,null),P=ac(P,T,L,null),P.flags|=2,y.return=c,P.return=c,y.sibling=P,c.child=y,(c.mode&1)!==0&&rr(c,l.child,null,L),c.child.memoizedState=Gd(L),c.memoizedState=Kd,P);if((c.mode&1)===0)return ua(l,c,L,null);if(T.data==="$!"){if(y=T.nextSibling&&T.nextSibling.dataset,y)var $=y.dgst;return y=$,P=Error(n(419)),y=Zh(P,y,void 0),ua(l,c,L,y)}if($=(L&l.childLanes)!==0,Ri||$){if(y=zr,y!==null){switch(L&-L){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(y.suspendedLanes|L))!==0?0:T,T!==0&&T!==P.retryLane&&(P.retryLane=T,sa(l,T),ro(y,l,T,-1))}return uv(),y=Zh(Error(n(421))),ua(l,c,L,y)}return T.data==="$?"?(c.flags|=128,c.child=l.child,c=uC.bind(null,l),T._reactRetry=c,null):(l=P.treeContext,Xi=Ha(T.nextSibling),gi=c,Kn=!0,Js=null,l!==null&&(ys[bs++]=Eo,ys[bs++]=_o,ys[bs++]=Kl,Eo=l.id,_o=l.overflow,Kl=c),c=pu(c,y.children),c.flags|=4096,c)}function Yd(l,c,g){l.lanes|=c;var y=l.alternate;y!==null&&(y.lanes|=c),Qr(l.return,c,g)}function Qd(l,c,g,y,T){var P=l.memoizedState;P===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:g,tailMode:T}:(P.isBackwards=c,P.rendering=null,P.renderingStartTime=0,P.last=y,P.tail=g,P.tailMode=T)}function Za(l,c,g){var y=c.pendingProps,T=y.revealOrder,P=y.tail;if(Jr(l,c,y.children,g),y=Qn.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Yd(l,g,c);else if(l.tag===19)Yd(l,g,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}if($n(Qn,y),(c.mode&1)===0)c.memoizedState=null;else switch(T){case"forwards":for(g=c.child,T=null;g!==null;)l=g.alternate,l!==null&&Xl(l)===null&&(T=g),g=g.sibling;g=T,g===null?(T=c.child,c.child=null):(T=g.sibling,g.sibling=null),Qd(c,!1,T,g,P);break;case"backwards":for(g=null,T=c.child,c.child=null;T!==null;){if(l=T.alternate,l!==null&&Xl(l)===null){c.child=T;break}l=T.sibling,T.sibling=g,g=T,T=l}Qd(c,!0,g,null,P);break;case"together":Qd(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function rp(l,c){(c.mode&1)===0&&l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2)}function Zs(l,c,g){if(l!==null&&(c.dependencies=l.dependencies),tl|=c.lanes,(g&c.childLanes)===0)return null;if(l!==null&&c.child!==l.child)throw Error(n(153));if(c.child!==null){for(l=c.child,g=io(l,l.pendingProps),c.child=g,g.return=c;l.sibling!==null;)l=l.sibling,g=g.sibling=io(l,l.pendingProps),g.return=c;g.sibling=null}return c.child}function ib(l,c,g){switch(c.tag){case 3:rb(c),Ro();break;case 5:Rg(c);break;case 1:Ui(c.type)&&vs(c);break;case 4:Pg(c,c.stateNode.containerInfo);break;case 10:var y=c.type._context,T=c.memoizedProps.value;$n(jd,y._currentValue),y._currentValue=T;break;case 13:if(y=c.memoizedState,y!==null)return y.dehydrated!==null?($n(Qn,Qn.current&1),c.flags|=128,null):(g&c.child.childLanes)!==0?np(l,c,g):($n(Qn,Qn.current&1),l=Zs(l,c,g),l!==null?l.sibling:null);$n(Qn,Qn.current&1);break;case 19:if(y=(g&c.childLanes)!==0,(l.flags&128)!==0){if(y)return Za(l,c,g);c.flags|=128}if(T=c.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),$n(Qn,Qn.current),y)break;return null;case 22:case 23:return c.lanes=0,Hg(l,c,g)}return Zs(l,c,g)}var Xr,Qg,sb,Jg;Xr=function(l,c){for(var g=c.child;g!==null;){if(g.tag===5||g.tag===6)l.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Qg=function(){},sb=function(l,c,g,y){var T=l.memoizedProps;if(T!==y){l=c.stateNode,aa(Mo.current);var P=null;switch(g){case"input":T=Ct(l,T),y=Ct(l,y),P=[];break;case"select":T=ae({},T,{value:void 0}),y=ae({},y,{value:void 0}),P=[];break;case"textarea":T=ye(l,T),y=ye(l,y),P=[];break;default:typeof T.onClick!="function"&&typeof y.onClick=="function"&&(l.onclick=Ph)}ci(g,y);var L;g=null;for(Ce in T)if(!y.hasOwnProperty(Ce)&&T.hasOwnProperty(Ce)&&T[Ce]!=null)if(Ce==="style"){var $=T[Ce];for(L in $)$.hasOwnProperty(L)&&(g||(g={}),g[L]="")}else Ce!=="dangerouslySetInnerHTML"&&Ce!=="children"&&Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&Ce!=="autoFocus"&&(i.hasOwnProperty(Ce)?P||(P=[]):(P=P||[]).push(Ce,null));for(Ce in y){var Z=y[Ce];if($=T!=null?T[Ce]:void 0,y.hasOwnProperty(Ce)&&Z!==$&&(Z!=null||$!=null))if(Ce==="style")if($){for(L in $)!$.hasOwnProperty(L)||Z&&Z.hasOwnProperty(L)||(g||(g={}),g[L]="");for(L in Z)Z.hasOwnProperty(L)&&$[L]!==Z[L]&&(g||(g={}),g[L]=Z[L])}else g||(P||(P=[]),P.push(Ce,g)),g=Z;else Ce==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,$=$?$.__html:void 0,Z!=null&&$!==Z&&(P=P||[]).push(Ce,Z)):Ce==="children"?typeof Z!="string"&&typeof Z!="number"||(P=P||[]).push(Ce,""+Z):Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ce)?(Z!=null&&Ce==="onScroll"&&Hn("scroll",l),P||$===Z||(P=[])):(P=P||[]).push(Ce,Z))}g&&(P=P||[]).push("style",g);var Ce=P;(c.updateQueue=Ce)&&(c.flags|=4)}},Jg=function(l,c,g,y){g!==y&&(c.flags|=4)};function Jd(l,c){if(!Kn)switch(l.tailMode){case"hidden":c=l.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var y=null;g!==null;)g.alternate!==null&&(y=g),g=g.sibling;y===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function Zr(l){var c=l.alternate!==null&&l.alternate.child===l.child,g=0,y=0;if(c)for(var T=l.child;T!==null;)g|=T.lanes|T.childLanes,y|=T.subtreeFlags&14680064,y|=T.flags&14680064,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)g|=T.lanes|T.childLanes,y|=T.subtreeFlags,y|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=y,l.childLanes=g,c}function nC(l,c,g){var y=c.pendingProps;switch(Yl(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zr(c),null;case 1:return Ui(c.type)&&Ah(),Zr(c),null;case 3:return y=c.stateNode,Ja(),qn(Fi),qn(pi),$h(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(l===null||l.child===null)&&(Dd(c)?c.flags|=4:l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Js!==null&&(av(Js),Js=null))),Qg(l,c),Zr(c),null;case 5:zh(c);var T=aa(ou.current);if(g=c.type,l!==null&&c.stateNode!=null)sb(l,c,g,y,T),l.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(n(166));return Zr(c),null}if(l=aa(Mo.current),Dd(c)){y=c.stateNode,g=c.type;var P=c.memoizedProps;switch(y[ko]=c,y[qa]=P,l=(c.mode&1)!==0,g){case"dialog":Hn("cancel",y),Hn("close",y);break;case"iframe":case"object":case"embed":Hn("load",y);break;case"video":case"audio":for(T=0;T<ta.length;T++)Hn(ta[T],y);break;case"source":Hn("error",y);break;case"img":case"image":case"link":Hn("error",y),Hn("load",y);break;case"details":Hn("toggle",y);break;case"input":jn(y,P),Hn("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!P.multiple},Hn("invalid",y);break;case"textarea":qe(y,P),Hn("invalid",y)}ci(g,P),T=null;for(var L in P)if(P.hasOwnProperty(L)){var $=P[L];L==="children"?typeof $=="string"?y.textContent!==$&&(P.suppressHydrationWarning!==!0&&Id(y.textContent,$,l),T=["children",$]):typeof $=="number"&&y.textContent!==""+$&&(P.suppressHydrationWarning!==!0&&Id(y.textContent,$,l),T=["children",""+$]):i.hasOwnProperty(L)&&$!=null&&L==="onScroll"&&Hn("scroll",y)}switch(g){case"input":dt(y),Mn(y,P,!0);break;case"textarea":dt(y),Be(y);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(y.onclick=Ph)}y=T,c.updateQueue=y,y!==null&&(c.flags|=4)}else{L=T.nodeType===9?T:T.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Xe(g)),l==="http://www.w3.org/1999/xhtml"?g==="script"?(l=L.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof y.is=="string"?l=L.createElement(g,{is:y.is}):(l=L.createElement(g),g==="select"&&(L=l,y.multiple?L.multiple=!0:y.size&&(L.size=y.size))):l=L.createElementNS(l,g),l[ko]=c,l[qa]=y,Xr(l,c,!1,!1),c.stateNode=l;e:{switch(L=Ur(g,y),g){case"dialog":Hn("cancel",l),Hn("close",l),T=y;break;case"iframe":case"object":case"embed":Hn("load",l),T=y;break;case"video":case"audio":for(T=0;T<ta.length;T++)Hn(ta[T],l);T=y;break;case"source":Hn("error",l),T=y;break;case"img":case"image":case"link":Hn("error",l),Hn("load",l),T=y;break;case"details":Hn("toggle",l),T=y;break;case"input":jn(l,y),T=Ct(l,y),Hn("invalid",l);break;case"option":T=y;break;case"select":l._wrapperState={wasMultiple:!!y.multiple},T=ae({},y,{value:void 0}),Hn("invalid",l);break;case"textarea":qe(l,y),T=ye(l,y),Hn("invalid",l);break;default:T=y}ci(g,T),$=T;for(P in $)if($.hasOwnProperty(P)){var Z=$[P];P==="style"?_n(l,Z):P==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&$t(l,Z)):P==="children"?typeof Z=="string"?(g!=="textarea"||Z!=="")&&cn(l,Z):typeof Z=="number"&&cn(l,""+Z):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(i.hasOwnProperty(P)?Z!=null&&P==="onScroll"&&Hn("scroll",l):Z!=null&&A(l,P,Z,L))}switch(g){case"input":dt(l),Mn(l,y,!1);break;case"textarea":dt(l),Be(l);break;case"option":y.value!=null&&l.setAttribute("value",""+ge(y.value));break;case"select":l.multiple=!!y.multiple,P=y.value,P!=null?le(l,!!y.multiple,P,!1):y.defaultValue!=null&&le(l,!!y.multiple,y.defaultValue,!0);break;default:typeof T.onClick=="function"&&(l.onclick=Ph)}switch(g){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Zr(c),null;case 6:if(l&&c.stateNode!=null)Jg(l,c,l.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(n(166));if(g=aa(ou.current),aa(Mo.current),Dd(c)){if(y=c.stateNode,g=c.memoizedProps,y[ko]=c,(P=y.nodeValue!==g)&&(l=gi,l!==null))switch(l.tag){case 3:Id(y.nodeValue,g,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Id(y.nodeValue,g,(l.mode&1)!==0)}P&&(c.flags|=4)}else y=(g.nodeType===9?g:g.ownerDocument).createTextNode(y),y[ko]=c,c.stateNode=y}return Zr(c),null;case 13:if(qn(Qn),y=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Kn&&Xi!==null&&(c.mode&1)!==0&&(c.flags&128)===0)kg(),Ro(),c.flags|=98560,P=!1;else if(P=Dd(c),y!==null&&y.dehydrated!==null){if(l===null){if(!P)throw Error(n(318));if(P=c.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(n(317));P[ko]=c}else Ro(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Zr(c),P=!1}else Js!==null&&(av(Js),Js=null),P=!0;if(!P)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=g,c):(y=y!==null,y!==(l!==null&&l.memoizedState!==null)&&y&&(c.child.flags|=8192,(c.mode&1)!==0&&(l===null||(Qn.current&1)!==0?Ir===0&&(Ir=3):uv())),c.updateQueue!==null&&(c.flags|=4),Zr(c),null);case 4:return Ja(),Qg(l,c),l===null&&$a(c.stateNode.containerInfo),Zr(c),null;case 10:return Fh(c.type._context),Zr(c),null;case 17:return Ui(c.type)&&Ah(),Zr(c),null;case 19:if(qn(Qn),P=c.memoizedState,P===null)return Zr(c),null;if(y=(c.flags&128)!==0,L=P.rendering,L===null)if(y)Jd(P,!1);else{if(Ir!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(L=Xl(l),L!==null){for(c.flags|=128,Jd(P,!1),y=L.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=g,g=c.child;g!==null;)P=g,l=y,P.flags&=14680066,L=P.alternate,L===null?(P.childLanes=0,P.lanes=l,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=L.childLanes,P.lanes=L.lanes,P.child=L.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=L.memoizedProps,P.memoizedState=L.memoizedState,P.updateQueue=L.updateQueue,P.type=L.type,l=L.dependencies,P.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),g=g.sibling;return $n(Qn,Qn.current&1|2),c.child}l=l.sibling}P.tail!==null&&Nn()>rc&&(c.flags|=128,y=!0,Jd(P,!1),c.lanes=4194304)}else{if(!y)if(l=Xl(L),l!==null){if(c.flags|=128,y=!0,g=l.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),Jd(P,!0),P.tail===null&&P.tailMode==="hidden"&&!L.alternate&&!Kn)return Zr(c),null}else 2*Nn()-P.renderingStartTime>rc&&g!==1073741824&&(c.flags|=128,y=!0,Jd(P,!1),c.lanes=4194304);P.isBackwards?(L.sibling=c.child,c.child=L):(g=P.last,g!==null?g.sibling=L:c.child=L,P.last=L)}return P.tail!==null?(c=P.tail,P.rendering=c,P.tail=c.sibling,P.renderingStartTime=Nn(),c.sibling=null,g=Qn.current,$n(Qn,y?g&1|2:g&1),c):(Zr(c),null);case 22:case 23:return cv(),y=c.memoizedState!==null,l!==null&&l.memoizedState!==null!==y&&(c.flags|=8192),y&&(c.mode&1)!==0?(ts&1073741824)!==0&&(Zr(c),c.subtreeFlags&6&&(c.flags|=8192)):Zr(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function rC(l,c){switch(Yl(c),c.tag){case 1:return Ui(c.type)&&Ah(),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return Ja(),qn(Fi),qn(pi),$h(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 5:return zh(c),null;case 13:if(qn(Qn),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Ro()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return qn(Qn),null;case 4:return Ja(),null;case 10:return Fh(c.type._context),null;case 22:case 23:return cv(),null;case 24:return null;default:return null}}var ip=!1,Jn=!1,Ii=typeof WeakSet=="function"?WeakSet:Set,st=null;function mu(l,c){var g=l.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(y){er(l,c,y)}else g.current=null}function Xd(l,c,g){try{g()}catch(y){er(l,c,y)}}var ob=!1;function iC(l,c){if(Md=uh,l=On(),kd(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else e:{g=(g=l.ownerDocument)&&g.defaultView||window;var y=g.getSelection&&g.getSelection();if(y&&y.rangeCount!==0){g=y.anchorNode;var T=y.anchorOffset,P=y.focusNode;y=y.focusOffset;try{g.nodeType,P.nodeType}catch{g=null;break e}var L=0,$=-1,Z=-1,Ce=0,Ue=0,$e=l,Fe=null;t:for(;;){for(var nt;$e!==g||T!==0&&$e.nodeType!==3||($=L+T),$e!==P||y!==0&&$e.nodeType!==3||(Z=L+y),$e.nodeType===3&&(L+=$e.nodeValue.length),(nt=$e.firstChild)!==null;)Fe=$e,$e=nt;for(;;){if($e===l)break t;if(Fe===g&&++Ce===T&&($=L),Fe===P&&++Ue===y&&(Z=L),(nt=$e.nextSibling)!==null)break;$e=Fe,Fe=$e.parentNode}$e=nt}g=$===-1||Z===-1?null:{start:$,end:Z}}else g=null}g=g||{start:0,end:0}}else g=null;for(Hl={focusedElem:l,selectionRange:g},uh=!1,st=c;st!==null;)if(c=st,l=c.child,(c.subtreeFlags&1028)!==0&&l!==null)l.return=c,st=l;else for(;st!==null;){c=st;try{var ut=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var pt=ut.memoizedProps,ur=ut.memoizedState,he=c.stateNode,ne=he.getSnapshotBeforeUpdate(c.elementType===c.type?pt:ks(c.type,pt),ur);he.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var ve=c.stateNode.containerInfo;ve.nodeType===1?ve.textContent="":ve.nodeType===9&&ve.documentElement&&ve.removeChild(ve.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ke){er(c,c.return,Ke)}if(l=c.sibling,l!==null){l.return=c.return,st=l;break}st=c.return}return ut=ob,ob=!1,ut}function da(l,c,g){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var T=y=y.next;do{if((T.tag&l)===l){var P=T.destroy;T.destroy=void 0,P!==void 0&&Xd(c,g,P)}T=T.next}while(T!==y)}}function Zd(l,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var g=c=c.next;do{if((g.tag&l)===l){var y=g.create;g.destroy=y()}g=g.next}while(g!==c)}}function sp(l){var c=l.ref;if(c!==null){var g=l.stateNode;switch(l.tag){case 5:l=g;break;default:l=g}typeof c=="function"?c(l):c.current=l}}function ab(l){var c=l.alternate;c!==null&&(l.alternate=null,ab(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&(delete c[ko],delete c[qa],delete c[Ih],delete c[F],delete c[eu])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function lb(l){return l.tag===5||l.tag===3||l.tag===4}function cb(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||lb(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Xg(l,c,g){var y=l.tag;if(y===5||y===6)l=l.stateNode,c?g.nodeType===8?g.parentNode.insertBefore(l,c):g.insertBefore(l,c):(g.nodeType===8?(c=g.parentNode,c.insertBefore(l,g)):(c=g,c.appendChild(l)),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=Ph));else if(y!==4&&(l=l.child,l!==null))for(Xg(l,c,g),l=l.sibling;l!==null;)Xg(l,c,g),l=l.sibling}function op(l,c,g){var y=l.tag;if(y===5||y===6)l=l.stateNode,c?g.insertBefore(l,c):g.appendChild(l);else if(y!==4&&(l=l.child,l!==null))for(op(l,c,g),l=l.sibling;l!==null;)op(l,c,g),l=l.sibling}var Br=null,eo=!1;function Lo(l,c,g){for(g=g.child;g!==null;)Zg(l,c,g),g=g.sibling}function Zg(l,c,g){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(Ys,g)}catch{}switch(g.tag){case 5:Jn||mu(g,c);case 6:var y=Br,T=eo;Br=null,Lo(l,c,g),Br=y,eo=T,Br!==null&&(eo?(l=Br,g=g.stateNode,l.nodeType===8?l.parentNode.removeChild(g):l.removeChild(g)):Br.removeChild(g.stateNode));break;case 18:Br!==null&&(eo?(l=Br,g=g.stateNode,l.nodeType===8?wg(l.parentNode,g):l.nodeType===1&&wg(l,g),Cn(l)):wg(Br,g.stateNode));break;case 4:y=Br,T=eo,Br=g.stateNode.containerInfo,eo=!0,Lo(l,c,g),Br=y,eo=T;break;case 0:case 11:case 14:case 15:if(!Jn&&(y=g.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){T=y=y.next;do{var P=T,L=P.destroy;P=P.tag,L!==void 0&&((P&2)!==0||(P&4)!==0)&&Xd(g,c,L),T=T.next}while(T!==y)}Lo(l,c,g);break;case 1:if(!Jn&&(mu(g,c),y=g.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=g.memoizedProps,y.state=g.memoizedState,y.componentWillUnmount()}catch($){er(g,c,$)}Lo(l,c,g);break;case 21:Lo(l,c,g);break;case 22:g.mode&1?(Jn=(y=Jn)||g.memoizedState!==null,Lo(l,c,g),Jn=y):Lo(l,c,g);break;default:Lo(l,c,g)}}function gu(l){var c=l.updateQueue;if(c!==null){l.updateQueue=null;var g=l.stateNode;g===null&&(g=l.stateNode=new Ii),c.forEach(function(y){var T=dC.bind(null,l,y);g.has(y)||(g.add(y),y.then(T,T))})}}function es(l,c){var g=c.deletions;if(g!==null)for(var y=0;y<g.length;y++){var T=g[y];try{var P=l,L=c,$=L;e:for(;$!==null;){switch($.tag){case 5:Br=$.stateNode,eo=!1;break e;case 3:Br=$.stateNode.containerInfo,eo=!0;break e;case 4:Br=$.stateNode.containerInfo,eo=!0;break e}$=$.return}if(Br===null)throw Error(n(160));Zg(P,L,T),Br=null,eo=!1;var Z=T.alternate;Z!==null&&(Z.return=null),T.return=null}catch(Ce){er(T,c,Ce)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)ev(c,l),c=c.sibling}function ev(l,c){var g=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(es(c,l),to(l),y&4){try{da(3,l,l.return),Zd(3,l)}catch(pt){er(l,l.return,pt)}try{da(5,l,l.return)}catch(pt){er(l,l.return,pt)}}break;case 1:es(c,l),to(l),y&512&&g!==null&&mu(g,g.return);break;case 5:if(es(c,l),to(l),y&512&&g!==null&&mu(g,g.return),l.flags&32){var T=l.stateNode;try{cn(T,"")}catch(pt){er(l,l.return,pt)}}if(y&4&&(T=l.stateNode,T!=null)){var P=l.memoizedProps,L=g!==null?g.memoizedProps:P,$=l.type,Z=l.updateQueue;if(l.updateQueue=null,Z!==null)try{$==="input"&&P.type==="radio"&&P.name!=null&&wn(T,P),Ur($,L);var Ce=Ur($,P);for(L=0;L<Z.length;L+=2){var Ue=Z[L],$e=Z[L+1];Ue==="style"?_n(T,$e):Ue==="dangerouslySetInnerHTML"?$t(T,$e):Ue==="children"?cn(T,$e):A(T,Ue,$e,Ce)}switch($){case"input":ln(T,P);break;case"textarea":Ge(T,P);break;case"select":var Fe=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!P.multiple;var nt=P.value;nt!=null?le(T,!!P.multiple,nt,!1):Fe!==!!P.multiple&&(P.defaultValue!=null?le(T,!!P.multiple,P.defaultValue,!0):le(T,!!P.multiple,P.multiple?[]:"",!1))}T[qa]=P}catch(pt){er(l,l.return,pt)}}break;case 6:if(es(c,l),to(l),y&4){if(l.stateNode===null)throw Error(n(162));T=l.stateNode,P=l.memoizedProps;try{T.nodeValue=P}catch(pt){er(l,l.return,pt)}}break;case 3:if(es(c,l),to(l),y&4&&g!==null&&g.memoizedState.isDehydrated)try{Cn(c.containerInfo)}catch(pt){er(l,l.return,pt)}break;case 4:es(c,l),to(l);break;case 13:es(c,l),to(l),T=l.child,T.flags&8192&&(P=T.memoizedState!==null,T.stateNode.isHidden=P,!P||T.alternate!==null&&T.alternate.memoizedState!==null||(rv=Nn())),y&4&&gu(l);break;case 22:if(Ue=g!==null&&g.memoizedState!==null,l.mode&1?(Jn=(Ce=Jn)||Ue,es(c,l),Jn=Ce):es(c,l),to(l),y&8192){if(Ce=l.memoizedState!==null,(l.stateNode.isHidden=Ce)&&!Ue&&(l.mode&1)!==0)for(st=l,Ue=l.child;Ue!==null;){for($e=st=Ue;st!==null;){switch(Fe=st,nt=Fe.child,Fe.tag){case 0:case 11:case 14:case 15:da(4,Fe,Fe.return);break;case 1:mu(Fe,Fe.return);var ut=Fe.stateNode;if(typeof ut.componentWillUnmount=="function"){y=Fe,g=Fe.return;try{c=y,ut.props=c.memoizedProps,ut.state=c.memoizedState,ut.componentWillUnmount()}catch(pt){er(y,g,pt)}}break;case 5:mu(Fe,Fe.return);break;case 22:if(Fe.memoizedState!==null){el($e);continue}}nt!==null?(nt.return=Fe,st=nt):el($e)}Ue=Ue.sibling}e:for(Ue=null,$e=l;;){if($e.tag===5){if(Ue===null){Ue=$e;try{T=$e.stateNode,Ce?(P=T.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):($=$e.stateNode,Z=$e.memoizedProps.style,L=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,$.style.display=fn("display",L))}catch(pt){er(l,l.return,pt)}}}else if($e.tag===6){if(Ue===null)try{$e.stateNode.nodeValue=Ce?"":$e.memoizedProps}catch(pt){er(l,l.return,pt)}}else if(($e.tag!==22&&$e.tag!==23||$e.memoizedState===null||$e===l)&&$e.child!==null){$e.child.return=$e,$e=$e.child;continue}if($e===l)break e;for(;$e.sibling===null;){if($e.return===null||$e.return===l)break e;Ue===$e&&(Ue=null),$e=$e.return}Ue===$e&&(Ue=null),$e.sibling.return=$e.return,$e=$e.sibling}}break;case 19:es(c,l),to(l),y&4&&gu(l);break;case 21:break;default:es(c,l),to(l)}}function to(l){var c=l.flags;if(c&2){try{e:{for(var g=l.return;g!==null;){if(lb(g)){var y=g;break e}g=g.return}throw Error(n(160))}switch(y.tag){case 5:var T=y.stateNode;y.flags&32&&(cn(T,""),y.flags&=-33);var P=cb(l);op(l,P,T);break;case 3:case 4:var L=y.stateNode.containerInfo,$=cb(l);Xg(l,$,L);break;default:throw Error(n(161))}}catch(Z){er(l,l.return,Z)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function ap(l,c,g){st=l,tv(l)}function tv(l,c,g){for(var y=(l.mode&1)!==0;st!==null;){var T=st,P=T.child;if(T.tag===22&&y){var L=T.memoizedState!==null||ip;if(!L){var $=T.alternate,Z=$!==null&&$.memoizedState!==null||Jn;$=ip;var Ce=Jn;if(ip=L,(Jn=Z)&&!Ce)for(st=T;st!==null;)L=st,Z=L.child,L.tag===22&&L.memoizedState!==null?ub(T):Z!==null?(Z.return=L,st=Z):ub(T);for(;P!==null;)st=P,tv(P),P=P.sibling;st=T,ip=$,Jn=Ce}no(l)}else(T.subtreeFlags&8772)!==0&&P!==null?(P.return=T,st=P):no(l)}}function no(l){for(;st!==null;){var c=st;if((c.flags&8772)!==0){var g=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Jn||Zd(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!Jn)if(g===null)y.componentDidMount();else{var T=c.elementType===c.type?g.memoizedProps:ks(c.type,g.memoizedProps);y.componentDidUpdate(T,g.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var P=c.updateQueue;P!==null&&_g(c,P,y);break;case 3:var L=c.updateQueue;if(L!==null){if(g=null,c.child!==null)switch(c.child.tag){case 5:g=c.child.stateNode;break;case 1:g=c.child.stateNode}_g(c,L,g)}break;case 5:var $=c.stateNode;if(g===null&&c.flags&4){g=$;var Z=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&g.focus();break;case"img":Z.src&&(g.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var Ce=c.alternate;if(Ce!==null){var Ue=Ce.memoizedState;if(Ue!==null){var $e=Ue.dehydrated;$e!==null&&Cn($e)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Jn||c.flags&512&&sp(c)}catch(Fe){er(c,c.return,Fe)}}if(c===l){st=null;break}if(g=c.sibling,g!==null){g.return=c.return,st=g;break}st=c.return}}function el(l){for(;st!==null;){var c=st;if(c===l){st=null;break}var g=c.sibling;if(g!==null){g.return=c.return,st=g;break}st=c.return}}function ub(l){for(;st!==null;){var c=st;try{switch(c.tag){case 0:case 11:case 15:var g=c.return;try{Zd(4,c)}catch(Z){er(c,g,Z)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var T=c.return;try{y.componentDidMount()}catch(Z){er(c,T,Z)}}var P=c.return;try{sp(c)}catch(Z){er(c,P,Z)}break;case 5:var L=c.return;try{sp(c)}catch(Z){er(c,L,Z)}}}catch(Z){er(c,c.return,Z)}if(c===l){st=null;break}var $=c.sibling;if($!==null){$.return=c.return,st=$;break}st=c.return}}var db=Math.ceil,lp=I.ReactCurrentDispatcher,nv=I.ReactCurrentOwner,Ts=I.ReactCurrentBatchConfig,hn=0,zr=null,yr=null,ei=0,ts=0,vu=ji(0),Ir=0,ef=null,tl=0,tf=0,cp=0,nf=null,zi=null,rv=0,rc=1/0,fa=null,up=!1,iv=null,nl=null,dp=!1,rl=null,Mi=0,rf=0,sv=null,fp=-1,sf=0;function Ai(){return(hn&6)!==0?Nn():fp!==-1?fp:fp=Nn()}function il(l){return(l.mode&1)===0?1:(hn&2)!==0&&ei!==0?ei&-ei:W0.transition!==null?(sf===0&&(sf=Zm()),sf):(l=bn,l!==0||(l=window.event,l=l===void 0?16:g0(l.type)),l)}function ro(l,c,g,y){if(50<rf)throw rf=0,sv=null,Error(n(185));yd(l,g,y),((hn&2)===0||l!==zr)&&(l===zr&&((hn&2)===0&&(tf|=g),Ir===4&&sl(l,ei)),$i(l,y),g===1&&hn===0&&(c.mode&1)===0&&(rc=Nn()+500,Nh&&Ga()))}function $i(l,c){var g=l.callbackNode;DS(l,c);var y=Fl(l,l===zr?ei:0);if(y===0)g!==null&&Da(g),l.callbackNode=null,l.callbackPriority=0;else if(c=y&-y,l.callbackPriority!==c){if(g!=null&&Da(g),c===1)l.tag===0?ql(fb.bind(null,l)):B0(fb.bind(null,l)),Rh(function(){(hn&6)===0&&Ga()}),g=null;else{switch(Ul(y)){case 1:g=Gs;break;case 4:g=jl;break;case 16:g=wo;break;case 536870912:g=mr;break;default:g=wo}g=bb(g,hp.bind(null,l))}l.callbackPriority=c,l.callbackNode=g}}function hp(l,c){if(fp=-1,sf=0,(hn&6)!==0)throw Error(n(327));var g=l.callbackNode;if(yu()&&l.callbackNode!==g)return null;var y=Fl(l,l===zr?ei:0);if(y===0)return null;if((y&30)!==0||(y&l.expiredLanes)!==0||c)c=pp(l,y);else{c=y;var T=hn;hn|=2;var P=pb();(zr!==l||ei!==c)&&(fa=null,rc=Nn()+500,sc(l,c));do try{aC();break}catch($){hb(l,$)}while(!0);ia(),lp.current=P,hn=T,yr!==null?c=0:(zr=null,ei=0,c=Ir)}if(c!==0){if(c===2&&(T=oh(l),T!==0&&(y=T,c=ov(l,T))),c===1)throw g=ef,sc(l,0),sl(l,y),$i(l,Nn()),g;if(c===6)sl(l,y);else{if(T=l.current.alternate,(y&30)===0&&!sC(T)&&(c=pp(l,y),c===2&&(P=oh(l),P!==0&&(y=P,c=ov(l,P))),c===1))throw g=ef,sc(l,0),sl(l,y),$i(l,Nn()),g;switch(l.finishedWork=T,l.finishedLanes=y,c){case 0:case 1:throw Error(n(345));case 2:oc(l,zi,fa);break;case 3:if(sl(l,y),(y&130023424)===y&&(c=rv+500-Nn(),10<c)){if(Fl(l,0)!==0)break;if(T=l.suspendedLanes,(T&y)!==y){Ai(),l.pingedLanes|=l.suspendedLanes&T;break}l.timeoutHandle=Wa(oc.bind(null,l,zi,fa),c);break}oc(l,zi,fa);break;case 4:if(sl(l,y),(y&4194240)===y)break;for(c=l.eventTimes,T=-1;0<y;){var L=31-ui(y);P=1<<L,L=c[L],L>T&&(T=L),y&=~P}if(y=T,y=Nn()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*db(y/1960))-y,10<y){l.timeoutHandle=Wa(oc.bind(null,l,zi,fa),y);break}oc(l,zi,fa);break;case 5:oc(l,zi,fa);break;default:throw Error(n(329))}}}return $i(l,Nn()),l.callbackNode===g?hp.bind(null,l):null}function ov(l,c){var g=nf;return l.current.memoizedState.isDehydrated&&(sc(l,c).flags|=256),l=pp(l,c),l!==2&&(c=zi,zi=g,c!==null&&av(c)),l}function av(l){zi===null?zi=l:zi.push.apply(zi,l)}function sC(l){for(var c=l;;){if(c.flags&16384){var g=c.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var y=0;y<g.length;y++){var T=g[y],P=T.getSnapshot;T=T.value;try{if(!we(P(),T))return!1}catch{return!1}}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function sl(l,c){for(c&=~cp,c&=~tf,l.suspendedLanes|=c,l.pingedLanes&=~c,l=l.expirationTimes;0<c;){var g=31-ui(c),y=1<<g;l[g]=-1,c&=~y}}function fb(l){if((hn&6)!==0)throw Error(n(327));yu();var c=Fl(l,0);if((c&1)===0)return $i(l,Nn()),null;var g=pp(l,c);if(l.tag!==0&&g===2){var y=oh(l);y!==0&&(c=y,g=ov(l,y))}if(g===1)throw g=ef,sc(l,0),sl(l,c),$i(l,Nn()),g;if(g===6)throw Error(n(345));return l.finishedWork=l.current.alternate,l.finishedLanes=c,oc(l,zi,fa),$i(l,Nn()),null}function lv(l,c){var g=hn;hn|=1;try{return l(c)}finally{hn=g,hn===0&&(rc=Nn()+500,Nh&&Ga())}}function ic(l){rl!==null&&rl.tag===0&&(hn&6)===0&&yu();var c=hn;hn|=1;var g=Ts.transition,y=bn;try{if(Ts.transition=null,bn=1,l)return l()}finally{bn=y,Ts.transition=g,hn=c,(hn&6)===0&&Ga()}}function cv(){ts=vu.current,qn(vu)}function sc(l,c){l.finishedWork=null,l.finishedLanes=0;var g=l.timeoutHandle;if(g!==-1&&(l.timeoutHandle=-1,Nd(g)),yr!==null)for(g=yr.return;g!==null;){var y=g;switch(Yl(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Ah();break;case 3:Ja(),qn(Fi),qn(pi),$h();break;case 5:zh(y);break;case 4:Ja();break;case 13:qn(Qn);break;case 19:qn(Qn);break;case 10:Fh(y.type._context);break;case 22:case 23:cv()}g=g.return}if(zr=l,yr=l=io(l.current,null),ei=ts=c,Ir=0,ef=null,cp=tf=tl=0,zi=nf=null,Jl!==null){for(c=0;c<Jl.length;c++)if(g=Jl[c],y=g.interleaved,y!==null){g.interleaved=null;var T=y.next,P=g.pending;if(P!==null){var L=P.next;P.next=T,y.next=L}g.pending=y}Jl=null}return l}function hb(l,c){do{var g=yr;try{if(ia(),Vd.current=Yh,au){for(var y=Zn.memoizedState;y!==null;){var T=y.queue;T!==null&&(T.pending=null),y=y.next}au=!1}if(Xa=0,Rr=cr=Zn=null,Bd=!1,Zl=0,nv.current=null,g===null||g.return===null){Ir=1,ef=c,yr=null;break}e:{var P=l,L=g.return,$=g,Z=c;if(c=ei,$.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var Ce=Z,Ue=$,$e=Ue.tag;if((Ue.mode&1)===0&&($e===0||$e===11||$e===15)){var Fe=Ue.alternate;Fe?(Ue.updateQueue=Fe.updateQueue,Ue.memoizedState=Fe.memoizedState,Ue.lanes=Fe.lanes):(Ue.updateQueue=null,Ue.memoizedState=null)}var nt=tb(L);if(nt!==null){nt.flags&=-257,$g(nt,L,$,P,c),nt.mode&1&&qd(P,Ce,c),c=nt,Z=Ce;var ut=c.updateQueue;if(ut===null){var pt=new Set;pt.add(Z),c.updateQueue=pt}else ut.add(Z);break e}else{if((c&1)===0){qd(P,Ce,c),uv();break e}Z=Error(n(426))}}else if(Kn&&$.mode&1){var ur=tb(L);if(ur!==null){(ur.flags&65536)===0&&(ur.flags|=256),$g(ur,L,$,P,c),Io(nc(Z,$));break e}}P=Z=nc(Z,$),Ir!==4&&(Ir=2),nf===null?nf=[P]:nf.push(P),P=L;do{switch(P.tag){case 3:P.flags|=65536,c&=-c,P.lanes|=c;var he=Hd(P,Z,c);K0(P,he);break e;case 1:$=Z;var ne=P.type,ve=P.stateNode;if((P.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||ve!==null&&typeof ve.componentDidCatch=="function"&&(nl===null||!nl.has(ve)))){P.flags|=65536,c&=-c,P.lanes|=c;var Ke=ep(P,$,c);K0(P,Ke);break e}}P=P.return}while(P!==null)}gb(g)}catch(gt){c=gt,yr===g&&g!==null&&(yr=g=g.return);continue}break}while(!0)}function pb(){var l=lp.current;return lp.current=Yh,l===null?Yh:l}function uv(){(Ir===0||Ir===3||Ir===2)&&(Ir=4),zr===null||(tl&268435455)===0&&(tf&268435455)===0||sl(zr,ei)}function pp(l,c){var g=hn;hn|=2;var y=pb();(zr!==l||ei!==c)&&(fa=null,sc(l,c));do try{oC();break}catch(T){hb(l,T)}while(!0);if(ia(),hn=g,lp.current=y,yr!==null)throw Error(n(261));return zr=null,ei=0,Ir}function oC(){for(;yr!==null;)mb(yr)}function aC(){for(;yr!==null&&!Gi();)mb(yr)}function mb(l){var c=yb(l.alternate,l,ts);l.memoizedProps=l.pendingProps,c===null?gb(l):yr=c,nv.current=null}function gb(l){var c=l;do{var g=c.alternate;if(l=c.return,(c.flags&32768)===0){if(g=nC(g,c,ts),g!==null){yr=g;return}}else{if(g=rC(g,c),g!==null){g.flags&=32767,yr=g;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{Ir=6,yr=null;return}}if(c=c.sibling,c!==null){yr=c;return}yr=c=l}while(c!==null);Ir===0&&(Ir=5)}function oc(l,c,g){var y=bn,T=Ts.transition;try{Ts.transition=null,bn=1,lC(l,c,g,y)}finally{Ts.transition=T,bn=y}return null}function lC(l,c,g,y){do yu();while(rl!==null);if((hn&6)!==0)throw Error(n(327));g=l.finishedWork;var T=l.finishedLanes;if(g===null)return null;if(l.finishedWork=null,l.finishedLanes=0,g===l.current)throw Error(n(177));l.callbackNode=null,l.callbackPriority=0;var P=g.lanes|g.childLanes;if(d0(l,P),l===zr&&(yr=zr=null,ei=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||dp||(dp=!0,bb(wo,function(){return yu(),null})),P=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||P){P=Ts.transition,Ts.transition=null;var L=bn;bn=1;var $=hn;hn|=4,nv.current=null,iC(l,g),ev(g,l),XS(Hl),uh=!!Md,Hl=Md=null,l.current=g,ap(g),ps(),hn=$,bn=L,Ts.transition=P}else l.current=g;if(dp&&(dp=!1,rl=l,Mi=T),P=l.pendingLanes,P===0&&(nl=null),lr(g.stateNode),$i(l,Nn()),c!==null)for(y=l.onRecoverableError,g=0;g<c.length;g++)T=c[g],y(T.value,{componentStack:T.stack,digest:T.digest});if(up)throw up=!1,l=iv,iv=null,l;return(Mi&1)!==0&&l.tag!==0&&yu(),P=l.pendingLanes,(P&1)!==0?l===sv?rf++:(rf=0,sv=l):rf=0,Ga(),null}function yu(){if(rl!==null){var l=Ul(Mi),c=Ts.transition,g=bn;try{if(Ts.transition=null,bn=16>l?16:l,rl===null)var y=!1;else{if(l=rl,rl=null,Mi=0,(hn&6)!==0)throw Error(n(331));var T=hn;for(hn|=4,st=l.current;st!==null;){var P=st,L=P.child;if((st.flags&16)!==0){var $=P.deletions;if($!==null){for(var Z=0;Z<$.length;Z++){var Ce=$[Z];for(st=Ce;st!==null;){var Ue=st;switch(Ue.tag){case 0:case 11:case 15:da(8,Ue,P)}var $e=Ue.child;if($e!==null)$e.return=Ue,st=$e;else for(;st!==null;){Ue=st;var Fe=Ue.sibling,nt=Ue.return;if(ab(Ue),Ue===Ce){st=null;break}if(Fe!==null){Fe.return=nt,st=Fe;break}st=nt}}}var ut=P.alternate;if(ut!==null){var pt=ut.child;if(pt!==null){ut.child=null;do{var ur=pt.sibling;pt.sibling=null,pt=ur}while(pt!==null)}}st=P}}if((P.subtreeFlags&2064)!==0&&L!==null)L.return=P,st=L;else e:for(;st!==null;){if(P=st,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:da(9,P,P.return)}var he=P.sibling;if(he!==null){he.return=P.return,st=he;break e}st=P.return}}var ne=l.current;for(st=ne;st!==null;){L=st;var ve=L.child;if((L.subtreeFlags&2064)!==0&&ve!==null)ve.return=L,st=ve;else e:for(L=ne;st!==null;){if($=st,($.flags&2048)!==0)try{switch($.tag){case 0:case 11:case 15:Zd(9,$)}}catch(gt){er($,$.return,gt)}if($===L){st=null;break e}var Ke=$.sibling;if(Ke!==null){Ke.return=$.return,st=Ke;break e}st=$.return}}if(hn=T,Ga(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(Ys,l)}catch{}y=!0}return y}finally{bn=g,Ts.transition=c}}return!1}function mp(l,c,g){c=nc(g,c),c=Hd(l,c,1),l=Ss(l,c,1),c=Ai(),l!==null&&(yd(l,1,c),$i(l,c))}function er(l,c,g){if(l.tag===3)mp(l,l,g);else for(;c!==null;){if(c.tag===3){mp(c,l,g);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(nl===null||!nl.has(y))){l=nc(g,l),l=ep(c,l,1),c=Ss(c,l,1),l=Ai(),c!==null&&(yd(c,1,l),$i(c,l));break}}c=c.return}}function cC(l,c,g){var y=l.pingCache;y!==null&&y.delete(c),c=Ai(),l.pingedLanes|=l.suspendedLanes&g,zr===l&&(ei&g)===g&&(Ir===4||Ir===3&&(ei&130023424)===ei&&500>Nn()-rv?sc(l,0):cp|=g),$i(l,c)}function vb(l,c){c===0&&((l.mode&1)===0?c=1:(c=sh,sh<<=1,(sh&130023424)===0&&(sh=4194304)));var g=Ai();l=sa(l,c),l!==null&&(yd(l,c,g),$i(l,g))}function uC(l){var c=l.memoizedState,g=0;c!==null&&(g=c.retryLane),vb(l,g)}function dC(l,c){var g=0;switch(l.tag){case 13:var y=l.stateNode,T=l.memoizedState;T!==null&&(g=T.retryLane);break;case 19:y=l.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(c),vb(l,g)}var yb;yb=function(l,c,g){if(l!==null)if(l.memoizedProps!==c.pendingProps||Fi.current)Ri=!0;else{if((l.lanes&g)===0&&(c.flags&128)===0)return Ri=!1,ib(l,c,g);Ri=(l.flags&131072)!==0}else Ri=!1,Kn&&(c.flags&1048576)!==0&&z0(c,Dh,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;rp(l,c),l=c.pendingProps;var T=nu(c,pi.current);Qa(c,g),T=ec(null,c,y,l,T,g);var P=Wh();return c.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Ui(y)?(P=!0,vs(c)):P=!1,c.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,Vh(c),T.updater=Xh,c.stateNode=T,T._reactInternals=c,zg(c,y,l,g),c=Yg(null,c,y,!0,P,g)):(c.tag=0,Kn&&P&&Od(c),Jr(null,c,T,g),c=c.child),c;case 16:y=c.elementType;e:{switch(rp(l,c),l=c.pendingProps,T=y._init,y=T(y._payload),c.type=y,T=c.tag=hC(y),l=ks(y,l),T){case 0:c=Kg(null,c,y,l,g);break e;case 1:c=Gg(null,c,y,l,g);break e;case 11:c=nb(null,c,y,l,g);break e;case 14:c=Wg(null,c,y,ks(y.type,l),g);break e}throw Error(n(306,y,""))}return c;case 0:return y=c.type,T=c.pendingProps,T=c.elementType===y?T:ks(y,T),Kg(l,c,y,T,g);case 1:return y=c.type,T=c.pendingProps,T=c.elementType===y?T:ks(y,T),Gg(l,c,y,T,g);case 3:e:{if(rb(c),l===null)throw Error(n(387));y=c.pendingProps,P=c.memoizedState,T=P.element,q0(l,c),su(c,y,null,g);var L=c.memoizedState;if(y=L.element,P.isDehydrated)if(P={element:y,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},c.updateQueue.baseState=P,c.memoizedState=P,c.flags&256){T=nc(Error(n(423)),c),c=Do(l,c,y,g,T);break e}else if(y!==T){T=nc(Error(n(424)),c),c=Do(l,c,y,g,T);break e}else for(Xi=Ha(c.stateNode.containerInfo.firstChild),gi=c,Kn=!0,Js=null,g=jh(c,null,y,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Ro(),y===T){c=Zs(l,c,g);break e}Jr(l,c,y,g)}c=c.child}return c;case 5:return Rg(c),l===null&&Vi(c),y=c.type,T=c.pendingProps,P=l!==null?l.memoizedProps:null,L=T.children,Ad(y,T)?L=null:P!==null&&Ad(y,P)&&(c.flags|=32),qg(l,c),Jr(l,c,L,g),c.child;case 6:return l===null&&Vi(c),null;case 13:return np(l,c,g);case 4:return Pg(c,c.stateNode.containerInfo),y=c.pendingProps,l===null?c.child=rr(c,null,y,g):Jr(l,c,y,g),c.child;case 11:return y=c.type,T=c.pendingProps,T=c.elementType===y?T:ks(y,T),nb(l,c,y,T,g);case 7:return Jr(l,c,c.pendingProps,g),c.child;case 8:return Jr(l,c,c.pendingProps.children,g),c.child;case 12:return Jr(l,c,c.pendingProps.children,g),c.child;case 10:e:{if(y=c.type._context,T=c.pendingProps,P=c.memoizedProps,L=T.value,$n(jd,y._currentValue),y._currentValue=L,P!==null)if(we(P.value,L)){if(P.children===T.children&&!Fi.current){c=Zs(l,c,g);break e}}else for(P=c.child,P!==null&&(P.return=c);P!==null;){var $=P.dependencies;if($!==null){L=P.child;for(var Z=$.firstContext;Z!==null;){if(Z.context===y){if(P.tag===1){Z=oa(-1,g&-g),Z.tag=2;var Ce=P.updateQueue;if(Ce!==null){Ce=Ce.shared;var Ue=Ce.pending;Ue===null?Z.next=Z:(Z.next=Ue.next,Ue.next=Z),Ce.pending=Z}}P.lanes|=g,Z=P.alternate,Z!==null&&(Z.lanes|=g),Qr(P.return,g,c),$.lanes|=g;break}Z=Z.next}}else if(P.tag===10)L=P.type===c.type?null:P.child;else if(P.tag===18){if(L=P.return,L===null)throw Error(n(341));L.lanes|=g,$=L.alternate,$!==null&&($.lanes|=g),Qr(L,g,c),L=P.sibling}else L=P.child;if(L!==null)L.return=P;else for(L=P;L!==null;){if(L===c){L=null;break}if(P=L.sibling,P!==null){P.return=L.return,L=P;break}L=L.return}P=L}Jr(l,c,T.children,g),c=c.child}return c;case 9:return T=c.type,y=c.pendingProps.children,Qa(c,g),T=xs(T),y=y(T),c.flags|=1,Jr(l,c,y,g),c.child;case 14:return y=c.type,T=ks(y,c.pendingProps),T=ks(y.type,T),Wg(l,c,y,T,g);case 15:return Oo(l,c,c.type,c.pendingProps,g);case 17:return y=c.type,T=c.pendingProps,T=c.elementType===y?T:ks(y,T),rp(l,c),c.tag=1,Ui(y)?(l=!0,vs(c)):l=!1,Qa(c,g),tc(c,y,T),zg(c,y,T,g),Yg(null,c,y,!0,l,g);case 19:return Za(l,c,g);case 22:return Hg(l,c,g)}throw Error(n(156,c.tag))};function bb(l,c){return xo(l,c)}function fC(l,c,g,y){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Es(l,c,g,y){return new fC(l,c,g,y)}function gp(l){return l=l.prototype,!(!l||!l.isReactComponent)}function hC(l){if(typeof l=="function")return gp(l)?1:0;if(l!=null){if(l=l.$$typeof,l===Y)return 11;if(l===Ie)return 14}return 2}function io(l,c){var g=l.alternate;return g===null?(g=Es(l.tag,c,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=c,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&14680064,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,c=l.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g}function vp(l,c,g,y,T,P){var L=2;if(y=l,typeof l=="function")gp(l)&&(L=1);else if(typeof l=="string")L=5;else e:switch(l){case j:return ac(g.children,T,P,c);case V:L=8,T|=8;break;case z:return l=Es(12,g,c,T|2),l.elementType=z,l.lanes=P,l;case me:return l=Es(13,g,c,T),l.elementType=me,l.lanes=P,l;case ue:return l=Es(19,g,c,T),l.elementType=ue,l.lanes=P,l;case xe:return yp(g,T,P,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case W:L=10;break e;case J:L=9;break e;case Y:L=11;break e;case Ie:L=14;break e;case se:L=16,y=null;break e}throw Error(n(130,l==null?l:typeof l,""))}return c=Es(L,g,c,T),c.elementType=l,c.type=y,c.lanes=P,c}function ac(l,c,g,y){return l=Es(7,l,y,c),l.lanes=g,l}function yp(l,c,g,y){return l=Es(22,l,y,c),l.elementType=xe,l.lanes=g,l.stateNode={isHidden:!1},l}function dv(l,c,g){return l=Es(6,l,null,c),l.lanes=g,l}function fv(l,c,g){return c=Es(4,l.children!==null?l.children:[],l.key,c),c.lanes=g,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function pC(l,c,g,y,T){this.tag=c,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vd(0),this.expirationTimes=vd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vd(0),this.identifierPrefix=y,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function hv(l,c,g,y,T,P,L,$,Z){return l=new pC(l,c,g,$,Z),c===1?(c=1,P===!0&&(c|=8)):c=0,P=Es(3,null,null,c),l.current=P,P.stateNode=l,P.memoizedState={element:y,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vh(P),l}function mC(l,c,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:y==null?null:""+y,children:l,containerInfo:c,implementation:g}}function xb(l){if(!l)return Ka;l=l._reactInternals;e:{if(Mt(l)!==l||l.tag!==1)throw Error(n(170));var c=l;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Ui(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(l.tag===1){var g=l.type;if(Ui(g))return U0(l,g,c)}return c}function wb(l,c,g,y,T,P,L,$,Z){return l=hv(g,y,!0,l,T,P,L,$,Z),l.context=xb(null),g=l.current,y=Ai(),T=il(g),P=oa(y,T),P.callback=c??null,Ss(g,P,T),l.current.lanes=T,yd(l,T,y),$i(l,y),l}function bp(l,c,g,y){var T=c.current,P=Ai(),L=il(T);return g=xb(g),c.context===null?c.context=g:c.pendingContext=g,c=oa(P,L),c.payload={element:l},y=y===void 0?null:y,y!==null&&(c.callback=y),l=Ss(T,c,L),l!==null&&(ro(l,T,L,P),Bh(l,T,L)),L}function xp(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function Sb(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<c?g:c}}function pv(l,c){Sb(l,c),(l=l.alternate)&&Sb(l,c)}function gC(){return null}var Cb=typeof reportError=="function"?reportError:function(l){console.error(l)};function wp(l){this._internalRoot=l}of.prototype.render=wp.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(n(409));bp(l,c,null,null)},of.prototype.unmount=wp.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;ic(function(){bp(null,l,null,null)}),c[Ji]=null}};function of(l){this._internalRoot=l}of.prototype.unstable_scheduleHydration=function(l){if(l){var c=tg();l={blockedOn:null,target:l,priority:c};for(var g=0;g<Ua.length&&c!==0&&c<Ua[g].priority;g++);Ua.splice(g,0,l),g===0&&p0(l)}};function mv(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function Sp(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function kb(){}function vC(l,c,g,y,T){if(T){if(typeof y=="function"){var P=y;y=function(){var Ce=xp(L);P.call(Ce)}}var L=wb(c,y,l,0,null,!1,!1,"",kb);return l._reactRootContainer=L,l[Ji]=L.current,$a(l.nodeType===8?l.parentNode:l),ic(),L}for(;T=l.lastChild;)l.removeChild(T);if(typeof y=="function"){var $=y;y=function(){var Ce=xp(Z);$.call(Ce)}}var Z=hv(l,0,!1,null,null,!1,!1,"",kb);return l._reactRootContainer=Z,l[Ji]=Z.current,$a(l.nodeType===8?l.parentNode:l),ic(function(){bp(c,Z,g,y)}),Z}function lc(l,c,g,y,T){var P=g._reactRootContainer;if(P){var L=P;if(typeof T=="function"){var $=T;T=function(){var Z=xp(L);$.call(Z)}}bp(c,L,l,T)}else L=vC(g,c,l,T,y);return xp(L)}eg=function(l){switch(l.tag){case 3:var c=l.stateNode;if(c.current.memoizedState.isDehydrated){var g=Fc(c.pendingLanes);g!==0&&(bd(c,g|1),$i(c,Nn()),(hn&6)===0&&(rc=Nn()+500,Ga()))}break;case 13:ic(function(){var y=sa(l,1);if(y!==null){var T=Ai();ro(y,l,1,T)}}),pv(l,1)}},ah=function(l){if(l.tag===13){var c=sa(l,134217728);if(c!==null){var g=Ai();ro(c,l,134217728,g)}pv(l,134217728)}},f0=function(l){if(l.tag===13){var c=il(l),g=sa(l,c);if(g!==null){var y=Ai();ro(g,l,c,y)}pv(l,c)}},tg=function(){return bn},ng=function(l,c){var g=bn;try{return bn=l,c()}finally{bn=g}},Jo=function(l,c,g){switch(c){case"input":if(ln(l,g),c=g.name,g.type==="radio"&&c!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<g.length;c++){var y=g[c];if(y!==l&&y.form===l.form){var T=Mh(y);if(!T)throw Error(n(90));mt(y),ln(y,T)}}}break;case"textarea":Ge(l,g);break;case"select":c=g.value,c!=null&&le(l,!!g.multiple,c,!1)}},Gn=lv,Pr=ic;var yC={usingClientEntryPoint:!1,Events:[hi,Bt,Mh,Dt,Vn,lv]},af={findFiberByHostInstance:To,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bC={bundleType:af.bundleType,version:af.version,rendererPackageName:af.rendererPackageName,rendererConfig:af.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=Bn(l),l===null?null:l.stateNode},findFiberByHostInstance:af.findFiberByHostInstance||gC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cp.isDisabled&&Cp.supportsFiber)try{Ys=Cp.inject(bC),Vr=Cp}catch{}}return Is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yC,Is.createPortal=function(l,c){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mv(c))throw Error(n(200));return mC(l,c,null,g)},Is.createRoot=function(l,c){if(!mv(l))throw Error(n(299));var g=!1,y="",T=Cb;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(T=c.onRecoverableError)),c=hv(l,1,!1,null,null,g,!1,y,T),l[Ji]=c.current,$a(l.nodeType===8?l.parentNode:l),new wp(c)},Is.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=Bn(c),l=l===null?null:l.stateNode,l},Is.flushSync=function(l){return ic(l)},Is.hydrate=function(l,c,g){if(!Sp(c))throw Error(n(200));return lc(null,l,c,!0,g)},Is.hydrateRoot=function(l,c,g){if(!mv(l))throw Error(n(405));var y=g!=null&&g.hydratedSources||null,T=!1,P="",L=Cb;if(g!=null&&(g.unstable_strictMode===!0&&(T=!0),g.identifierPrefix!==void 0&&(P=g.identifierPrefix),g.onRecoverableError!==void 0&&(L=g.onRecoverableError)),c=wb(c,null,l,1,g??null,T,!1,P,L),l[Ji]=c.current,$a(l),y)for(l=0;l<y.length;l++)g=y[l],T=g._getVersion,T=T(g._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[g,T]:c.mutableSourceEagerHydrationData.push(g,T);return new of(c)},Is.render=function(l,c,g){if(!Sp(c))throw Error(n(200));return lc(null,l,c,!1,g)},Is.unmountComponentAtNode=function(l){if(!Sp(l))throw Error(n(40));return l._reactRootContainer?(ic(function(){lc(null,null,l,!1,function(){l._reactRootContainer=null,l[Ji]=null})}),!0):!1},Is.unstable_batchedUpdates=lv,Is.unstable_renderSubtreeIntoContainer=function(l,c,g,y){if(!Sp(g))throw Error(n(200));if(l==null||l._reactInternals===void 0)throw Error(n(38));return lc(l,c,g,!1,y)},Is.version="18.3.1-next-f1338f8080-20240426",Is}var uR;function HO(){if(uR)return DC.exports;uR=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),DC.exports=l6(),DC.exports}var dR;function c6(){if(dR)return Rb;dR=1;var t=HO();return Rb.createRoot=t.createRoot,Rb.hydrateRoot=t.hydrateRoot,Rb}var u6=c6();const d6=Pw(u6);var Um=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},f6={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Du,tE,OO,h6=(OO=class{constructor(){Tt(this,Du,f6);Tt(this,tE,!1)}setTimeoutProvider(t){rt(this,Du,t)}setTimeout(t,e){return X(this,Du).setTimeout(t,e)}clearTimeout(t){X(this,Du).clearTimeout(t)}setInterval(t,e){return X(this,Du).setInterval(t,e)}clearInterval(t){X(this,Du).clearInterval(t)}},Du=new WeakMap,tE=new WeakMap,OO),vf=new h6;function p6(t){setTimeout(t,0)}var Ff=typeof window>"u"||"Deno"in globalThis;function os(){}function m6(t,e){return typeof t=="function"?t(e):t}function Xk(t){return typeof t=="number"&&t>=0&&t!==1/0}function qO(t,e){return Math.max(t+(e||0)-Date.now(),0)}function qu(t,e){return typeof t=="function"?t(e):t}function Wo(t,e){return typeof t=="function"?t(e):t}function fR(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==iE(o,e.options))return!1}else if(!ny(e.queryKey,o))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function hR(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Uf(e.options.mutationKey)!==Uf(s))return!1}else if(!ny(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function iE(t,e){return((e==null?void 0:e.queryKeyHashFn)||Uf)(t)}function Uf(t){return JSON.stringify(t,(e,n)=>Zk(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function ny(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>ny(t[n],e[n])):!1}var g6=Object.prototype.hasOwnProperty;function KO(t,e){if(t===e)return t;const n=pR(t)&&pR(e);if(!n&&!(Zk(t)&&Zk(e)))return e;const i=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),o=s.length,a=n?new Array(o):{};let u=0;for(let f=0;f<o;f++){const h=n?f:s[f],m=t[h],v=e[h];if(m===v){a[h]=m,(n?f<i:g6.call(t,h))&&u++;continue}if(m===null||v===null||typeof m!="object"||typeof v!="object"){a[h]=v;continue}const S=KO(m,v);a[h]=S,S===m&&u++}return i===o&&u===i?t:a}function Dx(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function pR(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Zk(t){if(!mR(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!mR(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function mR(t){return Object.prototype.toString.call(t)==="[object Object]"}function v6(t){return new Promise(e=>{vf.setTimeout(e,t)})}function eT(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?KO(t,e):e}function y6(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function b6(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var sE=Symbol();function GO(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===sE?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function YO(t,e){return typeof t=="function"?t(...e):!!t}var kf,Lu,lm,DO,x6=(DO=class extends Um{constructor(){super();Tt(this,kf);Tt(this,Lu);Tt(this,lm);rt(this,lm,e=>{if(!Ff&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){X(this,Lu)||this.setEventListener(X(this,lm))}onUnsubscribe(){var e;this.hasListeners()||((e=X(this,Lu))==null||e.call(this),rt(this,Lu,void 0))}setEventListener(e){var n;rt(this,lm,e),(n=X(this,Lu))==null||n.call(this),rt(this,Lu,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){X(this,kf)!==e&&(rt(this,kf,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof X(this,kf)=="boolean"?X(this,kf):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},kf=new WeakMap,Lu=new WeakMap,lm=new WeakMap,DO),oE=new x6;function tT(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var w6=p6;function S6(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=w6;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(u=>{n(u)})})})};return{batch:a=>{let u;e++;try{u=a()}finally{e--,e||o()}return u},batchCalls:a=>(...u)=>{s(()=>{a(...u)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var ri=S6(),cm,ju,um,LO,C6=(LO=class extends Um{constructor(){super();Tt(this,cm,!0);Tt(this,ju);Tt(this,um);rt(this,um,e=>{if(!Ff&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){X(this,ju)||this.setEventListener(X(this,um))}onUnsubscribe(){var e;this.hasListeners()||((e=X(this,ju))==null||e.call(this),rt(this,ju,void 0))}setEventListener(e){var n;rt(this,um,e),(n=X(this,ju))==null||n.call(this),rt(this,ju,e(this.setOnline.bind(this)))}setOnline(e){X(this,cm)!==e&&(rt(this,cm,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return X(this,cm)}},cm=new WeakMap,ju=new WeakMap,um=new WeakMap,LO),Lx=new C6;function k6(t){return Math.min(1e3*2**t,3e4)}function QO(t){return(t??"online")==="online"?Lx.isOnline():!0}var nT=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function JO(t){let e=!1,n=0,r;const i=tT(),s=()=>i.status!=="pending",o=C=>{var E;if(!s()){const _=new nT(C);v(_),(E=t.onCancel)==null||E.call(t,_)}},a=()=>{e=!0},u=()=>{e=!1},f=()=>oE.isFocused()&&(t.networkMode==="always"||Lx.isOnline())&&t.canRun(),h=()=>QO(t.networkMode)&&t.canRun(),m=C=>{s()||(r==null||r(),i.resolve(C))},v=C=>{s()||(r==null||r(),i.reject(C))},S=()=>new Promise(C=>{var E;r=_=>{(s()||f())&&C(_)},(E=t.onPause)==null||E.call(t)}).then(()=>{var C;r=void 0,s()||(C=t.onContinue)==null||C.call(t)}),k=()=>{if(s())return;let C;const E=n===0?t.initialPromise:void 0;try{C=E??t.fn()}catch(_){C=Promise.reject(_)}Promise.resolve(C).then(m).catch(_=>{var O;if(s())return;const M=t.retry??(Ff?0:3),A=t.retryDelay??k6,I=typeof A=="function"?A(n,_):A,N=M===!0||typeof M=="number"&&n<M||typeof M=="function"&&M(n,_);if(e||!N){v(_);return}n++,(O=t.onFail)==null||O.call(t,n,_),v6(I).then(()=>f()?void 0:S()).then(()=>{e?v(_):k()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:u,canStart:h,start:()=>(h()?k():S().then(k),i)}}var Tf,jO,XO=(jO=class{constructor(){Tt(this,Tf)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Xk(this.gcTime)&&rt(this,Tf,vf.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ff?1/0:5*60*1e3))}clearGcTimeout(){X(this,Tf)&&(vf.clearTimeout(X(this,Tf)),rt(this,Tf,void 0))}},Tf=new WeakMap,jO),Ef,dm,zo,_f,xi,Ry,Pf,ya,pc,FO,T6=(FO=class extends XO{constructor(e){super();Tt(this,ya);Tt(this,Ef);Tt(this,dm);Tt(this,zo);Tt(this,_f);Tt(this,xi);Tt(this,Ry);Tt(this,Pf);rt(this,Pf,!1),rt(this,Ry,e.defaultOptions),this.setOptions(e.options),this.observers=[],rt(this,_f,e.client),rt(this,zo,X(this,_f).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,rt(this,Ef,gR(this.options)),this.state=e.state??X(this,Ef),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=X(this,xi))==null?void 0:e.promise}setOptions(e){if(this.options={...X(this,Ry),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=gR(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),rt(this,Ef,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&X(this,zo).remove(this)}setData(e,n){const r=eT(this.state.data,e,this.options);return Yt(this,ya,pc).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Yt(this,ya,pc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=X(this,xi))==null?void 0:r.promise;return(i=X(this,xi))==null||i.cancel(e),n?n.then(os).catch(os):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(X(this,Ef))}isActive(){return this.observers.some(e=>Wo(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===sE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>qu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!qO(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=X(this,xi))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=X(this,xi))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),X(this,zo).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(X(this,xi)&&(X(this,Pf)?X(this,xi).cancel({revert:!0}):X(this,xi).cancelRetry()),this.scheduleGc()),X(this,zo).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Yt(this,ya,pc).call(this,{type:"invalidate"})}async fetch(e,n){var u,f,h,m,v,S,k,C,E,_,M,A;if(this.state.fetchStatus!=="idle"&&((u=X(this,xi))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(X(this,xi))return X(this,xi).continueRetry(),X(this,xi).promise}if(e&&this.setOptions(e),!this.options.queryFn){const I=this.observers.find(N=>N.options.queryFn);I&&this.setOptions(I.options)}const r=new AbortController,i=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(rt(this,Pf,!0),r.signal)})},s=()=>{const I=GO(this.options,n),O=(()=>{const j={client:X(this,_f),queryKey:this.queryKey,meta:this.meta};return i(j),j})();return rt(this,Pf,!1),this.options.persister?this.options.persister(I,O,this):I(O)},a=(()=>{const I={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:X(this,_f),state:this.state,fetchFn:s};return i(I),I})();(f=this.options.behavior)==null||f.onFetch(a,this),rt(this,dm,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=a.fetchOptions)==null?void 0:h.meta))&&Yt(this,ya,pc).call(this,{type:"fetch",meta:(m=a.fetchOptions)==null?void 0:m.meta}),rt(this,xi,JO({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:I=>{I instanceof nT&&I.revert&&this.setState({...X(this,dm),fetchStatus:"idle"}),r.abort()},onFail:(I,N)=>{Yt(this,ya,pc).call(this,{type:"failed",failureCount:I,error:N})},onPause:()=>{Yt(this,ya,pc).call(this,{type:"pause"})},onContinue:()=>{Yt(this,ya,pc).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const I=await X(this,xi).start();if(I===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(I),(S=(v=X(this,zo).config).onSuccess)==null||S.call(v,I,this),(C=(k=X(this,zo).config).onSettled)==null||C.call(k,I,this.state.error,this),I}catch(I){if(I instanceof nT){if(I.silent)return X(this,xi).promise;if(I.revert){if(this.state.data===void 0)throw I;return this.state.data}}throw Yt(this,ya,pc).call(this,{type:"error",error:I}),(_=(E=X(this,zo).config).onError)==null||_.call(E,I,this),(A=(M=X(this,zo).config).onSettled)==null||A.call(M,this.state.data,I,this),I}finally{this.scheduleGc()}}},Ef=new WeakMap,dm=new WeakMap,zo=new WeakMap,_f=new WeakMap,xi=new WeakMap,Ry=new WeakMap,Pf=new WeakMap,ya=new WeakSet,pc=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...ZO(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return rt(this,dm,e.manual?i:void 0),i;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),ri.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),X(this,zo).notify({query:this,type:"updated",action:e})})},FO);function ZO(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:QO(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function gR(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ms,mn,Iy,rs,Rf,fm,yc,Fu,My,hm,pm,If,Mf,Uu,mm,Ln,Nv,rT,iT,sT,oT,aT,lT,cT,eD,UO,E6=(UO=class extends Um{constructor(e,n){super();Tt(this,Ln);Tt(this,Ms);Tt(this,mn);Tt(this,Iy);Tt(this,rs);Tt(this,Rf);Tt(this,fm);Tt(this,yc);Tt(this,Fu);Tt(this,My);Tt(this,hm);Tt(this,pm);Tt(this,If);Tt(this,Mf);Tt(this,Uu);Tt(this,mm,new Set);this.options=n,rt(this,Ms,e),rt(this,Fu,null),rt(this,yc,tT()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(X(this,mn).addObserver(this),vR(X(this,mn),this.options)?Yt(this,Ln,Nv).call(this):this.updateResult(),Yt(this,Ln,oT).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return uT(X(this,mn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return uT(X(this,mn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Yt(this,Ln,aT).call(this),Yt(this,Ln,lT).call(this),X(this,mn).removeObserver(this)}setOptions(e){const n=this.options,r=X(this,mn);if(this.options=X(this,Ms).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Wo(this.options.enabled,X(this,mn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Yt(this,Ln,cT).call(this),X(this,mn).setOptions(this.options),n._defaulted&&!Dx(this.options,n)&&X(this,Ms).getQueryCache().notify({type:"observerOptionsUpdated",query:X(this,mn),observer:this});const i=this.hasListeners();i&&yR(X(this,mn),r,this.options,n)&&Yt(this,Ln,Nv).call(this),this.updateResult(),i&&(X(this,mn)!==r||Wo(this.options.enabled,X(this,mn))!==Wo(n.enabled,X(this,mn))||qu(this.options.staleTime,X(this,mn))!==qu(n.staleTime,X(this,mn)))&&Yt(this,Ln,rT).call(this);const s=Yt(this,Ln,iT).call(this);i&&(X(this,mn)!==r||Wo(this.options.enabled,X(this,mn))!==Wo(n.enabled,X(this,mn))||s!==X(this,Uu))&&Yt(this,Ln,sT).call(this,s)}getOptimisticResult(e){const n=X(this,Ms).getQueryCache().build(X(this,Ms),e),r=this.createResult(n,e);return P6(this,r)&&(rt(this,rs,r),rt(this,fm,this.options),rt(this,Rf,X(this,mn).state)),r}getCurrentResult(){return X(this,rs)}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&X(this,yc).status==="pending"&&X(this,yc).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){X(this,mm).add(e)}getCurrentQuery(){return X(this,mn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=X(this,Ms).defaultQueryOptions(e),r=X(this,Ms).getQueryCache().build(X(this,Ms),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Yt(this,Ln,Nv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),X(this,rs)))}createResult(e,n){var z;const r=X(this,mn),i=this.options,s=X(this,rs),o=X(this,Rf),a=X(this,fm),f=e!==r?e.state:X(this,Iy),{state:h}=e;let m={...h},v=!1,S;if(n._optimisticResults){const W=this.hasListeners(),J=!W&&vR(e,n),Y=W&&yR(e,r,n,i);(J||Y)&&(m={...m,...ZO(h.data,e.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:k,errorUpdatedAt:C,status:E}=m;S=m.data;let _=!1;if(n.placeholderData!==void 0&&S===void 0&&E==="pending"){let W;s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(W=s.data,_=!0):W=typeof n.placeholderData=="function"?n.placeholderData((z=X(this,pm))==null?void 0:z.state.data,X(this,pm)):n.placeholderData,W!==void 0&&(E="success",S=eT(s==null?void 0:s.data,W,n),v=!0)}if(n.select&&S!==void 0&&!_)if(s&&S===(o==null?void 0:o.data)&&n.select===X(this,My))S=X(this,hm);else try{rt(this,My,n.select),S=n.select(S),S=eT(s==null?void 0:s.data,S,n),rt(this,hm,S),rt(this,Fu,null)}catch(W){rt(this,Fu,W)}X(this,Fu)&&(k=X(this,Fu),S=X(this,hm),C=Date.now(),E="error");const M=m.fetchStatus==="fetching",A=E==="pending",I=E==="error",N=A&&M,O=S!==void 0,V={status:E,fetchStatus:m.fetchStatus,isPending:A,isSuccess:E==="success",isError:I,isInitialLoading:N,isLoading:N,data:S,dataUpdatedAt:m.dataUpdatedAt,error:k,errorUpdatedAt:C,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:M,isRefetching:M&&!A,isLoadingError:I&&!O,isPaused:m.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:I&&O,isStale:aE(e,n),refetch:this.refetch,promise:X(this,yc),isEnabled:Wo(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const W=me=>{V.status==="error"?me.reject(V.error):V.data!==void 0&&me.resolve(V.data)},J=()=>{const me=rt(this,yc,V.promise=tT());W(me)},Y=X(this,yc);switch(Y.status){case"pending":e.queryHash===r.queryHash&&W(Y);break;case"fulfilled":(V.status==="error"||V.data!==Y.value)&&J();break;case"rejected":(V.status!=="error"||V.error!==Y.reason)&&J();break}}return V}updateResult(){const e=X(this,rs),n=this.createResult(X(this,mn),this.options);if(rt(this,Rf,X(this,mn).state),rt(this,fm,this.options),X(this,Rf).data!==void 0&&rt(this,pm,X(this,mn)),Dx(n,e))return;rt(this,rs,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!X(this,mm).size)return!0;const o=new Set(s??X(this,mm));return this.options.throwOnError&&o.add("error"),Object.keys(X(this,rs)).some(a=>{const u=a;return X(this,rs)[u]!==e[u]&&o.has(u)})};Yt(this,Ln,eD).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Yt(this,Ln,oT).call(this)}},Ms=new WeakMap,mn=new WeakMap,Iy=new WeakMap,rs=new WeakMap,Rf=new WeakMap,fm=new WeakMap,yc=new WeakMap,Fu=new WeakMap,My=new WeakMap,hm=new WeakMap,pm=new WeakMap,If=new WeakMap,Mf=new WeakMap,Uu=new WeakMap,mm=new WeakMap,Ln=new WeakSet,Nv=function(e){Yt(this,Ln,cT).call(this);let n=X(this,mn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(os)),n},rT=function(){Yt(this,Ln,aT).call(this);const e=qu(this.options.staleTime,X(this,mn));if(Ff||X(this,rs).isStale||!Xk(e))return;const r=qO(X(this,rs).dataUpdatedAt,e)+1;rt(this,If,vf.setTimeout(()=>{X(this,rs).isStale||this.updateResult()},r))},iT=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(X(this,mn)):this.options.refetchInterval)??!1},sT=function(e){Yt(this,Ln,lT).call(this),rt(this,Uu,e),!(Ff||Wo(this.options.enabled,X(this,mn))===!1||!Xk(X(this,Uu))||X(this,Uu)===0)&&rt(this,Mf,vf.setInterval(()=>{(this.options.refetchIntervalInBackground||oE.isFocused())&&Yt(this,Ln,Nv).call(this)},X(this,Uu)))},oT=function(){Yt(this,Ln,rT).call(this),Yt(this,Ln,sT).call(this,Yt(this,Ln,iT).call(this))},aT=function(){X(this,If)&&(vf.clearTimeout(X(this,If)),rt(this,If,void 0))},lT=function(){X(this,Mf)&&(vf.clearInterval(X(this,Mf)),rt(this,Mf,void 0))},cT=function(){const e=X(this,Ms).getQueryCache().build(X(this,Ms),this.options);if(e===X(this,mn))return;const n=X(this,mn);rt(this,mn,e),rt(this,Iy,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},eD=function(e){ri.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(X(this,rs))}),X(this,Ms).getQueryCache().notify({query:X(this,mn),type:"observerResultsUpdated"})})},UO);function _6(t,e){return Wo(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function vR(t,e){return _6(t,e)||t.state.data!==void 0&&uT(t,e,e.refetchOnMount)}function uT(t,e,n){if(Wo(e.enabled,t)!==!1&&qu(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&aE(t,e)}return!1}function yR(t,e,n,r){return(t!==e||Wo(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&aE(t,n)}function aE(t,e){return Wo(e.enabled,t)!==!1&&t.isStaleByTime(qu(e.staleTime,t))}function P6(t,e){return!Dx(t.getCurrentResult(),e)}function bR(t){return{onFetch:(e,n)=>{var h,m,v,S,k;const r=e.options,i=(v=(m=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:m.fetchMore)==null?void 0:v.direction,s=((S=e.state.data)==null?void 0:S.pages)||[],o=((k=e.state.data)==null?void 0:k.pageParams)||[];let a={pages:[],pageParams:[]},u=0;const f=async()=>{let C=!1;const E=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(e.signal.aborted?C=!0:e.signal.addEventListener("abort",()=>{C=!0}),e.signal)})},_=GO(e.options,e.fetchOptions),M=async(A,I,N)=>{if(C)return Promise.reject();if(I==null&&A.pages.length)return Promise.resolve(A);const j=(()=>{const J={client:e.client,queryKey:e.queryKey,pageParam:I,direction:N?"backward":"forward",meta:e.options.meta};return E(J),J})(),V=await _(j),{maxPages:z}=e.options,W=N?b6:y6;return{pages:W(A.pages,V,z),pageParams:W(A.pageParams,I,z)}};if(i&&s.length){const A=i==="backward",I=A?R6:xR,N={pages:s,pageParams:o},O=I(r,N);a=await M(N,O,A)}else{const A=t??s.length;do{const I=u===0?o[0]??r.initialPageParam:xR(r,a);if(u>0&&I==null)break;a=await M(a,I),u++}while(u<A)}return a};e.options.persister?e.fetchFn=()=>{var C,E;return(E=(C=e.options).persister)==null?void 0:E.call(C,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=f}}}function xR(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function R6(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Ay,dl,is,Af,fl,Tu,VO,I6=(VO=class extends XO{constructor(e){super();Tt(this,fl);Tt(this,Ay);Tt(this,dl);Tt(this,is);Tt(this,Af);rt(this,Ay,e.client),this.mutationId=e.mutationId,rt(this,is,e.mutationCache),rt(this,dl,[]),this.state=e.state||tD(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){X(this,dl).includes(e)||(X(this,dl).push(e),this.clearGcTimeout(),X(this,is).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){rt(this,dl,X(this,dl).filter(n=>n!==e)),this.scheduleGc(),X(this,is).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){X(this,dl).length||(this.state.status==="pending"?this.scheduleGc():X(this,is).remove(this))}continue(){var e;return((e=X(this,Af))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,u,f,h,m,v,S,k,C,E,_,M,A,I,N,O,j,V,z;const n=()=>{Yt(this,fl,Tu).call(this,{type:"continue"})},r={client:X(this,Ay),meta:this.options.meta,mutationKey:this.options.mutationKey};rt(this,Af,JO({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(W,J)=>{Yt(this,fl,Tu).call(this,{type:"failed",failureCount:W,error:J})},onPause:()=>{Yt(this,fl,Tu).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>X(this,is).canRun(this)}));const i=this.state.status==="pending",s=!X(this,Af).canStart();try{if(i)n();else{Yt(this,fl,Tu).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=X(this,is).config).onMutate)==null?void 0:a.call(o,e,this,r));const J=await((f=(u=this.options).onMutate)==null?void 0:f.call(u,e,r));J!==this.state.context&&Yt(this,fl,Tu).call(this,{type:"pending",context:J,variables:e,isPaused:s})}const W=await X(this,Af).start();return await((m=(h=X(this,is).config).onSuccess)==null?void 0:m.call(h,W,e,this.state.context,this,r)),await((S=(v=this.options).onSuccess)==null?void 0:S.call(v,W,e,this.state.context,r)),await((C=(k=X(this,is).config).onSettled)==null?void 0:C.call(k,W,null,this.state.variables,this.state.context,this,r)),await((_=(E=this.options).onSettled)==null?void 0:_.call(E,W,null,e,this.state.context,r)),Yt(this,fl,Tu).call(this,{type:"success",data:W}),W}catch(W){try{throw await((A=(M=X(this,is).config).onError)==null?void 0:A.call(M,W,e,this.state.context,this,r)),await((N=(I=this.options).onError)==null?void 0:N.call(I,W,e,this.state.context,r)),await((j=(O=X(this,is).config).onSettled)==null?void 0:j.call(O,void 0,W,this.state.variables,this.state.context,this,r)),await((z=(V=this.options).onSettled)==null?void 0:z.call(V,void 0,W,e,this.state.context,r)),W}finally{Yt(this,fl,Tu).call(this,{type:"error",error:W})}}finally{X(this,is).runNext(this)}}},Ay=new WeakMap,dl=new WeakMap,is=new WeakMap,Af=new WeakMap,fl=new WeakSet,Tu=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ri.batch(()=>{X(this,dl).forEach(r=>{r.onMutationUpdate(e)}),X(this,is).notify({mutation:this,type:"updated",action:e})})},VO);function tD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var bc,ba,Ny,BO,M6=(BO=class extends Um{constructor(e={}){super();Tt(this,bc);Tt(this,ba);Tt(this,Ny);this.config=e,rt(this,bc,new Set),rt(this,ba,new Map),rt(this,Ny,0)}build(e,n,r){const i=new I6({client:e,mutationCache:this,mutationId:++Pb(this,Ny)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){X(this,bc).add(e);const n=Ib(e);if(typeof n=="string"){const r=X(this,ba).get(n);r?r.push(e):X(this,ba).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(X(this,bc).delete(e)){const n=Ib(e);if(typeof n=="string"){const r=X(this,ba).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&X(this,ba).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Ib(e);if(typeof n=="string"){const r=X(this,ba).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Ib(e);if(typeof n=="string"){const i=(r=X(this,ba).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ri.batch(()=>{X(this,bc).forEach(e=>{this.notify({type:"removed",mutation:e})}),X(this,bc).clear(),X(this,ba).clear()})}getAll(){return Array.from(X(this,bc))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>hR(n,r))}findAll(e={}){return this.getAll().filter(n=>hR(e,n))}notify(e){ri.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return ri.batch(()=>Promise.all(e.map(n=>n.continue().catch(os))))}},bc=new WeakMap,ba=new WeakMap,Ny=new WeakMap,BO);function Ib(t){var e;return(e=t.options.scope)==null?void 0:e.id}var xc,Vu,As,wc,Pc,ex,dT,zO,A6=(zO=class extends Um{constructor(n,r){super();Tt(this,Pc);Tt(this,xc);Tt(this,Vu);Tt(this,As);Tt(this,wc);rt(this,xc,n),this.setOptions(r),this.bindMethods(),Yt(this,Pc,ex).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=X(this,xc).defaultMutationOptions(n),Dx(this.options,r)||X(this,xc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:X(this,As),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Uf(r.mutationKey)!==Uf(this.options.mutationKey)?this.reset():((i=X(this,As))==null?void 0:i.state.status)==="pending"&&X(this,As).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=X(this,As))==null||n.removeObserver(this)}onMutationUpdate(n){Yt(this,Pc,ex).call(this),Yt(this,Pc,dT).call(this,n)}getCurrentResult(){return X(this,Vu)}reset(){var n;(n=X(this,As))==null||n.removeObserver(this),rt(this,As,void 0),Yt(this,Pc,ex).call(this),Yt(this,Pc,dT).call(this)}mutate(n,r){var i;return rt(this,wc,r),(i=X(this,As))==null||i.removeObserver(this),rt(this,As,X(this,xc).getMutationCache().build(X(this,xc),this.options)),X(this,As).addObserver(this),X(this,As).execute(n)}},xc=new WeakMap,Vu=new WeakMap,As=new WeakMap,wc=new WeakMap,Pc=new WeakSet,ex=function(){var r;const n=((r=X(this,As))==null?void 0:r.state)??tD();rt(this,Vu,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},dT=function(n){ri.batch(()=>{var r,i,s,o,a,u,f,h;if(X(this,wc)&&this.hasListeners()){const m=X(this,Vu).variables,v=X(this,Vu).context,S={client:X(this,xc),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((i=(r=X(this,wc)).onSuccess)==null||i.call(r,n.data,m,v,S),(o=(s=X(this,wc)).onSettled)==null||o.call(s,n.data,null,m,v,S)):(n==null?void 0:n.type)==="error"&&((u=(a=X(this,wc)).onError)==null||u.call(a,n.error,m,v,S),(h=(f=X(this,wc)).onSettled)==null||h.call(f,void 0,n.error,m,v,S))}this.listeners.forEach(m=>{m(X(this,Vu))})})},zO),hl,$O,N6=($O=class extends Um{constructor(e={}){super();Tt(this,hl);this.config=e,rt(this,hl,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??iE(i,n);let o=this.get(s);return o||(o=new T6({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){X(this,hl).has(e.queryHash)||(X(this,hl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=X(this,hl).get(e.queryHash);n&&(e.destroy(),n===e&&X(this,hl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ri.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return X(this,hl).get(e)}getAll(){return[...X(this,hl).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>fR(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>fR(e,r)):n}notify(e){ri.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){ri.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ri.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},hl=new WeakMap,$O),xr,Bu,zu,gm,vm,$u,ym,bm,WO,O6=(WO=class{constructor(t={}){Tt(this,xr);Tt(this,Bu);Tt(this,zu);Tt(this,gm);Tt(this,vm);Tt(this,$u);Tt(this,ym);Tt(this,bm);rt(this,xr,t.queryCache||new N6),rt(this,Bu,t.mutationCache||new M6),rt(this,zu,t.defaultOptions||{}),rt(this,gm,new Map),rt(this,vm,new Map),rt(this,$u,0)}mount(){Pb(this,$u)._++,X(this,$u)===1&&(rt(this,ym,oE.subscribe(async t=>{t&&(await this.resumePausedMutations(),X(this,xr).onFocus())})),rt(this,bm,Lx.subscribe(async t=>{t&&(await this.resumePausedMutations(),X(this,xr).onOnline())})))}unmount(){var t,e;Pb(this,$u)._--,X(this,$u)===0&&((t=X(this,ym))==null||t.call(this),rt(this,ym,void 0),(e=X(this,bm))==null||e.call(this),rt(this,bm,void 0))}isFetching(t){return X(this,xr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return X(this,Bu).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=X(this,xr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=X(this,xr).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(qu(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return X(this,xr).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=X(this,xr).get(r.queryHash),s=i==null?void 0:i.state.data,o=m6(e,s);if(o!==void 0)return X(this,xr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return ri.batch(()=>X(this,xr).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=X(this,xr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=X(this,xr);ri.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=X(this,xr);return ri.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=ri.batch(()=>X(this,xr).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(os).catch(os)}invalidateQueries(t,e={}){return ri.batch(()=>(X(this,xr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=ri.batch(()=>X(this,xr).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(os)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(os)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=X(this,xr).build(this,e);return n.isStaleByTime(qu(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(os).catch(os)}fetchInfiniteQuery(t){return t.behavior=bR(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(os).catch(os)}ensureInfiniteQueryData(t){return t.behavior=bR(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Lx.isOnline()?X(this,Bu).resumePausedMutations():Promise.resolve()}getQueryCache(){return X(this,xr)}getMutationCache(){return X(this,Bu)}getDefaultOptions(){return X(this,zu)}setDefaultOptions(t){rt(this,zu,t)}setQueryDefaults(t,e){X(this,gm).set(Uf(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...X(this,gm).values()],n={};return e.forEach(r=>{ny(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){X(this,vm).set(Uf(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...X(this,vm).values()],n={};return e.forEach(r=>{ny(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...X(this,zu).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=iE(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===sE&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...X(this,zu).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){X(this,xr).clear(),X(this,Bu).clear()}},xr=new WeakMap,Bu=new WeakMap,zu=new WeakMap,gm=new WeakMap,vm=new WeakMap,$u=new WeakMap,ym=new WeakMap,bm=new WeakMap,WO),nD=w.createContext(void 0),Rw=t=>{const e=w.useContext(nD);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},D6=({client:t,children:e})=>(w.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),b.jsx(nD.Provider,{value:t,children:e})),rD=w.createContext(!1),L6=()=>w.useContext(rD);rD.Provider;function j6(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var F6=w.createContext(j6()),U6=()=>w.useContext(F6),V6=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},B6=t=>{w.useEffect(()=>{t.clearReset()},[t])},z6=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||YO(n,[t.error,r])),$6=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},W6=(t,e)=>t.isLoading&&t.isFetching&&!e,H6=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,wR=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function q6(t,e,n){var m,v,S,k,C;const r=L6(),i=U6(),s=Rw(),o=s.defaultQueryOptions(t);(v=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||v.call(m,o),o._optimisticResults=r?"isRestoring":"optimistic",$6(o),V6(o,i),B6(i);const a=!s.getQueryCache().get(o.queryHash),[u]=w.useState(()=>new e(s,o)),f=u.getOptimisticResult(o),h=!r&&t.subscribed!==!1;if(w.useSyncExternalStore(w.useCallback(E=>{const _=h?u.subscribe(ri.batchCalls(E)):os;return u.updateResult(),_},[u,h]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),w.useEffect(()=>{u.setOptions(o)},[o,u]),H6(o,f))throw wR(o,u,i);if(z6({result:f,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw f.error;if((k=(S=s.getDefaultOptions().queries)==null?void 0:S._experimental_afterQuery)==null||k.call(S,o,f),o.experimental_prefetchInRender&&!Ff&&W6(f,r)){const E=a?wR(o,u,i):(C=s.getQueryCache().get(o.queryHash))==null?void 0:C.promise;E==null||E.catch(os).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?f:u.trackResult(f)}function Ho(t,e){return q6(t,E6)}function Ju(t,e){const n=Rw(),[r]=w.useState(()=>new A6(n,t));w.useEffect(()=>{r.setOptions(t)},[r,t]);const i=w.useSyncExternalStore(w.useCallback(o=>r.subscribe(ri.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=w.useCallback((o,a)=>{r.mutate(o,a).catch(os)},[r]);if(i.error&&YO(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var iD=t=>{throw TypeError(t)},K6=(t,e,n)=>e.has(t)||iD("Cannot "+n),FC=(t,e,n)=>(K6(t,e,"read from private field"),n?n.call(t):e.get(t)),G6=(t,e,n)=>e.has(t)?iD("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),SR="popstate";function Y6(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return ry("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Xu(i)}return J6(e,n,null,t)}function on(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Q6(){return Math.random().toString(36).substring(2,10)}function CR(t,e){return{usr:t.state,key:t.key,idx:e}}function ry(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ud(e):e,state:n,key:e&&e.key||r||Q6()}}function Xu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ud(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function J6(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",u=null,f=h();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function h(){return(o.state||{idx:null}).idx}function m(){a="POP";let E=h(),_=E==null?null:E-f;f=E,u&&u({action:a,location:C.location,delta:_})}function v(E,_){a="PUSH";let M=ry(C.location,E,_);f=h()+1;let A=CR(M,f),I=C.createHref(M);try{o.pushState(A,"",I)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(I)}s&&u&&u({action:a,location:C.location,delta:1})}function S(E,_){a="REPLACE";let M=ry(C.location,E,_);f=h();let A=CR(M,f),I=C.createHref(M);o.replaceState(A,"",I),s&&u&&u({action:a,location:C.location,delta:0})}function k(E){return sD(E)}let C={get action(){return a},get location(){return t(i,o)},listen(E){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(SR,m),u=E,()=>{i.removeEventListener(SR,m),u=null}},createHref(E){return e(i,E)},createURL:k,encodeLocation(E){let _=k(E);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:S,go(E){return o.go(E)}};return C}function sD(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),on(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Xu(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}var Ov,kR=class{constructor(t){if(G6(this,Ov,new Map),t)for(let[e,n]of t)this.set(e,n)}get(t){if(FC(this,Ov).has(t))return FC(this,Ov).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){FC(this,Ov).set(t,e)}};Ov=new WeakMap;var X6=new Set(["lazy","caseSensitive","path","id","index","children"]);function Z6(t){return X6.has(t)}var e$=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function t$(t){return e$.has(t)}function n$(t){return t.index===!0}function iy(t,e,n=[],r={},i=!1){return t.map((s,o)=>{let a=[...n,String(o)],u=typeof s.id=="string"?s.id:a.join("-");if(on(s.index!==!0||!s.children,"Cannot specify children on an index route"),on(i||!r[u],`Found a route id collision on id "${u}".  Route id's must be globally unique within Data Router usages`),n$(s)){let f={...s,...e(s),id:u};return r[u]=f,f}else{let f={...s,...e(s),id:u,children:void 0};return r[u]=f,s.children&&(f.children=iy(s.children,e,a,r,i)),f}})}function Iu(t,e,n="/"){return tx(t,e,n,!1)}function tx(t,e,n,r){let i=typeof e=="string"?ud(e):e,s=Ws(i.pathname||"/",n);if(s==null)return null;let o=oD(t);i$(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let f=m$(s);a=h$(o[u],f,r)}return a}function r$(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],loaderData:e[n.id],handle:n.handle}}function oD(t,e=[],n=[],r="",i=!1){let s=(o,a,u=i,f)=>{let h={relativePath:f===void 0?o.path||"":f,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;on(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let m=yl([r,h.relativePath]),v=n.concat(h);o.children&&o.children.length>0&&(on(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),oD(o.children,e,v,m,u)),!(o.path==null&&!o.index)&&e.push({path:m,score:d$(m,o.index),routesMeta:v})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,a);else for(let f of aD(o.path))s(o,a,!0,f)}),e}function aD(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=aD(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function i$(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:f$(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var s$=/^:[\w-]+$/,o$=3,a$=2,l$=1,c$=10,u$=-2,TR=t=>t==="*";function d$(t,e){let n=t.split("/"),r=n.length;return n.some(TR)&&(r+=u$),e&&(r+=a$),n.filter(i=>!TR(i)).reduce((i,s)=>i+(s$.test(s)?o$:s===""?l$:c$),r)}function f$(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function h$(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],f=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",m=jx({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},h),v=u.route;if(!m&&f&&n&&!r[r.length-1].route.index&&(m=jx({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:yl([s,m.pathname]),pathnameBase:b$(yl([s,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(s=yl([s,m.pathnameBase]))}return o}function jx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=p$(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((f,{paramName:h,isOptional:m},v)=>{if(h==="*"){let k=a[v]||"";o=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const S=a[v];return m&&!S?f[h]=void 0:f[h]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:o,pattern:t}}function p$(t,e=!1,n=!0){jr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function m$(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ws(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function g$({basename:t,pathname:e}){return e==="/"?t:yl([t,e])}function v$(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ud(t):t;return{pathname:n?n.startsWith("/")?n:y$(n,e):e,search:x$(r),hash:w$(i)}}function y$(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function UC(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lD(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function lE(t){let e=lD(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function cE(t,e,n,r=!1){let i;typeof t=="string"?i=ud(t):(i={...t},on(!i.pathname||!i.pathname.includes("?"),UC("?","pathname","search",i)),on(!i.pathname||!i.pathname.includes("#"),UC("#","pathname","hash",i)),on(!i.search||!i.search.includes("#"),UC("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}a=m>=0?e[m]:"/"}let u=v$(i,a),f=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(f||h)&&(u.pathname+="/"),u}var yl=t=>t.join("/").replace(/\/\/+/g,"/"),b$=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),x$=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,w$=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Fx=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function sy(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var cD=["POST","PUT","PATCH","DELETE"],S$=new Set(cD),C$=["GET",...cD],k$=new Set(C$),T$=new Set([301,302,303,307,308]),E$=new Set([307,308]),VC={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},_$={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Op={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},P$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uE=t=>P$.test(t),R$=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),uD="remix-router-transitions",dD=Symbol("ResetLoaderData");function I$(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";on(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=t.hydrationRouteProperties||[],i=t.mapRouteProperties||R$,s={},o=iy(t.routes,i,void 0,s),a,u=t.basename||"/";u.startsWith("/")||(u=`/${u}`);let f=t.dataStrategy||D$,h={...t.future},m=null,v=new Set,S=null,k=null,C=null,E=t.hydrationData!=null,_=Iu(o,t.history.location,u),M=!1,A=null,I;if(_==null&&!t.patchRoutesOnNavigation){let G=$o(404,{pathname:t.history.location.pathname}),{matches:re,route:Se}=Mb(o);I=!0,_=re,A={[Se.id]:G}}else if(_&&!t.hydrationData&&Vn(_,o,t.history.location.pathname).active&&(_=null),_)if(_.some(G=>G.route.lazy))I=!1;else if(!_.some(G=>dE(G.route)))I=!0;else{let G=t.hydrationData?t.hydrationData.loaderData:null,re=t.hydrationData?t.hydrationData.errors:null;if(re){let Se=_.findIndex(Le=>re[Le.route.id]!==void 0);I=_.slice(0,Se+1).every(Le=>!hT(Le.route,G,re))}else I=_.every(Se=>!hT(Se.route,G,re))}else{I=!1,_=[];let G=Vn(null,o,t.history.location.pathname);G.active&&G.matches&&(M=!0,_=G.matches)}let N,O={historyAction:t.history.action,location:t.history.location,matches:_,initialized:I,navigation:VC,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||A,fetchers:new Map,blockers:new Map},j="POP",V=!1,z,W=!1,J=new Map,Y=null,me=!1,ue=!1,Ie=new Set,se=new Map,xe=0,q=-1,te=new Map,ae=new Set,B=new Map,fe=new Map,ie=new Set,pe=new Map,ke,Pe=null;function de(){if(m=t.history.listen(({action:G,location:re,delta:Se})=>{if(ke){ke(),ke=void 0;return}jr(pe.size===0||Se!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Le=ki({currentLocation:O.location,nextLocation:re,historyAction:G});if(Le&&Se!=null){let He=new Promise(lt=>{ke=lt});t.history.go(Se*-1),Ci(Le,{state:"blocked",location:re,proceed(){Ci(Le,{state:"proceeding",proceed:void 0,reset:void 0,location:re}),He.then(()=>t.history.go(Se))},reset(){let lt=new Map(O.blockers);lt.set(Le,Op),We({blockers:lt})}});return}return Ct(G,re)}),n){Q$(e,J);let G=()=>J$(e,J);e.addEventListener("pagehide",G),Y=()=>e.removeEventListener("pagehide",G)}return O.initialized||Ct("POP",O.location,{initialHydration:!0}),N}function ge(){m&&m(),Y&&Y(),v.clear(),z&&z.abort(),O.fetchers.forEach((G,re)=>cn(re)),O.blockers.forEach((G,re)=>Ur(re))}function _e(G){return v.add(G),()=>v.delete(G)}function We(G,re={}){G.matches&&(G.matches=G.matches.map(He=>{let lt=s[He.route.id],it=He.route;return it.element!==lt.element||it.errorElement!==lt.errorElement||it.hydrateFallbackElement!==lt.hydrateFallbackElement?{...He,route:lt}:He})),O={...O,...G};let Se=[],Le=[];O.fetchers.forEach((He,lt)=>{He.state==="idle"&&(ie.has(lt)?Se.push(lt):Le.push(lt))}),ie.forEach(He=>{!O.fetchers.has(He)&&!se.has(He)&&Se.push(He)}),[...v].forEach(He=>He(O,{deletedFetchers:Se,viewTransitionOpts:re.viewTransitionOpts,flushSync:re.flushSync===!0})),Se.forEach(He=>cn(He)),Le.forEach(He=>O.fetchers.delete(He))}function dt(G,re,{flushSync:Se}={}){var Pt,yt;let Le=O.actionData!=null&&O.navigation.formMethod!=null&&Ls(O.navigation.formMethod)&&O.navigation.state==="loading"&&((Pt=G.state)==null?void 0:Pt._isRedirect)!==!0,He;re.actionData?Object.keys(re.actionData).length>0?He=re.actionData:He=null:Le?He=O.actionData:He=null;let lt=re.loaderData?DR(O.loaderData,re.loaderData,re.matches||[],re.errors):O.loaderData,it=O.blockers;it.size>0&&(it=new Map(it),it.forEach((Mt,Sn)=>it.set(Sn,Op)));let ct=me?!1:Dt(G,re.matches||O.matches),xt=V===!0||O.navigation.formMethod!=null&&Ls(O.navigation.formMethod)&&((yt=G.state)==null?void 0:yt._isRedirect)!==!0;a&&(o=a,a=void 0),me||j==="POP"||(j==="PUSH"?t.history.push(G,G.state):j==="REPLACE"&&t.history.replace(G,G.state));let It;if(j==="POP"){let Mt=J.get(O.location.pathname);Mt&&Mt.has(G.pathname)?It={currentLocation:O.location,nextLocation:G}:J.has(G.pathname)&&(It={currentLocation:G,nextLocation:O.location})}else if(W){let Mt=J.get(O.location.pathname);Mt?Mt.add(G.pathname):(Mt=new Set([G.pathname]),J.set(O.location.pathname,Mt)),It={currentLocation:O.location,nextLocation:G}}We({...re,actionData:He,loaderData:lt,historyAction:j,location:G,initialized:!0,navigation:VC,revalidation:"idle",restoreScrollPosition:ct,preventScrollReset:xt,blockers:it},{viewTransitionOpts:It,flushSync:Se===!0}),j="POP",V=!1,W=!1,me=!1,ue=!1,Pe==null||Pe.resolve(),Pe=null}async function mt(G,re){if(typeof G=="number"){t.history.go(G);return}let Se=fT(O.location,O.matches,u,G,re==null?void 0:re.fromRouteId,re==null?void 0:re.relative),{path:Le,submission:He,error:lt}=ER(!1,Se,re),it=O.location,ct=ry(O.location,Le,re&&re.state);ct={...ct,...t.history.encodeLocation(ct)};let xt=re&&re.replace!=null?re.replace:void 0,It="PUSH";xt===!0?It="REPLACE":xt===!1||He!=null&&Ls(He.formMethod)&&He.formAction===O.location.pathname+O.location.search&&(It="REPLACE");let Pt=re&&"preventScrollReset"in re?re.preventScrollReset===!0:void 0,yt=(re&&re.flushSync)===!0,Mt=ki({currentLocation:it,nextLocation:ct,historyAction:It});if(Mt){Ci(Mt,{state:"blocked",location:ct,proceed(){Ci(Mt,{state:"proceeding",proceed:void 0,reset:void 0,location:ct}),mt(G,re)},reset(){let Sn=new Map(O.blockers);Sn.set(Mt,Op),We({blockers:Sn})}});return}await Ct(It,ct,{submission:He,pendingError:lt,preventScrollReset:Pt,replace:re&&re.replace,enableViewTransition:re&&re.viewTransition,flushSync:yt})}function Et(){Pe||(Pe=X$()),Be(),We({revalidation:"loading"});let G=Pe.promise;return O.navigation.state==="submitting"?G:O.navigation.state==="idle"?(Ct(O.historyAction,O.location,{startUninterruptedRevalidation:!0}),G):(Ct(j||O.historyAction,O.navigation.location,{overrideNavigation:O.navigation,enableViewTransition:W===!0}),G)}async function Ct(G,re,Se){z&&z.abort(),z=null,j=G,me=(Se&&Se.startUninterruptedRevalidation)===!0,Dl(O.location,O.matches),V=(Se&&Se.preventScrollReset)===!0,W=(Se&&Se.enableViewTransition)===!0;let Le=a||o,He=Se&&Se.overrideNavigation,lt=Se!=null&&Se.initialHydration&&O.matches&&O.matches.length>0&&!M?O.matches:Iu(Le,re,u),it=(Se&&Se.flushSync)===!0;if(lt&&O.initialized&&!ue&&$$(O.location,re)&&!(Se&&Se.submission&&Ls(Se.submission.formMethod))){dt(re,{matches:lt},{flushSync:it});return}let ct=Vn(lt,Le,re.pathname);if(ct.active&&ct.matches&&(lt=ct.matches),!lt){let{error:Yr,notFoundMatches:Bn,route:An}=Jo(re.pathname);dt(re,{matches:Bn,loaderData:{},errors:{[An.id]:Yr}},{flushSync:it});return}z=new AbortController;let xt=Dp(t.history,re,z.signal,Se&&Se.submission),It=t.getContext?await t.getContext():new kR,Pt;if(Se&&Se.pendingError)Pt=[Mu(lt).route.id,{type:"error",error:Se.pendingError}];else if(Se&&Se.submission&&Ls(Se.submission.formMethod)){let Yr=await jn(xt,re,Se.submission,lt,It,ct.active,Se&&Se.initialHydration===!0,{replace:Se.replace,flushSync:it});if(Yr.shortCircuited)return;if(Yr.pendingActionResult){let[Bn,An]=Yr.pendingActionResult;if(co(An)&&sy(An.error)&&An.error.status===404){z=null,dt(re,{matches:Yr.matches,loaderData:{},errors:{[Bn]:An.error}});return}}lt=Yr.matches||lt,Pt=Yr.pendingActionResult,He=BC(re,Se.submission),it=!1,ct.active=!1,xt=Dp(t.history,xt.url,xt.signal)}let{shortCircuited:yt,matches:Mt,loaderData:Sn,errors:ar}=await wn(xt,re,lt,It,ct.active,He,Se&&Se.submission,Se&&Se.fetcherSubmission,Se&&Se.replace,Se&&Se.initialHydration===!0,it,Pt);yt||(z=null,dt(re,{matches:Mt||lt,...LR(Pt),loaderData:Sn,errors:ar}))}async function jn(G,re,Se,Le,He,lt,it,ct={}){Be();let xt=G$(re,Se);if(We({navigation:xt},{flushSync:ct.flushSync===!0}),lt){let yt=await Gn(Le,re.pathname,G.signal);if(yt.type==="aborted")return{shortCircuited:!0};if(yt.type==="error"){if(yt.partialMatches.length===0){let{matches:Sn,route:ar}=Mb(o);return{matches:Sn,pendingActionResult:[ar.id,{type:"error",error:yt.error}]}}let Mt=Mu(yt.partialMatches).route.id;return{matches:yt.partialMatches,pendingActionResult:[Mt,{type:"error",error:yt.error}]}}else if(yt.matches)Le=yt.matches;else{let{notFoundMatches:Mt,error:Sn,route:ar}=Jo(re.pathname);return{matches:Mt,pendingActionResult:[ar.id,{type:"error",error:Sn}]}}}let It,Pt=nx(Le,re);if(!Pt.route.action&&!Pt.route.lazy)It={type:"error",error:$o(405,{method:G.method,pathname:re.pathname,routeId:Pt.route.id})};else{let yt=Gp(i,s,G,Le,Pt,it?[]:r,He),Mt=await qe(G,yt,He,null);if(It=Mt[Pt.route.id],!It){for(let Sn of Le)if(Mt[Sn.route.id]){It=Mt[Sn.route.id];break}}if(G.signal.aborted)return{shortCircuited:!0}}if(yf(It)){let yt;return ct&&ct.replace!=null?yt=ct.replace:yt=AR(It.response.headers.get("Location"),new URL(G.url),u)===O.location.pathname+O.location.search,await ye(G,It,!0,{submission:Se,replace:yt}),{shortCircuited:!0}}if(co(It)){let yt=Mu(Le,Pt.route.id);return(ct&&ct.replace)!==!0&&(j="PUSH"),{matches:Le,pendingActionResult:[yt.route.id,It,Pt.route.id]}}return{matches:Le,pendingActionResult:[Pt.route.id,It]}}async function wn(G,re,Se,Le,He,lt,it,ct,xt,It,Pt,yt){let Mt=lt||BC(re,it),Sn=it||ct||FR(Mt),ar=!me&&!It;if(He){if(ar){let mr=ln(yt);We({navigation:Mt,...mr!==void 0?{actionData:mr}:{}},{flushSync:Pt})}let Xt=await Gn(Se,re.pathname,G.signal);if(Xt.type==="aborted")return{shortCircuited:!0};if(Xt.type==="error"){if(Xt.partialMatches.length===0){let{matches:Ys,route:Vr}=Mb(o);return{matches:Ys,loaderData:{},errors:{[Vr.id]:Xt.error}}}let mr=Mu(Xt.partialMatches).route.id;return{matches:Xt.partialMatches,loaderData:{},errors:{[mr]:Xt.error}}}else if(Xt.matches)Se=Xt.matches;else{let{error:mr,notFoundMatches:Ys,route:Vr}=Jo(re.pathname);return{matches:Ys,loaderData:{},errors:{[Vr.id]:mr}}}}let Yr=a||o,{dsMatches:Bn,revalidatingFetchers:An}=_R(G,Le,i,s,t.history,O,Se,Sn,re,It?[]:r,It===!0,ue,Ie,ie,B,ae,Yr,u,t.patchRoutesOnNavigation!=null,yt);if(q=++xe,!t.dataStrategy&&!Bn.some(Xt=>Xt.shouldLoad)&&!Bn.some(Xt=>Xt.route.middleware&&Xt.route.middleware.length>0)&&An.length===0){let Xt=_n();return dt(re,{matches:Se,loaderData:{},errors:yt&&co(yt[1])?{[yt[0]]:yt[1].error}:null,...LR(yt),...Xt?{fetchers:new Map(O.fetchers)}:{}},{flushSync:Pt}),{shortCircuited:!0}}if(ar){let Xt={};if(!He){Xt.navigation=Mt;let mr=ln(yt);mr!==void 0&&(Xt.actionData=mr)}An.length>0&&(Xt.fetchers=Mn(An)),We(Xt,{flushSync:Pt})}An.forEach(Xt=>{bt(Xt.key),Xt.controller&&se.set(Xt.key,Xt.controller)});let xo=()=>An.forEach(Xt=>bt(Xt.key));z&&z.signal.addEventListener("abort",xo);let{loaderResults:Da,fetcherResults:Gi}=await Ge(Bn,An,G,Le);if(G.signal.aborted)return{shortCircuited:!0};z&&z.signal.removeEventListener("abort",xo),An.forEach(Xt=>se.delete(Xt.key));let ps=Ab(Da);if(ps)return await ye(G,ps.result,!0,{replace:xt}),{shortCircuited:!0};if(ps=Ab(Gi),ps)return ae.add(ps.key),await ye(G,ps.result,!0,{replace:xt}),{shortCircuited:!0};let{loaderData:Nn,errors:Ll}=OR(O,Se,Da,yt,An,Gi);It&&O.errors&&(Ll={...O.errors,...Ll});let Gs=_n(),jl=or(q),wo=Gs||jl||An.length>0;return{matches:Se,loaderData:Nn,errors:Ll,...wo?{fetchers:new Map(O.fetchers)}:{}}}function ln(G){if(G&&!co(G[1]))return{[G[0]]:G[1].data};if(O.actionData)return Object.keys(O.actionData).length===0?null:O.actionData}function Mn(G){return G.forEach(re=>{let Se=O.fetchers.get(re.key),Le=yv(void 0,Se?Se.data:void 0);O.fetchers.set(re.key,Le)}),new Map(O.fetchers)}async function En(G,re,Se,Le){bt(G);let He=(Le&&Le.flushSync)===!0,lt=a||o,it=fT(O.location,O.matches,u,Se,re,Le==null?void 0:Le.relative),ct=Iu(lt,it,u),xt=Vn(ct,lt,it);if(xt.active&&xt.matches&&(ct=xt.matches),!ct){Ne(G,re,$o(404,{pathname:it}),{flushSync:He});return}let{path:It,submission:Pt,error:yt}=ER(!0,it,Le);if(yt){Ne(G,re,yt,{flushSync:He});return}let Mt=t.getContext?await t.getContext():new kR,Sn=(Le&&Le.preventScrollReset)===!0;if(Pt&&Ls(Pt.formMethod)){await Q(G,re,It,ct,Mt,xt.active,He,Sn,Pt);return}B.set(G,{routeId:re,path:It}),await le(G,re,It,ct,Mt,xt.active,He,Sn,Pt)}async function Q(G,re,Se,Le,He,lt,it,ct,xt){Be(),B.delete(G);let It=O.fetchers.get(G);Xe(G,Y$(xt,It),{flushSync:it});let Pt=new AbortController,yt=Dp(t.history,Se,Pt.signal,xt);if(lt){let lr=await Gn(Le,new URL(yt.url).pathname,yt.signal,G);if(lr.type==="aborted")return;if(lr.type==="error"){Ne(G,re,lr.error,{flushSync:it});return}else if(lr.matches)Le=lr.matches;else{Ne(G,re,$o(404,{pathname:Se}),{flushSync:it});return}}let Mt=nx(Le,Se);if(!Mt.route.action&&!Mt.route.lazy){let lr=$o(405,{method:xt.formMethod,pathname:Se,routeId:re});Ne(G,re,lr,{flushSync:it});return}se.set(G,Pt);let Sn=xe,ar=Gp(i,s,yt,Le,Mt,r,He),Bn=(await qe(yt,ar,He,G))[Mt.route.id];if(yt.signal.aborted){se.get(G)===Pt&&se.delete(G);return}if(ie.has(G)){if(yf(Bn)||co(Bn)){Xe(G,mc(void 0));return}}else{if(yf(Bn))if(se.delete(G),q>Sn){Xe(G,mc(void 0));return}else return ae.add(G),Xe(G,yv(xt)),ye(yt,Bn,!1,{fetcherSubmission:xt,preventScrollReset:ct});if(co(Bn)){Ne(G,re,Bn.error);return}}let An=O.navigation.location||O.location,xo=Dp(t.history,An,Pt.signal),Da=a||o,Gi=O.navigation.state!=="idle"?Iu(Da,O.navigation.location,u):O.matches;on(Gi,"Didn't find any matches after fetcher action");let ps=++xe;te.set(G,ps);let Nn=yv(xt,Bn.data);O.fetchers.set(G,Nn);let{dsMatches:Ll,revalidatingFetchers:Gs}=_R(xo,He,i,s,t.history,O,Gi,xt,An,r,!1,ue,Ie,ie,B,ae,Da,u,t.patchRoutesOnNavigation!=null,[Mt.route.id,Bn]);Gs.filter(lr=>lr.key!==G).forEach(lr=>{let ui=lr.key,gd=O.fetchers.get(ui),ih=yv(void 0,gd?gd.data:void 0);O.fetchers.set(ui,ih),bt(ui),lr.controller&&se.set(ui,lr.controller)}),We({fetchers:new Map(O.fetchers)});let jl=()=>Gs.forEach(lr=>bt(lr.key));Pt.signal.addEventListener("abort",jl);let{loaderResults:wo,fetcherResults:Xt}=await Ge(Ll,Gs,xo,He);if(Pt.signal.aborted)return;if(Pt.signal.removeEventListener("abort",jl),te.delete(G),se.delete(G),Gs.forEach(lr=>se.delete(lr.key)),O.fetchers.has(G)){let lr=mc(Bn.data);O.fetchers.set(G,lr)}let mr=Ab(wo);if(mr)return ye(xo,mr.result,!1,{preventScrollReset:ct});if(mr=Ab(Xt),mr)return ae.add(mr.key),ye(xo,mr.result,!1,{preventScrollReset:ct});let{loaderData:Ys,errors:Vr}=OR(O,Gi,wo,void 0,Gs,Xt);or(ps),O.navigation.state==="loading"&&ps>q?(on(j,"Expected pending action"),z&&z.abort(),dt(O.navigation.location,{matches:Gi,loaderData:Ys,errors:Vr,fetchers:new Map(O.fetchers)})):(We({errors:Vr,loaderData:DR(O.loaderData,Ys,Gi,Vr),fetchers:new Map(O.fetchers)}),ue=!1)}async function le(G,re,Se,Le,He,lt,it,ct,xt){let It=O.fetchers.get(G);Xe(G,yv(xt,It?It.data:void 0),{flushSync:it});let Pt=new AbortController,yt=Dp(t.history,Se,Pt.signal);if(lt){let An=await Gn(Le,new URL(yt.url).pathname,yt.signal,G);if(An.type==="aborted")return;if(An.type==="error"){Ne(G,re,An.error,{flushSync:it});return}else if(An.matches)Le=An.matches;else{Ne(G,re,$o(404,{pathname:Se}),{flushSync:it});return}}let Mt=nx(Le,Se);se.set(G,Pt);let Sn=xe,ar=Gp(i,s,yt,Le,Mt,r,He),Bn=(await qe(yt,ar,He,G))[Mt.route.id];if(se.get(G)===Pt&&se.delete(G),!yt.signal.aborted){if(ie.has(G)){Xe(G,mc(void 0));return}if(yf(Bn))if(q>Sn){Xe(G,mc(void 0));return}else{ae.add(G),await ye(yt,Bn,!1,{preventScrollReset:ct});return}if(co(Bn)){Ne(G,re,Bn.error);return}Xe(G,mc(Bn.data))}}async function ye(G,re,Se,{submission:Le,fetcherSubmission:He,preventScrollReset:lt,replace:it}={}){re.response.headers.has("X-Remix-Revalidate")&&(ue=!0);let ct=re.response.headers.get("Location");on(ct,"Expected a Location header on the redirect Response"),ct=AR(ct,new URL(G.url),u);let xt=ry(O.location,ct,{_isRedirect:!0});if(n){let ar=!1;if(re.response.headers.has("X-Remix-Reload-Document"))ar=!0;else if(uE(ct)){const Yr=sD(ct,!0);ar=Yr.origin!==e.location.origin||Ws(Yr.pathname,u)==null}if(ar){it?e.location.replace(ct):e.location.assign(ct);return}}z=null;let It=it===!0||re.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Pt,formAction:yt,formEncType:Mt}=O.navigation;!Le&&!He&&Pt&&yt&&Mt&&(Le=FR(O.navigation));let Sn=Le||He;if(E$.has(re.response.status)&&Sn&&Ls(Sn.formMethod))await Ct(It,xt,{submission:{...Sn,formAction:ct},preventScrollReset:lt||V,enableViewTransition:Se?W:void 0});else{let ar=BC(xt,Le);await Ct(It,xt,{overrideNavigation:ar,fetcherSubmission:He,preventScrollReset:lt||V,enableViewTransition:Se?W:void 0})}}async function qe(G,re,Se,Le){let He,lt={};try{He=await j$(f,G,re,Le,Se,!1)}catch(it){return re.filter(ct=>ct.shouldLoad).forEach(ct=>{lt[ct.route.id]={type:"error",error:it}}),lt}if(G.signal.aborted)return lt;for(let[it,ct]of Object.entries(He))if(q$(ct)){let xt=ct.result;lt[it]={type:"redirect",response:B$(xt,G,it,re,u)}}else lt[it]=await V$(ct);return lt}async function Ge(G,re,Se,Le){let He=qe(Se,G,Le,null),lt=Promise.all(re.map(async xt=>{if(xt.matches&&xt.match&&xt.request&&xt.controller){let Pt=(await qe(xt.request,xt.matches,Le,xt.key))[xt.match.route.id];return{[xt.key]:Pt}}else return Promise.resolve({[xt.key]:{type:"error",error:$o(404,{pathname:xt.path})}})})),it=await He,ct=(await lt).reduce((xt,It)=>Object.assign(xt,It),{});return{loaderResults:it,fetcherResults:ct}}function Be(){ue=!0,B.forEach((G,re)=>{se.has(re)&&Ie.add(re),bt(re)})}function Xe(G,re,Se={}){O.fetchers.set(G,re),We({fetchers:new Map(O.fetchers)},{flushSync:(Se&&Se.flushSync)===!0})}function Ne(G,re,Se,Le={}){let He=Mu(O.matches,re);cn(G),We({errors:{[He.route.id]:Se},fetchers:new Map(O.fetchers)},{flushSync:(Le&&Le.flushSync)===!0})}function ht(G){return fe.set(G,(fe.get(G)||0)+1),ie.has(G)&&ie.delete(G),O.fetchers.get(G)||_$}function $t(G,re){bt(G,re==null?void 0:re.reason),Xe(G,mc(null))}function cn(G){let re=O.fetchers.get(G);se.has(G)&&!(re&&re.state==="loading"&&te.has(G))&&bt(G),B.delete(G),te.delete(G),ae.delete(G),ie.delete(G),Ie.delete(G),O.fetchers.delete(G)}function dn(G){let re=(fe.get(G)||0)-1;re<=0?(fe.delete(G),ie.add(G)):fe.set(G,re),We({fetchers:new Map(O.fetchers)})}function bt(G,re){let Se=se.get(G);Se&&(Se.abort(re),se.delete(G))}function fn(G){for(let re of G){let Se=ht(re),Le=mc(Se.data);O.fetchers.set(re,Le)}}function _n(){let G=[],re=!1;for(let Se of ae){let Le=O.fetchers.get(Se);on(Le,`Expected fetcher: ${Se}`),Le.state==="loading"&&(ae.delete(Se),G.push(Se),re=!0)}return fn(G),re}function or(G){let re=[];for(let[Se,Le]of te)if(Le<G){let He=O.fetchers.get(Se);on(He,`Expected fetcher: ${Se}`),He.state==="loading"&&(bt(Se),te.delete(Se),re.push(Se))}return fn(re),re.length>0}function ci(G,re){let Se=O.blockers.get(G)||Op;return pe.get(G)!==re&&pe.set(G,re),Se}function Ur(G){O.blockers.delete(G),pe.delete(G)}function Ci(G,re){let Se=O.blockers.get(G)||Op;on(Se.state==="unblocked"&&re.state==="blocked"||Se.state==="blocked"&&re.state==="blocked"||Se.state==="blocked"&&re.state==="proceeding"||Se.state==="blocked"&&re.state==="unblocked"||Se.state==="proceeding"&&re.state==="unblocked",`Invalid blocker state transition: ${Se.state} -> ${re.state}`);let Le=new Map(O.blockers);Le.set(G,re),We({blockers:Le})}function ki({currentLocation:G,nextLocation:re,historyAction:Se}){if(pe.size===0)return;pe.size>1&&jr(!1,"A router only supports one blocker at a time");let Le=Array.from(pe.entries()),[He,lt]=Le[Le.length-1],it=O.blockers.get(He);if(!(it&&it.state==="proceeding")&&lt({currentLocation:G,nextLocation:re,historyAction:Se}))return He}function Jo(G){let re=$o(404,{pathname:G}),Se=a||o,{matches:Le,route:He}=Mb(Se);return{notFoundMatches:Le,route:He,error:re}}function Ks(G,re,Se){if(S=G,C=re,k=Se||null,!E&&O.navigation===VC){E=!0;let Le=Dt(O.location,O.matches);Le!=null&&We({restoreScrollPosition:Le})}return()=>{S=null,C=null,k=null}}function Ki(G,re){return k&&k(G,re.map(Le=>r$(Le,O.loaderData)))||G.key}function Dl(G,re){if(S&&C){let Se=Ki(G,re);S[Se]=C()}}function Dt(G,re){if(S){let Se=Ki(G,re),Le=S[Se];if(typeof Le=="number")return Le}return null}function Vn(G,re,Se){if(t.patchRoutesOnNavigation)if(G){if(Object.keys(G[0].params).length>0)return{active:!0,matches:tx(re,Se,u,!0)}}else return{active:!0,matches:tx(re,Se,u,!0)||[]};return{active:!1,matches:null}}async function Gn(G,re,Se,Le){if(!t.patchRoutesOnNavigation)return{type:"success",matches:G};let He=G;for(;;){let lt=a==null,it=a||o,ct=s;try{await t.patchRoutesOnNavigation({signal:Se,path:re,matches:He,fetcherKey:Le,patch:(Pt,yt)=>{Se.aborted||PR(Pt,yt,it,ct,i,!1)}})}catch(Pt){return{type:"error",error:Pt,partialMatches:He}}finally{lt&&!Se.aborted&&(o=[...o])}if(Se.aborted)return{type:"aborted"};let xt=Iu(it,re,u);if(xt)return{type:"success",matches:xt};let It=tx(it,re,u,!0);if(!It||He.length===It.length&&He.every((Pt,yt)=>Pt.route.id===It[yt].route.id))return{type:"success",matches:null};He=It}}function Pr(G){s={},a=iy(G,i,void 0,s)}function bo(G,re,Se=!1){let Le=a==null;PR(G,re,a||o,s,i,Se),Le&&(o=[...o],We({}))}return N={get basename(){return u},get future(){return h},get state(){return O},get routes(){return o},get window(){return e},initialize:de,subscribe:_e,enableScrollRestoration:Ks,navigate:mt,fetch:En,revalidate:Et,createHref:G=>t.history.createHref(G),encodeLocation:G=>t.history.encodeLocation(G),getFetcher:ht,resetFetcher:$t,deleteFetcher:dn,dispose:ge,getBlocker:ci,deleteBlocker:Ur,patchRoutes:bo,_internalFetchControllers:se,_internalSetRoutes:Pr,_internalSetStateDoNotUseOrYouWillBreakYourApp(G){We(G)}},N}function M$(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function fT(t,e,n,r,i,s){let o,a;if(i){o=[];for(let f of e)if(o.push(f),f.route.id===i){a=f;break}}else o=e,a=e[e.length-1];let u=cE(r||".",lE(o),Ws(t.pathname,n)||t.pathname,s==="path");if(r==null&&(u.search=t.search,u.hash=t.hash),(r==null||r===""||r===".")&&a){let f=fE(u.search);if(a.route.index&&!f)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!a.route.index&&f){let h=new URLSearchParams(u.search),m=h.getAll("index");h.delete("index"),m.filter(S=>S).forEach(S=>h.append("index",S));let v=h.toString();u.search=v?`?${v}`:""}}return n!=="/"&&(u.pathname=g$({basename:n,pathname:u.pathname})),Xu(u)}function ER(t,e,n){if(!n||!M$(n))return{path:e};if(n.formMethod&&!K$(n.formMethod))return{path:e,error:$o(405,{method:n.formMethod})};let r=()=>({path:e,error:$o(400,{type:"invalid-body"})}),s=(n.formMethod||"get").toUpperCase(),o=vD(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Ls(s))return r();let m=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((v,[S,k])=>`${v}${S}=${k}
`,""):String(n.body);return{path:e,submission:{formMethod:s,formAction:o,formEncType:n.formEncType,formData:void 0,json:void 0,text:m}}}else if(n.formEncType==="application/json"){if(!Ls(s))return r();try{let m=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:s,formAction:o,formEncType:n.formEncType,formData:void 0,json:m,text:void 0}}}catch{return r()}}}on(typeof FormData=="function","FormData is not available in this environment");let a,u;if(n.formData)a=mT(n.formData),u=n.formData;else if(n.body instanceof FormData)a=mT(n.body),u=n.body;else if(n.body instanceof URLSearchParams)a=n.body,u=NR(a);else if(n.body==null)a=new URLSearchParams,u=new FormData;else try{a=new URLSearchParams(n.body),u=NR(a)}catch{return r()}let f={formMethod:s,formAction:o,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(Ls(f.formMethod))return{path:e,submission:f};let h=ud(e);return t&&h.search&&fE(h.search)&&a.append("index",""),h.search=`?${a}`,{path:Xu(h),submission:f}}function _R(t,e,n,r,i,s,o,a,u,f,h,m,v,S,k,C,E,_,M,A){var me;let I=A?co(A[1])?A[1].error:A[1].data:void 0,N=i.createURL(s.location),O=i.createURL(u),j;if(h&&s.errors){let ue=Object.keys(s.errors)[0];j=o.findIndex(Ie=>Ie.route.id===ue)}else if(A&&co(A[1])){let ue=A[0];j=o.findIndex(Ie=>Ie.route.id===ue)-1}let V=A?A[1].statusCode:void 0,z=V&&V>=400,W={currentUrl:N,currentParams:((me=s.matches[0])==null?void 0:me.params)||{},nextUrl:O,nextParams:o[0].params,...a,actionResult:I,actionStatus:V},J=o.map((ue,Ie)=>{let{route:se}=ue,xe=null;if(j!=null&&Ie>j?xe=!1:se.lazy?xe=!0:dE(se)?h?xe=hT(se,s.loaderData,s.errors):A$(s.loaderData,s.matches[Ie],ue)&&(xe=!0):xe=!1,xe!==null)return pT(n,r,t,ue,f,e,xe);let q=z?!1:m||N.pathname+N.search===O.pathname+O.search||N.search!==O.search||N$(s.matches[Ie],ue),te={...W,defaultShouldRevalidate:q},ae=Ux(ue,te);return pT(n,r,t,ue,f,e,ae,te)}),Y=[];return k.forEach((ue,Ie)=>{if(h||!o.some(ie=>ie.route.id===ue.routeId)||S.has(Ie))return;let se=s.fetchers.get(Ie),xe=se&&se.state!=="idle"&&se.data===void 0,q=Iu(E,ue.path,_);if(!q){if(M&&xe)return;Y.push({key:Ie,routeId:ue.routeId,path:ue.path,matches:null,match:null,request:null,controller:null});return}if(C.has(Ie))return;let te=nx(q,ue.path),ae=new AbortController,B=Dp(i,ue.path,ae.signal),fe=null;if(v.has(Ie))v.delete(Ie),fe=Gp(n,r,B,q,te,f,e);else if(xe)m&&(fe=Gp(n,r,B,q,te,f,e));else{let ie={...W,defaultShouldRevalidate:z?!1:m};Ux(te,ie)&&(fe=Gp(n,r,B,q,te,f,e,ie))}fe&&Y.push({key:Ie,routeId:ue.routeId,path:ue.path,matches:fe,match:te,request:B,controller:ae})}),{dsMatches:J,revalidatingFetchers:Y}}function dE(t){return t.loader!=null||t.middleware!=null&&t.middleware.length>0}function hT(t,e,n){if(t.lazy)return!0;if(!dE(t))return!1;let r=e!=null&&t.id in e,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function A$(t,e,n){let r=!e||n.route.id!==e.route.id,i=!t.hasOwnProperty(n.route.id);return r||i}function N$(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Ux(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function PR(t,e,n,r,i,s){let o;if(t){let f=r[t];on(f,`No route found to patch children into: routeId = ${t}`),f.children||(f.children=[]),o=f.children}else o=n;let a=[],u=[];if(e.forEach(f=>{let h=o.find(m=>fD(f,m));h?u.push({existingRoute:h,newRoute:f}):a.push(f)}),a.length>0){let f=iy(a,i,[t||"_","patch",String((o==null?void 0:o.length)||"0")],r);o.push(...f)}if(s&&u.length>0)for(let f=0;f<u.length;f++){let{existingRoute:h,newRoute:m}=u[f],v=h,[S]=iy([m],i,[],{},!0);Object.assign(v,{element:S.element?S.element:v.element,errorElement:S.errorElement?S.errorElement:v.errorElement,hydrateFallbackElement:S.hydrateFallbackElement?S.hydrateFallbackElement:v.hydrateFallbackElement})}}function fD(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>fD(n,s))}):!1}var RR=new WeakMap,hD=({key:t,route:e,manifest:n,mapRouteProperties:r})=>{let i=n[e.id];if(on(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let s=i.lazy[t];if(!s)return;let o=RR.get(i);o||(o={},RR.set(i,o));let a=o[t];if(a)return a;let u=(async()=>{let f=Z6(t),m=i[t]!==void 0&&t!=="hasErrorBoundary";if(f)jr(!f,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),o[t]=Promise.resolve();else if(m)jr(!1,`Route "${i.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let v=await s();v!=null&&(Object.assign(i,{[t]:v}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[t]=void 0,Object.values(i.lazy).every(v=>v===void 0)&&(i.lazy=void 0))})();return o[t]=u,u},IR=new WeakMap;function O$(t,e,n,r,i){let s=n[t.id];if(on(s,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let h=IR.get(s);if(h)return{lazyRoutePromise:h,lazyHandlerPromise:h};let m=(async()=>{on(typeof t.lazy=="function","No lazy route function found");let v=await t.lazy(),S={};for(let k in v){let C=v[k];if(C===void 0)continue;let E=t$(k),M=s[k]!==void 0&&k!=="hasErrorBoundary";E?jr(!E,"Route property "+k+" is not a supported property to be returned from a lazy route function. This property will be ignored."):M?jr(!M,`Route "${s.id}" has a static property "${k}" defined but its lazy function is also returning a value for this property. The lazy route property "${k}" will be ignored.`):S[k]=C}Object.assign(s,S),Object.assign(s,{...r(s),lazy:void 0})})();return IR.set(s,m),m.catch(()=>{}),{lazyRoutePromise:m,lazyHandlerPromise:m}}let o=Object.keys(t.lazy),a=[],u;for(let h of o){if(i&&i.includes(h))continue;let m=hD({key:h,route:t,manifest:n,mapRouteProperties:r});m&&(a.push(m),h===e&&(u=m))}let f=a.length>0?Promise.all(a).then(()=>{}):void 0;return f==null||f.catch(()=>{}),u==null||u.catch(()=>{}),{lazyRoutePromise:f,lazyHandlerPromise:u}}async function MR(t){let e=t.matches.filter(i=>i.shouldLoad),n={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,s)=>{n[e[s].route.id]=i}),n}async function D$(t){return t.matches.some(e=>e.route.middleware)?pD(t,()=>MR(t)):MR(t)}function pD(t,e){return L$(t,e,r=>r,W$,n);function n(r,i,s){if(s)return Promise.resolve(Object.assign(s.value,{[i]:{type:"error",result:r}}));{let{matches:o}=t,a=Math.min(Math.max(o.findIndex(f=>f.route.id===i),0),Math.max(o.findIndex(f=>f.unstable_shouldCallHandler()),0)),u=Mu(o,o[a].route.id).route.id;return Promise.resolve({[u]:{type:"error",result:r}})}}}async function L$(t,e,n,r,i){let{matches:s,request:o,params:a,context:u}=t,f=s.flatMap(m=>m.route.middleware?m.route.middleware.map(v=>[m.route.id,v]):[]);return await mD({request:o,params:a,context:u},f,e,n,r,i)}async function mD(t,e,n,r,i,s,o=0){let{request:a}=t;if(a.signal.aborted)throw a.signal.reason??new Error(`Request aborted: ${a.method} ${a.url}`);let u=e[o];if(!u)return await n();let[f,h]=u,m,v=async()=>{if(m)throw new Error("You may only call `next()` once per middleware");try{return m={value:await mD(t,e,n,r,i,s,o+1)},m.value}catch(S){return m={value:await s(S,f,m)},m.value}};try{let S=await h(t,v),k=S!=null?r(S):void 0;return i(k)?k:m?k??m.value:(m={value:await v()},m.value)}catch(S){return await s(S,f,m)}}function gD(t,e,n,r,i){let s=hD({key:"middleware",route:r.route,manifest:e,mapRouteProperties:t}),o=O$(r.route,Ls(n.method)?"action":"loader",e,t,i);return{middleware:s,route:o.lazyRoutePromise,handler:o.lazyHandlerPromise}}function pT(t,e,n,r,i,s,o,a=null){let u=!1,f=gD(t,e,n,r,i);return{...r,_lazyPromises:f,shouldLoad:o,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler(h){return u=!0,a?typeof h=="boolean"?Ux(r,{...a,defaultShouldRevalidate:h}):Ux(r,a):o},resolve(h){let{lazy:m,loader:v,middleware:S}=r.route,k=u||o||h&&!Ls(n.method)&&(m||v),C=S&&S.length>0&&!v&&!m;return k&&!C?F$({request:n,match:r,lazyHandlerPromise:f==null?void 0:f.handler,lazyRoutePromise:f==null?void 0:f.route,handlerOverride:h,scopedContext:s}):Promise.resolve({type:"data",result:void 0})}}}function Gp(t,e,n,r,i,s,o,a=null){return r.map(u=>u.route.id!==i.route.id?{...u,shouldLoad:!1,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler:()=>!1,_lazyPromises:gD(t,e,n,u,s),resolve:()=>Promise.resolve({type:"data",result:void 0})}:pT(t,e,n,u,s,o,!0,a))}async function j$(t,e,n,r,i,s){n.some(f=>{var h;return(h=f._lazyPromises)==null?void 0:h.middleware})&&await Promise.all(n.map(f=>{var h;return(h=f._lazyPromises)==null?void 0:h.middleware}));let o={request:e,params:n[0].params,context:i,matches:n},u=await t({...o,fetcherKey:r,runClientMiddleware:f=>{let h=o;return pD(h,()=>f({...h,fetcherKey:r,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(n.flatMap(f=>{var h,m;return[(h=f._lazyPromises)==null?void 0:h.handler,(m=f._lazyPromises)==null?void 0:m.route]}))}catch{}return u}async function F$({request:t,match:e,lazyHandlerPromise:n,lazyRoutePromise:r,handlerOverride:i,scopedContext:s}){let o,a,u=Ls(t.method),f=u?"action":"loader",h=m=>{let v,S=new Promise((E,_)=>v=_);a=()=>v(),t.signal.addEventListener("abort",a);let k=E=>typeof m!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${f}" [routeId: ${e.route.id}]`)):m({request:t,params:e.params,context:s},...E!==void 0?[E]:[]),C=(async()=>{try{return{type:"data",result:await(i?i(_=>k(_)):k())}}catch(E){return{type:"error",result:E}}})();return Promise.race([C,S])};try{let m=u?e.route.action:e.route.loader;if(n||r)if(m){let v,[S]=await Promise.all([h(m).catch(k=>{v=k}),n,r]);if(v!==void 0)throw v;o=S}else{await n;let v=u?e.route.action:e.route.loader;if(v)[o]=await Promise.all([h(v),r]);else if(f==="action"){let S=new URL(t.url),k=S.pathname+S.search;throw $o(405,{method:t.method,pathname:k,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(m)o=await h(m);else{let v=new URL(t.url),S=v.pathname+v.search;throw $o(404,{pathname:S})}}catch(m){return{type:"error",result:m}}finally{a&&t.signal.removeEventListener("abort",a)}return o}async function U$(t){let e=t.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?t.body==null?null:t.json():t.text()}async function V$(t){var r,i,s,o,a,u;let{result:e,type:n}=t;if(yD(e)){let f;try{f=await U$(e)}catch(h){return{type:"error",error:h}}return n==="error"?{type:"error",error:new Fx(e.status,e.statusText,f),statusCode:e.status,headers:e.headers}:{type:"data",data:f,statusCode:e.status,headers:e.headers}}return n==="error"?jR(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new Fx(((s=e.init)==null?void 0:s.status)||500,void 0,e.data),statusCode:sy(e)?e.status:void 0,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:sy(e)?e.status:void 0}:jR(e)?{type:"data",data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function B$(t,e,n,r,i){let s=t.headers.get("Location");if(on(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!uE(s)){let o=r.slice(0,r.findIndex(a=>a.route.id===n)+1);s=fT(new URL(e.url),o,i,s),t.headers.set("Location",s)}return t}function AR(t,e,n){if(uE(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=Ws(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Dp(t,e,n,r){let i=t.createURL(vD(e)).toString(),s={signal:n};if(r&&Ls(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=mT(r.formData):s.body=r.formData}return new Request(i,s)}function mT(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function NR(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function z$(t,e,n,r=!1,i=!1){let s={},o=null,a,u=!1,f={},h=n&&co(n[1])?n[1].error:void 0;return t.forEach(m=>{if(!(m.route.id in e))return;let v=m.route.id,S=e[v];if(on(!yf(S),"Cannot handle redirect results in processLoaderData"),co(S)){let k=S.error;if(h!==void 0&&(k=h,h=void 0),o=o||{},i)o[v]=k;else{let C=Mu(t,v);o[C.route.id]==null&&(o[C.route.id]=k)}r||(s[v]=dD),u||(u=!0,a=sy(S.error)?S.error.status:500),S.headers&&(f[v]=S.headers)}else s[v]=S.data,S.statusCode&&S.statusCode!==200&&!u&&(a=S.statusCode),S.headers&&(f[v]=S.headers)}),h!==void 0&&n&&(o={[n[0]]:h},n[2]&&(s[n[2]]=void 0)),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:f}}function OR(t,e,n,r,i,s){let{loaderData:o,errors:a}=z$(e,n,r);return i.filter(u=>!u.matches||u.matches.some(f=>f.shouldLoad)).forEach(u=>{let{key:f,match:h,controller:m}=u;if(m&&m.signal.aborted)return;let v=s[f];if(on(v,"Did not find corresponding fetcher result"),co(v)){let S=Mu(t.matches,h==null?void 0:h.route.id);a&&a[S.route.id]||(a={...a,[S.route.id]:v.error}),t.fetchers.delete(f)}else if(yf(v))on(!1,"Unhandled fetcher revalidation redirect");else{let S=mc(v.data);t.fetchers.set(f,S)}}),{loaderData:o,errors:a}}function DR(t,e,n,r){let i=Object.entries(e).filter(([,s])=>s!==dD).reduce((s,[o,a])=>(s[o]=a,s),{});for(let s of n){let o=s.route.id;if(!e.hasOwnProperty(o)&&t.hasOwnProperty(o)&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function LR(t){return t?co(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Mu(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Mb(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function $o(t,{pathname:e,routeId:n,method:r,type:i,message:s}={}){let o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",r&&e&&n?a=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:i==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a=`Route "${n}" does not match URL "${e}"`):t===404?(o="Not Found",a=`No route matches URL "${e}"`):t===405&&(o="Method Not Allowed",r&&e&&n?a=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(a=`Invalid request method "${r.toUpperCase()}"`)),new Fx(t||500,o,new Error(a),!0)}function Ab(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(yf(i))return{key:r,result:i}}}function vD(t){let e=typeof t=="string"?ud(t):t;return Xu({...e,hash:""})}function $$(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function W$(t){return t!=null&&typeof t=="object"&&Object.entries(t).every(([e,n])=>typeof e=="string"&&H$(n))}function H$(t){return t!=null&&typeof t=="object"&&"type"in t&&"result"in t&&(t.type==="data"||t.type==="error")}function q$(t){return yD(t.result)&&T$.has(t.result.status)}function co(t){return t.type==="error"}function yf(t){return(t&&t.type)==="redirect"}function jR(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function yD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function K$(t){return k$.has(t.toUpperCase())}function Ls(t){return S$.has(t.toUpperCase())}function fE(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function nx(t,e){let n=typeof e=="string"?ud(e).search:e.search;if(t[t.length-1].route.index&&fE(n||""))return t[t.length-1];let r=lD(t);return r[r.length-1]}function FR(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function BC(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function G$(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function yv(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Y$(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function mc(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Q$(t,e){try{let n=t.sessionStorage.getItem(uD);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function J$(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(uD,JSON.stringify(n))}catch(r){jr(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function X$(){let t,e,n=new Promise((r,i)=>{t=async s=>{r(s);try{await n}catch{}},e=async s=>{i(s);try{await n}catch{}}});return{promise:n,resolve:t,reject:e}}var Jf=w.createContext(null);Jf.displayName="DataRouter";var Oy=w.createContext(null);Oy.displayName="DataRouterState";w.createContext(!1);var hE=w.createContext({isTransitioning:!1});hE.displayName="ViewTransition";var bD=w.createContext(new Map);bD.displayName="Fetchers";var Z$=w.createContext(null);Z$.displayName="Await";var Rl=w.createContext(null);Rl.displayName="Navigation";var Iw=w.createContext(null);Iw.displayName="Location";var Ia=w.createContext({outlet:null,matches:[],isDataRoute:!1});Ia.displayName="Route";var pE=w.createContext(null);pE.displayName="RouteError";function e8(t,{relative:e}={}){on(Dy(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=w.useContext(Rl),{hash:i,pathname:s,search:o}=Ly(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:yl([n,s])),r.createHref({pathname:a,search:o,hash:i})}function Dy(){return w.useContext(Iw)!=null}function qs(){return on(Dy(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Iw).location}var xD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wD(t){w.useContext(Rl).static||w.useLayoutEffect(t)}function Il(){let{isDataRoute:t}=w.useContext(Ia);return t?m8():t8()}function t8(){on(Dy(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(Jf),{basename:e,navigator:n}=w.useContext(Rl),{matches:r}=w.useContext(Ia),{pathname:i}=qs(),s=JSON.stringify(lE(r)),o=w.useRef(!1);return wD(()=>{o.current=!0}),w.useCallback((u,f={})=>{if(jr(o.current,xD),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=cE(u,JSON.parse(s),i,f.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:yl([e,h.pathname])),(f.replace?n.replace:n.push)(h,f.state,f)},[e,n,s,i,t])}var n8=w.createContext(null);function r8(t){let e=w.useContext(Ia).outlet;return w.useMemo(()=>e&&w.createElement(n8.Provider,{value:t},e),[e,t])}function Xf(){let{matches:t}=w.useContext(Ia),e=t[t.length-1];return e?e.params:{}}function Ly(t,{relative:e}={}){let{matches:n}=w.useContext(Ia),{pathname:r}=qs(),i=JSON.stringify(lE(n));return w.useMemo(()=>cE(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function i8(t,e,n,r,i){on(Dy(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=w.useContext(Rl),{matches:o}=w.useContext(Ia),a=o[o.length-1],u=a?a.params:{},f=a?a.pathname:"/",h=a?a.pathnameBase:"/",m=a&&a.route;{let M=m&&m.path||"";kD(f,!m||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let v=qs(),S;S=v;let k=S.pathname||"/",C=k;if(h!=="/"){let M=h.replace(/^\//,"").split("/");C="/"+k.replace(/^\//,"").split("/").slice(M.length).join("/")}let E=Iu(t,{pathname:C});return jr(m||E!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),jr(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),c8(E&&E.map(M=>Object.assign({},M,{params:Object.assign({},u,M.params),pathname:yl([h,s.encodeLocation?s.encodeLocation(M.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?h:yl([h,s.encodeLocation?s.encodeLocation(M.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathnameBase])})),o,n,r,i)}function s8(){let t=f8(),e=sy(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:s},"ErrorBoundary")," or"," ",w.createElement("code",{style:s},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:i},n):null,o)}var o8=w.createElement(s8,null),a8=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?w.createElement(Ia.Provider,{value:this.props.routeContext},w.createElement(pE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function l8({routeContext:t,match:e,children:n}){let r=w.useContext(Jf);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(Ia.Provider,{value:t},n)}function c8(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let f=s.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);on(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let a=!1,u=-1;if(n)for(let f=0;f<s.length;f++){let h=s[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=f),h.route.id){let{loaderData:m,errors:v}=n,S=h.route.loader&&!m.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||S){a=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((f,h,m)=>{let v,S=!1,k=null,C=null;n&&(v=o&&h.route.id?o[h.route.id]:void 0,k=h.route.errorElement||o8,a&&(u<0&&m===0?(kD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,C=null):u===m&&(S=!0,C=h.route.hydrateFallbackElement||null)));let E=e.concat(s.slice(0,m+1)),_=()=>{let M;return v?M=k:S?M=C:h.route.Component?M=w.createElement(h.route.Component,null):h.route.element?M=h.route.element:M=f,w.createElement(l8,{match:h,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:M})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?w.createElement(a8,{location:n.location,revalidation:n.revalidation,component:k,error:v,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0},unstable_onError:r}):_()},null)}function mE(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function SD(t){let e=w.useContext(Jf);return on(e,mE(t)),e}function CD(t){let e=w.useContext(Oy);return on(e,mE(t)),e}function u8(t){let e=w.useContext(Ia);return on(e,mE(t)),e}function gE(t){let e=u8(t),n=e.matches[e.matches.length-1];return on(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function d8(){return gE("useRouteId")}function f8(){var r;let t=w.useContext(pE),e=CD("useRouteError"),n=gE("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}var h8=0;function p8(t){let{router:e,basename:n}=SD("useBlocker"),r=CD("useBlocker"),[i,s]=w.useState(""),o=w.useCallback(a=>{if(typeof t!="function")return!!t;if(n==="/")return t(a);let{currentLocation:u,nextLocation:f,historyAction:h}=a;return t({currentLocation:{...u,pathname:Ws(u.pathname,n)||u.pathname},nextLocation:{...f,pathname:Ws(f.pathname,n)||f.pathname},historyAction:h})},[n,t]);return w.useEffect(()=>{let a=String(++h8);return s(a),()=>e.deleteBlocker(a)},[e]),w.useEffect(()=>{i!==""&&e.getBlocker(i,o)},[e,i,o]),i&&r.blockers.has(i)?r.blockers.get(i):Op}function m8(){let{router:t}=SD("useNavigate"),e=gE("useNavigate"),n=w.useRef(!1);return wD(()=>{n.current=!0}),w.useCallback(async(i,s={})=>{jr(n.current,xD),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var UR={};function kD(t,e,n){!e&&!UR[t]&&(UR[t]=!0,jr(!1,n))}var VR={};function BR(t,e){!t&&!VR[e]&&(VR[e]=!0,console.warn(e))}function g8(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&jr(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:w.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&jr(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:w.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&jr(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:w.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var v8=["HydrateFallback","hydrateFallbackElement"],y8=class{constructor(){this.status="pending",this.promise=new Promise((t,e)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",e(n))}})}};function b8({router:t,flushSync:e,unstable_onError:n}){let[r,i]=w.useState(t.state),[s,o]=w.useState(),[a,u]=w.useState({isTransitioning:!1}),[f,h]=w.useState(),[m,v]=w.useState(),[S,k]=w.useState(),C=w.useRef(new Map),E=w.useCallback(N=>{i(O=>(N.errors&&n&&Object.entries(N.errors).forEach(([j,V])=>{var z;((z=O.errors)==null?void 0:z[j])!==V&&n(V)}),N))},[n]),_=w.useCallback((N,{deletedFetchers:O,flushSync:j,viewTransitionOpts:V})=>{N.fetchers.forEach((W,J)=>{W.data!==void 0&&C.current.set(J,W.data)}),O.forEach(W=>C.current.delete(W)),BR(j===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let z=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(BR(V==null||z,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!V||!z){e&&j?e(()=>E(N)):w.startTransition(()=>E(N));return}if(e&&j){e(()=>{m&&(f&&f.resolve(),m.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:V.currentLocation,nextLocation:V.nextLocation})});let W=t.window.document.startViewTransition(()=>{e(()=>E(N))});W.finished.finally(()=>{e(()=>{h(void 0),v(void 0),o(void 0),u({isTransitioning:!1})})}),e(()=>v(W));return}m?(f&&f.resolve(),m.skipTransition(),k({state:N,currentLocation:V.currentLocation,nextLocation:V.nextLocation})):(o(N),u({isTransitioning:!0,flushSync:!1,currentLocation:V.currentLocation,nextLocation:V.nextLocation}))},[t.window,e,m,f,E]);w.useLayoutEffect(()=>t.subscribe(_),[t,_]),w.useEffect(()=>{a.isTransitioning&&!a.flushSync&&h(new y8)},[a]),w.useEffect(()=>{if(f&&s&&t.window){let N=s,O=f.promise,j=t.window.document.startViewTransition(async()=>{w.startTransition(()=>E(N)),await O});j.finished.finally(()=>{h(void 0),v(void 0),o(void 0),u({isTransitioning:!1})}),v(j)}},[s,f,t.window,E]),w.useEffect(()=>{f&&s&&r.location.key===s.location.key&&f.resolve()},[f,m,r.location,s]),w.useEffect(()=>{!a.isTransitioning&&S&&(o(S.state),u({isTransitioning:!0,flushSync:!1,currentLocation:S.currentLocation,nextLocation:S.nextLocation}),k(void 0))},[a.isTransitioning,S]);let M=w.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:N=>t.navigate(N),push:(N,O,j)=>t.navigate(N,{state:O,preventScrollReset:j==null?void 0:j.preventScrollReset}),replace:(N,O,j)=>t.navigate(N,{replace:!0,state:O,preventScrollReset:j==null?void 0:j.preventScrollReset})}),[t]),A=t.basename||"/",I=w.useMemo(()=>({router:t,navigator:M,static:!1,basename:A,unstable_onError:n}),[t,M,A,n]);return w.createElement(w.Fragment,null,w.createElement(Jf.Provider,{value:I},w.createElement(Oy.Provider,{value:r},w.createElement(bD.Provider,{value:C.current},w.createElement(hE.Provider,{value:a},w.createElement(C8,{basename:A,location:r.location,navigationType:r.historyAction,navigator:M},w.createElement(x8,{routes:t.routes,future:t.future,state:r,unstable_onError:n})))))),null)}var x8=w.memo(w8);function w8({routes:t,future:e,state:n,unstable_onError:r}){return i8(t,void 0,n,r,e)}function S8(t){return r8(t.context)}function C8({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){on(!Dy(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=w.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=ud(n));let{pathname:u="/",search:f="",hash:h="",state:m=null,key:v="default"}=n,S=w.useMemo(()=>{let k=Ws(u,o);return k==null?null:{location:{pathname:k,search:f,hash:h,state:m,key:v},navigationType:r}},[o,u,f,h,m,v,r]);return jr(S!=null,`<Router basename="${o}"> is not able to match the URL "${u}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:w.createElement(Rl.Provider,{value:a},w.createElement(Iw.Provider,{children:e,value:S}))}var rx="get",ix="application/x-www-form-urlencoded";function Mw(t){return t!=null&&typeof t.tagName=="string"}function k8(t){return Mw(t)&&t.tagName.toLowerCase()==="button"}function T8(t){return Mw(t)&&t.tagName.toLowerCase()==="form"}function E8(t){return Mw(t)&&t.tagName.toLowerCase()==="input"}function _8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function P8(t,e){return t.button===0&&(!e||e==="_self")&&!_8(t)}function gT(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function R8(t,e){let n=gT(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}var Nb=null;function I8(){if(Nb===null)try{new FormData(document.createElement("form"),0),Nb=!1}catch{Nb=!0}return Nb}var M8=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zC(t){return t!=null&&!M8.has(t)?(jr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ix}"`),null):t}function A8(t,e){let n,r,i,s,o;if(T8(t)){let a=t.getAttribute("action");r=a?Ws(a,e):null,n=t.getAttribute("method")||rx,i=zC(t.getAttribute("enctype"))||ix,s=new FormData(t)}else if(k8(t)||E8(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||a.getAttribute("action");if(r=u?Ws(u,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||rx,i=zC(t.getAttribute("formenctype"))||zC(a.getAttribute("enctype"))||ix,s=new FormData(a,t),!I8()){let{name:f,type:h,value:m}=t;if(h==="image"){let v=f?`${f}.`:"";s.append(`${v}x`,"0"),s.append(`${v}y`,"0")}else f&&s.append(f,m)}}else{if(Mw(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=rx,r=null,i=ix,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vE(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function N8(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ws(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function O8(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function D8(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function L8(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await O8(s,n);return o.links?o.links():[]}return[]}));return V8(r.flat(1).filter(D8).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function zR(t,e,n,r,i,s){let o=(u,f)=>n[f]?u.route.id!==n[f].route.id:!0,a=(u,f)=>{var h;return n[f].pathname!==u.pathname||((h=n[f].route.path)==null?void 0:h.endsWith("*"))&&n[f].params["*"]!==u.params["*"]};return s==="assets"?e.filter((u,f)=>o(u,f)||a(u,f)):s==="data"?e.filter((u,f)=>{var m;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,f)||a(u,f))return!0;if(u.route.shouldRevalidate){let v=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function j8(t,e,{includeHydrateFallback:n}={}){return F8(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function F8(t){return[...new Set(t)]}function U8(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function V8(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(U8(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function TD(){let t=w.useContext(Jf);return vE(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function B8(){let t=w.useContext(Oy);return vE(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var yE=w.createContext(void 0);yE.displayName="FrameworkContext";function ED(){let t=w.useContext(yE);return vE(t,"You must render this element inside a <HydratedRouter> element"),t}function z8(t,e){let n=w.useContext(yE),[r,i]=w.useState(!1),[s,o]=w.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:f,onMouseLeave:h,onTouchStart:m}=e,v=w.useRef(null);w.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let C=_=>{_.forEach(M=>{o(M.isIntersecting)})},E=new IntersectionObserver(C,{threshold:.5});return v.current&&E.observe(v.current),()=>{E.disconnect()}}},[t]),w.useEffect(()=>{if(r){let C=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(C)}}},[r]);let S=()=>{i(!0)},k=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,v,{}]:[s,v,{onFocus:bv(a,S),onBlur:bv(u,k),onMouseEnter:bv(f,S),onMouseLeave:bv(h,k),onTouchStart:bv(m,S)}]:[!1,v,{}]}function bv(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function $8({page:t,...e}){let{router:n}=TD(),r=w.useMemo(()=>Iu(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?w.createElement(H8,{page:t,matches:r,...e}):null}function W8(t){let{manifest:e,routeModules:n}=ED(),[r,i]=w.useState([]);return w.useEffect(()=>{let s=!1;return L8(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function H8({page:t,matches:e,...n}){let r=qs(),{manifest:i,routeModules:s}=ED(),{basename:o}=TD(),{loaderData:a,matches:u}=B8(),f=w.useMemo(()=>zR(t,e,u,i,r,"data"),[t,e,u,i,r]),h=w.useMemo(()=>zR(t,e,u,i,r,"assets"),[t,e,u,i,r]),m=w.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let k=new Set,C=!1;if(e.forEach(_=>{var A;let M=i.routes[_.route.id];!M||!M.hasLoader||(!f.some(I=>I.route.id===_.route.id)&&_.route.id in a&&((A=s[_.route.id])!=null&&A.shouldRevalidate)||M.hasClientLoader?C=!0:k.add(_.route.id))}),k.size===0)return[];let E=N8(t,o,"data");return C&&k.size>0&&E.searchParams.set("_routes",e.filter(_=>k.has(_.route.id)).map(_=>_.route.id).join(",")),[E.pathname+E.search]},[o,a,r,i,f,e,t,s]),v=w.useMemo(()=>j8(h,i),[h,i]),S=W8(h);return w.createElement(w.Fragment,null,m.map(k=>w.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),v.map(k=>w.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),S.map(({key:k,link:C})=>w.createElement("link",{key:k,nonce:n.nonce,...C})))}function q8(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var _D=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_D&&(window.__reactRouterVersion="7.9.4")}catch{}function K8(t,e){return I$({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:Y6({window:e==null?void 0:e.window}),hydrationData:G8(),routes:t,mapRouteProperties:g8,hydrationRouteProperties:v8,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function G8(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:Y8(t.errors)}),t}function Y8(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Fx(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}var PD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RD=w.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:u,to:f,preventScrollReset:h,viewTransition:m,...v},S){let{basename:k}=w.useContext(Rl),C=typeof f=="string"&&PD.test(f),E,_=!1;if(typeof f=="string"&&C&&(E=f,_D))try{let z=new URL(window.location.href),W=f.startsWith("//")?new URL(z.protocol+f):new URL(f),J=Ws(W.pathname,k);W.origin===z.origin&&J!=null?f=J+W.search+W.hash:_=!0}catch{jr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=e8(f,{relative:i}),[A,I,N]=z8(r,v),O=Z8(f,{replace:o,state:a,target:u,preventScrollReset:h,relative:i,viewTransition:m});function j(z){e&&e(z),z.defaultPrevented||O(z)}let V=w.createElement("a",{...v,...N,href:E||M,onClick:_||s?e:j,ref:q8(S,I),target:u,"data-discover":!C&&n==="render"?"true":void 0});return A&&!C?w.createElement(w.Fragment,null,V,w.createElement($8,{page:M})):V});RD.displayName="Link";var Q8=w.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:u,...f},h){let m=Ly(o,{relative:f.relative}),v=qs(),S=w.useContext(Oy),{navigator:k,basename:C}=w.useContext(Rl),E=S!=null&&sW(m)&&a===!0,_=k.encodeLocation?k.encodeLocation(m).pathname:m.pathname,M=v.pathname,A=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;n||(M=M.toLowerCase(),A=A?A.toLowerCase():null,_=_.toLowerCase()),A&&C&&(A=Ws(A,C)||A);const I=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let N=M===_||!i&&M.startsWith(_)&&M.charAt(I)==="/",O=A!=null&&(A===_||!i&&A.startsWith(_)&&A.charAt(_.length)==="/"),j={isActive:N,isPending:O,isTransitioning:E},V=N?e:void 0,z;typeof r=="function"?z=r(j):z=[r,N?"active":null,O?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let W=typeof s=="function"?s(j):s;return w.createElement(RD,{...f,"aria-current":V,className:z,ref:h,style:W,to:o,viewTransition:a},typeof u=="function"?u(j):u)});Q8.displayName="NavLink";var J8=w.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=rx,action:a,onSubmit:u,relative:f,preventScrollReset:h,viewTransition:m,...v},S)=>{let k=rW(),C=iW(a,{relative:f}),E=o.toLowerCase()==="get"?"get":"post",_=typeof a=="string"&&PD.test(a),M=A=>{if(u&&u(A),A.defaultPrevented)return;A.preventDefault();let I=A.nativeEvent.submitter,N=(I==null?void 0:I.getAttribute("formmethod"))||o;k(I||A.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:i,state:s,relative:f,preventScrollReset:h,viewTransition:m})};return w.createElement("form",{ref:S,method:E,action:C,onSubmit:r?u:M,...v,"data-discover":!_&&t==="render"?"true":void 0})});J8.displayName="Form";function X8(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ID(t){let e=w.useContext(Jf);return on(e,X8(t)),e}function Z8(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=Il(),u=qs(),f=Ly(t,{relative:s});return w.useCallback(h=>{if(P8(h,e)){h.preventDefault();let m=n!==void 0?n:Xu(u)===Xu(f);a(t,{replace:m,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[u,a,f,n,r,e,t,i,s,o])}function eW(t){jr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=w.useRef(gT(t)),n=w.useRef(!1),r=qs(),i=w.useMemo(()=>R8(r.search,n.current?null:e.current),[r.search]),s=Il(),o=w.useCallback((a,u)=>{const f=gT(typeof a=="function"?a(new URLSearchParams(i)):a);n.current=!0,s("?"+f,u)},[s,i]);return[i,o]}var tW=0,nW=()=>`__${String(++tW)}__`;function rW(){let{router:t}=ID("useSubmit"),{basename:e}=w.useContext(Rl),n=d8();return w.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:u,body:f}=A8(r,e);if(i.navigate===!1){let h=i.fetcherKey||nW();await t.fetch(h,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:f,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:f,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function iW(t,{relative:e}={}){let{basename:n}=w.useContext(Rl),r=w.useContext(Ia);on(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Ly(t||".",{relative:e})},o=qs();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),u=a.getAll("index");if(u.some(h=>h==="")){a.delete("index"),u.filter(m=>m).forEach(m=>a.append("index",m));let h=a.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:yl([n,s.pathname])),Xu(s)}function sW(t,{relative:e}={}){let n=w.useContext(hE);on(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ID("useViewTransitionState"),i=Ly(t,{relative:e});if(!n.isTransitioning)return!1;let s=Ws(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ws(n.nextLocation.pathname,r)||n.nextLocation.pathname;return jx(i.pathname,o)!=null||jx(i.pathname,s)!=null}var Zf=HO();const MD=Pw(Zf);function oW(t){return w.createElement(b8,{flushSync:Zf.flushSync,...t})}const jy="http://localhost:8080",Vf="ws://localhost",AD=w.createContext(void 0),aW=({children:t})=>{const e=w.useRef(null),[n,r]=w.useState(!1),[i,s]=w.useState([]),[o,a]=w.useState([]),[u,f]=w.useState([]),[h,m]=w.useState({}),v=(_,M)=>{(!e.current||e.current.readyState!==WebSocket.OPEN)&&(e.current&&e.current.close(),e.current=new WebSocket(`${Vf}/ws/user-events/${_}`),e.current.onopen=()=>{r(!0)},e.current.onclose=()=>{r(!1)},e.current.onerror=()=>{r(!1)},e.current.onmessage=A=>{try{const I=JSON.parse(A.data);switch(I.type){case"reaction.sent":s(N=>[...N,{...I.payload,id:`${I.session_id}-${Date.now()}`}]),setTimeout(()=>{s(N=>N.slice(1))},5e3);break;case"raised_hand.sent":a(N=>[...N,I.payload]),setTimeout(()=>{a(N=>N.slice(1))},1e4);break;case"share_screen.started":f(N=>[...N,I.payload]);break;case"share_screen.ended":f(N=>N.filter(O=>O.trackSid!==I.payload.trackSid));break;case"media.control.updated":I.session_id!==M&&m(N=>({...N,[I.session_id]:I.payload}));break;case"sync.media":if(I.session_id!==M){const N=I.payload,{[M]:O,...j}=N;m(j)}break}}catch(I){console.error("Failed to parse incoming event:",I)}})},S=()=>{var _;(_=e.current)==null||_.close(),e.current=null,r(!1)},k=_=>{e.current&&e.current.readyState===WebSocket.OPEN?e.current.send(JSON.stringify(_)):console.warn("WebSocket not ready, message not sent:",_)},C=w.useMemo(()=>({reactionEvents:i,raisedHandEvents:o,shareScreenEvents:u,remoteMediaStates:h}),[i,o,u,h]),E=w.useMemo(()=>({ws:e.current,isConnected:n,events:C,connectUserEvents:v,sendUserEvent:k,disconnectUserEvents:S}),[e.current,n,C,v,k,S]);return b.jsx(AD.Provider,{value:E,children:t})},Ma=()=>{const t=w.useContext(AD);if(!t)throw new Error("No events context.");return t},ND=w.createContext(void 0),lW=({children:t})=>{const{connectUserEvents:e,disconnectUserEvents:n,sendUserEvent:r,isConnected:i,events:{remoteMediaStates:s}}=Ma(),[o,a]=w.useState({audio:!1,video:!1}),[u,f]=w.useState(null),[h,m]=w.useState(null),[v,S]=w.useState(null),[k,C]=w.useState(null),E=(z,W)=>{_(),e(z,W)},_=()=>{n()};w.useEffect(()=>()=>{n()},[]);const M=(z,W)=>{if(!i)return;const J={type:"media.control.updated",session_id:z,payload:{audio:W.audio,video:W.video}};try{r(J)}catch(Y){console.error("Failed to send media update:",Y)}},A=async(z,W="")=>{const J={...o,audio:z};if(a(J),i&&W){const Y={type:"media.control.updated",session_id:W,payload:{audio:J.audio,video:J.video}};r(Y)}},I=async(z,W="")=>{const J={...o,video:z};if(a(J),i&&W){const Y={type:"media.control.updated",session_id:W,payload:{audio:J.audio,video:J.video}};r(Y)}},N=async z=>{f({deviceId:z.deviceId,label:z.label}),o.audio&&(await A(!1),await A(!0))},O=async z=>{m({deviceId:z.deviceId,label:z.label}),o.video&&(await I(!1),await I(!0))},j=async z=>{C(z)},V=async z=>{S(z)};return b.jsx(ND.Provider,{value:{connectMedia:E,sendMediaEvent:M,remoteMediaStates:s,disconnectMedia:_,mediaState:o,setAudioState:A,setVideoState:I,setAudioDevice:N,setVideoDevice:O,audioDevice:u,videoDevice:h,setAudioTrack:j,audioTrack:k,setVideoTrack:V,videoTrack:v},children:t})},bE=()=>{const t=w.useContext(ND);if(!t)throw new Error("No media context.");return t};function OD(t,e){return function(){return t.apply(e,arguments)}}const{toString:cW}=Object.prototype,{getPrototypeOf:xE}=Object,{iterator:Aw,toStringTag:DD}=Symbol,Nw=(t=>e=>{const n=cW.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Aa=t=>(t=t.toLowerCase(),e=>Nw(e)===t),Ow=t=>e=>typeof e===t,{isArray:Vm}=Array,xm=Ow("undefined");function Fy(t){return t!==null&&!xm(t)&&t.constructor!==null&&!xm(t.constructor)&&Vs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const LD=Aa("ArrayBuffer");function uW(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&LD(t.buffer),e}const dW=Ow("string"),Vs=Ow("function"),jD=Ow("number"),Uy=t=>t!==null&&typeof t=="object",fW=t=>t===!0||t===!1,sx=t=>{if(Nw(t)!=="object")return!1;const e=xE(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(DD in t)&&!(Aw in t)},hW=t=>{if(!Uy(t)||Fy(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},pW=Aa("Date"),mW=Aa("File"),gW=Aa("Blob"),vW=Aa("FileList"),yW=t=>Uy(t)&&Vs(t.pipe),bW=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Vs(t.append)&&((e=Nw(t))==="formdata"||e==="object"&&Vs(t.toString)&&t.toString()==="[object FormData]"))},xW=Aa("URLSearchParams"),[wW,SW,CW,kW]=["ReadableStream","Request","Response","Headers"].map(Aa),TW=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vy(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Vm(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(Fy(t))return;const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function FD(t,e){if(Fy(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const bf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,UD=t=>!xm(t)&&t!==bf;function vT(){const{caseless:t,skipUndefined:e}=UD(this)&&this||{},n={},r=(i,s)=>{const o=t&&FD(n,s)||s;sx(n[o])&&sx(i)?n[o]=vT(n[o],i):sx(i)?n[o]=vT({},i):Vm(i)?n[o]=i.slice():(!e||!xm(i))&&(n[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Vy(arguments[i],r);return n}const EW=(t,e,n,{allOwnKeys:r}={})=>(Vy(e,(i,s)=>{n&&Vs(i)?t[s]=OD(i,n):t[s]=i},{allOwnKeys:r}),t),_W=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),PW=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},RW=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&xE(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},IW=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},MW=t=>{if(!t)return null;if(Vm(t))return t;let e=t.length;if(!jD(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},AW=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&xE(Uint8Array)),NW=(t,e)=>{const r=(t&&t[Aw]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},OW=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},DW=Aa("HTMLFormElement"),LW=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),$R=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),jW=Aa("RegExp"),VD=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Vy(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},FW=t=>{VD(t,(e,n)=>{if(Vs(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Vs(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},UW=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Vm(t)?r(t):r(String(t).split(e)),n},VW=()=>{},BW=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function zW(t){return!!(t&&Vs(t.append)&&t[DD]==="FormData"&&t[Aw])}const $W=t=>{const e=new Array(10),n=(r,i)=>{if(Uy(r)){if(e.indexOf(r)>=0)return;if(Fy(r))return r;if(!("toJSON"in r)){e[i]=r;const s=Vm(r)?[]:{};return Vy(r,(o,a)=>{const u=n(o,i+1);!xm(u)&&(s[a]=u)}),e[i]=void 0,s}}return r};return n(t,0)},WW=Aa("AsyncFunction"),HW=t=>t&&(Uy(t)||Vs(t))&&Vs(t.then)&&Vs(t.catch),BD=((t,e)=>t?setImmediate:e?((n,r)=>(bf.addEventListener("message",({source:i,data:s})=>{i===bf&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),bf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Vs(bf.postMessage)),qW=typeof queueMicrotask<"u"?queueMicrotask.bind(bf):typeof process<"u"&&process.nextTick||BD,KW=t=>t!=null&&Vs(t[Aw]),Te={isArray:Vm,isArrayBuffer:LD,isBuffer:Fy,isFormData:bW,isArrayBufferView:uW,isString:dW,isNumber:jD,isBoolean:fW,isObject:Uy,isPlainObject:sx,isEmptyObject:hW,isReadableStream:wW,isRequest:SW,isResponse:CW,isHeaders:kW,isUndefined:xm,isDate:pW,isFile:mW,isBlob:gW,isRegExp:jW,isFunction:Vs,isStream:yW,isURLSearchParams:xW,isTypedArray:AW,isFileList:vW,forEach:Vy,merge:vT,extend:EW,trim:TW,stripBOM:_W,inherits:PW,toFlatObject:RW,kindOf:Nw,kindOfTest:Aa,endsWith:IW,toArray:MW,forEachEntry:NW,matchAll:OW,isHTMLForm:DW,hasOwnProperty:$R,hasOwnProp:$R,reduceDescriptors:VD,freezeMethods:FW,toObjectSet:UW,toCamelCase:LW,noop:VW,toFiniteNumber:BW,findKey:FD,global:bf,isContextDefined:UD,isSpecCompliantForm:zW,toJSONObject:$W,isAsyncFn:WW,isThenable:HW,setImmediate:BD,asap:qW,isIterable:KW};function Wt(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Te.inherits(Wt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Te.toJSONObject(this.config),code:this.code,status:this.status}}});const zD=Wt.prototype,$D={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{$D[t]={value:t}});Object.defineProperties(Wt,$D);Object.defineProperty(zD,"isAxiosError",{value:!0});Wt.from=(t,e,n,r,i,s)=>{const o=Object.create(zD);Te.toFlatObject(t,o,function(h){return h!==Error.prototype},f=>f!=="isAxiosError");const a=t&&t.message?t.message:"Error",u=e==null&&t?t.code:e;return Wt.call(o,a,u,n,r,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const GW=null;function yT(t){return Te.isPlainObject(t)||Te.isArray(t)}function WD(t){return Te.endsWith(t,"[]")?t.slice(0,-2):t}function WR(t,e,n){return t?t.concat(e).map(function(i,s){return i=WD(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function YW(t){return Te.isArray(t)&&!t.some(yT)}const QW=Te.toFlatObject(Te,{},null,function(e){return/^is[A-Z]/.test(e)});function Dw(t,e,n){if(!Te.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Te.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,E){return!Te.isUndefined(E[C])});const r=n.metaTokens,i=n.visitor||h,s=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Te.isSpecCompliantForm(e);if(!Te.isFunction(i))throw new TypeError("visitor must be a function");function f(k){if(k===null)return"";if(Te.isDate(k))return k.toISOString();if(Te.isBoolean(k))return k.toString();if(!u&&Te.isBlob(k))throw new Wt("Blob is not supported. Use a Buffer instead.");return Te.isArrayBuffer(k)||Te.isTypedArray(k)?u&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function h(k,C,E){let _=k;if(k&&!E&&typeof k=="object"){if(Te.endsWith(C,"{}"))C=r?C:C.slice(0,-2),k=JSON.stringify(k);else if(Te.isArray(k)&&YW(k)||(Te.isFileList(k)||Te.endsWith(C,"[]"))&&(_=Te.toArray(k)))return C=WD(C),_.forEach(function(A,I){!(Te.isUndefined(A)||A===null)&&e.append(o===!0?WR([C],I,s):o===null?C:C+"[]",f(A))}),!1}return yT(k)?!0:(e.append(WR(E,C,s),f(k)),!1)}const m=[],v=Object.assign(QW,{defaultVisitor:h,convertValue:f,isVisitable:yT});function S(k,C){if(!Te.isUndefined(k)){if(m.indexOf(k)!==-1)throw Error("Circular reference detected in "+C.join("."));m.push(k),Te.forEach(k,function(_,M){(!(Te.isUndefined(_)||_===null)&&i.call(e,_,Te.isString(M)?M.trim():M,C,v))===!0&&S(_,C?C.concat(M):[M])}),m.pop()}}if(!Te.isObject(t))throw new TypeError("data must be an object");return S(t),e}function HR(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function wE(t,e){this._pairs=[],t&&Dw(t,this,e)}const HD=wE.prototype;HD.append=function(e,n){this._pairs.push([e,n])};HD.toString=function(e){const n=e?function(r){return e.call(this,r,HR)}:HR;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function JW(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function qD(t,e,n){if(!e)return t;const r=n&&n.encode||JW;Te.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Te.isURLSearchParams(e)?e.toString():new wE(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class qR{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Te.forEach(this.handlers,function(r){r!==null&&e(r)})}}const KD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},XW=typeof URLSearchParams<"u"?URLSearchParams:wE,ZW=typeof FormData<"u"?FormData:null,e9=typeof Blob<"u"?Blob:null,t9={isBrowser:!0,classes:{URLSearchParams:XW,FormData:ZW,Blob:e9},protocols:["http","https","file","blob","url","data"]},SE=typeof window<"u"&&typeof document<"u",bT=typeof navigator=="object"&&navigator||void 0,n9=SE&&(!bT||["ReactNative","NativeScript","NS"].indexOf(bT.product)<0),r9=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",i9=SE&&window.location.href||"http://localhost",s9=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:SE,hasStandardBrowserEnv:n9,hasStandardBrowserWebWorkerEnv:r9,navigator:bT,origin:i9},Symbol.toStringTag,{value:"Module"})),Wi={...s9,...t9};function o9(t,e){return Dw(t,new Wi.classes.URLSearchParams,{visitor:function(n,r,i,s){return Wi.isNode&&Te.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function a9(t){return Te.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function l9(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function GD(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),u=s>=n.length;return o=!o&&Te.isArray(i)?i.length:o,u?(Te.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Te.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Te.isArray(i[o])&&(i[o]=l9(i[o])),!a)}if(Te.isFormData(t)&&Te.isFunction(t.entries)){const n={};return Te.forEachEntry(t,(r,i)=>{e(a9(r),i,n,0)}),n}return null}function c9(t,e,n){if(Te.isString(t))try{return(e||JSON.parse)(t),Te.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const By={transitional:KD,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Te.isObject(e);if(s&&Te.isHTMLForm(e)&&(e=new FormData(e)),Te.isFormData(e))return i?JSON.stringify(GD(e)):e;if(Te.isArrayBuffer(e)||Te.isBuffer(e)||Te.isStream(e)||Te.isFile(e)||Te.isBlob(e)||Te.isReadableStream(e))return e;if(Te.isArrayBufferView(e))return e.buffer;if(Te.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return o9(e,this.formSerializer).toString();if((a=Te.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Dw(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),c9(e)):e}],transformResponse:[function(e){const n=this.transitional||By.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Te.isResponse(e)||Te.isReadableStream(e))return e;if(e&&Te.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?Wt.from(a,Wt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wi.classes.FormData,Blob:Wi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Te.forEach(["delete","get","head","post","put","patch"],t=>{By.headers[t]={}});const u9=Te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),d9=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&u9[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},KR=Symbol("internals");function xv(t){return t&&String(t).trim().toLowerCase()}function ox(t){return t===!1||t==null?t:Te.isArray(t)?t.map(ox):String(t)}function f9(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const h9=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function $C(t,e,n,r,i){if(Te.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Te.isString(e)){if(Te.isString(r))return e.indexOf(r)!==-1;if(Te.isRegExp(r))return r.test(e)}}function p9(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function m9(t,e){const n=Te.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let Bs=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,u,f){const h=xv(u);if(!h)throw new Error("header name must be a non-empty string");const m=Te.findKey(i,h);(!m||i[m]===void 0||f===!0||f===void 0&&i[m]!==!1)&&(i[m||u]=ox(a))}const o=(a,u)=>Te.forEach(a,(f,h)=>s(f,h,u));if(Te.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Te.isString(e)&&(e=e.trim())&&!h9(e))o(d9(e),n);else if(Te.isObject(e)&&Te.isIterable(e)){let a={},u,f;for(const h of e){if(!Te.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[f=h[0]]=(u=a[f])?Te.isArray(u)?[...u,h[1]]:[u,h[1]]:h[1]}o(a,n)}else e!=null&&s(n,e,r);return this}get(e,n){if(e=xv(e),e){const r=Te.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return f9(i);if(Te.isFunction(n))return n.call(this,i,r);if(Te.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=xv(e),e){const r=Te.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||$C(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=xv(o),o){const a=Te.findKey(r,o);a&&(!n||$C(r,r[a],a,n))&&(delete r[a],i=!0)}}return Te.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||$C(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Te.forEach(this,(i,s)=>{const o=Te.findKey(r,s);if(o){n[o]=ox(i),delete n[s];return}const a=e?p9(s):String(s).trim();a!==s&&delete n[s],n[a]=ox(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Te.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Te.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[KR]=this[KR]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=xv(o);r[a]||(m9(i,o),r[a]=!0)}return Te.isArray(e)?e.forEach(s):s(e),this}};Bs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Te.reduceDescriptors(Bs.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Te.freezeMethods(Bs);function WC(t,e){const n=this||By,r=e||n,i=Bs.from(r.headers);let s=r.data;return Te.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function YD(t){return!!(t&&t.__CANCEL__)}function Bm(t,e,n){Wt.call(this,t??"canceled",Wt.ERR_CANCELED,e,n),this.name="CanceledError"}Te.inherits(Bm,Wt,{__CANCEL__:!0});function QD(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Wt("Request failed with status code "+n.status,[Wt.ERR_BAD_REQUEST,Wt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function g9(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function v9(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const f=Date.now(),h=r[s];o||(o=f),n[i]=u,r[i]=f;let m=s,v=0;for(;m!==i;)v+=n[m++],m=m%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),f-o<e)return;const S=h&&f-h;return S?Math.round(v*1e3/S):void 0}}function y9(t,e){let n=0,r=1e3/e,i,s;const o=(f,h=Date.now())=>{n=h,i=null,s&&(clearTimeout(s),s=null),t(...f)};return[(...f)=>{const h=Date.now(),m=h-n;m>=r?o(f,h):(i=f,s||(s=setTimeout(()=>{s=null,o(i)},r-m)))},()=>i&&o(i)]}const Vx=(t,e,n=3)=>{let r=0;const i=v9(50,250);return y9(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,u=o-r,f=i(u),h=o<=a;r=o;const m={loaded:o,total:a,progress:a?o/a:void 0,bytes:u,rate:f||void 0,estimated:f&&a&&h?(a-o)/f:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(m)},n)},GR=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},YR=t=>(...e)=>Te.asap(()=>t(...e)),b9=Wi.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Wi.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Wi.origin),Wi.navigator&&/(msie|trident)/i.test(Wi.navigator.userAgent)):()=>!0,x9=Wi.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Te.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Te.isString(r)&&o.push("path="+r),Te.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function w9(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function S9(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function JD(t,e,n){let r=!w9(e);return t&&(r||n==!1)?S9(t,e):e}const QR=t=>t instanceof Bs?{...t}:t;function Bf(t,e){e=e||{};const n={};function r(f,h,m,v){return Te.isPlainObject(f)&&Te.isPlainObject(h)?Te.merge.call({caseless:v},f,h):Te.isPlainObject(h)?Te.merge({},h):Te.isArray(h)?h.slice():h}function i(f,h,m,v){if(Te.isUndefined(h)){if(!Te.isUndefined(f))return r(void 0,f,m,v)}else return r(f,h,m,v)}function s(f,h){if(!Te.isUndefined(h))return r(void 0,h)}function o(f,h){if(Te.isUndefined(h)){if(!Te.isUndefined(f))return r(void 0,f)}else return r(void 0,h)}function a(f,h,m){if(m in e)return r(f,h);if(m in t)return r(void 0,f)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(f,h,m)=>i(QR(f),QR(h),m,!0)};return Te.forEach(Object.keys({...t,...e}),function(h){const m=u[h]||i,v=m(t[h],e[h],h);Te.isUndefined(v)&&m!==a||(n[h]=v)}),n}const XD=t=>{const e=Bf({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=Bs.from(o),e.url=qD(JD(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),Te.isFormData(n)){if(Wi.hasStandardBrowserEnv||Wi.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Te.isFunction(n.getHeaders)){const u=n.getHeaders(),f=["content-type","content-length"];Object.entries(u).forEach(([h,m])=>{f.includes(h.toLowerCase())&&o.set(h,m)})}}if(Wi.hasStandardBrowserEnv&&(r&&Te.isFunction(r)&&(r=r(e)),r||r!==!1&&b9(e.url))){const u=i&&s&&x9.read(s);u&&o.set(i,u)}return e},C9=typeof XMLHttpRequest<"u",k9=C9&&function(t){return new Promise(function(n,r){const i=XD(t);let s=i.data;const o=Bs.from(i.headers).normalize();let{responseType:a,onUploadProgress:u,onDownloadProgress:f}=i,h,m,v,S,k;function C(){S&&S(),k&&k(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let E=new XMLHttpRequest;E.open(i.method.toUpperCase(),i.url,!0),E.timeout=i.timeout;function _(){if(!E)return;const A=Bs.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),N={data:!a||a==="text"||a==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:A,config:t,request:E};QD(function(j){n(j),C()},function(j){r(j),C()},N),E=null}"onloadend"in E?E.onloadend=_:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(_)},E.onabort=function(){E&&(r(new Wt("Request aborted",Wt.ECONNABORTED,t,E)),E=null)},E.onerror=function(I){const N=I&&I.message?I.message:"Network Error",O=new Wt(N,Wt.ERR_NETWORK,t,E);O.event=I||null,r(O),E=null},E.ontimeout=function(){let I=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const N=i.transitional||KD;i.timeoutErrorMessage&&(I=i.timeoutErrorMessage),r(new Wt(I,N.clarifyTimeoutError?Wt.ETIMEDOUT:Wt.ECONNABORTED,t,E)),E=null},s===void 0&&o.setContentType(null),"setRequestHeader"in E&&Te.forEach(o.toJSON(),function(I,N){E.setRequestHeader(N,I)}),Te.isUndefined(i.withCredentials)||(E.withCredentials=!!i.withCredentials),a&&a!=="json"&&(E.responseType=i.responseType),f&&([v,k]=Vx(f,!0),E.addEventListener("progress",v)),u&&E.upload&&([m,S]=Vx(u),E.upload.addEventListener("progress",m),E.upload.addEventListener("loadend",S)),(i.cancelToken||i.signal)&&(h=A=>{E&&(r(!A||A.type?new Bm(null,t,E):A),E.abort(),E=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const M=g9(i.url);if(M&&Wi.protocols.indexOf(M)===-1){r(new Wt("Unsupported protocol "+M+":",Wt.ERR_BAD_REQUEST,t));return}E.send(s||null)})},T9=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(f){if(!i){i=!0,a();const h=f instanceof Error?f:this.reason;r.abort(h instanceof Wt?h:new Bm(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,s(new Wt(`timeout ${e} of ms exceeded`,Wt.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(s):f.removeEventListener("abort",s)}),t=null)};t.forEach(f=>f.addEventListener("abort",s));const{signal:u}=r;return u.unsubscribe=()=>Te.asap(a),u}},E9=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},_9=async function*(t,e){for await(const n of P9(t))yield*E9(n,e)},P9=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},JR=(t,e,n,r)=>{const i=_9(t,e);let s=0,o,a=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:f,value:h}=await i.next();if(f){a(),u.close();return}let m=h.byteLength;if(n){let v=s+=m;n(v)}u.enqueue(new Uint8Array(h))}catch(f){throw a(f),f}},cancel(u){return a(u),i.return()}},{highWaterMark:2})},XR=64*1024,{isFunction:Ob}=Te,R9=(({Request:t,Response:e})=>({Request:t,Response:e}))(Te.global),{ReadableStream:ZR,TextEncoder:eI}=Te.global,tI=(t,...e)=>{try{return!!t(...e)}catch{return!1}},I9=t=>{t=Te.merge.call({skipUndefined:!0},R9,t);const{fetch:e,Request:n,Response:r}=t,i=e?Ob(e):typeof fetch=="function",s=Ob(n),o=Ob(r);if(!i)return!1;const a=i&&Ob(ZR),u=i&&(typeof eI=="function"?(k=>C=>k.encode(C))(new eI):async k=>new Uint8Array(await new n(k).arrayBuffer())),f=s&&a&&tI(()=>{let k=!1;const C=new n(Wi.origin,{body:new ZR,method:"POST",get duplex(){return k=!0,"half"}}).headers.has("Content-Type");return k&&!C}),h=o&&a&&tI(()=>Te.isReadableStream(new r("").body)),m={stream:h&&(k=>k.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(k=>{!m[k]&&(m[k]=(C,E)=>{let _=C&&C[k];if(_)return _.call(C);throw new Wt(`Response type '${k}' is not supported`,Wt.ERR_NOT_SUPPORT,E)})});const v=async k=>{if(k==null)return 0;if(Te.isBlob(k))return k.size;if(Te.isSpecCompliantForm(k))return(await new n(Wi.origin,{method:"POST",body:k}).arrayBuffer()).byteLength;if(Te.isArrayBufferView(k)||Te.isArrayBuffer(k))return k.byteLength;if(Te.isURLSearchParams(k)&&(k=k+""),Te.isString(k))return(await u(k)).byteLength},S=async(k,C)=>{const E=Te.toFiniteNumber(k.getContentLength());return E??v(C)};return async k=>{let{url:C,method:E,data:_,signal:M,cancelToken:A,timeout:I,onDownloadProgress:N,onUploadProgress:O,responseType:j,headers:V,withCredentials:z="same-origin",fetchOptions:W}=XD(k),J=e||fetch;j=j?(j+"").toLowerCase():"text";let Y=T9([M,A&&A.toAbortSignal()],I),me=null;const ue=Y&&Y.unsubscribe&&(()=>{Y.unsubscribe()});let Ie;try{if(O&&f&&E!=="get"&&E!=="head"&&(Ie=await S(V,_))!==0){let B=new n(C,{method:"POST",body:_,duplex:"half"}),fe;if(Te.isFormData(_)&&(fe=B.headers.get("content-type"))&&V.setContentType(fe),B.body){const[ie,pe]=GR(Ie,Vx(YR(O)));_=JR(B.body,XR,ie,pe)}}Te.isString(z)||(z=z?"include":"omit");const se=s&&"credentials"in n.prototype,xe={...W,signal:Y,method:E.toUpperCase(),headers:V.normalize().toJSON(),body:_,duplex:"half",credentials:se?z:void 0};me=s&&new n(C,xe);let q=await(s?J(me,W):J(C,xe));const te=h&&(j==="stream"||j==="response");if(h&&(N||te&&ue)){const B={};["status","statusText","headers"].forEach(ke=>{B[ke]=q[ke]});const fe=Te.toFiniteNumber(q.headers.get("content-length")),[ie,pe]=N&&GR(fe,Vx(YR(N),!0))||[];q=new r(JR(q.body,XR,ie,()=>{pe&&pe(),ue&&ue()}),B)}j=j||"text";let ae=await m[Te.findKey(m,j)||"text"](q,k);return!te&&ue&&ue(),await new Promise((B,fe)=>{QD(B,fe,{data:ae,headers:Bs.from(q.headers),status:q.status,statusText:q.statusText,config:k,request:me})})}catch(se){throw ue&&ue(),se&&se.name==="TypeError"&&/Load failed|fetch/i.test(se.message)?Object.assign(new Wt("Network Error",Wt.ERR_NETWORK,k,me),{cause:se.cause||se}):Wt.from(se,se&&se.code,k,me)}}},M9=new Map,ZD=t=>{let e=t?t.env:{};const{fetch:n,Request:r,Response:i}=e,s=[r,i,n];let o=s.length,a=o,u,f,h=M9;for(;a--;)u=s[a],f=h.get(u),f===void 0&&h.set(u,f=a?new Map:I9(e)),h=f;return f};ZD();const xT={http:GW,xhr:k9,fetch:{get:ZD}};Te.forEach(xT,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const nI=t=>`- ${t}`,A9=t=>Te.isFunction(t)||t===null||t===!1,eL={getAdapter:(t,e)=>{t=Te.isArray(t)?t:[t];const{length:n}=t;let r,i;const s={};for(let o=0;o<n;o++){r=t[o];let a;if(i=r,!A9(r)&&(i=xT[(a=String(r)).toLowerCase()],i===void 0))throw new Wt(`Unknown adapter '${a}'`);if(i&&(Te.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([u,f])=>`adapter ${u} `+(f===!1?"is not supported by the environment":"is not available in the build"));let a=n?o.length>1?`since :
`+o.map(nI).join(`
`):" "+nI(o[0]):"as no adapter specified";throw new Wt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:xT};function HC(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Bm(null,t)}function rI(t){return HC(t),t.headers=Bs.from(t.headers),t.data=WC.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),eL.getAdapter(t.adapter||By.adapter,t)(t).then(function(r){return HC(t),r.data=WC.call(t,t.transformResponse,r),r.headers=Bs.from(r.headers),r},function(r){return YD(r)||(HC(t),r&&r.response&&(r.response.data=WC.call(t,t.transformResponse,r.response),r.response.headers=Bs.from(r.response.headers))),Promise.reject(r)})}const tL="1.12.2",Lw={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Lw[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const iI={};Lw.transitional=function(e,n,r){function i(s,o){return"[Axios v"+tL+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Wt(i(o," has been removed"+(n?" in "+n:"")),Wt.ERR_DEPRECATED);return n&&!iI[o]&&(iI[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};Lw.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function N9(t,e,n){if(typeof t!="object")throw new Wt("options must be an object",Wt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],u=a===void 0||o(a,s,t);if(u!==!0)throw new Wt("option "+s+" must be "+u,Wt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Wt("Unknown option "+s,Wt.ERR_BAD_OPTION)}}const ax={assertOptions:N9,validators:Lw},al=ax.validators;let Nf=class{constructor(e){this.defaults=e||{},this.interceptors={request:new qR,response:new qR}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Bf(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&ax.assertOptions(r,{silentJSONParsing:al.transitional(al.boolean),forcedJSONParsing:al.transitional(al.boolean),clarifyTimeoutError:al.transitional(al.boolean)},!1),i!=null&&(Te.isFunction(i)?n.paramsSerializer={serialize:i}:ax.assertOptions(i,{encode:al.function,serialize:al.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ax.assertOptions(n,{baseUrl:al.spelling("baseURL"),withXsrfToken:al.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Te.merge(s.common,s[n.method]);s&&Te.forEach(["delete","get","head","post","put","patch","common"],k=>{delete s[k]}),n.headers=Bs.concat(o,s);const a=[];let u=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(n)===!1||(u=u&&C.synchronous,a.unshift(C.fulfilled,C.rejected))});const f=[];this.interceptors.response.forEach(function(C){f.push(C.fulfilled,C.rejected)});let h,m=0,v;if(!u){const k=[rI.bind(this),void 0];for(k.unshift(...a),k.push(...f),v=k.length,h=Promise.resolve(n);m<v;)h=h.then(k[m++],k[m++]);return h}v=a.length;let S=n;for(;m<v;){const k=a[m++],C=a[m++];try{S=k(S)}catch(E){C.call(this,E);break}}try{h=rI.call(this,S)}catch(k){return Promise.reject(k)}for(m=0,v=f.length;m<v;)h=h.then(f[m++],f[m++]);return h}getUri(e){e=Bf(this.defaults,e);const n=JD(e.baseURL,e.url,e.allowAbsoluteUrls);return qD(n,e.params,e.paramsSerializer)}};Te.forEach(["delete","get","head","options"],function(e){Nf.prototype[e]=function(n,r){return this.request(Bf(r||{},{method:e,url:n,data:(r||{}).data}))}});Te.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Bf(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Nf.prototype[e]=n(),Nf.prototype[e+"Form"]=n(!0)});let O9=class nL{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Bm(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new nL(function(i){e=i}),cancel:e}}};function D9(t){return function(n){return t.apply(null,n)}}function L9(t){return Te.isObject(t)&&t.isAxiosError===!0}const wT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(wT).forEach(([t,e])=>{wT[e]=t});function rL(t){const e=new Nf(t),n=OD(Nf.prototype.request,e);return Te.extend(n,Nf.prototype,e,{allOwnKeys:!0}),Te.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return rL(Bf(t,i))},n}const nr=rL(By);nr.Axios=Nf;nr.CanceledError=Bm;nr.CancelToken=O9;nr.isCancel=YD;nr.VERSION=tL;nr.toFormData=Dw;nr.AxiosError=Wt;nr.Cancel=nr.CanceledError;nr.all=function(e){return Promise.all(e)};nr.spread=D9;nr.isAxiosError=L9;nr.mergeConfig=Bf;nr.AxiosHeaders=Bs;nr.formToJSON=t=>GD(Te.isHTMLForm(t)?new FormData(t):t);nr.getAdapter=eL.getAdapter;nr.HttpStatusCode=wT;nr.default=nr;const{Axios:whe,AxiosError:She,CanceledError:Che,isCancel:khe,CancelToken:The,VERSION:Ehe,all:_he,Cancel:Phe,isAxiosError:Rhe,spread:Ihe,toFormData:Mhe,AxiosHeaders:Ahe,HttpStatusCode:Nhe,formToJSON:Ohe,getAdapter:Dhe,mergeConfig:Lhe}=nr;/*! js-cookie v3.0.5 | MIT */function Db(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var j9={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function ST(t,e){function n(i,s,o){if(!(typeof document>"u")){o=Db({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var u in o)o[u]&&(a+="; "+u,o[u]!==!0&&(a+="="+o[u].split(";")[0]));return document.cookie=i+"="+t.write(s,i)+a}}function r(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},a=0;a<s.length;a++){var u=s[a].split("="),f=u.slice(1).join("=");try{var h=decodeURIComponent(u[0]);if(o[h]=t.read(f,h),i===h)break}catch{}}return i?o[i]:o}}return Object.create({set:n,get:r,remove:function(i,s){n(i,"",Db({},s,{expires:-1}))},withAttributes:function(i){return ST(this.converter,Db({},this.attributes,i))},withConverter:function(i){return ST(Db({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var cs=ST(j9,{path:"/"});const ai=nr.create({baseURL:jy,headers:{"Content-Type":"application/json"}});ai.interceptors.request.use(t=>{const e=cs.get("rsCookie");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));ai.interceptors.response.use(t=>t,async t=>{var n,r;if(!t.config)return Promise.reject(t);const e=t.config;if(((n=t.response)==null?void 0:n.status)===404)return window.location.href="/whoops",Promise.reject(t);if(((r=t.response)==null?void 0:r.status)===401&&!e._retry){e._retry=!0;try{const i=cs.get("rsCookie");if(!i)return cs.remove("rsCookie"),window.location.href="/",Promise.reject(t);const s=await nr.post(`${jy}/refresh-token`,{},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}});if(s.data.token){const o=s.data.token;return cs.set("rsCookie",o),e.headers.Authorization=`Bearer ${o}`,ai(e)}}catch(i){return cs.remove("rsCookie"),window.location.href="/",Promise.reject(i)}}return Promise.reject(t)});const F9=async()=>(await nr.get(`${jy}/create-room`,{headers:{"Content-Type":"application/json"}})).data,U9=async t=>(await ai.post(`/join-room/${t}`)).data,V9=async t=>(await ai.post(`/start-call/${t}`)).data,B9=async(t,e)=>(await ai.get(`/leave-call/${t}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}})).data,Bx=async t=>(await ai.delete(`/exit-room/${t}`)).data,z9=async(t,e)=>(await ai.get(`/kill-room/${t}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}})).data,$9=async(t,e,n)=>(await ai.post(`/assign-host/${t}`,{current_host_id:e,new_host_id:n})).data,W9=async(t,e)=>(await ai.post(`/lvk-token/${t}`,{session_id:e})).data,iL=async t=>(await ai.get(`/call/${t}`)).data,jw=async(t,e)=>(await ai.post(`/get-me/${t}`,{headers:{Authorization:`Bearer ${e}`}})).data,H9=async t=>(await ai.get(`/room-info/${t}`)).data,q9=async(t,e,n,r)=>(await ai.post(`/set-participant-call-data/${t}`,{username:e,avatar_src:n},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}})).data,K9=async t=>{var e;try{return(await ai.get(`/settings/${t}`)).data}catch(n){if(nr.isAxiosError(n)&&((e=n.response)==null?void 0:e.status)===400)return{strict_mode:!1,invitation_expiry:"30",invite_permission:!1}}},sL=async(t,e)=>{try{return(await ai.post(`/update-settings/${t}`,{settings:e})).data}catch(n){console.error(n)}},oL=async t=>{const e=await ai.get(`${jy}/participants/${t}`);return{participants:e.data.participants,participantsInCall:e.data.participantsInCall}},G9=async(t,e)=>(await ai.post(`/set-session/${t}`,{},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}})).data,Y9=async(t,e)=>(await ai.post("/authorization",{code:t,room_id:e})).data,Q9=async t=>(await nr.get(`${jy}/invitation-code/${t}`)).data.invitation,aL=w.createContext(void 0),J9=({children:t})=>{const e=w.useRef(null),[n,r]=w.useState(null),i=w.useCallback(async o=>{if(!(e.current&&e.current.readyState===WebSocket.OPEN)){try{const a=await K9(o);r(a)}catch(a){console.error("Error fetching initial settings",a)}e.current&&e.current.close(),e.current=new WebSocket(`${Vf}/ws/settings-broadcast/${o}`),e.current.onmessage=a=>{if(!e.current)return;const u=JSON.parse(a.data);r(u)}}},[]),s=()=>{var o;(o=e.current)==null||o.close(),e.current=null};return b.jsx(aL.Provider,{value:{ws:e.current,connectSettings:i,settings:n,disconnect:s},children:t})},Fw=()=>{const t=w.useContext(aL);if(!t)throw new Error("No session context.");return t},lL=w.createContext(void 0),X9=({children:t})=>{const[e,n]=w.useState(!1),[r,i]=w.useState([]),[s,o]=w.useState(!1);return b.jsx(lL.Provider,{value:{isChatExpanded:e,setIsChatExpanded:n,shareScreenView:r,setShareScreenView:i,isFocusView:s,setIsFocusView:o},children:t})},zy=()=>{const t=w.useContext(lL);if(!t)throw new Error("No preferences context.");return t},Z9=(t,e)=>{t.invalidateQueries({queryKey:["call-participants",e]}),t.invalidateQueries({queryKey:["me",e]})},eH=(t,e)=>{t.invalidateQueries({queryKey:["call-participants",e]}),t.invalidateQueries({queryKey:["me",e]})},cL=w.createContext(void 0),tH=({children:t})=>{const e=Rw(),n=w.useRef(null),[r,i]=w.useState(!1),[s,o]=w.useState([]),[a,u]=w.useState(null),[f,h]=w.useState(null),m=k=>{(!n.current||n.current.readyState!==WebSocket.OPEN)&&(n.current&&n.current.close(),n.current=new WebSocket(`${Vf}/ws/system-events/${k}`),n.current.onopen=()=>{var C;i(((C=n.current)==null?void 0:C.readyState)===WebSocket.OPEN)},n.current.onclose=()=>{i(!1)},n.current.onerror=()=>{i(!1)},n.current.onmessage=C=>{try{const E=JSON.parse(C.data),_={type:E.type,payload:E.payload,received_at:Date.now()};switch(o(M=>[...M,_].slice(-20)),E.type){case"host.left":const M=E.payload;u({type:"host.left",payload:M,received_at:Date.now()}),eH(e,k);break;case"host.updated":const A=E.payload;h({type:"host.updated",payload:A,received_at:Date.now()}),Z9(e,k);break}}catch(E){console.error("Failed to parse incoming event:",E)}})},v=()=>{var k;(k=n.current)==null||k.close(),n.current=null,i(!1)},S=k=>{r&&n.current&&n.current.readyState===WebSocket.OPEN?n.current.send(JSON.stringify(k)):console.warn("WebSocket not ready, message not sent:",k)};return b.jsx(cL.Provider,{value:{ws:n.current,connectSystemEvents:m,sendSystemEvent:S,disconnectSystemEvents:v,isConnected:r,recentSystemEvents:s,latestHostLeft:a,latestHostUpdate:f},children:t})},$y=()=>{const t=w.useContext(cL);if(!t)throw new Error("No system events context.");return t},nH=t=>/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t),qC=({children:t})=>{const e=Il(),{id:n}=Xf();return n?(w.useEffect(()=>{nH(n)||e("/whoops")},[n,e]),t||b.jsx(S8,{})):null};function rH(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const iH=t=>{switch(t){case"success":return aH;case"info":return cH;case"warning":return lH;case"error":return uH;default:return null}},sH=Array(12).fill(0),oH=({visible:t,className:e})=>Re.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Re.createElement("div",{className:"sonner-spinner"},sH.map((n,r)=>Re.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),aH=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),lH=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),cH=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),uH=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),dH=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Re.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Re.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),fH=()=>{const[t,e]=Re.useState(document.hidden);return Re.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let CT=1;class hH{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:CT++,o=this.toasts.find(u=>u.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(u=>u.id===s?(this.publish({...u,...e,id:s,title:r}),{...u,...e,id:s,dismissible:a,title:r}):u):this.addToast({title:r,...i,dismissible:a,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let s=r!==void 0,o;const a=i.then(async f=>{if(o=["resolve",f],Re.isValidElement(f))s=!1,this.create({id:r,type:"default",message:f});else if(mH(f)&&!f.ok){s=!1;const m=typeof n.error=="function"?await n.error(`HTTP error! status: ${f.status}`):n.error,v=typeof n.description=="function"?await n.description(`HTTP error! status: ${f.status}`):n.description,k=typeof m=="object"&&!Re.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:v,...k})}else if(f instanceof Error){s=!1;const m=typeof n.error=="function"?await n.error(f):n.error,v=typeof n.description=="function"?await n.description(f):n.description,k=typeof m=="object"&&!Re.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:v,...k})}else if(n.success!==void 0){s=!1;const m=typeof n.success=="function"?await n.success(f):n.success,v=typeof n.description=="function"?await n.description(f):n.description,k=typeof m=="object"&&!Re.isValidElement(m)?m:{message:m};this.create({id:r,type:"success",description:v,...k})}}).catch(async f=>{if(o=["reject",f],n.error!==void 0){s=!1;const h=typeof n.error=="function"?await n.error(f):n.error,m=typeof n.description=="function"?await n.description(f):n.description,S=typeof h=="object"&&!Re.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...S})}}).finally(()=>{s&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((f,h)=>a.then(()=>o[0]==="reject"?h(o[1]):f(o[1])).catch(h));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(e,n)=>{const r=(n==null?void 0:n.id)||CT++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Os=new hH,pH=(t,e)=>{const n=(e==null?void 0:e.id)||CT++;return Os.addToast({title:t,...e,id:n}),n},mH=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",gH=pH,vH=()=>Os.toasts,yH=()=>Os.getActiveToasts(),Lb=Object.assign(gH,{success:Os.success,info:Os.info,warning:Os.warning,error:Os.error,custom:Os.custom,message:Os.message,promise:Os.promise,dismiss:Os.dismiss,loading:Os.loading},{getHistory:vH,getToasts:yH});rH("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function jb(t){return t.label!==void 0}const bH=3,xH="24px",wH="16px",sI=4e3,SH=356,CH=14,kH=45,TH=200;function ll(...t){return t.filter(Boolean).join(" ")}function EH(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const _H=t=>{var e,n,r,i,s,o,a,u,f;const{invert:h,toast:m,unstyled:v,interacting:S,setHeights:k,visibleToasts:C,heights:E,index:_,toasts:M,expanded:A,removeToast:I,defaultRichColors:N,closeButton:O,style:j,cancelButtonStyle:V,actionButtonStyle:z,className:W="",descriptionClassName:J="",duration:Y,position:me,gap:ue,expandByDefault:Ie,classNames:se,icons:xe,closeButtonAriaLabel:q="Close toast"}=t,[te,ae]=Re.useState(null),[B,fe]=Re.useState(null),[ie,pe]=Re.useState(!1),[ke,Pe]=Re.useState(!1),[de,ge]=Re.useState(!1),[_e,We]=Re.useState(!1),[dt,mt]=Re.useState(!1),[Et,Ct]=Re.useState(0),[jn,wn]=Re.useState(0),ln=Re.useRef(m.duration||Y||sI),Mn=Re.useRef(null),En=Re.useRef(null),Q=_===0,le=_+1<=C,ye=m.type,qe=m.dismissible!==!1,Ge=m.className||"",Be=m.descriptionClassName||"",Xe=Re.useMemo(()=>E.findIndex(Dt=>Dt.toastId===m.id)||0,[E,m.id]),Ne=Re.useMemo(()=>{var Dt;return(Dt=m.closeButton)!=null?Dt:O},[m.closeButton,O]),ht=Re.useMemo(()=>m.duration||Y||sI,[m.duration,Y]),$t=Re.useRef(0),cn=Re.useRef(0),dn=Re.useRef(0),bt=Re.useRef(null),[fn,_n]=me.split("-"),or=Re.useMemo(()=>E.reduce((Dt,Vn,Gn)=>Gn>=Xe?Dt:Dt+Vn.height,0),[E,Xe]),ci=fH(),Ur=m.invert||h,Ci=ye==="loading";cn.current=Re.useMemo(()=>Xe*ue+or,[Xe,or]),Re.useEffect(()=>{ln.current=ht},[ht]),Re.useEffect(()=>{pe(!0)},[]),Re.useEffect(()=>{const Dt=En.current;if(Dt){const Vn=Dt.getBoundingClientRect().height;return wn(Vn),k(Gn=>[{toastId:m.id,height:Vn,position:m.position},...Gn]),()=>k(Gn=>Gn.filter(Pr=>Pr.toastId!==m.id))}},[k,m.id]),Re.useLayoutEffect(()=>{if(!ie)return;const Dt=En.current,Vn=Dt.style.height;Dt.style.height="auto";const Gn=Dt.getBoundingClientRect().height;Dt.style.height=Vn,wn(Gn),k(Pr=>Pr.find(G=>G.toastId===m.id)?Pr.map(G=>G.toastId===m.id?{...G,height:Gn}:G):[{toastId:m.id,height:Gn,position:m.position},...Pr])},[ie,m.title,m.description,k,m.id,m.jsx,m.action,m.cancel]);const ki=Re.useCallback(()=>{Pe(!0),Ct(cn.current),k(Dt=>Dt.filter(Vn=>Vn.toastId!==m.id)),setTimeout(()=>{I(m)},TH)},[m,I,k,cn]);Re.useEffect(()=>{if(m.promise&&ye==="loading"||m.duration===1/0||m.type==="loading")return;let Dt;return A||S||ci?(()=>{if(dn.current<$t.current){const Pr=new Date().getTime()-$t.current;ln.current=ln.current-Pr}dn.current=new Date().getTime()})():(()=>{ln.current!==1/0&&($t.current=new Date().getTime(),Dt=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),ki()},ln.current))})(),()=>clearTimeout(Dt)},[A,S,m,ye,ci,ki]),Re.useEffect(()=>{m.delete&&(ki(),m.onDismiss==null||m.onDismiss.call(m,m))},[ki,m.delete]);function Jo(){var Dt;if(xe!=null&&xe.loading){var Vn;return Re.createElement("div",{className:ll(se==null?void 0:se.loader,m==null||(Vn=m.classNames)==null?void 0:Vn.loader,"sonner-loader"),"data-visible":ye==="loading"},xe.loading)}return Re.createElement(oH,{className:ll(se==null?void 0:se.loader,m==null||(Dt=m.classNames)==null?void 0:Dt.loader),visible:ye==="loading"})}const Ks=m.icon||(xe==null?void 0:xe[ye])||iH(ye);var Ki,Dl;return Re.createElement("li",{tabIndex:0,ref:En,className:ll(W,Ge,se==null?void 0:se.toast,m==null||(e=m.classNames)==null?void 0:e.toast,se==null?void 0:se.default,se==null?void 0:se[ye],m==null||(n=m.classNames)==null?void 0:n[ye]),"data-sonner-toast":"","data-rich-colors":(Ki=m.richColors)!=null?Ki:N,"data-styled":!(m.jsx||m.unstyled||v),"data-mounted":ie,"data-promise":!!m.promise,"data-swiped":dt,"data-removed":ke,"data-visible":le,"data-y-position":fn,"data-x-position":_n,"data-index":_,"data-front":Q,"data-swiping":de,"data-dismissible":qe,"data-type":ye,"data-invert":Ur,"data-swipe-out":_e,"data-swipe-direction":B,"data-expanded":!!(A||Ie&&ie),"data-testid":m.testId,style:{"--index":_,"--toasts-before":_,"--z-index":M.length-_,"--offset":`${ke?Et:cn.current}px`,"--initial-height":Ie?"auto":`${jn}px`,...j,...m.style},onDragEnd:()=>{ge(!1),ae(null),bt.current=null},onPointerDown:Dt=>{Dt.button!==2&&(Ci||!qe||(Mn.current=new Date,Ct(cn.current),Dt.target.setPointerCapture(Dt.pointerId),Dt.target.tagName!=="BUTTON"&&(ge(!0),bt.current={x:Dt.clientX,y:Dt.clientY})))},onPointerUp:()=>{var Dt,Vn,Gn;if(_e||!qe)return;bt.current=null;const Pr=Number(((Dt=En.current)==null?void 0:Dt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),bo=Number(((Vn=En.current)==null?void 0:Vn.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),G=new Date().getTime()-((Gn=Mn.current)==null?void 0:Gn.getTime()),re=te==="x"?Pr:bo,Se=Math.abs(re)/G;if(Math.abs(re)>=kH||Se>.11){Ct(cn.current),m.onDismiss==null||m.onDismiss.call(m,m),fe(te==="x"?Pr>0?"right":"left":bo>0?"down":"up"),ki(),We(!0);return}else{var Le,He;(Le=En.current)==null||Le.style.setProperty("--swipe-amount-x","0px"),(He=En.current)==null||He.style.setProperty("--swipe-amount-y","0px")}mt(!1),ge(!1),ae(null)},onPointerMove:Dt=>{var Vn,Gn,Pr;if(!bt.current||!qe||((Vn=window.getSelection())==null?void 0:Vn.toString().length)>0)return;const G=Dt.clientY-bt.current.y,re=Dt.clientX-bt.current.x;var Se;const Le=(Se=t.swipeDirections)!=null?Se:EH(me);!te&&(Math.abs(re)>1||Math.abs(G)>1)&&ae(Math.abs(re)>Math.abs(G)?"x":"y");let He={x:0,y:0};const lt=it=>1/(1.5+Math.abs(it)/20);if(te==="y"){if(Le.includes("top")||Le.includes("bottom"))if(Le.includes("top")&&G<0||Le.includes("bottom")&&G>0)He.y=G;else{const it=G*lt(G);He.y=Math.abs(it)<Math.abs(G)?it:G}}else if(te==="x"&&(Le.includes("left")||Le.includes("right")))if(Le.includes("left")&&re<0||Le.includes("right")&&re>0)He.x=re;else{const it=re*lt(re);He.x=Math.abs(it)<Math.abs(re)?it:re}(Math.abs(He.x)>0||Math.abs(He.y)>0)&&mt(!0),(Gn=En.current)==null||Gn.style.setProperty("--swipe-amount-x",`${He.x}px`),(Pr=En.current)==null||Pr.style.setProperty("--swipe-amount-y",`${He.y}px`)}},Ne&&!m.jsx&&ye!=="loading"?Re.createElement("button",{"aria-label":q,"data-disabled":Ci,"data-close-button":!0,onClick:Ci||!qe?()=>{}:()=>{ki(),m.onDismiss==null||m.onDismiss.call(m,m)},className:ll(se==null?void 0:se.closeButton,m==null||(r=m.classNames)==null?void 0:r.closeButton)},(Dl=xe==null?void 0:xe.close)!=null?Dl:dH):null,(ye||m.icon||m.promise)&&m.icon!==null&&((xe==null?void 0:xe[ye])!==null||m.icon)?Re.createElement("div",{"data-icon":"",className:ll(se==null?void 0:se.icon,m==null||(i=m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Jo():null,m.type!=="loading"?Ks:null):null,Re.createElement("div",{"data-content":"",className:ll(se==null?void 0:se.content,m==null||(s=m.classNames)==null?void 0:s.content)},Re.createElement("div",{"data-title":"",className:ll(se==null?void 0:se.title,m==null||(o=m.classNames)==null?void 0:o.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?Re.createElement("div",{"data-description":"",className:ll(J,Be,se==null?void 0:se.description,m==null||(a=m.classNames)==null?void 0:a.description)},typeof m.description=="function"?m.description():m.description):null),Re.isValidElement(m.cancel)?m.cancel:m.cancel&&jb(m.cancel)?Re.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||V,onClick:Dt=>{jb(m.cancel)&&qe&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,Dt),ki())},className:ll(se==null?void 0:se.cancelButton,m==null||(u=m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,Re.isValidElement(m.action)?m.action:m.action&&jb(m.action)?Re.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||z,onClick:Dt=>{jb(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,Dt),!Dt.defaultPrevented&&ki())},className:ll(se==null?void 0:se.actionButton,m==null||(f=m.classNames)==null?void 0:f.actionButton)},m.action.label):null)};function oI(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function PH(t,e){const n={};return[t,e].forEach((r,i)=>{const s=i===1,o=s?"--mobile-offset":"--offset",a=s?wH:xH;function u(f){["top","right","bottom","left"].forEach(h=>{n[`${o}-${h}`]=typeof f=="number"?`${f}px`:f})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(f=>{r[f]===void 0?n[`${o}-${f}`]=a:n[`${o}-${f}`]=typeof r[f]=="number"?`${r[f]}px`:r[f]}):u(a)}),n}const RH=Re.forwardRef(function(e,n){const{id:r,invert:i,position:s="bottom-right",hotkey:o=["altKey","KeyT"],expand:a,closeButton:u,className:f,offset:h,mobileOffset:m,theme:v="light",richColors:S,duration:k,style:C,visibleToasts:E=bH,toastOptions:_,dir:M=oI(),gap:A=CH,icons:I,containerAriaLabel:N="Notifications"}=e,[O,j]=Re.useState([]),V=Re.useMemo(()=>r?O.filter(ie=>ie.toasterId===r):O.filter(ie=>!ie.toasterId),[O,r]),z=Re.useMemo(()=>Array.from(new Set([s].concat(V.filter(ie=>ie.position).map(ie=>ie.position)))),[V,s]),[W,J]=Re.useState([]),[Y,me]=Re.useState(!1),[ue,Ie]=Re.useState(!1),[se,xe]=Re.useState(v!=="system"?v:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),q=Re.useRef(null),te=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),ae=Re.useRef(null),B=Re.useRef(!1),fe=Re.useCallback(ie=>{j(pe=>{var ke;return(ke=pe.find(Pe=>Pe.id===ie.id))!=null&&ke.delete||Os.dismiss(ie.id),pe.filter(({id:Pe})=>Pe!==ie.id)})},[]);return Re.useEffect(()=>Os.subscribe(ie=>{if(ie.dismiss){requestAnimationFrame(()=>{j(pe=>pe.map(ke=>ke.id===ie.id?{...ke,delete:!0}:ke))});return}setTimeout(()=>{MD.flushSync(()=>{j(pe=>{const ke=pe.findIndex(Pe=>Pe.id===ie.id);return ke!==-1?[...pe.slice(0,ke),{...pe[ke],...ie},...pe.slice(ke+1)]:[ie,...pe]})})})}),[O]),Re.useEffect(()=>{if(v!=="system"){xe(v);return}if(v==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?xe("dark"):xe("light")),typeof window>"u")return;const ie=window.matchMedia("(prefers-color-scheme: dark)");try{ie.addEventListener("change",({matches:pe})=>{xe(pe?"dark":"light")})}catch{ie.addListener(({matches:ke})=>{try{xe(ke?"dark":"light")}catch(Pe){console.error(Pe)}})}},[v]),Re.useEffect(()=>{O.length<=1&&me(!1)},[O]),Re.useEffect(()=>{const ie=pe=>{var ke;if(o.every(ge=>pe[ge]||pe.code===ge)){var de;me(!0),(de=q.current)==null||de.focus()}pe.code==="Escape"&&(document.activeElement===q.current||(ke=q.current)!=null&&ke.contains(document.activeElement))&&me(!1)};return document.addEventListener("keydown",ie),()=>document.removeEventListener("keydown",ie)},[o]),Re.useEffect(()=>{if(q.current)return()=>{ae.current&&(ae.current.focus({preventScroll:!0}),ae.current=null,B.current=!1)}},[q.current]),Re.createElement("section",{ref:n,"aria-label":`${N} ${te}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},z.map((ie,pe)=>{var ke;const[Pe,de]=ie.split("-");return V.length?Re.createElement("ol",{key:ie,dir:M==="auto"?oI():M,tabIndex:-1,ref:q,className:f,"data-sonner-toaster":!0,"data-sonner-theme":se,"data-y-position":Pe,"data-x-position":de,style:{"--front-toast-height":`${((ke=W[0])==null?void 0:ke.height)||0}px`,"--width":`${SH}px`,"--gap":`${A}px`,...C,...PH(h,m)},onBlur:ge=>{B.current&&!ge.currentTarget.contains(ge.relatedTarget)&&(B.current=!1,ae.current&&(ae.current.focus({preventScroll:!0}),ae.current=null))},onFocus:ge=>{ge.target instanceof HTMLElement&&ge.target.dataset.dismissible==="false"||B.current||(B.current=!0,ae.current=ge.relatedTarget)},onMouseEnter:()=>me(!0),onMouseMove:()=>me(!0),onMouseLeave:()=>{ue||me(!1)},onDragEnd:()=>me(!1),onPointerDown:ge=>{ge.target instanceof HTMLElement&&ge.target.dataset.dismissible==="false"||Ie(!0)},onPointerUp:()=>Ie(!1)},V.filter(ge=>!ge.position&&pe===0||ge.position===ie).map((ge,_e)=>{var We,dt;return Re.createElement(_H,{key:ge.id,icons:I,index:_e,toast:ge,defaultRichColors:S,duration:(We=_==null?void 0:_.duration)!=null?We:k,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:i,visibleToasts:E,closeButton:(dt=_==null?void 0:_.closeButton)!=null?dt:u,interacting:ue,position:ie,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,closeButtonAriaLabel:_==null?void 0:_.closeButtonAriaLabel,removeToast:fe,toasts:V.filter(mt=>mt.position==ge.position),heights:W.filter(mt=>mt.position==ge.position),setHeights:J,expandByDefault:a,gap:A,expanded:Y,swipeDirections:e.swipeDirections})})):null}))});function ft(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function aI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function IH(...t){return e=>{let n=!1;const r=t.map(i=>{const s=aI(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():aI(t[i],null)}}}}function uL(...t){return w.useCallback(IH(...t),t)}function MH(t,e){const n=w.createContext(e),r=s=>{const{children:o,...a}=s,u=w.useMemo(()=>a,Object.values(a));return b.jsx(n.Provider,{value:u,children:o})};r.displayName=t+"Provider";function i(s){const o=w.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function Na(t,e=[]){let n=[];function r(s,o){const a=w.createContext(o),u=n.length;n=[...n,o];const f=m=>{var _;const{scope:v,children:S,...k}=m,C=((_=v==null?void 0:v[t])==null?void 0:_[u])||a,E=w.useMemo(()=>k,Object.values(k));return b.jsx(C.Provider,{value:E,children:S})};f.displayName=s+"Provider";function h(m,v){var C;const S=((C=v==null?void 0:v[t])==null?void 0:C[u])||a,k=w.useContext(S);if(k)return k;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${s}\``)}return[f,h]}const i=()=>{const s=n.map(o=>w.createContext(o));return function(a){const u=(a==null?void 0:a[t])||s;return w.useMemo(()=>({[`__scope${t}`]:{...a,[t]:u}}),[a,u])}};return i.scopeName=t,[r,AH(i,...e)]}function AH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:u,scopeName:f})=>{const m=u(s)[`__scope${f}`];return{...a,...m}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function lI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function NH(...t){return e=>{let n=!1;const r=t.map(i=>{const s=lI(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():lI(t[i],null)}}}}function Fr(t){const e=OH(t),n=w.forwardRef((r,i)=>{const{children:s,...o}=r,a=w.Children.toArray(s),u=a.find(LH);if(u){const f=u.props.children,h=a.map(m=>m===u?w.Children.count(f)>1?w.Children.only(null):w.isValidElement(f)?f.props.children:null:m);return b.jsx(e,{...o,ref:i,children:w.isValidElement(f)?w.cloneElement(f,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var dL=Fr("Slot");function OH(t){const e=w.forwardRef((n,r)=>{const{children:i,...s}=n;if(w.isValidElement(i)){const o=FH(i),a=jH(s,i.props);return i.type!==w.Fragment&&(a.ref=r?NH(r,o):o),w.cloneElement(i,a)}return w.Children.count(i)>1?w.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var fL=Symbol("radix.slottable");function DH(t){const e=({children:n})=>b.jsx(b.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=fL,e}function LH(t){return w.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===fL}function jH(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const u=s(...a);return i(...a),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function FH(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var UH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],hL=UH.reduce((t,e)=>{const n=Fr(`Primitive.${e}`),r=w.forwardRef((i,s)=>{const{asChild:o,...a}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(u,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function VH(t,e){t&&Zf.flushSync(()=>t.dispatchEvent(e))}function cI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function BH(...t){return e=>{let n=!1;const r=t.map(i=>{const s=cI(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():cI(t[i],null)}}}}function pL(...t){return w.useCallback(BH(...t),t)}function Tl(t){const e=w.useRef(t);return w.useEffect(()=>{e.current=t}),w.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function zH(t,e=globalThis==null?void 0:globalThis.document){const n=Tl(t);w.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var $H="DismissableLayer",kT="dismissableLayer.update",WH="dismissableLayer.pointerDownOutside",HH="dismissableLayer.focusOutside",uI,mL=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wy=w.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...u}=t,f=w.useContext(mL),[h,m]=w.useState(null),v=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,S]=w.useState({}),k=pL(e,j=>m(j)),C=Array.from(f.layers),[E]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),_=C.indexOf(E),M=h?C.indexOf(h):-1,A=f.layersWithOutsidePointerEventsDisabled.size>0,I=M>=_,N=GH(j=>{const V=j.target,z=[...f.branches].some(W=>W.contains(V));!I||z||(i==null||i(j),o==null||o(j),j.defaultPrevented||a==null||a())},v),O=YH(j=>{const V=j.target;[...f.branches].some(W=>W.contains(V))||(s==null||s(j),o==null||o(j),j.defaultPrevented||a==null||a())},v);return zH(j=>{M===f.layers.size-1&&(r==null||r(j),!j.defaultPrevented&&a&&(j.preventDefault(),a()))},v),w.useEffect(()=>{if(h)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(uI=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(h)),f.layers.add(h),dI(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=uI)}},[h,v,n,f]),w.useEffect(()=>()=>{h&&(f.layers.delete(h),f.layersWithOutsidePointerEventsDisabled.delete(h),dI())},[h,f]),w.useEffect(()=>{const j=()=>S({});return document.addEventListener(kT,j),()=>document.removeEventListener(kT,j)},[]),b.jsx(hL.div,{...u,ref:k,style:{pointerEvents:A?I?"auto":"none":void 0,...t.style},onFocusCapture:ft(t.onFocusCapture,O.onFocusCapture),onBlurCapture:ft(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:ft(t.onPointerDownCapture,N.onPointerDownCapture)})});Wy.displayName=$H;var qH="DismissableLayerBranch",KH=w.forwardRef((t,e)=>{const n=w.useContext(mL),r=w.useRef(null),i=pL(e,r);return w.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),b.jsx(hL.div,{...t,ref:i})});KH.displayName=qH;function GH(t,e=globalThis==null?void 0:globalThis.document){const n=Tl(t),r=w.useRef(!1),i=w.useRef(()=>{});return w.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let u=function(){gL(WH,n,f,{discrete:!0})};const f={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function YH(t,e=globalThis==null?void 0:globalThis.document){const n=Tl(t),r=w.useRef(!1);return w.useEffect(()=>{const i=s=>{s.target&&!r.current&&gL(HH,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function dI(){const t=new CustomEvent(kT);document.dispatchEvent(t)}function gL(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?VH(i,s):i.dispatchEvent(s)}var qi=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},QH=rE[" useId ".trim().toString()]||(()=>{}),JH=0;function bl(t){const[e,n]=w.useState(QH());return qi(()=>{n(r=>r??String(JH++))},[t]),e?`radix-${e}`:""}const XH=["top","right","bottom","left"],Zu=Math.min,fo=Math.max,zx=Math.round,Fb=Math.floor,xl=t=>({x:t,y:t}),ZH={left:"right",right:"left",bottom:"top",top:"bottom"},eq={start:"end",end:"start"};function TT(t,e,n){return fo(t,Zu(e,n))}function Rc(t,e){return typeof t=="function"?t(e):t}function Ic(t){return t.split("-")[0]}function zm(t){return t.split("-")[1]}function CE(t){return t==="x"?"y":"x"}function kE(t){return t==="y"?"height":"width"}function ed(t){return["top","bottom"].includes(Ic(t))?"y":"x"}function TE(t){return CE(ed(t))}function tq(t,e,n){n===void 0&&(n=!1);const r=zm(t),i=TE(t),s=kE(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=$x(o)),[o,$x(o)]}function nq(t){const e=$x(t);return[ET(t),e,ET(e)]}function ET(t){return t.replace(/start|end/g,e=>eq[e])}function rq(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function iq(t,e,n,r){const i=zm(t);let s=rq(Ic(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(ET)))),s}function $x(t){return t.replace(/left|right|bottom|top/g,e=>ZH[e])}function sq(t){return{top:0,right:0,bottom:0,left:0,...t}}function vL(t){return typeof t!="number"?sq(t):{top:t,right:t,bottom:t,left:t}}function Wx(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function fI(t,e,n){let{reference:r,floating:i}=t;const s=ed(e),o=TE(e),a=kE(o),u=Ic(e),f=s==="y",h=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,v=r[a]/2-i[a]/2;let S;switch(u){case"top":S={x:h,y:r.y-i.height};break;case"bottom":S={x:h,y:r.y+r.height};break;case"right":S={x:r.x+r.width,y:m};break;case"left":S={x:r.x-i.width,y:m};break;default:S={x:r.x,y:r.y}}switch(zm(e)){case"start":S[o]-=v*(n&&f?-1:1);break;case"end":S[o]+=v*(n&&f?-1:1);break}return S}const oq=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let f=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:h,y:m}=fI(f,r,u),v=r,S={},k=0;for(let C=0;C<a.length;C++){const{name:E,fn:_}=a[C],{x:M,y:A,data:I,reset:N}=await _({x:h,y:m,initialPlacement:r,placement:v,strategy:i,middlewareData:S,rects:f,platform:o,elements:{reference:t,floating:e}});h=M??h,m=A??m,S={...S,[E]:{...S[E],...I}},N&&k<=50&&(k++,typeof N=="object"&&(N.placement&&(v=N.placement),N.rects&&(f=N.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):N.rects),{x:h,y:m}=fI(f,v,u)),C=-1)}return{x:h,y:m,placement:v,strategy:i,middlewareData:S}};async function oy(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=t,{boundary:f="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:v=!1,padding:S=0}=Rc(e,t),k=vL(S),E=a[v?m==="floating"?"reference":"floating":m],_=Wx(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(E)))==null||n?E:E.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:f,rootBoundary:h,strategy:u})),M=m==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,A=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),I=await(s.isElement==null?void 0:s.isElement(A))?await(s.getScale==null?void 0:s.getScale(A))||{x:1,y:1}:{x:1,y:1},N=Wx(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:M,offsetParent:A,strategy:u}):M);return{top:(_.top-N.top+k.top)/I.y,bottom:(N.bottom-_.bottom+k.bottom)/I.y,left:(_.left-N.left+k.left)/I.x,right:(N.right-_.right+k.right)/I.x}}const aq=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=e,{element:f,padding:h=0}=Rc(t,e)||{};if(f==null)return{};const m=vL(h),v={x:n,y:r},S=TE(i),k=kE(S),C=await o.getDimensions(f),E=S==="y",_=E?"top":"left",M=E?"bottom":"right",A=E?"clientHeight":"clientWidth",I=s.reference[k]+s.reference[S]-v[S]-s.floating[k],N=v[S]-s.reference[S],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let j=O?O[A]:0;(!j||!await(o.isElement==null?void 0:o.isElement(O)))&&(j=a.floating[A]||s.floating[k]);const V=I/2-N/2,z=j/2-C[k]/2-1,W=Zu(m[_],z),J=Zu(m[M],z),Y=W,me=j-C[k]-J,ue=j/2-C[k]/2+V,Ie=TT(Y,ue,me),se=!u.arrow&&zm(i)!=null&&ue!==Ie&&s.reference[k]/2-(ue<Y?W:J)-C[k]/2<0,xe=se?ue<Y?ue-Y:ue-me:0;return{[S]:v[S]+xe,data:{[S]:Ie,centerOffset:ue-Ie-xe,...se&&{alignmentOffset:xe}},reset:se}}}),lq=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:f}=e,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:v,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:C=!0,...E}=Rc(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const _=Ic(i),M=ed(a),A=Ic(a)===a,I=await(u.isRTL==null?void 0:u.isRTL(f.floating)),N=v||(A||!C?[$x(a)]:nq(a)),O=k!=="none";!v&&O&&N.push(...iq(a,C,k,I));const j=[a,...N],V=await oy(e,E),z=[];let W=((r=s.flip)==null?void 0:r.overflows)||[];if(h&&z.push(V[_]),m){const ue=tq(i,o,I);z.push(V[ue[0]],V[ue[1]])}if(W=[...W,{placement:i,overflows:z}],!z.every(ue=>ue<=0)){var J,Y;const ue=(((J=s.flip)==null?void 0:J.index)||0)+1,Ie=j[ue];if(Ie)return{data:{index:ue,overflows:W},reset:{placement:Ie}};let se=(Y=W.filter(xe=>xe.overflows[0]<=0).sort((xe,q)=>xe.overflows[1]-q.overflows[1])[0])==null?void 0:Y.placement;if(!se)switch(S){case"bestFit":{var me;const xe=(me=W.filter(q=>{if(O){const te=ed(q.placement);return te===M||te==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(te=>te>0).reduce((te,ae)=>te+ae,0)]).sort((q,te)=>q[1]-te[1])[0])==null?void 0:me[0];xe&&(se=xe);break}case"initialPlacement":se=a;break}if(i!==se)return{reset:{placement:se}}}return{}}}};function hI(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function pI(t){return XH.some(e=>t[e]>=0)}const cq=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Rc(t,e);switch(r){case"referenceHidden":{const s=await oy(e,{...i,elementContext:"reference"}),o=hI(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:pI(o)}}}case"escaped":{const s=await oy(e,{...i,altBoundary:!0}),o=hI(s,n.floating);return{data:{escapedOffsets:o,escaped:pI(o)}}}default:return{}}}}};async function uq(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ic(n),a=zm(n),u=ed(n)==="y",f=["left","top"].includes(o)?-1:1,h=s&&u?-1:1,m=Rc(e,t);let{mainAxis:v,crossAxis:S,alignmentAxis:k}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return a&&typeof k=="number"&&(S=a==="end"?k*-1:k),u?{x:S*h,y:v*f}:{x:v*f,y:S*h}}const dq=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,u=await uq(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},fq=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:E=>{let{x:_,y:M}=E;return{x:_,y:M}}},...u}=Rc(t,e),f={x:n,y:r},h=await oy(e,u),m=ed(Ic(i)),v=CE(m);let S=f[v],k=f[m];if(s){const E=v==="y"?"top":"left",_=v==="y"?"bottom":"right",M=S+h[E],A=S-h[_];S=TT(M,S,A)}if(o){const E=m==="y"?"top":"left",_=m==="y"?"bottom":"right",M=k+h[E],A=k-h[_];k=TT(M,k,A)}const C=a.fn({...e,[v]:S,[m]:k});return{...C,data:{x:C.x-n,y:C.y-r,enabled:{[v]:s,[m]:o}}}}}},hq=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:u=!0,crossAxis:f=!0}=Rc(t,e),h={x:n,y:r},m=ed(i),v=CE(m);let S=h[v],k=h[m];const C=Rc(a,e),E=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(u){const A=v==="y"?"height":"width",I=s.reference[v]-s.floating[A]+E.mainAxis,N=s.reference[v]+s.reference[A]-E.mainAxis;S<I?S=I:S>N&&(S=N)}if(f){var _,M;const A=v==="y"?"width":"height",I=["top","left"].includes(Ic(i)),N=s.reference[m]-s.floating[A]+(I&&((_=o.offset)==null?void 0:_[m])||0)+(I?0:E.crossAxis),O=s.reference[m]+s.reference[A]+(I?0:((M=o.offset)==null?void 0:M[m])||0)-(I?E.crossAxis:0);k<N?k=N:k>O&&(k=O)}return{[v]:S,[m]:k}}}},pq=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:u=()=>{},...f}=Rc(t,e),h=await oy(e,f),m=Ic(i),v=zm(i),S=ed(i)==="y",{width:k,height:C}=s.floating;let E,_;m==="top"||m==="bottom"?(E=m,_=v===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=m,E=v==="end"?"top":"bottom");const M=C-h.top-h.bottom,A=k-h.left-h.right,I=Zu(C-h[E],M),N=Zu(k-h[_],A),O=!e.middlewareData.shift;let j=I,V=N;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(V=A),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(j=M),O&&!v){const W=fo(h.left,0),J=fo(h.right,0),Y=fo(h.top,0),me=fo(h.bottom,0);S?V=k-2*(W!==0||J!==0?W+J:fo(h.left,h.right)):j=C-2*(Y!==0||me!==0?Y+me:fo(h.top,h.bottom))}await u({...e,availableWidth:V,availableHeight:j});const z=await o.getDimensions(a.floating);return k!==z.width||C!==z.height?{reset:{rects:!0}}:{}}}};function Uw(){return typeof window<"u"}function $m(t){return yL(t)?(t.nodeName||"").toLowerCase():"#document"}function mo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ml(t){var e;return(e=(yL(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function yL(t){return Uw()?t instanceof Node||t instanceof mo(t).Node:!1}function _a(t){return Uw()?t instanceof Element||t instanceof mo(t).Element:!1}function El(t){return Uw()?t instanceof HTMLElement||t instanceof mo(t).HTMLElement:!1}function mI(t){return!Uw()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof mo(t).ShadowRoot}function Hy(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Pa(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function mq(t){return["table","td","th"].includes($m(t))}function Vw(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function EE(t){const e=_E(),n=_a(t)?Pa(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function gq(t){let e=td(t);for(;El(e)&&!wm(e);){if(EE(e))return e;if(Vw(e))return null;e=td(e)}return null}function _E(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wm(t){return["html","body","#document"].includes($m(t))}function Pa(t){return mo(t).getComputedStyle(t)}function Bw(t){return _a(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function td(t){if($m(t)==="html")return t;const e=t.assignedSlot||t.parentNode||mI(t)&&t.host||Ml(t);return mI(e)?e.host:e}function bL(t){const e=td(t);return wm(e)?t.ownerDocument?t.ownerDocument.body:t.body:El(e)&&Hy(e)?e:bL(e)}function ay(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=bL(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=mo(i);if(s){const a=_T(o);return e.concat(o,o.visualViewport||[],Hy(i)?i:[],a&&n?ay(a):[])}return e.concat(i,ay(i,[],n))}function _T(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function xL(t){const e=Pa(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=El(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=zx(n)!==s||zx(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function PE(t){return _a(t)?t:t.contextElement}function Yp(t){const e=PE(t);if(!El(e))return xl(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=xL(e);let o=(s?zx(n.width):n.width)/r,a=(s?zx(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const vq=xl(0);function wL(t){const e=mo(t);return!_E()||!e.visualViewport?vq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function yq(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==mo(t)?!1:e}function zf(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=PE(t);let o=xl(1);e&&(r?_a(r)&&(o=Yp(r)):o=Yp(t));const a=yq(s,n,r)?wL(s):xl(0);let u=(i.left+a.x)/o.x,f=(i.top+a.y)/o.y,h=i.width/o.x,m=i.height/o.y;if(s){const v=mo(s),S=r&&_a(r)?mo(r):r;let k=v,C=_T(k);for(;C&&r&&S!==k;){const E=Yp(C),_=C.getBoundingClientRect(),M=Pa(C),A=_.left+(C.clientLeft+parseFloat(M.paddingLeft))*E.x,I=_.top+(C.clientTop+parseFloat(M.paddingTop))*E.y;u*=E.x,f*=E.y,h*=E.x,m*=E.y,u+=A,f+=I,k=mo(C),C=_T(k)}}return Wx({width:h,height:m,x:u,y:f})}function RE(t,e){const n=Bw(t).scrollLeft;return e?e.left+n:zf(Ml(t)).left+n}function SL(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:RE(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function bq(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Ml(r),a=e?Vw(e.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},f=xl(1);const h=xl(0),m=El(r);if((m||!m&&!s)&&(($m(r)!=="body"||Hy(o))&&(u=Bw(r)),El(r))){const S=zf(r);f=Yp(r),h.x=S.x+r.clientLeft,h.y=S.y+r.clientTop}const v=o&&!m&&!s?SL(o,u,!0):xl(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-u.scrollLeft*f.x+h.x+v.x,y:n.y*f.y-u.scrollTop*f.y+h.y+v.y}}function xq(t){return Array.from(t.getClientRects())}function wq(t){const e=Ml(t),n=Bw(t),r=t.ownerDocument.body,i=fo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=fo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+RE(t);const a=-n.scrollTop;return Pa(r).direction==="rtl"&&(o+=fo(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Sq(t,e){const n=mo(t),r=Ml(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const f=_E();(!f||f&&e==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function Cq(t,e){const n=zf(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=El(t)?Yp(t):xl(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,u=i*s.x,f=r*s.y;return{width:o,height:a,x:u,y:f}}function gI(t,e,n){let r;if(e==="viewport")r=Sq(t,n);else if(e==="document")r=wq(Ml(t));else if(_a(e))r=Cq(e,n);else{const i=wL(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Wx(r)}function CL(t,e){const n=td(t);return n===e||!_a(n)||wm(n)?!1:Pa(n).position==="fixed"||CL(n,e)}function kq(t,e){const n=e.get(t);if(n)return n;let r=ay(t,[],!1).filter(a=>_a(a)&&$m(a)!=="body"),i=null;const s=Pa(t).position==="fixed";let o=s?td(t):t;for(;_a(o)&&!wm(o);){const a=Pa(o),u=EE(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Hy(o)&&!u&&CL(t,o))?r=r.filter(h=>h!==o):i=a,o=td(o)}return e.set(t,r),r}function Tq(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Vw(e)?[]:kq(e,this._c):[].concat(n),r],a=o[0],u=o.reduce((f,h)=>{const m=gI(e,h,i);return f.top=fo(m.top,f.top),f.right=Zu(m.right,f.right),f.bottom=Zu(m.bottom,f.bottom),f.left=fo(m.left,f.left),f},gI(e,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Eq(t){const{width:e,height:n}=xL(t);return{width:e,height:n}}function _q(t,e,n){const r=El(e),i=Ml(e),s=n==="fixed",o=zf(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const u=xl(0);if(r||!r&&!s)if(($m(e)!=="body"||Hy(i))&&(a=Bw(e)),r){const v=zf(e,!0,s,e);u.x=v.x+e.clientLeft,u.y=v.y+e.clientTop}else i&&(u.x=RE(i));const f=i&&!r&&!s?SL(i,a):xl(0),h=o.left+a.scrollLeft-u.x-f.x,m=o.top+a.scrollTop-u.y-f.y;return{x:h,y:m,width:o.width,height:o.height}}function KC(t){return Pa(t).position==="static"}function vI(t,e){if(!El(t)||Pa(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ml(t)===n&&(n=n.ownerDocument.body),n}function kL(t,e){const n=mo(t);if(Vw(t))return n;if(!El(t)){let i=td(t);for(;i&&!wm(i);){if(_a(i)&&!KC(i))return i;i=td(i)}return n}let r=vI(t,e);for(;r&&mq(r)&&KC(r);)r=vI(r,e);return r&&wm(r)&&KC(r)&&!EE(r)?n:r||gq(t)||n}const Pq=async function(t){const e=this.getOffsetParent||kL,n=this.getDimensions,r=await n(t.floating);return{reference:_q(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Rq(t){return Pa(t).direction==="rtl"}const Iq={convertOffsetParentRelativeRectToViewportRelativeRect:bq,getDocumentElement:Ml,getClippingRect:Tq,getOffsetParent:kL,getElementRects:Pq,getClientRects:xq,getDimensions:Eq,getScale:Yp,isElement:_a,isRTL:Rq};function TL(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Mq(t,e){let n=null,r;const i=Ml(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const f=t.getBoundingClientRect(),{left:h,top:m,width:v,height:S}=f;if(a||e(),!v||!S)return;const k=Fb(m),C=Fb(i.clientWidth-(h+v)),E=Fb(i.clientHeight-(m+S)),_=Fb(h),A={rootMargin:-k+"px "+-C+"px "+-E+"px "+-_+"px",threshold:fo(0,Zu(1,u))||1};let I=!0;function N(O){const j=O[0].intersectionRatio;if(j!==u){if(!I)return o();j?o(!1,j):r=setTimeout(()=>{o(!1,1e-7)},1e3)}j===1&&!TL(f,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(N,{...A,root:i.ownerDocument})}catch{n=new IntersectionObserver(N,A)}n.observe(t)}return o(!0),s}function Aq(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,f=PE(t),h=i||s?[...f?ay(f):[],...ay(e)]:[];h.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const m=f&&a?Mq(f,n):null;let v=-1,S=null;o&&(S=new ResizeObserver(_=>{let[M]=_;M&&M.target===f&&S&&(S.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var A;(A=S)==null||A.observe(e)})),n()}),f&&!u&&S.observe(f),S.observe(e));let k,C=u?zf(t):null;u&&E();function E(){const _=zf(t);C&&!TL(C,_)&&n(),C=_,k=requestAnimationFrame(E)}return n(),()=>{var _;h.forEach(M=>{i&&M.removeEventListener("scroll",n),s&&M.removeEventListener("resize",n)}),m==null||m(),(_=S)==null||_.disconnect(),S=null,u&&cancelAnimationFrame(k)}}const Nq=dq,Oq=fq,Dq=lq,Lq=pq,jq=cq,yI=aq,Fq=hq,Uq=(t,e,n)=>{const r=new Map,i={platform:Iq,...n},s={...i.platform,_c:r};return oq(t,e,{...i,platform:s})};var lx=typeof document<"u"?w.useLayoutEffect:w.useEffect;function Hx(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Hx(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Hx(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function EL(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function bI(t,e){const n=EL(t);return Math.round(e*n)/n}function GC(t){const e=w.useRef(t);return lx(()=>{e.current=t}),e}function Vq(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:f}=t,[h,m]=w.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[v,S]=w.useState(r);Hx(v,r)||S(r);const[k,C]=w.useState(null),[E,_]=w.useState(null),M=w.useCallback(q=>{q!==O.current&&(O.current=q,C(q))},[]),A=w.useCallback(q=>{q!==j.current&&(j.current=q,_(q))},[]),I=s||k,N=o||E,O=w.useRef(null),j=w.useRef(null),V=w.useRef(h),z=u!=null,W=GC(u),J=GC(i),Y=GC(f),me=w.useCallback(()=>{if(!O.current||!j.current)return;const q={placement:e,strategy:n,middleware:v};J.current&&(q.platform=J.current),Uq(O.current,j.current,q).then(te=>{const ae={...te,isPositioned:Y.current!==!1};ue.current&&!Hx(V.current,ae)&&(V.current=ae,Zf.flushSync(()=>{m(ae)}))})},[v,e,n,J,Y]);lx(()=>{f===!1&&V.current.isPositioned&&(V.current.isPositioned=!1,m(q=>({...q,isPositioned:!1})))},[f]);const ue=w.useRef(!1);lx(()=>(ue.current=!0,()=>{ue.current=!1}),[]),lx(()=>{if(I&&(O.current=I),N&&(j.current=N),I&&N){if(W.current)return W.current(I,N,me);me()}},[I,N,me,W,z]);const Ie=w.useMemo(()=>({reference:O,floating:j,setReference:M,setFloating:A}),[M,A]),se=w.useMemo(()=>({reference:I,floating:N}),[I,N]),xe=w.useMemo(()=>{const q={position:n,left:0,top:0};if(!se.floating)return q;const te=bI(se.floating,h.x),ae=bI(se.floating,h.y);return a?{...q,transform:"translate("+te+"px, "+ae+"px)",...EL(se.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:te,top:ae}},[n,a,se.floating,h.x,h.y]);return w.useMemo(()=>({...h,update:me,refs:Ie,elements:se,floatingStyles:xe}),[h,me,Ie,se,xe])}const Bq=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?yI({element:r.current,padding:i}).fn(n):{}:r?yI({element:r,padding:i}).fn(n):{}}}},zq=(t,e)=>({...Nq(t),options:[t,e]}),$q=(t,e)=>({...Oq(t),options:[t,e]}),Wq=(t,e)=>({...Fq(t),options:[t,e]}),Hq=(t,e)=>({...Dq(t),options:[t,e]}),qq=(t,e)=>({...Lq(t),options:[t,e]}),Kq=(t,e)=>({...jq(t),options:[t,e]}),Gq=(t,e)=>({...Bq(t),options:[t,e]});var Yq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Qq=Yq.reduce((t,e)=>{const n=Fr(`Primitive.${e}`),r=w.forwardRef((i,s)=>{const{asChild:o,...a}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(u,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),Jq="Arrow",_L=w.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return b.jsx(Qq.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:b.jsx("polygon",{points:"0,0 30,0 15,10"})})});_L.displayName=Jq;var Xq=_L;function xI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Zq(...t){return e=>{let n=!1;const r=t.map(i=>{const s=xI(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():xI(t[i],null)}}}}function PL(...t){return w.useCallback(Zq(...t),t)}var e7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],RL=e7.reduce((t,e)=>{const n=Fr(`Primitive.${e}`),r=w.forwardRef((i,s)=>{const{asChild:o,...a}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(u,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function IE(t){const[e,n]=w.useState(void 0);return qi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const u=s.borderBoxSize,f=Array.isArray(u)?u[0]:u;o=f.inlineSize,a=f.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var ME="Popper",[IL,Wm]=Na(ME),[t7,ML]=IL(ME),AL=t=>{const{__scopePopper:e,children:n}=t,[r,i]=w.useState(null);return b.jsx(t7,{scope:e,anchor:r,onAnchorChange:i,children:n})};AL.displayName=ME;var NL="PopperAnchor",OL=w.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=ML(NL,n),o=w.useRef(null),a=PL(e,o),u=w.useRef(null);return w.useEffect(()=>{const f=u.current;u.current=(r==null?void 0:r.current)||o.current,f!==u.current&&s.onAnchorChange(u.current)}),r?null:b.jsx(RL.div,{...i,ref:a})});OL.displayName=NL;var AE="PopperContent",[n7,r7]=IL(AE),DL=w.forwardRef((t,e)=>{var de,ge,_e,We,dt,mt;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:u=!0,collisionBoundary:f=[],collisionPadding:h=0,sticky:m="partial",hideWhenDetached:v=!1,updatePositionStrategy:S="optimized",onPlaced:k,...C}=t,E=ML(AE,n),[_,M]=w.useState(null),A=PL(e,Et=>M(Et)),[I,N]=w.useState(null),O=IE(I),j=(O==null?void 0:O.width)??0,V=(O==null?void 0:O.height)??0,z=r+(s!=="center"?"-"+s:""),W=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},J=Array.isArray(f)?f:[f],Y=J.length>0,me={padding:W,boundary:J.filter(s7),altBoundary:Y},{refs:ue,floatingStyles:Ie,placement:se,isPositioned:xe,middlewareData:q}=Vq({strategy:"fixed",placement:z,whileElementsMounted:(...Et)=>Aq(...Et,{animationFrame:S==="always"}),elements:{reference:E.anchor},middleware:[zq({mainAxis:i+V,alignmentAxis:o}),u&&$q({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Wq():void 0,...me}),u&&Hq({...me}),qq({...me,apply:({elements:Et,rects:Ct,availableWidth:jn,availableHeight:wn})=>{const{width:ln,height:Mn}=Ct.reference,En=Et.floating.style;En.setProperty("--radix-popper-available-width",`${jn}px`),En.setProperty("--radix-popper-available-height",`${wn}px`),En.setProperty("--radix-popper-anchor-width",`${ln}px`),En.setProperty("--radix-popper-anchor-height",`${Mn}px`)}}),I&&Gq({element:I,padding:a}),o7({arrowWidth:j,arrowHeight:V}),v&&Kq({strategy:"referenceHidden",...me})]}),[te,ae]=FL(se),B=Tl(k);qi(()=>{xe&&(B==null||B())},[xe,B]);const fe=(de=q.arrow)==null?void 0:de.x,ie=(ge=q.arrow)==null?void 0:ge.y,pe=((_e=q.arrow)==null?void 0:_e.centerOffset)!==0,[ke,Pe]=w.useState();return qi(()=>{_&&Pe(window.getComputedStyle(_).zIndex)},[_]),b.jsx("div",{ref:ue.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ie,transform:xe?Ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ke,"--radix-popper-transform-origin":[(We=q.transformOrigin)==null?void 0:We.x,(dt=q.transformOrigin)==null?void 0:dt.y].join(" "),...((mt=q.hide)==null?void 0:mt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:b.jsx(n7,{scope:n,placedSide:te,onArrowChange:N,arrowX:fe,arrowY:ie,shouldHideArrow:pe,children:b.jsx(RL.div,{"data-side":te,"data-align":ae,...C,ref:A,style:{...C.style,animation:xe?void 0:"none"}})})})});DL.displayName=AE;var LL="PopperArrow",i7={top:"bottom",right:"left",bottom:"top",left:"right"},jL=w.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=r7(LL,r),o=i7[s.placedSide];return b.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:b.jsx(Xq,{...i,ref:n,style:{...i.style,display:"block"}})})});jL.displayName=LL;function s7(t){return t!==null}var o7=t=>({name:"transformOrigin",options:t,fn(e){var E,_,M;const{placement:n,rects:r,middlewareData:i}=e,o=((E=i.arrow)==null?void 0:E.centerOffset)!==0,a=o?0:t.arrowWidth,u=o?0:t.arrowHeight,[f,h]=FL(n),m={start:"0%",center:"50%",end:"100%"}[h],v=(((_=i.arrow)==null?void 0:_.x)??0)+a/2,S=(((M=i.arrow)==null?void 0:M.y)??0)+u/2;let k="",C="";return f==="bottom"?(k=o?m:`${v}px`,C=`${-u}px`):f==="top"?(k=o?m:`${v}px`,C=`${r.floating.height+u}px`):f==="right"?(k=`${-u}px`,C=o?m:`${S}px`):f==="left"&&(k=`${r.floating.width+u}px`,C=o?m:`${S}px`),{data:{x:k,y:C}}}});function FL(t){const[e,n="center"]=t.split("-");return[e,n]}var NE=AL,OE=OL,DE=DL,LE=jL,a7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],l7=a7.reduce((t,e)=>{const n=Fr(`Primitive.${e}`),r=w.forwardRef((i,s)=>{const{asChild:o,...a}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(u,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),c7="Portal",zw=w.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=w.useState(!1);qi(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?MD.createPortal(b.jsx(l7.div,{...r,ref:e}),o):null});zw.displayName=c7;function wI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function u7(...t){return e=>{let n=!1;const r=t.map(i=>{const s=wI(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():wI(t[i],null)}}}}function d7(...t){return w.useCallback(u7(...t),t)}function f7(t,e){return w.useReducer((n,r)=>e[n][r]??n,t)}var Al=t=>{const{present:e,children:n}=t,r=h7(e),i=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),s=d7(r.ref,p7(i));return typeof n=="function"||r.isPresent?w.cloneElement(i,{ref:s}):null};Al.displayName="Presence";function h7(t){const[e,n]=w.useState(),r=w.useRef(null),i=w.useRef(t),s=w.useRef("none"),o=t?"mounted":"unmounted",[a,u]=f7(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const f=Ub(r.current);s.current=a==="mounted"?f:"none"},[a]),qi(()=>{const f=r.current,h=i.current;if(h!==t){const v=s.current,S=Ub(f);t?u("MOUNT"):S==="none"||(f==null?void 0:f.display)==="none"?u("UNMOUNT"):u(h&&v!==S?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),qi(()=>{if(e){let f;const h=e.ownerDocument.defaultView??window,m=S=>{const C=Ub(r.current).includes(CSS.escape(S.animationName));if(S.target===e&&C&&(u("ANIMATION_END"),!i.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",f=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},v=S=>{S.target===e&&(s.current=Ub(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{h.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:w.useCallback(f=>{r.current=f?getComputedStyle(f):null,n(f)},[])}}function Ub(t){return(t==null?void 0:t.animationName)||"none"}function p7(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var m7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],g7=m7.reduce((t,e)=>{const n=Fr(`Primitive.${e}`),r=w.forwardRef((i,s)=>{const{asChild:o,...a}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(u,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),v7=rE[" useInsertionEffect ".trim().toString()]||qi;function nd({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=y7({defaultProp:e,onChange:n}),a=t!==void 0,u=a?t:i;{const h=w.useRef(t!==void 0);w.useEffect(()=>{const m=h.current;m!==a&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=a},[a,r])}const f=w.useCallback(h=>{var m;if(a){const v=b7(h)?h(t):h;v!==t&&((m=o.current)==null||m.call(o,v))}else s(h)},[a,t,s,o]);return[u,f]}function y7({defaultProp:t,onChange:e}){const[n,r]=w.useState(t),i=w.useRef(n),s=w.useRef(e);return v7(()=>{s.current=e},[e]),w.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function b7(t){return typeof t=="function"}var x7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],w7=x7.reduce((t,e)=>{const n=Fr(`Primitive.${e}`),r=w.forwardRef((i,s)=>{const{asChild:o,...a}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(u,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),UL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),S7="VisuallyHidden",VL=w.forwardRef((t,e)=>b.jsx(w7.span,{...t,ref:e,style:{...UL,...t.style}}));VL.displayName=S7;var C7=VL,[$w,jhe]=Na("Tooltip",[Wm]),Ww=Wm(),BL="TooltipProvider",k7=700,PT="tooltip.open",[T7,jE]=$w(BL),zL=t=>{const{__scopeTooltip:e,delayDuration:n=k7,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=w.useRef(!0),a=w.useRef(!1),u=w.useRef(0);return w.useEffect(()=>{const f=u.current;return()=>window.clearTimeout(f)},[]),b.jsx(T7,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:w.useCallback(()=>{window.clearTimeout(u.current),o.current=!1},[]),onClose:w.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:w.useCallback(f=>{a.current=f},[]),disableHoverableContent:i,children:s})};zL.displayName=BL;var ly="Tooltip",[E7,Hw]=$w(ly),$L=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=t,u=jE(ly,t.__scopeTooltip),f=Ww(e),[h,m]=w.useState(null),v=bl(),S=w.useRef(0),k=o??u.disableHoverableContent,C=a??u.delayDuration,E=w.useRef(!1),[_,M]=nd({prop:r,defaultProp:i??!1,onChange:j=>{j?(u.onOpen(),document.dispatchEvent(new CustomEvent(PT))):u.onClose(),s==null||s(j)},caller:ly}),A=w.useMemo(()=>_?E.current?"delayed-open":"instant-open":"closed",[_]),I=w.useCallback(()=>{window.clearTimeout(S.current),S.current=0,E.current=!1,M(!0)},[M]),N=w.useCallback(()=>{window.clearTimeout(S.current),S.current=0,M(!1)},[M]),O=w.useCallback(()=>{window.clearTimeout(S.current),S.current=window.setTimeout(()=>{E.current=!0,M(!0),S.current=0},C)},[C,M]);return w.useEffect(()=>()=>{S.current&&(window.clearTimeout(S.current),S.current=0)},[]),b.jsx(NE,{...f,children:b.jsx(E7,{scope:e,contentId:v,open:_,stateAttribute:A,trigger:h,onTriggerChange:m,onTriggerEnter:w.useCallback(()=>{u.isOpenDelayedRef.current?O():I()},[u.isOpenDelayedRef,O,I]),onTriggerLeave:w.useCallback(()=>{k?N():(window.clearTimeout(S.current),S.current=0)},[N,k]),onOpen:I,onClose:N,disableHoverableContent:k,children:n})})};$L.displayName=ly;var RT="TooltipTrigger",WL=w.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=Hw(RT,n),s=jE(RT,n),o=Ww(n),a=w.useRef(null),u=uL(e,a,i.onTriggerChange),f=w.useRef(!1),h=w.useRef(!1),m=w.useCallback(()=>f.current=!1,[]);return w.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),b.jsx(OE,{asChild:!0,...o,children:b.jsx(g7.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:u,onPointerMove:ft(t.onPointerMove,v=>{v.pointerType!=="touch"&&!h.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),h.current=!0)}),onPointerLeave:ft(t.onPointerLeave,()=>{i.onTriggerLeave(),h.current=!1}),onPointerDown:ft(t.onPointerDown,()=>{i.open&&i.onClose(),f.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:ft(t.onFocus,()=>{f.current||i.onOpen()}),onBlur:ft(t.onBlur,i.onClose),onClick:ft(t.onClick,i.onClose)})})});WL.displayName=RT;var _7="TooltipPortal",[Fhe,P7]=$w(_7,{forceMount:void 0}),Sm="TooltipContent",HL=w.forwardRef((t,e)=>{const n=P7(Sm,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=Hw(Sm,t.__scopeTooltip);return b.jsx(Al,{present:r||o.open,children:o.disableHoverableContent?b.jsx(qL,{side:i,...s,ref:e}):b.jsx(R7,{side:i,...s,ref:e})})}),R7=w.forwardRef((t,e)=>{const n=Hw(Sm,t.__scopeTooltip),r=jE(Sm,t.__scopeTooltip),i=w.useRef(null),s=uL(e,i),[o,a]=w.useState(null),{trigger:u,onClose:f}=n,h=i.current,{onPointerInTransitChange:m}=r,v=w.useCallback(()=>{a(null),m(!1)},[m]),S=w.useCallback((k,C)=>{const E=k.currentTarget,_={x:k.clientX,y:k.clientY},M=O7(_,E.getBoundingClientRect()),A=D7(_,M),I=L7(C.getBoundingClientRect()),N=F7([...A,...I]);a(N),m(!0)},[m]);return w.useEffect(()=>()=>v(),[v]),w.useEffect(()=>{if(u&&h){const k=E=>S(E,h),C=E=>S(E,u);return u.addEventListener("pointerleave",k),h.addEventListener("pointerleave",C),()=>{u.removeEventListener("pointerleave",k),h.removeEventListener("pointerleave",C)}}},[u,h,S,v]),w.useEffect(()=>{if(o){const k=C=>{const E=C.target,_={x:C.clientX,y:C.clientY},M=(u==null?void 0:u.contains(E))||(h==null?void 0:h.contains(E)),A=!j7(_,o);M?v():A&&(v(),f())};return document.addEventListener("pointermove",k),()=>document.removeEventListener("pointermove",k)}},[u,h,o,f,v]),b.jsx(qL,{...t,ref:s})}),[I7,M7]=$w(ly,{isInside:!1}),A7=DH("TooltipContent"),qL=w.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,u=Hw(Sm,n),f=Ww(n),{onClose:h}=u;return w.useEffect(()=>(document.addEventListener(PT,h),()=>document.removeEventListener(PT,h)),[h]),w.useEffect(()=>{if(u.trigger){const m=v=>{const S=v.target;S!=null&&S.contains(u.trigger)&&h()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[u.trigger,h]),b.jsx(Wy,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:m=>m.preventDefault(),onDismiss:h,children:b.jsxs(DE,{"data-state":u.stateAttribute,...f,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[b.jsx(A7,{children:r}),b.jsx(I7,{scope:n,isInside:!0,children:b.jsx(C7,{id:u.contentId,role:"tooltip",children:i||r})})]})})});HL.displayName=Sm;var KL="TooltipArrow",N7=w.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=Ww(n);return M7(KL,n).isInside?null:b.jsx(LE,{...i,...r,ref:e})});N7.displayName=KL;function O7(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function D7(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function L7(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function j7(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],u=e[o],f=a.x,h=a.y,m=u.x,v=u.y;h>r!=v>r&&n<(m-f)*(r-h)/(v-h)+f&&(i=!i)}return i}function F7(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),U7(e)}function U7(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var V7=zL,B7=$L,z7=WL,GL=HL;function YL(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=YL(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function QL(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=YL(t))&&(r&&(r+=" "),r+=e);return r}const FE="-",$7=t=>{const e=H7(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(FE);return a[0]===""&&a.length!==1&&a.shift(),JL(a,e)||W7(o)},getConflictingClassGroupIds:(o,a)=>{const u=n[o]||[];return a&&r[o]?[...u,...r[o]]:u}}},JL=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?JL(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(FE);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},SI=/^\[(.+)\]$/,W7=t=>{if(SI.test(t)){const e=SI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},H7=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return K7(Object.entries(t.classGroups),n).forEach(([s,o])=>{IT(o,r,s,e)}),r},IT=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:CI(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(q7(i)){IT(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{IT(o,CI(e,s),n,r)})})},CI=(t,e)=>{let n=t;return e.split(FE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},q7=t=>t.isThemeGetter,K7=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,G7=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},XL="!",Y7=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const u=[];let f=0,h=0,m;for(let E=0;E<a.length;E++){let _=a[E];if(f===0){if(_===i&&(r||a.slice(E,E+s)===e)){u.push(a.slice(h,E)),h=E+s;continue}if(_==="/"){m=E;continue}}_==="["?f++:_==="]"&&f--}const v=u.length===0?a:a.substring(h),S=v.startsWith(XL),k=S?v.substring(1):v,C=m&&m>h?m-h:void 0;return{modifiers:u,hasImportantModifier:S,baseClassName:k,maybePostfixModifierPosition:C}};return n?a=>n({className:a,parseClassName:o}):o},Q7=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},J7=t=>({cache:G7(t.cacheSize),parseClassName:Y7(t),...$7(t)}),X7=/\s+/,Z7=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(X7);let a="";for(let u=o.length-1;u>=0;u-=1){const f=o[u],{modifiers:h,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:S}=n(f);let k=!!S,C=r(k?v.substring(0,S):v);if(!C){if(!k){a=f+(a.length>0?" "+a:a);continue}if(C=r(v),!C){a=f+(a.length>0?" "+a:a);continue}k=!1}const E=Q7(h).join(":"),_=m?E+XL:E,M=_+C;if(s.includes(M))continue;s.push(M);const A=i(C,k);for(let I=0;I<A.length;++I){const N=A[I];s.push(_+N)}a=f+(a.length>0?" "+a:a)}return a};function eK(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=ZL(e))&&(r&&(r+=" "),r+=n);return r}const ZL=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=ZL(t[r]))&&(n&&(n+=" "),n+=e);return n};function tK(t,...e){let n,r,i,s=o;function o(u){const f=e.reduce((h,m)=>m(h),t());return n=J7(f),r=n.cache.get,i=n.cache.set,s=a,a(u)}function a(u){const f=r(u);if(f)return f;const h=Z7(u,n);return i(u,h),h}return function(){return s(eK.apply(null,arguments))}}const tr=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},e2=/^\[(?:([a-z-]+):)?(.+)\]$/i,nK=/^\d+\/\d+$/,rK=new Set(["px","full","screen"]),iK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,sK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,oK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,aK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,lK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fc=t=>Qp(t)||rK.has(t)||nK.test(t),xu=t=>Hm(t,"length",gK),Qp=t=>!!t&&!Number.isNaN(Number(t)),YC=t=>Hm(t,"number",Qp),wv=t=>!!t&&Number.isInteger(Number(t)),cK=t=>t.endsWith("%")&&Qp(t.slice(0,-1)),Kt=t=>e2.test(t),wu=t=>iK.test(t),uK=new Set(["length","size","percentage"]),dK=t=>Hm(t,uK,t2),fK=t=>Hm(t,"position",t2),hK=new Set(["image","url"]),pK=t=>Hm(t,hK,yK),mK=t=>Hm(t,"",vK),Sv=()=>!0,Hm=(t,e,n)=>{const r=e2.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},gK=t=>sK.test(t)&&!oK.test(t),t2=()=>!1,vK=t=>aK.test(t),yK=t=>lK.test(t),bK=()=>{const t=tr("colors"),e=tr("spacing"),n=tr("blur"),r=tr("brightness"),i=tr("borderColor"),s=tr("borderRadius"),o=tr("borderSpacing"),a=tr("borderWidth"),u=tr("contrast"),f=tr("grayscale"),h=tr("hueRotate"),m=tr("invert"),v=tr("gap"),S=tr("gradientColorStops"),k=tr("gradientColorStopPositions"),C=tr("inset"),E=tr("margin"),_=tr("opacity"),M=tr("padding"),A=tr("saturate"),I=tr("scale"),N=tr("sepia"),O=tr("skew"),j=tr("space"),V=tr("translate"),z=()=>["auto","contain","none"],W=()=>["auto","hidden","clip","visible","scroll"],J=()=>["auto",Kt,e],Y=()=>[Kt,e],me=()=>["",fc,xu],ue=()=>["auto",Qp,Kt],Ie=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],se=()=>["solid","dashed","dotted","double","none"],xe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],te=()=>["","0",Kt],ae=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[Qp,Kt];return{cacheSize:500,separator:":",theme:{colors:[Sv],spacing:[fc,xu],blur:["none","",wu,Kt],brightness:B(),borderColor:[t],borderRadius:["none","","full",wu,Kt],borderSpacing:Y(),borderWidth:me(),contrast:B(),grayscale:te(),hueRotate:B(),invert:te(),gap:Y(),gradientColorStops:[t],gradientColorStopPositions:[cK,xu],inset:J(),margin:J(),opacity:B(),padding:Y(),saturate:B(),scale:B(),sepia:te(),skew:B(),space:Y(),translate:Y()},classGroups:{aspect:[{aspect:["auto","square","video",Kt]}],container:["container"],columns:[{columns:[wu]}],"break-after":[{"break-after":ae()}],"break-before":[{"break-before":ae()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ie(),Kt]}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",wv,Kt]}],basis:[{basis:J()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Kt]}],grow:[{grow:te()}],shrink:[{shrink:te()}],order:[{order:["first","last","none",wv,Kt]}],"grid-cols":[{"grid-cols":[Sv]}],"col-start-end":[{col:["auto",{span:["full",wv,Kt]},Kt]}],"col-start":[{"col-start":ue()}],"col-end":[{"col-end":ue()}],"grid-rows":[{"grid-rows":[Sv]}],"row-start-end":[{row:["auto",{span:[wv,Kt]},Kt]}],"row-start":[{"row-start":ue()}],"row-end":[{"row-end":ue()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Kt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Kt]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[M]}],px:[{px:[M]}],py:[{py:[M]}],ps:[{ps:[M]}],pe:[{pe:[M]}],pt:[{pt:[M]}],pr:[{pr:[M]}],pb:[{pb:[M]}],pl:[{pl:[M]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Kt,e]}],"min-w":[{"min-w":[Kt,e,"min","max","fit"]}],"max-w":[{"max-w":[Kt,e,"none","full","min","max","fit","prose",{screen:[wu]},wu]}],h:[{h:[Kt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Kt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Kt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Kt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",wu,xu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",YC]}],"font-family":[{font:[Sv]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Kt]}],"line-clamp":[{"line-clamp":["none",Qp,YC]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",fc,Kt]}],"list-image":[{"list-image":["none",Kt]}],"list-style-type":[{list:["none","disc","decimal",Kt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",fc,xu]}],"underline-offset":[{"underline-offset":["auto",fc,Kt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Kt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Kt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ie(),fK]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",dK]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},pK]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[k]}],"gradient-via-pos":[{via:[k]}],"gradient-to-pos":[{to:[k]}],"gradient-from":[{from:[S]}],"gradient-via":[{via:[S]}],"gradient-to":[{to:[S]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...se(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:se()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...se()]}],"outline-offset":[{"outline-offset":[fc,Kt]}],"outline-w":[{outline:[fc,xu]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:me()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[fc,xu]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",wu,mK]}],"shadow-color":[{shadow:[Sv]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...xe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":xe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",wu,Kt]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[m]}],saturate:[{saturate:[A]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[A]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Kt]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",Kt]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",Kt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[wv,Kt]}],"translate-x":[{"translate-x":[V]}],"translate-y":[{"translate-y":[V]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Kt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Kt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Kt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[fc,xu,YC]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},xK=tK(bK);function nn(...t){return xK(QL(t))}const wK=V7,cy=({delayDuration:t=10,...e})=>b.jsx(B7,{delayDuration:t,...e}),uy=z7,Cm=w.forwardRef(({className:t,sideOffset:e=4,size:n="md",...r},i)=>{const s={sm:"w-[180px]",md:"w-[320px]",lg:"w-[460px]"}[n];return b.jsx(GL,{ref:i,sideOffset:e,className:nn("z-50 overflow-hidden rounded-md border bg-popover px-12 py-[6px] text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t,s),...r})});Cm.displayName=GL.displayName;var qy=t=>t.type==="checkbox",xf=t=>t instanceof Date,Ds=t=>t==null;const n2=t=>typeof t=="object";var Gr=t=>!Ds(t)&&!Array.isArray(t)&&n2(t)&&!xf(t),r2=t=>Gr(t)&&t.target?qy(t.target)?t.target.checked:t.target.value:t,SK=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,i2=(t,e)=>t.has(SK(e)),CK=t=>{const e=t.constructor&&t.constructor.prototype;return Gr(e)&&e.hasOwnProperty("isPrototypeOf")},UE=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ti(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(UE&&(t instanceof Blob||r))&&(n||Gr(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!CK(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=ti(t[i]));else return t;return e}var qw=t=>/^\w*$/.test(t),Cr=t=>t===void 0,VE=t=>Array.isArray(t)?t.filter(Boolean):[],BE=t=>VE(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ze=(t,e,n)=>{if(!e||!Gr(t))return n;const r=(qw(e)?[e]:BE(e)).reduce((i,s)=>Ds(i)?i:i[s],t);return Cr(r)||r===t?Cr(t[e])?n:t[e]:r},uo=t=>typeof t=="boolean",Fn=(t,e,n)=>{let r=-1;const i=qw(e)?[e]:BE(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let u=n;if(r!==o){const f=t[a];u=Gr(f)||Array.isArray(f)?f:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=u,t=t[a]}};const qx={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},wa={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},hc={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},zE=Re.createContext(null);zE.displayName="HookFormContext";const Kw=()=>Re.useContext(zE),kK=t=>{const{children:e,...n}=t;return Re.createElement(zE.Provider,{value:n},e)};var s2=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==wa.all&&(e._proxyFormState[o]=!r||wa.all),n&&(n[o]=!0),t[o]}});return i};const $E=typeof window<"u"?Re.useLayoutEffect:Re.useEffect;function TK(t){const e=Kw(),{control:n=e.control,disabled:r,name:i,exact:s}=t||{},[o,a]=Re.useState(n._formState),u=Re.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return $E(()=>n._subscribe({name:i,formState:u.current,exact:s,callback:f=>{!r&&a({...n._formState,...f})}}),[i,r,s]),Re.useEffect(()=>{u.current.isValid&&n._setValid(!0)},[n]),Re.useMemo(()=>s2(o,n,u.current,!1),[o,n])}var ho=t=>typeof t=="string",o2=(t,e,n,r,i)=>ho(t)?(r&&e.watch.add(t),Ze(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),Ze(n,s))):(r&&(e.watchAll=!0),n),MT=t=>Ds(t)||!n2(t);function Sc(t,e,n=new WeakSet){if(MT(t)||MT(e))return t===e;if(xf(t)&&xf(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const s of r){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(xf(o)&&xf(a)||Gr(o)&&Gr(a)||Array.isArray(o)&&Array.isArray(a)?!Sc(o,a,n):o!==a)return!1}}return!0}function EK(t){const e=Kw(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o,compute:a}=t||{},u=Re.useRef(i),f=Re.useRef(a),h=Re.useRef(void 0);f.current=a;const m=Re.useMemo(()=>n._getWatch(r,u.current),[n,r]),[v,S]=Re.useState(f.current?f.current(m):m);return $E(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:k=>{if(!s){const C=o2(r,n._names,k.values||n._formValues,!1,u.current);if(f.current){const E=f.current(C);Sc(E,h.current)||(S(E),h.current=E)}else S(C)}}}),[n,s,r,o]),Re.useEffect(()=>n._removeUnmounted()),v}function _K(t){const e=Kw(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s,defaultValue:o}=t,a=i2(i._names.array,n),u=Re.useMemo(()=>Ze(i._formValues,n,Ze(i._defaultValues,n,o)),[i,n,o]),f=EK({control:i,name:n,defaultValue:u,exact:!0}),h=TK({control:i,name:n,exact:!0}),m=Re.useRef(t),v=Re.useRef(void 0),S=Re.useRef(i.register(n,{...t.rules,value:f,...uo(t.disabled)?{disabled:t.disabled}:{}}));m.current=t;const k=Re.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ze(h.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ze(h.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ze(h.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Ze(h.validatingFields,n)},error:{enumerable:!0,get:()=>Ze(h.errors,n)}}),[h,n]),C=Re.useCallback(A=>S.current.onChange({target:{value:r2(A),name:n},type:qx.CHANGE}),[n]),E=Re.useCallback(()=>S.current.onBlur({target:{value:Ze(i._formValues,n),name:n},type:qx.BLUR}),[n,i._formValues]),_=Re.useCallback(A=>{const I=Ze(i._fields,n);I&&A&&(I._f.ref={focus:()=>A.focus&&A.focus(),select:()=>A.select&&A.select(),setCustomValidity:N=>A.setCustomValidity(N),reportValidity:()=>A.reportValidity()})},[i._fields,n]),M=Re.useMemo(()=>({name:n,value:f,...uo(r)||h.disabled?{disabled:h.disabled||r}:{},onChange:C,onBlur:E,ref:_}),[n,r,h.disabled,C,E,_,f]);return Re.useEffect(()=>{const A=i._options.shouldUnregister||s,I=v.current;I&&I!==n&&!a&&i.unregister(I),i.register(n,{...m.current.rules,...uo(m.current.disabled)?{disabled:m.current.disabled}:{}});const N=(O,j)=>{const V=Ze(i._fields,O);V&&V._f&&(V._f.mount=j)};if(N(n,!0),A){const O=ti(Ze(i._options.defaultValues,n,m.current.defaultValue));Fn(i._defaultValues,n,O),Cr(Ze(i._formValues,n))&&Fn(i._formValues,n,O)}return!a&&i.register(n),v.current=n,()=>{(a?A&&!i._state.action:A)?i.unregister(n):N(n,!1)}},[n,i,a,s]),Re.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),Re.useMemo(()=>({field:M,formState:h,fieldState:k}),[M,h,k])}const PK=t=>t.render(_K(t));var a2=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},Wv=t=>Array.isArray(t)?t:[t],kI=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function l2(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r],s=e[r];if(i&&Gr(i)&&s){const o=l2(i,s);Gr(o)&&(n[r]=o)}else t[r]&&(n[r]=s)}return n}var Ns=t=>Gr(t)&&!Object.keys(t).length,WE=t=>t.type==="file",Sa=t=>typeof t=="function",Kx=t=>{if(!UE)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},c2=t=>t.type==="select-multiple",HE=t=>t.type==="radio",RK=t=>HE(t)||qy(t),QC=t=>Kx(t)&&t.isConnected;function IK(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Cr(t)?r++:t[e[r++]];return t}function MK(t){for(const e in t)if(t.hasOwnProperty(e)&&!Cr(t[e]))return!1;return!0}function Wr(t,e){const n=Array.isArray(e)?e:qw(e)?[e]:BE(e),r=n.length===1?t:IK(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Gr(r)&&Ns(r)||Array.isArray(r)&&MK(r))&&Wr(t,n.slice(0,-1)),t}var AK=t=>{for(const e in t)if(Sa(t[e]))return!0;return!1};function u2(t){return Array.isArray(t)||Gr(t)&&!AK(t)}function AT(t,e={}){for(const n in t)u2(t[n])?(e[n]=Array.isArray(t[n])?[]:{},AT(t[n],e[n])):Cr(t[n])||(e[n]=!0);return e}function Lp(t,e,n){n||(n=AT(e));for(const r in t)u2(t[r])?Cr(e)||MT(n[r])?n[r]=AT(t[r],Array.isArray(t[r])?[]:{}):Lp(t[r],Ds(e)?{}:e[r],n[r]):n[r]=!Sc(t[r],e[r]);return n}const TI={value:!1,isValid:!1},EI={value:!0,isValid:!0};var d2=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Cr(t[0].attributes.value)?Cr(t[0].value)||t[0].value===""?EI:{value:t[0].value,isValid:!0}:EI:TI}return TI},f2=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Cr(t)?t:e?t===""?NaN:t&&+t:n&&ho(t)?new Date(t):r?r(t):t;const _I={isValid:!1,value:null};var h2=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,_I):_I;function PI(t){const e=t.ref;return WE(e)?e.files:HE(e)?h2(t.refs).value:c2(e)?[...e.selectedOptions].map(({value:n})=>n):qy(e)?d2(t.refs).value:f2(Cr(e.value)?t.ref.value:e.value,t)}var NK=(t,e,n,r)=>{const i={};for(const s of t){const o=Ze(e,s);o&&Fn(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Gx=t=>t instanceof RegExp,Cv=t=>Cr(t)?t:Gx(t)?t.source:Gr(t)?Gx(t.value)?t.value.source:t.value:t,RI=t=>({isOnSubmit:!t||t===wa.onSubmit,isOnBlur:t===wa.onBlur,isOnChange:t===wa.onChange,isOnAll:t===wa.all,isOnTouch:t===wa.onTouched});const II="AsyncFunction";var OK=t=>!!t&&!!t.validate&&!!(Sa(t.validate)&&t.validate.constructor.name===II||Gr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===II)),DK=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),MI=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Hv=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=Ze(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Hv(a,e))break}else if(Gr(a)&&Hv(a,e))break}}};function AI(t,e,n){const r=Ze(t,n);if(r||qw(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=Ze(e,s),a=Ze(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:n}}var LK=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return Ns(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||wa.all))},jK=(t,e,n)=>!t||!e||t===e||Wv(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),FK=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,UK=(t,e)=>!VE(Ze(t,e)).length&&Wr(t,e),VK=(t,e,n)=>{const r=Wv(Ze(t,n));return Fn(r,"root",e[n]),Fn(t,n,r),t};function NI(t,e,n="validate"){if(ho(t)||Array.isArray(t)&&t.every(ho)||uo(t)&&!t)return{type:n,message:ho(t)?t:"",ref:e}}var Ep=t=>Gr(t)&&!Gx(t)?t:{value:t,message:""},OI=async(t,e,n,r,i,s)=>{const{ref:o,refs:a,required:u,maxLength:f,minLength:h,min:m,max:v,pattern:S,validate:k,name:C,valueAsNumber:E,mount:_}=t._f,M=Ze(n,C);if(!_||e.has(C))return{};const A=a?a[0]:o,I=Y=>{i&&A.reportValidity&&(A.setCustomValidity(uo(Y)?"":Y||""),A.reportValidity())},N={},O=HE(o),j=qy(o),V=O||j,z=(E||WE(o))&&Cr(o.value)&&Cr(M)||Kx(o)&&o.value===""||M===""||Array.isArray(M)&&!M.length,W=a2.bind(null,C,r,N),J=(Y,me,ue,Ie=hc.maxLength,se=hc.minLength)=>{const xe=Y?me:ue;N[C]={type:Y?Ie:se,message:xe,ref:o,...W(Y?Ie:se,xe)}};if(s?!Array.isArray(M)||!M.length:u&&(!V&&(z||Ds(M))||uo(M)&&!M||j&&!d2(a).isValid||O&&!h2(a).isValid)){const{value:Y,message:me}=ho(u)?{value:!!u,message:u}:Ep(u);if(Y&&(N[C]={type:hc.required,message:me,ref:A,...W(hc.required,me)},!r))return I(me),N}if(!z&&(!Ds(m)||!Ds(v))){let Y,me;const ue=Ep(v),Ie=Ep(m);if(!Ds(M)&&!isNaN(M)){const se=o.valueAsNumber||M&&+M;Ds(ue.value)||(Y=se>ue.value),Ds(Ie.value)||(me=se<Ie.value)}else{const se=o.valueAsDate||new Date(M),xe=ae=>new Date(new Date().toDateString()+" "+ae),q=o.type=="time",te=o.type=="week";ho(ue.value)&&M&&(Y=q?xe(M)>xe(ue.value):te?M>ue.value:se>new Date(ue.value)),ho(Ie.value)&&M&&(me=q?xe(M)<xe(Ie.value):te?M<Ie.value:se<new Date(Ie.value))}if((Y||me)&&(J(!!Y,ue.message,Ie.message,hc.max,hc.min),!r))return I(N[C].message),N}if((f||h)&&!z&&(ho(M)||s&&Array.isArray(M))){const Y=Ep(f),me=Ep(h),ue=!Ds(Y.value)&&M.length>+Y.value,Ie=!Ds(me.value)&&M.length<+me.value;if((ue||Ie)&&(J(ue,Y.message,me.message),!r))return I(N[C].message),N}if(S&&!z&&ho(M)){const{value:Y,message:me}=Ep(S);if(Gx(Y)&&!M.match(Y)&&(N[C]={type:hc.pattern,message:me,ref:o,...W(hc.pattern,me)},!r))return I(me),N}if(k){if(Sa(k)){const Y=await k(M,n),me=NI(Y,A);if(me&&(N[C]={...me,...W(hc.validate,me.message)},!r))return I(me.message),N}else if(Gr(k)){let Y={};for(const me in k){if(!Ns(Y)&&!r)break;const ue=NI(await k[me](M,n),A,me);ue&&(Y={...ue,...W(me,ue.message)},I(ue.message),r&&(N[C]=Y))}if(!Ns(Y)&&(N[C]={ref:A,...Y},!r))return N}}return I(!0),N};const BK={mode:wa.onSubmit,reValidateMode:wa.onChange,shouldFocusError:!0};function zK(t={}){let e={...BK,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Sa(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Gr(e.defaultValues)||Gr(e.values)?ti(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:ti(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,f=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...h};const v={array:kI(),state:kI()},S=e.criteriaMode===wa.all,k=Q=>le=>{clearTimeout(f),f=setTimeout(Q,le)},C=async Q=>{if(!e.disabled&&(h.isValid||m.isValid||Q)){const le=e.resolver?Ns((await j()).errors):await z(r,!0);le!==n.isValid&&v.state.next({isValid:le})}},E=(Q,le)=>{!e.disabled&&(h.isValidating||h.validatingFields||m.isValidating||m.validatingFields)&&((Q||Array.from(a.mount)).forEach(ye=>{ye&&(le?Fn(n.validatingFields,ye,le):Wr(n.validatingFields,ye))}),v.state.next({validatingFields:n.validatingFields,isValidating:!Ns(n.validatingFields)}))},_=(Q,le=[],ye,qe,Ge=!0,Be=!0)=>{if(qe&&ye&&!e.disabled){if(o.action=!0,Be&&Array.isArray(Ze(r,Q))){const Xe=ye(Ze(r,Q),qe.argA,qe.argB);Ge&&Fn(r,Q,Xe)}if(Be&&Array.isArray(Ze(n.errors,Q))){const Xe=ye(Ze(n.errors,Q),qe.argA,qe.argB);Ge&&Fn(n.errors,Q,Xe),UK(n.errors,Q)}if((h.touchedFields||m.touchedFields)&&Be&&Array.isArray(Ze(n.touchedFields,Q))){const Xe=ye(Ze(n.touchedFields,Q),qe.argA,qe.argB);Ge&&Fn(n.touchedFields,Q,Xe)}(h.dirtyFields||m.dirtyFields)&&(n.dirtyFields=Lp(i,s)),v.state.next({name:Q,isDirty:J(Q,le),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Fn(s,Q,le)},M=(Q,le)=>{Fn(n.errors,Q,le),v.state.next({errors:n.errors})},A=Q=>{n.errors=Q,v.state.next({errors:n.errors,isValid:!1})},I=(Q,le,ye,qe)=>{const Ge=Ze(r,Q);if(Ge){const Be=Ze(s,Q,Cr(ye)?Ze(i,Q):ye);Cr(Be)||qe&&qe.defaultChecked||le?Fn(s,Q,le?Be:PI(Ge._f)):ue(Q,Be),o.mount&&C()}},N=(Q,le,ye,qe,Ge)=>{let Be=!1,Xe=!1;const Ne={name:Q};if(!e.disabled){if(!ye||qe){(h.isDirty||m.isDirty)&&(Xe=n.isDirty,n.isDirty=Ne.isDirty=J(),Be=Xe!==Ne.isDirty);const ht=Sc(Ze(i,Q),le);Xe=!!Ze(n.dirtyFields,Q),ht?Wr(n.dirtyFields,Q):Fn(n.dirtyFields,Q,!0),Ne.dirtyFields=n.dirtyFields,Be=Be||(h.dirtyFields||m.dirtyFields)&&Xe!==!ht}if(ye){const ht=Ze(n.touchedFields,Q);ht||(Fn(n.touchedFields,Q,ye),Ne.touchedFields=n.touchedFields,Be=Be||(h.touchedFields||m.touchedFields)&&ht!==ye)}Be&&Ge&&v.state.next(Ne)}return Be?Ne:{}},O=(Q,le,ye,qe)=>{const Ge=Ze(n.errors,Q),Be=(h.isValid||m.isValid)&&uo(le)&&n.isValid!==le;if(e.delayError&&ye?(u=k(()=>M(Q,ye)),u(e.delayError)):(clearTimeout(f),u=null,ye?Fn(n.errors,Q,ye):Wr(n.errors,Q)),(ye?!Sc(Ge,ye):Ge)||!Ns(qe)||Be){const Xe={...qe,...Be&&uo(le)?{isValid:le}:{},errors:n.errors,name:Q};n={...n,...Xe},v.state.next(Xe)}},j=async Q=>{E(Q,!0);const le=await e.resolver(s,e.context,NK(Q||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return E(Q),le},V=async Q=>{const{errors:le}=await j(Q);if(Q)for(const ye of Q){const qe=Ze(le,ye);qe?Fn(n.errors,ye,qe):Wr(n.errors,ye)}else n.errors=le;return le},z=async(Q,le,ye={valid:!0})=>{for(const qe in Q){const Ge=Q[qe];if(Ge){const{_f:Be,...Xe}=Ge;if(Be){const Ne=a.array.has(Be.name),ht=Ge._f&&OK(Ge._f);ht&&h.validatingFields&&E([Be.name],!0);const $t=await OI(Ge,a.disabled,s,S,e.shouldUseNativeValidation&&!le,Ne);if(ht&&h.validatingFields&&E([Be.name]),$t[Be.name]&&(ye.valid=!1,le))break;!le&&(Ze($t,Be.name)?Ne?VK(n.errors,$t,Be.name):Fn(n.errors,Be.name,$t[Be.name]):Wr(n.errors,Be.name))}!Ns(Xe)&&await z(Xe,le,ye)}}return ye.valid},W=()=>{for(const Q of a.unMount){const le=Ze(r,Q);le&&(le._f.refs?le._f.refs.every(ye=>!QC(ye)):!QC(le._f.ref))&&de(Q)}a.unMount=new Set},J=(Q,le)=>!e.disabled&&(Q&&le&&Fn(s,Q,le),!Sc(ae(),i)),Y=(Q,le,ye)=>o2(Q,a,{...o.mount?s:Cr(le)?i:ho(Q)?{[Q]:le}:le},ye,le),me=Q=>VE(Ze(o.mount?s:i,Q,e.shouldUnregister?Ze(i,Q,[]):[])),ue=(Q,le,ye={})=>{const qe=Ze(r,Q);let Ge=le;if(qe){const Be=qe._f;Be&&(!Be.disabled&&Fn(s,Q,f2(le,Be)),Ge=Kx(Be.ref)&&Ds(le)?"":le,c2(Be.ref)?[...Be.ref.options].forEach(Xe=>Xe.selected=Ge.includes(Xe.value)):Be.refs?qy(Be.ref)?Be.refs.forEach(Xe=>{(!Xe.defaultChecked||!Xe.disabled)&&(Array.isArray(Ge)?Xe.checked=!!Ge.find(Ne=>Ne===Xe.value):Xe.checked=Ge===Xe.value||!!Ge)}):Be.refs.forEach(Xe=>Xe.checked=Xe.value===Ge):WE(Be.ref)?Be.ref.value="":(Be.ref.value=Ge,Be.ref.type||v.state.next({name:Q,values:ti(s)})))}(ye.shouldDirty||ye.shouldTouch)&&N(Q,Ge,ye.shouldTouch,ye.shouldDirty,!0),ye.shouldValidate&&te(Q)},Ie=(Q,le,ye)=>{for(const qe in le){if(!le.hasOwnProperty(qe))return;const Ge=le[qe],Be=Q+"."+qe,Xe=Ze(r,Be);(a.array.has(Q)||Gr(Ge)||Xe&&!Xe._f)&&!xf(Ge)?Ie(Be,Ge,ye):ue(Be,Ge,ye)}},se=(Q,le,ye={})=>{const qe=Ze(r,Q),Ge=a.array.has(Q),Be=ti(le);Fn(s,Q,Be),Ge?(v.array.next({name:Q,values:ti(s)}),(h.isDirty||h.dirtyFields||m.isDirty||m.dirtyFields)&&ye.shouldDirty&&v.state.next({name:Q,dirtyFields:Lp(i,s),isDirty:J(Q,Be)})):qe&&!qe._f&&!Ds(Be)?Ie(Q,Be,ye):ue(Q,Be,ye),MI(Q,a)&&v.state.next({...n,name:Q}),v.state.next({name:o.mount?Q:void 0,values:ti(s)})},xe=async Q=>{o.mount=!0;const le=Q.target;let ye=le.name,qe=!0;const Ge=Ze(r,ye),Be=ht=>{qe=Number.isNaN(ht)||xf(ht)&&isNaN(ht.getTime())||Sc(ht,Ze(s,ye,ht))},Xe=RI(e.mode),Ne=RI(e.reValidateMode);if(Ge){let ht,$t;const cn=le.type?PI(Ge._f):r2(Q),dn=Q.type===qx.BLUR||Q.type===qx.FOCUS_OUT,bt=!DK(Ge._f)&&!e.resolver&&!Ze(n.errors,ye)&&!Ge._f.deps||FK(dn,Ze(n.touchedFields,ye),n.isSubmitted,Ne,Xe),fn=MI(ye,a,dn);Fn(s,ye,cn),dn?(!le||!le.readOnly)&&(Ge._f.onBlur&&Ge._f.onBlur(Q),u&&u(0)):Ge._f.onChange&&Ge._f.onChange(Q);const _n=N(ye,cn,dn),or=!Ns(_n)||fn;if(!dn&&v.state.next({name:ye,type:Q.type,values:ti(s)}),bt)return(h.isValid||m.isValid)&&(e.mode==="onBlur"?dn&&C():dn||C()),or&&v.state.next({name:ye,...fn?{}:_n});if(!dn&&fn&&v.state.next({...n}),e.resolver){const{errors:ci}=await j([ye]);if(Be(cn),qe){const Ur=AI(n.errors,r,ye),Ci=AI(ci,r,Ur.name||ye);ht=Ci.error,ye=Ci.name,$t=Ns(ci)}}else E([ye],!0),ht=(await OI(Ge,a.disabled,s,S,e.shouldUseNativeValidation))[ye],E([ye]),Be(cn),qe&&(ht?$t=!1:(h.isValid||m.isValid)&&($t=await z(r,!0)));qe&&(Ge._f.deps&&(!Array.isArray(Ge._f.deps)||Ge._f.deps.length>0)&&te(Ge._f.deps),O(ye,$t,ht,_n))}},q=(Q,le)=>{if(Ze(n.errors,le)&&Q.focus)return Q.focus(),1},te=async(Q,le={})=>{let ye,qe;const Ge=Wv(Q);if(e.resolver){const Be=await V(Cr(Q)?Q:Ge);ye=Ns(Be),qe=Q?!Ge.some(Xe=>Ze(Be,Xe)):ye}else Q?(qe=(await Promise.all(Ge.map(async Be=>{const Xe=Ze(r,Be);return await z(Xe&&Xe._f?{[Be]:Xe}:Xe)}))).every(Boolean),!(!qe&&!n.isValid)&&C()):qe=ye=await z(r);return v.state.next({...!ho(Q)||(h.isValid||m.isValid)&&ye!==n.isValid?{}:{name:Q},...e.resolver||!Q?{isValid:ye}:{},errors:n.errors}),le.shouldFocus&&!qe&&Hv(r,q,Q?Ge:a.mount),qe},ae=(Q,le)=>{let ye={...o.mount?s:i};return le&&(ye=l2(le.dirtyFields?n.dirtyFields:n.touchedFields,ye)),Cr(Q)?ye:ho(Q)?Ze(ye,Q):Q.map(qe=>Ze(ye,qe))},B=(Q,le)=>({invalid:!!Ze((le||n).errors,Q),isDirty:!!Ze((le||n).dirtyFields,Q),error:Ze((le||n).errors,Q),isValidating:!!Ze(n.validatingFields,Q),isTouched:!!Ze((le||n).touchedFields,Q)}),fe=Q=>{Q&&Wv(Q).forEach(le=>Wr(n.errors,le)),v.state.next({errors:Q?n.errors:{}})},ie=(Q,le,ye)=>{const qe=(Ze(r,Q,{_f:{}})._f||{}).ref,Ge=Ze(n.errors,Q)||{},{ref:Be,message:Xe,type:Ne,...ht}=Ge;Fn(n.errors,Q,{...ht,...le,ref:qe}),v.state.next({name:Q,errors:n.errors,isValid:!1}),ye&&ye.shouldFocus&&qe&&qe.focus&&qe.focus()},pe=(Q,le)=>Sa(Q)?v.state.subscribe({next:ye=>"values"in ye&&Q(Y(void 0,le),ye)}):Y(Q,le,!0),ke=Q=>v.state.subscribe({next:le=>{jK(Q.name,le.name,Q.exact)&&LK(le,Q.formState||h,ln,Q.reRenderRoot)&&Q.callback({values:{...s},...n,...le,defaultValues:i})}}).unsubscribe,Pe=Q=>(o.mount=!0,m={...m,...Q.formState},ke({...Q,formState:m})),de=(Q,le={})=>{for(const ye of Q?Wv(Q):a.mount)a.mount.delete(ye),a.array.delete(ye),le.keepValue||(Wr(r,ye),Wr(s,ye)),!le.keepError&&Wr(n.errors,ye),!le.keepDirty&&Wr(n.dirtyFields,ye),!le.keepTouched&&Wr(n.touchedFields,ye),!le.keepIsValidating&&Wr(n.validatingFields,ye),!e.shouldUnregister&&!le.keepDefaultValue&&Wr(i,ye);v.state.next({values:ti(s)}),v.state.next({...n,...le.keepDirty?{isDirty:J()}:{}}),!le.keepIsValid&&C()},ge=({disabled:Q,name:le})=>{(uo(Q)&&o.mount||Q||a.disabled.has(le))&&(Q?a.disabled.add(le):a.disabled.delete(le))},_e=(Q,le={})=>{let ye=Ze(r,Q);const qe=uo(le.disabled)||uo(e.disabled);return Fn(r,Q,{...ye||{},_f:{...ye&&ye._f?ye._f:{ref:{name:Q}},name:Q,mount:!0,...le}}),a.mount.add(Q),ye?ge({disabled:uo(le.disabled)?le.disabled:e.disabled,name:Q}):I(Q,!0,le.value),{...qe?{disabled:le.disabled||e.disabled}:{},...e.progressive?{required:!!le.required,min:Cv(le.min),max:Cv(le.max),minLength:Cv(le.minLength),maxLength:Cv(le.maxLength),pattern:Cv(le.pattern)}:{},name:Q,onChange:xe,onBlur:xe,ref:Ge=>{if(Ge){_e(Q,le),ye=Ze(r,Q);const Be=Cr(Ge.value)&&Ge.querySelectorAll&&Ge.querySelectorAll("input,select,textarea")[0]||Ge,Xe=RK(Be),Ne=ye._f.refs||[];if(Xe?Ne.find(ht=>ht===Be):Be===ye._f.ref)return;Fn(r,Q,{_f:{...ye._f,...Xe?{refs:[...Ne.filter(QC),Be,...Array.isArray(Ze(i,Q))?[{}]:[]],ref:{type:Be.type,name:Q}}:{ref:Be}}}),I(Q,!1,void 0,Be)}else ye=Ze(r,Q,{}),ye._f&&(ye._f.mount=!1),(e.shouldUnregister||le.shouldUnregister)&&!(i2(a.array,Q)&&o.action)&&a.unMount.add(Q)}}},We=()=>e.shouldFocusError&&Hv(r,q,a.mount),dt=Q=>{uo(Q)&&(v.state.next({disabled:Q}),Hv(r,(le,ye)=>{const qe=Ze(r,ye);qe&&(le.disabled=qe._f.disabled||Q,Array.isArray(qe._f.refs)&&qe._f.refs.forEach(Ge=>{Ge.disabled=qe._f.disabled||Q}))},0,!1))},mt=(Q,le)=>async ye=>{let qe;ye&&(ye.preventDefault&&ye.preventDefault(),ye.persist&&ye.persist());let Ge=ti(s);if(v.state.next({isSubmitting:!0}),e.resolver){const{errors:Be,values:Xe}=await j();n.errors=Be,Ge=ti(Xe)}else await z(r);if(a.disabled.size)for(const Be of a.disabled)Wr(Ge,Be);if(Wr(n.errors,"root"),Ns(n.errors)){v.state.next({errors:{}});try{await Q(Ge,ye)}catch(Be){qe=Be}}else le&&await le({...n.errors},ye),We(),setTimeout(We);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ns(n.errors)&&!qe,submitCount:n.submitCount+1,errors:n.errors}),qe)throw qe},Et=(Q,le={})=>{Ze(r,Q)&&(Cr(le.defaultValue)?se(Q,ti(Ze(i,Q))):(se(Q,le.defaultValue),Fn(i,Q,ti(le.defaultValue))),le.keepTouched||Wr(n.touchedFields,Q),le.keepDirty||(Wr(n.dirtyFields,Q),n.isDirty=le.defaultValue?J(Q,ti(Ze(i,Q))):J()),le.keepError||(Wr(n.errors,Q),h.isValid&&C()),v.state.next({...n}))},Ct=(Q,le={})=>{const ye=Q?ti(Q):i,qe=ti(ye),Ge=Ns(Q),Be=Ge?i:qe;if(le.keepDefaultValues||(i=ye),!le.keepValues){if(le.keepDirtyValues){const Xe=new Set([...a.mount,...Object.keys(Lp(i,s))]);for(const Ne of Array.from(Xe))Ze(n.dirtyFields,Ne)?Fn(Be,Ne,Ze(s,Ne)):se(Ne,Ze(Be,Ne))}else{if(UE&&Cr(Q))for(const Xe of a.mount){const Ne=Ze(r,Xe);if(Ne&&Ne._f){const ht=Array.isArray(Ne._f.refs)?Ne._f.refs[0]:Ne._f.ref;if(Kx(ht)){const $t=ht.closest("form");if($t){$t.reset();break}}}}if(le.keepFieldsRef)for(const Xe of a.mount)se(Xe,Ze(Be,Xe));else r={}}s=e.shouldUnregister?le.keepDefaultValues?ti(i):{}:ti(Be),v.array.next({values:{...Be}}),v.state.next({values:{...Be}})}a={mount:le.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!le.keepIsValid||!!le.keepDirtyValues,o.watch=!!e.shouldUnregister,v.state.next({submitCount:le.keepSubmitCount?n.submitCount:0,isDirty:Ge?!1:le.keepDirty?n.isDirty:!!(le.keepDefaultValues&&!Sc(Q,i)),isSubmitted:le.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ge?{}:le.keepDirtyValues?le.keepDefaultValues&&s?Lp(i,s):n.dirtyFields:le.keepDefaultValues&&Q?Lp(i,Q):le.keepDirty?n.dirtyFields:{},touchedFields:le.keepTouched?n.touchedFields:{},errors:le.keepErrors?n.errors:{},isSubmitSuccessful:le.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},jn=(Q,le)=>Ct(Sa(Q)?Q(s):Q,le),wn=(Q,le={})=>{const ye=Ze(r,Q),qe=ye&&ye._f;if(qe){const Ge=qe.refs?qe.refs[0]:qe.ref;Ge.focus&&(Ge.focus(),le.shouldSelect&&Sa(Ge.select)&&Ge.select())}},ln=Q=>{n={...n,...Q}},En={control:{register:_e,unregister:de,getFieldState:B,handleSubmit:mt,setError:ie,_subscribe:ke,_runSchema:j,_focusError:We,_getWatch:Y,_getDirty:J,_setValid:C,_setFieldArray:_,_setDisabledField:ge,_setErrors:A,_getFieldArray:me,_reset:Ct,_resetDefaultValues:()=>Sa(e.defaultValues)&&e.defaultValues().then(Q=>{jn(Q,e.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:W,_disableForm:dt,_subjects:v,_proxyFormState:h,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(Q){o=Q},get _defaultValues(){return i},get _names(){return a},set _names(Q){a=Q},get _formState(){return n},get _options(){return e},set _options(Q){e={...e,...Q}}},subscribe:Pe,trigger:te,register:_e,handleSubmit:mt,watch:pe,setValue:se,getValues:ae,reset:jn,resetField:Et,clearErrors:fe,unregister:de,setError:ie,setFocus:wn,getFieldState:B};return{...En,formControl:En}}function Gw(t={}){const e=Re.useRef(void 0),n=Re.useRef(void 0),[r,i]=Re.useState({isDirty:!1,isValidating:!1,isLoading:Sa(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Sa(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Sa(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=zK(t);e.current={...a,formState:r}}const s=e.current.control;return s._options=t,$E(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),Re.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Re.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),Re.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),Re.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),Re.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),Re.useEffect(()=>{t.values&&!Sc(t.values,n.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[s,t.values]),Re.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=s2(r,s),e.current}var JC,DI;function $K(){if(DI)return JC;DI=1;var t="Expected a function",e=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,u=typeof Wu=="object"&&Wu&&Wu.Object===Object&&Wu,f=typeof self=="object"&&self&&self.Object===Object&&self,h=u||f||Function("return this")(),m=Object.prototype,v=m.toString,S=Math.max,k=Math.min,C=function(){return h.Date.now()};function E(N,O,j){var V,z,W,J,Y,me,ue=0,Ie=!1,se=!1,xe=!0;if(typeof N!="function")throw new TypeError(t);O=I(O)||0,_(j)&&(Ie=!!j.leading,se="maxWait"in j,W=se?S(I(j.maxWait)||0,O):W,xe="trailing"in j?!!j.trailing:xe);function q(de){var ge=V,_e=z;return V=z=void 0,ue=de,J=N.apply(_e,ge),J}function te(de){return ue=de,Y=setTimeout(fe,O),Ie?q(de):J}function ae(de){var ge=de-me,_e=de-ue,We=O-ge;return se?k(We,W-_e):We}function B(de){var ge=de-me,_e=de-ue;return me===void 0||ge>=O||ge<0||se&&_e>=W}function fe(){var de=C();if(B(de))return ie(de);Y=setTimeout(fe,ae(de))}function ie(de){return Y=void 0,xe&&V?q(de):(V=z=void 0,J)}function pe(){Y!==void 0&&clearTimeout(Y),ue=0,V=me=z=Y=void 0}function ke(){return Y===void 0?J:ie(C())}function Pe(){var de=C(),ge=B(de);if(V=arguments,z=this,me=de,ge){if(Y===void 0)return te(me);if(se)return Y=setTimeout(fe,O),q(me)}return Y===void 0&&(Y=setTimeout(fe,O)),J}return Pe.cancel=pe,Pe.flush=ke,Pe}function _(N){var O=typeof N;return!!N&&(O=="object"||O=="function")}function M(N){return!!N&&typeof N=="object"}function A(N){return typeof N=="symbol"||M(N)&&v.call(N)==n}function I(N){if(typeof N=="number")return N;if(A(N))return e;if(_(N)){var O=typeof N.valueOf=="function"?N.valueOf():N;N=_(O)?O+"":O}if(typeof N!="string")return N===0?N:+N;N=N.replace(r,"");var j=s.test(N);return j||o.test(N)?a(N.slice(2),j?2:8):i.test(N)?e:+N}return JC=E,JC}$K();function WK(t=!1){if(typeof t!="boolean")throw new Error("defaultValue must be `true` or `false`");const[e,n]=w.useState(t),r=w.useCallback(()=>{n(!0)},[]),i=w.useCallback(()=>{n(!1)},[]),s=w.useCallback(()=>{n(o=>!o)},[]);return{value:e,setValue:n,setTrue:r,setFalse:i,toggle:s}}var qE=typeof window<"u"?w.useLayoutEffect:w.useEffect;function LI(t,e,n,r){const i=w.useRef(e);qE(()=>{i.current=e},[e]),w.useEffect(()=>{const s=(n==null?void 0:n.current)??window;if(!(s&&s.addEventListener))return;const o=a=>{i.current(a)};return s.addEventListener(t,o,r),()=>{s.removeEventListener(t,o,r)}},[t,n,r])}function HK(){const[t,e]=w.useState(null),n=w.useCallback(async r=>{if(!(navigator!=null&&navigator.clipboard))return console.warn("Clipboard not supported"),!1;try{return await navigator.clipboard.writeText(r),e(r),!0}catch(i){return console.warn("Copy failed",i),e(null),!1}},[]);return[t,n]}function qK(t){const[e,n]=w.useState(t??0),r=w.useCallback(()=>{n(o=>o+1)},[]),i=w.useCallback(()=>{n(o=>o-1)},[]),s=w.useCallback(()=>{n(t??0)},[t]);return{count:e,increment:r,decrement:i,reset:s,setCount:n}}function KK(t,e){const n=w.useRef(t);qE(()=>{n.current=t},[t]),w.useEffect(()=>{if(e===null)return;const r=setInterval(()=>{n.current()},e);return()=>{clearInterval(r)}},[e])}function KE({countStart:t,countStop:e=0,intervalMs:n=1e3,isIncrement:r=!1}){const{count:i,increment:s,decrement:o,reset:a}=qK(t),{value:u,setTrue:f,setFalse:h}=WK(!1),m=w.useCallback(()=>{h(),a()},[h,a]),v=w.useCallback(()=>{if(i===e){h();return}r?s():o()},[i,e,o,s,r,h]);return KK(v,u?n:null),[i,{startCountdown:f,stopCountdown:h,resetCountdown:m}]}var GK=typeof window>"u";function YK(t,{defaultValue:e=!1,initializeWithValue:n=!0}={}){const r=a=>GK?e:window.matchMedia(a).matches,[i,s]=w.useState(()=>n?r(t):e);function o(){s(r(t))}return qE(()=>{const a=window.matchMedia(t);return o(),a.addListener?a.addListener(o):a.addEventListener("change",o),()=>{a.removeListener?a.removeListener(o):a.removeEventListener("change",o)}},[t]),i}function QK(t){const[e,n]=w.useState(!1),r=()=>{n(!0)},i=()=>{n(!1)};return LI("mouseenter",r,t),LI("mouseleave",i,t),e}function JK(){const t=w.useRef(!1);return w.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),w.useCallback(()=>t.current,[])}var jI={width:void 0,height:void 0};function XK(t){const{ref:e,box:n="content-box"}=t,[{width:r,height:i},s]=w.useState(jI),o=JK(),a=w.useRef({...jI}),u=w.useRef(void 0);return u.current=t.onResize,w.useEffect(()=>{if(!e.current||typeof window>"u"||!("ResizeObserver"in window))return;const f=new ResizeObserver(([h])=>{const m=n==="border-box"?"borderBoxSize":n==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",v=FI(h,m,"inlineSize"),S=FI(h,m,"blockSize");if(a.current.width!==v||a.current.height!==S){const C={width:v,height:S};a.current.width=v,a.current.height=S,u.current?u.current(C):o()&&s(C)}});return f.observe(e.current,{box:n}),()=>{f.disconnect()}},[n,e,o]),{width:r,height:i}}function FI(t,e,n){return t[e]?Array.isArray(t[e])?t[e][0][n]:t[e][n]:e==="contentBoxSize"?t.contentRect[n==="inlineSize"?"width":"height"]:void 0}const GE=w.createContext({});function YE(t){const e=w.useRef(null);return e.current===null&&(e.current=t()),e.current}const QE=typeof window<"u",p2=QE?w.useLayoutEffect:w.useEffect,Yw=w.createContext(null);function JE(t,e){t.indexOf(e)===-1&&t.push(e)}function XE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Mc=(t,e,n)=>n>e?e:n<t?t:n;let ZE=()=>{};const Ac={},m2=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function g2(t){return typeof t=="object"&&t!==null}const v2=t=>/^0[^.\s]+$/u.test(t);function e_(t){let e;return()=>(e===void 0&&(e=t()),e)}const Go=t=>t,ZK=(t,e)=>n=>e(t(n)),Ky=(...t)=>t.reduce(ZK),dy=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class t_{constructor(){this.subscriptions=[]}add(e){return JE(this.subscriptions,e),()=>XE(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const wl=t=>t*1e3,qo=t=>t/1e3;function y2(t,e){return e?t*(1e3/e):0}const b2=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,eG=1e-7,tG=12;function nG(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=b2(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>eG&&++a<tG);return o}function Gy(t,e,n,r){if(t===e&&n===r)return Go;const i=s=>nG(s,0,1,t,n);return s=>s===0||s===1?s:b2(i(s),e,r)}const x2=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,w2=t=>e=>1-t(1-e),S2=Gy(.33,1.53,.69,.99),n_=w2(S2),C2=x2(n_),k2=t=>(t*=2)<1?.5*n_(t):.5*(2-Math.pow(2,-10*(t-1))),r_=t=>1-Math.sin(Math.acos(t)),T2=w2(r_),E2=x2(r_),rG=Gy(.42,0,1,1),iG=Gy(0,0,.58,1),_2=Gy(.42,0,.58,1),sG=t=>Array.isArray(t)&&typeof t[0]!="number",P2=t=>Array.isArray(t)&&typeof t[0]=="number",oG={linear:Go,easeIn:rG,easeInOut:_2,easeOut:iG,circIn:r_,circInOut:E2,circOut:T2,backIn:n_,backInOut:C2,backOut:S2,anticipate:k2},aG=t=>typeof t=="string",UI=t=>{if(P2(t)){ZE(t.length===4);const[e,n,r,i]=t;return Gy(e,n,r,i)}else if(aG(t))return oG[t];return t},Vb=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function lG(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(f.schedule(h),t()),h(a)}const f={schedule:(h,m=!1,v=!1)=>{const k=v&&i?n:r;return m&&o.add(h),k.has(h)||k.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(a=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,s&&(s=!1,f.process(h))}};return f}const cG=40;function R2(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Vb.reduce((A,I)=>(A[I]=lG(s),A),{}),{setup:a,read:u,resolveKeyframes:f,preUpdate:h,update:m,preRender:v,render:S,postRender:k}=o,C=()=>{const A=Ac.useManualTiming?i.timestamp:performance.now();n=!1,Ac.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(A-i.timestamp,cG),1)),i.timestamp=A,i.isProcessing=!0,a.process(i),u.process(i),f.process(i),h.process(i),m.process(i),v.process(i),S.process(i),k.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(C))},E=()=>{n=!0,r=!0,i.isProcessing||t(C)};return{schedule:Vb.reduce((A,I)=>{const N=o[I];return A[I]=(O,j=!1,V=!1)=>(n||E(),N.schedule(O,j,V)),A},{}),cancel:A=>{for(let I=0;I<Vb.length;I++)o[Vb[I]].cancel(A)},state:i,steps:o}}const{schedule:sr,cancel:rd,state:Oi,steps:XC}=R2(typeof requestAnimationFrame<"u"?requestAnimationFrame:Go,!0);let cx;function uG(){cx=void 0}const Fs={now:()=>(cx===void 0&&Fs.set(Oi.isProcessing||Ac.useManualTiming?Oi.timestamp:performance.now()),cx),set:t=>{cx=t,queueMicrotask(uG)}},I2=t=>e=>typeof e=="string"&&e.startsWith(t),i_=I2("--"),dG=I2("var(--"),s_=t=>dG(t)?fG.test(t.split("/*")[0].trim()):!1,fG=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,qm={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},fy={...qm,transform:t=>Mc(0,1,t)},Bb={...qm,default:1},qv=t=>Math.round(t*1e5)/1e5,o_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function hG(t){return t==null}const pG=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,a_=(t,e)=>n=>!!(typeof n=="string"&&pG.test(n)&&n.startsWith(t)||e&&!hG(n)&&Object.prototype.hasOwnProperty.call(n,e)),M2=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(o_);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},mG=t=>Mc(0,255,t),ZC={...qm,transform:t=>Math.round(mG(t))},wf={test:a_("rgb","red"),parse:M2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ZC.transform(t)+", "+ZC.transform(e)+", "+ZC.transform(n)+", "+qv(fy.transform(r))+")"};function gG(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const NT={test:a_("#"),parse:gG,transform:wf.transform},Yy=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Eu=Yy("deg"),Sl=Yy("%"),Lt=Yy("px"),vG=Yy("vh"),yG=Yy("vw"),VI={...Sl,parse:t=>Sl.parse(t)/100,transform:t=>Sl.transform(t*100)},Up={test:a_("hsl","hue"),parse:M2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Sl.transform(qv(e))+", "+Sl.transform(qv(n))+", "+qv(fy.transform(r))+")"},Hr={test:t=>wf.test(t)||NT.test(t)||Up.test(t),parse:t=>wf.test(t)?wf.parse(t):Up.test(t)?Up.parse(t):NT.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?wf.transform(t):Up.transform(t),getAnimatableNone:t=>{const e=Hr.parse(t);return e.alpha=0,Hr.transform(e)}},bG=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function xG(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(o_))==null?void 0:e.length)||0)+(((n=t.match(bG))==null?void 0:n.length)||0)>0}const A2="number",N2="color",wG="var",SG="var(",BI="${}",CG=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function hy(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(CG,u=>(Hr.test(u)?(r.color.push(s),i.push(N2),n.push(Hr.parse(u))):u.startsWith(SG)?(r.var.push(s),i.push(wG),n.push(u)):(r.number.push(s),i.push(A2),n.push(parseFloat(u))),++s,BI)).split(BI);return{values:n,split:a,indexes:r,types:i}}function O2(t){return hy(t).values}function D2(t){const{split:e,types:n}=hy(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===A2?s+=qv(i[o]):a===N2?s+=Hr.transform(i[o]):s+=i[o]}return s}}const kG=t=>typeof t=="number"?0:Hr.test(t)?Hr.getAnimatableNone(t):t;function TG(t){const e=O2(t);return D2(t)(e.map(kG))}const id={test:xG,parse:O2,createTransformer:D2,getAnimatableNone:TG};function ek(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function EG({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,u=2*n-a;i=ek(u,a,t+1/3),s=ek(u,a,t),o=ek(u,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Yx(t,e){return n=>n>0?e:t}const hr=(t,e,n)=>t+(e-t)*n,tk=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},_G=[NT,wf,Up],PG=t=>_G.find(e=>e.test(t));function zI(t){const e=PG(t);if(!e)return!1;let n=e.parse(t);return e===Up&&(n=EG(n)),n}const $I=(t,e)=>{const n=zI(t),r=zI(e);if(!n||!r)return Yx(t,e);const i={...n};return s=>(i.red=tk(n.red,r.red,s),i.green=tk(n.green,r.green,s),i.blue=tk(n.blue,r.blue,s),i.alpha=hr(n.alpha,r.alpha,s),wf.transform(i))},OT=new Set(["none","hidden"]);function RG(t,e){return OT.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function IG(t,e){return n=>hr(t,e,n)}function l_(t){return typeof t=="number"?IG:typeof t=="string"?s_(t)?Yx:Hr.test(t)?$I:NG:Array.isArray(t)?L2:typeof t=="object"?Hr.test(t)?$I:MG:Yx}function L2(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>l_(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function MG(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=l_(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function AG(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const NG=(t,e)=>{const n=id.createTransformer(e),r=hy(t),i=hy(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?OT.has(t)&&!i.values.length||OT.has(e)&&!r.values.length?RG(t,e):Ky(L2(AG(r,i),i.values),n):Yx(t,e)};function j2(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?hr(t,e,n):l_(t)(t,e)}const OG=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>sr.update(e,n),stop:()=>rd(e),now:()=>Oi.isProcessing?Oi.timestamp:Fs.now()}},F2=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Qx=2e4;function c_(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Qx;)e+=n,r=t.next(e);return e>=Qx?1/0:e}function DG(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(c_(r),Qx);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:qo(i)}}const LG=5;function U2(t,e,n){const r=Math.max(e-LG,0);return y2(n-t(r),e-r)}const wr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},WI=.001;function jG({duration:t=wr.duration,bounce:e=wr.bounce,velocity:n=wr.velocity,mass:r=wr.mass}){let i,s,o=1-e;o=Mc(wr.minDamping,wr.maxDamping,o),t=Mc(wr.minDuration,wr.maxDuration,qo(t)),o<1?(i=f=>{const h=f*o,m=h*t,v=h-n,S=DT(f,o),k=Math.exp(-m);return WI-v/S*k},s=f=>{const m=f*o*t,v=m*n+n,S=Math.pow(o,2)*Math.pow(f,2)*t,k=Math.exp(-m),C=DT(Math.pow(f,2),o);return(-i(f)+WI>0?-1:1)*((v-S)*k)/C}):(i=f=>{const h=Math.exp(-f*t),m=(f-n)*t+1;return-.001+h*m},s=f=>{const h=Math.exp(-f*t),m=(n-f)*(t*t);return h*m});const a=5/t,u=UG(i,s,a);if(t=wl(t),isNaN(u))return{stiffness:wr.stiffness,damping:wr.damping,duration:t};{const f=Math.pow(u,2)*r;return{stiffness:f,damping:o*2*Math.sqrt(r*f),duration:t}}}const FG=12;function UG(t,e,n){let r=n;for(let i=1;i<FG;i++)r=r-t(r)/e(r);return r}function DT(t,e){return t*Math.sqrt(1-e*e)}const VG=["duration","bounce"],BG=["stiffness","damping","mass"];function HI(t,e){return e.some(n=>t[n]!==void 0)}function zG(t){let e={velocity:wr.velocity,stiffness:wr.stiffness,damping:wr.damping,mass:wr.mass,isResolvedFromDuration:!1,...t};if(!HI(t,BG)&&HI(t,VG))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Mc(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:wr.mass,stiffness:i,damping:s}}else{const n=jG(t);e={...e,...n,mass:wr.mass},e.isResolvedFromDuration=!0}return e}function Jx(t=wr.visualDuration,e=wr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:u,damping:f,mass:h,duration:m,velocity:v,isResolvedFromDuration:S}=zG({...n,velocity:-qo(n.velocity||0)}),k=v||0,C=f/(2*Math.sqrt(u*h)),E=o-s,_=qo(Math.sqrt(u/h)),M=Math.abs(E)<5;r||(r=M?wr.restSpeed.granular:wr.restSpeed.default),i||(i=M?wr.restDelta.granular:wr.restDelta.default);let A;if(C<1){const N=DT(_,C);A=O=>{const j=Math.exp(-C*_*O);return o-j*((k+C*_*E)/N*Math.sin(N*O)+E*Math.cos(N*O))}}else if(C===1)A=N=>o-Math.exp(-_*N)*(E+(k+_*E)*N);else{const N=_*Math.sqrt(C*C-1);A=O=>{const j=Math.exp(-C*_*O),V=Math.min(N*O,300);return o-j*((k+C*_*E)*Math.sinh(V)+N*E*Math.cosh(V))/N}}const I={calculatedDuration:S&&m||null,next:N=>{const O=A(N);if(S)a.done=N>=m;else{let j=N===0?k:0;C<1&&(j=N===0?wl(k):U2(A,N,O));const V=Math.abs(j)<=r,z=Math.abs(o-O)<=i;a.done=V&&z}return a.value=a.done?o:O,a},toString:()=>{const N=Math.min(c_(I),Qx),O=F2(j=>I.next(N*j).value,N,30);return N+"ms "+O},toTransition:()=>{}};return I}Jx.applyToOptions=t=>{const e=DG(t,100,Jx);return t.ease=e.ease,t.duration=wl(e.duration),t.type="keyframes",t};function LT({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:u,restDelta:f=.5,restSpeed:h}){const m=t[0],v={done:!1,value:m},S=V=>a!==void 0&&V<a||u!==void 0&&V>u,k=V=>a===void 0?u:u===void 0||Math.abs(a-V)<Math.abs(u-V)?a:u;let C=n*e;const E=m+C,_=o===void 0?E:o(E);_!==E&&(C=_-m);const M=V=>-C*Math.exp(-V/r),A=V=>_+M(V),I=V=>{const z=M(V),W=A(V);v.done=Math.abs(z)<=f,v.value=v.done?_:W};let N,O;const j=V=>{S(v.value)&&(N=V,O=Jx({keyframes:[v.value,k(v.value)],velocity:U2(A,V,v.value),damping:i,stiffness:s,restDelta:f,restSpeed:h}))};return j(0),{calculatedDuration:null,next:V=>{let z=!1;return!O&&N===void 0&&(z=!0,I(V),j(V)),N!==void 0&&V>=N?O.next(V-N):(!z&&I(V),v)}}}function $G(t,e,n){const r=[],i=n||Ac.mix||j2,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Go:e;a=Ky(u,a)}r.push(a)}return r}function WG(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(ZE(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=$G(e,r,i),u=a.length,f=h=>{if(o&&h<t[0])return e[0];let m=0;if(u>1)for(;m<t.length-2&&!(h<t[m+1]);m++);const v=dy(t[m],t[m+1],h);return a[m](v)};return n?h=>f(Mc(t[0],t[s-1],h)):f}function HG(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=dy(0,e,r);t.push(hr(n,1,i))}}function qG(t){const e=[0];return HG(e,t.length-1),e}function KG(t,e){return t.map(n=>n*e)}function GG(t,e){return t.map(()=>e||_2).splice(0,t.length-1)}function Kv({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=sG(r)?r.map(UI):UI(r),s={done:!1,value:e[0]},o=KG(n&&n.length===e.length?n:qG(e),t),a=WG(o,e,{ease:Array.isArray(i)?i:GG(e,i)});return{calculatedDuration:t,next:u=>(s.value=a(u),s.done=u>=t,s)}}const YG=t=>t!==null;function u_(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(YG),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const QG={decay:LT,inertia:LT,tween:Kv,keyframes:Kv,spring:Jx};function V2(t){typeof t.type=="string"&&(t.type=QG[t.type])}class d_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const JG=t=>t/100;class f_ extends d_{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Fs.now()&&this.tick(Fs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;V2(e);const{type:n=Kv,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const u=n||Kv;u!==Kv&&typeof a[0]!="number"&&(this.mixKeyframes=Ky(JG,j2(a[0],a[1])),a=[0,100]);const f=u({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...a].reverse(),velocity:-o})),f.calculatedDuration===null&&(f.calculatedDuration=c_(f));const{calculatedDuration:h}=f;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:h,repeat:m,repeatType:v,repeatDelay:S,type:k,onUpdate:C,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const _=this.currentTime-f*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?_<0:_>i;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let A=this.currentTime,I=r;if(m){const V=Math.min(this.currentTime,i)/a;let z=Math.floor(V),W=V%1;!W&&V>=1&&(W=1),W===1&&z--,z=Math.min(z,m+1),!!(z%2)&&(v==="reverse"?(W=1-W,S&&(W-=S/a)):v==="mirror"&&(I=o)),A=Mc(0,1,W)*a}const N=M?{done:!1,value:h[0]}:I.next(A);s&&(N.value=s(N.value));let{done:O}=N;!M&&u!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return j&&k!==LT&&(N.value=u_(h,this.options,E,this.speed)),C&&C(N.value),j&&this.finish(),N}then(e,n){return this.finished.then(e,n)}get duration(){return qo(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+qo(e)}get time(){return qo(this.currentTime)}set time(e){var n;e=wl(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Fs.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=qo(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=OG,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Fs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function XG(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Sf=t=>t*180/Math.PI,jT=t=>{const e=Sf(Math.atan2(t[1],t[0]));return FT(e)},ZG={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:jT,rotateZ:jT,skewX:t=>Sf(Math.atan(t[1])),skewY:t=>Sf(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},FT=t=>(t=t%360,t<0&&(t+=360),t),qI=jT,KI=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),GI=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),eY={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:KI,scaleY:GI,scale:t=>(KI(t)+GI(t))/2,rotateX:t=>FT(Sf(Math.atan2(t[6],t[5]))),rotateY:t=>FT(Sf(Math.atan2(-t[2],t[0]))),rotateZ:qI,rotate:qI,skewX:t=>Sf(Math.atan(t[4])),skewY:t=>Sf(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function UT(t){return t.includes("scale")?1:0}function VT(t,e){if(!t||t==="none")return UT(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=eY,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=ZG,i=a}if(!i)return UT(e);const s=r[e],o=i[1].split(",").map(nY);return typeof s=="function"?s(o):o[s]}const tY=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return VT(n,e)};function nY(t){return parseFloat(t.trim())}const Km=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Gm=new Set(Km),YI=t=>t===qm||t===Lt,rY=new Set(["x","y","z"]),iY=Km.filter(t=>!rY.has(t));function sY(t){const e=[];return iY.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Of={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>VT(e,"x"),y:(t,{transform:e})=>VT(e,"y")};Of.translateX=Of.x;Of.translateY=Of.y;const Df=new Set;let BT=!1,zT=!1,$T=!1;function B2(){if(zT){const t=Array.from(Df).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=sY(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}zT=!1,BT=!1,Df.forEach(t=>t.complete($T)),Df.clear()}function z2(){Df.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(zT=!0)})}function oY(){$T=!0,z2(),B2(),$T=!1}class h_{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Df.add(this),BT||(BT=!0,sr.read(z2),sr.resolveKeyframes(B2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}XG(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Df.delete(this)}cancel(){this.state==="scheduled"&&(Df.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const aY=t=>t.startsWith("--");function lY(t,e,n){aY(e)?t.style.setProperty(e,n):t.style[e]=n}const cY=e_(()=>window.ScrollTimeline!==void 0),uY={};function dY(t,e){const n=e_(t);return()=>uY[e]??n()}const $2=dY(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Dv=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,QI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Dv([0,.65,.55,1]),circOut:Dv([.55,0,1,.45]),backIn:Dv([.31,.01,.66,-.59]),backOut:Dv([.33,1.53,.69,.99])};function W2(t,e){if(t)return typeof t=="function"?$2()?F2(t,e):"ease-out":P2(t)?Dv(t):Array.isArray(t)?t.map(n=>W2(n,e)||QI.easeOut):QI[t]}function fY(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:u}={},f=void 0){const h={[e]:n};u&&(h.offset=u);const m=W2(a,i);Array.isArray(m)&&(h.easing=m);const v={delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),t.animate(h,v)}function H2(t){return typeof t=="function"&&"applyToOptions"in t}function hY({type:t,...e}){return H2(t)&&$2()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class pY extends d_{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:u}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,ZE(typeof e.type!="string");const f=hY(e);this.animation=fY(n,r,i,f,s),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=u_(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):lY(n,r,h),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return qo(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+qo(e)}get time(){return qo(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=wl(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&cY()?(this.animation.timeline=e,Go):n(this)}}const q2={anticipate:k2,backInOut:C2,circInOut:E2};function mY(t){return t in q2}function gY(t){typeof t.ease=="string"&&mY(t.ease)&&(t.ease=q2[t.ease])}const JI=10;class vY extends pY{constructor(e){gY(e),V2(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new f_({...o,autoplay:!1}),u=wl(this.finishedTime??this.time);n.setWithVelocity(a.sample(u-JI).value,a.sample(u).value,JI),a.stop()}}const XI=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(id.test(t)||t==="0")&&!t.startsWith("url("));function yY(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function bY(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=XI(i,e),a=XI(s,e);return!o||!a?!1:yY(t)||(n==="spring"||H2(n))&&r}function WT(t){t.duration=0,t.type="keyframes"}const xY=new Set(["opacity","clipPath","filter","transform"]),wY=e_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function SY(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:f}=e.owner.getProps();return wY()&&n&&xY.has(n)&&(n!=="transform"||!f)&&!u&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const CY=40;class kY extends d_{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:u,motionValue:f,element:h,...m}){var k;super(),this.stop=()=>{var C,E;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=Fs.now();const v={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:u,motionValue:f,element:h,...m},S=(h==null?void 0:h.KeyframeResolver)||h_;this.keyframeResolver=new S(a,(C,E,_)=>this.onKeyframesResolved(C,E,v,!_),u,f,h),(k=this.keyframeResolver)==null||k.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:u,isHandoff:f,onUpdate:h}=r;this.resolvedAt=Fs.now(),bY(e,s,o,a)||((Ac.instantAnimations||!u)&&(h==null||h(u_(e,r,n))),e[0]=e[e.length-1],WT(r),r.repeat=0);const v={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>CY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},S=!f&&SY(v)?new vY({...v,element:v.motionValue.owner.current}):new f_(v);S.finished.then(()=>this.notifyFinished()).catch(Go),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),oY()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const TY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function EY(t){const e=TY.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function K2(t,e,n=1){const[r,i]=EY(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return m2(o)?parseFloat(o):o}return s_(i)?K2(i,e,n+1):i}function p_(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const G2=new Set(["width","height","top","left","right","bottom",...Km]),_Y={test:t=>t==="auto",parse:t=>t},Y2=t=>e=>e.test(t),Q2=[qm,Lt,Sl,Eu,yG,vG,_Y],ZI=t=>Q2.find(Y2(t));function PY(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||v2(t):!0}const RY=new Set(["brightness","contrast","saturate","opacity"]);function IY(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(o_)||[];if(!r)return t;const i=n.replace(r,"");let s=RY.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const MY=/\b([a-z-]*)\(.*?\)/gu,HT={...id,getAnimatableNone:t=>{const e=t.match(MY);return e?e.map(IY).join(" "):t}},eM={...qm,transform:Math.round},AY={rotate:Eu,rotateX:Eu,rotateY:Eu,rotateZ:Eu,scale:Bb,scaleX:Bb,scaleY:Bb,scaleZ:Bb,skew:Eu,skewX:Eu,skewY:Eu,distance:Lt,translateX:Lt,translateY:Lt,translateZ:Lt,x:Lt,y:Lt,z:Lt,perspective:Lt,transformPerspective:Lt,opacity:fy,originX:VI,originY:VI,originZ:Lt},m_={borderWidth:Lt,borderTopWidth:Lt,borderRightWidth:Lt,borderBottomWidth:Lt,borderLeftWidth:Lt,borderRadius:Lt,radius:Lt,borderTopLeftRadius:Lt,borderTopRightRadius:Lt,borderBottomRightRadius:Lt,borderBottomLeftRadius:Lt,width:Lt,maxWidth:Lt,height:Lt,maxHeight:Lt,top:Lt,right:Lt,bottom:Lt,left:Lt,padding:Lt,paddingTop:Lt,paddingRight:Lt,paddingBottom:Lt,paddingLeft:Lt,margin:Lt,marginTop:Lt,marginRight:Lt,marginBottom:Lt,marginLeft:Lt,backgroundPositionX:Lt,backgroundPositionY:Lt,...AY,zIndex:eM,fillOpacity:fy,strokeOpacity:fy,numOctaves:eM},NY={...m_,color:Hr,backgroundColor:Hr,outlineColor:Hr,fill:Hr,stroke:Hr,borderColor:Hr,borderTopColor:Hr,borderRightColor:Hr,borderBottomColor:Hr,borderLeftColor:Hr,filter:HT,WebkitFilter:HT},J2=t=>NY[t];function X2(t,e){let n=J2(t);return n!==HT&&(n=id),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const OY=new Set(["auto","none","0"]);function DY(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!OY.has(s)&&hy(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=X2(n,i)}class LY extends h_{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let f=e[u];if(typeof f=="string"&&(f=f.trim(),s_(f))){const h=K2(f,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!G2.has(r)||e.length!==2)return;const[i,s]=e,o=ZI(i),a=ZI(s);if(o!==a)if(YI(o)&&YI(a))for(let u=0;u<e.length;u++){const f=e[u];typeof f=="string"&&(e[u]=parseFloat(f))}else Of[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||PY(e[i]))&&r.push(i);r.length&&DY(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Of[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Of[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([u,f])=>{e.getValue(u).set(f)}),this.resolveNoneKeyframes()}}function jY(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const Z2=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function ej(t){return g2(t)&&"offsetHeight"in t}const tM=30,FY=t=>!isNaN(parseFloat(t));class UY{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Fs.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Fs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=FY(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new t_);const r=this.events[e].add(n);return e==="change"?()=>{r(),sr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Fs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>tM)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,tM);return y2(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function km(t,e){return new UY(t,e)}const{schedule:g_}=R2(queueMicrotask,!1),ga={x:!1,y:!1};function tj(){return ga.x||ga.y}function VY(t){return t==="x"||t==="y"?ga[t]?null:(ga[t]=!0,()=>{ga[t]=!1}):ga.x||ga.y?null:(ga.x=ga.y=!0,()=>{ga.x=ga.y=!1})}function nj(t,e){const n=jY(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function nM(t){return!(t.pointerType==="touch"||tj())}function BY(t,e,n={}){const[r,i,s]=nj(t,n),o=a=>{if(!nM(a))return;const{target:u}=a,f=e(u,a);if(typeof f!="function"||!u)return;const h=m=>{nM(m)&&(f(m),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const rj=(t,e)=>e?t===e?!0:rj(t,e.parentElement):!1,v_=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,zY=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function $Y(t){return zY.has(t.tagName)||t.tabIndex!==-1}const ux=new WeakSet;function rM(t){return e=>{e.key==="Enter"&&t(e)}}function nk(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const WY=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=rM(()=>{if(ux.has(n))return;nk(n,"down");const i=rM(()=>{nk(n,"up")}),s=()=>nk(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function iM(t){return v_(t)&&!tj()}function HY(t,e,n={}){const[r,i,s]=nj(t,n),o=a=>{const u=a.currentTarget;if(!iM(a))return;ux.add(u);const f=e(u,a),h=(S,k)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",v),ux.has(u)&&ux.delete(u),iM(S)&&typeof f=="function"&&f(S,{success:k})},m=S=>{h(S,u===window||u===document||n.useGlobalTarget||rj(u,S.target))},v=S=>{h(S,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",v,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),ej(a)&&(a.addEventListener("focus",f=>WY(f,i)),!$Y(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function ij(t){return g2(t)&&"ownerSVGElement"in t}function qY(t){return ij(t)&&t.tagName==="svg"}const Hi=t=>!!(t&&t.getVelocity),KY=[...Q2,Hr,id],GY=t=>KY.find(Y2(t)),y_=w.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function sM(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function YY(...t){return e=>{let n=!1;const r=t.map(i=>{const s=sM(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():sM(t[i],null)}}}}function QY(...t){return w.useCallback(YY(...t),t)}class JY extends w.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=ej(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function XY({children:t,isPresent:e,anchorX:n,root:r}){const i=w.useId(),s=w.useRef(null),o=w.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=w.useContext(y_),u=QY(s,t==null?void 0:t.ref);return w.useInsertionEffect(()=>{const{width:f,height:h,top:m,left:v,right:S}=o.current;if(e||!s.current||!f||!h)return;const k=n==="left"?`left: ${v}`:`right: ${S}`;s.current.dataset.motionPopId=i;const C=document.createElement("style");a&&(C.nonce=a);const E=r??document.head;return E.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${h}px !important;
            ${k}px !important;
            top: ${m}px !important;
          }
        `),()=>{E.contains(C)&&E.removeChild(C)}},[e]),b.jsx(JY,{isPresent:e,childRef:s,sizeRef:o,children:w.cloneElement(t,{ref:u})})}const ZY=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:u})=>{const f=YE(eQ),h=w.useId();let m=!0,v=w.useMemo(()=>(m=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:S=>{f.set(S,!0);for(const k of f.values())if(!k)return;r&&r()},register:S=>(f.set(S,!1),()=>f.delete(S))}),[n,f,r]);return s&&m&&(v={...v}),w.useMemo(()=>{f.forEach((S,k)=>f.set(k,!1))},[n]),w.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),o==="popLayout"&&(t=b.jsx(XY,{isPresent:n,anchorX:a,root:u,children:t})),b.jsx(Yw.Provider,{value:v,children:t})};function eQ(){return new Map}function sj(t=!0){const e=w.useContext(Yw);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=w.useId();w.useEffect(()=>{if(t)return i(s)},[t]);const o=w.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const zb=t=>t.key||"";function oM(t){const e=[];return w.Children.forEach(t,n=>{w.isValidElement(n)&&e.push(n)}),e}const tQ=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:u})=>{const[f,h]=sj(o),m=w.useMemo(()=>oM(t),[t]),v=o&&!f?[]:m.map(zb),S=w.useRef(!0),k=w.useRef(m),C=YE(()=>new Map),[E,_]=w.useState(m),[M,A]=w.useState(m);p2(()=>{S.current=!1,k.current=m;for(let O=0;O<M.length;O++){const j=zb(M[O]);v.includes(j)?C.delete(j):C.get(j)!==!0&&C.set(j,!1)}},[M,v.length,v.join("-")]);const I=[];if(m!==E){let O=[...m];for(let j=0;j<M.length;j++){const V=M[j],z=zb(V);v.includes(z)||(O.splice(j,0,V),I.push(V))}return s==="wait"&&I.length&&(O=I),A(oM(O)),_(m),null}const{forceRender:N}=w.useContext(GE);return b.jsx(b.Fragment,{children:M.map(O=>{const j=zb(O),V=o&&!f?!1:m===M||v.includes(j),z=()=>{if(C.has(j))C.set(j,!0);else return;let W=!0;C.forEach(J=>{J||(W=!1)}),W&&(N==null||N(),A(k.current),o&&(h==null||h()),r&&r())};return b.jsx(ZY,{isPresent:V,initial:!S.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:V?void 0:z,anchorX:a,children:O},j)})})},oj=w.createContext({strict:!1}),aM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Tm={};for(const t in aM)Tm[t]={isEnabled:e=>aM[t].some(n=>!!e[n])};function nQ(t){for(const e in t)Tm[e]={...Tm[e],...t[e]}}const rQ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xx(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||rQ.has(t)}let aj=t=>!Xx(t);function iQ(t){typeof t=="function"&&(aj=e=>e.startsWith("on")?!Xx(e):t(e))}try{iQ(require("@emotion/is-prop-valid").default)}catch{}function sQ(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(aj(i)||n===!0&&Xx(i)||!e&&!Xx(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Qw=w.createContext({});function Jw(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function py(t){return typeof t=="string"||Array.isArray(t)}const b_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],x_=["initial",...b_];function Xw(t){return Jw(t.animate)||x_.some(e=>py(t[e]))}function lj(t){return!!(Xw(t)||t.variants)}function oQ(t,e){if(Xw(t)){const{initial:n,animate:r}=t;return{initial:n===!1||py(n)?n:void 0,animate:py(r)?r:void 0}}return t.inherit!==!1?e:{}}function aQ(t){const{initial:e,animate:n}=oQ(t,w.useContext(Qw));return w.useMemo(()=>({initial:e,animate:n}),[lM(e),lM(n)])}function lM(t){return Array.isArray(t)?t.join(" "):t}const my={};function lQ(t){for(const e in t)my[e]=t[e],i_(e)&&(my[e].isCSSVariable=!0)}function cj(t,{layout:e,layoutId:n}){return Gm.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!my[t]||t==="opacity")}const cQ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},uQ=Km.length;function dQ(t,e,n){let r="",i=!0;for(let s=0;s<uQ;s++){const o=Km[s],a=t[o];if(a===void 0)continue;let u=!0;if(typeof a=="number"?u=a===(o.startsWith("scale")?1:0):u=parseFloat(a)===0,!u||n){const f=Z2(a,m_[o]);if(!u){i=!1;const h=cQ[o]||o;r+=`${h}(${f}) `}n&&(e[o]=f)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function w_(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const u in e){const f=e[u];if(Gm.has(u)){o=!0;continue}else if(i_(u)){i[u]=f;continue}else{const h=Z2(f,m_[u]);u.startsWith("origin")?(a=!0,s[u]=h):r[u]=h}}if(e.transform||(o||n?r.transform=dQ(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:u="50%",originY:f="50%",originZ:h=0}=s;r.transformOrigin=`${u} ${f} ${h}`}}const S_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function uj(t,e,n){for(const r in e)!Hi(e[r])&&!cj(r,n)&&(t[r]=e[r])}function fQ({transformTemplate:t},e){return w.useMemo(()=>{const n=S_();return w_(n,e,t),Object.assign({},n.vars,n.style)},[e])}function hQ(t,e){const n=t.style||{},r={};return uj(r,n,t),Object.assign(r,fQ(t,e)),r}function pQ(t,e){const n={},r=hQ(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const mQ={offset:"stroke-dashoffset",array:"stroke-dasharray"},gQ={offset:"strokeDashoffset",array:"strokeDasharray"};function vQ(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?mQ:gQ;t[s.offset]=Lt.transform(-r);const o=Lt.transform(e),a=Lt.transform(n);t[s.array]=`${o} ${a}`}function dj(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},u,f,h){if(w_(t,a,f),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:v}=t;m.transform&&(v.transform=m.transform,delete m.transform),(v.transform||m.transformOrigin)&&(v.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),v.transform&&(v.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),i!==void 0&&vQ(m,i,s,o,!1)}const fj=()=>({...S_(),attrs:{}}),hj=t=>typeof t=="string"&&t.toLowerCase()==="svg";function yQ(t,e,n,r){const i=w.useMemo(()=>{const s=fj();return dj(s,e,hj(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};uj(s,t.style,t),i.style={...s,...i.style}}return i}const bQ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function C_(t){return typeof t!="string"||t.includes("-")?!1:!!(bQ.indexOf(t)>-1||/[A-Z]/u.test(t))}function xQ(t,e,n,{latestValues:r},i,s=!1){const a=(C_(t)?yQ:pQ)(e,r,i,t),u=sQ(e,typeof t=="string",s),f=t!==w.Fragment?{...u,...a,ref:n}:{},{children:h}=e,m=w.useMemo(()=>Hi(h)?h.get():h,[h]);return w.createElement(t,{...f,children:m})}function cM(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function k_(t,e,n,r){if(typeof e=="function"){const[i,s]=cM(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=cM(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function dx(t){return Hi(t)?t.get():t}function wQ({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:SQ(n,r,i,t),renderState:e()}}function SQ(t,e,n,r){const i={},s=r(t,{});for(const v in s)i[v]=dx(s[v]);let{initial:o,animate:a}=t;const u=Xw(t),f=lj(t);e&&f&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const m=h?a:o;if(m&&typeof m!="boolean"&&!Jw(m)){const v=Array.isArray(m)?m:[m];for(let S=0;S<v.length;S++){const k=k_(t,v[S]);if(k){const{transitionEnd:C,transition:E,..._}=k;for(const M in _){let A=_[M];if(Array.isArray(A)){const I=h?A.length-1:0;A=A[I]}A!==null&&(i[M]=A)}for(const M in C)i[M]=C[M]}}}return i}const pj=t=>(e,n)=>{const r=w.useContext(Qw),i=w.useContext(Yw),s=()=>wQ(t,e,r,i);return n?s():YE(s)};function T_(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(Hi(r[o])||e.style&&Hi(e.style[o])||cj(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const CQ=pj({scrapeMotionValuesFromProps:T_,createRenderState:S_});function mj(t,e,n){const r=T_(t,e,n);for(const i in t)if(Hi(t[i])||Hi(e[i])){const s=Km.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const kQ=pj({scrapeMotionValuesFromProps:mj,createRenderState:fj}),TQ=Symbol.for("motionComponentSymbol");function Vp(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function EQ(t,e,n){return w.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Vp(n)&&(n.current=r))},[e])}const E_=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_Q="framerAppearId",gj="data-"+E_(_Q),vj=w.createContext({});function PQ(t,e,n,r,i){var C,E;const{visualElement:s}=w.useContext(Qw),o=w.useContext(oj),a=w.useContext(Yw),u=w.useContext(y_).reducedMotion,f=w.useRef(null);r=r||o.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const h=f.current,m=w.useContext(vj);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&RQ(f.current,n,i,m);const v=w.useRef(!1);w.useInsertionEffect(()=>{h&&v.current&&h.update(n,a)});const S=n[gj],k=w.useRef(!!S&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,S))&&((E=window.MotionHasOptimisedAnimation)==null?void 0:E.call(window,S)));return p2(()=>{h&&(v.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),k.current&&h.animationState&&h.animationState.animateChanges())}),w.useEffect(()=>{h&&(!k.current&&h.animationState&&h.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)==null||_.call(window,S)}),k.current=!1),h.enteringChildren=void 0)}),h}function RQ(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:u,layoutRoot:f,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:yj(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Vp(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:f})}function yj(t){if(t)return t.options.allowProjection!==!1?t.projection:yj(t.parent)}function rk(t,{forwardMotionProps:e=!1}={},n,r){n&&nQ(n);const i=C_(t)?kQ:CQ;function s(a,u){let f;const h={...w.useContext(y_),...a,layoutId:IQ(a)},{isStatic:m}=h,v=aQ(a),S=i(a,m);if(!m&&QE){MQ();const k=AQ(h);f=k.MeasureLayout,v.visualElement=PQ(t,S,h,r,k.ProjectionNode)}return b.jsxs(Qw.Provider,{value:v,children:[f&&v.visualElement?b.jsx(f,{visualElement:v.visualElement,...h}):null,xQ(t,a,EQ(S,v.visualElement,u),S,m,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=w.forwardRef(s);return o[TQ]=t,o}function IQ({layoutId:t}){const e=w.useContext(GE).id;return e&&t!==void 0?e+"-"+t:t}function MQ(t,e){w.useContext(oj).strict}function AQ(t){const{drag:e,layout:n}=Tm;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function NQ(t,e){if(typeof Proxy>"u")return rk;const n=new Map,r=(s,o)=>rk(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,rk(o,void 0,t,e)),n.get(o))})}function bj({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function OQ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function DQ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ik(t){return t===void 0||t===1}function qT({scale:t,scaleX:e,scaleY:n}){return!ik(t)||!ik(e)||!ik(n)}function df(t){return qT(t)||xj(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function xj(t){return uM(t.x)||uM(t.y)}function uM(t){return t&&t!=="0%"}function Zx(t,e,n){const r=t-n,i=e*r;return n+i}function dM(t,e,n,r,i){return i!==void 0&&(t=Zx(t,i,r)),Zx(t,n,r)+e}function KT(t,e=0,n=1,r,i){t.min=dM(t.min,e,n,r,i),t.max=dM(t.max,e,n,r,i)}function wj(t,{x:e,y:n}){KT(t.x,e.translate,e.scale,e.originPoint),KT(t.y,n.translate,n.scale,n.originPoint)}const fM=.999999999999,hM=1.0000000000001;function LQ(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&zp(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,wj(t,o)),r&&df(s.latestValues)&&zp(t,s.latestValues))}e.x<hM&&e.x>fM&&(e.x=1),e.y<hM&&e.y>fM&&(e.y=1)}function Bp(t,e){t.min=t.min+e,t.max=t.max+e}function pM(t,e,n,r,i=.5){const s=hr(t.min,t.max,i);KT(t,e,n,s,r)}function zp(t,e){pM(t.x,e.x,e.scaleX,e.scale,e.originX),pM(t.y,e.y,e.scaleY,e.scale,e.originY)}function Sj(t,e){return bj(DQ(t.getBoundingClientRect(),e))}function jQ(t,e,n){const r=Sj(t,n),{scroll:i}=e;return i&&(Bp(r.x,i.offset.x),Bp(r.y,i.offset.y)),r}const mM=()=>({translate:0,scale:1,origin:0,originPoint:0}),$p=()=>({x:mM(),y:mM()}),gM=()=>({min:0,max:0}),Nr=()=>({x:gM(),y:gM()}),GT={current:null},Cj={current:!1};function FQ(){if(Cj.current=!0,!!QE)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>GT.current=t.matches;t.addEventListener("change",e),e()}else GT.current=!1}const UQ=new WeakMap;function VQ(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Hi(i))t.addValue(r,i);else if(Hi(s))t.addValue(r,km(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,km(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const vM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class BQ{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=h_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Fs.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,sr.render(this.render,!1,!0))};const{latestValues:u,renderState:f}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Xw(n),this.isVariantNode=lj(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in m){const S=m[v];u[v]!==void 0&&Hi(S)&&S.set(u[v])}}mount(e){var n;this.current=e,UQ.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),Cj.current||FQ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:GT.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),rd(this.notifyUpdate),rd(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Gm.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&sr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Tm){const n=Tm[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<vM.length;r++){const i=vM[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=VQ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=km(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(m2(r)||v2(r))?r=parseFloat(r):!GY(r)&&id.test(n)&&(r=X2(e,n)),this.setBaseTarget(e,Hi(r)?r.get():r)),Hi(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=k_(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Hi(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new t_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){g_.render(this.render)}}class kj extends BQ{constructor(){super(...arguments),this.KeyframeResolver=LY}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Hi(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Tj(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function zQ(t){return window.getComputedStyle(t)}class $Q extends kj{constructor(){super(...arguments),this.type="html",this.renderInstance=Tj}readValueFromInstance(e,n){var r;if(Gm.has(n))return(r=this.projection)!=null&&r.isProjecting?UT(n):tY(e,n);{const i=zQ(e),s=(i_(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Sj(e,n)}build(e,n,r){w_(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return T_(e,n,r)}}const Ej=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function WQ(t,e,n,r){Tj(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Ej.has(i)?i:E_(i),e.attrs[i])}class HQ extends kj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Gm.has(n)){const r=J2(n);return r&&r.default||0}return n=Ej.has(n)?n:E_(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return mj(e,n,r)}build(e,n,r){dj(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){WQ(e,n,r,i)}mount(e){this.isSVGTag=hj(e.tagName),super.mount(e)}}const qQ=(t,e)=>C_(t)?new HQ(e):new $Q(e,{allowProjection:t!==w.Fragment});function Jp(t,e,n){const r=t.getProps();return k_(r,e,n!==void 0?n:r.custom,t)}const YT=t=>Array.isArray(t);function KQ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,km(n))}function GQ(t){return YT(t)?t[t.length-1]||0:t}function YQ(t,e){const n=Jp(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=GQ(s[o]);KQ(t,o,a)}}function QQ(t){return!!(Hi(t)&&t.add)}function QT(t,e){const n=t.getValue("willChange");if(QQ(n))return n.add(e);if(!n&&Ac.WillChange){const r=new Ac.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function _j(t){return t.props[gj]}const JQ=t=>t!==null;function XQ(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(JQ),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const ZQ={type:"spring",stiffness:500,damping:25,restSpeed:10},eJ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),tJ={type:"keyframes",duration:.8},nJ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rJ=(t,{keyframes:e})=>e.length>2?tJ:Gm.has(t)?t.startsWith("scale")?eJ(e[1]):ZQ:nJ;function iJ({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:u,elapsed:f,...h}){return!!Object.keys(h).length}const __=(t,e,n,r={},i,s)=>o=>{const a=p_(r,t)||{},u=a.delay||r.delay||0;let{elapsed:f=0}=r;f=f-wl(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-f,onUpdate:v=>{e.set(v),a.onUpdate&&a.onUpdate(v)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};iJ(a)||Object.assign(h,rJ(t,h)),h.duration&&(h.duration=wl(h.duration)),h.repeatDelay&&(h.repeatDelay=wl(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let m=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(WT(h),h.delay===0&&(m=!0)),(Ac.instantAnimations||Ac.skipAnimations)&&(m=!0,WT(h),h.delay=0),h.allowFlatten=!a.type&&!a.ease,m&&!s&&e.get()!==void 0){const v=XQ(h.keyframes,a);if(v!==void 0){sr.update(()=>{h.onUpdate(v),h.onComplete()});return}}return a.isSync?new f_(h):new kY(h)};function sJ({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Pj(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const u=[],f=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const m=t.getValue(h,t.latestValues[h]??null),v=a[h];if(v===void 0||f&&sJ(f,h))continue;const S={delay:n,...p_(s||{},h)},k=m.get();if(k!==void 0&&!m.isAnimating&&!Array.isArray(v)&&v===k&&!S.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const _=_j(t);if(_){const M=window.MotionHandoffAnimation(_,h,sr);M!==null&&(S.startTime=M,C=!0)}}QT(t,h),m.start(__(h,m,v,t.shouldReduceMotion&&G2.has(h)?{type:!1}:S,t,C));const E=m.animation;E&&u.push(E)}return o&&Promise.all(u).then(()=>{sr.update(()=>{o&&YQ(t,o)})}),u}function Rj(t,e,n,r=0,i=1){const s=Array.from(t).sort((f,h)=>f.sortNodePosition(h)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function JT(t,e,n={}){var u;const r=Jp(t,e,n.type==="exit"?(u=t.presenceContext)==null?void 0:u.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Pj(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:v}=i;return oJ(t,e,f,h,m,v,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[f,h]=a==="beforeChildren"?[s,o]:[o,s];return f().then(()=>h())}else return Promise.all([s(),o(n.delay)])}function oJ(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),a.push(JT(u,e,{...o,delay:n+(typeof r=="function"?0:r)+Rj(t.variantChildren,u,r,i,s)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(a)}function aJ(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>JT(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=JT(t,e,n);else{const i=typeof e=="function"?Jp(t,e,n.custom):e;r=Promise.all(Pj(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function Ij(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const lJ=x_.length;function Mj(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Mj(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<lJ;n++){const r=x_[n],i=t.props[r];(py(i)||i===!1)&&(e[r]=i)}return e}const cJ=[...b_].reverse(),uJ=b_.length;function dJ(t){return e=>Promise.all(e.map(({animation:n,options:r})=>aJ(t,n,r)))}function fJ(t){let e=dJ(t),n=yM(),r=!0;const i=u=>(f,h)=>{var v;const m=Jp(t,h,u==="exit"?(v=t.presenceContext)==null?void 0:v.custom:void 0);if(m){const{transition:S,transitionEnd:k,...C}=m;f={...f,...C,...k}}return f};function s(u){e=u(t)}function o(u){const{props:f}=t,h=Mj(t.parent)||{},m=[],v=new Set;let S={},k=1/0;for(let E=0;E<uJ;E++){const _=cJ[E],M=n[_],A=f[_]!==void 0?f[_]:h[_],I=py(A),N=_===u?M.isActive:null;N===!1&&(k=E);let O=A===h[_]&&A!==f[_]&&I;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),M.protectedKeys={...S},!M.isActive&&N===null||!A&&!M.prevProp||Jw(A)||typeof A=="boolean")continue;const j=hJ(M.prevProp,A);let V=j||_===u&&M.isActive&&!O&&I||E>k&&I,z=!1;const W=Array.isArray(A)?A:[A];let J=W.reduce(i(_),{});N===!1&&(J={});const{prevResolvedValues:Y={}}=M,me={...Y,...J},ue=xe=>{V=!0,v.has(xe)&&(z=!0,v.delete(xe)),M.needsAnimating[xe]=!0;const q=t.getValue(xe);q&&(q.liveStyle=!1)};for(const xe in me){const q=J[xe],te=Y[xe];if(S.hasOwnProperty(xe))continue;let ae=!1;YT(q)&&YT(te)?ae=!Ij(q,te):ae=q!==te,ae?q!=null?ue(xe):v.add(xe):q!==void 0&&v.has(xe)?ue(xe):M.protectedKeys[xe]=!0}M.prevProp=A,M.prevResolvedValues=J,M.isActive&&(S={...S,...J}),r&&t.blockInitialAnimation&&(V=!1);const Ie=O&&j;V&&(!Ie||z)&&m.push(...W.map(xe=>{const q={type:_};if(typeof xe=="string"&&r&&!Ie&&t.manuallyAnimateOnMount&&t.parent){const{parent:te}=t,ae=Jp(te,xe);if(te.enteringChildren&&ae){const{delayChildren:B}=ae.transition||{};q.delay=Rj(te.enteringChildren,t,B)}}return{animation:xe,options:q}}))}if(v.size){const E={};if(typeof f.initial!="boolean"){const _=Jp(t,Array.isArray(f.initial)?f.initial[0]:f.initial);_&&_.transition&&(E.transition=_.transition)}v.forEach(_=>{const M=t.getBaseTarget(_),A=t.getValue(_);A&&(A.liveStyle=!0),E[_]=M??null}),m.push({animation:E})}let C=!!m.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(m):Promise.resolve()}function a(u,f){var m;if(n[u].isActive===f)return Promise.resolve();(m=t.variantChildren)==null||m.forEach(v=>{var S;return(S=v.animationState)==null?void 0:S.setActive(u,f)}),n[u].isActive=f;const h=o(u);for(const v in n)n[v].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=yM()}}}function hJ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Ij(e,t):!1}function cf(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function yM(){return{animate:cf(!0),whileInView:cf(),whileHover:cf(),whileTap:cf(),whileDrag:cf(),whileFocus:cf(),exit:cf()}}class dd{constructor(e){this.isMounted=!1,this.node=e}update(){}}class pJ extends dd{constructor(e){super(e),e.animationState||(e.animationState=fJ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Jw(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let mJ=0;class gJ extends dd{constructor(){super(...arguments),this.id=mJ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const vJ={animation:{Feature:pJ},exit:{Feature:gJ}};function gy(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Qy(t){return{point:{x:t.pageX,y:t.pageY}}}const yJ=t=>e=>v_(e)&&t(e,Qy(e));function Gv(t,e,n,r){return gy(t,e,yJ(n),r)}const Aj=1e-4,bJ=1-Aj,xJ=1+Aj,Nj=.01,wJ=0-Nj,SJ=0+Nj;function us(t){return t.max-t.min}function CJ(t,e,n){return Math.abs(t-e)<=n}function bM(t,e,n,r=.5){t.origin=r,t.originPoint=hr(e.min,e.max,t.origin),t.scale=us(n)/us(e),t.translate=hr(n.min,n.max,t.origin)-t.originPoint,(t.scale>=bJ&&t.scale<=xJ||isNaN(t.scale))&&(t.scale=1),(t.translate>=wJ&&t.translate<=SJ||isNaN(t.translate))&&(t.translate=0)}function Yv(t,e,n,r){bM(t.x,e.x,n.x,r?r.originX:void 0),bM(t.y,e.y,n.y,r?r.originY:void 0)}function xM(t,e,n){t.min=n.min+e.min,t.max=t.min+us(e)}function kJ(t,e,n){xM(t.x,e.x,n.x),xM(t.y,e.y,n.y)}function wM(t,e,n){t.min=e.min-n.min,t.max=t.min+us(e)}function Qv(t,e,n){wM(t.x,e.x,n.x),wM(t.y,e.y,n.y)}function Uo(t){return[t("x"),t("y")]}const Oj=({current:t})=>t?t.ownerDocument.defaultView:null,SM=(t,e)=>Math.abs(t-e);function TJ(t,e){const n=SM(t.x,e.x),r=SM(t.y,e.y);return Math.sqrt(n**2+r**2)}class Dj{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=ok(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,k=TJ(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!k)return;const{point:C}=v,{timestamp:E}=Oi;this.history.push({...C,timestamp:E});const{onStart:_,onMove:M}=this.handlers;S||(_&&_(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,v)},this.handlePointerMove=(v,S)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=sk(S,this.transformPagePoint),sr.update(this.updatePoint,!0)},this.handlePointerUp=(v,S)=>{this.end();const{onEnd:k,onSessionEnd:C,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=ok(v.type==="pointercancel"?this.lastMoveEventInfo:sk(S,this.transformPagePoint),this.history);this.startEvent&&k&&k(v,_),C&&C(v,_)},!v_(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=Qy(e),u=sk(a,this.transformPagePoint),{point:f}=u,{timestamp:h}=Oi;this.history=[{...f,timestamp:h}];const{onSessionStart:m}=n;m&&m(e,ok(u,this.history)),this.removeListeners=Ky(Gv(this.contextWindow,"pointermove",this.handlePointerMove),Gv(this.contextWindow,"pointerup",this.handlePointerUp),Gv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),rd(this.updatePoint)}}function sk(t,e){return e?{point:e(t.point)}:t}function CM(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ok({point:t},e){return{point:t,delta:CM(t,Lj(e)),offset:CM(t,EJ(e)),velocity:_J(e,.1)}}function EJ(t){return t[0]}function Lj(t){return t[t.length-1]}function _J(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Lj(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>wl(e)));)n--;if(!r)return{x:0,y:0};const s=qo(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function PJ(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?hr(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?hr(n,t,r.max):Math.min(t,n)),t}function kM(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function RJ(t,{top:e,left:n,bottom:r,right:i}){return{x:kM(t.x,n,i),y:kM(t.y,e,r)}}function TM(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function IJ(t,e){return{x:TM(t.x,e.x),y:TM(t.y,e.y)}}function MJ(t,e){let n=.5;const r=us(t),i=us(e);return i>r?n=dy(e.min,e.max-r,t.min):r>i&&(n=dy(t.min,t.max-i,e.min)),Mc(0,1,n)}function AJ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const XT=.35;function NJ(t=XT){return t===!1?t=0:t===!0&&(t=XT),{x:EM(t,"left","right"),y:EM(t,"top","bottom")}}function EM(t,e,n){return{min:_M(t,e),max:_M(t,n)}}function _M(t,e){return typeof t=="number"?t:t[e]||0}const OJ=new WeakMap;class DJ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=m=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Qy(m).point)},o=(m,v)=>{const{drag:S,dragPropagation:k,onDragStart:C}=this.getProps();if(S&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=VY(S),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Uo(_=>{let M=this.getAxisMotionValue(_).get()||0;if(Sl.test(M)){const{projection:A}=this.visualElement;if(A&&A.layout){const I=A.layout.layoutBox[_];I&&(M=us(I)*(parseFloat(M)/100))}}this.originPoint[_]=M}),C&&sr.postRender(()=>C(m,v)),QT(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},a=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v;const{dragPropagation:S,dragDirectionLock:k,onDirectionLock:C,onDrag:E}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:_}=v;if(k&&this.currentDirection===null){this.currentDirection=LJ(_),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",v.point,_),this.updateAxis("y",v.point,_),this.visualElement.render(),E&&E(m,v)},u=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v,this.stop(m,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Uo(m=>{var v;return this.getAnimationState(m)==="paused"&&((v=this.getAxisMotionValue(m).animation)==null?void 0:v.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Dj(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:Oj(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&sr.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!$b(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=PJ(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&Vp(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=RJ(r.layoutBox,e):this.constraints=!1,this.elastic=NJ(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Uo(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=AJ(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Vp(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=jQ(r,i.root,this.visualElement.getTransformPagePoint());let o=IJ(i.layout.layoutBox,s);if(n){const a=n(OQ(o));this.hasMutatedConstraints=!!a,a&&(o=bj(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},f=Uo(h=>{if(!$b(h,n,this.currentDirection))return;let m=u&&u[h]||{};o&&(m={min:0,max:0});const v=i?200:1e6,S=i?40:1e7,k={type:"inertia",velocity:r?e[h]:0,bounceStiffness:v,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...s,...m};return this.startAxisValueAnimation(h,k)});return Promise.all(f).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return QT(this.visualElement,e),r.start(__(e,r,0,n,this.visualElement,!1))}stopAnimation(){Uo(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Uo(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Uo(n=>{const{drag:r}=this.getProps();if(!$b(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-hr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Vp(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Uo(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const u=a.get();i[o]=MJ({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Uo(o=>{if(!$b(o,e,null))return;const a=this.getAxisMotionValue(o),{min:u,max:f}=this.constraints[o];a.set(hr(u,f,i[o]))})}addListeners(){if(!this.visualElement.current)return;OJ.set(this.visualElement,this);const e=this.visualElement.current,n=Gv(e,"pointerdown",u=>{const{drag:f,dragListener:h=!0}=this.getProps();f&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Vp(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),sr.read(r);const o=gy(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f})=>{this.isDragging&&f&&(Uo(h=>{const m=this.getAxisMotionValue(h);m&&(this.originPoint[h]+=u[h].translate,m.set(m.get()+u[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=XT,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function $b(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function LJ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class jJ extends dd{constructor(e){super(e),this.removeGroupControls=Go,this.removeListeners=Go,this.controls=new DJ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Go}unmount(){this.removeGroupControls(),this.removeListeners()}}const PM=t=>(e,n)=>{t&&sr.postRender(()=>t(e,n))};class FJ extends dd{constructor(){super(...arguments),this.removePointerDownListener=Go}onPointerDown(e){this.session=new Dj(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Oj(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:PM(e),onStart:PM(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&sr.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Gv(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const fx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function RM(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const kv={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Lt.test(t))t=parseFloat(t);else return t;const n=RM(t,e.target.x),r=RM(t,e.target.y);return`${n}% ${r}%`}},UJ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=id.parse(t);if(i.length>5)return r;const s=id.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=u;const f=hr(a,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=f),typeof i[3+o]=="number"&&(i[3+o]/=f),s(i)}};let ak=!1;class VJ extends w.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;lQ(BJ),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),ak&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),fx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,ak=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||sr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),g_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;ak=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function jj(t){const[e,n]=sj(),r=w.useContext(GE);return b.jsx(VJ,{...t,layoutGroup:r,switchLayoutGroup:w.useContext(vj),isPresent:e,safeToRemove:n})}const BJ={borderRadius:{...kv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kv,borderTopRightRadius:kv,borderBottomLeftRadius:kv,borderBottomRightRadius:kv,boxShadow:UJ};function zJ(t,e,n){const r=Hi(t)?t:km(t);return r.start(__("",r,e,n)),r.animation}const $J=(t,e)=>t.depth-e.depth;class WJ{constructor(){this.children=[],this.isDirty=!1}add(e){JE(this.children,e),this.isDirty=!0}remove(e){XE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort($J),this.isDirty=!1,this.children.forEach(e)}}function HJ(t,e){const n=Fs.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(rd(r),t(s-e))};return sr.setup(r,!0),()=>rd(r)}const Fj=["TopLeft","TopRight","BottomLeft","BottomRight"],qJ=Fj.length,IM=t=>typeof t=="string"?parseFloat(t):t,MM=t=>typeof t=="number"||Lt.test(t);function KJ(t,e,n,r,i,s){i?(t.opacity=hr(0,n.opacity??1,GJ(r)),t.opacityExit=hr(e.opacity??1,0,YJ(r))):s&&(t.opacity=hr(e.opacity??1,n.opacity??1,r));for(let o=0;o<qJ;o++){const a=`border${Fj[o]}Radius`;let u=AM(e,a),f=AM(n,a);if(u===void 0&&f===void 0)continue;u||(u=0),f||(f=0),u===0||f===0||MM(u)===MM(f)?(t[a]=Math.max(hr(IM(u),IM(f),r),0),(Sl.test(f)||Sl.test(u))&&(t[a]+="%")):t[a]=f}(e.rotate||n.rotate)&&(t.rotate=hr(e.rotate||0,n.rotate||0,r))}function AM(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const GJ=Uj(0,.5,T2),YJ=Uj(.5,.95,Go);function Uj(t,e,n){return r=>r<t?0:r>e?1:n(dy(t,e,r))}function NM(t,e){t.min=e.min,t.max=e.max}function Fo(t,e){NM(t.x,e.x),NM(t.y,e.y)}function OM(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function DM(t,e,n,r,i){return t-=e,t=Zx(t,1/n,r),i!==void 0&&(t=Zx(t,1/i,r)),t}function QJ(t,e=0,n=1,r=.5,i,s=t,o=t){if(Sl.test(e)&&(e=parseFloat(e),e=hr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=hr(s.min,s.max,r);t===s&&(a-=e),t.min=DM(t.min,e,n,a,i),t.max=DM(t.max,e,n,a,i)}function LM(t,e,[n,r,i],s,o){QJ(t,e[n],e[r],e[i],e.scale,s,o)}const JJ=["x","scaleX","originX"],XJ=["y","scaleY","originY"];function jM(t,e,n,r){LM(t.x,e,JJ,n?n.x:void 0,r?r.x:void 0),LM(t.y,e,XJ,n?n.y:void 0,r?r.y:void 0)}function FM(t){return t.translate===0&&t.scale===1}function Vj(t){return FM(t.x)&&FM(t.y)}function UM(t,e){return t.min===e.min&&t.max===e.max}function ZJ(t,e){return UM(t.x,e.x)&&UM(t.y,e.y)}function VM(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Bj(t,e){return VM(t.x,e.x)&&VM(t.y,e.y)}function BM(t){return us(t.x)/us(t.y)}function zM(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class eX{constructor(){this.members=[]}add(e){JE(this.members,e),e.scheduleRender()}remove(e){if(XE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tX(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:h,rotateX:m,rotateY:v,skewX:S,skewY:k}=n;f&&(r=`perspective(${f}px) ${r}`),h&&(r+=`rotate(${h}deg) `),m&&(r+=`rotateX(${m}deg) `),v&&(r+=`rotateY(${v}deg) `),S&&(r+=`skewX(${S}deg) `),k&&(r+=`skewY(${k}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(r+=`scale(${a}, ${u})`),r||"none"}const lk=["","X","Y","Z"],nX=1e3;let rX=0;function ck(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function zj(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=_j(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",sr,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&zj(r)}function $j({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=rX++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(oX),this.nodes.forEach(uX),this.nodes.forEach(dX),this.nodes.forEach(aX)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new WJ)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new t_),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const u=this.eventHandlers.get(o);u&&u.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=ij(o)&&!qY(o),this.instance=o;const{layoutId:a,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||a)&&(this.isLayoutDirty=!0),t){let h,m=0;const v=()=>this.root.updateBlockedByResize=!1;sr.read(()=>{m=window.innerWidth}),t(o,()=>{const S=window.innerWidth;S!==m&&(m=S,this.root.updateBlockedByResize=!0,h&&h(),h=HJ(v,250),fx.hasAnimatedSinceResize&&(fx.hasAnimatedSinceResize=!1,this.nodes.forEach(HM)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&f&&(a||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:v,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||f.getDefaultTransition()||gX,{onLayoutAnimationStart:C,onLayoutAnimationComplete:E}=f.getProps(),_=!this.targetLayout||!Bj(this.targetLayout,S),M=!m&&v;if(this.options.layoutRoot||this.resumeFrom||M||m&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const A={...p_(k,"layout"),onPlay:C,onComplete:E};(f.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A),this.setAnimationOrigin(h,M)}else m||HM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),rd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(fX),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&zj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const m=this.path[h];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($M);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(WM);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(cX),this.nodes.forEach(iX),this.nodes.forEach(sX)):this.nodes.forEach(WM),this.clearAllSnapshots();const a=Fs.now();Oi.delta=Mc(0,1e3/60,a-Oi.timestamp),Oi.timestamp=a,Oi.isProcessing=!0,XC.update.process(Oi),XC.preRender.process(Oi),XC.render.process(Oi),Oi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,g_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(lX),this.sharedNodes.forEach(hX)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,sr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){sr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!us(this.snapshot.measuredBox.x)&&!us(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Nr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Vj(this.projectionDelta),u=this.getTransformTemplate(),f=u?u(this.latestValues,""):void 0,h=f!==this.prevTransformTemplateValue;o&&this.instance&&(a||df(this.latestValues)||h)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return o&&(u=this.removeTransform(u)),vX(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:o}=this.options;if(!o)return Nr();const a=o.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(yX))){const{scroll:h}=this.root;h&&(Bp(a.x,h.offset.x),Bp(a.y,h.offset.y))}return a}removeElementScroll(o){var u;const a=Nr();if(Fo(a,o),(u=this.scroll)!=null&&u.wasRoot)return a;for(let f=0;f<this.path.length;f++){const h=this.path[f],{scroll:m,options:v}=h;h!==this.root&&m&&v.layoutScroll&&(m.wasRoot&&Fo(a,o),Bp(a.x,m.offset.x),Bp(a.y,m.offset.y))}return a}applyTransform(o,a=!1){const u=Nr();Fo(u,o);for(let f=0;f<this.path.length;f++){const h=this.path[f];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&zp(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),df(h.latestValues)&&zp(u,h.latestValues)}return df(this.latestValues)&&zp(u,this.latestValues),u}removeTransform(o){const a=Nr();Fo(a,o);for(let u=0;u<this.path.length;u++){const f=this.path[u];if(!f.instance||!df(f.latestValues))continue;qT(f.latestValues)&&f.updateSnapshot();const h=Nr(),m=f.measurePageBox();Fo(h,m),jM(a,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,h)}return df(this.latestValues)&&jM(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Oi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var v;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==a;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=Oi.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nr(),this.relativeTargetOrigin=Nr(),Qv(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),Fo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Nr(),this.targetWithTransforms=Nr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),kJ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Fo(this.target,this.layout.layoutBox),wj(this.target,this.targetDelta)):Fo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nr(),this.relativeTargetOrigin=Nr(),Qv(this.relativeTargetOrigin,this.target,S.target),Fo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||qT(this.parent.latestValues)||xj(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var k;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(u=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Oi.timestamp&&(u=!1),u)return;const{layout:f,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||h))return;Fo(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,v=this.treeScale.y;LQ(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Nr());const{target:S}=o;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(OM(this.prevProjectionDelta.x,this.projectionDelta.x),OM(this.prevProjectionDelta.y,this.projectionDelta.y)),Yv(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==v||!zM(this.projectionDelta.x,this.prevProjectionDelta.x)||!zM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$p(),this.projectionDelta=$p(),this.projectionDeltaWithTransform=$p()}setAnimationOrigin(o,a=!1){const u=this.snapshot,f=u?u.latestValues:{},h={...this.latestValues},m=$p();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const v=Nr(),S=u?u.source:void 0,k=this.layout?this.layout.source:void 0,C=S!==k,E=this.getStack(),_=!E||E.members.length<=1,M=!!(C&&!_&&this.options.crossfade===!0&&!this.path.some(mX));this.animationProgress=0;let A;this.mixTargetDelta=I=>{const N=I/1e3;qM(m.x,o.x,N),qM(m.y,o.y,N),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qv(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),pX(this.relativeTarget,this.relativeTargetOrigin,v,N),A&&ZJ(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=Nr()),Fo(A,this.relativeTarget)),C&&(this.animationValues=h,KJ(h,f,this.latestValues,N,M,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,u,f;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(f=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||f.stop(),this.pendingAnimation&&(rd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=sr.update(()=>{fx.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=km(0)),this.currentAnimation=zJ(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(nX),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:u,layout:f,latestValues:h}=o;if(!(!a||!u||!f)){if(this!==o&&this.layout&&f&&Wj(this.options.animationType,this.layout.layoutBox,f.layoutBox)){u=this.target||Nr();const m=us(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+m;const v=us(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+v}Fo(a,u),zp(a,h),Yv(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new eX),this.sharedNodes.get(o).add(a);const f=a.options.initialPromotionConfig;a.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:u}={}){const f=this.getStack();f&&f.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(a=!0),!a)return;const f={};u.z&&ck("z",o,f,this.animationValues);for(let h=0;h<lk.length;h++)ck(`rotate${lk[h]}`,o,f,this.animationValues),ck(`skew${lk[h]}`,o,f,this.animationValues);o.render();for(const h in f)o.setStaticValue(h,f[h]),this.animationValues&&(this.animationValues[h]=f[h]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=dx(a==null?void 0:a.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=dx(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!df(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=f.animationValues||f.latestValues;this.applyTransformsToTarget();let m=tX(this.projectionDeltaWithTransform,this.treeScale,h);u&&(m=u(h,m)),o.transform=m;const{x:v,y:S}=this.projectionDelta;o.transformOrigin=`${v.origin*100}% ${S.origin*100}% 0`,f.animationValues?o.opacity=f===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const k in my){if(h[k]===void 0)continue;const{correct:C,applyTo:E,isCSSVariable:_}=my[k],M=m==="none"?h[k]:C(h[k],f);if(E){const A=E.length;for(let I=0;I<A;I++)o[E[I]]=M}else _?this.options.visualElement.renderState.vars[k]=M:o[k]=M}this.options.layoutId&&(o.pointerEvents=f===this?dx(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach($M),this.root.sharedNodes.clear()}}}function iX(t){t.updateLayout()}function sX(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Uo(m=>{const v=o?e.measuredBox[m]:e.layoutBox[m],S=us(v);v.min=r[m].min,v.max=v.min+S}):Wj(s,e.layoutBox,r)&&Uo(m=>{const v=o?e.measuredBox[m]:e.layoutBox[m],S=us(r[m]);v.max=v.min+S,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+S)});const a=$p();Yv(a,r,e.layoutBox);const u=$p();o?Yv(u,t.applyTransform(i,!0),e.measuredBox):Yv(u,r,e.layoutBox);const f=!Vj(a);let h=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:v,layout:S}=m;if(v&&S){const k=Nr();Qv(k,e.layoutBox,v.layoutBox);const C=Nr();Qv(C,r,S.layoutBox),Bj(k,C)||(h=!0),m.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=k,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:u,layoutDelta:a,hasLayoutChanged:f,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function oX(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function aX(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function lX(t){t.clearSnapshot()}function $M(t){t.clearMeasurements()}function WM(t){t.isLayoutDirty=!1}function cX(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function HM(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function uX(t){t.resolveTargetDelta()}function dX(t){t.calcProjection()}function fX(t){t.resetSkewAndRotation()}function hX(t){t.removeLeadSnapshot()}function qM(t,e,n){t.translate=hr(e.translate,0,n),t.scale=hr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function KM(t,e,n,r){t.min=hr(e.min,n.min,r),t.max=hr(e.max,n.max,r)}function pX(t,e,n,r){KM(t.x,e.x,n.x,r),KM(t.y,e.y,n.y,r)}function mX(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const gX={duration:.45,ease:[.4,0,.1,1]},GM=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),YM=GM("applewebkit/")&&!GM("chrome/")?Math.round:Go;function QM(t){t.min=YM(t.min),t.max=YM(t.max)}function vX(t){QM(t.x),QM(t.y)}function Wj(t,e,n){return t==="position"||t==="preserve-aspect"&&!CJ(BM(e),BM(n),.2)}function yX(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const bX=$j({attachResizeListener:(t,e)=>gy(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),uk={current:void 0},Hj=$j({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!uk.current){const t=new bX({});t.mount(window),t.setOptions({layoutScroll:!0}),uk.current=t}return uk.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),xX={pan:{Feature:FJ},drag:{Feature:jJ,ProjectionNode:Hj,MeasureLayout:jj}};function JM(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&sr.postRender(()=>s(e,Qy(e)))}class wX extends dd{mount(){const{current:e}=this.node;e&&(this.unmount=BY(e,(n,r)=>(JM(this.node,r,"Start"),i=>JM(this.node,i,"End"))))}unmount(){}}class SX extends dd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ky(gy(this.node.current,"focus",()=>this.onFocus()),gy(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function XM(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&sr.postRender(()=>s(e,Qy(e)))}class CX extends dd{mount(){const{current:e}=this.node;e&&(this.unmount=HY(e,(n,r)=>(XM(this.node,r,"Start"),(i,{success:s})=>XM(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ZT=new WeakMap,dk=new WeakMap,kX=t=>{const e=ZT.get(t.target);e&&e(t)},TX=t=>{t.forEach(kX)};function EX({root:t,...e}){const n=t||document;dk.has(n)||dk.set(n,{});const r=dk.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(TX,{root:t,...e})),r[i]}function _X(t,e,n){const r=EX(e);return ZT.set(t,n),r.observe(t),()=>{ZT.delete(t),r.unobserve(t)}}const PX={some:0,all:1};class RX extends dd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:PX[i]},a=u=>{const{isIntersecting:f}=u;if(this.isInView===f||(this.isInView=f,s&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:h,onViewportLeave:m}=this.node.getProps(),v=f?h:m;v&&v(u)};return _X(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(IX(e,n))&&this.startObserver()}unmount(){}}function IX({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const MX={inView:{Feature:RX},tap:{Feature:CX},focus:{Feature:SX},hover:{Feature:wX}},AX={layout:{ProjectionNode:Hj,MeasureLayout:jj}},NX={...vJ,...MX,...xX,...AX},ZM=NQ(NX,qQ);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qj=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=w.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},u)=>w.createElement("svg",{ref:u,...DX,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:qj("lucide",i),...a},[...o.map(([f,h])=>w.createElement(f,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=(t,e)=>{const n=w.forwardRef(({className:r,...i},s)=>w.createElement(LX,{ref:s,iconNode:e,className:qj(`lucide-${OX(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=Vt("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=Vt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=Vt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=Vt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=Vt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=Vt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=Vt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=Vt("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=Vt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=Vt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=Vt("Clock1",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 14.5 8",key:"12zbmj"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=Vt("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=Vt("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=Vt("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=Vt("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=Vt("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HX=Vt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=Vt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=Vt("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=Vt("LayoutPanelLeft",[["rect",{width:"7",height:"18",x:"3",y:"3",rx:"1",key:"2obqm"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=Vt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=Vt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=Vt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=Vt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=Vt("MessageSquareWarning",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v2",key:"stiyo7"}],["path",{d:"M12 13h.01",key:"y0uutt"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=Vt("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=Vt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=Vt("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=Vt("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=Vt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=Vt("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZX=Vt("ScreenShareOff",[["path",{d:"M13 3H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-3",key:"i8wdob"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=Vt("ScreenShare",[["path",{d:"M13 3H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-3",key:"i8wdob"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m17 8 5-5",key:"fqif7o"}],["path",{d:"M17 3h5v5",key:"1o3tu8"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eZ=Vt("SendHorizontal",[["path",{d:"m3 3 3 9-3 9 19-9Z",key:"1aobqy"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=Vt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=Vt("Signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=Vt("SmilePlus",[["path",{d:"M22 11v1a10 10 0 1 1-9-10",key:"ew0xw9"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}],["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=Vt("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=Vt("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=Vt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=Vt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=Vt("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=Vt("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=Vt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),rA=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,iA=QL,iZ=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return iA(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(f=>{const h=n==null?void 0:n[f],m=s==null?void 0:s[f];if(h===null)return null;const v=rA(h)||rA(m);return i[f][v]}),a=n&&Object.entries(n).reduce((f,h)=>{let[m,v]=h;return v===void 0||(f[m]=v),f},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,h)=>{let{class:m,className:v,...S}=h;return Object.entries(S).every(k=>{let[C,E]=k;return Array.isArray(E)?E.includes({...s,...a}[C]):{...s,...a}[C]===E})?[...f,m,v]:f},[]);return iA(t,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},sZ=iZ("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors duration-300 focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",call:"bg-green-800 text-white hover:bg-green-700 duration-700 ease-in-out"},size:{default:"h-10 px-16 py-8",sm:"h-9 rounded-md px-12",lg:"h-11 rounded-md px-32",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ls=w.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?dL:"button";return b.jsx(o,{className:nn(sZ({variant:e,size:n,className:t})),ref:s,...i})});ls.displayName="Button";const tS=w.forwardRef(({className:t,type:e,...n},r)=>b.jsx("input",{type:e,className:nn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-off set-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-1 duration-300 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));tS.displayName="Input";const oZ=1,aZ=1e6;let hk=0;function lZ(){return hk=(hk+1)%Number.MAX_SAFE_INTEGER,hk.toString()}const pk=new Map,sA=t=>{if(pk.has(t))return;const e=setTimeout(()=>{pk.delete(t),Jv({type:"REMOVE_TOAST",toastId:t})},aZ);pk.set(t,e)},cZ=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,oZ)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?sA(n):t.toasts.forEach(r=>{sA(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},hx=[];let px={toasts:[]};function Jv(t){px=cZ(px,t),hx.forEach(e=>{e(px)})}function nF({...t}){const e=lZ(),n=i=>Jv({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Jv({type:"DISMISS_TOAST",toastId:e});return Jv({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function uZ(){const[t,e]=w.useState(px);return w.useEffect(()=>(hx.push(e),()=>{const n=hx.indexOf(e);n>-1&&hx.splice(n,1)}),[t]),{...t,toast:nF,dismiss:n=>Jv({type:"DISMISS_TOAST",toastId:n})}}function oA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function dZ(...t){return e=>{let n=!1;const r=t.map(i=>{const s=oA(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():oA(t[i],null)}}}}var rF=w.forwardRef((t,e)=>{const{children:n,...r}=t,i=w.Children.toArray(n),s=i.find(hZ);if(s){const o=s.props.children,a=i.map(u=>u===s?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:u);return b.jsx(t1,{...r,ref:e,children:w.isValidElement(o)?w.cloneElement(o,void 0,a):null})}return b.jsx(t1,{...r,ref:e,children:n})});rF.displayName="Slot";var t1=w.forwardRef((t,e)=>{const{children:n,...r}=t;if(w.isValidElement(n)){const i=mZ(n),s=pZ(r,n.props);return n.type!==w.Fragment&&(s.ref=e?dZ(e,i):i),w.cloneElement(n,s)}return w.Children.count(n)>1?w.Children.only(null):null});t1.displayName="SlotClone";var fZ=({children:t})=>b.jsx(b.Fragment,{children:t});function hZ(t){return w.isValidElement(t)&&t.type===fZ}function pZ(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function mZ(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var gZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],vZ=gZ.reduce((t,e)=>{const n=w.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?rF:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(a,{...o,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),yZ="Separator",aA="horizontal",bZ=["horizontal","vertical"],iF=w.forwardRef((t,e)=>{const{decorative:n,orientation:r=aA,...i}=t,s=xZ(r)?r:aA,a=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return b.jsx(vZ.div,{"data-orientation":s,...a,...i,ref:e})});iF.displayName=yZ;function xZ(t){return bZ.includes(t)}var sF=iF;const go=w.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>b.jsx(sF,{ref:i,decorative:n,orientation:e,className:nn("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));go.displayName=sF.displayName;const M_="/assets/catgpt-CLCMo7yA.png",wZ=()=>{const t=Il(),{register:e,watch:n,setValue:r,formState:{errors:i,isValid:s}}=Gw({mode:"onChange",defaultValues:{invitationCode:""}}),o=n("invitationCode"),[a,u]=w.useState(void 0),[f,h]=w.useState(void 0),{mutate:m,isPending:v}=Ju({mutationFn:()=>F9(),onSuccess:_=>{const{id:M,participants:A}=_;cs.set("rsCookie",A.jwt),t(`/room/${M}`),nF({title:"Created a room! ",description:"You can now join in. "})},onError:_=>{console.error("err: ",_)}}),S=()=>i.invitationCode?b.jsx(ZM.span,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"ml-4 text-xs text-red-500 block",children:"Invalid invitation format. Try Again."}):null,k=s&&o!=="",C=_=>{const M=_.target.value,A=M.match(/code=([^&]+)/),I=M.match(/room=([^&]+)/);if(A&&I){const N=A[1],O=I[1];r("invitationCode",N),u(N),h(O)}},E=YK("(max-width: 1500px)");return b.jsxs("div",{className:"flex flex-col gap-32 relative min-h-screen bg-gradient-to-br text-gray-900 px-4 py-12 items-center justify-center",children:[b.jsxs("header",{className:"absolute top-40 left-[104px] flex flex-col items-center text-gray-800",children:[b.jsx("p",{className:"text-4xl font-bold font-mono",children:"Whispurr"}),b.jsx("img",{src:M_,alt:"logo",width:E?124:300})]}),b.jsx(ZM.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"w-full flex gap-40 justify-center items-center",children:b.jsxs("div",{className:"flex flex-col gap-12 w-[780px] text-left space-y-8 transition-all duration-500 ease-in-out",children:[b.jsxs("h1",{className:"text-5xl font-extrabold leading-tight text-gray-900",children:["Spin Up a Room. ",b.jsx("span",{className:"text-green-600",children:""}),b.jsx("br",{}),"Start Talking. ",b.jsx("span",{className:"text-green-600",children:""}),b.jsx("br",{}),"Stay Anonymous. ",b.jsx("span",{className:"text-green-600",children:""})]}),b.jsx("h1",{className:"text-4xl text-gray-500",children:"Create a room, share the link, and start talking. Private, encrypted, and zero setup."}),b.jsxs("p",{className:"text-xl text-gray-600",children:["Whispurr (pronounced"," ",b.jsx("span",{className:"text-yellow-600",children:"/wspr/"}),', like "whisper") is a web-based video chat platform that allows you to host encrypted meetings with a single click.']}),b.jsx("p",{className:"text-xl text-gray-600",children:"No sign-ups, no downloads  just being fast and anonymous."}),b.jsxs("div",{className:"flex items-center gap-12",children:[b.jsxs(ls,{onClick:()=>m(),disabled:v,className:"px-24 text-white rounded-xl",children:[b.jsx(JX,{className:"mr-8 size-20"}),v?"Creating room...":"Create Room"]}),b.jsx(go,{orientation:"vertical",className:"h-28 bg-gray-300"}),b.jsx("div",{className:"flex flex-col gap-4",children:b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx(tS,{size:24,placeholder:"Enter your invitation ",value:o,...e("invitationCode",{pattern:{value:/^[\w-]{16}$/,message:"Code must be 16 characters long"},onChange:C})}),b.jsxs(ls,{variant:"call",disabled:!k,onClick:()=>{window.open(`/room-invite?code=${a}&room=${f}&external=false`,"_blank")},className:"w-full px-24",children:[b.jsx(Xj,{className:"mr-8 size-20"}),"Join Room"]})]})}),b.jsx(tQ,{children:S()})]})]})})]})},A_=w.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:nn("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));A_.displayName="Card";const oF=w.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:nn("flex flex-col space-y-1.5 p-6",t),...e}));oF.displayName="CardHeader";const SZ=w.forwardRef(({className:t,...e},n)=>b.jsx("h3",{ref:n,className:nn("text-2xl font-semibold leading-none tracking-tight",t),...e}));SZ.displayName="CardTitle";const CZ=w.forwardRef(({className:t,...e},n)=>b.jsx("p",{ref:n,className:nn("text-sm text-muted-foreground",t),...e}));CZ.displayName="CardDescription";const aF=w.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:nn("p-6 pt-0",t),...e}));aF.displayName="CardContent";const kZ=w.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:nn("flex items-center p-6 pt-0",t),...e}));kZ.displayName="CardFooter";const Ni=[];for(let t=0;t<256;++t)Ni.push((t+256).toString(16).slice(1));function TZ(t,e=0){return(Ni[t[e+0]]+Ni[t[e+1]]+Ni[t[e+2]]+Ni[t[e+3]]+"-"+Ni[t[e+4]]+Ni[t[e+5]]+"-"+Ni[t[e+6]]+Ni[t[e+7]]+"-"+Ni[t[e+8]]+Ni[t[e+9]]+"-"+Ni[t[e+10]]+Ni[t[e+11]]+Ni[t[e+12]]+Ni[t[e+13]]+Ni[t[e+14]]+Ni[t[e+15]]).toLowerCase()}let mk;const EZ=new Uint8Array(16);function _Z(){if(!mk){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");mk=crypto.getRandomValues.bind(crypto)}return mk(EZ)}const PZ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),lA={randomUUID:PZ};function RZ(t,e,n){var i;if(lA.randomUUID&&!t)return lA.randomUUID();t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??_Z();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,TZ(r)}var Lv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var IZ=Lv.exports,cA;function MZ(){return cA||(cA=1,function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",f=500,h="__lodash_placeholder__",m=1,v=2,S=4,k=1,C=2,E=1,_=2,M=4,A=8,I=16,N=32,O=64,j=128,V=256,z=512,W=30,J="...",Y=800,me=16,ue=1,Ie=2,se=3,xe=1/0,q=9007199254740991,te=17976931348623157e292,ae=NaN,B=4294967295,fe=B-1,ie=B>>>1,pe=[["ary",j],["bind",E],["bindKey",_],["curry",A],["curryRight",I],["flip",z],["partial",N],["partialRight",O],["rearg",V]],ke="[object Arguments]",Pe="[object Array]",de="[object AsyncFunction]",ge="[object Boolean]",_e="[object Date]",We="[object DOMException]",dt="[object Error]",mt="[object Function]",Et="[object GeneratorFunction]",Ct="[object Map]",jn="[object Number]",wn="[object Null]",ln="[object Object]",Mn="[object Promise]",En="[object Proxy]",Q="[object RegExp]",le="[object Set]",ye="[object String]",qe="[object Symbol]",Ge="[object Undefined]",Be="[object WeakMap]",Xe="[object WeakSet]",Ne="[object ArrayBuffer]",ht="[object DataView]",$t="[object Float32Array]",cn="[object Float64Array]",dn="[object Int8Array]",bt="[object Int16Array]",fn="[object Int32Array]",_n="[object Uint8Array]",or="[object Uint8ClampedArray]",ci="[object Uint16Array]",Ur="[object Uint32Array]",Ci=/\b__p \+= '';/g,ki=/\b(__p \+=) '' \+/g,Jo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ks=/&(?:amp|lt|gt|quot|#39);/g,Ki=/[&<>"']/g,Dl=RegExp(Ks.source),Dt=RegExp(Ki.source),Vn=/<%-([\s\S]+?)%>/g,Gn=/<%([\s\S]+?)%>/g,Pr=/<%=([\s\S]+?)%>/g,bo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,G=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Se=/[\\^$.*+?()[\]{}|]/g,Le=RegExp(Se.source),He=/^\s+/,lt=/\s/,it=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ct=/\{\n\/\* \[wrapped with (.+)\] \*/,xt=/,? & /,It=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pt=/[()=,{}\[\]\/\s]/,yt=/\\(\\)?/g,Mt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Sn=/\w*$/,ar=/^[-+]0x[0-9a-f]+$/i,Yr=/^0b[01]+$/i,Bn=/^\[object .+?Constructor\]$/,An=/^0o[0-7]+$/i,xo=/^(?:0|[1-9]\d*)$/,Da=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Gi=/($^)/,ps=/['\n\r\u2028\u2029\\]/g,Nn="\\ud800-\\udfff",Ll="\\u0300-\\u036f",Gs="\\ufe20-\\ufe2f",jl="\\u20d0-\\u20ff",wo=Ll+Gs+jl,Xt="\\u2700-\\u27bf",mr="a-z\\xdf-\\xf6\\xf8-\\xff",Ys="\\xac\\xb1\\xd7\\xf7",Vr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",lr="\\u2000-\\u206f",ui=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",gd="A-Z\\xc0-\\xd6\\xd8-\\xde",ih="\\ufe0e\\ufe0f",c0=Ys+Vr+lr+ui,jc="[']",sh="["+Nn+"]",Fc="["+c0+"]",Fl="["+wo+"]",u0="\\d+",DS="["+Xt+"]",oh="["+mr+"]",Zm="[^"+Nn+c0+u0+Xt+mr+gd+"]",vd="\\ud83c[\\udffb-\\udfff]",yd="(?:"+Fl+"|"+vd+")",d0="[^"+Nn+"]",bd="(?:\\ud83c[\\udde6-\\uddff]){2}",bn="[\\ud800-\\udbff][\\udc00-\\udfff]",Ul="["+gd+"]",eg="\\u200d",ah="(?:"+oh+"|"+Zm+")",f0="(?:"+Ul+"|"+Zm+")",tg="(?:"+jc+"(?:d|ll|m|re|s|t|ve))?",ng="(?:"+jc+"(?:D|LL|M|RE|S|T|VE))?",lh=yd+"?",xd="["+ih+"]?",La="(?:"+eg+"(?:"+[d0,bd,bn].join("|")+")"+xd+lh+")*",ja="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Fa="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Uc=xd+lh+La,wd="(?:"+[DS,bd,bn].join("|")+")"+Uc,Ua="(?:"+[d0+Fl+"?",Fl,bd,bn,sh].join("|")+")",LS=RegExp(jc,"g"),h0=RegExp(Fl,"g"),Vl=RegExp(vd+"(?="+vd+")|"+Ua+Uc,"g"),jS=RegExp([Ul+"?"+oh+"+"+tg+"(?="+[Fc,Ul,"$"].join("|")+")",f0+"+"+ng+"(?="+[Fc,Ul+ah,"$"].join("|")+")",Ul+"?"+ah+"+"+tg,Ul+"+"+ng,Fa,ja,u0,wd].join("|"),"g"),p0=RegExp("["+eg+Nn+wo+ih+"]"),ch=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,m0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],FS=-1,Pn={};Pn[$t]=Pn[cn]=Pn[dn]=Pn[bt]=Pn[fn]=Pn[_n]=Pn[or]=Pn[ci]=Pn[Ur]=!0,Pn[ke]=Pn[Pe]=Pn[Ne]=Pn[ge]=Pn[ht]=Pn[_e]=Pn[dt]=Pn[mt]=Pn[Ct]=Pn[jn]=Pn[ln]=Pn[Q]=Pn[le]=Pn[ye]=Pn[Be]=!1;var Cn={};Cn[ke]=Cn[Pe]=Cn[Ne]=Cn[ht]=Cn[ge]=Cn[_e]=Cn[$t]=Cn[cn]=Cn[dn]=Cn[bt]=Cn[fn]=Cn[Ct]=Cn[jn]=Cn[ln]=Cn[Q]=Cn[le]=Cn[ye]=Cn[qe]=Cn[_n]=Cn[or]=Cn[ci]=Cn[Ur]=!0,Cn[dt]=Cn[mt]=Cn[Be]=!1;var Vc={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},uh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},US={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},VS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rg=parseFloat,dh=parseInt,fh=typeof Wu=="object"&&Wu&&Wu.Object===Object&&Wu,g0=typeof self=="object"&&self&&self.Object===Object&&self,Yn=fh||g0||Function("return this")(),Sd=e&&!e.nodeType&&e,So=Sd&&!0&&t&&!t.nodeType&&t,ig=So&&So.exports===Sd,Bc=ig&&fh.process,Ti=function(){try{var oe=So&&So.require&&So.require("util").types;return oe||Bc&&Bc.binding&&Bc.binding("util")}catch{}}(),sg=Ti&&Ti.isArrayBuffer,Li=Ti&&Ti.isDate,Bl=Ti&&Ti.isMap,hh=Ti&&Ti.isRegExp,zc=Ti&&Ti.isSet,v0=Ti&&Ti.isTypedArray;function Ei(oe,Me,we){switch(we.length){case 0:return oe.call(Me);case 1:return oe.call(Me,we[0]);case 2:return oe.call(Me,we[0],we[1]);case 3:return oe.call(Me,we[0],we[1],we[2])}return oe.apply(Me,we)}function og(oe,Me,we,tt){for(var jt=-1,gn=oe==null?0:oe.length;++jt<gn;){var gr=oe[jt];Me(tt,gr,we(gr),oe)}return tt}function di(oe,Me){for(var we=-1,tt=oe==null?0:oe.length;++we<tt&&Me(oe[we],we,oe)!==!1;);return oe}function ph(oe,Me){for(var we=oe==null?0:oe.length;we--&&Me(oe[we],we,oe)!==!1;);return oe}function ag(oe,Me){for(var we=-1,tt=oe==null?0:oe.length;++we<tt;)if(!Me(oe[we],we,oe))return!1;return!0}function Va(oe,Me){for(var we=-1,tt=oe==null?0:oe.length,jt=0,gn=[];++we<tt;){var gr=oe[we];Me(gr,we,oe)&&(gn[jt++]=gr)}return gn}function mh(oe,Me){var we=oe==null?0:oe.length;return!!we&&$c(oe,Me,0)>-1}function lg(oe,Me,we){for(var tt=-1,jt=oe==null?0:oe.length;++tt<jt;)if(we(Me,oe[tt]))return!0;return!1}function zn(oe,Me){for(var we=-1,tt=oe==null?0:oe.length,jt=Array(tt);++we<tt;)jt[we]=Me(oe[we],we,oe);return jt}function Ba(oe,Me){for(var we=-1,tt=Me.length,jt=oe.length;++we<tt;)oe[jt+we]=Me[we];return oe}function cg(oe,Me,we,tt){var jt=-1,gn=oe==null?0:oe.length;for(tt&&gn&&(we=oe[++jt]);++jt<gn;)we=Me(we,oe[jt],jt,oe);return we}function BS(oe,Me,we,tt){var jt=oe==null?0:oe.length;for(tt&&jt&&(we=oe[--jt]);jt--;)we=Me(we,oe[jt],jt,oe);return we}function ug(oe,Me){for(var we=-1,tt=oe==null?0:oe.length;++we<tt;)if(Me(oe[we],we,oe))return!0;return!1}var zS=fg("length");function y0(oe){return oe.split("")}function $S(oe){return oe.match(It)||[]}function b0(oe,Me,we){var tt;return we(oe,function(jt,gn,gr){if(Me(jt,gn,gr))return tt=gn,!1}),tt}function gh(oe,Me,we,tt){for(var jt=oe.length,gn=we+(tt?1:-1);tt?gn--:++gn<jt;)if(Me(oe[gn],gn,oe))return gn;return-1}function $c(oe,Me,we){return Me===Me?bh(oe,Me,we):gh(oe,x0,we)}function dg(oe,Me,we,tt){for(var jt=we-1,gn=oe.length;++jt<gn;)if(tt(oe[jt],Me))return jt;return-1}function x0(oe){return oe!==oe}function w0(oe,Me){var we=oe==null?0:oe.length;return we?hg(oe,Me)/we:ae}function fg(oe){return function(Me){return Me==null?n:Me[oe]}}function vh(oe){return function(Me){return oe==null?n:oe[Me]}}function S0(oe,Me,we,tt,jt){return jt(oe,function(gn,gr,On){we=tt?(tt=!1,gn):Me(we,gn,gr,On)}),we}function WS(oe,Me){var we=oe.length;for(oe.sort(Me);we--;)oe[we]=oe[we].value;return oe}function hg(oe,Me){for(var we,tt=-1,jt=oe.length;++tt<jt;){var gn=Me(oe[tt]);gn!==n&&(we=we===n?gn:we+gn)}return we}function pg(oe,Me){for(var we=-1,tt=Array(oe);++we<oe;)tt[we]=Me(we);return tt}function HS(oe,Me){return zn(Me,function(we){return[we,oe[we]]})}function C0(oe){return oe&&oe.slice(0,xh(oe)+1).replace(He,"")}function Yi(oe){return function(Me){return oe(Me)}}function Cd(oe,Me){return zn(Me,function(we){return oe[we]})}function Xo(oe,Me){return oe.has(Me)}function k0(oe,Me){for(var we=-1,tt=oe.length;++we<tt&&$c(Me,oe[we],0)>-1;);return we}function mg(oe,Me){for(var we=oe.length;we--&&$c(Me,oe[we],0)>-1;);return we}function T0(oe,Me){for(var we=oe.length,tt=0;we--;)oe[we]===Me&&++tt;return tt}var E0=vh(Vc),_0=vh(uh);function P0(oe){return"\\"+VS[oe]}function Wc(oe,Me){return oe==null?n:oe[Me]}function Hc(oe){return p0.test(oe)}function qS(oe){return ch.test(oe)}function KS(oe){for(var Me,we=[];!(Me=oe.next()).done;)we.push(Me.value);return we}function yh(oe){var Me=-1,we=Array(oe.size);return oe.forEach(function(tt,jt){we[++Me]=[jt,tt]}),we}function gg(oe,Me){return function(we){return oe(Me(we))}}function ms(oe,Me){for(var we=-1,tt=oe.length,jt=0,gn=[];++we<tt;){var gr=oe[we];(gr===Me||gr===h)&&(oe[we]=h,gn[jt++]=we)}return gn}function za(oe){var Me=-1,we=Array(oe.size);return oe.forEach(function(tt){we[++Me]=tt}),we}function GS(oe){var Me=-1,we=Array(oe.size);return oe.forEach(function(tt){we[++Me]=[tt,tt]}),we}function bh(oe,Me,we){for(var tt=we-1,jt=oe.length;++tt<jt;)if(oe[tt]===Me)return tt;return-1}function YS(oe,Me,we){for(var tt=we+1;tt--;)if(oe[tt]===Me)return tt;return tt}function zl(oe){return Hc(oe)?I0(oe):zS(oe)}function Qi(oe){return Hc(oe)?M0(oe):y0(oe)}function xh(oe){for(var Me=oe.length;Me--&&lt.test(oe.charAt(Me)););return Me}var R0=vh(US);function I0(oe){for(var Me=Vl.lastIndex=0;Vl.test(oe);)++Me;return Me}function M0(oe){return oe.match(Vl)||[]}function QS(oe){return oe.match(jS)||[]}var JS=function oe(Me){Me=Me==null?Yn:qc.defaults(Yn.Object(),Me,qc.pick(Yn,m0));var we=Me.Array,tt=Me.Date,jt=Me.Error,gn=Me.Function,gr=Me.Math,On=Me.Object,kd=Me.RegExp,XS=Me.String,gs=Me.TypeError,Zo=we.prototype,vg=gn.prototype,Co=On.prototype,Kc=Me["__core-js_shared__"],Td=vg.toString,vn=Co.hasOwnProperty,Gc=0,wh=function(){var d=/[^.]+$/.exec(Kc&&Kc.keys&&Kc.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),Ed=Co.toString,Sh=Td.call(On),A0=Yn._,N0=kd("^"+Td.call(vn).replace(Se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_d=ig?Me.Buffer:n,ea=Me.Symbol,Pd=Me.Uint8Array,yg=_d?_d.allocUnsafe:n,Qs=gg(On.getPrototypeOf,On),Ch=On.create,kh=Co.propertyIsEnumerable,Th=Zo.splice,O0=ea?ea.isConcatSpreadable:n,ta=ea?ea.iterator:n,$l=ea?ea.toStringTag:n,Rd=function(){try{var d=Za(On,"defineProperty");return d({},"",{}),d}catch{}}(),D0=Me.clearTimeout!==Yn.clearTimeout&&Me.clearTimeout,Hn=tt&&tt.now!==Yn.Date.now&&tt.now,bg=Me.setTimeout!==Yn.setTimeout&&Me.setTimeout,Wl=gr.ceil,$a=gr.floor,Eh=On.getOwnPropertySymbols,xg=_d?_d.isBuffer:n,Yc=Me.isFinite,_h=Zo.join,Qc=gg(On.keys,On),vr=gr.max,fi=gr.min,ZS=tt.now,L0=Me.parseInt,Id=gr.random,Ph=Zo.reverse,Md=Za(Me,"DataView"),Hl=Za(Me,"Map"),Ad=Za(Me,"Promise"),Wa=Za(Me,"Set"),Nd=Za(Me,"WeakMap"),Jc=Za(On,"create"),Rh=Nd&&new Nd,Xc={},wg=el(Md),Ha=el(Hl),j0=el(Ad),Zc=el(Wa),ko=el(Nd),qa=ea?ea.prototype:n,Ji=qa?qa.valueOf:n,Ih=qa?qa.toString:n;function F(d){if(br(d)&&!zt(d)&&!(d instanceof Bt)){if(d instanceof hi)return d;if(vn.call(d,"__wrapped__"))return db(d)}return new hi(d)}var eu=function(){function d(){}return function(p){if(!dr(p))return{};if(Ch)return Ch(p);d.prototype=p;var x=new d;return d.prototype=n,x}}();function To(){}function hi(d,p){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=n}F.templateSettings={escape:Vn,evaluate:Gn,interpolate:Pr,variable:"",imports:{_:F}},F.prototype=To.prototype,F.prototype.constructor=F,hi.prototype=eu(To.prototype),hi.prototype.constructor=hi;function Bt(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function Mh(){var d=new Bt(this.__wrapped__);return d.__actions__=Pi(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=Pi(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=Pi(this.__views__),d}function Sg(){if(this.__filtered__){var d=new Bt(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function tu(){var d=this.__wrapped__.value(),p=this.__dir__,x=zt(d),R=p<0,D=x?d.length:0,U=Qg(0,D,this.__views__),H=U.start,ee=U.end,ce=ee-H,Oe=R?ee:H-1,De=this.__iteratees__,ze=De.length,et=0,wt=fi(ce,this.__takeCount__);if(!x||!R&&D==ce&&wt==ce)return cu(d,this.__actions__);var Nt=[];e:for(;ce--&&et<wt;){Oe+=p;for(var Gt=-1,Ot=d[Oe];++Gt<ze;){var rn=De[Gt],pn=rn.iteratee,oo=rn.type,ns=pn(Ot);if(oo==Ie)Ot=ns;else if(!ns){if(oo==ue)continue e;break e}}Nt[et++]=Ot}return Nt}Bt.prototype=eu(To.prototype),Bt.prototype.constructor=Bt;function ji(d){var p=-1,x=d==null?0:d.length;for(this.clear();++p<x;){var R=d[p];this.set(R[0],R[1])}}function qn(){this.__data__=Jc?Jc(null):{},this.size=0}function $n(d){var p=this.has(d)&&delete this.__data__[d];return this.size-=p?1:0,p}function Ka(d){var p=this.__data__;if(Jc){var x=p[d];return x===u?n:x}return vn.call(p,d)?p[d]:n}function pi(d){var p=this.__data__;return Jc?p[d]!==n:vn.call(p,d)}function Fi(d,p){var x=this.__data__;return this.size+=this.has(d)?0:1,x[d]=Jc&&p===n?u:p,this}ji.prototype.clear=qn,ji.prototype.delete=$n,ji.prototype.get=Ka,ji.prototype.has=pi,ji.prototype.set=Fi;function _i(d){var p=-1,x=d==null?0:d.length;for(this.clear();++p<x;){var R=d[p];this.set(R[0],R[1])}}function nu(){this.__data__=[],this.size=0}function Ui(d){var p=this.__data__,x=gi(p,d);if(x<0)return!1;var R=p.length-1;return x==R?p.pop():Th.call(p,x,1),--this.size,!0}function Ah(d){var p=this.__data__,x=gi(p,d);return x<0?n:p[x][1]}function F0(d){return gi(this.__data__,d)>-1}function U0(d,p){var x=this.__data__,R=gi(x,d);return R<0?(++this.size,x.push([d,p])):x[R][1]=p,this}_i.prototype.clear=nu,_i.prototype.delete=Ui,_i.prototype.get=Ah,_i.prototype.has=F0,_i.prototype.set=U0;function vs(d){var p=-1,x=d==null?0:d.length;for(this.clear();++p<x;){var R=d[p];this.set(R[0],R[1])}}function V0(){this.size=0,this.__data__={hash:new ji,map:new(Hl||_i),string:new ji}}function na(d){var p=Yd(this,d).delete(d);return this.size-=p?1:0,p}function Nh(d){return Yd(this,d).get(d)}function Cg(d){return Yd(this,d).has(d)}function B0(d,p){var x=Yd(this,d),R=x.size;return x.set(d,p),this.size+=x.size==R?0:1,this}vs.prototype.clear=V0,vs.prototype.delete=na,vs.prototype.get=Nh,vs.prototype.has=Cg,vs.prototype.set=B0;function ql(d){var p=-1,x=d==null?0:d.length;for(this.__data__=new vs;++p<x;)this.add(d[p])}function Ga(d){return this.__data__.set(d,u),this}function ru(d){return this.__data__.has(d)}ql.prototype.add=ql.prototype.push=Ga,ql.prototype.has=ru;function mi(d){var p=this.__data__=new _i(d);this.size=p.size}function Oh(){this.__data__=new _i,this.size=0}function Dh(d){var p=this.__data__,x=p.delete(d);return this.size=p.size,x}function ys(d){return this.__data__.get(d)}function bs(d){return this.__data__.has(d)}function Kl(d,p){var x=this.__data__;if(x instanceof _i){var R=x.__data__;if(!Hl||R.length<i-1)return R.push([d,p]),this.size=++x.size,this;x=this.__data__=new vs(R)}return x.set(d,p),this.size=x.size,this}mi.prototype.clear=Oh,mi.prototype.delete=Dh,mi.prototype.get=ys,mi.prototype.has=bs,mi.prototype.set=Kl;function Eo(d,p){var x=zt(d),R=!x&&lf(d),D=!x&&!R&&bu(d),U=!x&&!R&&!D&&kp(d),H=x||R||D||U,ee=H?pg(d.length,XS):[],ce=ee.length;for(var Oe in d)(p||vn.call(d,Oe))&&!(H&&(Oe=="length"||D&&(Oe=="offset"||Oe=="parent")||U&&(Oe=="buffer"||Oe=="byteLength"||Oe=="byteOffset")||Jn(Oe,ce)))&&ee.push(Oe);return ee}function _o(d){var p=d.length;return p?d[au(0,p-1)]:n}function Gl(d,p){return ap(Pi(d),ra(p,0,d.length))}function z0(d){return ap(Pi(d))}function Od(d,p,x){(x!==n&&!ha(d[p],x)||x===n&&!(p in d))&&Po(d,p,x)}function Yl(d,p,x){var R=d[p];(!(vn.call(d,p)&&ha(R,x))||x===n&&!(p in d))&&Po(d,p,x)}function gi(d,p){for(var x=d.length;x--;)if(ha(d[x][0],p))return x;return-1}function Xi(d,p,x,R){return Io(d,function(D,U,H){p(R,D,x(D),H)}),R}function Kn(d,p){return d&&Xs(p,bi(p),d)}function Js(d,p){return d&&Xs(p,Ps(p),d)}function Po(d,p,x){p=="__proto__"&&Rd?Rd(d,p,{configurable:!0,enumerable:!0,value:x,writable:!0}):d[p]=x}function Lh(d,p){for(var x=-1,R=p.length,D=we(R),U=d==null;++x<R;)D[x]=U?n:CC(d,p[x]);return D}function ra(d,p,x){return d===d&&(x!==n&&(d=d<=x?d:x),p!==n&&(d=d>=p?d:p)),d}function Vi(d,p,x,R,D,U){var H,ee=p&m,ce=p&v,Oe=p&S;if(x&&(H=D?x(d,R,D,U):x(d)),H!==n)return H;if(!dr(d))return d;var De=zt(d);if(De){if(H=Jd(d),!ee)return Pi(d,H)}else{var ze=Xr(d),et=ze==mt||ze==Et;if(bu(d))return Fg(d,ee);if(ze==ln||ze==ke||et&&!D){if(H=ce||et?{}:Zr(d),!ee)return ce?tC(d,Js(H,d)):Yh(d,Kn(H,d))}else{if(!Cn[ze])return D?d:{};H=nC(d,ze,ee)}}U||(U=new mi);var wt=U.get(d);if(wt)return wt;U.set(d,H),BP(d)?d.forEach(function(Ot){H.add(Vi(Ot,p,x,Ot,d,U))}):UP(d)&&d.forEach(function(Ot,rn){H.set(rn,Vi(Ot,p,x,rn,d,U))});var Nt=Oe?ce?Gd:Kd:ce?Ps:bi,Gt=De?n:Nt(d);return di(Gt||d,function(Ot,rn){Gt&&(rn=Ot,Ot=d[rn]),Yl(H,rn,Vi(Ot,p,x,rn,d,U))}),H}function $0(d){var p=bi(d);return function(x){return Dd(x,d,p)}}function Dd(d,p,x){var R=x.length;if(d==null)return!R;for(d=On(d);R--;){var D=x[R],U=p[D],H=d[D];if(H===n&&!(D in d)||!U(H))return!1}return!0}function kg(d,p,x){if(typeof d!="function")throw new gs(o);return gu(function(){d.apply(n,x)},p)}function Ro(d,p,x,R){var D=-1,U=mh,H=!0,ee=d.length,ce=[],Oe=p.length;if(!ee)return ce;x&&(p=zn(p,Yi(x))),R?(U=lg,H=!1):p.length>=i&&(U=Xo,H=!1,p=new ql(p));e:for(;++D<ee;){var De=d[D],ze=x==null?De:x(De);if(De=R||De!==0?De:0,H&&ze===ze){for(var et=Oe;et--;)if(p[et]===ze)continue e;ce.push(De)}else U(p,ze,R)||ce.push(De)}return ce}var Io=ks(Zi),W0=ks(Ya,!0);function Ld(d,p){var x=!0;return Io(d,function(R,D,U){return x=!!p(R,D,U),x}),x}function Ql(d,p,x){for(var R=-1,D=d.length;++R<D;){var U=d[R],H=p(U);if(H!=null&&(ee===n?H===H&&!so(H):x(H,ee)))var ee=H,ce=U}return ce}function H0(d,p,x,R){var D=d.length;for(x=qt(x),x<0&&(x=-x>D?0:D+x),R=R===n||R>D?D:qt(R),R<0&&(R+=D),R=x>R?0:$P(R);x<R;)d[x++]=p;return d}function Tg(d,p){var x=[];return Io(d,function(R,D,U){p(R,D,U)&&x.push(R)}),x}function rr(d,p,x,R,D){var U=-1,H=d.length;for(x||(x=ip),D||(D=[]);++U<H;){var ee=d[U];p>0&&x(ee)?p>1?rr(ee,p-1,x,R,D):Ba(D,ee):R||(D[D.length]=ee)}return D}var jh=Jh(),jd=Jh(!0);function Zi(d,p){return d&&jh(d,p,bi)}function Ya(d,p){return d&&jd(d,p,bi)}function iu(d,p){return Va(p,function(x){return cc(d[x])})}function ia(d,p){p=No(p,d);for(var x=0,R=p.length;d!=null&&x<R;)d=d[no(p[x++])];return x&&x==R?d:n}function Fh(d,p,x){var R=p(d);return zt(d)?R:Ba(R,x(d))}function Qr(d){return d==null?d===n?Ge:wn:$l&&$l in On(d)?rp(d):Xg(d)}function Qa(d,p){return d>p}function xs(d,p){return d!=null&&vn.call(d,p)}function Jl(d,p){return d!=null&&p in On(d)}function Eg(d,p,x){return d>=fi(p,x)&&d<vr(p,x)}function Uh(d,p,x){for(var R=x?lg:mh,D=d[0].length,U=d.length,H=U,ee=we(U),ce=1/0,Oe=[];H--;){var De=d[H];H&&p&&(De=zn(De,Yi(p))),ce=fi(De.length,ce),ee[H]=!x&&(p||D>=120&&De.length>=120)?new ql(H&&De):n}De=d[0];var ze=-1,et=ee[0];e:for(;++ze<D&&Oe.length<ce;){var wt=De[ze],Nt=p?p(wt):wt;if(wt=x||wt!==0?wt:0,!(et?Xo(et,Nt):R(Oe,Nt,x))){for(H=U;--H;){var Gt=ee[H];if(!(Gt?Xo(Gt,Nt):R(d[H],Nt,x)))continue e}et&&et.push(Nt),Oe.push(wt)}}return Oe}function sa(d,p,x,R){return Zi(d,function(D,U,H){p(R,x(D),U,H)}),R}function ws(d,p,x){p=No(p,d),d=Br(d,p);var R=d==null?d:d[no(Mi(p))];return R==null?n:Ei(R,d,x)}function Vh(d){return br(d)&&Qr(d)==ke}function q0(d){return br(d)&&Qr(d)==Ne}function oa(d){return br(d)&&Qr(d)==_e}function Ss(d,p,x,R,D){return d===p?!0:d==null||p==null||!br(d)&&!br(p)?d!==d&&p!==p:Bh(d,p,x,R,Ss,D)}function Bh(d,p,x,R,D,U){var H=zt(d),ee=zt(p),ce=H?Pe:Xr(d),Oe=ee?Pe:Xr(p);ce=ce==ke?ln:ce,Oe=Oe==ke?ln:Oe;var De=ce==ln,ze=Oe==ln,et=ce==Oe;if(et&&bu(d)){if(!bu(p))return!1;H=!0,De=!1}if(et&&!De)return U||(U=new mi),H||kp(d)?Gg(d,p,x,R,D,U):Yg(d,p,ce,x,R,D,U);if(!(x&k)){var wt=De&&vn.call(d,"__wrapped__"),Nt=ze&&vn.call(p,"__wrapped__");if(wt||Nt){var Gt=wt?d.value():d,Ot=Nt?p.value():p;return U||(U=new mi),D(Gt,Ot,x,R,U)}}return et?(U||(U=new mi),rb(d,p,x,R,D,U)):!1}function K0(d){return br(d)&&Xr(d)==Ct}function su(d,p,x,R){var D=x.length,U=D,H=!R;if(d==null)return!U;for(d=On(d);D--;){var ee=x[D];if(H&&ee[2]?ee[1]!==d[ee[0]]:!(ee[0]in d))return!1}for(;++D<U;){ee=x[D];var ce=ee[0],Oe=d[ce],De=ee[1];if(H&&ee[2]){if(Oe===n&&!(ce in d))return!1}else{var ze=new mi;if(R)var et=R(Oe,De,ce,d,p,ze);if(!(et===n?Ss(De,Oe,k|C,R,ze):et))return!1}}return!0}function _g(d){if(!dr(d)||ob(d))return!1;var p=cc(d)?N0:Bn;return p.test(el(d))}function Fd(d){return br(d)&&Qr(d)==Q}function Mo(d){return br(d)&&Xr(d)==le}function Ud(d){return br(d)&&Tb(d.length)&&!!Pn[Qr(d)]}function ou(d){return typeof d=="function"?d:d==null?Rs:typeof d=="object"?zt(d)?Qn(d[0],d[1]):zh(d):eR(d)}function aa(d){if(!da(d))return Qc(d);var p=[];for(var x in On(d))vn.call(d,x)&&x!="constructor"&&p.push(x);return p}function Pg(d){if(!dr(d))return cb(d);var p=da(d),x=[];for(var R in d)R=="constructor"&&(p||!vn.call(d,R))||x.push(R);return x}function Ja(d,p){return d<p}function Rg(d,p){var x=-1,R=_s(d)?we(d.length):[];return Io(d,function(D,U,H){R[++x]=p(D,U,H)}),R}function zh(d){var p=Qd(d);return p.length==1&&p[0][2]?sp(p[0][0],p[0][1]):function(x){return x===d||su(x,d,p)}}function Qn(d,p){return st(d)&&Zd(p)?sp(no(d),p):function(x){var R=CC(x,d);return R===n&&R===p?kC(x,d):Ss(p,R,k|C)}}function Xl(d,p,x,R,D){d!==p&&jh(p,function(U,H){if(D||(D=new mi),dr(U))Ig(d,p,H,x,Xl,R,D);else{var ee=R?R(Lo(d,H),U,H+"",d,p,D):n;ee===n&&(ee=U),Od(d,H,ee)}},Ps)}function Ig(d,p,x,R,D,U,H){var ee=Lo(d,x),ce=Lo(p,x),Oe=H.get(ce);if(Oe){Od(d,x,Oe);return}var De=U?U(ee,ce,x+"",d,p,H):n,ze=De===n;if(ze){var et=zt(ce),wt=!et&&bu(ce),Nt=!et&&!wt&&kp(ce);De=ce,et||wt||Nt?zt(ee)?De=ee:Mr(ee)?De=Pi(ee):wt?(ze=!1,De=Fg(ce,!0)):Nt?(ze=!1,De=X0(ce,!0)):De=[]:gv(ce)||lf(ce)?(De=ee,lf(ee)?De=WP(ee):(!dr(ee)||cc(ee))&&(De=Zr(ce))):ze=!1}ze&&(H.set(ce,De),D(De,ce,R,U,H),H.delete(ce)),Od(d,x,De)}function $h(d,p){var x=d.length;if(x)return p+=p<0?x:0,Jn(p,x)?d[p]:n}function Vd(d,p,x){p.length?p=zn(p,function(U){return zt(U)?function(H){return ia(H,U.length===1?U[0]:U)}:U}):p=[Rs];var R=-1;p=zn(p,Yi(Rt()));var D=Rg(d,function(U,H,ee){var ce=zn(p,function(Oe){return Oe(U)});return{criteria:ce,index:++R,value:U}});return WS(D,function(U,H){return eC(U,H,x)})}function Mg(d,p){return Xa(d,p,function(x,R){return kC(d,R)})}function Xa(d,p,x){for(var R=-1,D=p.length,U={};++R<D;){var H=p[R],ee=ia(d,H);x(ee,H)&&ec(U,No(H,d),ee)}return U}function Zn(d){return function(p){return ia(p,d)}}function cr(d,p,x,R){var D=R?dg:$c,U=-1,H=p.length,ee=d;for(d===p&&(p=Pi(p)),x&&(ee=zn(d,Yi(x)));++U<H;)for(var ce=0,Oe=p[U],De=x?x(Oe):Oe;(ce=D(ee,De,ce,R))>-1;)ee!==d&&Th.call(ee,ce,1),Th.call(d,ce,1);return d}function Rr(d,p){for(var x=d?p.length:0,R=x-1;x--;){var D=p[x];if(x==R||D!==U){var U=D;Jn(D)?Th.call(d,D,1):qh(d,D)}}return d}function au(d,p){return d+$a(Id()*(p-d+1))}function Bd(d,p,x,R){for(var D=-1,U=vr(Wl((p-d)/(x||1)),0),H=we(U);U--;)H[R?U:++D]=d,d+=x;return H}function Zl(d,p){var x="";if(!d||p<1||p>q)return x;do p%2&&(x+=d),p=$a(p/2),p&&(d+=d);while(p);return x}function Ht(d,p){return es(op(d,p,Rs),d+"")}function vi(d){return _o(Tp(d))}function Ag(d,p){var x=Tp(d);return ap(x,ra(p,0,x.length))}function ec(d,p,x,R){if(!dr(d))return d;p=No(p,d);for(var D=-1,U=p.length,H=U-1,ee=d;ee!=null&&++D<U;){var ce=no(p[D]),Oe=x;if(ce==="__proto__"||ce==="constructor"||ce==="prototype")return d;if(D!=H){var De=ee[ce];Oe=R?R(De,ce,ee):n,Oe===n&&(Oe=dr(De)?De:Jn(p[D+1])?[]:{})}Yl(ee,ce,Oe),ee=ee[ce]}return d}var Wh=Rh?function(d,p){return Rh.set(d,p),d}:Rs,Ao=Rd?function(d,p){return Rd(d,"toString",{configurable:!0,enumerable:!1,value:EC(p),writable:!0})}:Rs;function Cs(d){return ap(Tp(d))}function yi(d,p,x){var R=-1,D=d.length;p<0&&(p=-p>D?0:D+p),x=x>D?D:x,x<0&&(x+=D),D=p>x?0:x-p>>>0,p>>>=0;for(var U=we(D);++R<D;)U[R]=d[R+p];return U}function Ng(d,p){var x;return Io(d,function(R,D,U){return x=p(R,D,U),!x}),!!x}function lu(d,p,x){var R=0,D=d==null?R:d.length;if(typeof p=="number"&&p===p&&D<=ie){for(;R<D;){var U=R+D>>>1,H=d[U];H!==null&&!so(H)&&(x?H<=p:H<p)?R=U+1:D=U}return D}return Hh(d,p,Rs,x)}function Hh(d,p,x,R){var D=0,U=d==null?0:d.length;if(U===0)return 0;p=x(p);for(var H=p!==p,ee=p===null,ce=so(p),Oe=p===n;D<U;){var De=$a((D+U)/2),ze=x(d[De]),et=ze!==n,wt=ze===null,Nt=ze===ze,Gt=so(ze);if(H)var Ot=R||Nt;else Oe?Ot=Nt&&(R||et):ee?Ot=Nt&&et&&(R||!wt):ce?Ot=Nt&&et&&!wt&&(R||!Gt):wt||Gt?Ot=!1:Ot=R?ze<=p:ze<p;Ot?D=De+1:U=De}return fi(U,fe)}function Og(d,p){for(var x=-1,R=d.length,D=0,U=[];++x<R;){var H=d[x],ee=p?p(H):H;if(!x||!ha(ee,ce)){var ce=ee;U[D++]=H===0?0:H}}return U}function Dg(d){return typeof d=="number"?d:so(d)?ae:+d}function Bi(d){if(typeof d=="string")return d;if(zt(d))return zn(d,Bi)+"";if(so(d))return Ih?Ih.call(d):"";var p=d+"";return p=="0"&&1/d==-1/0?"-0":p}function la(d,p,x){var R=-1,D=mh,U=d.length,H=!0,ee=[],ce=ee;if(x)H=!1,D=lg;else if(U>=i){var Oe=p?null:nb(d);if(Oe)return za(Oe);H=!1,D=Xo,ce=new ql}else ce=p?[]:ee;e:for(;++R<U;){var De=d[R],ze=p?p(De):De;if(De=x||De!==0?De:0,H&&ze===ze){for(var et=ce.length;et--;)if(ce[et]===ze)continue e;p&&ce.push(ze),ee.push(De)}else D(ce,ze,x)||(ce!==ee&&ce.push(ze),ee.push(De))}return ee}function qh(d,p){return p=No(p,d),d=Br(d,p),d==null||delete d[no(Mi(p))]}function Lg(d,p,x,R){return ec(d,p,x(ia(d,p)),R)}function zd(d,p,x,R){for(var D=d.length,U=R?D:-1;(R?U--:++U<D)&&p(d[U],U,d););return x?yi(d,R?0:U,R?U+1:D):yi(d,R?U+1:0,R?D:U)}function cu(d,p){var x=d;return x instanceof Bt&&(x=x.value()),cg(p,function(R,D){return D.func.apply(D.thisArg,Ba([R],D.args))},x)}function Kh(d,p,x){var R=d.length;if(R<2)return R?la(d[0]):[];for(var D=-1,U=we(R);++D<R;)for(var H=d[D],ee=-1;++ee<R;)ee!=D&&(U[D]=Ro(U[D]||H,d[ee],p,x));return la(rr(U,1),p,x)}function $d(d,p,x){for(var R=-1,D=d.length,U=p.length,H={};++R<D;){var ee=R<U?p[R]:n;x(H,d[R],ee)}return H}function uu(d){return Mr(d)?d:[]}function Gh(d){return typeof d=="function"?d:Rs}function No(d,p){return zt(d)?d:st(d,p)?[d]:tv(Dn(d))}var G0=Ht;function ca(d,p,x){var R=d.length;return x=x===n?R:x,!p&&x>=R?d:yi(d,p,x)}var jg=D0||function(d){return Yn.clearTimeout(d)};function Fg(d,p){if(p)return d.slice();var x=d.length,R=yg?yg(x):new d.constructor(x);return d.copy(R),R}function Wd(d){var p=new d.constructor(d.byteLength);return new Pd(p).set(new Pd(d)),p}function Y0(d,p){var x=p?Wd(d.buffer):d.buffer;return new d.constructor(x,d.byteOffset,d.byteLength)}function Q0(d){var p=new d.constructor(d.source,Sn.exec(d));return p.lastIndex=d.lastIndex,p}function J0(d){return Ji?On(Ji.call(d)):{}}function X0(d,p){var x=p?Wd(d.buffer):d.buffer;return new d.constructor(x,d.byteOffset,d.length)}function Ug(d,p){if(d!==p){var x=d!==n,R=d===null,D=d===d,U=so(d),H=p!==n,ee=p===null,ce=p===p,Oe=so(p);if(!ee&&!Oe&&!U&&d>p||U&&H&&ce&&!ee&&!Oe||R&&H&&ce||!x&&ce||!D)return 1;if(!R&&!U&&!Oe&&d<p||Oe&&x&&D&&!R&&!U||ee&&x&&D||!H&&D||!ce)return-1}return 0}function eC(d,p,x){for(var R=-1,D=d.criteria,U=p.criteria,H=D.length,ee=x.length;++R<H;){var ce=Ug(D[R],U[R]);if(ce){if(R>=ee)return ce;var Oe=x[R];return ce*(Oe=="desc"?-1:1)}}return d.index-p.index}function Z0(d,p,x,R){for(var D=-1,U=d.length,H=x.length,ee=-1,ce=p.length,Oe=vr(U-H,0),De=we(ce+Oe),ze=!R;++ee<ce;)De[ee]=p[ee];for(;++D<H;)(ze||D<U)&&(De[x[D]]=d[D]);for(;Oe--;)De[ee++]=d[D++];return De}function Vg(d,p,x,R){for(var D=-1,U=d.length,H=-1,ee=x.length,ce=-1,Oe=p.length,De=vr(U-ee,0),ze=we(De+Oe),et=!R;++D<De;)ze[D]=d[D];for(var wt=D;++ce<Oe;)ze[wt+ce]=p[ce];for(;++H<ee;)(et||D<U)&&(ze[wt+x[H]]=d[D++]);return ze}function Pi(d,p){var x=-1,R=d.length;for(p||(p=we(R));++x<R;)p[x]=d[x];return p}function Xs(d,p,x,R){var D=!x;x||(x={});for(var U=-1,H=p.length;++U<H;){var ee=p[U],ce=R?R(x[ee],d[ee],ee,x,d):n;ce===n&&(ce=d[ee]),D?Po(x,ee,ce):Yl(x,ee,ce)}return x}function Yh(d,p){return Xs(d,Zs(d),p)}function tC(d,p){return Xs(d,ib(d),p)}function Qh(d,p){return function(x,R){var D=zt(x)?og:Xi,U=p?p():{};return D(x,d,Rt(R,2),U)}}function du(d){return Ht(function(p,x){var R=-1,D=x.length,U=D>1?x[D-1]:n,H=D>2?x[2]:n;for(U=d.length>3&&typeof U=="function"?(D--,U):n,H&&Ii(x[0],x[1],H)&&(U=D<3?n:U,D=1),p=On(p);++R<D;){var ee=x[R];ee&&d(p,ee,R,U)}return p})}function ks(d,p){return function(x,R){if(x==null)return x;if(!_s(x))return d(x,R);for(var D=x.length,U=p?D:-1,H=On(x);(p?U--:++U<D)&&R(H[U],U,H)!==!1;);return x}}function Jh(d){return function(p,x,R){for(var D=-1,U=On(p),H=R(p),ee=H.length;ee--;){var ce=H[d?ee:++D];if(x(U[ce],ce,U)===!1)break}return p}}function Xh(d,p,x){var R=p&E,D=fu(d);function U(){var H=this&&this!==Yn&&this instanceof U?D:d;return H.apply(R?x:this,arguments)}return U}function Bg(d){return function(p){p=Dn(p);var x=Hc(p)?Qi(p):n,R=x?x[0]:p.charAt(0),D=x?ca(x,1).join(""):p.slice(1);return R[d]()+D}}function tc(d){return function(p){return cg(XP(JP(p).replace(LS,"")),d,"")}}function fu(d){return function(){var p=arguments;switch(p.length){case 0:return new d;case 1:return new d(p[0]);case 2:return new d(p[0],p[1]);case 3:return new d(p[0],p[1],p[2]);case 4:return new d(p[0],p[1],p[2],p[3]);case 5:return new d(p[0],p[1],p[2],p[3],p[4]);case 6:return new d(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new d(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var x=eu(d.prototype),R=d.apply(x,p);return dr(R)?R:x}}function zg(d,p,x){var R=fu(d);function D(){for(var U=arguments.length,H=we(U),ee=U,ce=ua(D);ee--;)H[ee]=arguments[ee];var Oe=U<3&&H[0]!==ce&&H[U-1]!==ce?[]:ms(H,ce);if(U-=Oe.length,U<x)return Ri(d,p,hu,D.placeholder,n,H,Oe,n,n,x-U);var De=this&&this!==Yn&&this instanceof D?R:d;return Ei(De,this,H)}return D}function nc(d){return function(p,x,R){var D=On(p);if(!_s(p)){var U=Rt(x,3);p=bi(p),x=function(ee){return U(D[ee],ee,D)}}var H=d(p,x,R);return H>-1?D[U?p[H]:H]:n}}function Zh(d){return Do(function(p){var x=p.length,R=x,D=hi.prototype.thru;for(d&&p.reverse();R--;){var U=p[R];if(typeof U!="function")throw new gs(o);if(D&&!H&&pu(U)=="wrapper")var H=new hi([],!0)}for(R=H?R:x;++R<x;){U=p[R];var ee=pu(U),ce=ee=="wrapper"?np(U):n;ce&&Xd(ce[0])&&ce[1]==(j|A|N|V)&&!ce[4].length&&ce[9]==1?H=H[pu(ce[0])].apply(H,ce[3]):H=U.length==1&&Xd(U)?H[ee]():H.thru(U)}return function(){var Oe=arguments,De=Oe[0];if(H&&Oe.length==1&&zt(De))return H.plant(De).value();for(var ze=0,et=x?p[ze].apply(this,Oe):De;++ze<x;)et=p[ze].call(this,et);return et}})}function hu(d,p,x,R,D,U,H,ee,ce,Oe){var De=p&j,ze=p&E,et=p&_,wt=p&(A|I),Nt=p&z,Gt=et?n:fu(d);function Ot(){for(var rn=arguments.length,pn=we(rn),oo=rn;oo--;)pn[oo]=arguments[oo];if(wt)var ns=ua(Ot),ao=T0(pn,ns);if(R&&(pn=Z0(pn,R,D,wt)),U&&(pn=Vg(pn,U,H,wt)),rn-=ao,wt&&rn<Oe){var Ar=ms(pn,ns);return Ri(d,p,hu,Ot.placeholder,x,pn,Ar,ee,ce,Oe-rn)}var pa=ze?x:this,dc=et?pa[d]:d;return rn=pn.length,ee?pn=eo(pn,ee):Nt&&rn>1&&pn.reverse(),De&&ce<rn&&(pn.length=ce),this&&this!==Yn&&this instanceof Ot&&(dc=Gt||fu(dc)),dc.apply(pa,pn)}return Ot}function eb(d,p){return function(x,R){return sa(x,d,p(R),{})}}function Hd(d,p){return function(x,R){var D;if(x===n&&R===n)return p;if(x!==n&&(D=x),R!==n){if(D===n)return R;typeof x=="string"||typeof R=="string"?(x=Bi(x),R=Bi(R)):(x=Dg(x),R=Dg(R)),D=d(x,R)}return D}}function ep(d){return Do(function(p){return p=zn(p,Yi(Rt())),Ht(function(x){var R=this;return d(p,function(D){return Ei(D,R,x)})})})}function qd(d,p){p=p===n?" ":Bi(p);var x=p.length;if(x<2)return x?Zl(p,d):p;var R=Zl(p,Wl(d/zl(p)));return Hc(p)?ca(Qi(R),0,d).join(""):R.slice(0,d)}function tb(d,p,x,R){var D=p&E,U=fu(d);function H(){for(var ee=-1,ce=arguments.length,Oe=-1,De=R.length,ze=we(De+ce),et=this&&this!==Yn&&this instanceof H?U:d;++Oe<De;)ze[Oe]=R[Oe];for(;ce--;)ze[Oe++]=arguments[++ee];return Ei(et,D?x:this,ze)}return H}function $g(d){return function(p,x,R){return R&&typeof R!="number"&&Ii(p,x,R)&&(x=R=n),p=uc(p),x===n?(x=p,p=0):x=uc(x),R=R===n?p<x?1:-1:uc(R),Bd(p,x,R,d)}}function tp(d){return function(p,x){return typeof p=="string"&&typeof x=="string"||(p=jo(p),x=jo(x)),d(p,x)}}function Ri(d,p,x,R,D,U,H,ee,ce,Oe){var De=p&A,ze=De?H:n,et=De?n:H,wt=De?U:n,Nt=De?n:U;p|=De?N:O,p&=~(De?O:N),p&M||(p&=-4);var Gt=[d,p,D,wt,ze,Nt,et,ee,ce,Oe],Ot=x.apply(n,Gt);return Xd(d)&&Zg(Ot,Gt),Ot.placeholder=R,ev(Ot,d,p)}function Jr(d){var p=gr[d];return function(x,R){if(x=jo(x),R=R==null?0:fi(qt(R),292),R&&Yc(x)){var D=(Dn(x)+"e").split("e"),U=p(D[0]+"e"+(+D[1]+R));return D=(Dn(U)+"e").split("e"),+(D[0]+"e"+(+D[1]-R))}return p(x)}}var nb=Wa&&1/za(new Wa([,-0]))[1]==xe?function(d){return new Wa(d)}:RC;function Wg(d){return function(p){var x=Xr(p);return x==Ct?yh(p):x==le?GS(p):HS(p,d(p))}}function Oo(d,p,x,R,D,U,H,ee){var ce=p&_;if(!ce&&typeof d!="function")throw new gs(o);var Oe=R?R.length:0;if(Oe||(p&=-97,R=D=n),H=H===n?H:vr(qt(H),0),ee=ee===n?ee:qt(ee),Oe-=D?D.length:0,p&O){var De=R,ze=D;R=D=n}var et=ce?n:np(d),wt=[d,p,x,R,D,De,ze,U,H,ee];if(et&&lb(wt,et),d=wt[0],p=wt[1],x=wt[2],R=wt[3],D=wt[4],ee=wt[9]=wt[9]===n?ce?0:d.length:vr(wt[9]-Oe,0),!ee&&p&(A|I)&&(p&=-25),!p||p==E)var Nt=Xh(d,p,x);else p==A||p==I?Nt=zg(d,p,ee):(p==N||p==(E|N))&&!D.length?Nt=tb(d,p,x,R):Nt=hu.apply(n,wt);var Gt=et?Wh:Zg;return ev(Gt(Nt,wt),d,p)}function Hg(d,p,x,R){return d===n||ha(d,Co[x])&&!vn.call(R,x)?p:d}function qg(d,p,x,R,D,U){return dr(d)&&dr(p)&&(U.set(p,d),Xl(d,p,n,qg,U),U.delete(p)),d}function Kg(d){return gv(d)?n:d}function Gg(d,p,x,R,D,U){var H=x&k,ee=d.length,ce=p.length;if(ee!=ce&&!(H&&ce>ee))return!1;var Oe=U.get(d),De=U.get(p);if(Oe&&De)return Oe==p&&De==d;var ze=-1,et=!0,wt=x&C?new ql:n;for(U.set(d,p),U.set(p,d);++ze<ee;){var Nt=d[ze],Gt=p[ze];if(R)var Ot=H?R(Gt,Nt,ze,p,d,U):R(Nt,Gt,ze,d,p,U);if(Ot!==n){if(Ot)continue;et=!1;break}if(wt){if(!ug(p,function(rn,pn){if(!Xo(wt,pn)&&(Nt===rn||D(Nt,rn,x,R,U)))return wt.push(pn)})){et=!1;break}}else if(!(Nt===Gt||D(Nt,Gt,x,R,U))){et=!1;break}}return U.delete(d),U.delete(p),et}function Yg(d,p,x,R,D,U,H){switch(x){case ht:if(d.byteLength!=p.byteLength||d.byteOffset!=p.byteOffset)return!1;d=d.buffer,p=p.buffer;case Ne:return!(d.byteLength!=p.byteLength||!U(new Pd(d),new Pd(p)));case ge:case _e:case jn:return ha(+d,+p);case dt:return d.name==p.name&&d.message==p.message;case Q:case ye:return d==p+"";case Ct:var ee=yh;case le:var ce=R&k;if(ee||(ee=za),d.size!=p.size&&!ce)return!1;var Oe=H.get(d);if(Oe)return Oe==p;R|=C,H.set(d,p);var De=Gg(ee(d),ee(p),R,D,U,H);return H.delete(d),De;case qe:if(Ji)return Ji.call(d)==Ji.call(p)}return!1}function rb(d,p,x,R,D,U){var H=x&k,ee=Kd(d),ce=ee.length,Oe=Kd(p),De=Oe.length;if(ce!=De&&!H)return!1;for(var ze=ce;ze--;){var et=ee[ze];if(!(H?et in p:vn.call(p,et)))return!1}var wt=U.get(d),Nt=U.get(p);if(wt&&Nt)return wt==p&&Nt==d;var Gt=!0;U.set(d,p),U.set(p,d);for(var Ot=H;++ze<ce;){et=ee[ze];var rn=d[et],pn=p[et];if(R)var oo=H?R(pn,rn,et,p,d,U):R(rn,pn,et,d,p,U);if(!(oo===n?rn===pn||D(rn,pn,x,R,U):oo)){Gt=!1;break}Ot||(Ot=et=="constructor")}if(Gt&&!Ot){var ns=d.constructor,ao=p.constructor;ns!=ao&&"constructor"in d&&"constructor"in p&&!(typeof ns=="function"&&ns instanceof ns&&typeof ao=="function"&&ao instanceof ao)&&(Gt=!1)}return U.delete(d),U.delete(p),Gt}function Do(d){return es(op(d,n,cp),d+"")}function Kd(d){return Fh(d,bi,Zs)}function Gd(d){return Fh(d,Ps,ib)}var np=Rh?function(d){return Rh.get(d)}:RC;function pu(d){for(var p=d.name+"",x=Xc[p],R=vn.call(Xc,p)?x.length:0;R--;){var D=x[R],U=D.func;if(U==null||U==d)return D.name}return p}function ua(d){var p=vn.call(F,"placeholder")?F:d;return p.placeholder}function Rt(){var d=F.iteratee||_C;return d=d===_C?ou:d,arguments.length?d(arguments[0],arguments[1]):d}function Yd(d,p){var x=d.__data__;return mu(p)?x[typeof p=="string"?"string":"hash"]:x.map}function Qd(d){for(var p=bi(d),x=p.length;x--;){var R=p[x],D=d[R];p[x]=[R,D,Zd(D)]}return p}function Za(d,p){var x=Wc(d,p);return _g(x)?x:n}function rp(d){var p=vn.call(d,$l),x=d[$l];try{d[$l]=n;var R=!0}catch{}var D=Ed.call(d);return R&&(p?d[$l]=x:delete d[$l]),D}var Zs=Eh?function(d){return d==null?[]:(d=On(d),Va(Eh(d),function(p){return kh.call(d,p)}))}:IC,ib=Eh?function(d){for(var p=[];d;)Ba(p,Zs(d)),d=Qs(d);return p}:IC,Xr=Qr;(Md&&Xr(new Md(new ArrayBuffer(1)))!=ht||Hl&&Xr(new Hl)!=Ct||Ad&&Xr(Ad.resolve())!=Mn||Wa&&Xr(new Wa)!=le||Nd&&Xr(new Nd)!=Be)&&(Xr=function(d){var p=Qr(d),x=p==ln?d.constructor:n,R=x?el(x):"";if(R)switch(R){case wg:return ht;case Ha:return Ct;case j0:return Mn;case Zc:return le;case ko:return Be}return p});function Qg(d,p,x){for(var R=-1,D=x.length;++R<D;){var U=x[R],H=U.size;switch(U.type){case"drop":d+=H;break;case"dropRight":p-=H;break;case"take":p=fi(p,d+H);break;case"takeRight":d=vr(d,p-H);break}}return{start:d,end:p}}function sb(d){var p=d.match(ct);return p?p[1].split(xt):[]}function Jg(d,p,x){p=No(p,d);for(var R=-1,D=p.length,U=!1;++R<D;){var H=no(p[R]);if(!(U=d!=null&&x(d,H)))break;d=d[H]}return U||++R!=D?U:(D=d==null?0:d.length,!!D&&Tb(D)&&Jn(H,D)&&(zt(d)||lf(d)))}function Jd(d){var p=d.length,x=new d.constructor(p);return p&&typeof d[0]=="string"&&vn.call(d,"index")&&(x.index=d.index,x.input=d.input),x}function Zr(d){return typeof d.constructor=="function"&&!da(d)?eu(Qs(d)):{}}function nC(d,p,x){var R=d.constructor;switch(p){case Ne:return Wd(d);case ge:case _e:return new R(+d);case ht:return Y0(d,x);case $t:case cn:case dn:case bt:case fn:case _n:case or:case ci:case Ur:return X0(d,x);case Ct:return new R;case jn:case ye:return new R(d);case Q:return Q0(d);case le:return new R;case qe:return J0(d)}}function rC(d,p){var x=p.length;if(!x)return d;var R=x-1;return p[R]=(x>1?"& ":"")+p[R],p=p.join(x>2?", ":" "),d.replace(it,`{
/* [wrapped with `+p+`] */
`)}function ip(d){return zt(d)||lf(d)||!!(O0&&d&&d[O0])}function Jn(d,p){var x=typeof d;return p=p??q,!!p&&(x=="number"||x!="symbol"&&xo.test(d))&&d>-1&&d%1==0&&d<p}function Ii(d,p,x){if(!dr(x))return!1;var R=typeof p;return(R=="number"?_s(x)&&Jn(p,x.length):R=="string"&&p in x)?ha(x[p],d):!1}function st(d,p){if(zt(d))return!1;var x=typeof d;return x=="number"||x=="symbol"||x=="boolean"||d==null||so(d)?!0:G.test(d)||!bo.test(d)||p!=null&&d in On(p)}function mu(d){var p=typeof d;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?d!=="__proto__":d===null}function Xd(d){var p=pu(d),x=F[p];if(typeof x!="function"||!(p in Bt.prototype))return!1;if(d===x)return!0;var R=np(x);return!!R&&d===R[0]}function ob(d){return!!wh&&wh in d}var iC=Kc?cc:MC;function da(d){var p=d&&d.constructor,x=typeof p=="function"&&p.prototype||Co;return d===x}function Zd(d){return d===d&&!dr(d)}function sp(d,p){return function(x){return x==null?!1:x[d]===p&&(p!==n||d in On(x))}}function ab(d){var p=ve(d,function(R){return x.size===f&&x.clear(),R}),x=p.cache;return p}function lb(d,p){var x=d[1],R=p[1],D=x|R,U=D<(E|_|j),H=R==j&&x==A||R==j&&x==V&&d[7].length<=p[8]||R==(j|V)&&p[7].length<=p[8]&&x==A;if(!(U||H))return d;R&E&&(d[2]=p[2],D|=x&E?0:M);var ee=p[3];if(ee){var ce=d[3];d[3]=ce?Z0(ce,ee,p[4]):ee,d[4]=ce?ms(d[3],h):p[4]}return ee=p[5],ee&&(ce=d[5],d[5]=ce?Vg(ce,ee,p[6]):ee,d[6]=ce?ms(d[5],h):p[6]),ee=p[7],ee&&(d[7]=ee),R&j&&(d[8]=d[8]==null?p[8]:fi(d[8],p[8])),d[9]==null&&(d[9]=p[9]),d[0]=p[0],d[1]=D,d}function cb(d){var p=[];if(d!=null)for(var x in On(d))p.push(x);return p}function Xg(d){return Ed.call(d)}function op(d,p,x){return p=vr(p===n?d.length-1:p,0),function(){for(var R=arguments,D=-1,U=vr(R.length-p,0),H=we(U);++D<U;)H[D]=R[p+D];D=-1;for(var ee=we(p+1);++D<p;)ee[D]=R[D];return ee[p]=x(H),Ei(d,this,ee)}}function Br(d,p){return p.length<2?d:ia(d,yi(p,0,-1))}function eo(d,p){for(var x=d.length,R=fi(p.length,x),D=Pi(d);R--;){var U=p[R];d[R]=Jn(U,x)?D[U]:n}return d}function Lo(d,p){if(!(p==="constructor"&&typeof d[p]=="function")&&p!="__proto__")return d[p]}var Zg=to(Wh),gu=bg||function(d,p){return Yn.setTimeout(d,p)},es=to(Ao);function ev(d,p,x){var R=p+"";return es(d,rC(R,ub(sb(R),x)))}function to(d){var p=0,x=0;return function(){var R=ZS(),D=me-(R-x);if(x=R,D>0){if(++p>=Y)return arguments[0]}else p=0;return d.apply(n,arguments)}}function ap(d,p){var x=-1,R=d.length,D=R-1;for(p=p===n?R:p;++x<p;){var U=au(x,D),H=d[U];d[U]=d[x],d[x]=H}return d.length=p,d}var tv=ab(function(d){var p=[];return d.charCodeAt(0)===46&&p.push(""),d.replace(re,function(x,R,D,U){p.push(D?U.replace(yt,"$1"):R||x)}),p});function no(d){if(typeof d=="string"||so(d))return d;var p=d+"";return p=="0"&&1/d==-1/0?"-0":p}function el(d){if(d!=null){try{return Td.call(d)}catch{}try{return d+""}catch{}}return""}function ub(d,p){return di(pe,function(x){var R="_."+x[0];p&x[1]&&!mh(d,R)&&d.push(R)}),d.sort()}function db(d){if(d instanceof Bt)return d.clone();var p=new hi(d.__wrapped__,d.__chain__);return p.__actions__=Pi(d.__actions__),p.__index__=d.__index__,p.__values__=d.__values__,p}function lp(d,p,x){(x?Ii(d,p,x):p===n)?p=1:p=vr(qt(p),0);var R=d==null?0:d.length;if(!R||p<1)return[];for(var D=0,U=0,H=we(Wl(R/p));D<R;)H[U++]=yi(d,D,D+=p);return H}function nv(d){for(var p=-1,x=d==null?0:d.length,R=0,D=[];++p<x;){var U=d[p];U&&(D[R++]=U)}return D}function Ts(){var d=arguments.length;if(!d)return[];for(var p=we(d-1),x=arguments[0],R=d;R--;)p[R-1]=arguments[R];return Ba(zt(x)?Pi(x):[x],rr(p,1))}var hn=Ht(function(d,p){return Mr(d)?Ro(d,rr(p,1,Mr,!0)):[]}),zr=Ht(function(d,p){var x=Mi(p);return Mr(x)&&(x=n),Mr(d)?Ro(d,rr(p,1,Mr,!0),Rt(x,2)):[]}),yr=Ht(function(d,p){var x=Mi(p);return Mr(x)&&(x=n),Mr(d)?Ro(d,rr(p,1,Mr,!0),n,x):[]});function ei(d,p,x){var R=d==null?0:d.length;return R?(p=x||p===n?1:qt(p),yi(d,p<0?0:p,R)):[]}function ts(d,p,x){var R=d==null?0:d.length;return R?(p=x||p===n?1:qt(p),p=R-p,yi(d,0,p<0?0:p)):[]}function vu(d,p){return d&&d.length?zd(d,Rt(p,3),!0,!0):[]}function Ir(d,p){return d&&d.length?zd(d,Rt(p,3),!0):[]}function ef(d,p,x,R){var D=d==null?0:d.length;return D?(x&&typeof x!="number"&&Ii(d,p,x)&&(x=0,R=D),H0(d,p,x,R)):[]}function tl(d,p,x){var R=d==null?0:d.length;if(!R)return-1;var D=x==null?0:qt(x);return D<0&&(D=vr(R+D,0)),gh(d,Rt(p,3),D)}function tf(d,p,x){var R=d==null?0:d.length;if(!R)return-1;var D=R-1;return x!==n&&(D=qt(x),D=x<0?vr(R+D,0):fi(D,R-1)),gh(d,Rt(p,3),D,!0)}function cp(d){var p=d==null?0:d.length;return p?rr(d,1):[]}function nf(d){var p=d==null?0:d.length;return p?rr(d,xe):[]}function zi(d,p){var x=d==null?0:d.length;return x?(p=p===n?1:qt(p),rr(d,p)):[]}function rv(d){for(var p=-1,x=d==null?0:d.length,R={};++p<x;){var D=d[p];R[D[0]]=D[1]}return R}function rc(d){return d&&d.length?d[0]:n}function fa(d,p,x){var R=d==null?0:d.length;if(!R)return-1;var D=x==null?0:qt(x);return D<0&&(D=vr(R+D,0)),$c(d,p,D)}function up(d){var p=d==null?0:d.length;return p?yi(d,0,-1):[]}var iv=Ht(function(d){var p=zn(d,uu);return p.length&&p[0]===d[0]?Uh(p):[]}),nl=Ht(function(d){var p=Mi(d),x=zn(d,uu);return p===Mi(x)?p=n:x.pop(),x.length&&x[0]===d[0]?Uh(x,Rt(p,2)):[]}),dp=Ht(function(d){var p=Mi(d),x=zn(d,uu);return p=typeof p=="function"?p:n,p&&x.pop(),x.length&&x[0]===d[0]?Uh(x,n,p):[]});function rl(d,p){return d==null?"":_h.call(d,p)}function Mi(d){var p=d==null?0:d.length;return p?d[p-1]:n}function rf(d,p,x){var R=d==null?0:d.length;if(!R)return-1;var D=R;return x!==n&&(D=qt(x),D=D<0?vr(R+D,0):fi(D,R-1)),p===p?YS(d,p,D):gh(d,x0,D,!0)}function sv(d,p){return d&&d.length?$h(d,qt(p)):n}var fp=Ht(sf);function sf(d,p){return d&&d.length&&p&&p.length?cr(d,p):d}function Ai(d,p,x){return d&&d.length&&p&&p.length?cr(d,p,Rt(x,2)):d}function il(d,p,x){return d&&d.length&&p&&p.length?cr(d,p,n,x):d}var ro=Do(function(d,p){var x=d==null?0:d.length,R=Lh(d,p);return Rr(d,zn(p,function(D){return Jn(D,x)?+D:D}).sort(Ug)),R});function $i(d,p){var x=[];if(!(d&&d.length))return x;var R=-1,D=[],U=d.length;for(p=Rt(p,3);++R<U;){var H=d[R];p(H,R,d)&&(x.push(H),D.push(R))}return Rr(d,D),x}function hp(d){return d==null?d:Ph.call(d)}function ov(d,p,x){var R=d==null?0:d.length;return R?(x&&typeof x!="number"&&Ii(d,p,x)?(p=0,x=R):(p=p==null?0:qt(p),x=x===n?R:qt(x)),yi(d,p,x)):[]}function av(d,p){return lu(d,p)}function sC(d,p,x){return Hh(d,p,Rt(x,2))}function sl(d,p){var x=d==null?0:d.length;if(x){var R=lu(d,p);if(R<x&&ha(d[R],p))return R}return-1}function fb(d,p){return lu(d,p,!0)}function lv(d,p,x){return Hh(d,p,Rt(x,2),!0)}function ic(d,p){var x=d==null?0:d.length;if(x){var R=lu(d,p,!0)-1;if(ha(d[R],p))return R}return-1}function cv(d){return d&&d.length?Og(d):[]}function sc(d,p){return d&&d.length?Og(d,Rt(p,2)):[]}function hb(d){var p=d==null?0:d.length;return p?yi(d,1,p):[]}function pb(d,p,x){return d&&d.length?(p=x||p===n?1:qt(p),yi(d,0,p<0?0:p)):[]}function uv(d,p,x){var R=d==null?0:d.length;return R?(p=x||p===n?1:qt(p),p=R-p,yi(d,p<0?0:p,R)):[]}function pp(d,p){return d&&d.length?zd(d,Rt(p,3),!1,!0):[]}function oC(d,p){return d&&d.length?zd(d,Rt(p,3)):[]}var aC=Ht(function(d){return la(rr(d,1,Mr,!0))}),mb=Ht(function(d){var p=Mi(d);return Mr(p)&&(p=n),la(rr(d,1,Mr,!0),Rt(p,2))}),gb=Ht(function(d){var p=Mi(d);return p=typeof p=="function"?p:n,la(rr(d,1,Mr,!0),n,p)});function oc(d){return d&&d.length?la(d):[]}function lC(d,p){return d&&d.length?la(d,Rt(p,2)):[]}function yu(d,p){return p=typeof p=="function"?p:n,d&&d.length?la(d,n,p):[]}function mp(d){if(!(d&&d.length))return[];var p=0;return d=Va(d,function(x){if(Mr(x))return p=vr(x.length,p),!0}),pg(p,function(x){return zn(d,fg(x))})}function er(d,p){if(!(d&&d.length))return[];var x=mp(d);return p==null?x:zn(x,function(R){return Ei(p,n,R)})}var cC=Ht(function(d,p){return Mr(d)?Ro(d,p):[]}),vb=Ht(function(d){return Kh(Va(d,Mr))}),uC=Ht(function(d){var p=Mi(d);return Mr(p)&&(p=n),Kh(Va(d,Mr),Rt(p,2))}),dC=Ht(function(d){var p=Mi(d);return p=typeof p=="function"?p:n,Kh(Va(d,Mr),n,p)}),yb=Ht(mp);function bb(d,p){return $d(d||[],p||[],Yl)}function fC(d,p){return $d(d||[],p||[],ec)}var Es=Ht(function(d){var p=d.length,x=p>1?d[p-1]:n;return x=typeof x=="function"?(d.pop(),x):n,er(d,x)});function gp(d){var p=F(d);return p.__chain__=!0,p}function hC(d,p){return p(d),d}function io(d,p){return p(d)}var vp=Do(function(d){var p=d.length,x=p?d[0]:0,R=this.__wrapped__,D=function(U){return Lh(U,d)};return p>1||this.__actions__.length||!(R instanceof Bt)||!Jn(x)?this.thru(D):(R=R.slice(x,+x+(p?1:0)),R.__actions__.push({func:io,args:[D],thisArg:n}),new hi(R,this.__chain__).thru(function(U){return p&&!U.length&&U.push(n),U}))});function ac(){return gp(this)}function yp(){return new hi(this.value(),this.__chain__)}function dv(){this.__values__===n&&(this.__values__=zP(this.value()));var d=this.__index__>=this.__values__.length,p=d?n:this.__values__[this.__index__++];return{done:d,value:p}}function fv(){return this}function pC(d){for(var p,x=this;x instanceof To;){var R=db(x);R.__index__=0,R.__values__=n,p?D.__wrapped__=R:p=R;var D=R;x=x.__wrapped__}return D.__wrapped__=d,p}function hv(){var d=this.__wrapped__;if(d instanceof Bt){var p=d;return this.__actions__.length&&(p=new Bt(this)),p=p.reverse(),p.__actions__.push({func:io,args:[hp],thisArg:n}),new hi(p,this.__chain__)}return this.thru(hp)}function mC(){return cu(this.__wrapped__,this.__actions__)}var xb=Qh(function(d,p,x){vn.call(d,x)?++d[x]:Po(d,x,1)});function wb(d,p,x){var R=zt(d)?ag:Ld;return x&&Ii(d,p,x)&&(p=n),R(d,Rt(p,3))}function bp(d,p){var x=zt(d)?Va:Tg;return x(d,Rt(p,3))}var xp=nc(tl),Sb=nc(tf);function pv(d,p){return rr(lc(d,p),1)}function gC(d,p){return rr(lc(d,p),xe)}function Cb(d,p,x){return x=x===n?1:qt(x),rr(lc(d,p),x)}function wp(d,p){var x=zt(d)?di:Io;return x(d,Rt(p,3))}function of(d,p){var x=zt(d)?ph:W0;return x(d,Rt(p,3))}var mv=Qh(function(d,p,x){vn.call(d,x)?d[x].push(p):Po(d,x,[p])});function Sp(d,p,x,R){d=_s(d)?d:Tp(d),x=x&&!R?qt(x):0;var D=d.length;return x<0&&(x=vr(D+x,0)),Eb(d)?x<=D&&d.indexOf(p,x)>-1:!!D&&$c(d,p,x)>-1}var kb=Ht(function(d,p,x){var R=-1,D=typeof p=="function",U=_s(d)?we(d.length):[];return Io(d,function(H){U[++R]=D?Ei(p,H,x):ws(H,p,x)}),U}),vC=Qh(function(d,p,x){Po(d,x,p)});function lc(d,p){var x=zt(d)?zn:Rg;return x(d,Rt(p,3))}function yC(d,p,x,R){return d==null?[]:(zt(p)||(p=p==null?[]:[p]),x=R?n:x,zt(x)||(x=x==null?[]:[x]),Vd(d,p,x))}var af=Qh(function(d,p,x){d[x?0:1].push(p)},function(){return[[],[]]});function bC(d,p,x){var R=zt(d)?cg:S0,D=arguments.length<3;return R(d,Rt(p,4),x,D,Io)}function Cp(d,p,x){var R=zt(d)?BS:S0,D=arguments.length<3;return R(d,Rt(p,4),x,D,W0)}function l(d,p){var x=zt(d)?Va:Tg;return x(d,Ke(Rt(p,3)))}function c(d){var p=zt(d)?_o:vi;return p(d)}function g(d,p,x){(x?Ii(d,p,x):p===n)?p=1:p=qt(p);var R=zt(d)?Gl:Ag;return R(d,p)}function y(d){var p=zt(d)?z0:Cs;return p(d)}function T(d){if(d==null)return 0;if(_s(d))return Eb(d)?zl(d):d.length;var p=Xr(d);return p==Ct||p==le?d.size:aa(d).length}function P(d,p,x){var R=zt(d)?ug:Ng;return x&&Ii(d,p,x)&&(p=n),R(d,Rt(p,3))}var L=Ht(function(d,p){if(d==null)return[];var x=p.length;return x>1&&Ii(d,p[0],p[1])?p=[]:x>2&&Ii(p[0],p[1],p[2])&&(p=[p[0]]),Vd(d,rr(p,1),[])}),$=Hn||function(){return Yn.Date.now()};function Z(d,p){if(typeof p!="function")throw new gs(o);return d=qt(d),function(){if(--d<1)return p.apply(this,arguments)}}function Ce(d,p,x){return p=x?n:p,p=d&&p==null?d.length:p,Oo(d,j,n,n,n,n,p)}function Ue(d,p){var x;if(typeof p!="function")throw new gs(o);return d=qt(d),function(){return--d>0&&(x=p.apply(this,arguments)),d<=1&&(p=n),x}}var $e=Ht(function(d,p,x){var R=E;if(x.length){var D=ms(x,ua($e));R|=N}return Oo(d,R,p,x,D)}),Fe=Ht(function(d,p,x){var R=E|_;if(x.length){var D=ms(x,ua(Fe));R|=N}return Oo(p,R,d,x,D)});function nt(d,p,x){p=x?n:p;var R=Oo(d,A,n,n,n,n,n,p);return R.placeholder=nt.placeholder,R}function ut(d,p,x){p=x?n:p;var R=Oo(d,I,n,n,n,n,n,p);return R.placeholder=ut.placeholder,R}function pt(d,p,x){var R,D,U,H,ee,ce,Oe=0,De=!1,ze=!1,et=!0;if(typeof d!="function")throw new gs(o);p=jo(p)||0,dr(x)&&(De=!!x.leading,ze="maxWait"in x,U=ze?vr(jo(x.maxWait)||0,p):U,et="trailing"in x?!!x.trailing:et);function wt(Ar){var pa=R,dc=D;return R=D=n,Oe=Ar,H=d.apply(dc,pa),H}function Nt(Ar){return Oe=Ar,ee=gu(rn,p),De?wt(Ar):H}function Gt(Ar){var pa=Ar-ce,dc=Ar-Oe,tR=p-pa;return ze?fi(tR,U-dc):tR}function Ot(Ar){var pa=Ar-ce,dc=Ar-Oe;return ce===n||pa>=p||pa<0||ze&&dc>=U}function rn(){var Ar=$();if(Ot(Ar))return pn(Ar);ee=gu(rn,Gt(Ar))}function pn(Ar){return ee=n,et&&R?wt(Ar):(R=D=n,H)}function oo(){ee!==n&&jg(ee),Oe=0,R=ce=D=ee=n}function ns(){return ee===n?H:pn($())}function ao(){var Ar=$(),pa=Ot(Ar);if(R=arguments,D=this,ce=Ar,pa){if(ee===n)return Nt(ce);if(ze)return jg(ee),ee=gu(rn,p),wt(ce)}return ee===n&&(ee=gu(rn,p)),H}return ao.cancel=oo,ao.flush=ns,ao}var ur=Ht(function(d,p){return kg(d,1,p)}),he=Ht(function(d,p,x){return kg(d,jo(p)||0,x)});function ne(d){return Oo(d,z)}function ve(d,p){if(typeof d!="function"||p!=null&&typeof p!="function")throw new gs(o);var x=function(){var R=arguments,D=p?p.apply(this,R):R[0],U=x.cache;if(U.has(D))return U.get(D);var H=d.apply(this,R);return x.cache=U.set(D,H)||U,H};return x.cache=new(ve.Cache||vs),x}ve.Cache=vs;function Ke(d){if(typeof d!="function")throw new gs(o);return function(){var p=arguments;switch(p.length){case 0:return!d.call(this);case 1:return!d.call(this,p[0]);case 2:return!d.call(this,p[0],p[1]);case 3:return!d.call(this,p[0],p[1],p[2])}return!d.apply(this,p)}}function gt(d){return Ue(2,d)}var _t=G0(function(d,p){p=p.length==1&&zt(p[0])?zn(p[0],Yi(Rt())):zn(rr(p,1),Yi(Rt()));var x=p.length;return Ht(function(R){for(var D=-1,U=fi(R.length,x);++D<U;)R[D]=p[D].call(this,R[D]);return Ei(d,this,R)})}),kt=Ht(function(d,p){var x=ms(p,ua(kt));return Oo(d,N,n,p,x)}),At=Ht(function(d,p){var x=ms(p,ua(At));return Oo(d,O,n,p,x)}),$r=Do(function(d,p){return Oo(d,V,n,n,n,p)});function yn(d,p){if(typeof d!="function")throw new gs(o);return p=p===n?p:qt(p),Ht(d,p)}function ol(d,p){if(typeof d!="function")throw new gs(o);return p=p==null?0:vr(qt(p),0),Ht(function(x){var R=x[p],D=ca(x,0,p);return R&&Ba(D,R),Ei(d,this,D)})}function xC(d,p,x){var R=!0,D=!0;if(typeof d!="function")throw new gs(o);return dr(x)&&(R="leading"in x?!!x.leading:R,D="trailing"in x?!!x.trailing:D),pt(d,p,{leading:R,maxWait:p,trailing:D})}function MB(d){return Ce(d,1)}function AB(d,p){return kt(Gh(p),d)}function NB(){if(!arguments.length)return[];var d=arguments[0];return zt(d)?d:[d]}function OB(d){return Vi(d,S)}function DB(d,p){return p=typeof p=="function"?p:n,Vi(d,S,p)}function LB(d){return Vi(d,m|S)}function jB(d,p){return p=typeof p=="function"?p:n,Vi(d,m|S,p)}function FB(d,p){return p==null||Dd(d,p,bi(p))}function ha(d,p){return d===p||d!==d&&p!==p}var UB=tp(Qa),VB=tp(function(d,p){return d>=p}),lf=Vh(function(){return arguments}())?Vh:function(d){return br(d)&&vn.call(d,"callee")&&!kh.call(d,"callee")},zt=we.isArray,BB=sg?Yi(sg):q0;function _s(d){return d!=null&&Tb(d.length)&&!cc(d)}function Mr(d){return br(d)&&_s(d)}function zB(d){return d===!0||d===!1||br(d)&&Qr(d)==ge}var bu=xg||MC,$B=Li?Yi(Li):oa;function WB(d){return br(d)&&d.nodeType===1&&!gv(d)}function HB(d){if(d==null)return!0;if(_s(d)&&(zt(d)||typeof d=="string"||typeof d.splice=="function"||bu(d)||kp(d)||lf(d)))return!d.length;var p=Xr(d);if(p==Ct||p==le)return!d.size;if(da(d))return!aa(d).length;for(var x in d)if(vn.call(d,x))return!1;return!0}function qB(d,p){return Ss(d,p)}function KB(d,p,x){x=typeof x=="function"?x:n;var R=x?x(d,p):n;return R===n?Ss(d,p,n,x):!!R}function wC(d){if(!br(d))return!1;var p=Qr(d);return p==dt||p==We||typeof d.message=="string"&&typeof d.name=="string"&&!gv(d)}function GB(d){return typeof d=="number"&&Yc(d)}function cc(d){if(!dr(d))return!1;var p=Qr(d);return p==mt||p==Et||p==de||p==En}function FP(d){return typeof d=="number"&&d==qt(d)}function Tb(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=q}function dr(d){var p=typeof d;return d!=null&&(p=="object"||p=="function")}function br(d){return d!=null&&typeof d=="object"}var UP=Bl?Yi(Bl):K0;function YB(d,p){return d===p||su(d,p,Qd(p))}function QB(d,p,x){return x=typeof x=="function"?x:n,su(d,p,Qd(p),x)}function JB(d){return VP(d)&&d!=+d}function XB(d){if(iC(d))throw new jt(s);return _g(d)}function ZB(d){return d===null}function ez(d){return d==null}function VP(d){return typeof d=="number"||br(d)&&Qr(d)==jn}function gv(d){if(!br(d)||Qr(d)!=ln)return!1;var p=Qs(d);if(p===null)return!0;var x=vn.call(p,"constructor")&&p.constructor;return typeof x=="function"&&x instanceof x&&Td.call(x)==Sh}var SC=hh?Yi(hh):Fd;function tz(d){return FP(d)&&d>=-9007199254740991&&d<=q}var BP=zc?Yi(zc):Mo;function Eb(d){return typeof d=="string"||!zt(d)&&br(d)&&Qr(d)==ye}function so(d){return typeof d=="symbol"||br(d)&&Qr(d)==qe}var kp=v0?Yi(v0):Ud;function nz(d){return d===n}function rz(d){return br(d)&&Xr(d)==Be}function iz(d){return br(d)&&Qr(d)==Xe}var sz=tp(Ja),oz=tp(function(d,p){return d<=p});function zP(d){if(!d)return[];if(_s(d))return Eb(d)?Qi(d):Pi(d);if(ta&&d[ta])return KS(d[ta]());var p=Xr(d),x=p==Ct?yh:p==le?za:Tp;return x(d)}function uc(d){if(!d)return d===0?d:0;if(d=jo(d),d===xe||d===-1/0){var p=d<0?-1:1;return p*te}return d===d?d:0}function qt(d){var p=uc(d),x=p%1;return p===p?x?p-x:p:0}function $P(d){return d?ra(qt(d),0,B):0}function jo(d){if(typeof d=="number")return d;if(so(d))return ae;if(dr(d)){var p=typeof d.valueOf=="function"?d.valueOf():d;d=dr(p)?p+"":p}if(typeof d!="string")return d===0?d:+d;d=C0(d);var x=Yr.test(d);return x||An.test(d)?dh(d.slice(2),x?2:8):ar.test(d)?ae:+d}function WP(d){return Xs(d,Ps(d))}function az(d){return d?ra(qt(d),-9007199254740991,q):d===0?d:0}function Dn(d){return d==null?"":Bi(d)}var lz=du(function(d,p){if(da(p)||_s(p)){Xs(p,bi(p),d);return}for(var x in p)vn.call(p,x)&&Yl(d,x,p[x])}),HP=du(function(d,p){Xs(p,Ps(p),d)}),_b=du(function(d,p,x,R){Xs(p,Ps(p),d,R)}),cz=du(function(d,p,x,R){Xs(p,bi(p),d,R)}),uz=Do(Lh);function dz(d,p){var x=eu(d);return p==null?x:Kn(x,p)}var fz=Ht(function(d,p){d=On(d);var x=-1,R=p.length,D=R>2?p[2]:n;for(D&&Ii(p[0],p[1],D)&&(R=1);++x<R;)for(var U=p[x],H=Ps(U),ee=-1,ce=H.length;++ee<ce;){var Oe=H[ee],De=d[Oe];(De===n||ha(De,Co[Oe])&&!vn.call(d,Oe))&&(d[Oe]=U[Oe])}return d}),hz=Ht(function(d){return d.push(n,qg),Ei(qP,n,d)});function pz(d,p){return b0(d,Rt(p,3),Zi)}function mz(d,p){return b0(d,Rt(p,3),Ya)}function gz(d,p){return d==null?d:jh(d,Rt(p,3),Ps)}function vz(d,p){return d==null?d:jd(d,Rt(p,3),Ps)}function yz(d,p){return d&&Zi(d,Rt(p,3))}function bz(d,p){return d&&Ya(d,Rt(p,3))}function xz(d){return d==null?[]:iu(d,bi(d))}function wz(d){return d==null?[]:iu(d,Ps(d))}function CC(d,p,x){var R=d==null?n:ia(d,p);return R===n?x:R}function Sz(d,p){return d!=null&&Jg(d,p,xs)}function kC(d,p){return d!=null&&Jg(d,p,Jl)}var Cz=eb(function(d,p,x){p!=null&&typeof p.toString!="function"&&(p=Ed.call(p)),d[p]=x},EC(Rs)),kz=eb(function(d,p,x){p!=null&&typeof p.toString!="function"&&(p=Ed.call(p)),vn.call(d,p)?d[p].push(x):d[p]=[x]},Rt),Tz=Ht(ws);function bi(d){return _s(d)?Eo(d):aa(d)}function Ps(d){return _s(d)?Eo(d,!0):Pg(d)}function Ez(d,p){var x={};return p=Rt(p,3),Zi(d,function(R,D,U){Po(x,p(R,D,U),R)}),x}function _z(d,p){var x={};return p=Rt(p,3),Zi(d,function(R,D,U){Po(x,D,p(R,D,U))}),x}var Pz=du(function(d,p,x){Xl(d,p,x)}),qP=du(function(d,p,x,R){Xl(d,p,x,R)}),Rz=Do(function(d,p){var x={};if(d==null)return x;var R=!1;p=zn(p,function(U){return U=No(U,d),R||(R=U.length>1),U}),Xs(d,Gd(d),x),R&&(x=Vi(x,m|v|S,Kg));for(var D=p.length;D--;)qh(x,p[D]);return x});function Iz(d,p){return KP(d,Ke(Rt(p)))}var Mz=Do(function(d,p){return d==null?{}:Mg(d,p)});function KP(d,p){if(d==null)return{};var x=zn(Gd(d),function(R){return[R]});return p=Rt(p),Xa(d,x,function(R,D){return p(R,D[0])})}function Az(d,p,x){p=No(p,d);var R=-1,D=p.length;for(D||(D=1,d=n);++R<D;){var U=d==null?n:d[no(p[R])];U===n&&(R=D,U=x),d=cc(U)?U.call(d):U}return d}function Nz(d,p,x){return d==null?d:ec(d,p,x)}function Oz(d,p,x,R){return R=typeof R=="function"?R:n,d==null?d:ec(d,p,x,R)}var GP=Wg(bi),YP=Wg(Ps);function Dz(d,p,x){var R=zt(d),D=R||bu(d)||kp(d);if(p=Rt(p,4),x==null){var U=d&&d.constructor;D?x=R?new U:[]:dr(d)?x=cc(U)?eu(Qs(d)):{}:x={}}return(D?di:Zi)(d,function(H,ee,ce){return p(x,H,ee,ce)}),x}function Lz(d,p){return d==null?!0:qh(d,p)}function jz(d,p,x){return d==null?d:Lg(d,p,Gh(x))}function Fz(d,p,x,R){return R=typeof R=="function"?R:n,d==null?d:Lg(d,p,Gh(x),R)}function Tp(d){return d==null?[]:Cd(d,bi(d))}function Uz(d){return d==null?[]:Cd(d,Ps(d))}function Vz(d,p,x){return x===n&&(x=p,p=n),x!==n&&(x=jo(x),x=x===x?x:0),p!==n&&(p=jo(p),p=p===p?p:0),ra(jo(d),p,x)}function Bz(d,p,x){return p=uc(p),x===n?(x=p,p=0):x=uc(x),d=jo(d),Eg(d,p,x)}function zz(d,p,x){if(x&&typeof x!="boolean"&&Ii(d,p,x)&&(p=x=n),x===n&&(typeof p=="boolean"?(x=p,p=n):typeof d=="boolean"&&(x=d,d=n)),d===n&&p===n?(d=0,p=1):(d=uc(d),p===n?(p=d,d=0):p=uc(p)),d>p){var R=d;d=p,p=R}if(x||d%1||p%1){var D=Id();return fi(d+D*(p-d+rg("1e-"+((D+"").length-1))),p)}return au(d,p)}var $z=tc(function(d,p,x){return p=p.toLowerCase(),d+(x?QP(p):p)});function QP(d){return TC(Dn(d).toLowerCase())}function JP(d){return d=Dn(d),d&&d.replace(Da,E0).replace(h0,"")}function Wz(d,p,x){d=Dn(d),p=Bi(p);var R=d.length;x=x===n?R:ra(qt(x),0,R);var D=x;return x-=p.length,x>=0&&d.slice(x,D)==p}function Hz(d){return d=Dn(d),d&&Dt.test(d)?d.replace(Ki,_0):d}function qz(d){return d=Dn(d),d&&Le.test(d)?d.replace(Se,"\\$&"):d}var Kz=tc(function(d,p,x){return d+(x?"-":"")+p.toLowerCase()}),Gz=tc(function(d,p,x){return d+(x?" ":"")+p.toLowerCase()}),Yz=Bg("toLowerCase");function Qz(d,p,x){d=Dn(d),p=qt(p);var R=p?zl(d):0;if(!p||R>=p)return d;var D=(p-R)/2;return qd($a(D),x)+d+qd(Wl(D),x)}function Jz(d,p,x){d=Dn(d),p=qt(p);var R=p?zl(d):0;return p&&R<p?d+qd(p-R,x):d}function Xz(d,p,x){d=Dn(d),p=qt(p);var R=p?zl(d):0;return p&&R<p?qd(p-R,x)+d:d}function Zz(d,p,x){return x||p==null?p=0:p&&(p=+p),L0(Dn(d).replace(He,""),p||0)}function e5(d,p,x){return(x?Ii(d,p,x):p===n)?p=1:p=qt(p),Zl(Dn(d),p)}function t5(){var d=arguments,p=Dn(d[0]);return d.length<3?p:p.replace(d[1],d[2])}var n5=tc(function(d,p,x){return d+(x?"_":"")+p.toLowerCase()});function r5(d,p,x){return x&&typeof x!="number"&&Ii(d,p,x)&&(p=x=n),x=x===n?B:x>>>0,x?(d=Dn(d),d&&(typeof p=="string"||p!=null&&!SC(p))&&(p=Bi(p),!p&&Hc(d))?ca(Qi(d),0,x):d.split(p,x)):[]}var i5=tc(function(d,p,x){return d+(x?" ":"")+TC(p)});function s5(d,p,x){return d=Dn(d),x=x==null?0:ra(qt(x),0,d.length),p=Bi(p),d.slice(x,x+p.length)==p}function o5(d,p,x){var R=F.templateSettings;x&&Ii(d,p,x)&&(p=n),d=Dn(d),p=_b({},p,R,Hg);var D=_b({},p.imports,R.imports,Hg),U=bi(D),H=Cd(D,U),ee,ce,Oe=0,De=p.interpolate||Gi,ze="__p += '",et=kd((p.escape||Gi).source+"|"+De.source+"|"+(De===Pr?Mt:Gi).source+"|"+(p.evaluate||Gi).source+"|$","g"),wt="//# sourceURL="+(vn.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++FS+"]")+`
`;d.replace(et,function(Ot,rn,pn,oo,ns,ao){return pn||(pn=oo),ze+=d.slice(Oe,ao).replace(ps,P0),rn&&(ee=!0,ze+=`' +
__e(`+rn+`) +
'`),ns&&(ce=!0,ze+=`';
`+ns+`;
__p += '`),pn&&(ze+=`' +
((__t = (`+pn+`)) == null ? '' : __t) +
'`),Oe=ao+Ot.length,Ot}),ze+=`';
`;var Nt=vn.call(p,"variable")&&p.variable;if(!Nt)ze=`with (obj) {
`+ze+`
}
`;else if(Pt.test(Nt))throw new jt(a);ze=(ce?ze.replace(Ci,""):ze).replace(ki,"$1").replace(Jo,"$1;"),ze="function("+(Nt||"obj")+`) {
`+(Nt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ee?", __e = _.escape":"")+(ce?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ze+`return __p
}`;var Gt=ZP(function(){return gn(U,wt+"return "+ze).apply(n,H)});if(Gt.source=ze,wC(Gt))throw Gt;return Gt}function a5(d){return Dn(d).toLowerCase()}function l5(d){return Dn(d).toUpperCase()}function c5(d,p,x){if(d=Dn(d),d&&(x||p===n))return C0(d);if(!d||!(p=Bi(p)))return d;var R=Qi(d),D=Qi(p),U=k0(R,D),H=mg(R,D)+1;return ca(R,U,H).join("")}function u5(d,p,x){if(d=Dn(d),d&&(x||p===n))return d.slice(0,xh(d)+1);if(!d||!(p=Bi(p)))return d;var R=Qi(d),D=mg(R,Qi(p))+1;return ca(R,0,D).join("")}function d5(d,p,x){if(d=Dn(d),d&&(x||p===n))return d.replace(He,"");if(!d||!(p=Bi(p)))return d;var R=Qi(d),D=k0(R,Qi(p));return ca(R,D).join("")}function f5(d,p){var x=W,R=J;if(dr(p)){var D="separator"in p?p.separator:D;x="length"in p?qt(p.length):x,R="omission"in p?Bi(p.omission):R}d=Dn(d);var U=d.length;if(Hc(d)){var H=Qi(d);U=H.length}if(x>=U)return d;var ee=x-zl(R);if(ee<1)return R;var ce=H?ca(H,0,ee).join(""):d.slice(0,ee);if(D===n)return ce+R;if(H&&(ee+=ce.length-ee),SC(D)){if(d.slice(ee).search(D)){var Oe,De=ce;for(D.global||(D=kd(D.source,Dn(Sn.exec(D))+"g")),D.lastIndex=0;Oe=D.exec(De);)var ze=Oe.index;ce=ce.slice(0,ze===n?ee:ze)}}else if(d.indexOf(Bi(D),ee)!=ee){var et=ce.lastIndexOf(D);et>-1&&(ce=ce.slice(0,et))}return ce+R}function h5(d){return d=Dn(d),d&&Dl.test(d)?d.replace(Ks,R0):d}var p5=tc(function(d,p,x){return d+(x?" ":"")+p.toUpperCase()}),TC=Bg("toUpperCase");function XP(d,p,x){return d=Dn(d),p=x?n:p,p===n?qS(d)?QS(d):$S(d):d.match(p)||[]}var ZP=Ht(function(d,p){try{return Ei(d,n,p)}catch(x){return wC(x)?x:new jt(x)}}),m5=Do(function(d,p){return di(p,function(x){x=no(x),Po(d,x,$e(d[x],d))}),d});function g5(d){var p=d==null?0:d.length,x=Rt();return d=p?zn(d,function(R){if(typeof R[1]!="function")throw new gs(o);return[x(R[0]),R[1]]}):[],Ht(function(R){for(var D=-1;++D<p;){var U=d[D];if(Ei(U[0],this,R))return Ei(U[1],this,R)}})}function v5(d){return $0(Vi(d,m))}function EC(d){return function(){return d}}function y5(d,p){return d==null||d!==d?p:d}var b5=Zh(),x5=Zh(!0);function Rs(d){return d}function _C(d){return ou(typeof d=="function"?d:Vi(d,m))}function w5(d){return zh(Vi(d,m))}function S5(d,p){return Qn(d,Vi(p,m))}var C5=Ht(function(d,p){return function(x){return ws(x,d,p)}}),k5=Ht(function(d,p){return function(x){return ws(d,x,p)}});function PC(d,p,x){var R=bi(p),D=iu(p,R);x==null&&!(dr(p)&&(D.length||!R.length))&&(x=p,p=d,d=this,D=iu(p,bi(p)));var U=!(dr(x)&&"chain"in x)||!!x.chain,H=cc(d);return di(D,function(ee){var ce=p[ee];d[ee]=ce,H&&(d.prototype[ee]=function(){var Oe=this.__chain__;if(U||Oe){var De=d(this.__wrapped__),ze=De.__actions__=Pi(this.__actions__);return ze.push({func:ce,args:arguments,thisArg:d}),De.__chain__=Oe,De}return ce.apply(d,Ba([this.value()],arguments))})}),d}function T5(){return Yn._===this&&(Yn._=A0),this}function RC(){}function E5(d){return d=qt(d),Ht(function(p){return $h(p,d)})}var _5=ep(zn),P5=ep(ag),R5=ep(ug);function eR(d){return st(d)?fg(no(d)):Zn(d)}function I5(d){return function(p){return d==null?n:ia(d,p)}}var M5=$g(),A5=$g(!0);function IC(){return[]}function MC(){return!1}function N5(){return{}}function O5(){return""}function D5(){return!0}function L5(d,p){if(d=qt(d),d<1||d>q)return[];var x=B,R=fi(d,B);p=Rt(p),d-=B;for(var D=pg(R,p);++x<d;)p(x);return D}function j5(d){return zt(d)?zn(d,no):so(d)?[d]:Pi(tv(Dn(d)))}function F5(d){var p=++Gc;return Dn(d)+p}var U5=Hd(function(d,p){return d+p},0),V5=Jr("ceil"),B5=Hd(function(d,p){return d/p},1),z5=Jr("floor");function $5(d){return d&&d.length?Ql(d,Rs,Qa):n}function W5(d,p){return d&&d.length?Ql(d,Rt(p,2),Qa):n}function H5(d){return w0(d,Rs)}function q5(d,p){return w0(d,Rt(p,2))}function K5(d){return d&&d.length?Ql(d,Rs,Ja):n}function G5(d,p){return d&&d.length?Ql(d,Rt(p,2),Ja):n}var Y5=Hd(function(d,p){return d*p},1),Q5=Jr("round"),J5=Hd(function(d,p){return d-p},0);function X5(d){return d&&d.length?hg(d,Rs):0}function Z5(d,p){return d&&d.length?hg(d,Rt(p,2)):0}return F.after=Z,F.ary=Ce,F.assign=lz,F.assignIn=HP,F.assignInWith=_b,F.assignWith=cz,F.at=uz,F.before=Ue,F.bind=$e,F.bindAll=m5,F.bindKey=Fe,F.castArray=NB,F.chain=gp,F.chunk=lp,F.compact=nv,F.concat=Ts,F.cond=g5,F.conforms=v5,F.constant=EC,F.countBy=xb,F.create=dz,F.curry=nt,F.curryRight=ut,F.debounce=pt,F.defaults=fz,F.defaultsDeep=hz,F.defer=ur,F.delay=he,F.difference=hn,F.differenceBy=zr,F.differenceWith=yr,F.drop=ei,F.dropRight=ts,F.dropRightWhile=vu,F.dropWhile=Ir,F.fill=ef,F.filter=bp,F.flatMap=pv,F.flatMapDeep=gC,F.flatMapDepth=Cb,F.flatten=cp,F.flattenDeep=nf,F.flattenDepth=zi,F.flip=ne,F.flow=b5,F.flowRight=x5,F.fromPairs=rv,F.functions=xz,F.functionsIn=wz,F.groupBy=mv,F.initial=up,F.intersection=iv,F.intersectionBy=nl,F.intersectionWith=dp,F.invert=Cz,F.invertBy=kz,F.invokeMap=kb,F.iteratee=_C,F.keyBy=vC,F.keys=bi,F.keysIn=Ps,F.map=lc,F.mapKeys=Ez,F.mapValues=_z,F.matches=w5,F.matchesProperty=S5,F.memoize=ve,F.merge=Pz,F.mergeWith=qP,F.method=C5,F.methodOf=k5,F.mixin=PC,F.negate=Ke,F.nthArg=E5,F.omit=Rz,F.omitBy=Iz,F.once=gt,F.orderBy=yC,F.over=_5,F.overArgs=_t,F.overEvery=P5,F.overSome=R5,F.partial=kt,F.partialRight=At,F.partition=af,F.pick=Mz,F.pickBy=KP,F.property=eR,F.propertyOf=I5,F.pull=fp,F.pullAll=sf,F.pullAllBy=Ai,F.pullAllWith=il,F.pullAt=ro,F.range=M5,F.rangeRight=A5,F.rearg=$r,F.reject=l,F.remove=$i,F.rest=yn,F.reverse=hp,F.sampleSize=g,F.set=Nz,F.setWith=Oz,F.shuffle=y,F.slice=ov,F.sortBy=L,F.sortedUniq=cv,F.sortedUniqBy=sc,F.split=r5,F.spread=ol,F.tail=hb,F.take=pb,F.takeRight=uv,F.takeRightWhile=pp,F.takeWhile=oC,F.tap=hC,F.throttle=xC,F.thru=io,F.toArray=zP,F.toPairs=GP,F.toPairsIn=YP,F.toPath=j5,F.toPlainObject=WP,F.transform=Dz,F.unary=MB,F.union=aC,F.unionBy=mb,F.unionWith=gb,F.uniq=oc,F.uniqBy=lC,F.uniqWith=yu,F.unset=Lz,F.unzip=mp,F.unzipWith=er,F.update=jz,F.updateWith=Fz,F.values=Tp,F.valuesIn=Uz,F.without=cC,F.words=XP,F.wrap=AB,F.xor=vb,F.xorBy=uC,F.xorWith=dC,F.zip=yb,F.zipObject=bb,F.zipObjectDeep=fC,F.zipWith=Es,F.entries=GP,F.entriesIn=YP,F.extend=HP,F.extendWith=_b,PC(F,F),F.add=U5,F.attempt=ZP,F.camelCase=$z,F.capitalize=QP,F.ceil=V5,F.clamp=Vz,F.clone=OB,F.cloneDeep=LB,F.cloneDeepWith=jB,F.cloneWith=DB,F.conformsTo=FB,F.deburr=JP,F.defaultTo=y5,F.divide=B5,F.endsWith=Wz,F.eq=ha,F.escape=Hz,F.escapeRegExp=qz,F.every=wb,F.find=xp,F.findIndex=tl,F.findKey=pz,F.findLast=Sb,F.findLastIndex=tf,F.findLastKey=mz,F.floor=z5,F.forEach=wp,F.forEachRight=of,F.forIn=gz,F.forInRight=vz,F.forOwn=yz,F.forOwnRight=bz,F.get=CC,F.gt=UB,F.gte=VB,F.has=Sz,F.hasIn=kC,F.head=rc,F.identity=Rs,F.includes=Sp,F.indexOf=fa,F.inRange=Bz,F.invoke=Tz,F.isArguments=lf,F.isArray=zt,F.isArrayBuffer=BB,F.isArrayLike=_s,F.isArrayLikeObject=Mr,F.isBoolean=zB,F.isBuffer=bu,F.isDate=$B,F.isElement=WB,F.isEmpty=HB,F.isEqual=qB,F.isEqualWith=KB,F.isError=wC,F.isFinite=GB,F.isFunction=cc,F.isInteger=FP,F.isLength=Tb,F.isMap=UP,F.isMatch=YB,F.isMatchWith=QB,F.isNaN=JB,F.isNative=XB,F.isNil=ez,F.isNull=ZB,F.isNumber=VP,F.isObject=dr,F.isObjectLike=br,F.isPlainObject=gv,F.isRegExp=SC,F.isSafeInteger=tz,F.isSet=BP,F.isString=Eb,F.isSymbol=so,F.isTypedArray=kp,F.isUndefined=nz,F.isWeakMap=rz,F.isWeakSet=iz,F.join=rl,F.kebabCase=Kz,F.last=Mi,F.lastIndexOf=rf,F.lowerCase=Gz,F.lowerFirst=Yz,F.lt=sz,F.lte=oz,F.max=$5,F.maxBy=W5,F.mean=H5,F.meanBy=q5,F.min=K5,F.minBy=G5,F.stubArray=IC,F.stubFalse=MC,F.stubObject=N5,F.stubString=O5,F.stubTrue=D5,F.multiply=Y5,F.nth=sv,F.noConflict=T5,F.noop=RC,F.now=$,F.pad=Qz,F.padEnd=Jz,F.padStart=Xz,F.parseInt=Zz,F.random=zz,F.reduce=bC,F.reduceRight=Cp,F.repeat=e5,F.replace=t5,F.result=Az,F.round=Q5,F.runInContext=oe,F.sample=c,F.size=T,F.snakeCase=n5,F.some=P,F.sortedIndex=av,F.sortedIndexBy=sC,F.sortedIndexOf=sl,F.sortedLastIndex=fb,F.sortedLastIndexBy=lv,F.sortedLastIndexOf=ic,F.startCase=i5,F.startsWith=s5,F.subtract=J5,F.sum=X5,F.sumBy=Z5,F.template=o5,F.times=L5,F.toFinite=uc,F.toInteger=qt,F.toLength=$P,F.toLower=a5,F.toNumber=jo,F.toSafeInteger=az,F.toString=Dn,F.toUpper=l5,F.trim=c5,F.trimEnd=u5,F.trimStart=d5,F.truncate=f5,F.unescape=h5,F.uniqueId=F5,F.upperCase=p5,F.upperFirst=TC,F.each=wp,F.eachRight=of,F.first=rc,PC(F,function(){var d={};return Zi(F,function(p,x){vn.call(F.prototype,x)||(d[x]=p)}),d}(),{chain:!1}),F.VERSION=r,di(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){F[d].placeholder=F}),di(["drop","take"],function(d,p){Bt.prototype[d]=function(x){x=x===n?1:vr(qt(x),0);var R=this.__filtered__&&!p?new Bt(this):this.clone();return R.__filtered__?R.__takeCount__=fi(x,R.__takeCount__):R.__views__.push({size:fi(x,B),type:d+(R.__dir__<0?"Right":"")}),R},Bt.prototype[d+"Right"]=function(x){return this.reverse()[d](x).reverse()}}),di(["filter","map","takeWhile"],function(d,p){var x=p+1,R=x==ue||x==se;Bt.prototype[d]=function(D){var U=this.clone();return U.__iteratees__.push({iteratee:Rt(D,3),type:x}),U.__filtered__=U.__filtered__||R,U}}),di(["head","last"],function(d,p){var x="take"+(p?"Right":"");Bt.prototype[d]=function(){return this[x](1).value()[0]}}),di(["initial","tail"],function(d,p){var x="drop"+(p?"":"Right");Bt.prototype[d]=function(){return this.__filtered__?new Bt(this):this[x](1)}}),Bt.prototype.compact=function(){return this.filter(Rs)},Bt.prototype.find=function(d){return this.filter(d).head()},Bt.prototype.findLast=function(d){return this.reverse().find(d)},Bt.prototype.invokeMap=Ht(function(d,p){return typeof d=="function"?new Bt(this):this.map(function(x){return ws(x,d,p)})}),Bt.prototype.reject=function(d){return this.filter(Ke(Rt(d)))},Bt.prototype.slice=function(d,p){d=qt(d);var x=this;return x.__filtered__&&(d>0||p<0)?new Bt(x):(d<0?x=x.takeRight(-d):d&&(x=x.drop(d)),p!==n&&(p=qt(p),x=p<0?x.dropRight(-p):x.take(p-d)),x)},Bt.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},Bt.prototype.toArray=function(){return this.take(B)},Zi(Bt.prototype,function(d,p){var x=/^(?:filter|find|map|reject)|While$/.test(p),R=/^(?:head|last)$/.test(p),D=F[R?"take"+(p=="last"?"Right":""):p],U=R||/^find/.test(p);D&&(F.prototype[p]=function(){var H=this.__wrapped__,ee=R?[1]:arguments,ce=H instanceof Bt,Oe=ee[0],De=ce||zt(H),ze=function(rn){var pn=D.apply(F,Ba([rn],ee));return R&&et?pn[0]:pn};De&&x&&typeof Oe=="function"&&Oe.length!=1&&(ce=De=!1);var et=this.__chain__,wt=!!this.__actions__.length,Nt=U&&!et,Gt=ce&&!wt;if(!U&&De){H=Gt?H:new Bt(this);var Ot=d.apply(H,ee);return Ot.__actions__.push({func:io,args:[ze],thisArg:n}),new hi(Ot,et)}return Nt&&Gt?d.apply(this,ee):(Ot=this.thru(ze),Nt?R?Ot.value()[0]:Ot.value():Ot)})}),di(["pop","push","shift","sort","splice","unshift"],function(d){var p=Zo[d],x=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",R=/^(?:pop|shift)$/.test(d);F.prototype[d]=function(){var D=arguments;if(R&&!this.__chain__){var U=this.value();return p.apply(zt(U)?U:[],D)}return this[x](function(H){return p.apply(zt(H)?H:[],D)})}}),Zi(Bt.prototype,function(d,p){var x=F[p];if(x){var R=x.name+"";vn.call(Xc,R)||(Xc[R]=[]),Xc[R].push({name:p,func:x})}}),Xc[hu(n,_).name]=[{name:"wrapper",func:n}],Bt.prototype.clone=Mh,Bt.prototype.reverse=Sg,Bt.prototype.value=tu,F.prototype.at=vp,F.prototype.chain=ac,F.prototype.commit=yp,F.prototype.next=dv,F.prototype.plant=pC,F.prototype.reverse=hv,F.prototype.toJSON=F.prototype.valueOf=F.prototype.value=mC,F.prototype.first=F.prototype.head,ta&&(F.prototype[ta]=fv),F},qc=JS();So?((So.exports=qc)._=qc,Sd._=qc):Yn._=qc}).call(IZ)}(Lv,Lv.exports)),Lv.exports}var N_=MZ(),gk={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var uA;function AZ(){return uA||(uA=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(gk)),gk.exports}var NZ=AZ();const si=Pw(NZ),vk=["bg-green-500","bg-red-800","bg-amber-300","bg-blue-500","bg-orange-500","bg-blue-800","bg-yellow-400","bg-cyan-500","bg-lime-300","bg-teal-500","bg-fuchsia-700","bg-rose-500","bg-emerald-500"],Pm=w.forwardRef(({className:t,value:e,size:n="lg",editingMode:r=!1,src:i=null,onGetSrc:s},o)=>{const[a,u]=w.useState(),[f,h]=w.useState(""),[m,v]=w.useState("bg-green-500"),S=()=>({"bg-green-500":"0 0 80px 8px rgba(34, 197, 94, 0.6)","bg-red-800":"0 0 80px 8px rgba(153, 27, 27, 0.6)","bg-amber-300":"0 0 80px 8px rgba(252, 211, 77, 0.6)","bg-blue-500":"0 0 80px 8px rgba(59, 130, 246, 0.6)","bg-orange-500":"0 0 80px 8px rgba(249, 115, 22, 0.6)","bg-blue-800":"0 0 80px 8px rgba(30, 64, 175, 0.6)","bg-yellow-400":"0 0 80px 8px rgba(250, 204, 21, 0.6)","bg-cyan-500":"0 0 80px 8px rgba(6, 182, 212, 0.6)","bg-lime-300":"0 0 80px 8px rgba(190, 242, 100, 0.6)","bg-teal-500":"0 0 80px 8px rgba(20, 184, 166, 0.6)","bg-fuchsia-700":"0 0 80px 8px rgba(162, 28, 175, 0.6)","bg-rose-500":"0 0 80px 8px rgba(244, 63, 94, 0.6)","bg-emerald-500":"0 0 80px 8px rgba(16, 185, 129, 0.6)"})[m||"bg-green-500"]||"0 0 80px 8px rgba(34, 197, 94, 0.6)",k=si("flex items-center justify-center rounded-full",{"size-[208px]":n=="lg","size-[72px]":n=="md","size-[28px]":n=="sm","shadow-lg":n=="lg"||n=="md"},m,t),C=si("text-white",{"text-6xl":n=="lg","text-xl":n=="md","text-xs":n=="sm"});w.useEffect(()=>{var A;h(""),v(vk[0]);const M=e==null?void 0:e.trim();if(M){const I=M.trim().split(""),N=I.includes(" "),O=Math.floor(Math.random()*vk.length),j=vk[O];v(j);const V=(A=I[0])==null?void 0:A.toUpperCase();if(N){const z=I.lastIndexOf(" ")+1,W=I[z].toUpperCase(),J=V.concat(W);h(J)}else h(V)}},[e]),w.useEffect(()=>{if(e){const M=RZ(),A=N_.join([M,f,m],":");s&&s(A)}},[e,f,m,s]);const _=(()=>{const M=i==null?void 0:i.split(":"),A=M==null?void 0:M.at(0),I=M==null?void 0:M.at(1),N=M==null?void 0:M.at(2);return{id:A,value:I,color:N}})();return w.useEffect(()=>{i&&(u(_.id),h(_.value),v(_.color))},[i,_.id,_.value,_.color]),b.jsx("div",{children:(i||r)&&b.jsx("div",{id:a,ref:o,className:k,style:{boxShadow:n=="lg"?S():"none",filter:n=="lg"?"drop-shadow(0 0 10px currentColor)":"none"},children:b.jsx("div",{className:C,children:f})})})}),OZ=(t,e)=>{const n=new EventSource(`${Vf}/sse-invitation-update/${t}`);return n.addEventListener("update",r=>{const i=r.data;e(i)}),n};function dA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function DZ(...t){return e=>{let n=!1;const r=t.map(i=>{const s=dA(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():dA(t[i],null)}}}}function O_(...t){return w.useCallback(DZ(...t),t)}function fA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function LZ(...t){return e=>{let n=!1;const r=t.map(i=>{const s=fA(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():fA(t[i],null)}}}}function jZ(...t){return w.useCallback(LZ(...t),t)}var FZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],UZ=FZ.reduce((t,e)=>{const n=Fr(`Primitive.${e}`),r=w.forwardRef((i,s)=>{const{asChild:o,...a}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(u,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),yk="focusScope.autoFocusOnMount",bk="focusScope.autoFocusOnUnmount",hA={bubbles:!1,cancelable:!0},VZ="FocusScope",nS=w.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,u]=w.useState(null),f=Tl(i),h=Tl(s),m=w.useRef(null),v=jZ(e,C=>u(C)),S=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(r){let C=function(A){if(S.paused||!a)return;const I=A.target;a.contains(I)?m.current=I:_u(m.current,{select:!0})},E=function(A){if(S.paused||!a)return;const I=A.relatedTarget;I!==null&&(a.contains(I)||_u(m.current,{select:!0}))},_=function(A){if(document.activeElement===document.body)for(const N of A)N.removedNodes.length>0&&_u(a)};document.addEventListener("focusin",C),document.addEventListener("focusout",E);const M=new MutationObserver(_);return a&&M.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",E),M.disconnect()}}},[r,a,S.paused]),w.useEffect(()=>{if(a){mA.add(S);const C=document.activeElement;if(!a.contains(C)){const _=new CustomEvent(yk,hA);a.addEventListener(yk,f),a.dispatchEvent(_),_.defaultPrevented||(BZ(qZ(lF(a)),{select:!0}),document.activeElement===C&&_u(a))}return()=>{a.removeEventListener(yk,f),setTimeout(()=>{const _=new CustomEvent(bk,hA);a.addEventListener(bk,h),a.dispatchEvent(_),_.defaultPrevented||_u(C??document.body,{select:!0}),a.removeEventListener(bk,h),mA.remove(S)},0)}}},[a,f,h,S]);const k=w.useCallback(C=>{if(!n&&!r||S.paused)return;const E=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,_=document.activeElement;if(E&&_){const M=C.currentTarget,[A,I]=zZ(M);A&&I?!C.shiftKey&&_===I?(C.preventDefault(),n&&_u(A,{select:!0})):C.shiftKey&&_===A&&(C.preventDefault(),n&&_u(I,{select:!0})):_===M&&C.preventDefault()}},[n,r,S.paused]);return b.jsx(UZ.div,{tabIndex:-1,...o,ref:v,onKeyDown:k})});nS.displayName=VZ;function BZ(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(_u(r,{select:e}),document.activeElement!==n)return}function zZ(t){const e=lF(t),n=pA(e,t),r=pA(e.reverse(),t);return[n,r]}function lF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function pA(t,e){for(const n of t)if(!$Z(n,{upTo:e}))return n}function $Z(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function WZ(t){return t instanceof HTMLInputElement&&"select"in t}function _u(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&WZ(t)&&e&&t.select()}}var mA=HZ();function HZ(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=gA(t,e),t.unshift(e)},remove(e){var n;t=gA(t,e),(n=t[0])==null||n.resume()}}}function gA(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function qZ(t){return t.filter(e=>e.tagName!=="A")}var KZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Zy=KZ.reduce((t,e)=>{const n=Fr(`Primitive.${e}`),r=w.forwardRef((i,s)=>{const{asChild:o,...a}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(u,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),xk=0;function D_(){w.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??vA()),document.body.insertAdjacentElement("beforeend",t[1]??vA()),xk++,()=>{xk===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),xk--}},[])}function vA(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var pl=function(){return pl=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pl.apply(this,arguments)};function cF(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function GZ(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var mx="right-scroll-bar-position",gx="width-before-scroll-bar",YZ="with-scroll-bars-hidden",QZ="--removed-body-scroll-bar-size";function wk(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function JZ(t,e){var n=w.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var XZ=typeof window<"u"?w.useLayoutEffect:w.useEffect,yA=new WeakMap;function ZZ(t,e){var n=JZ(null,function(r){return t.forEach(function(i){return wk(i,r)})});return XZ(function(){var r=yA.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||wk(a,null)}),s.forEach(function(a){i.has(a)||wk(a,o)})}yA.set(n,t)},[t]),n}function eee(t){return t}function tee(t,e){e===void 0&&(e=eee);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var h=o;o=[],h.forEach(s)},f=function(){return Promise.resolve().then(u)};f(),n={push:function(h){o.push(h),f()},filter:function(h){return o=o.filter(h),n}}}};return i}function nee(t){t===void 0&&(t={});var e=tee(null);return e.options=pl({async:!0,ssr:!1},t),e}var uF=function(t){var e=t.sideCar,n=cF(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return w.createElement(r,pl({},n))};uF.isSideCarExport=!0;function ree(t,e){return t.useMedium(e),uF}var dF=nee(),Sk=function(){},rS=w.forwardRef(function(t,e){var n=w.useRef(null),r=w.useState({onScrollCapture:Sk,onWheelCapture:Sk,onTouchMoveCapture:Sk}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,u=t.className,f=t.removeScrollBar,h=t.enabled,m=t.shards,v=t.sideCar,S=t.noIsolation,k=t.inert,C=t.allowPinchZoom,E=t.as,_=E===void 0?"div":E,M=t.gapMode,A=cF(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=v,N=ZZ([n,e]),O=pl(pl({},A),i);return w.createElement(w.Fragment,null,h&&w.createElement(I,{sideCar:dF,removeScrollBar:f,shards:m,noIsolation:S,inert:k,setCallbacks:s,allowPinchZoom:!!C,lockRef:n,gapMode:M}),o?w.cloneElement(w.Children.only(a),pl(pl({},O),{ref:N})):w.createElement(_,pl({},O,{className:u,ref:N}),a))});rS.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rS.classNames={fullWidth:gx,zeroRight:mx};var iee=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function see(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=iee();return e&&t.setAttribute("nonce",e),t}function oee(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function aee(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var lee=function(){var t=0,e=null;return{add:function(n){t==0&&(e=see())&&(oee(e,n),aee(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},cee=function(){var t=lee();return function(e,n){w.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},fF=function(){var t=cee(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},uee={left:0,top:0,right:0,gap:0},Ck=function(t){return parseInt(t||"",10)||0},dee=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Ck(n),Ck(r),Ck(i)]},fee=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return uee;var e=dee(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},hee=fF(),Xp="data-scroll-locked",pee=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(YZ,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Xp,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(mx,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(gx,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(mx," .").concat(mx,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(gx," .").concat(gx,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Xp,`] {
    `).concat(QZ,": ").concat(a,`px;
  }
`)},bA=function(){var t=parseInt(document.body.getAttribute(Xp)||"0",10);return isFinite(t)?t:0},mee=function(){w.useEffect(function(){return document.body.setAttribute(Xp,(bA()+1).toString()),function(){var t=bA()-1;t<=0?document.body.removeAttribute(Xp):document.body.setAttribute(Xp,t.toString())}},[])},gee=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;mee();var s=w.useMemo(function(){return fee(i)},[i]);return w.createElement(hee,{styles:pee(s,!e,i,n?"":"!important")})},n1=!1;if(typeof window<"u")try{var Wb=Object.defineProperty({},"passive",{get:function(){return n1=!0,!0}});window.addEventListener("test",Wb,Wb),window.removeEventListener("test",Wb,Wb)}catch{n1=!1}var _p=n1?{passive:!1}:!1,vee=function(t){return t.tagName==="TEXTAREA"},hF=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!vee(t)&&n[e]==="visible")},yee=function(t){return hF(t,"overflowY")},bee=function(t){return hF(t,"overflowX")},xA=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=pF(t,r);if(i){var s=mF(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},xee=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},wee=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},pF=function(t,e){return t==="v"?yee(e):bee(e)},mF=function(t,e){return t==="v"?xee(e):wee(e)},See=function(t,e){return t==="h"&&e==="rtl"?-1:1},Cee=function(t,e,n,r,i){var s=See(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,u=e.contains(a),f=!1,h=o>0,m=0,v=0;do{var S=mF(t,a),k=S[0],C=S[1],E=S[2],_=C-E-s*k;(k||_)&&pF(t,a)&&(m+=_,v+=k),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(e.contains(a)||e===a));return(h&&Math.abs(m)<1||!h&&Math.abs(v)<1)&&(f=!0),f},Hb=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},wA=function(t){return[t.deltaX,t.deltaY]},SA=function(t){return t&&"current"in t?t.current:t},kee=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Tee=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Eee=0,Pp=[];function _ee(t){var e=w.useRef([]),n=w.useRef([0,0]),r=w.useRef(),i=w.useState(Eee++)[0],s=w.useState(fF)[0],o=w.useRef(t);w.useEffect(function(){o.current=t},[t]),w.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var C=GZ([t.lockRef.current],(t.shards||[]).map(SA),!0).filter(Boolean);return C.forEach(function(E){return E.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),C.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=w.useCallback(function(C,E){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!o.current.allowPinchZoom;var _=Hb(C),M=n.current,A="deltaX"in C?C.deltaX:M[0]-_[0],I="deltaY"in C?C.deltaY:M[1]-_[1],N,O=C.target,j=Math.abs(A)>Math.abs(I)?"h":"v";if("touches"in C&&j==="h"&&O.type==="range")return!1;var V=xA(j,O);if(!V)return!0;if(V?N=j:(N=j==="v"?"h":"v",V=xA(j,O)),!V)return!1;if(!r.current&&"changedTouches"in C&&(A||I)&&(r.current=N),!N)return!0;var z=r.current||N;return Cee(z,E,C,z==="h"?A:I)},[]),u=w.useCallback(function(C){var E=C;if(!(!Pp.length||Pp[Pp.length-1]!==s)){var _="deltaY"in E?wA(E):Hb(E),M=e.current.filter(function(N){return N.name===E.type&&(N.target===E.target||E.target===N.shadowParent)&&kee(N.delta,_)})[0];if(M&&M.should){E.cancelable&&E.preventDefault();return}if(!M){var A=(o.current.shards||[]).map(SA).filter(Boolean).filter(function(N){return N.contains(E.target)}),I=A.length>0?a(E,A[0]):!o.current.noIsolation;I&&E.cancelable&&E.preventDefault()}}},[]),f=w.useCallback(function(C,E,_,M){var A={name:C,delta:E,target:_,should:M,shadowParent:Pee(_)};e.current.push(A),setTimeout(function(){e.current=e.current.filter(function(I){return I!==A})},1)},[]),h=w.useCallback(function(C){n.current=Hb(C),r.current=void 0},[]),m=w.useCallback(function(C){f(C.type,wA(C),C.target,a(C,t.lockRef.current))},[]),v=w.useCallback(function(C){f(C.type,Hb(C),C.target,a(C,t.lockRef.current))},[]);w.useEffect(function(){return Pp.push(s),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:v}),document.addEventListener("wheel",u,_p),document.addEventListener("touchmove",u,_p),document.addEventListener("touchstart",h,_p),function(){Pp=Pp.filter(function(C){return C!==s}),document.removeEventListener("wheel",u,_p),document.removeEventListener("touchmove",u,_p),document.removeEventListener("touchstart",h,_p)}},[]);var S=t.removeScrollBar,k=t.inert;return w.createElement(w.Fragment,null,k?w.createElement(s,{styles:Tee(i)}):null,S?w.createElement(gee,{gapMode:t.gapMode}):null)}function Pee(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Ree=ree(dF,_ee);var iS=w.forwardRef(function(t,e){return w.createElement(rS,pl({},t,{ref:e,sideCar:Ree}))});iS.classNames=rS.classNames;var Iee=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Rp=new WeakMap,qb=new WeakMap,Kb={},kk=0,gF=function(t){return t&&(t.host||gF(t.parentNode))},Mee=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=gF(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Aee=function(t,e,n,r){var i=Mee(e,Array.isArray(t)?t:[t]);Kb[n]||(Kb[n]=new WeakMap);var s=Kb[n],o=[],a=new Set,u=new Set(i),f=function(m){!m||a.has(m)||(a.add(m),f(m.parentNode))};i.forEach(f);var h=function(m){!m||u.has(m)||Array.prototype.forEach.call(m.children,function(v){if(a.has(v))h(v);else try{var S=v.getAttribute(r),k=S!==null&&S!=="false",C=(Rp.get(v)||0)+1,E=(s.get(v)||0)+1;Rp.set(v,C),s.set(v,E),o.push(v),C===1&&k&&qb.set(v,!0),E===1&&v.setAttribute(n,"true"),k||v.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",v,_)}})};return h(e),a.clear(),kk++,function(){o.forEach(function(m){var v=Rp.get(m)-1,S=s.get(m)-1;Rp.set(m,v),s.set(m,S),v||(qb.has(m)||m.removeAttribute(r),qb.delete(m)),S||m.removeAttribute(n)}),kk--,kk||(Rp=new WeakMap,Rp=new WeakMap,qb=new WeakMap,Kb={})}},L_=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Iee(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),Aee(r,i,n,"aria-hidden")):function(){return null}},sS="Dialog",[vF,Vhe]=Na(sS),[Nee,Oa]=vF(sS),yF=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=w.useRef(null),u=w.useRef(null),[f,h]=nd({prop:r,defaultProp:i??!1,onChange:s,caller:sS});return b.jsx(Nee,{scope:e,triggerRef:a,contentRef:u,contentId:bl(),titleId:bl(),descriptionId:bl(),open:f,onOpenChange:h,onOpenToggle:w.useCallback(()=>h(m=>!m),[h]),modal:o,children:n})};yF.displayName=sS;var bF="DialogTrigger",xF=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Oa(bF,n),s=O_(e,i.triggerRef);return b.jsx(Zy.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":U_(i.open),...r,ref:s,onClick:ft(t.onClick,i.onOpenToggle)})});xF.displayName=bF;var j_="DialogPortal",[Oee,wF]=vF(j_,{forceMount:void 0}),SF=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Oa(j_,e);return b.jsx(Oee,{scope:e,forceMount:n,children:w.Children.map(r,o=>b.jsx(Al,{present:n||s.open,children:b.jsx(zw,{asChild:!0,container:i,children:o})}))})};SF.displayName=j_;var ew="DialogOverlay",CF=w.forwardRef((t,e)=>{const n=wF(ew,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Oa(ew,t.__scopeDialog);return s.modal?b.jsx(Al,{present:r||s.open,children:b.jsx(Lee,{...i,ref:e})}):null});CF.displayName=ew;var Dee=Fr("DialogOverlay.RemoveScroll"),Lee=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Oa(ew,n);return b.jsx(iS,{as:Dee,allowPinchZoom:!0,shards:[i.contentRef],children:b.jsx(Zy.div,{"data-state":U_(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),$f="DialogContent",kF=w.forwardRef((t,e)=>{const n=wF($f,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Oa($f,t.__scopeDialog);return b.jsx(Al,{present:r||s.open,children:s.modal?b.jsx(jee,{...i,ref:e}):b.jsx(Fee,{...i,ref:e})})});kF.displayName=$f;var jee=w.forwardRef((t,e)=>{const n=Oa($f,t.__scopeDialog),r=w.useRef(null),i=O_(e,n.contentRef,r);return w.useEffect(()=>{const s=r.current;if(s)return L_(s)},[]),b.jsx(TF,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ft(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ft(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:ft(t.onFocusOutside,s=>s.preventDefault())})}),Fee=w.forwardRef((t,e)=>{const n=Oa($f,t.__scopeDialog),r=w.useRef(!1),i=w.useRef(!1);return b.jsx(TF,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var u,f;(u=t.onInteractOutside)==null||u.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((f=n.triggerRef.current)==null?void 0:f.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),TF=w.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Oa($f,n),u=w.useRef(null),f=O_(e,u);return D_(),b.jsxs(b.Fragment,{children:[b.jsx(nS,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:b.jsx(Wy,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":U_(a.open),...o,ref:f,onDismiss:()=>a.onOpenChange(!1)})}),b.jsxs(b.Fragment,{children:[b.jsx(Uee,{titleId:a.titleId}),b.jsx(Bee,{contentRef:u,descriptionId:a.descriptionId})]})]})}),F_="DialogTitle",EF=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Oa(F_,n);return b.jsx(Zy.h2,{id:i.titleId,...r,ref:e})});EF.displayName=F_;var _F="DialogDescription",PF=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Oa(_F,n);return b.jsx(Zy.p,{id:i.descriptionId,...r,ref:e})});PF.displayName=_F;var RF="DialogClose",IF=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Oa(RF,n);return b.jsx(Zy.button,{type:"button",...r,ref:e,onClick:ft(t.onClick,()=>i.onOpenChange(!1))})});IF.displayName=RF;function U_(t){return t?"open":"closed"}var MF="DialogTitleWarning",[Bhe,AF]=MH(MF,{contentName:$f,titleName:F_,docsSlug:"dialog"}),Uee=({titleId:t})=>{const e=AF(MF),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return w.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Vee="DialogDescriptionWarning",Bee=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${AF(Vee).contentName}}.`;return w.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},zee=yF,$ee=xF,Wee=SF,NF=CF,OF=kF,DF=EF,LF=PF,jF=IF;const e0=zee,oS=$ee,Hee=Wee,qee=jF,FF=w.forwardRef(({className:t,...e},n)=>b.jsx(NF,{ref:n,className:nn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));FF.displayName=NF.displayName;const Ym=w.forwardRef(({className:t,children:e,...n},r)=>b.jsxs(Hee,{children:[b.jsx(FF,{}),b.jsxs(OF,{ref:r,className:nn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,b.jsxs(jF,{className:"absolute right-16 top-16 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-hidden focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[b.jsx(tF,{className:"size-16"}),b.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ym.displayName=OF.displayName;const Qm=({className:t,...e})=>b.jsx("div",{className:nn("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Qm.displayName="DialogHeader";const V_=({className:t,...e})=>b.jsx("div",{className:nn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-8",t),...e});V_.displayName="DialogFooter";const Jm=w.forwardRef(({className:t,...e},n)=>b.jsx(DF,{ref:n,className:nn("text-lg font-semibold leading-none tracking-tight",t),...e}));Jm.displayName=DF.displayName;const B_=w.forwardRef(({className:t,...e},n)=>b.jsx(LF,{ref:n,className:t,...e}));B_.displayName=LF.displayName;const UF=()=>{const{pathname:t}=qs(),[e,n]=HK(),r=w.useRef(null),[i,s]=w.useState(""),[o,a]=w.useState(""),[u,f]=w.useState(!1),h=t.split("/")[2],{data:m}=Ho({queryKey:["invitationCode",h],queryFn:()=>Q9(h)}),v=(C,E)=>`${window.location.origin}/room-invite?code=${C}&room=${E}`;w.useEffect(()=>{if(m){const C=v(m,h);a(C);const E=C.replace(window.location.origin,"");s(E)}},[m]),w.useEffect(()=>(r.current||(r.current=OZ(h,C=>{a(E=>{if(E!==C){const _=v(C,h),M=_.replace(window.location.origin,"");return s(M),_}return E})})),()=>{var C;(C=r.current)==null||C.close(),r.current=null}),[h]);const S=()=>t.includes("/call")?b.jsxs("div",{className:"flex items-center justify-center gap-8 mt-12 p-8 w-full rounded-md text-sm text-white bg-violet-900 hover:bg-violet-800 duration-300",children:[b.jsx(nA,{size:16}),"Invite someone"]}):b.jsx("div",{className:"flex items-center p-12 border rounded-full border-gray-200 bg-gray-100 hover:bg-gray-200 hover:scale-105 duration-300 ease-in-out cursor-pointer",children:b.jsx(nA,{size:16})}),k=C=>()=>{n(C).then(()=>{f(!0),setTimeout(()=>f(!1),2500)})};return b.jsxs(e0,{children:[b.jsx(oS,{children:S()}),b.jsxs(Ym,{className:"sm:max-w-[425px]",children:[b.jsxs(Qm,{children:[b.jsx(Jm,{children:"Invitation "}),b.jsx(B_,{children:"Copy the invitation URL below and share it with a user that wants to participate in this call."})]}),b.jsxs("div",{className:"flex gap-12 mt-8",children:[b.jsx(tS,{id:"invitation",value:i,disabled:!0}),b.jsx(ls,{type:"submit",variant:"ghost",disabled:u,onClick:k(o),children:e&&u?"Copied":"Copy"})]})]})]})},r1=({size:t="md"})=>{const e=si("rounded-full border-violet-300 border-t-violet-700 animate-spin",{"size-16 border-[2px]":t==="sm","size-28 border-4":t==="md","size-64 border-4":t==="lg"});return b.jsx("div",{className:"flex items-center justify-center",children:b.jsx("div",{className:"flex flex-col items-center animate-pulse",children:b.jsx("div",{className:e})})})},Kee=({isHost:t,settingsPanel:e})=>!t&&(e==="invitation"||e==="permissions")?b.jsxs("div",{className:"flex items-center gap-8 p-8 w-fit border border-yellow-400 rounded-8 text-xs bg-yellow-50",children:[b.jsx(GX,{size:16,className:"text-yellow-500"}),b.jsxs("span",{children:[N_.capitalize(e)," settings can only be changed by the host."]})]}):null,Gee=()=>b.jsx("div",{children:b.jsx("div",{className:"flex flex-col gap-4",children:b.jsx("span",{className:"text-sm font-medium",children:"Conversation Settings"})})});function CA(t,[e,n]){return Math.min(n,Math.max(e,t))}function kA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Yee(...t){return e=>{let n=!1;const r=t.map(i=>{const s=kA(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():kA(t[i],null)}}}}function TA(...t){return w.useCallback(Yee(...t),t)}function z_(t){const e=t+"CollectionProvider",[n,r]=Na(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=C=>{const{scope:E,children:_}=C,M=Re.useRef(null),A=Re.useRef(new Map).current;return b.jsx(i,{scope:E,itemMap:A,collectionRef:M,children:_})};o.displayName=e;const a=t+"CollectionSlot",u=Fr(a),f=Re.forwardRef((C,E)=>{const{scope:_,children:M}=C,A=s(a,_),I=TA(E,A.collectionRef);return b.jsx(u,{ref:I,children:M})});f.displayName=a;const h=t+"CollectionItemSlot",m="data-radix-collection-item",v=Fr(h),S=Re.forwardRef((C,E)=>{const{scope:_,children:M,...A}=C,I=Re.useRef(null),N=TA(E,I),O=s(h,_);return Re.useEffect(()=>(O.itemMap.set(I,{ref:I,...A}),()=>void O.itemMap.delete(I))),b.jsx(v,{[m]:"",ref:N,children:M})});S.displayName=h;function k(C){const E=s(t+"CollectionConsumer",C);return Re.useCallback(()=>{const M=E.collectionRef.current;if(!M)return[];const A=Array.from(M.querySelectorAll(`[${m}]`));return Array.from(E.itemMap.values()).sort((O,j)=>A.indexOf(O.ref.current)-A.indexOf(j.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:o,Slot:f,ItemSlot:S},k,r]}function EA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Qee(...t){return e=>{let n=!1;const r=t.map(i=>{const s=EA(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():EA(t[i],null)}}}}function Nl(...t){return w.useCallback(Qee(...t),t)}var Jee=w.createContext(void 0);function aS(t){const e=w.useContext(Jee);return t||e||"ltr"}var Xee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],yo=Xee.reduce((t,e)=>{const n=Fr(`Primitive.${e}`),r=w.forwardRef((i,s)=>{const{asChild:o,...a}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(u,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function $_(t){const e=w.useRef({value:t,previous:t});return w.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Zee=[" ","Enter","ArrowUp","ArrowDown"],ete=[" ","Enter"],Wf="Select",[lS,cS,tte]=z_(Wf),[Xm,zhe]=Na(Wf,[tte,Wm]),uS=Wm(),[nte,fd]=Xm(Wf),[rte,ite]=Xm(Wf),VF=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:u,dir:f,name:h,autoComplete:m,disabled:v,required:S,form:k}=t,C=uS(e),[E,_]=w.useState(null),[M,A]=w.useState(null),[I,N]=w.useState(!1),O=aS(f),[j,V]=nd({prop:r,defaultProp:i??!1,onChange:s,caller:Wf}),[z,W]=nd({prop:o,defaultProp:a,onChange:u,caller:Wf}),J=w.useRef(null),Y=E?k||!!E.closest("form"):!0,[me,ue]=w.useState(new Set),Ie=Array.from(me).map(se=>se.props.value).join(";");return b.jsx(NE,{...C,children:b.jsxs(nte,{required:S,scope:e,trigger:E,onTriggerChange:_,valueNode:M,onValueNodeChange:A,valueNodeHasChildren:I,onValueNodeHasChildrenChange:N,contentId:bl(),value:z,onValueChange:W,open:j,onOpenChange:V,dir:O,triggerPointerDownPosRef:J,disabled:v,children:[b.jsx(lS.Provider,{scope:e,children:b.jsx(rte,{scope:t.__scopeSelect,onNativeOptionAdd:w.useCallback(se=>{ue(xe=>new Set(xe).add(se))},[]),onNativeOptionRemove:w.useCallback(se=>{ue(xe=>{const q=new Set(xe);return q.delete(se),q})},[]),children:n})}),Y?b.jsxs(lU,{"aria-hidden":!0,required:S,tabIndex:-1,name:h,autoComplete:m,value:z,onChange:se=>W(se.target.value),disabled:v,form:k,children:[z===void 0?b.jsx("option",{value:""}):null,Array.from(me)]},Ie):null]})})};VF.displayName=Wf;var BF="SelectTrigger",zF=w.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=uS(n),o=fd(BF,n),a=o.disabled||r,u=Nl(e,o.onTriggerChange),f=cS(n),h=w.useRef("touch"),[m,v,S]=uU(C=>{const E=f().filter(A=>!A.disabled),_=E.find(A=>A.value===o.value),M=dU(E,C,_);M!==void 0&&o.onValueChange(M.value)}),k=C=>{a||(o.onOpenChange(!0),S()),C&&(o.triggerPointerDownPosRef.current={x:Math.round(C.pageX),y:Math.round(C.pageY)})};return b.jsx(OE,{asChild:!0,...s,children:b.jsx(yo.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":cU(o.value)?"":void 0,...i,ref:u,onClick:ft(i.onClick,C=>{C.currentTarget.focus(),h.current!=="mouse"&&k(C)}),onPointerDown:ft(i.onPointerDown,C=>{h.current=C.pointerType;const E=C.target;E.hasPointerCapture(C.pointerId)&&E.releasePointerCapture(C.pointerId),C.button===0&&C.ctrlKey===!1&&C.pointerType==="mouse"&&(k(C),C.preventDefault())}),onKeyDown:ft(i.onKeyDown,C=>{const E=m.current!=="";!(C.ctrlKey||C.altKey||C.metaKey)&&C.key.length===1&&v(C.key),!(E&&C.key===" ")&&Zee.includes(C.key)&&(k(),C.preventDefault())})})})});zF.displayName=BF;var $F="SelectValue",WF=w.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,u=fd($F,n),{onValueNodeHasChildrenChange:f}=u,h=s!==void 0,m=Nl(e,u.onValueNodeChange);return qi(()=>{f(h)},[f,h]),b.jsx(yo.span,{...a,ref:m,style:{pointerEvents:"none"},children:cU(u.value)?b.jsx(b.Fragment,{children:o}):s})});WF.displayName=$F;var ste="SelectIcon",HF=w.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return b.jsx(yo.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});HF.displayName=ste;var ote="SelectPortal",qF=t=>b.jsx(zw,{asChild:!0,...t});qF.displayName=ote;var Hf="SelectContent",KF=w.forwardRef((t,e)=>{const n=fd(Hf,t.__scopeSelect),[r,i]=w.useState();if(qi(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?Zf.createPortal(b.jsx(GF,{scope:t.__scopeSelect,children:b.jsx(lS.Slot,{scope:t.__scopeSelect,children:b.jsx("div",{children:t.children})})}),s):null}return b.jsx(YF,{...t,ref:e})});KF.displayName=Hf;var va=10,[GF,hd]=Xm(Hf),ate="SelectContentImpl",lte=Fr("SelectContent.RemoveScroll"),YF=w.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:u,align:f,alignOffset:h,arrowPadding:m,collisionBoundary:v,collisionPadding:S,sticky:k,hideWhenDetached:C,avoidCollisions:E,..._}=t,M=fd(Hf,n),[A,I]=w.useState(null),[N,O]=w.useState(null),j=Nl(e,de=>I(de)),[V,z]=w.useState(null),[W,J]=w.useState(null),Y=cS(n),[me,ue]=w.useState(!1),Ie=w.useRef(!1);w.useEffect(()=>{if(A)return L_(A)},[A]),D_();const se=w.useCallback(de=>{const[ge,..._e]=Y().map(mt=>mt.ref.current),[We]=_e.slice(-1),dt=document.activeElement;for(const mt of de)if(mt===dt||(mt==null||mt.scrollIntoView({block:"nearest"}),mt===ge&&N&&(N.scrollTop=0),mt===We&&N&&(N.scrollTop=N.scrollHeight),mt==null||mt.focus(),document.activeElement!==dt))return},[Y,N]),xe=w.useCallback(()=>se([V,A]),[se,V,A]);w.useEffect(()=>{me&&xe()},[me,xe]);const{onOpenChange:q,triggerPointerDownPosRef:te}=M;w.useEffect(()=>{if(A){let de={x:0,y:0};const ge=We=>{var dt,mt;de={x:Math.abs(Math.round(We.pageX)-(((dt=te.current)==null?void 0:dt.x)??0)),y:Math.abs(Math.round(We.pageY)-(((mt=te.current)==null?void 0:mt.y)??0))}},_e=We=>{de.x<=10&&de.y<=10?We.preventDefault():A.contains(We.target)||q(!1),document.removeEventListener("pointermove",ge),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",_e,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",_e,{capture:!0})}}},[A,q,te]),w.useEffect(()=>{const de=()=>q(!1);return window.addEventListener("blur",de),window.addEventListener("resize",de),()=>{window.removeEventListener("blur",de),window.removeEventListener("resize",de)}},[q]);const[ae,B]=uU(de=>{const ge=Y().filter(dt=>!dt.disabled),_e=ge.find(dt=>dt.ref.current===document.activeElement),We=dU(ge,de,_e);We&&setTimeout(()=>We.ref.current.focus())}),fe=w.useCallback((de,ge,_e)=>{const We=!Ie.current&&!_e;(M.value!==void 0&&M.value===ge||We)&&(z(de),We&&(Ie.current=!0))},[M.value]),ie=w.useCallback(()=>A==null?void 0:A.focus(),[A]),pe=w.useCallback((de,ge,_e)=>{const We=!Ie.current&&!_e;(M.value!==void 0&&M.value===ge||We)&&J(de)},[M.value]),ke=r==="popper"?i1:QF,Pe=ke===i1?{side:a,sideOffset:u,align:f,alignOffset:h,arrowPadding:m,collisionBoundary:v,collisionPadding:S,sticky:k,hideWhenDetached:C,avoidCollisions:E}:{};return b.jsx(GF,{scope:n,content:A,viewport:N,onViewportChange:O,itemRefCallback:fe,selectedItem:V,onItemLeave:ie,itemTextRefCallback:pe,focusSelectedItem:xe,selectedItemText:W,position:r,isPositioned:me,searchRef:ae,children:b.jsx(iS,{as:lte,allowPinchZoom:!0,children:b.jsx(nS,{asChild:!0,trapped:M.open,onMountAutoFocus:de=>{de.preventDefault()},onUnmountAutoFocus:ft(i,de=>{var ge;(ge=M.trigger)==null||ge.focus({preventScroll:!0}),de.preventDefault()}),children:b.jsx(Wy,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:de=>de.preventDefault(),onDismiss:()=>M.onOpenChange(!1),children:b.jsx(ke,{role:"listbox",id:M.contentId,"data-state":M.open?"open":"closed",dir:M.dir,onContextMenu:de=>de.preventDefault(),..._,...Pe,onPlaced:()=>ue(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:ft(_.onKeyDown,de=>{const ge=de.ctrlKey||de.altKey||de.metaKey;if(de.key==="Tab"&&de.preventDefault(),!ge&&de.key.length===1&&B(de.key),["ArrowUp","ArrowDown","Home","End"].includes(de.key)){let We=Y().filter(dt=>!dt.disabled).map(dt=>dt.ref.current);if(["ArrowUp","End"].includes(de.key)&&(We=We.slice().reverse()),["ArrowUp","ArrowDown"].includes(de.key)){const dt=de.target,mt=We.indexOf(dt);We=We.slice(mt+1)}setTimeout(()=>se(We)),de.preventDefault()}})})})})})})});YF.displayName=ate;var cte="SelectItemAlignedPosition",QF=w.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=fd(Hf,n),o=hd(Hf,n),[a,u]=w.useState(null),[f,h]=w.useState(null),m=Nl(e,j=>h(j)),v=cS(n),S=w.useRef(!1),k=w.useRef(!0),{viewport:C,selectedItem:E,selectedItemText:_,focusSelectedItem:M}=o,A=w.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&f&&C&&E&&_){const j=s.trigger.getBoundingClientRect(),V=f.getBoundingClientRect(),z=s.valueNode.getBoundingClientRect(),W=_.getBoundingClientRect();if(s.dir!=="rtl"){const dt=W.left-V.left,mt=z.left-dt,Et=j.left-mt,Ct=j.width+Et,jn=Math.max(Ct,V.width),wn=window.innerWidth-va,ln=CA(mt,[va,Math.max(va,wn-jn)]);a.style.minWidth=Ct+"px",a.style.left=ln+"px"}else{const dt=V.right-W.right,mt=window.innerWidth-z.right-dt,Et=window.innerWidth-j.right-mt,Ct=j.width+Et,jn=Math.max(Ct,V.width),wn=window.innerWidth-va,ln=CA(mt,[va,Math.max(va,wn-jn)]);a.style.minWidth=Ct+"px",a.style.right=ln+"px"}const J=v(),Y=window.innerHeight-va*2,me=C.scrollHeight,ue=window.getComputedStyle(f),Ie=parseInt(ue.borderTopWidth,10),se=parseInt(ue.paddingTop,10),xe=parseInt(ue.borderBottomWidth,10),q=parseInt(ue.paddingBottom,10),te=Ie+se+me+q+xe,ae=Math.min(E.offsetHeight*5,te),B=window.getComputedStyle(C),fe=parseInt(B.paddingTop,10),ie=parseInt(B.paddingBottom,10),pe=j.top+j.height/2-va,ke=Y-pe,Pe=E.offsetHeight/2,de=E.offsetTop+Pe,ge=Ie+se+de,_e=te-ge;if(ge<=pe){const dt=J.length>0&&E===J[J.length-1].ref.current;a.style.bottom="0px";const mt=f.clientHeight-C.offsetTop-C.offsetHeight,Et=Math.max(ke,Pe+(dt?ie:0)+mt+xe),Ct=ge+Et;a.style.height=Ct+"px"}else{const dt=J.length>0&&E===J[0].ref.current;a.style.top="0px";const Et=Math.max(pe,Ie+C.offsetTop+(dt?fe:0)+Pe)+_e;a.style.height=Et+"px",C.scrollTop=ge-pe+C.offsetTop}a.style.margin=`${va}px 0`,a.style.minHeight=ae+"px",a.style.maxHeight=Y+"px",r==null||r(),requestAnimationFrame(()=>S.current=!0)}},[v,s.trigger,s.valueNode,a,f,C,E,_,s.dir,r]);qi(()=>A(),[A]);const[I,N]=w.useState();qi(()=>{f&&N(window.getComputedStyle(f).zIndex)},[f]);const O=w.useCallback(j=>{j&&k.current===!0&&(A(),M==null||M(),k.current=!1)},[A,M]);return b.jsx(dte,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:S,onScrollButtonChange:O,children:b.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:b.jsx(yo.div,{...i,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});QF.displayName=cte;var ute="SelectPopperPosition",i1=w.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=va,...s}=t,o=uS(n);return b.jsx(DE,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});i1.displayName=ute;var[dte,W_]=Xm(Hf,{}),s1="SelectViewport",JF=w.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=hd(s1,n),o=W_(s1,n),a=Nl(e,s.onViewportChange),u=w.useRef(0);return b.jsxs(b.Fragment,{children:[b.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),b.jsx(lS.Slot,{scope:n,children:b.jsx(yo.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ft(i.onScroll,f=>{const h=f.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:v}=o;if(v!=null&&v.current&&m){const S=Math.abs(u.current-h.scrollTop);if(S>0){const k=window.innerHeight-va*2,C=parseFloat(m.style.minHeight),E=parseFloat(m.style.height),_=Math.max(C,E);if(_<k){const M=_+S,A=Math.min(k,M),I=M-A;m.style.height=A+"px",m.style.bottom==="0px"&&(h.scrollTop=I>0?I:0,m.style.justifyContent="flex-end")}}}u.current=h.scrollTop})})})]})});JF.displayName=s1;var XF="SelectGroup",[fte,hte]=Xm(XF),pte=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=bl();return b.jsx(fte,{scope:n,id:i,children:b.jsx(yo.div,{role:"group","aria-labelledby":i,...r,ref:e})})});pte.displayName=XF;var ZF="SelectLabel",mte=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=hte(ZF,n);return b.jsx(yo.div,{id:i.id,...r,ref:e})});mte.displayName=ZF;var tw="SelectItem",[gte,eU]=Xm(tw),tU=w.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=fd(tw,n),u=hd(tw,n),f=a.value===r,[h,m]=w.useState(s??""),[v,S]=w.useState(!1),k=Nl(e,M=>{var A;return(A=u.itemRefCallback)==null?void 0:A.call(u,M,r,i)}),C=bl(),E=w.useRef("touch"),_=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return b.jsx(gte,{scope:n,value:r,disabled:i,textId:C,isSelected:f,onItemTextChange:w.useCallback(M=>{m(A=>A||((M==null?void 0:M.textContent)??"").trim())},[]),children:b.jsx(lS.ItemSlot,{scope:n,value:r,disabled:i,textValue:h,children:b.jsx(yo.div,{role:"option","aria-labelledby":C,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:k,onFocus:ft(o.onFocus,()=>S(!0)),onBlur:ft(o.onBlur,()=>S(!1)),onClick:ft(o.onClick,()=>{E.current!=="mouse"&&_()}),onPointerUp:ft(o.onPointerUp,()=>{E.current==="mouse"&&_()}),onPointerDown:ft(o.onPointerDown,M=>{E.current=M.pointerType}),onPointerMove:ft(o.onPointerMove,M=>{var A;E.current=M.pointerType,i?(A=u.onItemLeave)==null||A.call(u):E.current==="mouse"&&M.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ft(o.onPointerLeave,M=>{var A;M.currentTarget===document.activeElement&&((A=u.onItemLeave)==null||A.call(u))}),onKeyDown:ft(o.onKeyDown,M=>{var I;((I=u.searchRef)==null?void 0:I.current)!==""&&M.key===" "||(ete.includes(M.key)&&_(),M.key===" "&&M.preventDefault())})})})})});tU.displayName=tw;var jv="SelectItemText",nU=w.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=fd(jv,n),a=hd(jv,n),u=eU(jv,n),f=ite(jv,n),[h,m]=w.useState(null),v=Nl(e,_=>m(_),u.onItemTextChange,_=>{var M;return(M=a.itemTextRefCallback)==null?void 0:M.call(a,_,u.value,u.disabled)}),S=h==null?void 0:h.textContent,k=w.useMemo(()=>b.jsx("option",{value:u.value,disabled:u.disabled,children:S},u.value),[u.disabled,u.value,S]),{onNativeOptionAdd:C,onNativeOptionRemove:E}=f;return qi(()=>(C(k),()=>E(k)),[C,E,k]),b.jsxs(b.Fragment,{children:[b.jsx(yo.span,{id:u.textId,...s,ref:v}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Zf.createPortal(s.children,o.valueNode):null]})});nU.displayName=jv;var rU="SelectItemIndicator",iU=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return eU(rU,n).isSelected?b.jsx(yo.span,{"aria-hidden":!0,...r,ref:e}):null});iU.displayName=rU;var o1="SelectScrollUpButton",sU=w.forwardRef((t,e)=>{const n=hd(o1,t.__scopeSelect),r=W_(o1,t.__scopeSelect),[i,s]=w.useState(!1),o=Nl(e,r.onScrollButtonChange);return qi(()=>{if(n.viewport&&n.isPositioned){let a=function(){const f=u.scrollTop>0;s(f)};const u=n.viewport;return a(),u.addEventListener("scroll",a),()=>u.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?b.jsx(aU,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:u}=n;a&&u&&(a.scrollTop=a.scrollTop-u.offsetHeight)}}):null});sU.displayName=o1;var a1="SelectScrollDownButton",oU=w.forwardRef((t,e)=>{const n=hd(a1,t.__scopeSelect),r=W_(a1,t.__scopeSelect),[i,s]=w.useState(!1),o=Nl(e,r.onScrollButtonChange);return qi(()=>{if(n.viewport&&n.isPositioned){let a=function(){const f=u.scrollHeight-u.clientHeight,h=Math.ceil(u.scrollTop)<f;s(h)};const u=n.viewport;return a(),u.addEventListener("scroll",a),()=>u.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?b.jsx(aU,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:u}=n;a&&u&&(a.scrollTop=a.scrollTop+u.offsetHeight)}}):null});oU.displayName=a1;var aU=w.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=hd("SelectScrollButton",n),o=w.useRef(null),a=cS(n),u=w.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return w.useEffect(()=>()=>u(),[u]),qi(()=>{var h;const f=a().find(m=>m.ref.current===document.activeElement);(h=f==null?void 0:f.ref.current)==null||h.scrollIntoView({block:"nearest"})},[a]),b.jsx(yo.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:ft(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ft(i.onPointerMove,()=>{var f;(f=s.onItemLeave)==null||f.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ft(i.onPointerLeave,()=>{u()})})}),vte="SelectSeparator",yte=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return b.jsx(yo.div,{"aria-hidden":!0,...r,ref:e})});yte.displayName=vte;var l1="SelectArrow",bte=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=uS(n),s=fd(l1,n),o=hd(l1,n);return s.open&&o.position==="popper"?b.jsx(LE,{...i,...r,ref:e}):null});bte.displayName=l1;var xte="SelectBubbleInput",lU=w.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=w.useRef(null),s=Nl(r,i),o=$_(e);return w.useEffect(()=>{const a=i.current;if(!a)return;const u=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&h){const m=new Event("change",{bubbles:!0});h.call(a,e),a.dispatchEvent(m)}},[o,e]),b.jsx(yo.select,{...n,style:{...UL,...n.style},ref:s,defaultValue:e})});lU.displayName=xte;function cU(t){return t===""||t===void 0}function uU(t){const e=Tl(t),n=w.useRef(""),r=w.useRef(0),i=w.useCallback(o=>{const a=n.current+o;e(a),function u(f){n.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(a)},[e]),s=w.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function dU(t,e,n){const i=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=wte(t,Math.max(s,0));i.length===1&&(o=o.filter(f=>f!==n));const u=o.find(f=>f.textValue.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}function wte(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Ste=VF,Cte=zF,kte=WF,Tte=HF,Ete=qF,_te=KF,Pte=JF,Rte=tU,Ite=nU,Mte=iU,Ate=sU,Nte=oU;function _A({...t}){return b.jsx(Ste,{"data-slot":"select",...t})}function PA({...t}){return b.jsx(kte,{"data-slot":"select-value",...t})}function RA({className:t,size:e="default",children:n,...r}){return b.jsxs(Cte,{"data-slot":"select-trigger","data-size":e,className:nn("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-8 rounded-md border bg-transparent px-12 py-8 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-36 data-[size=sm]:h-32 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-16",t),...r,children:[n,b.jsx(Tte,{asChild:!0,children:b.jsx(Kj,{className:"size-16 opacity-50"})})]})}function IA({className:t,children:e,position:n="popper",...r}){return b.jsx(Ete,{children:b.jsxs(_te,{"data-slot":"select-content",className:nn("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[b.jsx(Ote,{}),b.jsx(Pte,{className:nn("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),b.jsx(Dte,{})]})})}function MA({className:t,children:e,...n}){return b.jsxs(Rte,{"data-slot":"select-item",className:nn("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[b.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:b.jsx(Mte,{children:b.jsx(FX,{className:"size-4"})})}),b.jsx(Ite,{children:e})]})}function Ote({className:t,...e}){return b.jsx(Ate,{"data-slot":"select-scroll-up-button",className:nn("flex cursor-default items-center justify-center py-1",t),...e,children:b.jsx(e1,{className:"size-4"})})}function Dte({className:t,...e}){return b.jsx(Nte,{"data-slot":"select-scroll-down-button",className:nn("flex cursor-default items-center justify-center py-1",t),...e,children:b.jsx(Kj,{className:"size-4"})})}var AA={};function Lte(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}var jte=Object.defineProperty,Fte=(t,e,n)=>e in t?jte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NA=(t,e,n)=>Fte(t,typeof e!="symbol"?e+"":e,n);class zs{constructor(){NA(this,"_locking"),NA(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(i=>e=()=>{this._locks-=1,i()}),r=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),r}}function Tr(t,e){if(!t)throw new Error(e)}const Ute=34028234663852886e22,Vte=-34028234663852886e22,Bte=4294967295,zte=2147483647,$te=-2147483648;function vx(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>zte||t<$te)throw new Error("invalid int 32: "+t)}function c1(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>Bte||t<0)throw new Error("invalid uint 32: "+t)}function fU(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>Ute||t<Vte))throw new Error("invalid float 32: "+t)}const hU=Symbol("@bufbuild/protobuf/enum-type");function Wte(t){const e=t[hU];return Tr(e,"missing enum type on enum object"),e}function pU(t,e,n,r){t[hU]=mU(e,n.map(i=>({no:i.no,name:i.name,localName:t[i.no]})))}function mU(t,e,n){const r=Object.create(null),i=Object.create(null),s=[];for(const o of e){const a=gU(o);s.push(a),r[o.name]=a,i[o.no]=a}return{typeName:t,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function Hte(t,e,n){const r={};for(const i of e){const s=gU(i);r[s.localName]=s.no,r[s.no]=s.localName}return pU(r,t,e),r}function gU(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}let H_=class{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(n);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,n){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(n);return i.readMessage(r,e,s,this),this}fromJsonString(e,n){let r;try{r=JSON.parse(e)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(e){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var n;const r=this.toJson(e);return JSON.stringify(r,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}};function qte(t,e,n,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[s]:function(a){t.util.initFields(this),t.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new H_),Object.assign(o,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(a,u){return new o().fromBinary(a,u)},fromJson(a,u){return new o().fromJson(a,u)},fromJsonString(a,u){return new o().fromJsonString(a,u)},equals(a,u){return t.util.equals(o,a,u)}}),o}function Kte(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,(i&128)==0)return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,(n&128)==0)return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,(i&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Tk(t,e,n){for(let s=0;s<28;s=s+7){const o=t>>>s,a=!(!(o>>>7)&&e==0),u=(a?o|128:o)&255;if(n.push(u),!a)return}const r=t>>>28&15|(e&7)<<4,i=e>>3!=0;if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),u=(a?o|128:o)&255;if(n.push(u),!a)return}n.push(e>>>31&1)}}const yx=4294967296;function OA(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let r=0,i=0;function s(o,a){const u=Number(t.slice(o,a));i*=n,r=r*n+u,r>=yx&&(i=i+(r/yx|0),r=r%yx)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?yU(r,i):q_(r,i)}function Gte(t,e){let n=q_(t,e);const r=n.hi&2147483648;r&&(n=yU(n.lo,n.hi));const i=vU(n.lo,n.hi);return r?"-"+i:i}function vU(t,e){if({lo:t,hi:e}=Yte(t,e),e<=2097151)return String(yx*e+t);const n=t&16777215,r=(t>>>24|e<<8)&16777215,i=e>>16&65535;let s=n+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const u=1e7;return s>=u&&(o+=Math.floor(s/u),s%=u),o>=u&&(a+=Math.floor(o/u),o%=u),a.toString()+DA(o)+DA(s)}function Yte(t,e){return{lo:t>>>0,hi:e>>>0}}function q_(t,e){return{lo:t|0,hi:e|0}}function yU(t,e){return e=~e,t?t=~t+1:e+=1,q_(t,e)}const DA=t=>{const e=String(t);return"0000000".slice(e.length)+e};function LA(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function Qte(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;(t&128)!==0&&n<10;n++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function Jte(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof AA!="object"||AA.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(u){const f=typeof u=="bigint"?u:BigInt(u);if(f>s||f<i)throw new Error("int64 invalid: ".concat(u));return f},uParse(u){const f=typeof u=="bigint"?u:BigInt(u);if(f>a||f<o)throw new Error("uint64 invalid: ".concat(u));return f},enc(u){return t.setBigInt64(0,this.parse(u),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(u){return t.setBigInt64(0,this.uParse(u),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(u,f){return t.setInt32(0,u,!0),t.setInt32(4,f,!0),t.getBigInt64(0,!0)},uDec(u,f){return t.setInt32(0,u,!0),t.setInt32(4,f,!0),t.getBigUint64(0,!0)}}}const n=i=>Tr(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>Tr(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),OA(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),OA(i)},dec(i,s){return Gte(i,s)},uDec(i,s){return vU(i,s)}}}const ir=Jte();var je;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(je||(je={}));var sd;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(sd||(sd={}));function Su(t,e,n){if(e===n)return!0;if(t==je.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case je.UINT64:case je.FIXED64:case je.INT64:case je.SFIXED64:case je.SINT64:return e==n}return!1}function Rm(t,e){switch(t){case je.BOOL:return!1;case je.UINT64:case je.FIXED64:case je.INT64:case je.SFIXED64:case je.SINT64:return e==0?ir.zero:"0";case je.DOUBLE:case je.FLOAT:return 0;case je.BYTES:return new Uint8Array(0);case je.STRING:return"";default:return 0}}function bU(t,e){switch(t){case je.BOOL:return e===!1;case je.STRING:return e==="";case je.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var Or;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(Or||(Or={}));class Xte{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(c1(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return vx(e),LA(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){fU(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){c1(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){vx(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return vx(e),e=(e<<1^e>>31)>>>0,LA(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=ir.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=ir.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=ir.enc(e);return Tk(n.lo,n.hi,this.buf),this}sint64(e){let n=ir.enc(e),r=n.hi>>31,i=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return Tk(i,s,this.buf),this}uint64(e){let n=ir.uEnc(e);return Tk(n.lo,n.hi,this.buf),this}}class Zte{constructor(e,n){this.varint64=Kte,this.uint32=Qte,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e,n){let r=this.pos;switch(e){case Or.Varint:for(;this.buf[this.pos++]&128;);break;case Or.Bit64:this.pos+=4;case Or.Bit32:this.pos+=4;break;case Or.LengthDelimited:let i=this.uint32();this.pos+=i;break;case Or.StartGroup:for(;;){const[s,o]=this.tag();if(o===Or.EndGroup){if(n!==void 0&&s!==n)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return ir.dec(...this.varint64())}uint64(){return ir.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,ir.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return ir.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return ir.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function ene(t,e,n,r){let i;return{typeName:e,extendee:n,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=e.split(".").pop(),s.jsonName="[".concat(e,"]"),i=t.util.newFieldList([s]).list()[0]}return i},runtime:t}}function xU(t){const e=t.field.localName,n=Object.create(null);return n[e]=tne(t),[n,()=>n[e]]}function tne(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Rm(e.T,e.L);case"message":const n=e.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function nne(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let Cc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),dS=[];for(let t=0;t<Cc.length;t++)dS[Cc[t].charCodeAt(0)]=t;dS[45]=Cc.indexOf("+");dS[95]=Cc.indexOf("/");const wU={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<t.length;a++){if(s=dS[t.charCodeAt(a)],s===void 0)switch(t[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:n[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:n[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:n[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,i=0;for(let s=0;s<t.length;s++)switch(r=t[s],n){case 0:e+=Cc[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=Cc[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=Cc[i|r>>6],e+=Cc[r&63],n=0;break}return n&&(e+=Cc[i],e+="=",n==1&&(e+="=")),e}};function rne(t,e,n){CU(e,t);const r=e.runtime.bin.makeReadOptions(n),i=nne(t.getType().runtime.bin.listUnknownFields(t),e.field),[s,o]=xU(e);for(const a of i)e.runtime.bin.readField(s,r.readerFactory(a.data),e.field,a.wireType,r);return o()}function ine(t,e,n,r){CU(e,t);const i=e.runtime.bin.makeReadOptions(r),s=e.runtime.bin.makeWriteOptions(r);if(SU(t,e)){const f=t.getType().runtime.bin.listUnknownFields(t).filter(h=>h.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const h of f)t.getType().runtime.bin.onUnknownField(t,h.no,h.wireType,h.data)}const o=s.writerFactory();let a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,n,o,s);const u=i.readerFactory(o.finish());for(;u.pos<u.len;){const[f,h]=u.tag(),m=u.skip(h,f);t.getType().runtime.bin.onUnknownField(t,f,h,m)}}function SU(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(r=>r.no==e.field.no)}function CU(t,e){Tr(t.extendee.typeName==e.getType().typeName,"extension ".concat(t.typeName," can only be applied to message ").concat(t.extendee.typeName))}function kU(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!bU(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function jA(t,e){const n=t.localName,r=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=r?t.T.values[0].no:void 0;break;case"scalar":e[n]=r?Rm(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function kc(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(H_.prototype).every(r=>r in t&&typeof t[r]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function TU(t,e){return kc(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}je.DOUBLE,je.FLOAT,je.INT64,je.UINT64,je.INT32,je.UINT32,je.BOOL,je.STRING,je.BYTES;const FA={ignoreUnknownFields:!1},UA={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function sne(t){return t?Object.assign(Object.assign({},FA),t):FA}function one(t){return t?Object.assign(Object.assign({},UA),t):UA}const nw=Symbol(),bx=Symbol();function ane(){return{makeReadOptions:sne,makeWriteOptions:one,readMessage(t,e,n,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(t.typeName," from JSON: ").concat(ul(e)));r=r??new t;const i=new Map,s=n.typeRegistry;for(const[o,a]of Object.entries(e)){const u=t.fields.findJsonName(o);if(u){if(u.oneof){if(a===null&&u.kind=="scalar")continue;const f=i.get(u.oneof);if(f!==void 0)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: multiple keys for oneof "').concat(u.oneof.name,'" present: "').concat(f,'", "').concat(o,'"'));i.set(u.oneof,o)}VA(r,a,u,n,t)}else{let f=!1;if(s!=null&&s.findExtension&&o.startsWith("[")&&o.endsWith("]")){const h=s.findExtension(o.substring(1,o.length-1));if(h&&h.extendee.typeName==t.typeName){f=!0;const[m,v]=xU(h);VA(m,a,h.field,n,h),ine(r,h,v(),n)}}if(!f&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: key "').concat(o,'" is unknown'))}}return r},writeMessage(t,e){const n=t.getType(),r={};let i;try{for(i of n.fields.byNumber()){if(!kU(i,t)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!cne(i))continue}const o=i.oneof?t[i.oneof.localName].value:t[i.localName],a=BA(i,o,e);a!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=a)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const o of n.runtime.bin.listUnknownFields(t)){const a=s.findExtensionFor(n.typeName,o.no);if(a&&SU(t,a)){const u=rne(t,a,e),f=BA(a.field,u,e);f!==void 0&&(r[a.field.jsonName]=f)}}}catch(s){const o=i?"cannot encode field ".concat(n.typeName,".").concat(i.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),a=s instanceof Error?s.message:String(s);throw new Error(o+(a.length>0?": ".concat(a):""))}return r},readScalar(t,e,n){return Xv(t,e,n??sd.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||bU(t,e)))return xx(t,e)},debug:ul}}function ul(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function VA(t,e,n,r,i){let s=n.localName;if(n.repeated){if(Tr(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ul(e)));const o=t[s];for(const a of e){if(a===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ul(a)));switch(n.kind){case"message":o.push(n.T.fromJson(a,r));break;case"enum":const u=Ek(n.T,a,r.ignoreUnknownFields,!0);u!==bx&&o.push(u);break;case"scalar":try{o.push(Xv(n.T,a,n.L,!0))}catch(f){let h="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ul(a));throw f instanceof Error&&f.message.length>0&&(h+=": ".concat(f.message)),new Error(h)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ul(e)));const o=t[s];for(const[a,u]of Object.entries(e)){if(u===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: map value null"));let f;try{f=lne(n.K,a)}catch(h){let m="cannot decode map key for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ul(e));throw h instanceof Error&&h.message.length>0&&(m+=": ".concat(h.message)),new Error(m)}switch(n.V.kind){case"message":o[f]=n.V.T.fromJson(u,r);break;case"enum":const h=Ek(n.V.T,u,r.ignoreUnknownFields,!0);h!==bx&&(o[f]=h);break;case"scalar":try{o[f]=Xv(n.V.T,u,sd.BIGINT,!0)}catch(m){let v="cannot decode map value for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ul(e));throw m instanceof Error&&m.message.length>0&&(v+=": ".concat(m.message)),new Error(v)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:s},s="value"),n.kind){case"message":const o=n.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let a=t[s];kc(a)?a.fromJson(e,r):(t[s]=a=o.fromJson(e,r),o.fieldWrapper&&!n.oneof&&(t[s]=o.fieldWrapper.unwrapField(a)));break;case"enum":const u=Ek(n.T,e,r.ignoreUnknownFields,!1);switch(u){case nw:jA(n,t);break;case bx:break;default:t[s]=u;break}break;case"scalar":try{const f=Xv(n.T,e,n.L,!1);switch(f){case nw:jA(n,t);break;default:t[s]=f;break}}catch(f){let h="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ul(e));throw f instanceof Error&&f.message.length>0&&(h+=": ".concat(f.message)),new Error(h)}break}}function lne(t,e){if(t===je.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Xv(t,e,sd.BIGINT,!0).toString()}function Xv(t,e,n,r){if(e===null)return r?Rm(t,n):nw;switch(t){case je.DOUBLE:case je.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return t==je.FLOAT&&fU(i),i;case je.INT32:case je.FIXED32:case je.SFIXED32:case je.SINT32:case je.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return t==je.UINT32||t==je.FIXED32?c1(s):vx(s),s;case je.INT64:case je.SFIXED64:case je.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=ir.parse(e);return n?o.toString():o;case je.FIXED64:case je.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=ir.uParse(e);return n?a.toString():a;case je.BOOL:if(typeof e!="boolean")break;return e;case je.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case je.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return wU.dec(e)}throw new Error}function Ek(t,e,n,r){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:r?t.values[0].no:nw;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=t.findName(e);if(i!==void 0)return i.no;if(n)return bx;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(ul(e)))}function cne(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function BA(t,e,n){if(t.kind=="map"){Tr(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(t.V.kind){case"scalar":for(const[o,a]of i)r[o.toString()]=xx(t.V.T,a);break;case"message":for(const[o,a]of i)r[o.toString()]=a.toJson(n);break;case"enum":const s=t.V.T;for(const[o,a]of i)r[o.toString()]=_k(s,a,n.enumAsInteger);break}return n.emitDefaultValues||i.length>0?r:void 0}if(t.repeated){Tr(Array.isArray(e));const r=[];switch(t.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(xx(t.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(_k(t.T,e[i],n.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(n));break}return n.emitDefaultValues||r.length>0?r:void 0}switch(t.kind){case"scalar":return xx(t.T,e);case"enum":return _k(t.T,e,n.enumAsInteger);case"message":return TU(t.T,e).toJson(n)}}function _k(t,e,n){var r;if(Tr(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const i=t.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function xx(t,e){switch(t){case je.INT32:case je.SFIXED32:case je.SINT32:case je.FIXED32:case je.UINT32:return Tr(typeof e=="number"),e;case je.FLOAT:case je.DOUBLE:return Tr(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case je.STRING:return Tr(typeof e=="string"),e;case je.BOOL:return Tr(typeof e=="boolean"),e;case je.UINT64:case je.FIXED64:case je.INT64:case je.SFIXED64:case je.SINT64:return Tr(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case je.BYTES:return Tr(e instanceof Uint8Array),wU.enc(e)}}const Ip=Symbol("@bufbuild/protobuf/unknown-fields"),zA={readUnknownFields:!0,readerFactory:t=>new Zte(t)},$A={writeUnknownFields:!0,writerFactory:()=>new Xte};function une(t){return t?Object.assign(Object.assign({},zA),t):zA}function dne(t){return t?Object.assign(Object.assign({},$A),t):$A}function fne(){return{makeReadOptions:une,makeWriteOptions:dne,listUnknownFields(t){var e;return(e=t[Ip])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[Ip]},writeUnknownFields(t,e){const r=t[Ip];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(t,e,n,r){const i=t;Array.isArray(i[Ip])||(i[Ip]=[]),i[Ip].push({no:e,wireType:n,data:r})},readMessage(t,e,n,r,i){const s=t.getType(),o=i?e.len:e.pos+n;let a,u;for(;e.pos<o&&([a,u]=e.tag(),!(i===!0&&u==Or.EndGroup));){const f=s.fields.find(a);if(!f){const h=e.skip(u,a);r.readUnknownFields&&this.onUnknownField(t,a,u,h);continue}WA(t,e,f,u,r)}if(i&&(u!=Or.EndGroup||a!==n))throw new Error("invalid end group tag")},readField:WA,writeMessage(t,e,n){const r=t.getType();for(const i of r.fields.byNumber()){if(!kU(i,t)){if(i.req)throw new Error("cannot encode field ".concat(r.typeName,".").concat(i.name," to binary: required field not set"));continue}const s=i.oneof?t[i.oneof.localName].value:t[i.localName];HA(i,s,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,r){e!==void 0&&HA(t,e,n,r)}}}function WA(t,e,n,r,i){let{repeated:s,localName:o}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=o&&delete t.value,t.case=o,o="value"),n.kind){case"scalar":case"enum":const a=n.kind=="enum"?je.INT32:n.T;let u=rw;if(n.kind=="scalar"&&n.L>0&&(u=pne),s){let v=t[o];if(r==Or.LengthDelimited&&a!=je.STRING&&a!=je.BYTES){let k=e.uint32()+e.pos;for(;e.pos<k;)v.push(u(e,a))}else v.push(u(e,a))}else t[o]=u(e,a);break;case"message":const f=n.T;s?t[o].push(wx(e,new f,i,n)):kc(t[o])?wx(e,t[o],i,n):(t[o]=wx(e,new f,i,n),f.fieldWrapper&&!n.oneof&&!n.repeated&&(t[o]=f.fieldWrapper.unwrapField(t[o])));break;case"map":let[h,m]=hne(n,e,i);t[o][h]=m;break}}function wx(t,e,n,r){const i=e.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(e,t,s?r.no:t.uint32(),n,s),e}function hne(t,e,n){const r=e.uint32(),i=e.pos+r;let s,o;for(;e.pos<i;){const[a]=e.tag();switch(a){case 1:s=rw(e,t.K);break;case 2:switch(t.V.kind){case"scalar":o=rw(e,t.V.T);break;case"enum":o=e.int32();break;case"message":o=wx(e,new t.V.T,n,void 0);break}break}}if(s===void 0&&(s=Rm(t.K,sd.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(t.V.kind){case"scalar":o=Rm(t.V.T,sd.BIGINT);break;case"enum":o=t.V.T.values[0].no;break;case"message":o=new t.V.T;break}return[s,o]}function pne(t,e){const n=rw(t,e);return typeof n=="bigint"?n.toString():n}function rw(t,e){switch(e){case je.STRING:return t.string();case je.BOOL:return t.bool();case je.DOUBLE:return t.double();case je.FLOAT:return t.float();case je.INT32:return t.int32();case je.INT64:return t.int64();case je.UINT64:return t.uint64();case je.FIXED64:return t.fixed64();case je.BYTES:return t.bytes();case je.FIXED32:return t.fixed32();case je.SFIXED32:return t.sfixed32();case je.SFIXED64:return t.sfixed64();case je.SINT64:return t.sint64();case je.UINT32:return t.uint32();case je.SINT32:return t.sint32()}}function HA(t,e,n,r){Tr(e!==void 0);const i=t.repeated;switch(t.kind){case"scalar":case"enum":let s=t.kind=="enum"?je.INT32:t.T;if(i)if(Tr(Array.isArray(e)),t.packed)gne(n,s,t.no,e);else for(const o of e)Zv(n,s,t.no,o);else Zv(n,s,t.no,e);break;case"message":if(i){Tr(Array.isArray(e));for(const o of e)qA(n,r,t,o)}else qA(n,r,t,e);break;case"map":Tr(typeof e=="object"&&e!=null);for(const[o,a]of Object.entries(e))mne(n,r,t,o,a);break}}function mne(t,e,n,r,i){t.tag(n.no,Or.LengthDelimited),t.fork();let s=r;switch(n.K){case je.INT32:case je.FIXED32:case je.UINT32:case je.SFIXED32:case je.SINT32:s=Number.parseInt(r);break;case je.BOOL:Tr(r=="true"||r=="false"),s=r=="true";break}switch(Zv(t,n.K,1,s),n.V.kind){case"scalar":Zv(t,n.V.T,2,i);break;case"enum":Zv(t,je.INT32,2,i);break;case"message":Tr(i!==void 0),t.tag(2,Or.LengthDelimited).bytes(i.toBinary(e));break}t.join()}function qA(t,e,n,r){const i=TU(n.T,r);n.delimited?t.tag(n.no,Or.StartGroup).raw(i.toBinary(e)).tag(n.no,Or.EndGroup):t.tag(n.no,Or.LengthDelimited).bytes(i.toBinary(e))}function Zv(t,e,n,r){Tr(r!==void 0);let[i,s]=EU(e);t.tag(n,i)[s](r)}function gne(t,e,n,r){if(!r.length)return;t.tag(n,Or.LengthDelimited).fork();let[,i]=EU(e);for(let s=0;s<r.length;s++)t[i](r[s]);t.join()}function EU(t){let e=Or.Varint;switch(t){case je.BYTES:case je.STRING:e=Or.LengthDelimited;break;case je.DOUBLE:case je.FIXED64:case je.SFIXED64:e=Or.Bit64;break;case je.FIXED32:case je.SFIXED32:case je.FLOAT:e=Or.Bit32;break}const n=je[t].toLowerCase();return[e,n]}function vne(){return{setEnumType:pU,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const r of n.fields.byMember()){const i=r.localName,s=e,o=t;if(o[i]!=null)switch(r.kind){case"oneof":const a=o[i].case;if(a===void 0)continue;const u=r.findField(a);let f=o[i].value;u&&u.kind=="message"&&!kc(f,u.T)?f=new u.T(f):u&&u.kind==="scalar"&&u.T===je.BYTES&&(f=Tv(f)),s[i]={case:a,value:f};break;case"scalar":case"enum":let h=o[i];r.T===je.BYTES&&(h=r.repeated?h.map(Tv):Tv(h)),s[i]=h;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===je.BYTES)for(const[S,k]of Object.entries(o[i]))s[i][S]=Tv(k);else Object.assign(s[i],o[i]);break;case"message":const v=r.V.T;for(const S of Object.keys(o[i])){let k=o[i][S];v.fieldWrapper||(k=new v(k)),s[i][S]=k}break}break;case"message":const m=r.T;if(r.repeated)s[i]=o[i].map(v=>kc(v,m)?v:new m(v));else{const v=o[i];m.fieldWrapper?m.typeName==="google.protobuf.BytesValue"?s[i]=Tv(v):s[i]=v:s[i]=kc(v,m)?v:new m(v)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(r=>{const i=e[r.localName],s=n[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,a)=>r.T.equals(o,s[a]));case"scalar":return i.every((o,a)=>Su(r.T,o,s[a]));case"enum":return i.every((o,a)=>Su(je.INT32,o,s[a]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":let o=i,a=s;return r.T.fieldWrapper&&(o!==void 0&&!kc(o)&&(o=r.T.fieldWrapper.wrapField(o)),a!==void 0&&!kc(a)&&(a=r.T.fieldWrapper.wrapField(a))),r.T.equals(o,a);case"enum":return Su(je.INT32,i,s);case"scalar":return Su(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const u=r.findField(i.case);if(u===void 0)return!0;switch(u.kind){case"message":return u.T.equals(i.value,s.value);case"enum":return Su(je.INT32,i.value,s.value);case"scalar":return Su(u.T,i.value,s.value)}throw new Error("oneof cannot contain ".concat(u.kind));case"map":const f=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const h=r.V.T;return f.every(v=>h.equals(i[v],s[v]));case"enum":return f.every(v=>Su(je.INT32,i[v],s[v]));case"scalar":const m=r.V.T;return f.every(v=>Su(m,i[v],s[v]))}break}})},clone(t){const e=t.getType(),n=new e,r=n;for(const i of e.fields.byMember()){const s=t[i.localName];let o;if(i.repeated)o=s.map(Gb);else if(i.kind=="map"){o=r[i.localName];for(const[a,u]of Object.entries(s))o[a]=Gb(u)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:Gb(s.value)}:{case:void 0}:o=Gb(s);r[i.localName]=o}for(const i of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return n}}}function Gb(t){if(t===void 0)return t;if(kc(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function Tv(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function yne(t,e,n){return{syntax:t,json:ane(),bin:fne(),util:Object.assign(Object.assign({},vne()),{newFieldList:e,initFields:n}),makeMessageType(r,i,s){return qte(this,r,i,s)},makeEnum:Hte,makeEnumType:mU,getEnumType:Wte,makeExtension(r,i,s){return ene(this,r,i,s)}}}class bne{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}}function _U(t,e){const n=PU(t);return e?n:Tne(kne(n))}function xne(t){return _U(t,!1)}const wne=PU;function PU(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const Sne=new Set(["constructor","toString","toJSON","valueOf"]),Cne=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),RU=t=>"".concat(t,"$"),kne=t=>Cne.has(t)?RU(t):t,Tne=t=>Sne.has(t)?RU(t):t;class Ene{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=xne(e)}addField(e){Tr(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function _ne(t,e){var n,r,i,s,o,a;const u=[];let f;for(const h of typeof t=="function"?t():t){const m=h;if(m.localName=_U(h.name,h.oneof!==void 0),m.jsonName=(n=h.jsonName)!==null&&n!==void 0?n:wne(h.name),m.repeated=(r=h.repeated)!==null&&r!==void 0?r:!1,h.kind=="scalar"&&(m.L=(i=h.L)!==null&&i!==void 0?i:sd.BIGINT),m.delimited=(s=h.delimited)!==null&&s!==void 0?s:!1,m.req=(o=h.req)!==null&&o!==void 0?o:!1,m.opt=(a=h.opt)!==null&&a!==void 0?a:!1,h.packed===void 0&&(m.packed=h.kind=="enum"||h.kind=="scalar"&&h.T!=je.BYTES&&h.T!=je.STRING),h.oneof!==void 0){const v=typeof h.oneof=="string"?h.oneof:h.oneof.name;(!f||f.name!=v)&&(f=new Ene(v)),m.oneof=f,f.addField(m)}u.push(m)}return u}const be=yne("proto3",t=>new bne(t,e=>_ne(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=Rm(e.T,e.L);break}}});class js extends H_{constructor(e){super(),this.seconds=ir.zero,this.nanos=0,be.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(be.json.debug(e)));const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=ir.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return js.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new js({seconds:ir.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new js().fromBinary(e,n)}static fromJson(e,n){return new js().fromJson(e,n)}static fromJsonString(e,n){return new js().fromJsonString(e,n)}static equals(e,n){return be.util.equals(js,e,n)}}js.runtime=be;js.typeName="google.protobuf.Timestamp";js.fields=be.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const Pne=be.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:js},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:Rne,repeated:!0},{no:5,name:"events",kind:"message",T:Mne,repeated:!0}]),Rne=be.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:Ine,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),Ine=be.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:js},{no:3,name:"value",kind:"scalar",T:2}]),Mne=be.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:js},{no:7,name:"normalized_end_timestamp",kind:"message",T:js,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),IU=be.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),Ca=be.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),Kr=be.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),K_=be.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),Fv=be.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),vy=be.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),Ta=be.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),ff=be.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),Ane=be.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),wi=be.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),fS=be.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:iw,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:$U}]),iw=be.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),Nne=be.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:be.getEnumType(Kr),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),qf=be.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:be.getEnumType(Zp)},{no:4,name:"tracks",kind:"message",T:Wp,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:Nne},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:be.getEnumType(yy)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:be.getEnumType(Ta)},{no:18,name:"kind_details",kind:"enum",T:be.getEnumType(One),repeated:!0}]),Zp=be.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),yy=be.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"},{no:7,name:"CONNECTOR"}]),One=be.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),ii=be.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),Dne=be.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Ku,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:be.getEnumType(MU)},{no:6,name:"sdp_cid",kind:"scalar",T:9}]),Wp=be.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:be.getEnumType(Ca)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:be.getEnumType(Kr)},{no:10,name:"layers",kind:"message",T:Ku,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:Dne,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:be.getEnumType(ii)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:$U},{no:19,name:"audio_features",kind:"enum",T:be.getEnumType(wi),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:be.getEnumType(IU)}]),Ku=be.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:be.getEnumType(K_)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),MU=be.makeEnum("livekit.VideoLayer.Mode",[{no:0,name:"MODE_UNUSED"},{no:1,name:"ONE_SPATIAL_LAYER_PER_STREAM"},{no:2,name:"MULTIPLE_SPATIAL_LAYERS_PER_STREAM"},{no:3,name:"ONE_SPATIAL_LAYER_PER_STREAM_INCOMPLETE_RTCP_SR"}]),as=be.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:be.getEnumType(Jt)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:G_,oneof:"value"},{no:3,name:"speaker",kind:"message",T:Lne,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:DU,oneof:"value"},{no:7,name:"transcription",kind:"message",T:jne,oneof:"value"},{no:8,name:"metrics",kind:"message",T:Pne,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:sw,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:Y_,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:Q_,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:J_,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:ow,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:aw,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:lw,oneof:"value"},{no:18,name:"encrypted_packet",kind:"message",T:AU,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),Jt=be.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),AU=be.makeMessageType("livekit.EncryptedPacket",()=>[{no:1,name:"encryption_type",kind:"enum",T:be.getEnumType(ii)},{no:2,name:"iv",kind:"scalar",T:12},{no:3,name:"key_index",kind:"scalar",T:13},{no:4,name:"encrypted_value",kind:"scalar",T:12}]),NU=be.makeMessageType("livekit.EncryptedPacketPayload",()=>[{no:1,name:"user",kind:"message",T:G_,oneof:"value"},{no:3,name:"chat_message",kind:"message",T:sw,oneof:"value"},{no:4,name:"rpc_request",kind:"message",T:Y_,oneof:"value"},{no:5,name:"rpc_ack",kind:"message",T:Q_,oneof:"value"},{no:6,name:"rpc_response",kind:"message",T:J_,oneof:"value"},{no:7,name:"stream_header",kind:"message",T:ow,oneof:"value"},{no:8,name:"stream_chunk",kind:"message",T:aw,oneof:"value"},{no:9,name:"stream_trailer",kind:"message",T:lw,oneof:"value"}]),Lne=be.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:OU,repeated:!0}]),OU=be.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),G_=be.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),DU=be.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),jne=be.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:Fne,repeated:!0}]),Fne=be.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),sw=be.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),Y_=be.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),Q_=be.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),J_=be.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:LU,oneof:"value"}]),LU=be.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),jU=be.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),FU=be.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:be.getEnumType(UU)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),UU=be.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),VU=be.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:be.getEnumType(BU)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),BU=be.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),zU=be.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:KA},{no:2,name:"screen",kind:"message",T:KA},{no:3,name:"resume_connection",kind:"enum",T:be.getEnumType(vy)},{no:4,name:"disabled_codecs",kind:"message",T:Une},{no:5,name:"force_relay",kind:"enum",T:be.getEnumType(vy)}]),KA=be.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:be.getEnumType(vy)}]),Une=be.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:iw,repeated:!0},{no:2,name:"publish",kind:"message",T:iw,repeated:!0}]),$U=be.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),u1=be.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),WU=be.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:be.getEnumType(u1)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),HU=be.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),ow=be.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:be.getEnumType(ii)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:WU,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:HU,oneof:"content_header"}],{localName:"DataStream_Header"}),aw=be.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),lw=be.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),Vne=be.makeMessageType("livekit.SubscribedAudioCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"enabled",kind:"scalar",T:8}]),ka=be.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),d1=be.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),Bne=be.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),zne=be.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:od,oneof:"message"},{no:2,name:"answer",kind:"message",T:od,oneof:"message"},{no:3,name:"trickle",kind:"message",T:hS,oneof:"message"},{no:4,name:"add_track",kind:"message",T:by,oneof:"message"},{no:5,name:"mute",kind:"message",T:pS,oneof:"message"},{no:6,name:"subscription",kind:"message",T:mS,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:qU,oneof:"message"},{no:8,name:"leave",kind:"message",T:gS,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:GU,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:JU,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:nP,oneof:"message"},{no:13,name:"simulate",kind:"message",T:cl,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:eP,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:e3,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:Z_,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:KU,oneof:"message"}]),GA=be.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:$ne,oneof:"message"},{no:2,name:"answer",kind:"message",T:od,oneof:"message"},{no:3,name:"offer",kind:"message",T:od,oneof:"message"},{no:4,name:"trickle",kind:"message",T:hS,oneof:"message"},{no:5,name:"update",kind:"message",T:qne,oneof:"message"},{no:6,name:"track_published",kind:"message",T:X_,oneof:"message"},{no:8,name:"leave",kind:"message",T:gS,oneof:"message"},{no:9,name:"mute",kind:"message",T:pS,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:Kne,oneof:"message"},{no:11,name:"room_update",kind:"message",T:Gne,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:Qne,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:Xne,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:ere,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:nre,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:Hne,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:Wne,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:ire,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:are,oneof:"message"},{no:22,name:"request_response",kind:"message",T:lre,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:cre,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:rre,oneof:"message"},{no:25,name:"media_sections_requirement",kind:"message",T:hre,oneof:"message"},{no:26,name:"subscribed_audio_codec_update",kind:"message",T:tre,oneof:"message"}]),f1=be.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Ku,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:be.getEnumType(MU)}]),by=be.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:be.getEnumType(Ca)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:be.getEnumType(Kr)},{no:9,name:"layers",kind:"message",T:Ku,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:f1,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:be.getEnumType(ii)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:be.getEnumType(IU)},{no:17,name:"audio_features",kind:"enum",T:be.getEnumType(wi),repeated:!0}]),hS=be.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:be.getEnumType(ka)},{no:3,name:"final",kind:"scalar",T:8}]),pS=be.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),$ne=be.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:fS},{no:2,name:"participant",kind:"message",T:qf},{no:3,name:"other_participants",kind:"message",T:qf,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:YU,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:zU},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:FU},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:iw,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),Wne=be.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:YU,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:zU},{no:3,name:"server_info",kind:"message",T:FU},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),X_=be.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:Wp}]),Hne=be.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),od=be.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13},{no:4,name:"mid_to_track_id",kind:"map",K:9,V:{kind:"scalar",T:9}}]),qne=be.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:qf,repeated:!0}]),mS=be.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:jU,repeated:!0}]),qU=be.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:be.getEnumType(K_)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),Z_=be.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:be.getEnumType(wi),repeated:!0}]),KU=be.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),gS=be.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:be.getEnumType(Ta)},{no:3,name:"action",kind:"enum",T:be.getEnumType(em)},{no:4,name:"regions",kind:"message",T:sre}]),em=be.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),GU=be.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:Ku,repeated:!0}]),eP=be.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),YU=be.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),Kne=be.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:OU,repeated:!0}]),Gne=be.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:fS}]),Yne=be.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:be.getEnumType(Fv)},{no:3,name:"score",kind:"scalar",T:2}]),Qne=be.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:Yne,repeated:!0}]),Jne=be.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:be.getEnumType(d1)}]),Xne=be.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:Jne,repeated:!0}]),tP=be.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:be.getEnumType(K_)},{no:2,name:"enabled",kind:"scalar",T:8}]),Zne=be.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:tP,repeated:!0}]),ere=be.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:tP,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:Zne,repeated:!0}]),tre=be.makeMessageType("livekit.SubscribedAudioCodecUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_audio_codecs",kind:"message",T:Vne,repeated:!0}]),QU=be.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),JU=be.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:QU,repeated:!0}]),nre=be.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),rre=be.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:fS},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:qf},{no:4,name:"other_participants",kind:"message",T:qf,repeated:!0}]),nP=be.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:od},{no:2,name:"subscription",kind:"message",T:mS},{no:3,name:"publish_tracks",kind:"message",T:X_,repeated:!0},{no:4,name:"data_channels",kind:"message",T:ZU,repeated:!0},{no:5,name:"offer",kind:"message",T:od},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:XU,repeated:!0}]),XU=be.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),ZU=be.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:be.getEnumType(ka)}]),cl=be.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:be.getEnumType(Bne),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),e3=be.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),ire=be.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),sre=be.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:ore,repeated:!0}]),ore=be.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),are=be.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:be.getEnumType(Ane)}]),lre=be.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:be.getEnumType(rP)},{no:3,name:"message",kind:"scalar",T:9},{no:4,name:"trickle",kind:"message",T:hS,oneof:"request"},{no:5,name:"add_track",kind:"message",T:by,oneof:"request"},{no:6,name:"mute",kind:"message",T:pS,oneof:"request"},{no:7,name:"update_metadata",kind:"message",T:eP,oneof:"request"},{no:8,name:"update_audio_track",kind:"message",T:Z_,oneof:"request"},{no:9,name:"update_video_track",kind:"message",T:KU,oneof:"request"}]),rP=be.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"},{no:4,name:"QUEUED"},{no:5,name:"UNSUPPORTED_TYPE"},{no:6,name:"UNCLASSIFIED_ERROR"}]),cre=be.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),t3=be.makeMessageType("livekit.ConnectionSettings",()=>[{no:1,name:"auto_subscribe",kind:"scalar",T:8},{no:2,name:"adaptive_stream",kind:"scalar",T:8},{no:3,name:"subscriber_allow_pause",kind:"scalar",T:8,opt:!0},{no:4,name:"disable_ice_lite",kind:"scalar",T:8}]),ure=be.makeMessageType("livekit.JoinRequest",()=>[{no:1,name:"client_info",kind:"message",T:VU},{no:2,name:"connection_settings",kind:"message",T:t3},{no:3,name:"metadata",kind:"scalar",T:9},{no:4,name:"participant_attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"add_track_requests",kind:"message",T:by,repeated:!0},{no:6,name:"publisher_offer",kind:"message",T:od},{no:7,name:"reconnect",kind:"scalar",T:8},{no:8,name:"reconnect_reason",kind:"enum",T:be.getEnumType(ff)},{no:9,name:"participant_sid",kind:"scalar",T:9},{no:10,name:"sync_state",kind:"message",T:nP}]),dre=be.makeMessageType("livekit.WrappedJoinRequest",()=>[{no:1,name:"compression",kind:"enum",T:be.getEnumType(fre)},{no:2,name:"join_request",kind:"scalar",T:12}]),fre=be.makeEnum("livekit.WrappedJoinRequest.Compression",[{no:0,name:"NONE"},{no:1,name:"GZIP"}]),hre=be.makeMessageType("livekit.MediaSectionsRequirement",()=>[{no:1,name:"num_audios",kind:"scalar",T:13},{no:2,name:"num_videos",kind:"scalar",T:13}]);function pre(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sx={exports:{}},mre=Sx.exports,YA;function gre(){return YA||(YA=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(mre,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},o=null;function a(C,E){var _=C[E];if(typeof _.bind=="function")return _.bind(C);try{return Function.prototype.bind.call(_,C)}catch{return function(){return Function.prototype.apply.apply(_,[C,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function f(C){return C==="debug"&&(C="log"),typeof console===n?!1:C==="trace"&&r?u:console[C]!==void 0?a(console,C):console.log!==void 0?a(console,"log"):e}function h(){for(var C=this.getLevel(),E=0;E<i.length;E++){var _=i[E];this[_]=E<C?e:this.methodFactory(_,C,this.name)}if(this.log=this.debug,typeof console===n&&C<this.levels.SILENT)return"No console available for logging"}function m(C){return function(){typeof console!==n&&(h.call(this),this[C].apply(this,arguments))}}function v(C,E,_){return f(C)||m.apply(this,arguments)}function S(C,E){var _=this,M,A,I,N="loglevel";typeof C=="string"?N+=":"+C:typeof C=="symbol"&&(N=void 0);function O(J){var Y=(i[J]||"silent").toUpperCase();if(!(typeof window===n||!N)){try{window.localStorage[N]=Y;return}catch{}try{window.document.cookie=encodeURIComponent(N)+"="+Y+";"}catch{}}}function j(){var J;if(!(typeof window===n||!N)){try{J=window.localStorage[N]}catch{}if(typeof J===n)try{var Y=window.document.cookie,me=encodeURIComponent(N),ue=Y.indexOf(me+"=");ue!==-1&&(J=/^([^;]+)/.exec(Y.slice(ue+me.length+1))[1])}catch{}return _.levels[J]===void 0&&(J=void 0),J}}function V(){if(!(typeof window===n||!N)){try{window.localStorage.removeItem(N)}catch{}try{window.document.cookie=encodeURIComponent(N)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function z(J){var Y=J;if(typeof Y=="string"&&_.levels[Y.toUpperCase()]!==void 0&&(Y=_.levels[Y.toUpperCase()]),typeof Y=="number"&&Y>=0&&Y<=_.levels.SILENT)return Y;throw new TypeError("log.setLevel() called with invalid level: "+J)}_.name=C,_.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},_.methodFactory=E||v,_.getLevel=function(){return I??A??M},_.setLevel=function(J,Y){return I=z(J),Y!==!1&&O(I),h.call(_)},_.setDefaultLevel=function(J){A=z(J),j()||_.setLevel(J,!1)},_.resetLevel=function(){I=null,V(),h.call(_)},_.enableAll=function(J){_.setLevel(_.levels.TRACE,J)},_.disableAll=function(J){_.setLevel(_.levels.SILENT,J)},_.rebuild=function(){if(o!==_&&(M=z(o.getLevel())),h.call(_),o===_)for(var J in s)s[J].rebuild()},M=z(o?o.getLevel():"WARN");var W=j();W!=null&&(I=z(W)),h.call(_)}o=new S,o.getLogger=function(E){if(typeof E!="symbol"&&typeof E!="string"||E==="")throw new TypeError("You must supply a name when creating a logger.");var _=s[E];return _||(_=s[E]=new S(E,o.methodFactory)),_};var k=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=k),o},o.getLoggers=function(){return s},o.default=o,o})}(Sx)),Sx.exports}var vS=gre(),h1;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(h1||(h1={}));var Ra;(function(t){t.Default="livekit",t.Room="livekit-room",t.TokenSource="livekit-token-source",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(Ra||(Ra={}));let en=vS.getLogger("livekit");Object.values(Ra).map(t=>vS.getLogger(t));en.setDefaultLevel(h1.info);function Nc(t){const e=vS.getLogger(t);return e.setDefaultLevel(en.getLevel()),e}const vre=vS.getLogger("lk-e2ee"),Ev=7e3,yre=[0,300,2*2*300,3*3*300,4*4*300,Ev,Ev,Ev,Ev,Ev];class bre{constructor(e){this._retryDelays=e!==void 0?[...e]:yre}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function xre(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function K(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{f(r.next(h))}catch(m){o(m)}}function u(h){try{f(r.throw(h))}catch(m){o(m)}}function f(h){h.done?s(h.value):i(h.value).then(a,u)}f((r=r.apply(t,e||[])).next())})}function QA(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof QA=="function"?QA(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(f){s({value:f,done:a})},o)}}var Yb={exports:{}},JA;function wre(){if(JA)return Yb.exports;JA=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(N,O,j){return Function.prototype.apply.call(N,O,j)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:n=function(N){return Object.getOwnPropertyNames(N)};function r(I){console&&console.warn&&console.warn(I)}var i=Number.isNaN||function(N){return N!==N};function s(){s.init.call(this)}Yb.exports=s,Yb.exports.once=_,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(I){if(typeof I!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof I)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(I){if(typeof I!="number"||I<0||i(I))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+I+".");o=I}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(N){if(typeof N!="number"||N<0||i(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this};function u(I){return I._maxListeners===void 0?s.defaultMaxListeners:I._maxListeners}s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(N){for(var O=[],j=1;j<arguments.length;j++)O.push(arguments[j]);var V=N==="error",z=this._events;if(z!==void 0)V=V&&z.error===void 0;else if(!V)return!1;if(V){var W;if(O.length>0&&(W=O[0]),W instanceof Error)throw W;var J=new Error("Unhandled error."+(W?" ("+W.message+")":""));throw J.context=W,J}var Y=z[N];if(Y===void 0)return!1;if(typeof Y=="function")e(Y,this,O);else for(var me=Y.length,ue=k(Y,me),j=0;j<me;++j)e(ue[j],this,O);return!0};function f(I,N,O,j){var V,z,W;if(a(O),z=I._events,z===void 0?(z=I._events=Object.create(null),I._eventsCount=0):(z.newListener!==void 0&&(I.emit("newListener",N,O.listener?O.listener:O),z=I._events),W=z[N]),W===void 0)W=z[N]=O,++I._eventsCount;else if(typeof W=="function"?W=z[N]=j?[O,W]:[W,O]:j?W.unshift(O):W.push(O),V=u(I),V>0&&W.length>V&&!W.warned){W.warned=!0;var J=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(N)+" listeners added. Use emitter.setMaxListeners() to increase limit");J.name="MaxListenersExceededWarning",J.emitter=I,J.type=N,J.count=W.length,r(J)}return I}s.prototype.addListener=function(N,O){return f(this,N,O,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(N,O){return f(this,N,O,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(I,N,O){var j={fired:!1,wrapFn:void 0,target:I,type:N,listener:O},V=h.bind(j);return V.listener=O,j.wrapFn=V,V}s.prototype.once=function(N,O){return a(O),this.on(N,m(this,N,O)),this},s.prototype.prependOnceListener=function(N,O){return a(O),this.prependListener(N,m(this,N,O)),this},s.prototype.removeListener=function(N,O){var j,V,z,W,J;if(a(O),V=this._events,V===void 0)return this;if(j=V[N],j===void 0)return this;if(j===O||j.listener===O)--this._eventsCount===0?this._events=Object.create(null):(delete V[N],V.removeListener&&this.emit("removeListener",N,j.listener||O));else if(typeof j!="function"){for(z=-1,W=j.length-1;W>=0;W--)if(j[W]===O||j[W].listener===O){J=j[W].listener,z=W;break}if(z<0)return this;z===0?j.shift():C(j,z),j.length===1&&(V[N]=j[0]),V.removeListener!==void 0&&this.emit("removeListener",N,J||O)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(N){var O,j,V;if(j=this._events,j===void 0)return this;if(j.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):j[N]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete j[N]),this;if(arguments.length===0){var z=Object.keys(j),W;for(V=0;V<z.length;++V)W=z[V],W!=="removeListener"&&this.removeAllListeners(W);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(O=j[N],typeof O=="function")this.removeListener(N,O);else if(O!==void 0)for(V=O.length-1;V>=0;V--)this.removeListener(N,O[V]);return this};function v(I,N,O){var j=I._events;if(j===void 0)return[];var V=j[N];return V===void 0?[]:typeof V=="function"?O?[V.listener||V]:[V]:O?E(V):k(V,V.length)}s.prototype.listeners=function(N){return v(this,N,!0)},s.prototype.rawListeners=function(N){return v(this,N,!1)},s.listenerCount=function(I,N){return typeof I.listenerCount=="function"?I.listenerCount(N):S.call(I,N)},s.prototype.listenerCount=S;function S(I){var N=this._events;if(N!==void 0){var O=N[I];if(typeof O=="function")return 1;if(O!==void 0)return O.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function k(I,N){for(var O=new Array(N),j=0;j<N;++j)O[j]=I[j];return O}function C(I,N){for(;N+1<I.length;N++)I[N]=I[N+1];I.pop()}function E(I){for(var N=new Array(I.length),O=0;O<N.length;++O)N[O]=I[O].listener||I[O];return N}function _(I,N){return new Promise(function(O,j){function V(W){I.removeListener(N,z),j(W)}function z(){typeof I.removeListener=="function"&&I.removeListener("error",V),O([].slice.call(arguments))}A(I,N,z,{once:!0}),N!=="error"&&M(I,V,{once:!0})})}function M(I,N,O){typeof I.on=="function"&&A(I,"error",N,O)}function A(I,N,O,j){if(typeof I.on=="function")j.once?I.once(N,O):I.on(N,O);else if(typeof I.addEventListener=="function")I.addEventListener(N,function V(z){j.once&&I.removeEventListener(N,V),O(z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof I)}return Yb.exports}var Ol=wre();let n3=!0,r3=!0;function Uv(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function eh(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return i.apply(this,arguments);const u=f=>{const h=n(f);h&&(a.handleEvent?a.handleEvent(h):a(h))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,u),i.apply(this,[o,u])};const s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);const u=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,u])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function Sre(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(n3=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function Cre(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(r3=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function i3(){if(typeof window=="object"){if(n3)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function iP(t,e){r3&&console.warn(t+" is deprecated, please use "+e+" instead.")}function kre(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Uv(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Uv(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Uv(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=Uv(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function XA(t){return Object.prototype.toString.call(t)==="[object Object]"}function s3(t){return XA(t)?Object.keys(t).reduce(function(e,n){const r=XA(t[n]),i=r?s3(t[n]):t[n],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,{[n]:i})},{}):t}function p1(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?p1(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{p1(t,t.get(i),n)})}))}function ZA(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const s=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{t.forEach(a=>{a.type===r&&a.trackId===o.id&&p1(t,a,i)})}),i}const eN=i3;function o3(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const u={};return Object.keys(a).forEach(f=>{if(f==="require"||f==="advanced"||f==="mediaSource")return;const h=typeof a[f]=="object"?a[f]:{ideal:a[f]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const m=function(v,S){return v?v+S.charAt(0).toUpperCase()+S.slice(1):S==="deviceId"?"sourceId":S};if(h.ideal!==void 0){u.optional=u.optional||[];let v={};typeof h.ideal=="number"?(v[m("min",f)]=h.ideal,u.optional.push(v),v={},v[m("max",f)]=h.ideal,u.optional.push(v)):(v[m("",f)]=h.ideal,u.optional.push(v))}h.exact!==void 0&&typeof h.exact!="number"?(u.mandatory=u.mandatory||{},u.mandatory[m("",f)]=h.exact):["min","max"].forEach(v=>{h[v]!==void 0&&(u.mandatory=u.mandatory||{},u.mandatory[m(v,f)]=h[v])})}),a.advanced&&(u.optional=(u.optional||[]).concat(a.advanced)),u},i=function(a,u){if(e.version>=61)return u(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const f=function(h,m,v){m in h&&!(v in h)&&(h[v]=h[m],delete h[m])};a=JSON.parse(JSON.stringify(a)),f(a.audio,"autoGainControl","googAutoGainControl"),f(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let f=a.video.facingMode;f=f&&(typeof f=="object"?f:{ideal:f});const h=e.version<66;if(f&&(f.exact==="user"||f.exact==="environment"||f.ideal==="user"||f.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete a.video.facingMode;let m;if(f.exact==="environment"||f.ideal==="environment"?m=["back","rear"]:(f.exact==="user"||f.ideal==="user")&&(m=["front"]),m)return n.mediaDevices.enumerateDevices().then(v=>{v=v.filter(k=>k.kind==="videoinput");let S=v.find(k=>m.some(C=>k.label.toLowerCase().includes(C)));return!S&&v.length&&m.includes("back")&&(S=v[v.length-1]),S&&(a.video.deviceId=f.exact?{exact:S.deviceId}:{ideal:S.deviceId}),a.video=r(a.video),eN("chrome: "+JSON.stringify(a)),u(a)})}a.video=r(a.video)}return eN("chrome: "+JSON.stringify(a)),u(a)},s=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,u,f){i(a,h=>{n.webkitGetUserMedia(h,u,m=>{f&&f(s(m))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(u){return i(u,f=>a(f).then(h=>{if(f.audio&&!h.getAudioTracks().length||f.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(s(h))))}}}function a3(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function l3(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else eh(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function c3(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,u){let f=i.apply(this,arguments);return f||(f=e(this,a),this._senders.push(f)),f};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const u=this._senders.indexOf(a);u!==-1&&this._senders.splice(u,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(u=>u.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function u3(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>ZA(o,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),eh(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>ZA(s,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function d3(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const u=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(u)===-1&&this._shimmedLocalStreams[a.id].push(u):this._shimmedLocalStreams[a.id]=[a,u],u};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(f=>{if(this.getSenders().find(m=>m.track===f))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const u=this.getSenders().filter(f=>a.indexOf(f)===-1);this._shimmedLocalStreams[o.id]=[o].concat(u)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const u=this._shimmedLocalStreams[a].indexOf(o);u!==-1&&this._shimmedLocalStreams[a].splice(u,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function f3(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return d3(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const h=n.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(m=>this._reverseStreams[m.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(m=>{if(this.getSenders().find(S=>S.track===m))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const m=new t.MediaStream(h.getTracks());this._streams[h.id]=m,this._reverseStreams[m.id]=h,h=m}r.apply(this,[h])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},t.RTCPeerConnection.prototype.addTrack=function(h,m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const v=[].slice.call(arguments,1);if(v.length!==1||!v[0].getTracks().find(C=>C===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(C=>C.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const k=this._streams[m.id];if(k)k.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const C=new t.MediaStream([h]);this._streams[m.id]=C,this._reverseStreams[C.id]=m,this.addStream(C)}return this.getSenders().find(C=>C.track===h)};function s(f,h){let m=h.sdp;return Object.keys(f._reverseStreams||[]).forEach(v=>{const S=f._reverseStreams[v],k=f._streams[S.id];m=m.replace(new RegExp(k.id,"g"),S.id)}),new RTCSessionDescription({type:h.type,sdp:m})}function o(f,h){let m=h.sdp;return Object.keys(f._reverseStreams||[]).forEach(v=>{const S=f._reverseStreams[v],k=f._streams[S.id];m=m.replace(new RegExp(S.id,"g"),k.id)}),new RTCSessionDescription({type:h.type,sdp:m})}["createOffer","createAnswer"].forEach(function(f){const h=t.RTCPeerConnection.prototype[f],m={[f](){const v=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[k=>{const C=s(this,k);v[0].apply(null,[C])},k=>{v[1]&&v[1].apply(null,k)},arguments[2]]):h.apply(this,arguments).then(k=>s(this,k))}};t.RTCPeerConnection.prototype[f]=m[f]});const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const u=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const f=u.get.apply(this);return f.type===""?f:s(this,f)}}),t.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let v;Object.keys(this._streams).forEach(S=>{this._streams[S].getTracks().find(C=>h.track===C)&&(v=this._streams[S])}),v&&(v.getTracks().length===1?this.removeStream(this._reverseStreams[v.id]):v.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function m1(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function h3(t,e){eh(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var tN=Object.freeze({__proto__:null,fixNegotiationNeeded:h3,shimAddTrackRemoveTrack:f3,shimAddTrackRemoveTrackWithNative:d3,shimGetSendersWithDtmf:c3,shimGetUserMedia:o3,shimMediaStream:a3,shimOnTrack:l3,shimPeerConnection:m1,shimSenderReceiverGetStats:u3});function p3(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){iP("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(o,a,u){a in o&&!(u in o)&&(o[u]=o[a],delete o[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function Tre(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function m3(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function g1(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=t.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=o[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return r.apply(this,[s||null]).then(u=>{if(e.version<53&&!o)try{u.forEach(f=>{f.type=n[f.type]||f.type})}catch(f){if(f.name!=="TypeError")throw f;u.forEach((h,m)=>{u.set(m,Object.assign({},h,{type:n[h.type]||h.type}))})}return u}).then(o,a)}}function g3(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function v3(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),eh(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function y3(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){iP("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function b3(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function x3(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function w3(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function S3(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function C3(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var nN=Object.freeze({__proto__:null,shimAddTransceiver:x3,shimCreateAnswer:C3,shimCreateOffer:S3,shimGetDisplayMedia:Tre,shimGetParameters:w3,shimGetUserMedia:p3,shimOnTrack:m3,shimPeerConnection:g1,shimRTCDataChannel:b3,shimReceiverGetStats:v3,shimRemoveStream:y3,shimSenderGetStats:g3});function k3(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return s&&s.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function T3(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function E3(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(f,h){const m=arguments.length>=2?arguments[2]:arguments[0],v=n.apply(this,[m]);return h?(v.then(f,h),Promise.resolve()):v},e.createAnswer=function(f,h){const m=arguments.length>=2?arguments[2]:arguments[0],v=r.apply(this,[m]);return h?(v.then(f,h),Promise.resolve()):v};let a=function(u,f,h){const m=i.apply(this,[u]);return h?(m.then(f,h),Promise.resolve()):m};e.setLocalDescription=a,a=function(u,f,h){const m=s.apply(this,[u]);return h?(m.then(f,h),Promise.resolve()):m},e.setRemoteDescription=a,a=function(u,f,h){const m=o.apply(this,[u]);return h?(m.then(f,h),Promise.resolve()):m},e.addIceCandidate=a}function _3(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(P3(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}).bind(e))}function P3(t){return t&&t.video!==void 0?Object.assign({},t,{video:s3(t.video)}):t}function R3(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(iP("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function I3(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function M3(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function A3(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var rN=Object.freeze({__proto__:null,shimAudioContext:A3,shimCallbacksAPI:E3,shimConstraints:P3,shimCreateOfferLegacy:M3,shimGetUserMedia:_3,shimLocalStreamsAPI:k3,shimRTCIceServerUrls:R3,shimRemoteStreamsAPI:T3,shimTrackEventTransceiver:I3}),Pk={exports:{}},iN;function Ere(){return iN||(iN=1,function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?s.push(o+"="+n.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],s=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(n)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const u=s[a],f=e.matchPrefix(n,"a=rtpmap:"+u+" ")[0];if(f){const h=e.parseRtpMap(f),m=e.matchPrefix(n,"a=fmtp:"+u+" ");switch(h.parameters=m.length?e.parseFmtp(m[0]):{},h.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+u+" ").map(e.parseRtcpFb),r.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(h.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const o=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{o.forEach(u=>{a.rtcpFeedback.find(h=>h.type===u.type&&h.parameter===u.parameter)||a.rtcpFeedback.push(u)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=e.writeRtpMap(o),i+=e.writeFmtp(o),i+=e.writeRtcpFb(o)});let s=0;return r.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=e.writeExtmap(o)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(v=>e.parseSsrcMedia(v)).filter(v=>v.attribute==="cname"),u=a.length>0&&a[0].ssrc;let f;const h=e.matchPrefix(n,"a=ssrc-group:FID").map(v=>v.substring(17).split(" ").map(k=>parseInt(k,10)));h.length>0&&h[0].length>1&&h[0][0]===u&&(f=h[0][1]),i.codecs.forEach(v=>{if(v.name.toUpperCase()==="RTX"&&v.parameters.apt){let S={ssrc:u,codecPayloadType:parseInt(v.parameters.apt,10)};u&&f&&(S.rtx={ssrc:f}),r.push(S),s&&(S=JSON.parse(JSON.stringify(S)),S.fec={ssrc:u,mechanism:o?"red+ulpfec":"red"},r.push(S))}}),r.length===0&&u&&r.push({ssrc:u});let m=e.matchPrefix(n,"b=");return m.length&&(m[0].indexOf("b=TIAS:")===0?m=parseInt(m[0].substring(7),10):m[0].indexOf("b=AS:")===0?m=parseInt(m[0].substring(5),10)*1e3*.95-50*40*8:m=void 0,r.forEach(v=>{v.maxBitrate=m})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const o=e.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=e.matchPrefix(n,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const o=e.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const a=e.matchPrefix(n,"a=sctpmap:");if(a.length>0){const u=a[0].substring(10).split(" ");return{port:parseInt(u[0],10),protocol:u[1],maxMessageSize:s}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let s;const o=r!==void 0?r:2;return n?s=n:s=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e}(Pk)),Pk.exports}var N3=Ere(),tm=pre(N3),_re=Lte({__proto__:null,default:tm},[N3]);function Cx(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),s=tm.parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,eh(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function v1(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||eh(t,"icecandidate",e=>{if(e.candidate){const n=tm.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function kx(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const u=tm.splitSections(a.sdp);return u.shift(),u.some(f=>{const h=tm.parseMLine(f);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},r=function(a){const u=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(u===null||u.length<2)return-1;const f=parseInt(u[1],10);return f!==f?-1:f},i=function(a){let u=65536;return e.browser==="firefox"&&(e.version<57?a===-1?u=16384:u=2147483637:e.version<60?u=e.version===57?65535:65536:u=2147483637),u},s=function(a,u){let f=65536;e.browser==="firefox"&&e.version===57&&(f=65535);const h=tm.matchPrefix(a.sdp,"a=max-message-size:");return h.length>0?f=parseInt(h[0].substring(19),10):e.browser==="firefox"&&u!==-1&&(f=2147483637),f},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:u}=this.getConfiguration();u==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const u=r(arguments[0]),f=i(u),h=s(arguments[0],u);let m;f===0&&h===0?m=Number.POSITIVE_INFINITY:f===0||h===0?m=Math.max(f,h):m=Math.min(f,h);const v={};Object.defineProperty(v,"maxMessageSize",{get(){return m}}),this._sctp=v}return o.apply(this,arguments)}}function Tx(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const a=arguments[0],u=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&u>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},eh(t,"datachannel",r=>(e(r.channel,r.target),r))}function y1(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function b1(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function Ex(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function _x(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}var Pre=Object.freeze({__proto__:null,removeExtmapAllowMixed:b1,shimAddIceCandidateNullOrEmpty:Ex,shimConnectionState:y1,shimMaxMessageSize:kx,shimParameterlessSetLocalDescription:_x,shimRTCIceCandidate:Cx,shimRTCIceCandidateRelayProtocol:v1,shimSendThrowTypeError:Tx});function Rre(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=i3,r=kre(t),i={browserDetails:r,commonShim:Pre,extractVersion:Uv,disableLog:Sre,disableWarnings:Cre,sdp:_re};switch(r.browser){case"chrome":if(!tN||!m1||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=tN,Ex(t,r),_x(t),o3(t,r),a3(t),m1(t,r),l3(t),f3(t,r),c3(t),u3(t),h3(t,r),Cx(t),v1(t),y1(t),kx(t,r),Tx(t),b1(t,r);break;case"firefox":if(!nN||!g1||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=nN,Ex(t,r),_x(t),p3(t,r),g1(t,r),m3(t),y3(t),g3(t),v3(t),b3(t),x3(t),w3(t),S3(t),C3(t),Cx(t),y1(t),kx(t,r),Tx(t);break;case"safari":if(!rN||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=rN,Ex(t,r),_x(t),R3(t),M3(t),E3(t),k3(t),T3(t),I3(t),_3(t),A3(t),Cx(t),v1(t),kx(t,r),Tx(t),b1(t,r);break;default:n("Unsupported browser!");break}return i}Rre({window:typeof window>"u"?void 0:window});const Ire=10,_v="lk_e2ee",Mre="LKFrameEncryptionKey",Are={sharedKey:!1,ratchetSalt:Mre,ratchetWindowSize:8,failureTolerance:Ire,keyringSize:16};var Gu;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(Gu||(Gu={}));var sN;(function(t){t.KeyRatcheted="keyRatcheted"})(sN||(sN={}));var Hu;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(Hu||(Hu={}));var oN;(function(t){t.Error="cryptorError"})(oN||(oN={}));function Nre(){return Ore()||x1()}function x1(){return typeof window.RTCRtpScriptTransform<"u"}function Ore(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}function Dre(t){var e,n,r,i,s;if(((e=t.value)===null||e===void 0?void 0:e.case)!=="sipDtmf"&&((n=t.value)===null||n===void 0?void 0:n.case)!=="metrics"&&((r=t.value)===null||r===void 0?void 0:r.case)!=="speaker"&&((i=t.value)===null||i===void 0?void 0:i.case)!=="transcription"&&((s=t.value)===null||s===void 0?void 0:s.case)!=="encryptedPacket")return new NU({value:t.value})}class Whe extends Ol.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r,i)=>{en.debug("key ratcheted event received",{ratchetResult:n,participantId:r,keyIndex:i})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},Are),e),this.on(Gu.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,r){const i={key:e,participantIdentity:n,keyIndex:r};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(Gu.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(Gu.RatchetRequest,e,n)}}class Dc extends Error{constructor(e,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=e}}var un;(function(t){t[t.NotAllowed=0]="NotAllowed",t[t.ServerUnreachable=1]="ServerUnreachable",t[t.InternalError=2]="InternalError",t[t.Cancelled=3]="Cancelled",t[t.LeaveRequest=4]="LeaveRequest",t[t.Timeout=5]="Timeout"})(un||(un={}));class Rn extends Dc{constructor(e,n,r,i){super(1,e),this.name="ConnectionError",this.status=r,this.reason=n,this.context=i,this.reasonName=un[n]}}class sP extends Dc{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class Ec extends Dc{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class Lre extends Dc{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class ni extends Dc{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class w1 extends Dc{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class aN extends Dc{constructor(e,n){super(15,e),this.name="PublishTrackError",this.status=n}}class lN extends Dc{constructor(e,n){super(15,e),this.reason=n,this.reasonName=typeof n=="string"?n:rP[n]}}var ss;(function(t){t[t.AlreadyOpened=0]="AlreadyOpened",t[t.AbnormalEnd=1]="AbnormalEnd",t[t.DecodeFailed=2]="DecodeFailed",t[t.LengthExceeded=3]="LengthExceeded",t[t.Incomplete=4]="Incomplete",t[t.HandlerAlreadyRegistered=7]="HandlerAlreadyRegistered",t[t.EncryptionTypeMismatch=8]="EncryptionTypeMismatch"})(ss||(ss={}));class Bo extends Dc{constructor(e,n){super(16,e),this.name="DataStreamError",this.reason=n,this.reasonName=ss[n]}}var cw;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(cw||(cw={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(cw||(cw={}));var cN;(function(t){t[t.InvalidKey=0]="InvalidKey",t[t.MissingKey=1]="MissingKey",t[t.InternalError=2]="InternalError"})(cN||(cN={}));var Ae;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.Moved="moved",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.ParticipantAttributesChanged="participantAttributesChanged",t.ParticipantActive="participantActive",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged",t.ChatMessage="chatMessage",t.LocalTrackSubscribed="localTrackSubscribed",t.MetricsReceived="metricsReceived"})(Ae||(Ae={}));var Ve;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackCpuConstrained="localTrackCpuConstrained",t.LocalSenderCreated="localSenderCreated",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.TrackCpuConstrained="trackCpuConstrained",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded",t.AttributesChanged="attributesChanged",t.LocalTrackSubscribed="localTrackSubscribed",t.ChatMessage="chatMessage",t.Active="active"})(Ve||(Ve={}));var Je;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackSubscribed="localTrackSubscribed",t.Offline="offline",t.SignalRequestResponse="signalRequestResponse",t.SignalConnected="signalConnected",t.RoomMoved="roomMoved"})(Je||(Je={}));var Ye;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.CpuConstrained="cpuConstrained",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed",t.TrackProcessorUpdate="trackProcessorUpdate",t.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",t.TranscriptionReceived="transcriptionReceived",t.TimeSyncUpdate="timeSyncUpdate",t.PreConnectBufferFlushed="preConnectBufferFlushed"})(Ye||(Ye={}));function jre(t){return typeof t>"u"?t:typeof structuredClone=="function"?typeof t=="object"&&t!==null?structuredClone(Object.assign({},t)):structuredClone(t):JSON.parse(JSON.stringify(t))}const Fre=/version\/(\d+(\.?_?\d+)+)/i;let Rk;function $s(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(Rk===void 0||e){const r=Ure.find(i=>{let{test:s}=i;return s.test(n)});Rk=r==null?void 0:r.describe(n)}return Rk}const Ure=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:Px(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:Ik(t)}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:Px(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0,osVersion:Ik(t)}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:Px(Fre,t),os:t.includes("mobile/")?"iOS":"macOS",osVersion:Ik(t)}}}];function Px(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=e.match(t);return r&&r.length>=n&&r[n]||""}function Ik(t){return t.includes("mac os")?Px(/\(.+?(\d+_\d+(:?_\d+)?)/,t,1).replace(/_/g,"."):void 0}var Vre="2.15.11";const Bre=Vre,zre=16;class Di{}Di.setTimeout=function(){return setTimeout(...arguments)};Di.setInterval=function(){return setInterval(...arguments)};Di.clearTimeout=function(){return clearTimeout(...arguments)};Di.clearInterval=function(){return clearInterval(...arguments)};const $re=5e3,Pv=[];var po;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"})(po||(po={}));class Ee extends Ol.EventEmitter{get streamState(){return this._streamState}setStreamState(e){this._streamState=e}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this._streamState=Ee.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=en,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),$re):this.handleAppVisibilityChanged()},this.log=Nc((i=r.loggerName)!==null&&i!==void 0?i:Ra.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=Ee.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),sn(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===Ee.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===Ee.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(Pv.forEach(s=>{s.parentElement===null&&!e&&(e=s)}),e&&Pv.splice(Pv.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),Hp(this.mediaStreamTrack,e);const r=e.srcObject.getTracks(),i=r.some(s=>s.kind==="audio");return e.play().then(()=>{this.emit(i?Ye.AudioPlaybackStarted:Ye.VideoPlaybackStarted)}).catch(s=>{s.name==="NotAllowedError"?this.emit(i?Ye.AudioPlaybackFailed:Ye.VideoPlaybackFailed,s):s.name==="AbortError"?en.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):en.warn("could not playback ".concat(i?"audio":"video"),s),i&&e&&r.some(o=>o.kind==="video")&&s.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(Ye.ElementAttached,e),e}detach(e){try{if(e){nm(this.mediaStreamTrack,e);const r=this.attachedElements.indexOf(e);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(e),this.emit(Ye.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(r=>{nm(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(Ye.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=Nc(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),Pv.forEach(r=>{r.parentElement||(n=!1)}),n&&Pv.push(e)}}handleAppVisibilityChanged(){return K(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===Ee.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){Us()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){Us()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function Hp(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let r;t.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(t)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(t)),(!Gf()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(Gf()||Kf())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function nm(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(f){f.Audio="audio",f.Video="video",f.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(f){f.Camera="camera",f.Microphone="microphone",f.ScreenShare="screen_share",f.ScreenShareAudio="screen_share_audio",f.Unknown="unknown"})(n=t.Source||(t.Source={}));let r;(function(f){f.Active="active",f.Paused="paused",f.Unknown="unknown"})(r=t.StreamState||(t.StreamState={}));function i(f){switch(f){case e.Audio:return Ca.AUDIO;case e.Video:return Ca.VIDEO;default:return Ca.DATA}}t.kindToProto=i;function s(f){switch(f){case Ca.AUDIO:return e.Audio;case Ca.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=s;function o(f){switch(f){case n.Camera:return Kr.CAMERA;case n.Microphone:return Kr.MICROPHONE;case n.ScreenShare:return Kr.SCREEN_SHARE;case n.ScreenShareAudio:return Kr.SCREEN_SHARE_AUDIO;default:return Kr.UNKNOWN}}t.sourceToProto=o;function a(f){switch(f){case Kr.CAMERA:return n.Camera;case Kr.MICROPHONE:return n.Microphone;case Kr.SCREEN_SHARE:return n.ScreenShare;case Kr.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=a;function u(f){switch(f){case d1.ACTIVE:return r.Active;case d1.PAUSED:return r.Paused;default:return r.Unknown}}t.streamStateFromProto=u})(Ee||(Ee={}));class Wn{constructor(e,n,r,i,s){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(n!==void 0&&r!==void 0)this.width=e,this.height=n,this.aspectRatio=e/n,this.encoding={maxBitrate:r,maxFramerate:i,priority:s};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const Wre=["vp8","h264"],Hre=["vp8","h264","vp9","av1","h265"];function qre(t){return!!Wre.find(e=>e===t)}const Kre=qre;var uN;(function(t){t[t.PREFER_REGRESSION=0]="PREFER_REGRESSION",t[t.SIMULCAST=1]="SIMULCAST",t[t.REGRESSION=2]="REGRESSION"})(uN||(uN={}));var uw;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:24e3},t.music={maxBitrate:48e3},t.musicStereo={maxBitrate:64e3},t.musicHighQuality={maxBitrate:96e3},t.musicHighQualityStereo={maxBitrate:128e3}})(uw||(uw={}));const Im={h90:new Wn(160,90,9e4,20),h180:new Wn(320,180,16e4,20),h216:new Wn(384,216,18e4,20),h360:new Wn(640,360,45e4,20),h540:new Wn(960,540,8e5,25),h720:new Wn(1280,720,17e5,30),h1080:new Wn(1920,1080,3e6,30),h1440:new Wn(2560,1440,5e6,30),h2160:new Wn(3840,2160,8e6,30)},S1={h120:new Wn(160,120,7e4,20),h180:new Wn(240,180,125e3,20),h240:new Wn(320,240,14e4,20),h360:new Wn(480,360,33e4,20),h480:new Wn(640,480,5e5,20),h540:new Wn(720,540,6e5,25),h720:new Wn(960,720,13e5,30),h1080:new Wn(1440,1080,23e5,30),h1440:new Wn(1920,1440,38e5,30)},oP={h360fps3:new Wn(640,360,2e5,3,"medium"),h360fps15:new Wn(640,360,4e5,15,"medium"),h720fps5:new Wn(1280,720,8e5,5,"medium"),h720fps15:new Wn(1280,720,15e5,15,"medium"),h720fps30:new Wn(1280,720,2e6,30,"medium"),h1080fps15:new Wn(1920,1080,25e5,15,"medium"),h1080fps30:new Wn(1920,1080,5e6,30,"medium"),original:new Wn(0,0,7e6,30,"medium")},Gre="|",dN="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function Yre(t){const e=t.split(Gre);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function ds(t){return K(this,void 0,void 0,function*(){return new Promise(e=>Di.setTimeout(e,t))})}function C1(){return"addTransceiver"in RTCPeerConnection.prototype}function k1(){return"addTrack"in RTCPeerConnection.prototype}function Qre(){if(!("getCapabilities"in RTCRtpSender)||Gf()||Kf())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType.toLowerCase()==="video/av1"){e=!0;break}}return e}function Jre(){if(!("getCapabilities"in RTCRtpSender)||Kf())return!1;if(Gf()){const n=$s();if(n!=null&&n.version&&Pl(n.version,"16")<0||(n==null?void 0:n.os)==="iOS"&&(n!=null&&n.osVersion)&&Pl(n.osVersion,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType.toLowerCase()==="video/vp9"){e=!0;break}}return e}function ml(t){return t==="av1"||t==="vp9"}function T1(t){return!document||xy()?!1:(t||(t=document.createElement("audio")),"setSinkId"in t)}function Xre(){return typeof RTCPeerConnection>"u"?!1:C1()||k1()}function Kf(){var t;return((t=$s())===null||t===void 0?void 0:t.name)==="Firefox"}function Gf(){var t;return((t=$s())===null||t===void 0?void 0:t.name)==="Safari"}function xy(){const t=$s();return(t==null?void 0:t.name)==="Safari"||(t==null?void 0:t.os)==="iOS"}function Zre(){const t=$s();return(t==null?void 0:t.name)==="Safari"&&t.version.startsWith("17.")||(t==null?void 0:t.os)==="iOS"&&!!(t!=null&&t.osVersion)&&Pl(t.osVersion,"17")>=0}function eie(t){return t||(t=$s()),(t==null?void 0:t.name)==="Safari"&&Pl(t.version,"18.3")>0||(t==null?void 0:t.os)==="iOS"&&!!(t!=null&&t.osVersion)&&Pl(t.osVersion,"18.3")>0}function O3(){var t,e;return Us()?(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function tie(){const t=$s(),e="17.2";if(t)return t.name!=="Safari"&&t.os!=="iOS"||t.os==="iOS"&&t.osVersion&&Pl(t.osVersion,e)>=0?!0:t.name==="Safari"&&Pl(t.version,e)>=0}function Us(){return typeof document<"u"}function _l(){return navigator.product=="ReactNative"}function E1(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function D3(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function L3(){if(!_l())return;let t=D3();if(t)return t.platform}function fN(){if(Us())return window.devicePixelRatio;if(_l()){let t=D3();if(t)return t.devicePixelRatio}return 1}function Pl(t,e){const n=t.split("."),r=e.split("."),i=Math.min(n.length,r.length);for(let s=0;s<i;++s){const o=parseInt(n[s],10),a=parseInt(r[s],10);if(o>a)return 1;if(o<a)return-1;if(s===i-1&&o===a)return 0}return t===""&&e!==""?-1:e===""?1:n.length==r.length?0:n.length<r.length?-1:1}function nie(t){for(const e of t)e.target.handleResize(e)}function rie(t){for(const e of t)e.target.handleVisibilityChanged(e)}let Mk=null;const hN=()=>(Mk||(Mk=new ResizeObserver(nie)),Mk);let Ak=null;const pN=()=>(Ak||(Ak=new IntersectionObserver(rie,{root:null,rootMargin:"0px"})),Ak);function iie(){var t;const e=new VU({sdk:BU.JS,protocol:zre,version:Bre});return _l()&&(e.os=(t=L3())!==null&&t!==void 0?t:""),e}function mN(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=t,i.height=e;const s=i.getContext("2d");s==null||s.fillRect(0,0,i.width,i.height),r&&s&&(s.beginPath(),s.arc(t/2,e/2,50,0,Math.PI*2,!0),s.closePath(),s.fillStyle="grey",s.fill());const o=i.captureStream(),[a]=o.getTracks();if(!a)throw Error("Could not get empty media stream video track");return a.enabled=n,a}let Rv;function Nk(){if(!Rv){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const r=t.createMediaStreamDestination();if(e.connect(n),n.connect(r),e.start(),[Rv]=r.stream.getAudioTracks(),!Rv)throw Error("Could not get empty media stream audio track");Rv.enabled=!1}return Rv.clone()}class Ko{get isResolved(){return this._isResolved}constructor(e,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((r,i)=>K(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,e&&(yield e(r,i))})).finally(()=>{var r;this._isResolved=!0,(r=this.onFinally)===null||r===void 0||r.call(this)})}}function sie(t){return Hre.includes(t)}function Yu(t){if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))return t[0];if(t.exact!==void 0)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal!==void 0)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function oie(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function _1(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}function aie(t,e){return t.segments.map(n=>{let{id:r,text:i,language:s,startTime:o,endTime:a,final:u}=n;var f;const h=(f=e.get(r))!==null&&f!==void 0?f:Date.now(),m=Date.now();return u?e.delete(r):e.set(r,h),{id:r,text:i,startTime:Number.parseInt(o.toString()),endTime:Number.parseInt(a.toString()),final:u,language:s,firstReceivedTime:h,lastReceivedTime:m}})}function lie(t){const{id:e,timestamp:n,message:r,editTimestamp:i}=t;return{id:e,timestamp:Number.parseInt(n.toString()),editTimestamp:i?Number.parseInt(i.toString()):void 0,message:r}}function gN(t){switch(t.reason){case un.LeaveRequest:return t.context;case un.Cancelled:return Ta.CLIENT_INITIATED;case un.NotAllowed:return Ta.USER_REJECTED;case un.ServerUnreachable:return Ta.JOIN_FAILURE;default:return Ta.UNKNOWN_REASON}}function Rx(t){return t!==void 0?Number(t):void 0}function hf(t){return t!==void 0?BigInt(t):void 0}function rm(t){return!!t&&!(t instanceof MediaStreamTrack)&&t.isLocal}function Cl(t){return!!t&&t.kind==Ee.Kind.Audio}function pd(t){return!!t&&t.kind==Ee.Kind.Video}function Cu(t){return rm(t)&&pd(t)}function gc(t){return rm(t)&&Cl(t)}function P1(t){return!!t&&!t.isLocal}function cie(t){return!!t&&!t.isLocal}function Ok(t){return P1(t)&&pd(t)}function uie(t){return t.isLocal}function die(t,e){const n=[];let r=new TextEncoder().encode(t);for(;r.length>e;){let i=e;for(;i>0;){const s=r[i];if(s!==void 0&&(s&192)!==128)break;i--}n.push(r.slice(0,i)),r=r.slice(i)}return r.length>0&&n.push(r),n}function j3(t,e,n){var r,i,s,o;const{optionsWithoutProcessor:a,audioProcessor:u,videoProcessor:f}=V3(t??{}),h=e==null?void 0:e.processor,m=n==null?void 0:n.processor,v=a??{};return v.audio===!0&&(v.audio={}),v.video===!0&&(v.video={}),v.audio&&(R1(v.audio,e),(r=(s=v.audio).deviceId)!==null&&r!==void 0||(s.deviceId={ideal:"default"}),(u||h)&&(v.audio.processor=u??h)),v.video&&(R1(v.video,n),(i=(o=v.video).deviceId)!==null&&i!==void 0||(o.deviceId={ideal:"default"}),(f||m)&&(v.video.processor=f??m)),v}function R1(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function aP(t){var e,n,r,i;const s={};if(t.video)if(typeof t.video=="object"){const o={},a=o,u=t.video;Object.keys(u).forEach(f=>{switch(f){case"resolution":R1(a,u.resolution);break;default:a[f]=u[f]}}),s.video=o,(e=(r=s.video).deviceId)!==null&&e!==void 0||(r.deviceId={ideal:"default"})}else s.video=t.video?{deviceId:{ideal:"default"}}:!1;else s.video=!1;return t.audio?typeof t.audio=="object"?(s.audio=t.audio,(n=(i=s.audio).deviceId)!==null&&n!==void 0||(i.deviceId={ideal:"default"})):s.audio={deviceId:{ideal:"default"}}:s.audio=!1,s}function F3(t){return K(this,arguments,void 0,function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const r=U3();if(r){const i=r.createAnalyser();i.fftSize=2048;const s=i.frequencyBinCount,o=new Uint8Array(s);r.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(i),yield ds(n),i.getByteTimeDomainData(o);const u=o.some(f=>f!==128&&f!==0);return r.close(),!u}return!1}()})}function U3(){var t;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const n=new e({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((t=window.document)===null||t===void 0)&&t.body)){const r=()=>K(this,void 0,void 0,function*(){var i;try{n.state==="suspended"&&(yield n.resume())}catch(s){console.warn("Error trying to auto-resume audio context",s)}finally{(i=window.document.body)===null||i===void 0||i.removeEventListener("click",r)}});n.addEventListener("statechange",()=>{var i;n.state==="closed"&&((i=window.document.body)===null||i===void 0||i.removeEventListener("click",r))}),window.document.body.addEventListener("click",r)}return n}}function fie(t){return t==="audioinput"?Ee.Source.Microphone:t==="videoinput"?Ee.Source.Camera:Ee.Source.Unknown}function I1(t){return t===Ee.Source.Microphone?"audioinput":t===Ee.Source.Camera?"videoinput":void 0}function hie(t){var e,n;let r=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(r=typeof r=="boolean"?{}:r,Gf()?r=Object.assign(Object.assign({},r),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:r,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio,preferCurrentTab:t.preferCurrentTab}}function ey(t){return t.split("/")[1].toLowerCase()}function pie(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new X_({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function sn(t){return"mediaStreamTrack"in t?{trackID:t.sid,source:t.source,muted:t.isMuted,enabled:t.mediaStreamTrack.enabled,kind:t.kind,streamID:t.mediaStreamID,streamTrackID:t.mediaStreamTrack.id}:{trackID:t.trackSid,enabled:t.isEnabled,muted:t.isMuted,trackInfo:Object.assign({mimeType:t.mimeType,name:t.trackName,encrypted:t.isEncrypted,kind:t.kind,source:t.source},t.track?sn(t.track):{})}}function mie(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function gie(t,e){var n;t===void 0&&(t={}),e===void 0&&(e={});const r=[...Object.keys(e),...Object.keys(t)],i={};for(const s of r)t[s]!==e[s]&&(i[s]=(n=e[s])!==null&&n!==void 0?n:"");return i}function V3(t){const e=Object.assign({},t);let n,r;return typeof e.audio=="object"&&e.audio.processor&&(n=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(r=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:n,videoProcessor:r,optionsWithoutProcessor:jre(e)}}function vie(t){switch(t){case Kr.CAMERA:return Ee.Source.Camera;case Kr.MICROPHONE:return Ee.Source.Microphone;case Kr.SCREEN_SHARE:return Ee.Source.ScreenShare;case Kr.SCREEN_SHARE_AUDIO:return Ee.Source.ScreenShareAudio;default:return Ee.Source.Unknown}}function vN(t,e){return t.width*t.height<e.width*e.height}function yie(t,e){var n;return(n=t.layers)===null||n===void 0?void 0:n.find(r=>r.quality===e)}class bie extends Ol.EventEmitter{constructor(e,n){super(),this.decryptDataRequests=new Map,this.encryptDataRequests=new Map,this.onWorkerMessage=r=>{var i,s;const{kind:o,data:a}=r.data;switch(o){case"error":en.error(a.error.message),this.emit(Hu.EncryptionError,a.error);break;case"initAck":a.enabled&&this.keyProvider.getKeys().forEach(h=>{this.postKey(h)});break;case"enable":if(a.enabled&&this.keyProvider.getKeys().forEach(h=>{this.postKey(h)}),this.encryptionEnabled!==a.enabled&&a.participantIdentity===((i=this.room)===null||i===void 0?void 0:i.localParticipant.identity))this.emit(Hu.ParticipantEncryptionStatusChanged,a.enabled,this.room.localParticipant),this.encryptionEnabled=a.enabled;else if(a.participantIdentity){const h=(s=this.room)===null||s===void 0?void 0:s.getParticipantByIdentity(a.participantIdentity);if(!h)throw TypeError("couldn't set encryption status, participant not found".concat(a.participantIdentity));this.emit(Hu.ParticipantEncryptionStatusChanged,a.enabled,h)}break;case"ratchetKey":this.keyProvider.emit(Gu.KeyRatcheted,a.ratchetResult,a.participantIdentity,a.keyIndex);break;case"decryptDataResponse":const u=this.decryptDataRequests.get(a.uuid);u!=null&&u.resolve&&u.resolve(a);break;case"encryptDataResponse":const f=this.encryptDataRequests.get(a.uuid);f!=null&&f.resolve&&f.resolve(a);break}},this.onWorkerError=r=>{en.error("e2ee worker encountered an error:",{error:r.error}),this.emit(Hu.EncryptionError,r.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1,this.dataChannelEncryptionEnabled=n}get isEnabled(){return this.encryptionEnabled}get isDataChannelEncryptionEnabled(){return this.isEnabled&&this.dataChannelEncryptionEnabled}setup(e){if(!Nre())throw new sP("tried to setup end-to-end encryption on an unsupported browser");if(en.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:vre.getLevel()}};this.worker&&(en.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){en.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?en.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(Je.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(Ae.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==ii.NONE,i.identity)),e.on(Ae.ConnectionStateChanged,r=>{r===kn.Connected&&e.remoteParticipants.forEach(i=>{i.trackPublications.forEach(s=>{this.setParticipantCryptorEnabled(s.trackInfo.encryption!==ii.NONE,i.identity)})})}).on(Ae.TrackUnsubscribed,(r,i,s)=>{var o;const a={kind:"removeTransform",data:{participantIdentity:s.identity,trackId:r.mediaStreamID}};(o=this.worker)===null||o===void 0||o.postMessage(a)}).on(Ae.TrackSubscribed,(r,i,s)=>{this.setupE2EEReceiver(r,s.identity,i.trackInfo)}).on(Ae.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(r=>{this.postKey(r)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(Ve.LocalSenderCreated,(r,i)=>K(this,void 0,void 0,function*(){this.setupE2EESender(i,r)})),e.localParticipant.on(Ve.LocalTrackPublished,r=>{if(!pd(r.track)||!xy())return;const i={kind:"updateCodec",data:{trackId:r.track.mediaStreamID,codec:ey(r.trackInfo.codecs[0].mimeType),participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(i)}),n.on(Gu.SetKey,r=>this.postKey(r)).on(Gu.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}encryptData(e){return K(this,void 0,void 0,function*(){if(!this.worker)throw Error("could not encrypt data, worker is missing");const n=crypto.randomUUID(),r={kind:"encryptDataRequest",data:{uuid:n,payload:e,participantIdentity:this.room.localParticipant.identity}},i=new Ko;return i.onFinally=()=>{this.encryptDataRequests.delete(n)},this.encryptDataRequests.set(n,i),this.worker.postMessage(r),i.promise})}handleEncryptedData(e,n,r,i){if(!this.worker)throw Error("could not handle encrypted data, worker is missing");const s=crypto.randomUUID(),o={kind:"decryptDataRequest",data:{uuid:s,payload:e,iv:n,participantIdentity:r,keyIndex:i}},a=new Ko;return a.onFinally=()=>{this.decryptDataRequests.delete(s)},this.decryptDataRequests.set(s,a),this.worker.postMessage(o),a.promise}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(r)}postKey(e){let{key:n,participantIdentity:r,keyIndex:i}=e;var s;if(!this.worker)throw Error("could not set key, worker is missing");const o={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((s=this.room)===null||s===void 0?void 0:s.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(o)}postEnable(e,n){if(this.worker){const r={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,r){if(e.receiver){if(!(r!=null&&r.mimeType)||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?ey(r.mimeType):void 0)}}setupE2EESender(e,n){if(!rm(e)||!n){n||en.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,r,i){return K(this,void 0,void 0,function*(){if(this.worker){if(x1()){const s={kind:"decode",participantIdentity:r,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,s)}else{if(_v in e&&i){const u={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(u);return}let s=e.writableStream,o=e.readableStream;if(!s||!o){const u=e.createEncodedStreams();e.writableStream=u.writable,s=u.writable,e.readableStream=u.readable,o=u.readable}const a={kind:"decode",data:{readableStream:o,writableStream:s,trackId:n,codec:i,participantIdentity:r,isReuse:_v in e}};this.worker.postMessage(a,[o,s])}e[_v]=!0}})}handleSender(e,n,r){var i;if(!(_v in e||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(x1()){en.info("initialize script transform");const s={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,s)}else{en.info("initialize encoded streams");const s=e.createEncodedStreams(),o={kind:"encode",data:{readableStream:s.readable,writableStream:s.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(o,[s.readable,s.writable])}e[_v]=!0}}}const Dk="default";class Si{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new Si),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return K(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var s;if(((s=Si.userMediaPromiseMap)===null||s===void 0?void 0:s.size)>0){en.debug("awaiting getUserMedia promise");try{n?yield Si.userMediaPromiseMap.get(n):yield Promise.all(Si.userMediaPromiseMap.values())}catch{en.warn("error waiting for media permissons")}}let o=yield navigator.mediaDevices.enumerateDevices();if(i&&!(Gf()&&r.hasDeviceInUse(n))&&(o.filter(u=>u.kind===n).length===0||o.some(u=>{const f=u.label==="",h=n?u.kind===n:!0;return f&&h}))){const u={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},f=yield navigator.mediaDevices.getUserMedia(u);o=yield navigator.mediaDevices.enumerateDevices(),f.getTracks().forEach(h=>{h.stop()})}return r._previousDevices=o,n&&(o=o.filter(a=>a.kind===n)),o}()})}normalizeDeviceId(e,n,r){return K(this,void 0,void 0,function*(){if(n!==Dk)return n;const i=yield this.getDevices(e),s=i.find(a=>a.deviceId===Dk);if(!s){en.warn("could not reliably determine default device");return}const o=i.find(a=>a.deviceId!==Dk&&a.groupId===(r??s.groupId));if(!o){en.warn("could not reliably determine default device");return}return o==null?void 0:o.deviceId})}hasDeviceInUse(e){return e?Si.userMediaPromiseMap.has(e):Si.userMediaPromiseMap.size>0}}Si.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];Si.userMediaPromiseMap=new Map;var ty;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(ty||(ty={}));class xie{constructor(){this.pendingTasks=new Map,this.taskMutex=new zs,this.nextTaskIndex=0}run(e){return K(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:ty.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=ty.RUNNING,yield e()}finally{n.status=ty.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return K(this,void 0,void 0,function*(){return this.run(()=>K(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}class wie{get readyState(){return this.ws.readyState}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r,i;if(!((r=n.signal)===null||r===void 0)&&r.aborted)throw new DOMException("This operation was aborted","AbortError");this.url=e;const s=new WebSocket(e,(i=n.protocols)!==null&&i!==void 0?i:[]);s.binaryType="arraybuffer",this.ws=s;const o=function(){let{closeCode:a,reason:u}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return s.close(a,u)};this.opened=new Promise((a,u)=>{s.onopen=()=>{a({readable:new ReadableStream({start(f){s.onmessage=h=>{let{data:m}=h;return f.enqueue(m)},s.onerror=h=>f.error(h)},cancel:o}),writable:new WritableStream({write(f){s.send(f)},abort(){s.close()},close:o}),protocol:s.protocol,extensions:s.extensions}),s.removeEventListener("error",u)},s.addEventListener("error",u)}),this.closed=new Promise((a,u)=>{const f=()=>K(this,void 0,void 0,function*(){const h=new Promise(v=>{s.readyState!==WebSocket.CLOSED&&s.addEventListener("close",S=>{v(S)},{once:!0})}),m=yield Promise.race([ds(250),h]);m?a(m):u(new Error("Encountered unspecified websocket error without a timely close event"))});s.onclose=h=>{let{code:m,reason:v}=h;a({closeCode:m,reason:v}),s.removeEventListener("error",f)},s.addEventListener("error",f)}),n.signal&&(n.signal.onabort=()=>s.close()),this.close=o}}function Sie(t,e){const n=new URL(oie(t));return e.forEach((r,i)=>{n.searchParams.set(i,r)}),B3(n,"rtc")}function Cie(t){const e=new URL(_1(t));return B3(e,"validate")}function kie(t){return t.endsWith("/")?t:"".concat(t,"/")}function B3(t,e){return t.pathname="".concat(kie(t.pathname)).concat(e),t.toString()}function yN(t){if(typeof t=="string")return GA.fromJson(JSON.parse(t),{ignoreUnknownFields:!0});if(t instanceof ArrayBuffer)return GA.fromBinary(new Uint8Array(t));throw new Error("could not decode websocket message: ".concat(typeof t))}function Tie(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Unknown reason";if(!(t instanceof AbortSignal))return e;const n=t.reason;switch(typeof n){case"string":return n;case"object":return n instanceof Error?n.message:e;default:return"toString"in n?n.toString():e}}const Eie=["syncState","trickle","offer","answer","simulate","leave"];function _ie(t){const e=Eie.indexOf(t.case)>=0;return en.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var fr;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(fr||(fr={}));const Pie=250;class lP{get currentState(){return this.state}get isDisconnected(){return this.state===fr.DISCONNECTING||this.state===fr.DISCONNECTED}get isEstablishingConnection(){return this.state===fr.CONNECTING||this.state===fr.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=fr.DISCONNECTED,this.log=en,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0,this.onMediaSectionsRequirement=void 0},this.log=Nc((r=n.loggerName)!==null&&r!==void 0?r:Ra.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new xie,this.queuedRequests=[],this.closingLock=new zs,this.connectionLock=new zs,this.state=fr.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,r,i){return K(this,void 0,void 0,function*(){return this.state=fr.CONNECTING,this.options=r,yield this.connect(e,n,r,i)})}reconnect(e,n,r,i){return K(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=fr.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(e,n,r,i){return K(this,void 0,void 0,function*(){const s=yield this.connectionLock.lock();this.connectOptions=r;const o=iie(),a=r.singlePeerConnection?Iie(n,o,r):Rie(n,o,r),u=Sie(e,a),f=Cie(u);return new Promise((h,m)=>K(this,void 0,void 0,function*(){var v,S;try{const k=new AbortController,C=i?[k.signal,i]:[k.signal],E=AbortSignal.any(C),_=N=>K(this,void 0,void 0,function*(){const O=N.currentTarget,j=Tie(O,"Abort handler called");this.streamWriter&&!this.isDisconnected?this.sendLeave().then(()=>this.close(j)).catch(V=>{this.log.error(V),this.close()}):this.close(),clearTimeout(M),m(O instanceof AbortSignal?O.reason:O)});E.addEventListener("abort",_);const M=setTimeout(()=>{k.abort(new Rn("room connection has timed out (signal)",un.ServerUnreachable))},r.websocketTimeout),A=(N,O)=>{this.handleSignalConnected(N,M,O)},I=new URL(u);I.searchParams.has("access_token")&&I.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(I),Object.assign({reconnect:r.reconnect,reconnectReason:r.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new wie(u);try{this.ws.closed.then(J=>{this.isEstablishingConnection&&m(new Rn("Websocket got closed during a (re)connection attempt: ".concat(J.reason),un.InternalError)),J.closeCode!==1e3&&this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:J.reason,code:J.closeCode,wasClean:J.closeCode===1e3,state:this.state}))}).catch(J=>{this.isEstablishingConnection&&m(new Rn("Websocket error during a (re)connection attempt: ".concat(J),un.InternalError))});const N=yield this.ws.opened.catch(J=>K(this,void 0,void 0,function*(){if(this.state!==fr.CONNECTED){this.state=fr.DISCONNECTED,clearTimeout(M);const Y=yield this.handleConnectionError(J,f);m(Y);return}this.handleWSError(J),m(J)}));if(clearTimeout(M),!N)return;const O=N.readable.getReader();this.streamWriter=N.writable.getWriter();const j=yield O.read();if(O.releaseLock(),!j.value)throw new Rn("no message received as first message",un.InternalError);const V=yN(j.value),z=this.validateFirstMessage(V,(v=r.reconnect)!==null&&v!==void 0?v:!1);if(!z.isValid){m(z.error);return}((S=V.message)===null||S===void 0?void 0:S.case)==="join"&&(this.pingTimeoutDuration=V.message.value.pingTimeout,this.pingIntervalDuration=V.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})));const W=z.shouldProcessFirstMessage?V:void 0;A(N,W),h(z.response)}catch(N){clearTimeout(M),m(N)}}finally{s()}}))})}startReadingLoop(e,n){return K(this,void 0,void 0,function*(){for(n&&this.handleSignalResponse(n);;){this.signalLatency&&(yield ds(this.signalLatency));const{done:r,value:i}=yield e.read();if(r)break;const s=yN(i);this.handleSignalResponse(s)}})}close(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Close method called on signal client";return function*(){const i=yield e.closingLock.lock();try{if(e.clearPingInterval(),n&&(e.state=fr.DISCONNECTING),e.ws){e.ws.close({closeCode:1e3,reason:r});const s=e.ws.closed;e.ws=void 0,e.streamWriter=void 0,yield Promise.race([s,ds(Pie)])}}catch(s){e.log.debug("websocket error while closing",Object.assign(Object.assign({},e.logContext),{error:s}))}finally{n&&(e.state=fr.DISCONNECTED),i()}}()})}sendOffer(e,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:qp(e,n)})}sendAnswer(e,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:qp(e,n)})}sendIceCandidate(e,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new hS({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new pS({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return K(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const a=s.getNextRequestId();return yield s.sendRequest({case:"updateMetadata",value:new eP({requestId:a,metadata:r,name:i,attributes:o})}),a}()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new GU({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new JU({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:ir.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new e3({timestamp:ir.parse(Date.now()),rtt:ir.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,n){return this.sendRequest({case:"updateAudioTrack",value:new Z_({trackSid:e,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new gS({reason:Ta.CLIENT_INITIATED,action:em.DISCONNECT})})}sendRequest(e){return K(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!i&&!_ie(n)&&r.state===fr.RECONNECTING){r.queuedRequests.push(()=>K(r,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(i||(yield r.requestQueue.flush()),r.signalLatency&&(yield ds(r.signalLatency)),r.isDisconnected){r.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!r.streamWriter){r.log.error("cannot send signal request before connected, type: ".concat(n==null?void 0:n.case),r.logContext);return}const o=new zne({message:n});try{r.useJSON?yield r.streamWriter.write(o.toJsonString()):yield r.streamWriter.write(o.toBinary())}catch(a){r.log.error("error sending signal message",Object.assign(Object.assign({},r.logContext),{error:a}))}}()})}handleSignalResponse(e){var n,r;const i=e.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let s=!1;if(i.case==="answer"){const o=bN(i.value);this.onAnswer&&this.onAnswer(o,i.value.id,i.value.midToTrackId)}else if(i.case==="offer"){const o=bN(i.value);this.onOffer&&this.onOffer(o,i.value.id,i.value.midToTrackId)}else if(i.case==="trickle"){const o=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(o,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),s=!0):i.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(i.value):i.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(i.value.trackSid):i.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(i.value.token),this.onRoomMoved&&this.onRoomMoved(i.value)):i.case==="mediaSectionsRequirement"?this.onMediaSectionsRequirement&&this.onMediaSectionsRequirement(i.value):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));s||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return K(this,void 0,void 0,function*(){if(this.state===fr.DISCONNECTED)return;const n=this.onClose;yield this.close(void 0,e),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=Di.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Di.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=Di.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&Di.clearInterval(this.pingInterval)}handleSignalConnected(e,n,r){this.state=fr.CONNECTED,clearTimeout(n),this.startPingInterval(),this.startReadingLoop(e.readable.getReader(),r)}validateFirstMessage(e,n){var r,i,s,o,a;return((r=e.message)===null||r===void 0?void 0:r.case)==="join"?{isValid:!0,response:e.message.value}:this.state===fr.RECONNECTING&&((i=e.message)===null||i===void 0?void 0:i.case)!=="leave"?((s=e.message)===null||s===void 0?void 0:s.case)==="reconnect"?{isValid:!0,response:e.message.value}:(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),{isValid:!0,response:void 0,shouldProcessFirstMessage:!0}):this.isEstablishingConnection&&((o=e.message)===null||o===void 0?void 0:o.case)==="leave"?{isValid:!1,error:new Rn("Received leave request while trying to (re)connect",un.LeaveRequest,void 0,e.message.value.reason)}:n?{isValid:!1,error:new Rn("Unexpected first message",un.InternalError)}:{isValid:!1,error:new Rn("did not receive join response, got ".concat((a=e.message)===null||a===void 0?void 0:a.case," instead"),un.InternalError)}}handleConnectionError(e,n){return K(this,void 0,void 0,function*(){try{const r=yield fetch(n);if(r.status.toFixed(0).startsWith("4")){const i=yield r.text();return new Rn(i,un.NotAllowed,r.status)}else return e instanceof Rn?e:new Rn("Encountered unknown websocket error during connection: ".concat(e),un.InternalError,r.status)}catch(r){return r instanceof Rn?r:new Rn(r instanceof Error?r.message:"server was not reachable",un.ServerUnreachable)}})}}function bN(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function qp(t,e){return new od({sdp:t.sdp,type:t.type,id:e})}function Rie(t,e,n){var r;const i=new URLSearchParams;return i.set("access_token",t),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",_l()?"reactnative":"js"),i.set("version",e.version),i.set("protocol",e.protocol.toString()),e.deviceModel&&i.set("device_model",e.deviceModel),e.os&&i.set("os",e.os),e.osVersion&&i.set("os_version",e.osVersion),e.browser&&i.set("browser",e.browser),e.browserVersion&&i.set("browser_version",e.browserVersion),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),i}function Iie(t,e,n){const r=new URLSearchParams;r.set("access_token",t);const i=new ure({clientInfo:e,connectionSettings:new t3({autoSubscribe:!!n.autoSubscribe,adaptiveStream:!!n.adaptiveStream}),reconnect:!!n.reconnect,participantSid:n.sid?n.sid:void 0});n.reconnectReason&&(i.reconnectReason=n.reconnectReason);const s=new dre({joinRequest:i.toBinary()});return r.set("join_request",btoa(new TextDecoder("utf-8").decode(s.toBinary()))),r}class xN{constructor(){this.buffer=[],this._totalSize=0}push(e){this.buffer.push(e),this._totalSize+=e.data.byteLength}pop(){const e=this.buffer.shift();return e&&(this._totalSize-=e.data.byteLength),e}getAll(){return this.buffer.slice()}popToSequence(e){for(;this.buffer.length>0&&this.buffer[0].sequence<=e;)this.pop()}alignBufferedAmount(e){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=e)break;this.pop()}}get length(){return this.buffer.length}}class Mie{constructor(e){this._map=new Map,this._lastCleanup=0,this.ttl=e}set(e,n){const r=Date.now();r-this._lastCleanup>this.ttl/2&&this.cleanup();const i=r+this.ttl;return this._map.set(e,{value:n,expiresAt:i}),this}get(e){const n=this._map.get(e);if(n){if(n.expiresAt<Date.now()){this._map.delete(e);return}return n.value}}has(e){const n=this._map.get(e);return n?n.expiresAt<Date.now()?(this._map.delete(e),!1):!0:!1}delete(e){return this._map.delete(e)}clear(){this._map.clear()}cleanup(){const e=Date.now();for(const[n,r]of this._map.entries())r.expiresAt<e&&this._map.delete(n);this._lastCleanup=e}get size(){return this.cleanup(),this._map.size}forEach(e){this.cleanup();for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&e(r.value,n,this.asValueMap())}map(e){this.cleanup();const n=[],r=this.asValueMap();for(const[i,s]of r.entries())n.push(e(s,i,r));return n}asValueMap(){const e=new Map;for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&e.set(n,r.value);return e}}var ma={},Lk={},jk={exports:{}},wN;function cP(){if(wN)return jk.exports;wN=1;var t=jk.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var n=t[e];n.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})}),jk.exports}var SN;function Aie(){return SN||(SN=1,function(t){var e=function(a){return String(Number(a))===a?Number(a):a},n=function(a,u,f,h){if(h&&!f)u[h]=e(a[1]);else for(var m=0;m<f.length;m+=1)a[m+1]!=null&&(u[f[m]]=e(a[m+1]))},r=function(a,u,f){var h=a.name&&a.names;a.push&&!u[a.push]?u[a.push]=[]:h&&!u[a.name]&&(u[a.name]={});var m=a.push?{}:h?u[a.name]:u;n(f.match(a.reg),m,a.names,a.name),a.push&&u[a.push].push(m)},i=cP(),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(a){var u={},f=[],h=u;return a.split(/(\r\n|\r|\n)/).filter(s).forEach(function(m){var v=m[0],S=m.slice(2);v==="m"&&(f.push({rtp:[],fmtp:[]}),h=f[f.length-1]);for(var k=0;k<(i[v]||[]).length;k+=1){var C=i[v][k];if(C.reg.test(S))return r(C,h,S)}}),u.media=f,u};var o=function(a,u){var f=u.split(/=(.+)/,2);return f.length===2?a[f[0]]=e(f[1]):f.length===1&&u.length>1&&(a[f[0]]=void 0),a};t.parseParams=function(a){return a.split(/;\s?/).reduce(o,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(a){return a.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(a){for(var u=[],f=a.split(" ").map(e),h=0;h<f.length;h+=3)u.push({component:f[h],ip:f[h+1],port:f[h+2]});return u},t.parseImageAttributes=function(a){return a.split(" ").map(function(u){return u.substring(1,u.length-1).split(",").reduce(o,{})})},t.parseSimulcastStreamList=function(a){return a.split(";").map(function(u){return u.split(",").map(function(f){var h,m=!1;return f[0]!=="~"?h=e(f):(h=e(f.substring(1,f.length)),m=!0),{scid:h,paused:m}})})}}(Lk)),Lk}var Fk,CN;function Nie(){if(CN)return Fk;CN=1;var t=cP(),e=/%[sdv%]/g,n=function(o){var a=1,u=arguments,f=u.length;return o.replace(e,function(h){if(a>=f)return h;var m=u[a];switch(a+=1,h){case"%%":return"%";case"%s":return String(m);case"%d":return Number(m);case"%v":return""}})},r=function(o,a,u){var f=a.format instanceof Function?a.format(a.push?u:u[a.name]):a.format,h=[o+"="+f];if(a.names)for(var m=0;m<a.names.length;m+=1){var v=a.names[m];a.name?h.push(u[a.name][v]):h.push(u[a.names[m]])}else h.push(u[a.name]);return n.apply(null,h)},i=["v","o","s","i","u","e","p","c","b","t","r","z","a"],s=["i","c","b","a"];return Fk=function(o,a){a=a||{},o.version==null&&(o.version=0),o.name==null&&(o.name=" "),o.media.forEach(function(m){m.payloads==null&&(m.payloads="")});var u=a.outerOrder||i,f=a.innerOrder||s,h=[];return u.forEach(function(m){t[m].forEach(function(v){v.name in o&&o[v.name]!=null?h.push(r(m,v,o)):v.push in o&&o[v.push]!=null&&o[v.push].forEach(function(S){h.push(r(m,v,S))})})}),o.media.forEach(function(m){h.push(r("m",t.m[0],m)),f.forEach(function(v){t[v].forEach(function(S){S.name in m&&m[S.name]!=null?h.push(r(v,S,m)):S.push in m&&m[S.push]!=null&&m[S.push].forEach(function(k){h.push(r(v,S,k))})})})}),h.join(`\r
`)+`\r
`},Fk}var kN;function Oie(){if(kN)return ma;kN=1;var t=Aie(),e=Nie(),n=cP();return ma.grammar=n,ma.write=e,ma.parse=t.parse,ma.parseParams=t.parseParams,ma.parseFmtpConfig=t.parseFmtpConfig,ma.parsePayloads=t.parsePayloads,ma.parseRemoteCandidates=t.parseRemoteCandidates,ma.parseImageAttributes=t.parseImageAttributes,ma.parseSimulcastStreamList=t.parseSimulcastStreamList,ma}var Pu=Oie();function uP(t,e,n){var r,i,s;e===void 0&&(e=50),n===void 0&&(n={});var o=(r=n.isImmediate)!=null&&r,a=(i=n.callback)!=null&&i,u=n.maxWait,f=Date.now(),h=[];function m(){if(u!==void 0){var S=Date.now()-f;if(S+e>=u)return u-S}return e}var v=function(){var S=[].slice.call(arguments),k=this;return new Promise(function(C,E){var _=o&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,f=Date.now(),!o){var A=t.apply(k,S);a&&a(A),h.forEach(function(I){return(0,I.resolve)(A)}),h=[]}},m()),_){var M=t.apply(k,S);return a&&a(M),C(M)}h.push({resolve:C,reject:E})})};return v.cancel=function(S){s!==void 0&&clearTimeout(s),h.forEach(function(k){return(0,k.reject)(S)}),h=[]},v}const Die=.7,Lie=20,im={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class TN extends Ol.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;super(),this.log=en,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=uP(i=>K(this,void 0,void 0,function*(){this.emit(im.NegotiationStarted);try{yield this.createAndSendOffer()}catch(s){if(i)i(s);else throw s}}),Lie),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Nc((r=n.loggerName)!==null&&r!==void 0?r:Ra.PCTransport),this.loggerOptions=n,this.config=e,this._pc=this.createPC(),this.offerLock=new zs}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},e.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},e.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return K(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e,n){return K(this,void 0,void 0,function*(){var r;if(e.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let i;if(e.type==="offer"){let{stereoMids:s,nackMids:o}=jie(e);this.remoteStereoMids=s,this.remoteNackMids=o}else if(e.type==="answer"){const s=Pu.parse((r=e.sdp)!==null&&r!==void 0?r:"");s.media.forEach(o=>{const a=dP(o.mid);o.type==="audio"&&this.trackBitrates.some(u=>{if(!u.transceiver||a!=u.transceiver.mid)return!1;let f=0;if(o.rtp.some(m=>m.codec.toUpperCase()===u.codec.toUpperCase()?(f=m.payload,!0):!1),f===0)return!0;let h=!1;for(const m of o.fmtp)if(m.payload===f){m.config=m.config.split(";").filter(v=>!v.includes("maxaveragebitrate")).join(";"),u.maxbr>0&&(m.config+=";maxaveragebitrate=".concat(u.maxbr*1e3)),h=!0;break}return h||u.maxbr>0&&o.fmtp.push({payload:f,config:"maxaveragebitrate=".concat(u.maxbr*1e3)}),!0})}),i=Pu.write(s)}return yield this.setMungedSDP(e,i,!0),this.pendingCandidates.forEach(s=>{this.pc.addIceCandidate(s)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(im.NegotiationComplete),e.sdp&&Pu.parse(e.sdp).media.forEach(o=>{o.type==="video"&&this.emit(im.RTPVideoPayloadTypes,o.rtp)})),!0})}createAndSendOffer(e){return K(this,void 0,void 0,function*(){var n;const r=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const a=this._pc.remoteDescription;if(e!=null&&e.iceRestart&&a)yield this._pc.setRemoteDescription(a);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const i=this.latestOfferId+1;this.latestOfferId=i;const s=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:s.sdp},this.logContext));const o=Pu.parse((n=s.sdp)!==null&&n!==void 0?n:"");if(o.media.forEach(a=>{_N(a),a.type==="audio"?EN(a,["all"],[]):a.type==="video"&&this.trackBitrates.some(u=>{if(!a.msid||!u.cid||!a.msid.includes(u.cid))return!1;let f=0;if(a.rtp.some(m=>m.codec.toUpperCase()===u.codec.toUpperCase()?(f=m.payload,!0):!1),f===0||(ml(u.codec)&&!Gf()&&this.ensureVideoDDExtensionForSVC(a,o),u.codec!=="av1"))return!0;const h=Math.round(u.maxbr*Die);for(const m of a.fmtp)if(m.payload===f){m.config.includes("x-google-start-bitrate")||(m.config+=";x-google-start-bitrate=".concat(h));break}return!0})}),this.latestOfferId>i){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:i}));return}yield this.setMungedSDP(s,Pu.write(o)),this.onOffer(s,this.latestOfferId)}finally{r()}})}createAndSetAnswer(){return K(this,void 0,void 0,function*(){var e;const n=yield this.pc.createAnswer(),r=Pu.parse((e=n.sdp)!==null&&e!==void 0?e:"");return r.media.forEach(i=>{_N(i),i.type==="audio"&&EN(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,Pu.write(r)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTransceiverOfKind(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new ni("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new ni("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return K(this,void 0,void 0,function*(){var e;if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(a=>{switch(a.type){case"transport":n=a.selectedCandidatePairId;break;case"candidate-pair":n===""&&a.selected&&(n=a.id),r.set(a.id,a);break;case"remote-candidate":i.set(a.id,"".concat(a.address,":").concat(a.port));break}}),n==="")return;const o=(e=r.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(o!==void 0)return i.get(o)})}setMungedSDP(e,n,r){return K(this,void 0,void 0,function*(){if(n){const i=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(s){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:s,sdp:n})),e.sdp=i}}try{r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(i){let s="unknown error";i instanceof Error?s=i.message:typeof i=="string"&&(s=i);const o={error:s,sdp:e.sdp};throw!r&&this.pc.remoteDescription&&(o.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:o})),new w1(s)}})}ensureVideoDDExtensionForSVC(e,n){var r,i;if(!((r=e.ext)===null||r===void 0?void 0:r.some(o=>o.uri===dN))){if(this.ddExtID===0){let o=0;n.media.forEach(a=>{var u;a.type==="video"&&((u=a.ext)===null||u===void 0||u.forEach(f=>{f.value>o&&(o=f.value)}))}),this.ddExtID=o+1}(i=e.ext)===null||i===void 0||i.push({value:this.ddExtID,uri:dN})}}}function EN(t,e,n){const r=dP(t.mid);let i=0;t.rtp.some(s=>s.codec==="opus"?(i=s.payload,!0):!1),i>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(r)&&!t.rtcpFb.some(s=>s.payload===i&&s.type==="nack")&&t.rtcpFb.push({payload:i,type:"nack"}),(e.includes(r)||e.length===1&&e[0]==="all")&&t.fmtp.some(s=>s.payload===i?(s.config.includes("stereo=1")||(s.config+=";stereo=1"),!0):!1))}function jie(t){var e;const n=[],r=[],i=Pu.parse((e=t.sdp)!==null&&e!==void 0?e:"");let s=0;return i.media.forEach(o=>{var a;const u=dP(o.mid);o.type==="audio"&&(o.rtp.some(f=>f.codec==="opus"?(s=f.payload,!0):!1),!((a=o.rtcpFb)===null||a===void 0)&&a.some(f=>f.payload===s&&f.type==="nack")&&r.push(u),o.fmtp.some(f=>f.payload===s?(f.config.includes("sprop-stereo=1")&&n.push(u),!0):!1))}),{stereoMids:n,nackMids:r}}function _N(t){if(t.connection){const e=t.connection.ip.indexOf(":")>=0;(t.connection.version===4&&e||t.connection.version===6&&!e)&&(t.connection.ip="0.0.0.0",t.connection.version=4)}}function dP(t){return typeof t=="number"?t.toFixed(0):t}const M1="vp8",Fie={audioPreset:uw.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:oP.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:M1,backupCodec:!0,preConnectBuffer:!1},z3={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},$3={deviceId:{ideal:"default"},resolution:Im.h720.resolution},Uie={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new bre,disconnectOnPageLeave:!0,webAudioMix:!1,singlePeerConnection:!1},fP={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var Sr;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(Sr||(Sr={}));class Vie{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,r){var i;this.peerConnectionTimeout=fP.peerConnectionTimeout,this.log=en,this.updateState=()=>{var s,o;const a=this.state,u=this.requiredTransports.map(f=>f.getConnectionState());u.every(f=>f==="connected")?this.state=Sr.CONNECTED:u.some(f=>f==="failed")?this.state=Sr.FAILED:u.some(f=>f==="connecting")?this.state=Sr.CONNECTING:u.every(f=>f==="closed")?this.state=Sr.CLOSED:u.some(f=>f==="closed")?this.state=Sr.CLOSING:u.every(f=>f==="new")&&(this.state=Sr.NEW),a!==this.state&&(this.log.debug("pc state change: from ".concat(Sr[a]," to ").concat(Sr[this.state]),this.logContext),(s=this.onStateChange)===null||s===void 0||s.call(this,this.state,this.publisher.getConnectionState(),(o=this.subscriber)===null||o===void 0?void 0:o.getConnectionState()))},this.log=Nc((i=r.loggerName)!==null&&i!==void 0?i:Ra.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=n!=="subscriber-primary",this.isSubscriberConnectionRequired=n==="subscriber-primary",this.publisher=new TN(e,r),n!=="publisher-only"&&(this.subscriber=new TN(e,r),this.subscriber.onConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.subscriber.onIceCandidate=s=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,s,ka.SUBSCRIBER)},this.subscriber.onDataChannel=s=>{var o;(o=this.onDataChannel)===null||o===void 0||o.call(this,s)},this.subscriber.onTrack=s=>{var o;(o=this.onTrack)===null||o===void 0||o.call(this,s)}),this.publisher.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=s=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,s,ka.PUBLISHER)},this.publisher.onTrack=s=>{var o;(o=this.onTrack)===null||o===void 0||o.call(this,s)},this.publisher.onOffer=(s,o)=>{var a;(a=this.onPublisherOffer)===null||a===void 0||a.call(this,s,o)},this.state=Sr.NEW,this.connectionLock=new zs,this.remoteOfferLock=new zs}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e,n){return this.publisher.setRemoteDescription(e,n)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return K(this,void 0,void 0,function*(){var e;if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const n=this.publisher;for(const r of n.getSenders())try{n.canRemoveTrack()&&n.removeTrack(r)}catch(i){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:i}))}}yield Promise.all([this.publisher.close(),(e=this.subscriber)===null||e===void 0?void 0:e.close()]),this.updateState()})}triggerIceRestart(){return K(this,void 0,void 0,function*(){this.subscriber&&(this.subscriber.restartingIce=!0),this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return K(this,void 0,void 0,function*(){var r;n===ka.PUBLISHER?yield this.publisher.addIceCandidate(e):yield(r=this.subscriber)===null||r===void 0?void 0:r.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e,n){return K(this,void 0,void 0,function*(){var r,i,s;this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:(r=this.subscriber)===null||r===void 0?void 0:r.getSignallingState().toString()}));const o=yield this.remoteOfferLock.lock();try{return(yield(i=this.subscriber)===null||i===void 0?void 0:i.setRemoteDescription(e,n))?yield(s=this.subscriber)===null||s===void 0?void 0:s.createAndSetAnswer():void 0}finally{o()}})}updateConfiguration(e,n){var r;this.publisher.setConfiguration(e),(r=this.subscriber)===null||r===void 0||r.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){return K(this,void 0,void 0,function*(){var r;const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(s=>this.ensureTransportConnected(s,e,n)))}finally{i()}})}negotiate(e){return K(this,void 0,void 0,function*(){return new Promise((n,r)=>K(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),s=()=>{clearTimeout(i),r("negotiation aborted")};e.signal.addEventListener("abort",s),this.publisher.once(im.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(im.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(o=>{clearTimeout(i),r(o)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTransceiverOfKind(e,n){return this.publisher.addTransceiverOfKind(e,n)}getMidForReceiver(e){const r=(this.subscriber?this.subscriber.getTransceivers():this.publisher.getTransceivers()).find(i=>i.receiver===e);return r==null?void 0:r.mid}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===ka.PUBLISHER?this.publisher.getConnectedAddress():e===ka.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&this.subscriber&&e.push(this.subscriber),e}ensureTransportConnected(e,n){return K(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(r.getConnectionState()!=="connected")return new Promise((u,f)=>K(s,void 0,void 0,function*(){const h=()=>{this.log.warn("abort transport connection",this.logContext),Di.clearTimeout(m),f(new Rn("room connection has been cancelled",un.Cancelled))};i!=null&&i.signal.aborted&&h(),i==null||i.signal.addEventListener("abort",h);const m=Di.setTimeout(()=>{i==null||i.signal.removeEventListener("abort",h),f(new Rn("could not establish pc connection",un.InternalError))},o);for(;this.state!==Sr.CONNECTED;)if(yield ds(50),i!=null&&i.signal.aborted){f(new Rn("room connection has been cancelled",un.Cancelled));return}Di.clearTimeout(m),i==null||i.signal.removeEventListener("abort",h),u()}))}()})}}class Er extends Error{constructor(e,n,r){super(n),this.code=e,this.message=PN(n,Er.MAX_MESSAGE_BYTES),this.data=r?PN(r,Er.MAX_DATA_BYTES):void 0}static fromProto(e){return new Er(e.code,e.message,e.data)}toProto(){return new LU({code:this.code,message:this.message,data:this.data})}static builtIn(e,n){return new Er(Er.ErrorCode[e],Er.ErrorMessage[e],n)}}Er.MAX_MESSAGE_BYTES=256;Er.MAX_DATA_BYTES=15360;Er.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};Er.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const W3=15360;function hP(t){return new TextEncoder().encode(t).length}function PN(t,e){if(hP(t)<=e)return t;let n=0,r=t.length;const i=new TextEncoder;for(;n<r;){const s=Math.floor((n+r+1)/2);i.encode(t.slice(0,s)).length<=e?n=s:r=s-1}return t.slice(0,n)}const pP=2e3;function yS(t,e){if(!e)return 0;let n,r;return"bytesReceived"in t?(n=t.bytesReceived,r=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,r=e.bytesSent),n===void 0||r===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-r)*8*1e3/(t.timestamp-e.timestamp)}const mP=typeof MediaRecorder<"u";class Bie{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const zie=mP?MediaRecorder:Bie;class $ie extends zie{constructor(e,n){if(!mP)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([e.mediaStreamTrack]),n);let r,i;const s=()=>i===void 0,o=()=>{this.removeEventListener("dataavailable",r),this.removeEventListener("stop",o),this.removeEventListener("error",a),i==null||i.close(),i=void 0},a=u=>{i==null||i.error(u),this.removeEventListener("dataavailable",r),this.removeEventListener("stop",o),this.removeEventListener("error",a),i=void 0};this.byteStream=new ReadableStream({start:u=>{i=u,r=f=>K(this,void 0,void 0,function*(){let h;if(f.data.arrayBuffer){const m=yield f.data.arrayBuffer();h=new Uint8Array(m)}else if(f.data.byteArray)h=f.data.byteArray;else throw new Error("no data available!");s()||u.enqueue(h)}),this.addEventListener("dataavailable",r)},cancel:()=>{o()}}),this.addEventListener("stop",o),this.addEventListener("error",a)}}function Wie(){return mP}const Hie=1e3,qie=1e4;class H3 extends Ee{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=arguments.length>4?arguments[4]:void 0;super(e,n,s),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=uP(()=>K(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>K(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(Ye.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new zs,this.pauseUpstreamLock=new zs,this.trackChangeLock=new zs,this.trackChangeLock.lock().then(o=>K(this,void 0,void 0,function*(){try{yield this.setMediaStreamTrack(e,!0)}finally{o()}})),this._constraints=e.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Ee.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,n){return K(this,void 0,void 0,function*(){var r;if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(s=>{nm(this._mediaStreamTrack,s)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let i;if(this.processor&&e){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(Hp(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),i=this.processor.processedTrack}this.sender&&((r=this.sender.transport)===null||r===void 0?void 0:r.state)!=="closed"&&(yield this.sender.replaceTrack(i??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(s=>{Hp(i??e,s)}))})}waitForDimensions(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Hie;return function*(){var r;if(e.kind===Ee.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((r=$s())===null||r===void 0?void 0:r.os)==="iOS"&&(yield ds(10));const i=Date.now();for(;Date.now()-i<n;){const s=e.dimensions;if(s)return s;yield ds(50)}throw new Ec("unable to get track dimensions after timeout")}()})}setDeviceId(e){return K(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===Yu(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),Yu(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if(e.source===Ee.Source.ScreenShare)return;const{deviceId:r,groupId:i}=e._mediaStreamTrack.getSettings(),s=e.kind===Ee.Kind.Audio?"audioinput":"videoinput";return n?Si.getInstance().normalizeDeviceId(s,r,i):r}()})}mute(){return K(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return K(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,n){return K(this,void 0,void 0,function*(){const r=yield this.trackChangeLock.lock();try{if(!this.sender)throw new Ec("unable to replace an unpublished track");let i,s;return typeof n=="boolean"?i=n:n!==void 0&&(i=n.userProvidedTrack,s=n.stopProcessor),this.providedByUser=i??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),s&&this.processor&&(yield this.internalStopProcessor()),this}finally{r()}})}restart(e){return K(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.trackChangeLock.lock();try{e||(e=this._constraints);const{deviceId:r,facingMode:i}=e,s=xre(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const o={audio:!1,video:!1};this.kind===Ee.Kind.Video?o.video=r||i?{deviceId:r,facingMode:i}:!0:o.audio=r?Object.assign({deviceId:r},s):!0,this.attachedElements.forEach(f=>{nm(this.mediaStreamTrack,f)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const u=(yield navigator.mediaDevices.getUserMedia(o)).getTracks()[0];return this.kind===Ee.Kind.Video&&(yield u.applyConstraints(s)),u.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(u),this._constraints=e,this.emit(Ye.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?Ye.Muted:Ye.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return K(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),O3()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return K(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(Ye.UpstreamPaused,this);const r=$s();if((r==null?void 0:r.name)==="Safari"&&Pl(r.version,"12.0")<0)throw new sP("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return K(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(Ye.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return K(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return K(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var s;const o=yield r.trackChangeLock.lock();try{r.log.debug("setting up processor",r.logContext);const a=document.createElement(r.kind),u={kind:r.kind,track:r._mediaStreamTrack,element:a,audioContext:r.audioContext};if(yield n.init(u),r.log.debug("processor initialized",r.logContext),r.processor&&(yield r.internalStopProcessor()),r.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(Hp(r._mediaStreamTrack,a),a.muted=!0,a.play().catch(f=>{f instanceof DOMException&&f.name==="AbortError"?(r.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},r.logContext),{error:f})),setTimeout(()=>{a.play().catch(h=>{r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{err:h}))})},100)):r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{error:f}))}),r.processor=n,r.processorElement=a,r.processor.processedTrack){for(const f of r.attachedElements)f!==r.processorElement&&i&&(nm(r._mediaStreamTrack,f),Hp(r.processor.processedTrack,f));yield(s=r.sender)===null||s===void 0?void 0:s.replaceTrack(r.processor.processedTrack)}r.emit(Ye.TrackProcessorUpdate,r.processor)}finally{o()}}()})}getProcessor(){return this.processor}stopProcessor(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const r=yield e.trackChangeLock.lock();try{yield e.internalStopProcessor(n)}finally{r()}}()})}internalStopProcessor(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var r,i;e.processor&&(e.log.debug("stopping processor",e.logContext),(r=e.processor.processedTrack)===null||r===void 0||r.stop(),yield e.processor.destroy(),e.processor=void 0,n||((i=e.processorElement)===null||i===void 0||i.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(Ye.TrackProcessorUpdate))}()})}startPreConnectBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!Wie()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new $ie(this,{mimeType:n})}this.localTrackRecorder.start(e),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},qie)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.byteStream}getPreConnectBufferMimeType(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.mimeType}}class dw extends H3{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;super(e,Ee.Kind.Audio,n,r,s),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>K(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}o&&this.prevStats&&(this._currentBitrate=yS(o,this.prevStats)),this.prevStats=o}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(Ye.AudioTrackFeatureUpdate,this,wi.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(Ye.AudioTrackFeatureUpdate,this,wi.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=i,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return K(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Ee.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return K(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Yu(this._constraints.deviceId);return this.source===Ee.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return K(this,void 0,void 0,function*(){let n;if(e){const r=aP({audio:e});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return K(this,void 0,void 0,function*(){const r=yield n.restart.call(this,e);return this.checkForSilence(),r})}startMonitor(){Us()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},pP)))}setProcessor(e){return K(this,void 0,void 0,function*(){var n;const r=yield this.trackChangeLock.lock();try{if(!_l()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.internalStopProcessor());const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(i),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(Ye.TrackProcessorUpdate,this.processor)}finally{r()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return K(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return K(this,void 0,void 0,function*(){const e=yield F3(this);return e&&(this.isMuted||this.log.debug("silence detected on local audio track",this.logContext),this.emit(Ye.AudioSilenceDetected)),e})}}function Kie(t,e,n){switch(t.kind){case"audio":return new dw(t,e,!1,void 0,n);case"video":return new fw(t,e,!1,n);default:throw new Ec("unsupported track type: ".concat(t.kind))}}const Gie=Object.values(Im),Yie=Object.values(S1),Qie=Object.values(oP),Jie=[Im.h180,Im.h360],Xie=[S1.h180,S1.h360],Zie=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var r,i;return new Wn(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=t.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=n.fps)!==null&&i!==void 0?i:30))))),n.fps,t.encoding.priority)}),A1=["q","h","f"];function N1(t,e,n,r){var i,s;let o=r==null?void 0:r.videoEncoding;t&&(o=r==null?void 0:r.screenShareEncoding);const a=r==null?void 0:r.simulcast,u=r==null?void 0:r.scalabilityMode,f=r==null?void 0:r.videoCodec;if(!o&&!a&&!u||!e||!n)return[{}];o||(o=tse(t,e,n,f),en.debug("using video encoding",o));const h=o.maxFramerate,m=new Wn(e,n,o.maxBitrate,o.maxFramerate,o.priority);if(u&&ml(f)){const k=new q3(u),C=[];if(k.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(u));const E=$s();if(xy()||_l()||(E==null?void 0:E.name)==="Chrome"&&Pl(E==null?void 0:E.version,"113")<0){const _=k.suffix=="h"?2:3,M=eie(E);for(let A=0;A<k.spatial;A+=1)C.push({rid:A1[2-A],maxBitrate:o.maxBitrate/Math.pow(_,A),maxFramerate:m.encoding.maxFramerate,scaleResolutionDownBy:M?Math.pow(2,A):void 0});C[0].scalabilityMode=u}else C.push({maxBitrate:o.maxBitrate,maxFramerate:m.encoding.maxFramerate,scalabilityMode:u});return m.encoding.priority&&(C[0].priority=m.encoding.priority,C[0].networkPriority=m.encoding.priority),en.debug("using svc encoding",{encodings:C}),C}if(!a)return[o];let v=[];t?v=(i=IN(r==null?void 0:r.screenShareSimulcastLayers))!==null&&i!==void 0?i:RN(t,m):v=(s=IN(r==null?void 0:r.videoSimulcastLayers))!==null&&s!==void 0?s:RN(t,m);let S;if(v.length>0){const k=v[0];v.length>1&&([,S]=v);const C=Math.max(e,n);if(C>=960&&S)return Uk(e,n,[k,S,m],h);if(C>=480)return Uk(e,n,[k,m],h)}return Uk(e,n,[m])}function ese(t,e,n){var r,i,s,o;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&en.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const a=t.mediaStreamTrack.getSettings(),u=(r=a.width)!==null&&r!==void 0?r:(i=t.dimensions)===null||i===void 0?void 0:i.width,f=(s=a.height)!==null&&s!==void 0?s:(o=t.dimensions)===null||o===void 0?void 0:o.height;return t.source===Ee.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),N1(t.source===Ee.Source.ScreenShare,u,f,n)}function tse(t,e,n,r){const i=nse(t,e,n);let{encoding:s}=i[0];const o=Math.max(e,n);for(let a=0;a<i.length;a+=1){const u=i[a];if(s=u.encoding,u.width>=o)break}if(r)switch(r){case"av1":case"h265":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.7;break;case"vp9":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.85;break}return s}function nse(t,e,n){if(t)return Qie;const r=e>n?e/n:n/e;return Math.abs(r-16/9)<Math.abs(r-4/3)?Gie:Yie}function RN(t,e){if(t)return Zie(e);const{width:n,height:r}=e,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?Jie:Xie}function Uk(t,e,n,r){const i=[];if(n.forEach((s,o)=>{if(o>=A1.length)return;const a=Math.min(t,e),f={rid:A1[o],scaleResolutionDownBy:Math.max(1,a/Math.min(s.width,s.height)),maxBitrate:s.encoding.maxBitrate},h=r&&s.encoding.maxFramerate?Math.min(r,s.encoding.maxFramerate):s.encoding.maxFramerate;h&&(f.maxFramerate=h);const m=Kf()||o===0;s.encoding.priority&&m&&(f.priority=s.encoding.priority,f.networkPriority=s.encoding.priority),i.push(f)}),_l()&&L3()==="ios"){let s;i.forEach(a=>{s?a.maxFramerate&&a.maxFramerate>s&&(s=a.maxFramerate):s=a.maxFramerate});let o=!0;i.forEach(a=>{var u;a.maxFramerate!=s&&(o&&(o=!1,en.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),en.info('Setting framerate of encoding "'.concat((u=a.rid)!==null&&u!==void 0?u:"",'" to ').concat(s)),a.maxFramerate=s)})}return i}function IN(t){if(t)return t.sort((e,n)=>{const{encoding:r}=e,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class q3{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function rse(t){return t.source===Ee.Source.ScreenShare||t.constraints.height&&Yu(t.constraints.height)>=1080?"maintain-resolution":"balanced"}const ise=5e3;class fw extends H3{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(e,Ee.Kind.Video,n,r,i),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>K(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(u){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:u}));return}const o=new Map(s.map(u=>[u.rid,u])),a=s.some(u=>u.qualityLimitationReason==="cpu");if(a!==this.isCpuConstrained&&(this.isCpuConstrained=a,this.isCpuConstrained&&this.emit(Ye.CpuConstrained)),this.prevStats){let u=0;o.forEach((f,h)=>{var m;const v=(m=this.prevStats)===null||m===void 0?void 0:m.get(h);u+=yS(f,v)}),this._currentBitrate=u}this.prevStats=o}),this.senderLock=new zs}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!Us())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},pP))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return K(this,void 0,void 0,function*(){var n,r,i,s,o;yield e.pauseUpstream.call(this);try{for(var a=!0,u=Tc(this.simulcastCodecs.values()),f;f=yield u.next(),n=f.done,!n;a=!0)s=f.value,a=!1,yield(o=s.sender)===null||o===void 0?void 0:o.replaceTrack(null)}catch(h){r={error:h}}finally{try{!a&&!n&&(i=u.return)&&(yield i.call(u))}finally{if(r)throw r.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return K(this,void 0,void 0,function*(){var n,r,i,s,o;yield e.resumeUpstream.call(this);try{for(var a=!0,u=Tc(this.simulcastCodecs.values()),f;f=yield u.next(),n=f.done,!n;a=!0){s=f.value,a=!1;const h=s;yield(o=h.sender)===null||o===void 0?void 0:o.replaceTrack(h.mediaStreamTrack)}}catch(h){r={error:h}}finally{try{!a&&!n&&(i=u.return)&&(yield i.call(u))}finally{if(r)throw r.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return K(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Ee.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return K(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===Ee.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){return K(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var s;if(i.type==="outbound-rtp"){const o={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationDurations:i.qualityLimitationDurations,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges,rid:(s=i.rid)!==null&&s!==void 0?s:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,targetBitrate:i.targetBitrate,timestamp:i.timestamp},a=r.get(i.remoteId);a&&(o.jitter=a.jitter,o.packetsLost=a.packetsLost,o.roundTripTime=a.roundTripTime),n.push(o)}}),n.sort((i,s)=>{var o,a;return((o=s.frameWidth)!==null&&o!==void 0?o:0)-((a=i.frameWidth)!==null&&a!==void 0?a:0)}),n})}setPublishingQuality(e){const n=[];for(let r=po.LOW;r<=po.HIGH;r+=1)n.push(new tP({quality:r,enabled:r<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(ml(this.codec),n)}restartTrack(e){return K(this,void 0,void 0,function*(){var n,r,i,s,o;let a;if(e){const m=aP({video:e});typeof m.video!="boolean"&&(a=m.video)}yield this.restart(a),this.isCpuConstrained=!1;try{for(var u=!0,f=Tc(this.simulcastCodecs.values()),h;h=yield f.next(),n=h.done,!n;u=!0){s=h.value,u=!1;const m=s;m.sender&&((o=m.sender.transport)===null||o===void 0?void 0:o.state)!=="closed"&&(m.mediaStreamTrack=this.mediaStreamTrack.clone(),yield m.sender.replaceTrack(m.mediaStreamTrack))}}catch(m){r={error:m}}finally{try{!u&&!n&&(i=f.return)&&(yield i.call(f))}finally{if(r)throw r.error}}})}setProcessor(e){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return K(this,arguments,void 0,function(r){var i=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var o,a,u,f,h,m;if(yield n.setProcessor.call(i,r,s),!((h=i.processor)===null||h===void 0)&&h.processedTrack)try{for(var v=!0,S=Tc(i.simulcastCodecs.values()),k;k=yield S.next(),o=k.done,!o;v=!0)f=k.value,v=!1,yield(m=f.sender)===null||m===void 0?void 0:m.replaceTrack(i.processor.processedTrack)}catch(C){a={error:C}}finally{try{!v&&!o&&(u=S.return)&&(yield u.call(S))}finally{if(a)throw a.error}}}()})}setDegradationPreference(e){return K(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const n=this.sender.getParameters();n.degradationPreference=e,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const r={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,r),r}setSimulcastTrackSender(e,n){const r=this.simulcastCodecs.get(e);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},ise))}setPublishingCodecs(e){return K(this,void 0,void 0,function*(){var n,r,i,s,o,a,u;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(ml(e[0].codec),e[0].qualities),[];this.subscribedCodecs=e;const f=[];try{for(n=!0,r=Tc(e);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const h=u;if(!this.codec||this.codec===h.codec)yield this.setPublishingLayers(ml(h.codec),h.qualities);else{const m=this.simulcastCodecs.get(h.codec);if(this.log.debug("try setPublishingCodec for ".concat(h.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:m})),!m||!m.sender){for(const v of h.qualities)if(v.enabled){f.push(h.codec);break}}else m.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(h.codec),this.logContext),yield MN(m.sender,m.encodings,h.qualities,this.senderLock,ml(h.codec),this.log,this.logContext))}}}catch(h){o={error:h}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return f})}setPublishingLayers(e,n){return K(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield MN(this.sender,this.encodings,n,this.senderLock,e,this.log,this.logContext))})}prioritizePerformance(){return K(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const e=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((r,i)=>{var s;return Object.assign(Object.assign({},r),{active:i===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((s=this.mediaStreamTrack.getSettings().height)!==null&&s!==void 0?s:360)/360)),scalabilityMode:i===0&&ml(this.codec)?"L1T3":void 0,maxFramerate:i===0?15:0,maxBitrate:i===0?r.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{e()}})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return K(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),O3()&&this.isInBackground&&this.source===Ee.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function MN(t,e,n,r,i,s,o){return K(this,void 0,void 0,function*(){const a=yield r.lock();s.debug("setPublishingLayersForSender",Object.assign(Object.assign({},o),{sender:t,qualities:n,senderEncodings:e}));try{const u=t.getParameters(),{encodings:f}=u;if(!f)return;if(f.length!==e.length){s.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},o),{encodings:f,senderEncodings:e}));return}let h=!1;!1&&f[0].scalabilityMode||(i&&n.some(S=>S.enabled)&&n.forEach(S=>S.enabled=!0),f.forEach((v,S)=>{var k;let C=(k=v.rid)!==null&&k!==void 0?k:"";C===""&&(C="q");const E=K3(C),_=n.find(M=>M.quality===E);_&&v.active!==_.enabled&&(h=!0,v.active=_.enabled,s.debug("setting layer ".concat(_.quality," to ").concat(v.active?"enabled":"disabled"),o),Kf()&&(_.enabled?(v.scaleResolutionDownBy=e[S].scaleResolutionDownBy,v.maxBitrate=e[S].maxBitrate,v.maxFrameRate=e[S].maxFrameRate):(v.scaleResolutionDownBy=4,v.maxBitrate=10,v.maxFrameRate=2)))})),h&&(u.encodings=f,s.debug("setting encodings",Object.assign(Object.assign({},o),{encodings:u.encodings})),yield t.setParameters(u))}finally{a()}})}function K3(t){switch(t){case"f":return po.HIGH;case"h":return po.MEDIUM;case"q":return po.LOW;default:return po.HIGH}}function AN(t,e,n,r){if(!n)return[new Ku({quality:po.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,s=new q3(i),o=[],a=s.suffix=="h"?1.5:2,u=s.suffix=="h"?2:3;for(let f=0;f<s.spatial;f+=1)o.push(new Ku({quality:Math.min(po.HIGH,s.spatial-1)-f,width:Math.ceil(t/Math.pow(a,f)),height:Math.ceil(e/Math.pow(a,f)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(u,f)):0,ssrc:0}));return o}return n.map(i=>{var s,o,a;const u=(s=i.scaleResolutionDownBy)!==null&&s!==void 0?s:1;let f=K3((o=i.rid)!==null&&o!==void 0?o:"");return new Ku({quality:f,width:Math.ceil(t/u),height:Math.ceil(e/u),bitrate:(a=i.maxBitrate)!==null&&a!==void 0?a:0,ssrc:0})})}const NN="_lossy",ON="_reliable",sse=2*1e3,Vk="leave-reconnect",ose=3e4;var Vo;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(Vo||(Vo={}));class ase extends Ol.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=fP.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=Vo.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=en,this.reliableDataSequence=1,this.reliableMessageBuffer=new xN,this.reliableReceivedState=new Mie(ose),this.midToTrackId={},this.handleDataChannel=r=>K(this,[r],void 0,function(i){var s=this;let{channel:o}=i;return function*(){if(o){if(o.label===ON)s.reliableDCSub=o;else if(o.label===NN)s.lossyDCSub=o;else return;s.log.debug("on data channel ".concat(o.id,", ").concat(o.label),s.logContext),o.onmessage=s.handleDataMessage}}()}),this.handleDataMessage=r=>K(this,void 0,void 0,function*(){var i,s,o,a,u;const f=yield this.dataProcessLock.lock();try{let h;if(r.data instanceof ArrayBuffer)h=r.data;else if(r.data instanceof Blob)h=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const m=as.fromBinary(new Uint8Array(h));if(m.sequence>0&&m.participantSid!==""){const v=this.reliableReceivedState.get(m.participantSid);if(v&&m.sequence<=v)return;this.reliableReceivedState.set(m.participantSid,m.sequence)}if(((i=m.value)===null||i===void 0?void 0:i.case)==="speaker")this.emit(Je.ActiveSpeakersUpdate,m.value.value.speakers);else if(((s=m.value)===null||s===void 0?void 0:s.case)==="encryptedPacket"){if(!this.e2eeManager){this.log.error("Received encrypted packet but E2EE not set up",this.logContext);return}const v=yield(o=this.e2eeManager)===null||o===void 0?void 0:o.handleEncryptedData(m.value.value.encryptedValue,m.value.value.iv,m.participantIdentity,m.value.value.keyIndex),S=NU.fromBinary(v.payload),k=new as({value:S.value,participantIdentity:m.participantIdentity,participantSid:m.participantSid});((a=k.value)===null||a===void 0?void 0:a.case)==="user"&&DN(k,k.value.value),this.emit(Je.DataPacketReceived,k,m.value.value.encryptionType)}else((u=m.value)===null||u===void 0?void 0:u.case)==="user"&&DN(m,m.value.value),this.emit(Je.DataPacketReceived,m,ii.NONE)}finally{f()}}),this.handleDataError=r=>{const s=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:o}=r.error;this.log.error("DataChannel error on ".concat(s,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:o}))}else this.log.error("Unknown DataChannel error on ".concat(s),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const s=r.currentTarget.maxRetransmits===0?Jt.LOSSY:Jt.RELIABLE;this.updateAndEmitDCBufferStatus(s)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const s=u=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(u,"ms. giving up"),this.logContext),this.emit(Je.Disconnected),this.close()},o=Date.now()-this.reconnectStart;let a=this.getNextRetryDelay({elapsedMs:o,retryCount:this.reconnectAttempts});if(a===null){s(o);return}r===Vk&&(a=0),this.log.debug("reconnecting in ".concat(a,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Di.setTimeout(()=>this.attemptReconnect(i).finally(()=>this.reconnectTimeout=void 0),a)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===Vo.Connected&&r();const s=()=>{this.off(Je.Disconnected,o),r()},o=()=>{this.off(Je.Restarted,s),i()};this.once(Je.Restarted,s),this.once(Je.Disconnected,o)}),this.updateAndEmitDCBufferStatus=r=>{const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(Je.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return r===Jt.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(i.bufferedAmount),i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===fr.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(ff.RR_SIGNAL_DISCONNECTED))},this.log=Nc((n=e.loggerName)!==null&&n!==void 0?n:Ra.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new lP(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.closingLock=new zs,this.dataProcessLock=new zs,this.dcBufferStatus=new Map([[Jt.LOSSY,!0],[Jt.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(Je.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(Je.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(Je.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(Je.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(Je.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(Je.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(Je.StreamStateChanged,r),this.client.onRequestResponse=r=>this.emit(Je.SignalRequestResponse,r)}get logContext(){var e,n,r,i,s,o;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomID:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,participant:(o=(s=this.latestJoinResponse)===null||s===void 0?void 0:s.participant)===null||o===void 0?void 0:o.identity,pID:this.participantSid}}join(e,n,r,i){return K(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const s=yield this.client.join(e,n,r,i);return this._isClosed=!1,this.latestJoinResponse=s,this.subscriberPrimary=s.subscriberPrimary,this.pcManager||(yield this.configure(s)),(!this.subscriberPrimary||s.fastPublish)&&this.negotiate().catch(o=>{en.error(o,this.logContext)}),this.registerOnLineListener(),this.clientConfiguration=s.clientConfiguration,this.emit(Je.SignalConnected,s),s}catch(s){if(s instanceof Rn&&s.reason===un.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,r,i);throw s}})}close(){return K(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(Je.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return K(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new xN,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return K(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new Ec("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],r(new Rn("publication of local track timed out, no response from server",un.Timeout))},1e4);this.pendingTrackResolvers[e.cid]={resolve:s=>{clearTimeout(i),n(s)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return K(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return K(this,void 0,void 0,function*(){var n,r;if(this.pcManager&&this.pcManager.currentState!==Sr.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const i=this.makeRTCConfiguration(e);this.pcManager=new Vie(i,this.options.singlePeerConnection?"publisher-only":e.subscriberPrimary?"subscriber-primary":"publisher-primary",this.loggerOptions),this.emit(Je.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(s,o)=>{this.client.sendIceCandidate(s,o)},this.pcManager.onPublisherOffer=(s,o)=>{this.client.sendOffer(s,o)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(s,o,a)=>K(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(s),this.logContext),["closed","disconnected","failed"].includes(o)&&(this.publisherConnectionPromise=void 0),s===Sr.CONNECTED){const h=this.pcState===Vo.New;this.pcState=Vo.Connected,h&&this.emit(Je.Connected,e)}else s===Sr.FAILED&&(this.pcState===Vo.Connected||this.pcState===Vo.Reconnecting)&&(this.pcState=Vo.Disconnected,this.handleDisconnect("peerconnection failed",a==="failed"?ff.RR_SUBSCRIBER_FAILED:ff.RR_PUBLISHER_FAILED));const u=this.client.isDisconnected||this.client.currentState===fr.RECONNECTING,f=[Sr.FAILED,Sr.CLOSING,Sr.CLOSED].includes(s);u&&f&&!this._isClosed&&this.emit(Je.Offline)}),this.pcManager.onTrack=s=>{s.streams.length!==0&&this.emit(Je.MediaTrackAdded,s.track,s.streams[0],s.receiver)},lse((r=e.serverInfo)===null||r===void 0?void 0:r.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(e,n,r)=>K(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,midToTrackId:r})),this.midToTrackId=r,yield this.pcManager.setPublisherAnswer(e,n))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=(e,n,r)=>K(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;this.midToTrackId=r;const i=yield this.pcManager.createSubscriberAnswerFromOffer(e,n);i&&this.client.sendAnswer(i,n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:r}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],r(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(Je.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(Je.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(Je.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(Je.SubscribedQualityUpdate,e)},this.client.onRoomMoved=e=>{var n;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=e.room),this.emit(Je.RoomMoved,e)},this.client.onMediaSectionsRequirement=e=>{var n,r;const i={direction:"recvonly"};for(let s=0;s<e.numAudios;s++)(n=this.pcManager)===null||n===void 0||n.addPublisherTransceiverOfKind("audio",i);for(let s=0;s<e.numVideos;s++)(r=this.pcManager)===null||r===void 0||r.addPublisherTransceiverOfKind("video",i);this.negotiate()},this.client.onClose=()=>{this.handleDisconnect("signal",ff.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e==null?void 0:e.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case em.DISCONNECT:this.emit(Je.Disconnected,e==null?void 0:e.reason),this.close();break;case em.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(Vk);break;case em.RESUME:this.handleDisconnect(Vk)}}}makeRTCConfiguration(e){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),e.iceServers&&!r.iceServers){const i=[];e.iceServers.forEach(s=>{const o={urls:s.urls};s.username&&(o.username=s.username),s.credential&&(o.credential=s.credential),i.push(o)}),r.iceServers=i}return e.clientConfiguration&&e.clientConfiguration.forceRelay===vy.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(NN,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(ON,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,n,r){return K(this,void 0,void 0,function*(){if(C1())return yield this.createTransceiverRTCRtpSender(e,n,r);if(k1())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new ni("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,r,i){return K(this,void 0,void 0,function*(){if(C1())return this.createSimulcastTransceiverSender(e,n,r,i);if(k1())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new ni("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,r){return K(this,void 0,void 0,function*(){if(!this.pcManager)throw new ni("publisher is closed");const i=[];e.mediaStream&&i.push(e.mediaStream),pd(e)&&(e.codec=n.videoCodec);const s={direction:"sendonly",streams:i};return r&&(s.sendEncodings=r),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,s)).sender})}createSimulcastTransceiverSender(e,n,r,i){return K(this,void 0,void 0,function*(){if(!this.pcManager)throw new ni("publisher is closed");const s={direction:"sendonly"};i&&(s.sendEncodings=i);const o=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,s);if(r.videoCodec)return e.setSimulcastTrackSender(r.videoCodec,o.sender),o.sender})}createRTCRtpSender(e){return K(this,void 0,void 0,function*(){if(!this.pcManager)throw new ni("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return K(this,void 0,void 0,function*(){var n,r,i;if(!this._isClosed){if(this.attemptingReconnect){en.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===vy.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:Sr.NEW)===Sr.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(s){this.reconnectAttempts+=1;let o=!0;s instanceof ni?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:s})),o=!1):s instanceof Mp||(this.fullReconnectOnNext=!0),o?this.handleDisconnect("reconnect",ff.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(Je.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){return K(this,void 0,void 0,function*(){var n,r,i;try{if(!this.url||!this.token)throw new ni("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(Je.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let s;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new Mp;s=yield this.join(e??this.url,this.token,this.signalOpts)}catch(o){throw o instanceof Rn&&o.reason===un.NotAllowed?new ni("could not reconnect, token might be expired"):new Mp}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(Je.SignalRestarted,s),yield this.waitForPCReconnected(),this.client.currentState!==fr.CONNECTED)throw new Mp("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(Je.Restarted)}catch(s){const o=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(o){yield this.restartConnection(o);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),s}})}resumeConnection(e){return K(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new ni("could not reconnect, url or token not saved");if(!this.pcManager)throw new ni("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(Je.Resuming);let r;try{this.setupSignalClientCallbacks(),r=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(i){let s="";throw i instanceof Error&&(s=i.message,this.log.error(i.message,Object.assign(Object.assign({},this.logContext),{error:i}))),i instanceof Rn&&i.reason===un.NotAllowed?new ni("could not reconnect, token might be expired"):i instanceof Rn&&i.reason===un.LeaveRequest?i:new Mp(s)}if(this.emit(Je.SignalResumed),r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=r.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==fr.CONNECTED)throw new Mp("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),r!=null&&r.lastMessageSeq&&this.resendReliableMessagesForResume(r.lastMessageSeq),this.emit(Je.Resumed)})}waitForPCInitialConnection(e,n){return K(this,void 0,void 0,function*(){if(!this.pcManager)throw new ni("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return K(this,void 0,void 0,function*(){this.pcState=Vo.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield ds(sse),!this.pcManager)throw new ni("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=Vo.Connected}catch(e){throw this.pcState=Vo.Disconnected,new Rn("could not establish PC connection, ".concat(e.message),un.InternalError)}})}publishRpcResponse(e,n,r,i){return K(this,void 0,void 0,function*(){const s=new as({destinationIdentities:[e],kind:Jt.RELIABLE,value:{case:"rpcResponse",value:new J_({requestId:n,value:i?{case:"error",value:i.toProto()}:{case:"payload",value:r??""}})}});yield this.sendDataPacket(s,Jt.RELIABLE)})}publishRpcAck(e,n){return K(this,void 0,void 0,function*(){const r=new as({destinationIdentities:[e],kind:Jt.RELIABLE,value:{case:"rpcAck",value:new Q_({requestId:n})}});yield this.sendDataPacket(r,Jt.RELIABLE)})}sendDataPacket(e,n){return K(this,void 0,void 0,function*(){if(yield this.ensurePublisherConnected(n),this.e2eeManager&&this.e2eeManager.isDataChannelEncryptionEnabled){const s=Dre(e);if(s){const o=yield this.e2eeManager.encryptData(s.toBinary());e.value={case:"encryptedPacket",value:new AU({encryptedValue:o.payload,iv:o.iv,keyIndex:o.keyIndex})}}}n===Jt.RELIABLE&&(e.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const r=e.toBinary(),i=this.dataChannelForKind(n);if(i){if(n===Jt.RELIABLE&&this.reliableMessageBuffer.push({data:r,sequence:e.sequence}),this.attemptingReconnect)return;i.send(r)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(e){return K(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(Jt.RELIABLE);const n=this.dataChannelForKind(Jt.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(e),this.reliableMessageBuffer.getAll().forEach(r=>{n.send(r.data)})),this.updateAndEmitDCBufferStatus(Jt.RELIABLE)})}waitForBufferStatusLow(e){return new Promise((n,r)=>K(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))n();else{const i=()=>r("Engine closed");for(this.once(Je.Closing,i);!this.dcBufferStatus.get(e);)yield ds(10);this.off(Je.Closing,i),n()}}))}ensureDataTransportConnected(e){return K(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var s;if(!r.pcManager)throw new ni("PC manager is closed");const o=i?r.pcManager.subscriber:r.pcManager.publisher,a=i?"Subscriber":"Publisher";if(!o)throw new Rn("".concat(a," connection not set"),un.InternalError);let u=!1;!i&&!r.dataChannelForKind(n,i)&&(r.createDataChannels(),u=!0),!u&&!i&&!r.pcManager.publisher.isICEConnected&&r.pcManager.publisher.getICEConnectionState()!=="checking"&&(u=!0),u&&r.negotiate().catch(m=>{en.error(m,r.logContext)});const f=r.dataChannelForKind(n,i);if((f==null?void 0:f.readyState)==="open")return;const h=new Date().getTime()+r.peerConnectionTimeout;for(;new Date().getTime()<h;){if(o.isICEConnected&&((s=r.dataChannelForKind(n,i))===null||s===void 0?void 0:s.readyState)==="open")return;yield ds(50)}throw new Rn("could not establish ".concat(a," connection, state: ").concat(o.getICEConnectionState()),un.InternalError)}()})}ensurePublisherConnected(e){return K(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==Sr.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return K(this,void 0,void 0,function*(){return new Promise((e,n)=>K(this,void 0,void 0,function*(){if(!this.pcManager){n(new w1("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(Je.Closing,i),this.pcManager.publisher.once(im.RTPVideoPayloadTypes,s=>{const o=new Map;s.forEach(a=>{const u=a.codec.toLowerCase();sie(u)&&o.set(a.payload,u)}),this.emit(Je.RTPVideoMapUpdate,o)});try{yield this.pcManager.negotiate(r),e()}catch(s){s instanceof w1&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",ff.RR_UNKNOWN),n(s)}finally{this.off(Je.Closing,i)}}))})}dataChannelForKind(e,n){if(n){if(e===Jt.LOSSY)return this.lossyDCSub;if(e===Jt.RELIABLE)return this.reliableDCSub}else{if(e===Jt.LOSSY)return this.lossyDC;if(e===Jt.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var r,i,s,o;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const a=this.pcManager.publisher.getLocalDescription(),u=this.pcManager.publisher.getRemoteDescription(),f=(r=this.pcManager.subscriber)===null||r===void 0?void 0:r.getRemoteDescription(),h=(i=this.pcManager.subscriber)===null||i===void 0?void 0:i.getLocalDescription(),m=(o=(s=this.signalOpts)===null||s===void 0?void 0:s.autoSubscribe)!==null&&o!==void 0?o:!0,v=new Array,S=new Array;e.forEach(k=>{k.isDesired!==m&&v.push(k.trackSid),k.isEnabled||S.push(k.trackSid)}),this.client.sendSyncState(new nP({answer:this.options.singlePeerConnection?u?qp({sdp:u.sdp,type:u.type}):void 0:h?qp({sdp:h.sdp,type:h.type}):void 0,offer:this.options.singlePeerConnection?a?qp({sdp:a.sdp,type:a.type}):void 0:f?qp({sdp:f.sdp,type:f.type}):void 0,subscription:new mS({trackSids:v,subscribe:!m,participantTracks:[]}),publishTracks:pie(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:S,datachannelReceiveStates:this.reliableReceivedState.map((k,C)=>new XU({publisherSid:C,lastSeq:k}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(r,i)=>{(r==null?void 0:r.id)!==void 0&&r.id!==null&&e.push(new ZU({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(Jt.LOSSY),ka.PUBLISHER),n(this.dataChannelForKind(Jt.RELIABLE),ka.PUBLISHER),n(this.dataChannelForKind(Jt.LOSSY,!0),ka.SUBSCRIBER),n(this.dataChannelForKind(Jt.RELIABLE,!0),ka.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&Di.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){Us()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){Us()&&window.removeEventListener("online",this.handleBrowserOnLine)}getTrackIdForReceiver(e){var n;const r=(n=this.pcManager)===null||n===void 0?void 0:n.getMidForReceiver(e);if(r){const i=Object.entries(this.midToTrackId).find(s=>{let[o]=s;return o===r});if(i)return i[1]}}}class Mp extends Error{}function lse(t){return t!==void 0&&t>13}function DN(t,e){const n=t.participantIdentity?t.participantIdentity:e.participantIdentity;t.participantIdentity=n,e.participantIdentity=n;const r=t.destinationIdentities.length!==0?t.destinationIdentities:e.destinationIdentities;t.destinationIdentities=r,e.destinationIdentities=r}class O1{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return E1(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return K(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(i=>i.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),en.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return K(this,void 0,void 0,function*(){const n=yield fetch("".concat(cse(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new Rn("Could not fetch region settings: ".concat(n.statusText),n.status===401?un.NotAllowed:un.InternalError,n.status)})}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}function cse(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}class G3{get info(){return this._info}validateBytesReceived(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(typeof this.totalByteSize!="number"||this.totalByteSize===0)){if(e&&this.bytesReceived<this.totalByteSize)throw new Bo("Not enough chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, only received ").concat(this.bytesReceived," bytes"),ss.Incomplete);if(this.bytesReceived>this.totalByteSize)throw new Bo("Extra chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, received ").concat(this.bytesReceived," bytes"),ss.LengthExceeded)}}constructor(e,n,r,i){this.reader=n,this.totalByteSize=r,this._info=e,this.bytesReceived=0,this.outOfBandFailureRejectingFuture=i}}class use extends G3{handleChunkReceived(e){var n;this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const r=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,r)}[Symbol.asyncIterator](){const e=this.reader.getReader();let n=new Ko,r=null,i=null;if(this.signal){const o=this.signal;i=()=>{var a;(a=n.reject)===null||a===void 0||a.call(n,o.reason)},o.addEventListener("abort",i),r=o}const s=()=>{e.releaseLock(),r&&i&&r.removeEventListener("abort",i),this.signal=void 0};return{next:()=>K(this,void 0,void 0,function*(){var o,a;try{const{done:u,value:f}=yield Promise.race([e.read(),n.promise,(a=(o=this.outOfBandFailureRejectingFuture)===null||o===void 0?void 0:o.promise)!==null&&a!==void 0?a:new Promise(()=>{})]);return u?(this.validateBytesReceived(!0),{done:!0,value:void 0}):(this.handleChunkReceived(f),{done:!1,value:f.content})}catch(u){throw s(),u}}),return(){return K(this,void 0,void 0,function*(){return s(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){var r,i,s,o;let a=new Set;const u=n.signal?e.withAbortSignal(n.signal):e;try{for(var f=!0,h=Tc(u),m;m=yield h.next(),r=m.done,!r;f=!0){o=m.value,f=!1;const v=o;a.add(v)}}catch(v){i={error:v}}finally{try{!f&&!r&&(s=h.return)&&(yield s.call(h))}finally{if(i)throw i.error}}return Array.from(a)}()})}}class dse extends G3{constructor(e,n,r,i){super(e,n,r,i),this.receivedChunks=new Map}handleChunkReceived(e){var n;const r=Rx(e.chunkIndex),i=this.receivedChunks.get(r);if(i&&i.version>e.version)return;this.receivedChunks.set(r,e),this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const s=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,s)}[Symbol.asyncIterator](){const e=this.reader.getReader(),n=new TextDecoder("utf-8",{fatal:!0});let r=new Ko,i=null,s=null;if(this.signal){const a=this.signal;s=()=>{var u;(u=r.reject)===null||u===void 0||u.call(r,a.reason)},a.addEventListener("abort",s),i=a}const o=()=>{e.releaseLock(),i&&s&&i.removeEventListener("abort",s),this.signal=void 0};return{next:()=>K(this,void 0,void 0,function*(){var a,u;try{const{done:f,value:h}=yield Promise.race([e.read(),r.promise,(u=(a=this.outOfBandFailureRejectingFuture)===null||a===void 0?void 0:a.promise)!==null&&u!==void 0?u:new Promise(()=>{})]);if(f)return this.validateBytesReceived(!0),{done:!0,value:void 0};{this.handleChunkReceived(h);let m;try{m=n.decode(h.content)}catch(v){throw new Bo("Cannot decode datastream chunk ".concat(h.chunkIndex," as text: ").concat(v),ss.DecodeFailed)}return{done:!1,value:m}}}catch(f){throw o(),f}}),return(){return K(this,void 0,void 0,function*(){return o(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){var r,i,s,o;let a="";const u=n.signal?e.withAbortSignal(n.signal):e;try{for(var f=!0,h=Tc(u),m;m=yield h.next(),r=m.done,!r;f=!0)o=m.value,f=!1,a+=o}catch(v){i={error:v}}finally{try{!f&&!r&&(s=h.return)&&(yield s.call(h))}finally{if(i)throw i.error}}return a}()})}}class fse{constructor(){this.log=en,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map}registerTextStreamHandler(e,n){if(this.textStreamHandlers.has(e))throw new Bo('A text stream handler for topic "'.concat(e,'" has already been set.'),ss.HandlerAlreadyRegistered);this.textStreamHandlers.set(e,n)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,n){if(this.byteStreamHandlers.has(e))throw new Bo('A byte stream handler for topic "'.concat(e,'" has already been set.'),ss.HandlerAlreadyRegistered);this.byteStreamHandlers.set(e,n)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}clearHandlersAndControllers(){this.byteStreamControllers.clear(),this.textStreamControllers.clear(),this.byteStreamHandlers.clear(),this.textStreamHandlers.clear()}validateParticipantHasNoActiveDataStreams(e){var n,r,i,s;const o=Array.from(this.textStreamControllers.entries()).filter(u=>u[1].sendingParticipantIdentity===e),a=Array.from(this.byteStreamControllers.entries()).filter(u=>u[1].sendingParticipantIdentity===e);if(o.length>0||a.length>0){const u=new Bo("Participant ".concat(e," unexpectedly disconnected in the middle of sending data"),ss.AbnormalEnd);for(const[f,h]of a)(r=(n=h.outOfBandFailureRejectingFuture).reject)===null||r===void 0||r.call(n,u),this.byteStreamControllers.delete(f);for(const[f,h]of o)(s=(i=h.outOfBandFailureRejectingFuture).reject)===null||s===void 0||s.call(i,u),this.textStreamControllers.delete(f)}}handleDataStreamPacket(e,n){return K(this,void 0,void 0,function*(){switch(e.value.case){case"streamHeader":return this.handleStreamHeader(e.value.value,e.participantIdentity,n);case"streamChunk":return this.handleStreamChunk(e.value.value,n);case"streamTrailer":return this.handleStreamTrailer(e.value.value,n);default:throw new Error('DataPacket of value "'.concat(e.value.case,'" is not data stream related!'))}})}handleStreamHeader(e,n,r){return K(this,void 0,void 0,function*(){var i;if(e.contentHeader.case==="byteHeader"){const s=this.byteStreamHandlers.get(e.topic);if(!s){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let o;const a=new Ko;a.promise.catch(h=>{this.log.error(h)});const u={id:e.streamId,name:(i=e.contentHeader.value.name)!==null&&i!==void 0?i:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Rx(e.timestamp),attributes:e.attributes,encryptionType:r},f=new ReadableStream({start:h=>{if(o=h,this.textStreamControllers.has(e.streamId))throw new Bo("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),ss.AlreadyOpened);this.byteStreamControllers.set(e.streamId,{info:u,controller:o,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:a})}});s(new use(u,f,Rx(e.totalLength),a),{identity:n})}else if(e.contentHeader.case==="textHeader"){const s=this.textStreamHandlers.get(e.topic);if(!s){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let o;const a=new Ko;a.promise.catch(h=>{this.log.error(h)});const u={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes,encryptionType:r},f=new ReadableStream({start:h=>{if(o=h,this.textStreamControllers.has(e.streamId))throw new Bo("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),ss.AlreadyOpened);this.textStreamControllers.set(e.streamId,{info:u,controller:o,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:a})}});s(new dse(u,f,Rx(e.totalLength),a),{identity:n})}})}handleStreamChunk(e,n){const r=this.byteStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?(r.controller.error(new Bo("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),ss.EncryptionTypeMismatch)),this.byteStreamControllers.delete(e.streamId)):e.content.length>0&&r.controller.enqueue(e));const i=this.textStreamControllers.get(e.streamId);i&&(i.info.encryptionType!==n?(i.controller.error(new Bo("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),ss.EncryptionTypeMismatch)),this.textStreamControllers.delete(e.streamId)):e.content.length>0&&i.controller.enqueue(e))}handleStreamTrailer(e,n){const r=this.textStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?r.controller.error(new Bo("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),ss.EncryptionTypeMismatch)):(r.info.attributes=Object.assign(Object.assign({},r.info.attributes),e.attributes),r.controller.close(),this.textStreamControllers.delete(e.streamId)));const i=this.byteStreamControllers.get(e.streamId);i&&(i.info.encryptionType!==n?i.controller.error(new Bo("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),ss.EncryptionTypeMismatch)):(i.info.attributes=Object.assign(Object.assign({},i.info.attributes),e.attributes),i.controller.close()),this.byteStreamControllers.delete(e.streamId))}}class Y3{constructor(e,n,r){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=r,this.info=n}write(e){return this.defaultWriter.write(e)}close(){return K(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class hse extends Y3{}class pse extends Y3{}const LN=15e3;class mse{constructor(e,n){this.engine=e,this.log=n}setupEngine(e){this.engine=e}sendText(e,n){return K(this,void 0,void 0,function*(){var r;const i=crypto.randomUUID(),o=new TextEncoder().encode(e).byteLength,a=(r=n==null?void 0:n.attachments)===null||r===void 0?void 0:r.map(()=>crypto.randomUUID()),u=new Array(a?a.length+1:1).fill(0),f=(m,v)=>{var S;u[v]=m;const k=u.reduce((C,E)=>C+E,0);(S=n==null?void 0:n.onProgress)===null||S===void 0||S.call(n,k)},h=yield this.streamText({streamId:i,totalSize:o,destinationIdentities:n==null?void 0:n.destinationIdentities,topic:n==null?void 0:n.topic,attachedStreamIds:a,attributes:n==null?void 0:n.attributes});return yield h.write(e),f(1,0),yield h.close(),n!=null&&n.attachments&&a&&(yield Promise.all(n.attachments.map((m,v)=>K(this,void 0,void 0,function*(){return this._sendFile(a[v],m,{topic:n.topic,mimeType:m.type,onProgress:S=>{f(S,v+1)}})})))),h.info})}streamText(e){return K(this,void 0,void 0,function*(){var n,r,i;const s=(n=e==null?void 0:e.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),o={id:s,mimeType:"text/plain",timestamp:Date.now(),topic:(r=e==null?void 0:e.topic)!==null&&r!==void 0?r:"",size:e==null?void 0:e.totalSize,attributes:e==null?void 0:e.attributes,encryptionType:!((i=this.engine.e2eeManager)===null||i===void 0)&&i.isDataChannelEncryptionEnabled?ii.GCM:ii.NONE},a=new ow({streamId:s,mimeType:o.mimeType,topic:o.topic,timestamp:hf(o.timestamp),totalLength:hf(e==null?void 0:e.totalSize),attributes:o.attributes,contentHeader:{case:"textHeader",value:new WU({version:e==null?void 0:e.version,attachedStreamIds:e==null?void 0:e.attachedStreamIds,replyToStreamId:e==null?void 0:e.replyToStreamId,operationType:(e==null?void 0:e.type)==="update"?u1.UPDATE:u1.CREATE})}}),u=e==null?void 0:e.destinationIdentities,f=new as({destinationIdentities:u,value:{case:"streamHeader",value:a}});yield this.engine.sendDataPacket(f,Jt.RELIABLE);let h=0;const m=this.engine,v=new WritableStream({write(C){return K(this,void 0,void 0,function*(){for(const E of die(C,LN)){yield m.waitForBufferStatusLow(Jt.RELIABLE);const _=new aw({content:E,streamId:s,chunkIndex:hf(h)}),M=new as({destinationIdentities:u,value:{case:"streamChunk",value:_}});yield m.sendDataPacket(M,Jt.RELIABLE),h+=1}})},close(){return K(this,void 0,void 0,function*(){const C=new lw({streamId:s}),E=new as({destinationIdentities:u,value:{case:"streamTrailer",value:C}});yield m.sendDataPacket(E,Jt.RELIABLE)})},abort(C){console.log("Sink error:",C)}});let S=()=>K(this,void 0,void 0,function*(){yield k.close()});m.once(Je.Closing,S);const k=new hse(v,o,()=>this.engine.off(Je.Closing,S));return k})}sendFile(e,n){return K(this,void 0,void 0,function*(){const r=crypto.randomUUID();return yield this._sendFile(r,e,n),{id:r}})}_sendFile(e,n,r){return K(this,void 0,void 0,function*(){var i;const s=yield this.streamBytes({streamId:e,totalSize:n.size,name:n.name,mimeType:(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:n.type,topic:r==null?void 0:r.topic,destinationIdentities:r==null?void 0:r.destinationIdentities}),o=n.stream().getReader();for(;;){const{done:a,value:u}=yield o.read();if(a)break;yield s.write(u)}return yield s.close(),s.info})}streamBytes(e){return K(this,void 0,void 0,function*(){var n,r,i,s,o,a;const u=(n=e==null?void 0:e.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),f=e==null?void 0:e.destinationIdentities,h={id:u,mimeType:(r=e==null?void 0:e.mimeType)!==null&&r!==void 0?r:"application/octet-stream",topic:(i=e==null?void 0:e.topic)!==null&&i!==void 0?i:"",timestamp:Date.now(),attributes:e==null?void 0:e.attributes,size:e==null?void 0:e.totalSize,name:(s=e==null?void 0:e.name)!==null&&s!==void 0?s:"unknown",encryptionType:!((o=this.engine.e2eeManager)===null||o===void 0)&&o.isDataChannelEncryptionEnabled?ii.GCM:ii.NONE},m=new ow({totalLength:hf((a=h.size)!==null&&a!==void 0?a:0),mimeType:h.mimeType,streamId:u,topic:h.topic,timestamp:hf(Date.now()),attributes:h.attributes,contentHeader:{case:"byteHeader",value:new HU({name:h.name})}}),v=new as({destinationIdentities:f,value:{case:"streamHeader",value:m}});yield this.engine.sendDataPacket(v,Jt.RELIABLE);let S=0;const k=new zs,C=this.engine,E=this.log,_=new WritableStream({write(A){return K(this,void 0,void 0,function*(){const I=yield k.lock();let N=0;try{for(;N<A.byteLength;){const O=A.slice(N,N+LN);yield C.waitForBufferStatusLow(Jt.RELIABLE);const j=new as({destinationIdentities:f,value:{case:"streamChunk",value:new aw({content:O,streamId:u,chunkIndex:hf(S)})}});yield C.sendDataPacket(j,Jt.RELIABLE),S+=1,N+=O.byteLength}}finally{I()}})},close(){return K(this,void 0,void 0,function*(){const A=new lw({streamId:u}),I=new as({destinationIdentities:f,value:{case:"streamTrailer",value:A}});yield C.sendDataPacket(I,Jt.RELIABLE)})},abort(A){E.error("Sink error:",A)}});return new pse(_,h)})}}class Q3 extends Ee{constructor(e,n,r,i,s){super(e,r,s),this.sid=n,this.receiver=i}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?Ye.Muted:Ye.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=r=>{r.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(Ye.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return K(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),pP)),mie()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>e());const r=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(r){const{timestamp:i,rtpTimestamp:s}=r;s&&this.rtpTimestamp!==s&&(this.emit(Ye.TimeSyncUpdate,{timestamp:i,rtpTimestamp:s}),this.rtpTimestamp=s)}};e()}}class gse extends Q3{constructor(e,n,r,i,s,o){super(e,n,Ee.Kind.Audio,r,o),this.monitorReceiver=()=>K(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=yS(a,this.prevStats)),this.prevStats=a}),this.audioContext=i,this.webAudioPluginNodes=[],s&&(this.sinkId=s.deviceId)}setVolume(e){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):r.volume=e;_l()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(_l())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return K(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(T1(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&T1(e)&&e.setSinkId(this.sinkId).catch(r=>{this.log.error("Failed to set sink id on remote audio track",r,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=e.createGain(),r.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(Ye.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(Ye.AudioPlaybackFailed,i)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return K(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",streamId:r.id,timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const Bk=100;class vse extends Q3{constructor(e,n,r,i,s){super(e,n,Ee.Kind.Video,r,s),this.elementInfos=[],this.monitorReceiver=()=>K(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const o=yield this.getReceiverStats();o&&this.prevStats&&this.receiver&&(this._currentBitrate=yS(o,this.prevStats)),this.prevStats=o}),this.debouncedHandleResize=uP(()=>{this.updateDimensions()},Bk),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}setStreamState(e){super.setStreamState(e),console.log("setStreamState",e),e===Ee.StreamState.Active&&this.updateVisibility()}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?nm(this._mediaStreamTrack,n):Hp(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new yse(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===e);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return K(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,r="",i=new Map;return e.forEach(s=>{s.type==="inbound-rtp"?(r=s.codecId,n={type:"video",streamId:s.id,framesDecoded:s.framesDecoded,framesDropped:s.framesDropped,framesReceived:s.framesReceived,packetsReceived:s.packetsReceived,packetsLost:s.packetsLost,frameWidth:s.frameWidth,frameHeight:s.frameHeight,pliCount:s.pliCount,firCount:s.firCount,nackCount:s.nackCount,jitter:s.jitter,timestamp:s.timestamp,bytesReceived:s.bytesReceived,decoderImplementation:s.decoderImplementation}):s.type==="codec"&&i.set(s.id,s)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(r=>r.element===e);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return K(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(e){var n,r;const i=this.elementInfos.reduce((u,f)=>Math.max(u,f.visibilityChangedAt||0),0),s=!((r=(n=this.adaptiveStreamSettings)===null||n===void 0?void 0:n.pauseVideoInBackground)!==null&&r!==void 0)||r?this.isInBackground:!1,o=this.elementInfos.some(u=>u.pictureInPicture),a=this.elementInfos.some(u=>u.visible)&&!s||o;if(!(this.lastVisible===a&&!e)){if(!a&&Date.now()-i<Bk){Di.setTimeout(()=>{this.updateVisibility()},Bk);return}this.lastVisible=a,this.emit(Ye.VisibilityChanged,a,this)}}updateDimensions(){var e,n;let r=0,i=0;const s=this.getPixelDensity();for(const o of this.elementInfos){const a=o.width()*s,u=o.height()*s;a+u>r+i&&(r=a,i=u)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(Ye.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?fN():n||(fN()>2?2:1)}}class yse{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=r=>{var i;const{target:s,isIntersecting:o}=r;s===this.element&&(this.isIntersecting=o,this.isPiP=Iv(this.element),this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r,i,s;(i=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP),this.isPiP=Iv(this.element),(s=this.handleVisibilityChanged)===null||s===void 0||s.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=Iv(this.element),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=e,this.isIntersecting=n??D1(e),this.isPiP=Us()&&Iv(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,n,r;this.isIntersecting=D1(this.element),this.isPiP=Iv(this.element),this.element.handleResize=()=>{var i;(i=this.handleResize)===null||i===void 0||i.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,pN().observe(this.element),hN().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(r=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,n,r,i,s;(e=pN())===null||e===void 0||e.unobserve(this.element),(n=hN())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(r=window.documentPictureInPicture)===null||r===void 0||r.removeEventListener("enter",this.onEnterPiP),(s=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||s===void 0||s.removeEventListener("pagehide",this.onLeavePiP)}}function Iv(t){var e,n;return document.pictureInPictureElement===t?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?D1(t,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function D1(t,e){const n=e||window;let r=t.offsetTop,i=t.offsetLeft;const s=t.offsetWidth,o=t.offsetHeight,{hidden:a}=t,{display:u}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,r+=t.offsetTop,i+=t.offsetLeft;return r<n.pageYOffset+n.innerHeight&&i<n.pageXOffset+n.innerWidth&&r+o>n.pageYOffset&&i+s>n.pageXOffset&&!a&&u!=="none"}class vc extends Ol.EventEmitter{constructor(e,n,r,i){var s;super(),this.metadataMuted=!1,this.encryption=ii.NONE,this.log=en,this.handleMuted=()=>{this.emit(Ye.Muted)},this.handleUnmuted=()=>{this.emit(Ye.Unmuted)},this.log=Nc((s=i==null?void 0:i.loggerName)!==null&&s!==void 0?s:Ra.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=r,this.source=Ee.Source.Unknown}setTrack(e){this.track&&(this.track.off(Ye.Muted,this.handleMuted),this.track.off(Ye.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(Ye.Muted,this.handleMuted),e.on(Ye.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),sn(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==ii.NONE}get audioTrack(){if(Cl(this.track))return this.track}get videoTrack(){if(pd(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=Ee.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===Ee.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(vc||(vc={}));class L1 extends vc{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(Ye.Ended)},this.handleCpuConstrained=()=>{this.track&&pd(this.track)&&this.emit(Ye.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(r)}setTrack(e){this.track&&(this.track.off(Ye.Ended,this.handleTrackEnded),this.track.off(Ye.CpuConstrained,this.handleCpuConstrained)),super.setTrack(e),e&&(e.on(Ye.Ended,this.handleTrackEnded),e.on(Ye.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return K(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return K(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return K(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return K(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(Cl(this.track)){const n=this.track.getSourceTrackSettings(),r=new Set;return n.autoGainControl&&r.add(wi.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&r.add(wi.TF_ECHO_CANCELLATION),n.noiseSuppression&&r.add(wi.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&r.add(wi.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||r.add(wi.TF_NO_DTX),this.track.enhancedNoiseCancellation&&r.add(wi.TF_ENHANCED_NOISE_CANCELLATION),Array.from(r.values())}else return[]}}function bS(t,e){return K(this,void 0,void 0,function*(){t??(t={});let n=!1;const{audioProcessor:r,videoProcessor:i,optionsWithoutProcessor:s}=V3(t);let o=s.audio,a=s.video;if(r&&typeof s.audio=="object"&&(s.audio.processor=r),i&&typeof s.video=="object"&&(s.video.processor=i),t.audio&&typeof s.audio=="object"&&typeof s.audio.deviceId=="string"){const m=s.audio.deviceId;s.audio.deviceId={exact:m},n=!0,o=Object.assign(Object.assign({},s.audio),{deviceId:{ideal:m}})}if(s.video&&typeof s.video=="object"&&typeof s.video.deviceId=="string"){const m=s.video.deviceId;s.video.deviceId={exact:m},n=!0,a=Object.assign(Object.assign({},s.video),{deviceId:{ideal:m}})}(s.audio===!0||typeof s.audio=="object"&&!s.audio.deviceId)&&(s.audio={deviceId:"default"}),s.video===!0?s.video={deviceId:"default"}:typeof s.video=="object"&&!s.video.deviceId&&(s.video.deviceId="default");const u=j3(s,z3,$3),f=aP(u),h=navigator.mediaDevices.getUserMedia(f);s.audio&&(Si.userMediaPromiseMap.set("audioinput",h),h.catch(()=>Si.userMediaPromiseMap.delete("audioinput"))),s.video&&(Si.userMediaPromiseMap.set("videoinput",h),h.catch(()=>Si.userMediaPromiseMap.delete("videoinput")));try{const m=yield h;return yield Promise.all(m.getTracks().map(v=>K(this,void 0,void 0,function*(){const S=v.kind==="audio";let k=S?u.audio:u.video;(typeof k=="boolean"||!k)&&(k={});let C;const E=S?f.audio:f.video;typeof E!="boolean"&&(C=E);const _=v.getSettings().deviceId;C!=null&&C.deviceId&&Yu(C.deviceId)!==_?C.deviceId=_:C||(C={deviceId:_});const M=Kie(v,C,e);return M.kind===Ee.Kind.Video?M.source=Ee.Source.Camera:M.kind===Ee.Kind.Audio&&(M.source=Ee.Source.Microphone),M.mediaStream=m,Cl(M)&&r?yield M.setProcessor(r):pd(M)&&i&&(yield M.setProcessor(i)),M})))}catch(m){if(!n)throw m;return bS(Object.assign(Object.assign({},t),{audio:o,video:a}),e)}})}function J3(t){return K(this,void 0,void 0,function*(){return(yield bS({audio:!1,video:t??!0}))[0]})}function bse(t){return K(this,void 0,void 0,function*(){return(yield bS({audio:!0,video:!1}))[0]})}var Au;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(Au||(Au={}));function xse(t){switch(t){case Fv.EXCELLENT:return Au.Excellent;case Fv.GOOD:return Au.Good;case Fv.POOR:return Au.Poor;case Fv.LOST:return Au.Lost;default:return Au.Unknown}}class X3 extends Ol.EventEmitter{get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===yy.AGENT}get isActive(){var e;return((e=this.participantInfo)===null||e===void 0?void 0:e.state)===Zp.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,n,r,i,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:yy.STANDARD;var u;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=Au.Unknown,this.log=en,this.log=Nc((u=o==null?void 0:o.loggerName)!==null&&u!==void 0?u:Ra.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=r,this.metadata=i,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=a,this._attributes=s??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,n]of this.trackPublications)if(n.source===e)return n}getTrackPublicationByName(e){for(const[,n]of this.trackPublications)if(n.trackName===e)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new Ko,this.once(Ve.Active,()=>{var e,n;(n=(e=this.activeFuture)===null||e===void 0?void 0:e.resolve)===null||n===void 0||n.call(e),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrackPublication(Ee.Source.Camera);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrackPublication(Ee.Source.Microphone);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(Ee.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){var n;return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.state===Zp.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==Zp.ACTIVE&&this.emit(Ve.Active),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,!0)}_setMetadata(e){const n=this.metadata!==e,r=this.metadata;this.metadata=e,n&&this.emit(Ve.ParticipantMetadataChanged,r)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(Ve.ParticipantNameChanged,e)}_setAttributes(e){const n=gie(this.attributes,e);this._attributes=e,Object.keys(n).length>0&&this.emit(Ve.AttributesChanged,n)}setPermissions(e){var n,r,i,s,o,a;const u=this.permissions,f=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||e.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||e.hidden!==((s=this.permissions)===null||s===void 0?void 0:s.hidden)||e.recorder!==((o=this.permissions)===null||o===void 0?void 0:o.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((h,m)=>{var v;return h!==((v=this.permissions)===null||v===void 0?void 0:v.canPublishSources[m])})||e.canSubscribeMetrics!==((a=this.permissions)===null||a===void 0?void 0:a.canSubscribeMetrics);return this.permissions=e,f&&this.emit(Ve.ParticipantPermissionsChanged,u),f}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(Ve.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=xse(e),n!==this._connectionQuality&&this.emit(Ve.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var e,n;this.activeFuture&&((n=(e=this.activeFuture).reject)===null||n===void 0||n.call(e,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(n=>Cl(n.track)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(Ye.Muted,()=>{this.emit(Ve.TrackMuted,e)}),e.on(Ye.Unmuted,()=>{this.emit(Ve.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case Ee.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case Ee.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function wse(t){var e,n,r;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new QU({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=t.allowAll)!==null&&r!==void 0?r:!1,trackSids:t.allowedTrackSids||[]})}class Sse extends X3{constructor(e,n,r,i,s,o){super(e,n,void 0,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=ii.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Ko)},this.handleReconnected=()=>{var a,u;(u=(a=this.reconnectFuture)===null||a===void 0?void 0:a.resolve)===null||u===void 0||u.call(a),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var a,u,f,h,m,v;this.reconnectFuture&&(this.reconnectFuture.promise.catch(S=>this.log.warn(S.message,this.logContext)),(u=(a=this.reconnectFuture)===null||a===void 0?void 0:a.reject)===null||u===void 0||u.call(a,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((h=(f=this.signalConnectedFuture).reject)===null||h===void 0||h.call(f,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(v=(m=this.activeAgentFuture)===null||m===void 0?void 0:m.reject)===null||v===void 0||v.call(m,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=a=>{var u,f;a.participant&&this.updateInfo(a.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new Ko),(f=(u=this.signalConnectedFuture).resolve)===null||f===void 0||f.call(u)},this.handleSignalRequestResponse=a=>{const{requestId:u,reason:f,message:h}=a,m=this.pendingSignalRequests.get(u);m&&(f!==rP.OK&&m.reject(new lN(h,f)),this.pendingSignalRequests.delete(u))},this.handleDataPacket=a=>{switch(a.value.case){case"rpcResponse":let u=a.value.value,f=null,h=null;u.value.case==="payload"?f=u.value.value:u.value.case==="error"&&(h=Er.fromProto(u.value.value)),this.handleIncomingRpcResponse(u.requestId,f,h);break;case"rpcAck":let m=a.value.value;this.handleIncomingRpcAck(m.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(a=>wse(a)))},this.onTrackUnmuted=a=>{this.onTrackMuted(a,a.isUpstreamPaused)},this.onTrackMuted=(a,u)=>{if(u===void 0&&(u=!0),!a.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),sn(a)));return}this.engine.updateMuteStatus(a.sid,u)},this.onTrackUpstreamPaused=a=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),sn(a))),this.onTrackMuted(a,!0)},this.onTrackUpstreamResumed=a=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),sn(a))),this.onTrackMuted(a,a.isMuted)},this.onTrackFeatureUpdate=a=>{const u=this.audioTrackPublications.get(a.sid);if(!u){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(a.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(u.trackSid,u.getTrackFeatures())},this.onTrackCpuConstrained=(a,u)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),sn(u))),this.emit(Ve.LocalTrackCpuConstrained,a,u)},this.handleSubscribedQualityUpdate=a=>K(this,void 0,void 0,function*(){var u,f,h,m,v;if(!(!((v=this.roomOptions)===null||v===void 0)&&v.dynacast))return;const S=this.videoTrackPublications.get(a.trackSid);if(!S){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:a.trackSid}));return}if(!S.videoTrack)return;const k=yield S.videoTrack.setPublishingCodecs(a.subscribedCodecs);try{for(var C=!0,E=Tc(k),_;_=yield E.next(),u=_.done,!u;C=!0){m=_.value,C=!1;const M=m;Kre(M)&&(this.log.debug("publish ".concat(M," for ").concat(S.videoTrack.sid),Object.assign(Object.assign({},this.logContext),sn(S))),yield this.publishAdditionalCodecForTrack(S.videoTrack,M,S.options))}}catch(M){f={error:M}}finally{try{!C&&!u&&(h=E.return)&&(yield h.call(E))}finally{if(f)throw f.error}}}),this.handleLocalTrackUnpublished=a=>{const u=this.trackPublications.get(a.trackSid);if(!u){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:a.trackSid}));return}this.unpublishTrack(u.track)},this.handleTrackEnded=a=>K(this,void 0,void 0,function*(){if(a.source===Ee.Source.ScreenShare||a.source===Ee.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),sn(a))),this.unpublishTrack(a);else if(a.isUserProvided)yield a.mute();else if(gc(a)||Cu(a))try{if(Us())try{const u=yield navigator==null?void 0:navigator.permissions.query({name:a.source===Ee.Source.Camera?"camera":"microphone"});if(u&&u.state==="denied")throw this.log.warn("user has revoked access to ".concat(a.source),Object.assign(Object.assign({},this.logContext),sn(a))),u.onchange=()=>{u.state!=="denied"&&(a.isMuted||a.restartTrack(),u.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}a.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),sn(a))),gc(a)?yield a.restartTrack({deviceId:"default"}):yield a.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),sn(a))),yield a.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=s,this.roomOutgoingDataStreamManager=o}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==ii.NONE}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setupEngine(e){var n;this.engine=e,this.engine.on(Je.RemoteMute,(r,i)=>{const s=this.trackPublications.get(r);!s||!s.track||(i?s.mute():s.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(Je.Connected,this.handleReconnected).on(Je.SignalConnected,this.handleSignalConnected).on(Je.SignalRestarted,this.handleReconnected).on(Je.SignalResumed,this.handleReconnected).on(Je.Restarting,this.handleReconnecting).on(Je.Resuming,this.handleReconnecting).on(Je.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(Je.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(Je.Closing,this.handleClosing).on(Je.SignalRequestResponse,this.handleSignalRequestResponse).on(Je.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return K(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return K(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return K(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return K(this,arguments,void 0,function(n){var r=this;let{metadata:i,name:s,attributes:o}=n;return function*(){return new Promise((a,u)=>K(r,void 0,void 0,function*(){var f,h;try{let m=!1;const v=yield this.engine.client.sendUpdateLocalMetadata((f=i??this.metadata)!==null&&f!==void 0?f:"",(h=s??this.name)!==null&&h!==void 0?h:"",o),S=performance.now();for(this.pendingSignalRequests.set(v,{resolve:a,reject:k=>{u(k),m=!0},values:{name:s,metadata:i,attributes:o}});performance.now()-S<5e3&&!m;){if((!s||this.name===s)&&(!i||this.metadata===i)&&(!o||Object.entries(o).every(k=>{let[C,E]=k;return this.attributes[C]===E||E===""&&!this.attributes[C]}))){this.pendingSignalRequests.delete(v),a();return}yield ds(50)}u(new lN("Request to update local metadata timed out","TimeoutError"))}catch(m){m instanceof Error&&u(m)}}))}()})}setCameraEnabled(e,n,r){return this.setTrackEnabled(Ee.Source.Camera,e,n,r)}setMicrophoneEnabled(e,n,r){return this.setTrackEnabled(Ee.Source.Microphone,e,n,r)}setScreenShareEnabled(e,n,r){return this.setTrackEnabled(Ee.Source.ScreenShare,e,n,r)}setE2EEEnabled(e){return K(this,void 0,void 0,function*(){this.encryptionType=e?ii.GCM:ii.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,r,i){return K(this,void 0,void 0,function*(){var s,o;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n})),this.republishPromise&&(yield this.republishPromise);let a=this.getTrackPublication(e);if(n)if(a)yield a.unmute();else{let u;if(this.pendingPublishing.has(e)){const f=yield this.waitForPendingPublicationOfSource(e);return f||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield f==null?void 0:f.unmute(),f}this.pendingPublishing.add(e);try{switch(e){case Ee.Source.Camera:u=yield this.createTracks({video:(s=r)!==null&&s!==void 0?s:!0});break;case Ee.Source.Microphone:u=yield this.createTracks({audio:(o=r)!==null&&o!==void 0?o:!0});break;case Ee.Source.ScreenShare:u=yield this.createScreenTracks(Object.assign({},r));break;default:throw new Ec(e)}}catch(f){throw u==null||u.forEach(h=>{h.stop()}),f instanceof Error&&this.emit(Ve.MediaDevicesError,f,I1(e)),this.pendingPublishing.delete(e),f}for(const f of u){const h=Object.assign(Object.assign({},this.roomOptions.publishDefaults),r);e===Ee.Source.Microphone&&Cl(f)&&h.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),f.startPreConnectBuffer())}try{const f=[];for(const m of u)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),sn(m))),f.push(this.publishTrack(m,i));[a]=yield Promise.all(f)}catch(f){throw u==null||u.forEach(h=>{h.stop()}),f}finally{this.pendingPublishing.delete(e)}}else if(!(a!=null&&a.track)&&this.pendingPublishing.has(e)&&(a=yield this.waitForPendingPublicationOfSource(e),a||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),a&&a.track)if(e===Ee.Source.ScreenShare){a=yield this.unpublishTrack(a.track);const u=this.getTrackPublication(Ee.Source.ScreenShareAudio);u&&u.track&&this.unpublishTrack(u.track)}else yield a.mute();return a})}enableCameraAndMicrophone(){return K(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(Ee.Source.Camera)||this.pendingPublishing.has(Ee.Source.Microphone))){this.pendingPublishing.add(Ee.Source.Camera),this.pendingPublishing.add(Ee.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(Ee.Source.Camera),this.pendingPublishing.delete(Ee.Source.Microphone)}}})}createTracks(e){return K(this,void 0,void 0,function*(){var n,r;e??(e={});const i=j3(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults);try{return(yield bS(i,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(a=>(Cl(a)&&(this.microphoneError=void 0,a.setAudioContext(this.audioContext),a.source=Ee.Source.Microphone,this.emit(Ve.AudioStreamAcquired)),pd(a)&&(this.cameraError=void 0,a.source=Ee.Source.Camera),a))}catch(s){throw s instanceof Error&&(e.audio&&(this.microphoneError=s),e.video&&(this.cameraError=s)),s}})}createScreenTracks(e){return K(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new sP("getDisplayMedia not supported");e.resolution===void 0&&!Zre()&&(e.resolution=oP.h1080fps30.resolution);const n=hie(e),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new Ec("no video track found");const s=new fw(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});s.source=Ee.Source.ScreenShare,e.contentHint&&(s.mediaStreamTrack.contentHint=e.contentHint);const o=[s];if(r.getAudioTracks().length>0){this.emit(Ve.AudioStreamAcquired);const a=new dw(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=Ee.Source.ScreenShareAudio,o.push(a)}return o})}publishTrack(e,n){return K(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,n)})}publishOrRepublishTrack(e,n){return K(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var a,u,f,h;gc(r)&&r.setAudioContext(s.audioContext),yield(a=s.reconnectFuture)===null||a===void 0?void 0:a.promise,s.republishPromise&&!o&&(yield s.republishPromise),rm(r)&&s.pendingPublishPromises.has(r)&&(yield s.pendingPublishPromises.get(r));let m;if(r instanceof MediaStreamTrack)m=r.getConstraints();else{m=r.constraints;let _;switch(r.source){case Ee.Source.Microphone:_="audioinput";break;case Ee.Source.Camera:_="videoinput"}_&&s.activeDeviceMap.has(_)&&(m=Object.assign(Object.assign({},m),{deviceId:s.activeDeviceMap.get(_)}))}if(r instanceof MediaStreamTrack)switch(r.kind){case"audio":r=new dw(r,m,!0,s.audioContext,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;case"video":r=new fw(r,m,!0,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;default:throw new Ec("unsupported MediaStreamTrack kind ".concat(r.kind))}else r.updateLoggerOptions({loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});let v;if(s.trackPublications.forEach(_=>{_.track&&_.track===r&&(v=_)}),v)return s.log.warn("track has already been published, skipping",Object.assign(Object.assign({},s.logContext),sn(v))),v;const S=Object.assign(Object.assign({},s.roomOptions.publishDefaults),i),k="channelCount"in r.mediaStreamTrack.getSettings()&&r.mediaStreamTrack.getSettings().channelCount===2||r.mediaStreamTrack.getConstraints().channelCount===2,C=(u=S.forceStereo)!==null&&u!==void 0?u:k;C&&(S.dtx===void 0&&s.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},s.logContext),sn(r))),S.red===void 0&&s.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(f=S.dtx)!==null&&f!==void 0||(S.dtx=!1),(h=S.red)!==null&&h!==void 0||(S.red=!1)),!tie()&&s.roomOptions.e2ee&&(s.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},s.logContext)),S.simulcast=!1),S.source&&(r.source=S.source);const E=new Promise((_,M)=>K(s,void 0,void 0,function*(){try{if(this.engine.client.currentState!==fr.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:sn(r)}));const A=setTimeout(()=>{M(new aN("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(A);const I=yield this.publish(r,S,C);_(I)}else try{const A=yield this.publish(r,S,C);_(A)}catch(A){M(A)}}catch(A){M(A)}}));s.pendingPublishPromises.set(r,E);try{return yield E}catch(_){throw _}finally{s.pendingPublishPromises.delete(r)}}()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new Ko),this.signalConnectedFuture.promise}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),sn(e))),!1;const{canPublish:n,canPublishSources:r}=this.permissions;return n&&(r.length===0||r.map(i=>vie(i)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),sn(e))),!1)}publish(e,n,r){return K(this,void 0,void 0,function*(){var i,s,o,a,u,f,h,m,v,S;if(!this.hasPermissionsToPublish(e))throw new aN("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(z=>rm(e)&&z.source===e.source)&&e.source!==Ee.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),sn(e))),n.stopMicTrackOnMute&&Cl(e)&&(e.stopOnMute=!0),e.source===Ee.Source.ScreenShare&&Kf()&&(n.simulcast=!1),n.videoCodec==="av1"&&!Qre()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!Jre()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=M1),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(z=>n.videoCodec===ey(z.mime))||(n.videoCodec=ey(this.enabledPublishVideoCodecs[0].mime)));const C=n.videoCodec;e.on(Ye.Muted,this.onTrackMuted),e.on(Ye.Unmuted,this.onTrackUnmuted),e.on(Ye.Ended,this.handleTrackEnded),e.on(Ye.UpstreamPaused,this.onTrackUpstreamPaused),e.on(Ye.UpstreamResumed,this.onTrackUpstreamResumed),e.on(Ye.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const E=[],_=!(!((i=n.dtx)!==null&&i!==void 0)||i),M=e.getSourceTrackSettings();M.autoGainControl&&E.push(wi.TF_AUTO_GAIN_CONTROL),M.echoCancellation&&E.push(wi.TF_ECHO_CANCELLATION),M.noiseSuppression&&E.push(wi.TF_NOISE_SUPPRESSION),M.channelCount&&M.channelCount>1&&E.push(wi.TF_STEREO),_&&E.push(wi.TF_NO_DTX),gc(e)&&e.hasPreConnectBuffer&&E.push(wi.TF_PRECONNECT_BUFFER);const A=new by({cid:e.mediaStreamTrack.id,name:n.name,type:Ee.kindToProto(e.kind),muted:e.isMuted,source:Ee.sourceToProto(e.source),disableDtx:_,encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((s=n.red)!==null&&s!==void 0)||s),stream:n==null?void 0:n.stream,backupCodecPolicy:n==null?void 0:n.backupCodecPolicy,audioFeatures:E});let I;if(e.kind===Ee.Kind.Video){let z={width:0,height:0};try{z=yield e.waitForDimensions()}catch{const J=(a=(o=this.roomOptions.videoCaptureDefaults)===null||o===void 0?void 0:o.resolution)!==null&&a!==void 0?a:Im.h720.resolution;z={width:J.width,height:J.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),sn(e)),{dims:z}))}A.width=z.width,A.height=z.height,Cu(e)&&(ml(C)&&(e.source===Ee.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),sn(e))))),n.scalabilityMode=(u=n.scalabilityMode)!==null&&u!==void 0?u:"L3T3_KEY"),A.simulcastCodecs=[new f1({codec:C,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:M1}),n.backupCodec&&C!==n.backupCodec.codec&&A.encryption===ii.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),A.simulcastCodecs.push(new f1({codec:n.backupCodec.codec,cid:""})))),I=N1(e.source===Ee.Source.ScreenShare,A.width,A.height,n),A.layers=AN(A.width,A.height,I,ml(n.videoCodec))}else e.kind===Ee.Kind.Audio&&(I=[{maxBitrate:(f=n.audioPreset)===null||f===void 0?void 0:f.maxBitrate,priority:(m=(h=n.audioPreset)===null||h===void 0?void 0:h.priority)!==null&&m!==void 0?m:"high",networkPriority:(S=(v=n.audioPreset)===null||v===void 0?void 0:v.priority)!==null&&S!==void 0?S:"high"}]);if(!this.engine||this.engine.isClosed)throw new ni("cannot publish track when not connected");const N=()=>K(this,void 0,void 0,function*(){var z,W,J;if(!this.engine.pcManager)throw new ni("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,n,I),this.emit(Ve.LocalSenderCreated,e.sender,e),Cu(e)&&((z=n.degradationPreference)!==null&&z!==void 0||(n.degradationPreference=rse(e)),e.setDegradationPreference(n.degradationPreference)),I)if(Kf()&&e.kind===Ee.Kind.Audio){let Y;for(const me of this.engine.pcManager.publisher.getTransceivers())if(me.sender===e.sender){Y=me;break}Y&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:Y,codec:"opus",maxbr:!((W=I[0])===null||W===void 0)&&W.maxBitrate?I[0].maxBitrate/1e3:0})}else e.codec&&ml(e.codec)&&(!((J=I[0])===null||J===void 0)&&J.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:A.cid,codec:e.codec,maxbr:I[0].maxBitrate/1e3});yield this.engine.negotiate()});let O;const j=new Promise((z,W)=>K(this,void 0,void 0,function*(){var J;try{O=yield this.engine.addTrack(A),z(O)}catch(Y){e.sender&&(!((J=this.engine.pcManager)===null||J===void 0)&&J.publisher)&&(this.engine.pcManager.publisher.removeTrack(e.sender),yield this.engine.negotiate().catch(me=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),sn(e)),{error:me}))})),W(Y)}}));if(this.enabledPublishVideoCodecs.length>0)O=(yield Promise.all([j,N()]))[0];else{O=yield j;let z;if(O.codecs.forEach(W=>{z===void 0&&(z=W.mimeType)}),z&&e.kind===Ee.Kind.Video){const W=ey(z);W!==C&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),sn(e)),{codec:W})),n.videoCodec=W,I=N1(e.source===Ee.Source.ScreenShare,A.width,A.height,n))}yield N()}const V=new L1(e.kind,O,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(V.on(Ye.CpuConstrained,z=>this.onTrackCpuConstrained(z,V)),V.options=n,e.sid=O.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:I,trackInfo:O})),Cu(e)?e.startMonitor(this.engine.client):gc(e)&&e.startMonitor(),this.addTrackPublication(V),this.emit(Ve.LocalTrackPublished,V),gc(e)&&O.audioFeatures.includes(wi.TF_PRECONNECT_BUFFER)){const z=e.getPreConnectBuffer(),W=e.getPreConnectBufferMimeType();this.on(Ve.LocalTrackSubscribed,J=>{if(J.trackSid===O.sid){if(!e.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),sn(e))),e.stopPreConnectBuffer()}}),z&&new Promise((Y,me)=>K(this,void 0,void 0,function*(){var ue,Ie,se,xe,q,te;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),sn(e)));const ie=setTimeout(()=>{me(new Error("agent not active within 10 seconds"))},1e4),pe=yield this.waitUntilActiveAgentPresent();clearTimeout(ie),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),sn(e)));const ke=yield this.streamBytes({name:"preconnect-buffer",mimeType:W,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[pe.identity],attributes:{trackId:V.trackSid,sampleRate:String((q=M.sampleRate)!==null&&q!==void 0?q:"48000"),channels:String((te=M.channelCount)!==null&&te!==void 0?te:"1")}});try{for(var ae=!0,B=Tc(z),fe;fe=yield B.next(),ue=fe.done,!ue;ae=!0){xe=fe.value,ae=!1;const Pe=xe;yield ke.write(Pe)}}catch(Pe){Ie={error:Pe}}finally{try{!ae&&!ue&&(se=B.return)&&(yield se.call(B))}finally{if(Ie)throw Ie.error}}yield ke.close(),Y()}catch(ie){me(ie)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),sn(e)))}).catch(Y=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),sn(e)),{error:Y}))})}return V})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,r){return K(this,void 0,void 0,function*(){var i;if(this.encryptionType!==ii.NONE)return;let s;if(this.trackPublications.forEach(S=>{S.track&&S.track===e&&(s=S)}),!s)throw new Ec("track is not published");if(!Cu(e))throw new Ec("track is not a video track");const o=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),a=ese(e,n,o);if(!a){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),sn(e)));return}const u=e.addSimulcastTrack(n,a);if(!u)return;const f=new by({cid:u.mediaStreamTrack.id,type:Ee.kindToProto(e.kind),muted:e.isMuted,source:Ee.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:o.videoCodec,cid:u.mediaStreamTrack.id}]});if(f.layers=AN(f.width,f.height,a),!this.engine||this.engine.isClosed)throw new ni("cannot publish track when not connected");const h=()=>K(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,u,o,a),yield this.engine.negotiate()}),v=(yield Promise.all([this.engine.addTrack(f),h()]))[0];this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:a,trackInfo:v}))})}unpublishTrack(e,n){return K(this,void 0,void 0,function*(){var r,i;if(rm(e)){const f=this.pendingPublishPromises.get(e);f&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),sn(e))),yield f)}const s=this.getPublicationForTrack(e),o=s?sn(s):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),o)),!s||!s.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),o));return}e=s.track,e.off(Ye.Muted,this.onTrackMuted),e.off(Ye.Unmuted,this.onTrackUnmuted),e.off(Ye.Ended,this.handleTrackEnded),e.off(Ye.UpstreamPaused,this.onTrackUpstreamPaused),e.off(Ye.UpstreamResumed,this.onTrackUpstreamResumed),e.off(Ye.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n?e.stop():e.stopMonitor();let a=!1;const u=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<Sr.FAILED&&u)try{for(const f of this.engine.pcManager.publisher.getTransceivers())f.sender===u&&(f.direction="inactive",a=!0);if(this.engine.removeTrack(u)&&(a=!0),Cu(e)){for(const[,f]of e.simulcastCodecs)f.sender&&(this.engine.removeTrack(f.sender)&&(a=!0),f.sender=void 0);e.simulcastCodecs.clear()}}catch(f){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),o),{error:f}))}switch(this.trackPublications.delete(s.trackSid),s.kind){case Ee.Kind.Audio:this.audioTrackPublications.delete(s.trackSid);break;case Ee.Kind.Video:this.videoTrackPublications.delete(s.trackSid);break}return this.emit(Ve.LocalTrackUnpublished,s),s.setTrack(void 0),a&&(yield this.engine.negotiate()),s})}unpublishTracks(e){return K(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>this.unpublishTrack(r)))).filter(r=>!!r)})}republishAllTracks(e){return K(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){r.republishPromise&&(yield r.republishPromise),r.republishPromise=new Promise((s,o)=>K(r,void 0,void 0,function*(){try{const a=[];this.trackPublications.forEach(u=>{u.track&&(n&&(u.options=Object.assign(Object.assign({},u.options),n)),a.push(u))}),yield Promise.all(a.map(u=>K(this,void 0,void 0,function*(){const f=u.track;yield this.unpublishTrack(f,!1),i&&!f.isMuted&&f.source!==Ee.Source.ScreenShare&&f.source!==Ee.Source.ScreenShareAudio&&(gc(f)||Cu(f))&&!f.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:u.trackSid})),yield f.restartTrack()),yield this.publishOrRepublishTrack(f,u.options,!0)}))),s()}catch(a){o(a)}finally{this.republishPromise=void 0}})),yield r.republishPromise}()})}publishData(e){return K(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const s=i.reliable?Jt.RELIABLE:Jt.LOSSY,o=i.destinationIdentities,a=i.topic;let u=new G_({participantIdentity:r.identity,payload:n,destinationIdentities:o,topic:a});const f=new as({kind:s,value:{case:"user",value:u}});yield r.engine.sendDataPacket(f,s)}()})}publishDtmf(e,n){return K(this,void 0,void 0,function*(){const r=new as({kind:Jt.RELIABLE,value:{case:"sipDtmf",value:new DU({code:e,digit:n})}});yield this.engine.sendDataPacket(r,Jt.RELIABLE)})}sendChatMessage(e,n){return K(this,void 0,void 0,function*(){const r={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:n==null?void 0:n.attachments},i=new as({value:{case:"chatMessage",value:new sw(Object.assign(Object.assign({},r),{timestamp:ir.parse(r.timestamp)}))}});return yield this.engine.sendDataPacket(i,Jt.RELIABLE),this.emit(Ve.ChatMessage,r),r})}editChatMessage(e,n){return K(this,void 0,void 0,function*(){const r=Object.assign(Object.assign({},n),{message:e,editTimestamp:Date.now()}),i=new as({value:{case:"chatMessage",value:new sw(Object.assign(Object.assign({},r),{timestamp:ir.parse(r.timestamp),editTimestamp:ir.parse(r.editTimestamp)}))}});return yield this.engine.sendDataPacket(i,Jt.RELIABLE),this.emit(Ve.ChatMessage,r),r})}sendText(e,n){return K(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendText(e,n)})}streamText(e){return K(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamText(e)})}sendFile(e,n){return K(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendFile(e,n)})}streamBytes(e){return K(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamBytes(e)})}performRpc(e){return K(this,arguments,void 0,function(n){var r=this;let{destinationIdentity:i,method:s,payload:o,responseTimeout:a=15e3}=n;return function*(){return new Promise((h,m)=>K(r,void 0,void 0,function*(){var v,S,k,C;if(hP(o)>W3){m(Er.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((S=(v=this.engine.latestJoinResponse)===null||v===void 0?void 0:v.serverInfo)===null||S===void 0)&&S.version&&Pl((C=(k=this.engine.latestJoinResponse)===null||k===void 0?void 0:k.serverInfo)===null||C===void 0?void 0:C.version,"1.8.0")<0){m(Er.builtIn("UNSUPPORTED_SERVER"));return}const E=Math.max(a,8e3),_=crypto.randomUUID();yield this.publishRpcRequest(i,_,s,o,E);const M=setTimeout(()=>{this.pendingAcks.delete(_),m(Er.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(_),clearTimeout(A)},7e3);this.pendingAcks.set(_,{resolve:()=>{clearTimeout(M)},participantIdentity:i});const A=setTimeout(()=>{this.pendingResponses.delete(_),m(Er.builtIn("RESPONSE_TIMEOUT"))},a);this.pendingResponses.set(_,{resolve:(I,N)=>{clearTimeout(A),this.pendingAcks.has(_)&&(console.warn("RPC response received before ack",_),this.pendingAcks.delete(_),clearTimeout(M)),N?m(N):h(I??"")},participantIdentity:i})}))}()})}registerRpcMethod(e,n){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const n=this.pendingAcks.get(e);n?(n.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,n,r){const i=this.pendingResponses.get(e);i?(i.resolve(n,r),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,n,r,i,s){return K(this,void 0,void 0,function*(){const o=new as({destinationIdentities:[e],kind:Jt.RELIABLE,value:{case:"rpcRequest",value:new Y_({id:n,method:r,payload:i,responseTimeoutMs:s,version:1})}});yield this.engine.sendDataPacket(o,Jt.RELIABLE)})}handleParticipantDisconnected(e){for(const[n,{participantIdentity:r}]of this.pendingAcks)r===e&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:r,resolve:i}]of this.pendingResponses)r===e&&(i(null,Er.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return super.updateInfo(e)?(e.tracks.forEach(n=>{var r,i;const s=this.trackPublications.get(n.sid);if(s){const o=s.isMuted||((i=(r=s.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);o!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),sn(s)),{mutedOnServer:o})),this.engine.client.sendMuteTrack(n.sid,o))}}),!0):!1}setActiveAgent(e){var n,r,i,s;this.firstActiveAgent=e,e&&!this.firstActiveAgent&&(this.firstActiveAgent=e),e?(r=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||r===void 0||r.call(n,e):(s=(i=this.activeAgentFuture)===null||i===void 0?void 0:i.reject)===null||s===void 0||s.call(i,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new Ko),this.activeAgentFuture.promise)}getPublicationForTrack(e){let n;return this.trackPublications.forEach(r=>{const i=r.track;i&&(e instanceof MediaStreamTrack?(gc(i)||Cu(i))&&i.mediaStreamTrack===e&&(n=r):e===i&&(n=r))}),n}waitForPendingPublicationOfSource(e){return K(this,void 0,void 0,function*(){const r=Date.now();for(;Date.now()<r+1e4;){const i=Array.from(this.pendingPublishPromises.entries()).find(s=>{let[o]=s;return o.source===e});if(i)return i[1];yield ds(20)}})}}class Cse extends vc{constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=s=>{this.setTrack(void 0),this.emit(Ye.Ended,s)},this.handleVisibilityChange=s=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(s),this.logContext),this.visible=s,this.emitTrackUpdate()},this.handleVideoDimensionsChange=s=>{this.log.debug("adaptivestream video dimensions ".concat(s.width,"x").concat(s.height),this.logContext),this.videoDimensionsAdaptiveStream=s,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const i=new mS({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new jU({participantSid:"",trackSids:[this.trackSid]})]});this.emit(Ye.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?vc.SubscriptionStatus.Unsubscribed:super.isSubscribed?vc.SubscriptionStatus.Subscribed:vc.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?vc.PermissionStatus.Allowed:vc.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.requestedDisabled===!e||(this.requestedDisabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.requestedMaxQuality===e||(this.requestedMaxQuality=e,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,r;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((r=this.requestedVideoDimensions)===null||r===void 0?void 0:r.height)===e.height||(Ok(this.track)&&(this.requestedVideoDimensions=e),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&Ok(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){var e;return(e=this.requestedMaxQuality)!==null&&e!==void 0?e:po.HIGH}setTrack(e){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(Ye.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(Ye.VisibilityChanged,this.handleVisibilityChange),i.off(Ye.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(Ye.Unsubscribed,i)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(Ye.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(Ye.VisibilityChanged,this.handleVisibilityChange),e.on(Ye.Ended,this.handleEnded),this.emit(Ye.Subscribed,e)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(Ye.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?Ye.Muted:Ye.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(Ye.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(Ye.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return Ok(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new qU({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===Ee.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)vN(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const r=yie(this.trackInfo,this.requestedMaxQuality);r&&vN(this.videoDimensionsAdaptiveStream,r)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(e.width=Math.ceil(n.width),e.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),e.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:po.HIGH})),e.quality=po.HIGH)}this.emit(Ye.UpdateSettings,e)}}class hw extends X3{static fromParticipantInfo(e,n,r){return new hw(e,n.sid,n.identity,n.name,n.metadata,n.attributes,r,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,n,r,i,s,o,a){let u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:yy.STANDARD;super(n,r||"",i,s,o,a,u),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(Ye.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),sn(e)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),e.on(Ye.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(Ye.SubscriptionPermissionChanged,n=>{this.emit(Ve.TrackSubscriptionPermissionChanged,e,n)}),e.on(Ye.SubscriptionStatusChanged,n=>{this.emit(Ve.TrackSubscriptionStatusChanged,e,n)}),e.on(Ye.Subscribed,n=>{this.emit(Ve.TrackSubscribed,n,e)}),e.on(Ye.Unsubscribed,n=>{this.emit(Ve.TrackUnsubscribed,n,e)}),e.on(Ye.SubscriptionFailed,n=>{this.emit(Ve.TrackSubscriptionFailed,e.trackSid,n)})}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ee.Source.Microphone;this.volumeMap.set(n,e);const r=this.getTrackPublication(n);r&&r.track&&r.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ee.Source.Microphone;const n=this.getTrackPublication(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,r,i,s,o){let a=this.getTrackPublicationBySid(n);if(a||n.startsWith("TR")||this.trackPublications.forEach(h=>{!a&&e.kind===h.kind.toString()&&(a=h)}),!a){if(o===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(Ve.TrackSubscriptionFailed,n);return}o===void 0&&(o=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,r,i,s,o-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),sn(a))),this.emit(Ve.TrackSubscriptionFailed,n);return}const u=e.kind==="video";let f;return u?f=new vse(e,n,i,s):f=new gse(e,n,i,this.audioContext,this.audioOutput),f.source=a.source,f.isMuted=a.isMuted,f.setMediaStream(r),f.start(),a.setTrack(f),this.volumeMap.has(a.source)&&P1(f)&&Cl(f)&&f.setVolume(this.volumeMap.get(a.source)),a}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,r=new Map;return e.tracks.forEach(i=>{var s,o;let a=this.getTrackPublicationBySid(i.sid);if(a)a.updateInfo(i);else{const u=Ee.kindFromProto(i.type);if(!u)return;a=new Cse(u,i,(s=this.signalClient.connectOptions)===null||s===void 0?void 0:s.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(o=this.loggerOptions)===null||o===void 0?void 0:o.loggerName}),a.updateInfo(i),r.set(i.sid,a);const f=Array.from(this.trackPublications.values()).find(h=>h.source===(a==null?void 0:a.source));f&&a.source!==Ee.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(a.source),Object.assign(Object.assign({},this.logContext),{oldTrack:sn(f),newTrack:sn(a)})),this.addTrackPublication(a)}n.set(i.sid,a)}),this.trackPublications.forEach(i=>{n.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),sn(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit(Ve.TrackPublished,i)}),!0}unpublishTrack(e,n){const r=this.trackPublications.get(e);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.trackPublications.delete(e),r.kind){case Ee.Kind.Audio:this.audioTrackPublications.delete(e);break;case Ee.Kind.Video:this.videoTrackPublications.delete(e);break}n&&this.emit(Ve.TrackUnpublished,r)}setAudioOutput(e){return K(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTrackPublications.forEach(r=>{var i;Cl(r.track)&&P1(r.track)&&n.push(r.track.setSinkId((i=e.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:r})),super.emit(e,...r)}}var kn;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting"})(kn||(kn={}));const kse=4*1e3;let Mm=class j1 extends Ol.EventEmitter{get hasE2EESetup(){return this.e2eeManager!==void 0}constructor(e){var n,r,i,s;if(super(),n=this,this.state=kn.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=en,this.bufferedEvents=[],this.isResuming=!1,this.rpcHandlers=new Map,this.connect=(o,a,u)=>K(this,void 0,void 0,function*(){var f;if(!Xre())throw _l()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const h=yield this.disconnectLock.lock();if(this.state===kn.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),h(),Promise.resolve();if(this.connectFuture)return h(),this.connectFuture.promise;this.setAndEmitConnectionState(kn.Connecting),((f=this.regionUrlProvider)===null||f===void 0?void 0:f.getServerUrl().toString())!==o&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),E1(new URL(o))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new O1(o,a):this.regionUrlProvider.updateToken(a),this.regionUrlProvider.fetchRegionSettings().then(S=>{var k;(k=this.regionUrlProvider)===null||k===void 0||k.setServerReportedRegions(S)}).catch(S=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:S}))}));const m=(S,k,C)=>K(this,void 0,void 0,function*(){var E,_;this.abortController&&this.abortController.abort();const M=new AbortController;this.abortController=M,h==null||h();try{yield this.attemptConnection(C??o,a,u,M),this.abortController=void 0,S()}catch(A){if(this.regionUrlProvider&&A instanceof Rn&&A.reason!==un.Cancelled&&A.reason!==un.NotAllowed){let I=null;try{I=yield this.regionUrlProvider.getNextBestRegionUrl((E=this.abortController)===null||E===void 0?void 0:E.signal)}catch(N){if(N instanceof Rn&&(N.status===401||N.reason===un.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),k(N);return}}I&&!(!((_=this.abortController)===null||_===void 0)&&_.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(A.message,". Retrying with another region: ").concat(I),this.logContext),this.recreateEngine(),yield m(S,k,I)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,gN(A)),k(A))}else{let I=Ta.UNKNOWN_REASON;A instanceof Rn&&(I=gN(A)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,I),k(A)}}}),v=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new Ko((S,k)=>{m(S,k,v)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(o,a,u,f,h,m)=>K(this,void 0,void 0,function*(){var v,S,k;const C=yield u.join(o,a,{autoSubscribe:f.autoSubscribe,adaptiveStream:typeof h.adaptiveStream=="object"?!0:h.adaptiveStream,maxRetries:f.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:f.websocketTimeout,singlePeerConnection:h.singlePeerConnection},m.signal);let E=C.serverInfo;if(E||(E={version:C.serverVersion,region:C.serverRegion}),this.serverInfo=E,this.log.debug("connected to Livekit Server ".concat(Object.entries(E).map(_=>{let[M,A]=_;return"".concat(M,": ").concat(A)}).join(", ")),{room:(v=C.room)===null||v===void 0?void 0:v.name,roomSid:(S=C.room)===null||S===void 0?void 0:S.sid,identity:(k=C.participant)===null||k===void 0?void 0:k.identity}),!E.version)throw new Lre("unknown server version");return E.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),h.dynacast=!1),C}),this.applyJoinResponse=o=>{const a=o.participant;if(this.localParticipant.sid=a.sid,this.localParticipant.identity=a.identity,this.localParticipant.setEnabledPublishCodecs(o.enabledPublishCodecs),this.e2eeManager)try{this.e2eeManager.setSifTrailer(o.sifTrailer)}catch(u){this.log.error(u instanceof Error?u.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:u}))}this.handleParticipantUpdates([a,...o.otherParticipants]),o.room&&this.handleRoomUpdate(o.room)},this.attemptConnection=(o,a,u,f)=>K(this,void 0,void 0,function*(){var h,m;this.state===kn.Reconnecting||this.isResuming||!((h=this.engine)===null||h===void 0)&&h.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((m=this.regionUrlProvider)===null||m===void 0)&&m.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},fP),u),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const v=yield this.connectSignal(o,a,this.engine,this.connOptions,this.options,f);this.applyJoinResponse(v),this.setupLocalParticipantEvents(),this.emit(Ae.SignalConnected)}catch(v){yield this.engine.close(),this.recreateEngine();const S=new Rn("could not establish signal connection",un.ServerUnreachable);throw v instanceof Error&&(S.message="".concat(S.message,": ").concat(v.message)),v instanceof Rn&&(S.reason=v.reason,S.status=v.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:v})),S}if(f.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new Rn("Connection attempt aborted",un.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,f)}catch(v){throw yield this.engine.close(),this.recreateEngine(),v}Us()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),Us()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(kn.Connected),this.emit(Ae.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return K(n,[...a],void 0,function(){var f=this;let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var m,v,S,k;const C=yield f.disconnectLock.lock();try{if(f.state===kn.Disconnected){f.log.debug("already disconnected",f.logContext);return}if(f.log.info("disconnect from room",Object.assign({},f.logContext)),f.state===kn.Connecting||f.state===kn.Reconnecting||f.isResuming){const E="Abort connection attempt due to user initiated disconnect";f.log.warn(E,f.logContext),(m=f.abortController)===null||m===void 0||m.abort(E),(S=(v=f.connectFuture)===null||v===void 0?void 0:v.reject)===null||S===void 0||S.call(v,new Rn("Client initiated disconnect",un.Cancelled)),f.connectFuture=void 0}!((k=f.engine)===null||k===void 0)&&k.client.isDisconnected||(yield f.engine.client.sendLeave()),f.engine&&(yield f.engine.close()),f.handleDisconnect(h,Ta.CLIENT_INITIATED),f.engine=void 0}finally{C()}}()})},this.onPageLeave=()=>K(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>K(this,void 0,void 0,function*(){const o=[],a=$s();if(a&&a.os==="iOS"){const u="livekit-dummy-audio-el";let f=document.getElementById(u);if(!f){f=document.createElement("audio"),f.id=u,f.autoplay=!0,f.hidden=!0;const h=Nk();h.enabled=!0;const m=new MediaStream([h]);f.srcObject=m,document.addEventListener("visibilitychange",()=>{f&&(f.srcObject=document.hidden?null:m,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(f),this.once(Ae.Disconnected,()=>{f==null||f.remove(),f=null})}o.push(f)}this.remoteParticipants.forEach(u=>{u.audioTrackPublications.forEach(f=>{f.track&&f.track.attachedElements.forEach(h=>{o.push(h)})})});try{yield Promise.all([this.acquireAudioContext(),...o.map(u=>(u.muted=!1,u.play()))]),this.handleAudioPlaybackStarted()}catch(u){throw this.handleAudioPlaybackFailed(u),u}}),this.startVideo=()=>K(this,void 0,void 0,function*(){const o=[];for(const a of this.remoteParticipants.values())a.videoTrackPublications.forEach(u=>{var f;(f=u.track)===null||f===void 0||f.attachedElements.forEach(h=>{o.includes(h)||o.push(h)})});yield Promise.all(o.map(a=>a.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(a=>{a.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const o of this.remoteParticipants.values())this.handleParticipantDisconnected(o.identity,o);this.setAndEmitConnectionState(kn.Reconnecting)&&this.emit(Ae.Reconnecting)},this.handleSignalRestarted=o=>K(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(o.serverRegion),Object.assign(Object.assign({},this.logContext),{region:o.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(o);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(a){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:a}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:o.serverRegion}))}catch{return}this.setAndEmitConnectionState(kn.Connected),this.emit(Ae.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=o=>{o.forEach(a=>{var u;if(a.identity===this.localParticipant.identity){this.localParticipant.updateInfo(a);return}a.identity===""&&(a.identity=(u=this.sidToIdentity.get(a.sid))!==null&&u!==void 0?u:"");let f=this.remoteParticipants.get(a.identity);a.state===Zp.DISCONNECTED?this.handleParticipantDisconnected(a.identity,f):f=this.getOrCreateParticipant(a.identity,a)})},this.handleActiveSpeakersUpdate=o=>{const a=[],u={};o.forEach(f=>{if(u[f.sid]=!0,f.sid===this.localParticipant.sid)this.localParticipant.audioLevel=f.level,this.localParticipant.setIsSpeaking(!0),a.push(this.localParticipant);else{const h=this.getRemoteParticipantBySid(f.sid);h&&(h.audioLevel=f.level,h.setIsSpeaking(!0),a.push(h))}}),u[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(f=>{u[f.sid]||(f.audioLevel=0,f.setIsSpeaking(!1))}),this.activeSpeakers=a,this.emitWhenConnected(Ae.ActiveSpeakersChanged,a)},this.handleSpeakersChanged=o=>{const a=new Map;this.activeSpeakers.forEach(f=>{const h=this.remoteParticipants.get(f.identity);h&&h.sid!==f.sid||a.set(f.sid,f)}),o.forEach(f=>{let h=this.getRemoteParticipantBySid(f.sid);f.sid===this.localParticipant.sid&&(h=this.localParticipant),h&&(h.audioLevel=f.level,h.setIsSpeaking(f.active),f.active?a.set(f.sid,h):a.delete(f.sid))});const u=Array.from(a.values());u.sort((f,h)=>h.audioLevel-f.audioLevel),this.activeSpeakers=u,this.emitWhenConnected(Ae.ActiveSpeakersChanged,u)},this.handleStreamStateUpdate=o=>{o.streamStates.forEach(a=>{const u=this.getRemoteParticipantBySid(a.participantSid);if(!u)return;const f=u.getTrackPublicationBySid(a.trackSid);if(!f||!f.track)return;const h=Ee.streamStateFromProto(a.state);f.track.setStreamState(h),h!==f.track.streamState&&(u.emit(Ve.TrackStreamStateChanged,f,f.track.streamState),this.emitWhenConnected(Ae.TrackStreamStateChanged,f,f.track.streamState,u))})},this.handleSubscriptionPermissionUpdate=o=>{const a=this.getRemoteParticipantBySid(o.participantSid);if(!a)return;const u=a.getTrackPublicationBySid(o.trackSid);u&&u.setAllowed(o.allowed)},this.handleSubscriptionError=o=>{const a=Array.from(this.remoteParticipants.values()).find(f=>f.trackPublications.has(o.trackSid));if(!a)return;const u=a.getTrackPublicationBySid(o.trackSid);u&&u.setSubscriptionError(o.err)},this.handleDataPacket=(o,a)=>{const u=this.remoteParticipants.get(o.participantIdentity);if(o.value.case==="user")this.handleUserPacket(u,o.value.value,o.kind,a);else if(o.value.case==="transcription")this.handleTranscription(u,o.value.value);else if(o.value.case==="sipDtmf")this.handleSipDtmf(u,o.value.value);else if(o.value.case==="chatMessage")this.handleChatMessage(u,o.value.value);else if(o.value.case==="metrics")this.handleMetrics(o.value.value,u);else if(o.value.case==="streamHeader"||o.value.case==="streamChunk"||o.value.case==="streamTrailer")this.handleDataStream(o,a);else if(o.value.case==="rpcRequest"){const f=o.value.value;this.handleIncomingRpcRequest(o.participantIdentity,f.id,f.method,f.payload,f.responseTimeoutMs,f.version)}},this.handleUserPacket=(o,a,u,f)=>{this.emit(Ae.DataReceived,a.payload,o,u,a.topic,f),o==null||o.emit(Ve.DataReceived,a.payload,u,f)},this.handleSipDtmf=(o,a)=>{this.emit(Ae.SipDTMFReceived,a,o),o==null||o.emit(Ve.SipDTMFReceived,a)},this.handleTranscription=(o,a)=>{const u=a.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(a.transcribedParticipantIdentity),f=u==null?void 0:u.trackPublications.get(a.trackId),h=aie(a,this.transcriptionReceivedTimes);f==null||f.emit(Ye.TranscriptionReceived,h),u==null||u.emit(Ve.TranscriptionReceived,h,f),this.emit(Ae.TranscriptionReceived,h,u,f)},this.handleChatMessage=(o,a)=>{const u=lie(a);this.emit(Ae.ChatMessage,u,o)},this.handleMetrics=(o,a)=>{this.emit(Ae.MetricsReceived,o,a)},this.handleDataStream=(o,a)=>{this.incomingDataStreamManager.handleDataStreamPacket(o,a)},this.bufferedSegments=new Map,this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(Ae.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=o=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:o})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(Ae.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(Ae.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(Ae.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>K(this,void 0,void 0,function*(){var o;((o=$s())===null||o===void 0?void 0:o.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(Ae.MediaDevicesChanged)}),this.handleRoomUpdate=o=>{const a=this.roomInfo;this.roomInfo=o,a&&a.metadata!==o.metadata&&this.emitWhenConnected(Ae.RoomMetadataChanged,o.metadata),(a==null?void 0:a.activeRecording)!==o.activeRecording&&this.emitWhenConnected(Ae.RecordingStatusChanged,o.activeRecording)},this.handleConnectionQualityUpdate=o=>{o.updates.forEach(a=>{if(a.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(a.quality);return}const u=this.getRemoteParticipantBySid(a.participantSid);u&&u.setConnectionQuality(a.quality)})},this.onLocalParticipantMetadataChanged=o=>{this.emit(Ae.ParticipantMetadataChanged,o,this.localParticipant)},this.onLocalParticipantNameChanged=o=>{this.emit(Ae.ParticipantNameChanged,o,this.localParticipant)},this.onLocalAttributesChanged=o=>{this.emit(Ae.ParticipantAttributesChanged,o,this.localParticipant)},this.onLocalTrackMuted=o=>{this.emit(Ae.TrackMuted,o,this.localParticipant)},this.onLocalTrackUnmuted=o=>{this.emit(Ae.TrackUnmuted,o,this.localParticipant)},this.onTrackProcessorUpdate=o=>{var a;(a=o==null?void 0:o.onPublish)===null||a===void 0||a.call(o,this)},this.onLocalTrackPublished=o=>K(this,void 0,void 0,function*(){var a,u,f,h,m,v;(a=o.track)===null||a===void 0||a.on(Ye.TrackProcessorUpdate,this.onTrackProcessorUpdate),(u=o.track)===null||u===void 0||u.on(Ye.Restarted,this.onLocalTrackRestarted),(m=(h=(f=o.track)===null||f===void 0?void 0:f.getProcessor())===null||h===void 0?void 0:h.onPublish)===null||m===void 0||m.call(h,this),this.emit(Ae.LocalTrackPublished,o,this.localParticipant),gc(o.track)&&(yield o.track.checkForSilence())&&this.emit(Ae.LocalAudioSilenceDetected,o);const S=yield(v=o.track)===null||v===void 0?void 0:v.getDeviceId(!1),k=I1(o.source);k&&S&&S!==this.localParticipant.activeDeviceMap.get(k)&&(this.localParticipant.activeDeviceMap.set(k,S),this.emit(Ae.ActiveDeviceChanged,k,S))}),this.onLocalTrackUnpublished=o=>{var a,u;(a=o.track)===null||a===void 0||a.off(Ye.TrackProcessorUpdate,this.onTrackProcessorUpdate),(u=o.track)===null||u===void 0||u.off(Ye.Restarted,this.onLocalTrackRestarted),this.emit(Ae.LocalTrackUnpublished,o,this.localParticipant)},this.onLocalTrackRestarted=o=>K(this,void 0,void 0,function*(){const a=yield o.getDeviceId(!1),u=I1(o.source);u&&a&&a!==this.localParticipant.activeDeviceMap.get(u)&&(this.log.debug("local track restarted, setting ".concat(u," ").concat(a," active"),this.logContext),this.localParticipant.activeDeviceMap.set(u,a),this.emit(Ae.ActiveDeviceChanged,u,a))}),this.onLocalConnectionQualityChanged=o=>{this.emit(Ae.ConnectionQualityChanged,o,this.localParticipant)},this.onMediaDevicesError=(o,a)=>{this.emit(Ae.MediaDevicesError,o,a)},this.onLocalParticipantPermissionsChanged=o=>{this.emit(Ae.ParticipantPermissionsChanged,o,this.localParticipant)},this.onLocalChatMessageSent=o=>{this.emit(Ae.ChatMessage,o,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},Uie),e),this.log=Nc((r=this.options.loggerName)!==null&&r!==void 0?r:Ra.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},z3),e==null?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},$3),e==null?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},Fie),e==null?void 0:e.publishDefaults),this.maybeCreateEngine(),this.incomingDataStreamManager=new fse,this.outgoingDataStreamManager=new mse(this.engine,this.log),this.disconnectLock=new zs,this.localParticipant=new Sse("","",this.engine,this.options,this.rpcHandlers,this.outgoingDataStreamManager),(this.options.e2ee||this.options.encryption)&&this.setupE2EE(),this.engine.e2eeManager=this.e2eeManager,this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Yu(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Yu(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",Yu(this.options.audioOutput.deviceId)).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),Us()){const o=new AbortController;(s=navigator.mediaDevices)===null||s===void 0||s.addEventListener("devicechange",this.handleDeviceChange,{signal:o.signal}),j1.cleanupRegistry&&j1.cleanupRegistry.register(this,()=>{o.abort()})}}registerTextStreamHandler(e,n){return this.incomingDataStreamManager.registerTextStreamHandler(e,n)}unregisterTextStreamHandler(e){return this.incomingDataStreamManager.unregisterTextStreamHandler(e)}registerByteStreamHandler(e,n){return this.incomingDataStreamManager.registerByteStreamHandler(e,n)}unregisterByteStreamHandler(e){return this.incomingDataStreamManager.unregisterByteStreamHandler(e)}registerRpcMethod(e,n){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setE2EEEnabled(e){return K(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;const n=!!this.options.encryption,r=this.options.encryption||this.options.e2ee;r&&("e2eeManager"in r?(this.e2eeManager=r.e2eeManager,this.e2eeManager.isDataChannelEncryptionEnabled=n):this.e2eeManager=new bie(r,n),this.e2eeManager.on(Hu.ParticipantEncryptionStatusChanged,(i,s)=>{uie(s)&&(this.isE2EEEnabled=i),this.emit(Ae.ParticipantEncryptionStatusChanged,i,s)}),this.e2eeManager.on(Hu.EncryptionError,i=>this.emit(Ae.EncryptionError,i)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return K(this,void 0,void 0,function*(){return this.state===kn.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,n)=>{const r=i=>{i.sid!==""&&(this.engine.off(Je.RoomUpdate,r),e(i.sid))};this.engine.on(Je.RoomUpdate,r),this.once(Ae.Disconnected,()=>{this.engine.off(Je.RoomUpdate,r),n("Room disconnected before room server id was available")})})})}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new ase(this.options),this.engine.e2eeManager=this.e2eeManager,this.engine.on(Je.ParticipantUpdate,this.handleParticipantUpdates).on(Je.RoomUpdate,this.handleRoomUpdate).on(Je.SpeakersChanged,this.handleSpeakersChanged).on(Je.StreamStateChanged,this.handleStreamStateUpdate).on(Je.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(Je.SubscriptionError,this.handleSubscriptionError).on(Je.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(Je.MediaTrackAdded,(e,n,r)=>{this.onTrackAdded(e,n,r)}).on(Je.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(Je.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(Je.DataPacketReceived,this.handleDataPacket).on(Je.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(kn.SignalReconnecting)&&this.emit(Ae.SignalReconnecting)}).on(Je.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(kn.Connected)&&this.emit(Ae.Reconnected)}).on(Je.SignalResumed,()=>{this.bufferedEvents=[],(this.state===kn.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(Je.Restarting,this.handleRestarting).on(Je.SignalRestarted,this.handleSignalRestarted).on(Je.Offline,()=>{this.setAndEmitConnectionState(kn.Reconnecting)&&this.emit(Ae.Reconnecting)}).on(Je.DCBufferStatusChanged,(e,n)=>{this.emit(Ae.DCBufferStatusChanged,e,n)}).on(Je.LocalTrackSubscribed,e=>{const n=this.localParticipant.getTrackPublications().find(r=>{let{trackSid:i}=r;return i===e});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(Ve.LocalTrackSubscribed,n),this.emitWhenConnected(Ae.LocalTrackSubscribed,n,this.localParticipant)}).on(Je.RoomMoved,e=>{this.log.debug("room moved",e),e.room&&this.handleRoomUpdate(e.room),this.remoteParticipants.forEach((n,r)=>{this.handleParticipantDisconnected(r,n)}),this.emit(Ae.Moved,e.room.name),e.participant?this.handleParticipantUpdates([e.participant,...e.otherParticipants]):this.handleParticipantUpdates(e.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine),this.outgoingDataStreamManager&&this.outgoingDataStreamManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Si.getInstance().getDevices(e,n)}prepareConnection(e,n){return K(this,void 0,void 0,function*(){if(this.state===kn.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(E1(new URL(e))&&n){this.regionUrlProvider=new O1(e,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===kn.Disconnected&&(this.regionUrl=r,yield fetch(_1(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(_1(e),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return K(this,void 0,void 0,function*(){let r=()=>K(this,void 0,void 0,function*(){}),i;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new cl({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new cl({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new cl({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new cl({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>K(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new cl({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>K(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new cl({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new cl({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),r=()=>K(this,void 0,void 0,function*(){const s=this.engine.client.onLeave;s&&s(new gS({reason:Ta.CLIENT_INITIATED,action:em.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new cl({scenario:{case:"subscriberBandwidth",value:hf(n)}});break;case"leave-full-reconnect":i=new cl({scenario:{case:"leaveRequestFullReconnect",value:!0}})}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){return K(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return function*(){var a,u,f,h,m,v,S;let k=!0,C=!1;const E=o?{exact:i}:i;if(r==="audioinput"){C=s.localParticipant.audioTrackPublications.size===0;const _=(a=s.getActiveDevice(r))!==null&&a!==void 0?a:s.options.audioCaptureDefaults.deviceId;s.options.audioCaptureDefaults.deviceId=E;const M=Array.from(s.localParticipant.audioTrackPublications.values()).filter(I=>I.source===Ee.Source.Microphone);try{k=(yield Promise.all(M.map(I=>{var N;return(N=I.audioTrack)===null||N===void 0?void 0:N.setDeviceId(E)}))).every(I=>I===!0)}catch(I){throw s.options.audioCaptureDefaults.deviceId=_,I}const A=M.some(I=>{var N,O;return(O=(N=I.track)===null||N===void 0?void 0:N.isMuted)!==null&&O!==void 0?O:!1});k&&A&&(C=!0)}else if(r==="videoinput"){C=s.localParticipant.videoTrackPublications.size===0;const _=(u=s.getActiveDevice(r))!==null&&u!==void 0?u:s.options.videoCaptureDefaults.deviceId;s.options.videoCaptureDefaults.deviceId=E;const M=Array.from(s.localParticipant.videoTrackPublications.values()).filter(I=>I.source===Ee.Source.Camera);try{k=(yield Promise.all(M.map(I=>{var N;return(N=I.videoTrack)===null||N===void 0?void 0:N.setDeviceId(E)}))).every(I=>I===!0)}catch(I){throw s.options.videoCaptureDefaults.deviceId=_,I}const A=M.some(I=>{var N,O;return(O=(N=I.track)===null||N===void 0?void 0:N.isMuted)!==null&&O!==void 0?O:!1});k&&A&&(C=!0)}else if(r==="audiooutput"){if(C=!0,!T1()&&!s.options.webAudioMix||s.options.webAudioMix&&s.audioContext&&!("setSinkId"in s.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");s.options.webAudioMix&&(i=(f=yield Si.getInstance().normalizeDeviceId("audiooutput",i))!==null&&f!==void 0?f:""),(h=(S=s.options).audioOutput)!==null&&h!==void 0||(S.audioOutput={});const _=(m=s.getActiveDevice(r))!==null&&m!==void 0?m:s.options.audioOutput.deviceId;s.options.audioOutput.deviceId=i;try{s.options.webAudioMix&&((v=s.audioContext)===null||v===void 0||v.setSinkId(i)),yield Promise.all(Array.from(s.remoteParticipants.values()).map(M=>M.setAudioOutput({deviceId:i})))}catch(M){throw s.options.audioOutput.deviceId=_,M}}return C&&(s.localParticipant.activeDeviceMap.set(r,i),s.emit(Ae.ActiveDeviceChanged,r,i)),k}()})}setupLocalParticipantEvents(){this.localParticipant.on(Ve.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(Ve.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(Ve.AttributesChanged,this.onLocalAttributesChanged).on(Ve.TrackMuted,this.onLocalTrackMuted).on(Ve.TrackUnmuted,this.onLocalTrackUnmuted).on(Ve.LocalTrackPublished,this.onLocalTrackPublished).on(Ve.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(Ve.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(Ve.MediaDevicesError,this.onMediaDevicesError).on(Ve.AudioStreamAcquired,this.startAudio).on(Ve.ChatMessage,this.onLocalChatMessageSent).on(Ve.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,r){if(this.state===kn.Connecting||this.state===kn.Reconnecting){const m=()=>{this.log.debug("deferring on track for later",{mediaTrackId:e.id,mediaStreamId:n.id,tracksInStream:n.getTracks().map(S=>S.id)}),this.onTrackAdded(e,n,r),v()},v=()=>{this.off(Ae.Reconnected,m),this.off(Ae.Connected,m),this.off(Ae.Disconnected,v)};this.once(Ae.Reconnected,m),this.once(Ae.Connected,m),this.once(Ae.Disconnected,v);return}if(this.state===kn.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const i=Yre(n.id),s=i[0];let o=i[1],a=e.id;if(o&&o.startsWith("TR")&&(a=o),s===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const u=Array.from(this.remoteParticipants.values()).find(m=>m.sid===s);if(!u){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(s),this.logContext);return}if(!a.startsWith("TR")){const m=this.engine.getTrackIdForReceiver(r);if(!m){this.log.error("Tried to add a track whose 'sid' could not be found for a participant, that's not present. Sid: ".concat(s),this.logContext);return}a=m}a.startsWith("TR")||this.log.warn("Tried to add a track whose 'sid' could not be determined for a participant, that's not present. Sid: ".concat(s,", streamId: ").concat(o,", trackId: ").concat(a),Object.assign(Object.assign({},this.logContext),{rpID:s,streamId:o,trackId:a}));let f;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?f=this.options.adaptiveStream:f={});const h=u.addSubscribedMediaTrack(e,a,n,r,f);h!=null&&h.isEncrypted&&!this.e2eeManager&&this.emit(Ae.EncryptionError,new Error("Encrypted ".concat(h.source," track received from participant ").concat(u.sid,", but room does not have encryption enabled!")))}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.incomingDataStreamManager.clearHandlersAndControllers(),this.state!==kn.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(i=>{i.trackPublications.forEach(s=>{i.unpublishTrack(s.trackSid)})}),this.localParticipant.trackPublications.forEach(i=>{var s,o,a;i.track&&this.localParticipant.unpublishTrack(i.track,e),e?((s=i.track)===null||s===void 0||s.detach(),(o=i.track)===null||o===void 0||o.stop()):(a=i.track)===null||a===void 0||a.stopMonitor()}),this.localParticipant.off(Ve.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(Ve.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(Ve.AttributesChanged,this.onLocalAttributesChanged).off(Ve.TrackMuted,this.onLocalTrackMuted).off(Ve.TrackUnmuted,this.onLocalTrackUnmuted).off(Ve.LocalTrackPublished,this.onLocalTrackPublished).off(Ve.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(Ve.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(Ve.MediaDevicesError,this.onMediaDevicesError).off(Ve.AudioStreamAcquired,this.startAudio).off(Ve.ChatMessage,this.onLocalChatMessageSent).off(Ve.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),Us()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(kn.Disconnected),this.emit(Ae.Disconnected,n)}}}handleParticipantDisconnected(e,n){var r;this.remoteParticipants.delete(e),n&&(this.incomingDataStreamManager.validateParticipantHasNoActiveDataStreams(e),n.trackPublications.forEach(i=>{n.unpublishTrack(i.trackSid,!0)}),this.emit(Ae.ParticipantDisconnected,n),n.setDisconnected(),(r=this.localParticipant)===null||r===void 0||r.handleParticipantDisconnected(n.identity))}handleIncomingRpcRequest(e,n,r,i,s,o){return K(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,n),o!==1){yield this.engine.publishRpcResponse(e,n,null,Er.builtIn("UNSUPPORTED_VERSION"));return}const a=this.rpcHandlers.get(r);if(!a){yield this.engine.publishRpcResponse(e,n,null,Er.builtIn("UNSUPPORTED_METHOD"));return}let u=null,f=null;try{const h=yield a({requestId:n,callerIdentity:e,payload:i,responseTimeout:s});hP(h)>W3?(u=Er.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(r))):f=h}catch(h){h instanceof Er?u=h:(console.warn("Uncaught error returned by RPC handler for ".concat(r,". Returning APPLICATION_ERROR instead."),h),u=Er.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,n,f,u)})}selectDefaultDevices(){return K(this,void 0,void 0,function*(){var e,n,r;const i=Si.getInstance().previousDevices,s=yield Si.getInstance().getDevices(void 0,!1),o=$s();if((o==null?void 0:o.name)==="Chrome"&&o.os!=="iOS")for(let u of s){const f=i.find(h=>h.deviceId===u.deviceId);f&&f.label!==""&&f.kind===u.kind&&f.label!==u.label&&this.getActiveDevice(u.kind)==="default"&&this.emit(Ae.ActiveDeviceChanged,u.kind,u.deviceId)}const a=["audiooutput","audioinput","videoinput"];for(let u of a){const f=fie(u),h=this.localParticipant.getTrackPublication(f);if(h&&(!((e=h.track)===null||e===void 0)&&e.isUserProvided))continue;const m=s.filter(S=>S.kind===u),v=this.getActiveDevice(u);if(v===((n=i.filter(S=>S.kind===u)[0])===null||n===void 0?void 0:n.deviceId)&&m.length>0&&((r=m[0])===null||r===void 0?void 0:r.deviceId)!==v){yield this.switchActiveDevice(u,m[0].deviceId);continue}u==="audioinput"&&!xy()||u==="videoinput"||m.length>0&&!m.find(S=>S.deviceId===this.getActiveDevice(u))&&(u!=="audiooutput"||!xy())&&(yield this.switchActiveDevice(u,m[0].deviceId))}})}acquireAudioContext(){return K(this,void 0,void 0,function*(){var e,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=U3())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),ds(200)])}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(Ae.AudioPlaybackStatusChanged,r))})}createParticipant(e,n){var r;let i;return n?i=hw.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):i=new hw(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(s=>this.log.warn("Could not set audio output: ".concat(s.message),this.logContext)),i}getOrCreateParticipant(e,n){if(this.remoteParticipants.has(e)){const i=this.remoteParticipants.get(e);return n&&i.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),i}const r=this.createParticipant(e,n);return this.remoteParticipants.set(e,r),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(Ae.ParticipantConnected,r),r.on(Ve.TrackPublished,i=>{this.emitWhenConnected(Ae.TrackPublished,i,r)}).on(Ve.TrackSubscribed,(i,s)=>{i.kind===Ee.Kind.Audio?(i.on(Ye.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(Ye.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===Ee.Kind.Video&&(i.on(Ye.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(Ye.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(Ae.TrackSubscribed,i,s,r)}).on(Ve.TrackUnpublished,i=>{this.emit(Ae.TrackUnpublished,i,r)}).on(Ve.TrackUnsubscribed,(i,s)=>{this.emit(Ae.TrackUnsubscribed,i,s,r)}).on(Ve.TrackMuted,i=>{this.emitWhenConnected(Ae.TrackMuted,i,r)}).on(Ve.TrackUnmuted,i=>{this.emitWhenConnected(Ae.TrackUnmuted,i,r)}).on(Ve.ParticipantMetadataChanged,i=>{this.emitWhenConnected(Ae.ParticipantMetadataChanged,i,r)}).on(Ve.ParticipantNameChanged,i=>{this.emitWhenConnected(Ae.ParticipantNameChanged,i,r)}).on(Ve.AttributesChanged,i=>{this.emitWhenConnected(Ae.ParticipantAttributesChanged,i,r)}).on(Ve.ConnectionQualityChanged,i=>{this.emitWhenConnected(Ae.ConnectionQualityChanged,i,r)}).on(Ve.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(Ae.ParticipantPermissionsChanged,i,r)}).on(Ve.TrackSubscriptionStatusChanged,(i,s)=>{this.emitWhenConnected(Ae.TrackSubscriptionStatusChanged,i,s,r)}).on(Ve.TrackSubscriptionFailed,(i,s)=>{this.emit(Ae.TrackSubscriptionFailed,i,r,s)}).on(Ve.TrackSubscriptionPermissionChanged,(i,s)=>{this.emitWhenConnected(Ae.TrackSubscriptionPermissionChanged,i,s,r)}).on(Ve.Active,()=>{this.emitWhenConnected(Ae.ParticipantActive,r),r.kind===yy.AGENT&&this.localParticipant.setActiveAgent(r)}),n&&r.updateInfo(n),r}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((r,i)=>(r.push(...i.getTrackPublications()),r),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const n of e.videoTrackPublications.values())n.isSubscribed&&cie(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(e){const n=this.sidToIdentity.get(e);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=Di.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Ta.STATE_MISMATCH))):e=0},kse)}clearConnectionReconcile(){this.connectionReconcileInterval&&Di.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(Ae.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,r]=e;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.state===kn.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,r]);else if(this.state===kn.Connected)return this.emit(e,...r);return!1}simulateParticipants(e){return K(this,void 0,void 0,function*(){var n,r;const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),s=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new fS({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:ir.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new qf({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(Ae.SignalConnected),this.emit(Ae.Connected),this.setAndEmitConnectionState(kn.Connected),i.video){const o=new L1(Ee.Kind.Video,new Wp({source:Kr.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Ca.AUDIO,name:"video-dummy"}),new fw(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:mN(160*((n=s.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(Ve.LocalTrackPublished,o)}if(i.audio){const o=new L1(Ee.Kind.Audio,new Wp({source:Kr.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Ca.AUDIO}),new dw(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Nk(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(Ve.LocalTrackPublished,o)}for(let o=0;o<s.count-1;o+=1){let a=new qf({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(o),state:Zp.ACTIVE,tracks:[],joinedAt:ir.parse(Date.now())});const u=this.getOrCreateParticipant(a.identity,a);if(s.video){const f=mN(160*((r=s.aspectRatios[o%s.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),h=new Wp({source:Kr.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Ca.AUDIO});u.addSubscribedMediaTrack(f,h.sid,new MediaStream([f]),new RTCRtpReceiver),a.tracks=[...a.tracks,h]}if(s.audio){const f=Nk(),h=new Wp({source:Kr.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Ca.AUDIO});u.addSubscribedMediaTrack(f,h.sid,new MediaStream([f]),new RTCRtpReceiver),a.tracks=[...a.tracks,h]}u.updateInfo(a)}})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e!==Ae.ActiveSpeakersChanged&&e!==Ae.TranscriptionReceived){const s=Z3(r).filter(o=>o!==void 0);(e===Ae.TrackSubscribed||e===Ae.TrackUnsubscribed)&&this.log.trace("subscribe trace: ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:s})),this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:s}))}return super.emit(e,...r)}};Mm.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(t=>{t()});function Z3(t){return t.map(e=>{if(e)return Array.isArray(e)?Z3(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var xa;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(xa||(xa={}));class md extends Ol.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=xa.IDLE,this.logs=[],this.options={},this.url=e,this.token=n,this.name=this.constructor.name,this.room=new Mm(r.roomOptions),this.connectOptions=r.connectOptions,this.options=r}run(e){return K(this,void 0,void 0,function*(){if(this.status!==xa.IDLE)throw Error("check is running already");this.setStatus(xa.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==xa.SKIPPED&&this.setStatus(this.isSuccess()?xa.SUCCESS:xa.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return K(this,void 0,void 0,function*(){return this.room.state===kn.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return K(this,void 0,void 0,function*(){this.room&&this.room.state!==kn.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(xa.SKIPPED)}switchProtocol(e){return K(this,void 0,void 0,function*(){let n=!1,r=!1;if(this.room.on(Ae.Reconnecting,()=>{n=!0}),this.room.once(Ae.Reconnected,()=>{r=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(s=>setTimeout(s,1e3)),!n)return;const i=Date.now()+1e4;for(;Date.now()<i;){if(r)return;yield ds(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class Tse extends md{get description(){return"Cloud regions"}perform(){return K(this,void 0,void 0,function*(){const e=new O1(this.url,this.token);if(!e.isCloud()){this.skip();return}const n=[],r=new Set;for(let s=0;s<3;s++){const o=yield e.getNextBestRegionUrl();if(!o)break;if(r.has(o))continue;r.add(o);const a=yield this.checkCloudRegion(o);this.appendMessage("".concat(a.region," RTT: ").concat(a.rtt,"ms, duration: ").concat(a.duration,"ms")),n.push(a)}n.sort((s,o)=>(s.duration-o.duration)*.5+(s.rtt-o.rtt)*.5);const i=n[0];this.bestStats=i,this.appendMessage("best Cloud region: ".concat(i.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return K(this,void 0,void 0,function*(){var n,r;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const i=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!i)throw new Error("Region not found");const s=yield this.room.localParticipant.streamText({topic:"test"}),o=1e3,u=1e6/o,f="A".repeat(o),h=Date.now();for(let k=0;k<u;k++)yield s.write(f);yield s.close();const m=Date.now(),v=yield(r=this.room.engine.pcManager)===null||r===void 0?void 0:r.publisher.getStats(),S={region:i,rtt:1e4,duration:m-h};return v==null||v.forEach(k=>{k.type==="candidate-pair"&&k.nominated&&(S.rtt=k.currentRoundTripTime*1e3)}),yield this.disconnect(),S})}}const zk=1e4;class Ese extends md{get description(){return"Connection via UDP vs TCP"}perform(){return K(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-n.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const r=this.bestStats;this.appendMessage("upstream bitrate: ".concat((r.bitrateTotal/r.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((r.rttTotal/r.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((r.jitterTotal/r.count*1e3).toFixed(2)," ms")),r.packetsLost>0&&this.appendWarning("packets lost: ".concat((r.packetsLost/r.packetsSent*100).toFixed(2),"%")),r.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((r.qualityLimitationDurations.bandwidth/(zk/1e3)*100).toFixed(2),"%")),r.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((r.qualityLimitationDurations.cpu/(zk/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return K(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const r=n.getContext("2d");if(!r)throw new Error("Could not get canvas context");let i=0;const s=()=>{i=(i+1)%360,r.fillStyle="hsl(".concat(i,", 100%, 50%)"),r.fillRect(0,0,n.width,n.height),requestAnimationFrame(s)};s();const a=n.captureStream(30).getVideoTracks()[0],f=(yield this.room.localParticipant.publishTrack(a,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,h={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},m=setInterval(()=>K(this,void 0,void 0,function*(){const v=yield f.getRTCStatsReport();v==null||v.forEach(S=>{S.type==="outbound-rtp"?(h.packetsSent=S.packetsSent,h.qualityLimitationDurations=S.qualityLimitationDurations,h.bitrateTotal+=S.targetBitrate,h.count++):S.type==="remote-inbound-rtp"&&(h.packetsLost=S.packetsLost,h.rttTotal+=S.roundTripTime,h.jitterTotal+=S.jitter)})}),1e3);return yield new Promise(v=>setTimeout(v,zk)),clearInterval(m),a.stop(),n.remove(),yield this.disconnect(),h})}}class _se extends md{get description(){return"Can publish audio"}perform(){return K(this,void 0,void 0,function*(){var e;const n=yield this.connect(),r=yield bse();if(yield F3(r,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(r),yield new Promise(a=>setTimeout(a,3e3));const s=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!s)throw new Error("Could not get RTCStats");let o=0;if(s.forEach(a=>{a.type==="outbound-rtp"&&(a.kind==="audio"||!a.kind&&a.mediaType==="audio")&&(o=a.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," audio packets"))})}}class Pse extends md{get description(){return"Can publish video"}perform(){return K(this,void 0,void 0,function*(){var e;const n=yield this.connect(),r=yield J3();yield this.checkForVideo(r.mediaStreamTrack),n.localParticipant.publishTrack(r),yield new Promise(o=>setTimeout(o,5e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let s=0;if(i.forEach(o=>{o.type==="outbound-rtp"&&(o.kind==="video"||!o.kind&&o.mediaType==="video")&&(s+=o.packetsSent)}),s===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(s," video packets"))})}checkForVideo(e){return K(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(e.clone());const r=document.createElement("video");r.srcObject=n,r.muted=!0,r.autoplay=!0,r.playsInline=!0,r.setAttribute("playsinline","true"),document.body.appendChild(r),yield new Promise(i=>{r.onplay=()=>{setTimeout(()=>{var s,o,a,u;const f=document.createElement("canvas"),h=e.getSettings(),m=(o=(s=h.width)!==null&&s!==void 0?s:r.videoWidth)!==null&&o!==void 0?o:1280,v=(u=(a=h.height)!==null&&a!==void 0?a:r.videoHeight)!==null&&u!==void 0?u:720;f.width=m,f.height=v;const S=f.getContext("2d");S.drawImage(r,0,0);const C=S.getImageData(0,0,f.width,f.height).data;let E=!0;for(let _=0;_<C.length;_+=4)if(C[_]!==0||C[_+1]!==0||C[_+2]!==0){E=!1;break}E?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),i()},1e3)},r.play()}),n.getTracks().forEach(i=>i.stop()),r.remove()})}}class Rse extends md{get description(){return"Resuming connection after interruption"}perform(){return K(this,void 0,void 0,function*(){var e;const n=yield this.connect();let r=!1,i=!1,s;const o=new Promise(f=>{setTimeout(f,5e3),s=f}),a=()=>{r=!0};n.on(Ae.SignalReconnecting,a).on(Ae.Reconnecting,a).on(Ae.Reconnected,()=>{i=!0,s(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const u=n.engine.client.onClose;if(u&&u(""),yield o,r){if(!i||n.state!==kn.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class Ise extends md{get description(){return"Can connect via TURN"}perform(){return K(this,void 0,void 0,function*(){var e,n;const r=new lP,i=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});let s=!1,o=!1,a=!1;for(let u of i.iceServers)for(let f of u.urls)f.startsWith("turn:")?(o=!0,a=!0):f.startsWith("turns:")&&(o=!0,a=!0,s=!0),f.startsWith("stun:")&&(a=!0);a?o&&!s&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||o?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(u=>setTimeout(u,0)))})}}class Mse extends md{get description(){return"Establishing WebRTC connection"}perform(){return K(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(Ae.SignalConnected,()=>{var r;const i=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(s,o)=>{if(s.candidate){const a=new RTCIceCandidate(s);let u="".concat(a.protocol," ").concat(a.address,":").concat(a.port," ").concat(a.type);a.address&&(Ase(a.address)?u+=" (private)":a.protocol==="tcp"&&a.tcpType==="passive"?(e=!0,u+=" (passive)"):a.protocol==="udp"&&(n=!0)),this.appendMessage(u)}i&&i(s,o)},!((r=this.room.engine.pcManager)===null||r===void 0)&&r.subscriber&&(this.room.engine.pcManager.subscriber.onIceCandidateError=s=>{s instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(s.errorCode," ").concat(s.errorText," ").concat(s.url))})});try{yield this.connect(),en.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function Ase(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class Nse extends md{get description(){return"Connecting to signal connection via WebSocket"}perform(){return K(this,void 0,void 0,function*(){var e,n,r;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new lP;const s=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});this.appendMessage("Connected to server, version ".concat(s.serverVersion,".")),((e=s.serverInfo)===null||e===void 0?void 0:e.edition)===UU.Cloud&&(!((n=s.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=s.serverInfo)===null||r===void 0?void 0:r.region)),yield i.close()})}}class Hhe extends Ol.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=n,this.options=r}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:xa.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==xa.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return K(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new e(this.url,this.token,this.options),i=o=>{this.updateCheck(n,o)};r.on("update",i);const s=yield r.run();return r.off("update",i),s})}checkWebsocket(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(Nse)})}checkWebRTC(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(Mse)})}checkTURN(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(Ise)})}checkReconnect(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(Rse)})}checkPublishAudio(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(_se)})}checkPublishVideo(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(Pse)})}checkConnectionProtocol(){return K(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(Ese);if(e.data&&"protocol"in e.data){const n=e.data;this.options.protocol=n.protocol}return e})}checkCloudRegion(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(Tse)})}}function an(t,e,n){return(e=Dse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ose(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dse(t){var e=Ose(t,"string");return typeof e=="symbol"?e:e+""}new TextEncoder;new TextDecoder;class fs extends Error{constructor(e,n){var r;super(e,n),an(this,"code","ERR_JOSE_GENERIC"),this.name=this.constructor.name,(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,this.constructor)}}an(fs,"code","ERR_JOSE_GENERIC");class Lse extends fs{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:r,reason:i,payload:n}}),an(this,"code","ERR_JWT_CLAIM_VALIDATION_FAILED"),an(this,"claim",void 0),an(this,"reason",void 0),an(this,"payload",void 0),this.claim=r,this.reason=i,this.payload=n}}an(Lse,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");class jse extends fs{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:r,reason:i,payload:n}}),an(this,"code","ERR_JWT_EXPIRED"),an(this,"claim",void 0),an(this,"reason",void 0),an(this,"payload",void 0),this.claim=r,this.reason=i,this.payload=n}}an(jse,"code","ERR_JWT_EXPIRED");class Fse extends fs{constructor(){super(...arguments),an(this,"code","ERR_JOSE_ALG_NOT_ALLOWED")}}an(Fse,"code","ERR_JOSE_ALG_NOT_ALLOWED");class Use extends fs{constructor(){super(...arguments),an(this,"code","ERR_JOSE_NOT_SUPPORTED")}}an(Use,"code","ERR_JOSE_NOT_SUPPORTED");class Vse extends fs{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"decryption operation failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),an(this,"code","ERR_JWE_DECRYPTION_FAILED")}}an(Vse,"code","ERR_JWE_DECRYPTION_FAILED");class Bse extends fs{constructor(){super(...arguments),an(this,"code","ERR_JWE_INVALID")}}an(Bse,"code","ERR_JWE_INVALID");class zse extends fs{constructor(){super(...arguments),an(this,"code","ERR_JWS_INVALID")}}an(zse,"code","ERR_JWS_INVALID");class $se extends fs{constructor(){super(...arguments),an(this,"code","ERR_JWT_INVALID")}}an($se,"code","ERR_JWT_INVALID");class Wse extends fs{constructor(){super(...arguments),an(this,"code","ERR_JWK_INVALID")}}an(Wse,"code","ERR_JWK_INVALID");class Hse extends fs{constructor(){super(...arguments),an(this,"code","ERR_JWKS_INVALID")}}an(Hse,"code","ERR_JWKS_INVALID");class qse extends fs{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"no applicable key found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),an(this,"code","ERR_JWKS_NO_MATCHING_KEY")}}an(qse,"code","ERR_JWKS_NO_MATCHING_KEY");class Kse extends fs{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"multiple matching keys found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),an(this,Symbol.asyncIterator,void 0),an(this,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS")}}an(Kse,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS");class Gse extends fs{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"request timed out",n=arguments.length>1?arguments[1]:void 0;super(e,n),an(this,"code","ERR_JWKS_TIMEOUT")}}an(Gse,"code","ERR_JWKS_TIMEOUT");class Yse extends fs{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"signature verification failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),an(this,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED")}}an(Yse,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED");function Qse(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var F1={exports:{}},Jse=F1.exports,jN;function Xse(){return jN||(jN=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(Jse,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},o=null;function a(C,E){var _=C[E];if(typeof _.bind=="function")return _.bind(C);try{return Function.prototype.bind.call(_,C)}catch{return function(){return Function.prototype.apply.apply(_,[C,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function f(C){return C==="debug"&&(C="log"),typeof console===n?!1:C==="trace"&&r?u:console[C]!==void 0?a(console,C):console.log!==void 0?a(console,"log"):e}function h(){for(var C=this.getLevel(),E=0;E<i.length;E++){var _=i[E];this[_]=E<C?e:this.methodFactory(_,C,this.name)}if(this.log=this.debug,typeof console===n&&C<this.levels.SILENT)return"No console available for logging"}function m(C){return function(){typeof console!==n&&(h.call(this),this[C].apply(this,arguments))}}function v(C,E,_){return f(C)||m.apply(this,arguments)}function S(C,E){var _=this,M,A,I,N="loglevel";typeof C=="string"?N+=":"+C:typeof C=="symbol"&&(N=void 0);function O(J){var Y=(i[J]||"silent").toUpperCase();if(!(typeof window===n||!N)){try{window.localStorage[N]=Y;return}catch{}try{window.document.cookie=encodeURIComponent(N)+"="+Y+";"}catch{}}}function j(){var J;if(!(typeof window===n||!N)){try{J=window.localStorage[N]}catch{}if(typeof J===n)try{var Y=window.document.cookie,me=encodeURIComponent(N),ue=Y.indexOf(me+"=");ue!==-1&&(J=/^([^;]+)/.exec(Y.slice(ue+me.length+1))[1])}catch{}return _.levels[J]===void 0&&(J=void 0),J}}function V(){if(!(typeof window===n||!N)){try{window.localStorage.removeItem(N)}catch{}try{window.document.cookie=encodeURIComponent(N)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function z(J){var Y=J;if(typeof Y=="string"&&_.levels[Y.toUpperCase()]!==void 0&&(Y=_.levels[Y.toUpperCase()]),typeof Y=="number"&&Y>=0&&Y<=_.levels.SILENT)return Y;throw new TypeError("log.setLevel() called with invalid level: "+J)}_.name=C,_.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},_.methodFactory=E||v,_.getLevel=function(){return I??A??M},_.setLevel=function(J,Y){return I=z(J),Y!==!1&&O(I),h.call(_)},_.setDefaultLevel=function(J){A=z(J),j()||_.setLevel(J,!1)},_.resetLevel=function(){I=null,V(),h.call(_)},_.enableAll=function(J){_.setLevel(_.levels.TRACE,J)},_.disableAll=function(J){_.setLevel(_.levels.SILENT,J)},_.rebuild=function(){if(o!==_&&(M=z(o.getLevel())),h.call(_),o===_)for(var J in s)s[J].rebuild()},M=z(o?o.getLevel():"WARN");var W=j();W!=null&&(I=z(W)),h.call(_)}o=new S,o.getLogger=function(C){if(typeof C!="symbol"&&typeof C!="string"||C==="")throw new TypeError("You must supply a name when creating a logger.");var E=s[C];return E||(E=s[C]=new S(C,o.methodFactory)),E};var k=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=k),o},o.getLoggers=function(){return s},o.default=o,o})}(F1)),F1.exports}var Zse=Xse();const eoe=Qse(Zse);var U1=function(t,e){return U1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},U1(t,e)};function Lc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");U1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function toe(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{f(r.next(h))}catch(m){o(m)}}function u(h){try{f(r.throw(h))}catch(m){o(m)}}function f(h){h.done?s(h.value):i(h.value).then(a,u)}f((r=r.apply(t,[])).next())})}function e4(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(f){return function(h){return u([f,h])}}function u(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){n.label=f[1];break}if(f[0]===6&&n.label<s[1]){n.label=s[1],s=f;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(f);break}s[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(h){f=[6,h],i=0}finally{r=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Am(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pw(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function mw(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function sm(t){return this instanceof sm?(this.v=t,this):new sm(t)}function noe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(S){return function(k){return Promise.resolve(k).then(S,m)}}function a(S,k){r[S]&&(i[S]=function(C){return new Promise(function(E,_){s.push([S,C,E,_])>1||u(S,C)})},k&&(i[S]=k(i[S])))}function u(S,k){try{f(r[S](k))}catch(C){v(s[0][3],C)}}function f(S){S.value instanceof sm?Promise.resolve(S.value.v).then(h,m):v(s[0][2],S)}function h(S){u("next",S)}function m(S){u("throw",S)}function v(S,k){S(k),s.shift(),s.length&&u(s[0][0],s[0][1])}}function roe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Am=="function"?Am(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(f){s({value:f,done:a})},o)}}function oi(t){return typeof t=="function"}function gP(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var $k=gP(function(t){return function(e){t(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,r){return r+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function gw(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var t0=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Am(o),u=a.next();!u.done;u=a.next()){var f=u.value;f.remove(this)}}catch(C){e={error:C}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else o.remove(this);var h=this.initialTeardown;if(oi(h))try{h()}catch(C){s=C instanceof $k?C.errors:[C]}var m=this._finalizers;if(m){this._finalizers=null;try{for(var v=Am(m),S=v.next();!S.done;S=v.next()){var k=S.value;try{FN(k)}catch(C){s=s??[],C instanceof $k?s=mw(mw([],pw(s)),pw(C.errors)):s.push(C)}}}catch(C){r={error:C}}finally{try{S&&!S.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}}if(s)throw new $k(s)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)FN(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&gw(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&gw(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),t4=t0.EMPTY;function n4(t){return t instanceof t0||t&&"closed"in t&&oi(t.remove)&&oi(t.add)&&oi(t.unsubscribe)}function FN(t){oi(t)?t():t.unsubscribe()}var ioe={Promise:void 0},soe={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,mw([t,e],pw(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function r4(t){soe.setTimeout(function(){throw t})}function UN(){}function Ix(t){t()}var vP=function(t){Lc(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,n4(n)&&n.add(r)):r.destination=loe,r}return e.create=function(n,r,i){return new V1(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(t0),ooe=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){Qb(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){Qb(r)}else Qb(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Qb(n)}},t}(),V1=function(t){Lc(e,t);function e(n,r,i){var s=t.call(this)||this,o;return oi(n)||!n?o={next:n??void 0,error:r??void 0,complete:i??void 0}:o=n,s.destination=new ooe(o),s}return e}(vP);function Qb(t){r4(t)}function aoe(t){throw t}var loe={closed:!0,next:UN,error:aoe,complete:UN},yP=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function i4(t){return t}function coe(t){return t.length===0?i4:t.length===1?t[0]:function(e){return t.reduce(function(n,r){return r(n)},e)}}var Hs=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,s=doe(e)?e:new V1(e,n,r);return Ix(function(){var o=i,a=o.operator,u=o.source;s.add(a?a.call(s,u):u?i._subscribe(s):i._trySubscribe(s))}),s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=VN(n),new n(function(i,s){var o=new V1({next:function(a){try{e(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});r.subscribe(o)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[yP]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return coe(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=VN(e),new e(function(r,i){var s;n.subscribe(function(o){return s=o},function(o){return i(o)},function(){return r(s)})})},t.create=function(e){return new t(e)},t}();function VN(t){var e;return(e=t??ioe.Promise)!==null&&e!==void 0?e:Promise}function uoe(t){return t&&oi(t.next)&&oi(t.error)&&oi(t.complete)}function doe(t){return t&&t instanceof vP||uoe(t)&&n4(t)}function foe(t){return oi(t==null?void 0:t.lift)}function n0(t){return function(e){if(foe(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function wy(t,e,n,r,i){return new hoe(t,e,n,r,i)}var hoe=function(t){Lc(e,t);function e(n,r,i,s,o,a){var u=t.call(this,n)||this;return u.onFinalize=o,u.shouldUnsubscribe=a,u._next=r?function(f){try{r(f)}catch(h){n.error(h)}}:t.prototype._next,u._error=s?function(f){try{s(f)}catch(h){n.error(h)}finally{this.unsubscribe()}}:t.prototype._error,u._complete=i?function(){try{i()}catch(f){n.error(f)}finally{this.unsubscribe()}}:t.prototype._complete,u}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(vP),poe=gP(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),s4=function(t){Lc(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new BN(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new poe},e.prototype.next=function(n){var r=this;Ix(function(){var i,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=Am(r.currentObservers),a=o.next();!a.done;a=o.next()){var u=a.value;u.next(n)}}catch(f){i={error:f}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;Ix(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;Ix(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,s=i.hasError,o=i.isStopped,a=i.observers;return s||o?t4:(this.currentObservers=null,a.push(n),new t0(function(){r.currentObservers=null,gw(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,s=r.thrownError,o=r.isStopped;i?n.error(s):o&&n.complete()},e.prototype.asObservable=function(){var n=new Hs;return n.source=this,n},e.create=function(n,r){return new BN(n,r)},e}(Hs),BN=function(t){Lc(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:t4},e}(s4),moe=function(t){Lc(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,s=n._value;if(r)throw i;return this._throwIfClosed(),s},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(s4),goe={now:function(){return Date.now()}},voe=function(t){Lc(e,t);function e(n,r){return t.call(this)||this}return e.prototype.schedule=function(n,r){return this},e}(t0),zN={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,mw([t,e],pw(n)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},yoe=function(t){Lc(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var s=this.id,o=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(o,s,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,r),this},e.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),zN.setInterval(n.flush.bind(n,this),i)},e.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&zN.clearInterval(r)},e.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,r){var i=!1,s;try{this.work(n)}catch(o){i=!0,s=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,gw(s,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(voe),$N=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(r,n)},t.now=goe.now,t}(),boe=function(t){Lc(e,t);function e(n,r){r===void 0&&(r=$N.now);var i=t.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},e}($N);new boe(yoe);function xoe(t){return t&&oi(t.schedule)}function woe(t){return t[t.length-1]}function Soe(t){return xoe(woe(t))?t.pop():void 0}var o4=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function a4(t){return oi(t==null?void 0:t.then)}function l4(t){return oi(t[yP])}function c4(t){return Symbol.asyncIterator&&oi(t==null?void 0:t[Symbol.asyncIterator])}function u4(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Coe(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var d4=Coe();function f4(t){return oi(t==null?void 0:t[d4])}function h4(t){return noe(this,arguments,function(){var e,n,r,i;return e4(this,function(s){switch(s.label){case 0:e=t.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,sm(e.read())];case 3:return n=s.sent(),r=n.value,i=n.done,i?[4,sm(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,sm(r)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function p4(t){return oi(t==null?void 0:t.getReader)}function r0(t){if(t instanceof Hs)return t;if(t!=null){if(l4(t))return koe(t);if(o4(t))return Toe(t);if(a4(t))return Eoe(t);if(c4(t))return m4(t);if(f4(t))return _oe(t);if(p4(t))return Poe(t)}throw u4(t)}function koe(t){return new Hs(function(e){var n=t[yP]();if(oi(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Toe(t){return new Hs(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Eoe(t){return new Hs(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,r4)})}function _oe(t){return new Hs(function(e){var n,r;try{for(var i=Am(t),s=i.next();!s.done;s=i.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function m4(t){return new Hs(function(e){Roe(t,e).catch(function(n){return e.error(n)})})}function Poe(t){return m4(h4(t))}function Roe(t,e){var n,r,i,s;return toe(this,void 0,void 0,function(){var o,a;return e4(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),n=roe(t),u.label=1;case 1:return[4,n.next()];case 2:if(r=u.sent(),!!r.done)return[3,4];if(o=r.value,e.next(o),e.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=u.sent(),i={error:a},[3,11];case 6:return u.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Lf(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function g4(t,e){return e===void 0&&(e=0),n0(function(n,r){n.subscribe(wy(r,function(i){return Lf(r,t,function(){return r.next(i)},e)},function(){return Lf(r,t,function(){return r.complete()},e)},function(i){return Lf(r,t,function(){return r.error(i)},e)}))})}function v4(t,e){return e===void 0&&(e=0),n0(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function Ioe(t,e){return r0(t).pipe(v4(e),g4(e))}function Moe(t,e){return r0(t).pipe(v4(e),g4(e))}function Aoe(t,e){return new Hs(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Noe(t,e){return new Hs(function(n){var r;return Lf(n,e,function(){r=t[d4](),Lf(n,e,function(){var i,s,o;try{i=r.next(),s=i.value,o=i.done}catch(a){n.error(a);return}o?n.complete():n.next(s)},0,!0)}),function(){return oi(r==null?void 0:r.return)&&r.return()}})}function y4(t,e){if(!t)throw new Error("Iterable cannot be null");return new Hs(function(n){Lf(n,e,function(){var r=t[Symbol.asyncIterator]();Lf(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function Ooe(t,e){return y4(h4(t),e)}function Doe(t,e){if(t!=null){if(l4(t))return Ioe(t,e);if(o4(t))return Aoe(t,e);if(a4(t))return Moe(t,e);if(c4(t))return y4(t,e);if(f4(t))return Noe(t,e);if(p4(t))return Ooe(t,e)}throw u4(t)}function Loe(t,e){return e?Doe(t,e):r0(t)}gP(function(t){return function(e){e===void 0&&(e=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}});function b4(t,e){return n0(function(n,r){var i=0;n.subscribe(wy(r,function(s){r.next(t.call(e,s,i++))}))})}function joe(t,e,n,r,i,s,o,a){var u=[],f=0,h=0,m=!1,v=function(){m&&!u.length&&!f&&e.complete()},S=function(C){return f<r?k(C):u.push(C)},k=function(C){f++;var E=!1;r0(n(C,h++)).subscribe(wy(e,function(_){e.next(_)},function(){E=!0},void 0,function(){if(E)try{f--;for(var _=function(){var M=u.shift();o||k(M)};u.length&&f<r;)_();v()}catch(M){e.error(M)}}))};return t.subscribe(wy(e,S,function(){m=!0,v()})),function(){}}function x4(t,e,n){return n===void 0&&(n=1/0),oi(e)?x4(function(r,i){return b4(function(s,o){return e(r,s,i,o)})(r0(t(r,i)))},n):(typeof e=="number"&&(n=e),n0(function(r,i){return joe(r,i,t,n)}))}function Foe(t){return x4(i4,t)}function Uoe(){return Foe(1)}function Voe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Uoe()(Loe(t,Soe(t)))}function Boe(t,e){return n0(function(n,r){var i=0;n.subscribe(wy(r,function(s){return t.call(e,s,i++)&&r.next(s)}))})}var w4=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(f){i(f)}},o=u=>{try{a(n.throw(u))}catch(f){i(f)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())}),zoe="lk",$oe=[Ae.ConnectionStateChanged,Ae.RoomMetadataChanged,Ae.ActiveSpeakersChanged,Ae.ConnectionQualityChanged,Ae.ParticipantConnected,Ae.ParticipantDisconnected,Ae.ParticipantPermissionsChanged,Ae.ParticipantMetadataChanged,Ae.ParticipantNameChanged,Ae.ParticipantAttributesChanged,Ae.TrackMuted,Ae.TrackUnmuted,Ae.TrackPublished,Ae.TrackUnpublished,Ae.TrackStreamStateChanged,Ae.TrackSubscriptionFailed,Ae.TrackSubscriptionPermissionChanged,Ae.TrackSubscriptionStatusChanged];[...$oe,Ae.LocalTrackPublished,Ae.LocalTrackUnpublished];Ve.TrackPublished,Ve.TrackUnpublished,Ve.TrackMuted,Ve.TrackUnmuted,Ve.TrackStreamStateChanged,Ve.TrackSubscribed,Ve.TrackUnsubscribed,Ve.TrackSubscriptionPermissionChanged,Ve.TrackSubscriptionFailed,Ve.LocalTrackPublished,Ve.LocalTrackUnpublished;var Woe=[Ve.ConnectionQualityChanged,Ve.IsSpeakingChanged,Ve.ParticipantMetadataChanged,Ve.ParticipantPermissionsChanged,Ve.TrackMuted,Ve.TrackUnmuted,Ve.TrackPublished,Ve.TrackUnpublished,Ve.TrackStreamStateChanged,Ve.TrackSubscriptionFailed,Ve.TrackSubscriptionPermissionChanged,Ve.TrackSubscriptionStatusChanged];[...Woe,Ve.LocalTrackPublished,Ve.LocalTrackUnpublished];var om=eoe.getLogger("lk-components-js");om.setDefaultLevel("WARN");function Hoe(t){return`${zoe}-${t}`}function qoe(t,e){return new Hs(n=>{const r=(...i)=>{n.next(i)};return t.on(e,r),()=>{t.off(e,r)}})}function Koe(t,e,n=!0){const r=new Hs(s=>{Mm.getLocalDevices(t,n).then(o=>{s.next(o),s.complete()}).catch(o=>{e==null||e(o),s.next([]),s.complete()})}),i=new Hs(s=>{var o;const a=()=>w4(this,null,function*(){try{const u=yield Mm.getLocalDevices(t,n);s.next(u)}catch(u){e==null||e(u)}});if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(o=navigator==null?void 0:navigator.mediaDevices)==null||o.addEventListener("devicechange",a)}return()=>{var u;(u=navigator==null?void 0:navigator.mediaDevices)==null||u.removeEventListener("devicechange",a)}});return Voe(r,i)}function Goe(t,e){return qoe(t,Ae.ActiveDeviceChanged).pipe(Boe(([n])=>n===e),b4(([n,r])=>(om.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:r}),r)))}function Yoe(t,e,n){const r=new moe(void 0),i=Goe(e,t),s=(o,...a)=>w4(this,[o,...a],function*(u,f={}){var h,m,v;if(e){const S=$s();if(t==="audiooutput"&&((S==null?void 0:S.name)==="Safari"||(S==null?void 0:S.os)==="iOS")){om.warn("Switching audio output device is not supported on Safari and iOS.");return}om.debug(`Switching active device of kind "${t}" with id ${u}.`),yield e.switchActiveDevice(t,u,f.exact);const k=(h=e.getActiveDevice(t))!=null?h:u;k!==u&&u!=="default"&&om.info(`We tried to select the device with id (${u}), but the browser decided to select the device with id (${k}) instead.`);let C;t==="audioinput"?C=(m=e.localParticipant.getTrackPublication(Ee.Source.Microphone))==null?void 0:m.track:t==="videoinput"&&(C=(v=e.localParticipant.getTrackPublication(Ee.Source.Camera))==null?void 0:v.track);const E=u==="default"&&!C||u==="default"&&(C==null?void 0:C.mediaStreamTrack.label.startsWith("Default"));r.next(E?u:k)}});return{className:Hoe("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:s}}w.createContext(void 0);w.createContext(void 0);w.createContext(void 0);const Qoe=w.createContext(void 0);function Joe(){return w.useContext(Qoe)}w.createContext(void 0);function Xoe(t,e,n=!0){const[r,i]=w.useState(e);return w.useEffect(()=>{if(n&&i(e),typeof window>"u"||!t)return;const s=t.subscribe(i);return()=>s.unsubscribe()},[t,n]),r}function vw({kind:t,room:e,track:n,requestPermissions:r,onError:i}){const s=Joe(),o=w.useMemo(()=>e??s??new Mm,[e,s]),a=w.useMemo(()=>Koe(t,i,r),[t,r,i]),u=Xoe(a,[]),[f,h]=w.useState((o==null?void 0:o.getActiveDevice(t))??"default"),{className:m,activeDeviceObservable:v,setActiveMediaDevice:S}=w.useMemo(()=>Yoe(t,o),[t,o,n]);return w.useEffect(()=>{const k=v.subscribe(C=>{C&&(om.info("setCurrentDeviceId",C),h(C))});return()=>{k==null||k.unsubscribe()}},[v]),{devices:u,className:m,activeDeviceId:f,setActiveMediaDevice:S}}const Zoe=()=>{const{devices:t,activeDeviceId:e}=vw({kind:"audioinput"}),{devices:n,activeDeviceId:r,setActiveMediaDevice:i}=vw({kind:"videoinput"});w.useEffect(()=>{if(n.length>0&&(!r||r==="default")){const v=n[0];i(v.deviceId)}},[n,r,i]);const s=t.find(v=>v.deviceId===e),o=n.find(v=>v.deviceId===r),a=(s==null?void 0:s.label)||"Select an audio device",u=(o==null?void 0:o.label)||"Select a video device",f=()=>b.jsxs(_A,{children:[b.jsx(RA,{className:"w-[300px]",children:b.jsx(PA,{defaultValue:e,placeholder:a})}),b.jsx(IA,{children:t.map(v=>b.jsx(MA,{value:v.deviceId,children:v.label},v.deviceId))})]}),h=()=>b.jsxs(_A,{children:[b.jsx(RA,{className:"w-[300px]",children:b.jsx(PA,{defaultValue:r,placeholder:u})}),b.jsx(IA,{children:n.map(v=>b.jsx(MA,{value:v.deviceId,children:v.label},v.deviceId))})]});return b.jsx("div",{className:"flex flex-col gap-12",children:b.jsxs("div",{className:"flex flex-col gap-12 border border-slate-200 rounded-8 p-12",children:[b.jsx("span",{className:"text-sm font-medium",children:"Media Device Permissions"}),b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx("span",{className:"text-sm",children:"Audio: "}),f()]}),b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx("span",{className:"text-sm",children:"Video: "}),h()]})]})})};var Tn;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Tn||(Tn={}));var WN;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(WN||(WN={}));const vt=Tn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ru=t=>{switch(typeof t){case"undefined":return vt.undefined;case"string":return vt.string;case"number":return Number.isNaN(t)?vt.nan:vt.number;case"boolean":return vt.boolean;case"function":return vt.function;case"bigint":return vt.bigint;case"symbol":return vt.symbol;case"object":return Array.isArray(t)?vt.array:t===null?vt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?vt.promise:typeof Map<"u"&&t instanceof Map?vt.map:typeof Set<"u"&&t instanceof Set?vt.set:typeof Date<"u"&&t instanceof Date?vt.date:vt.object;default:return vt.unknown}},Qe=Tn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Oc extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,u=0;for(;u<o.path.length;){const f=o.path[u];u===o.path.length-1?(a[f]=a[f]||{_errors:[]},a[f]._errors.push(n(o))):a[f]=a[f]||{_errors:[]},a=a[f],u++}}};return i(this),r}static assert(e){if(!(e instanceof Oc))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Tn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];n[s]=n[s]||[],n[s].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Oc.create=t=>new Oc(t);const B1=(t,e)=>{let n;switch(t.code){case Qe.invalid_type:t.received===vt.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Qe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Tn.jsonStringifyReplacer)}`;break;case Qe.unrecognized_keys:n=`Unrecognized key(s) in object: ${Tn.joinValues(t.keys,", ")}`;break;case Qe.invalid_union:n="Invalid input";break;case Qe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Tn.joinValues(t.options)}`;break;case Qe.invalid_enum_value:n=`Invalid enum value. Expected ${Tn.joinValues(t.options)}, received '${t.received}'`;break;case Qe.invalid_arguments:n="Invalid function arguments";break;case Qe.invalid_return_type:n="Invalid function return type";break;case Qe.invalid_date:n="Invalid date";break;case Qe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Tn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Qe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Qe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Qe.custom:n="Invalid input";break;case Qe.invalid_intersection_types:n="Intersection results could not be merged";break;case Qe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Qe.not_finite:n="Number must be finite";break;default:n=e.defaultError,Tn.assertNever(t)}return{message:n}};let eae=B1;function tae(){return eae}const nae=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const u=r.filter(f=>!!f).slice().reverse();for(const f of u)a=f(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}};function ot(t,e){const n=tae(),r=nae({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===B1?void 0:B1].filter(i=>!!i)});t.common.issues.push(r)}class vo{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Ft;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return vo.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Ft;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Ft=Object.freeze({status:"aborted"}),Vv=t=>({status:"dirty",value:t}),Qo=t=>({status:"valid",value:t}),HN=t=>t.status==="aborted",qN=t=>t.status==="dirty",Nm=t=>t.status==="valid",yw=t=>typeof Promise<"u"&&t instanceof Promise;var St;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(St||(St={}));class ad{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const KN=(t,e)=>{if(Nm(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Oc(t.common.issues);return this._error=n,this._error}}};function tn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??a.defaultError}:typeof a.data>"u"?{message:u??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:u??n??a.defaultError}},description:i}}class xn{get description(){return this._def.description}_getType(e){return Ru(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ru(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new vo,ctx:{common:e.parent.common,data:e.data,parsedType:Ru(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(yw(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ru(e)},i=this._parseSync({data:e,path:r.path,parent:r});return KN(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ru(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return Nm(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(i=(r=s==null?void 0:s.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>Nm(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ru(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(yw(i)?i:Promise.resolve(i));return KN(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:Qe.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Dm({schema:this,typeName:Ut.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Qu.create(this,this._def)}nullable(){return Lm.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return kl.create(this)}promise(){return Sw.create(this,this._def)}or(e){return xw.create([this,e],this._def)}and(e){return ww.create(this,e,this._def)}transform(e){return new Dm({...tn(this._def),schema:this,typeName:Ut.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new W1({...tn(this._def),innerType:this,defaultValue:n,typeName:Ut.ZodDefault})}brand(){return new Tae({typeName:Ut.ZodBranded,type:this,...tn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new H1({...tn(this._def),innerType:this,catchValue:n,typeName:Ut.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return bP.create(this,e)}readonly(){return q1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const rae=/^c[^\s-]{8,}$/i,iae=/^[0-9a-z]+$/,sae=/^[0-9A-HJKMNP-TV-Z]{26}$/i,oae=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,aae=/^[a-z0-9_-]{21}$/i,lae=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,cae=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,uae=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,dae="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Wk;const fae=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,hae=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,pae=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,mae=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,gae=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,vae=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,S4="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",yae=new RegExp(`^${S4}$`);function C4(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function bae(t){return new RegExp(`^${C4(t)}$`)}function xae(t){let e=`${S4}T${C4(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function wae(t,e){return!!((e==="v4"||!e)&&fae.test(t)||(e==="v6"||!e)&&pae.test(t))}function Sae(t,e){if(!lae.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function Cae(t,e){return!!((e==="v4"||!e)&&hae.test(t)||(e==="v6"||!e)&&mae.test(t))}class Cf extends xn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==vt.string){const s=this._getOrReturnCtx(e);return ot(s,{code:Qe.invalid_type,expected:vt.string,received:s.parsedType}),Ft}const r=new vo;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),ot(i,{code:Qe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),ot(i,{code:Qe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?ot(i,{code:Qe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ot(i,{code:Qe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")uae.test(e.data)||(i=this._getOrReturnCtx(e,i),ot(i,{validation:"email",code:Qe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")Wk||(Wk=new RegExp(dae,"u")),Wk.test(e.data)||(i=this._getOrReturnCtx(e,i),ot(i,{validation:"emoji",code:Qe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")oae.test(e.data)||(i=this._getOrReturnCtx(e,i),ot(i,{validation:"uuid",code:Qe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")aae.test(e.data)||(i=this._getOrReturnCtx(e,i),ot(i,{validation:"nanoid",code:Qe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")rae.test(e.data)||(i=this._getOrReturnCtx(e,i),ot(i,{validation:"cuid",code:Qe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")iae.test(e.data)||(i=this._getOrReturnCtx(e,i),ot(i,{validation:"cuid2",code:Qe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")sae.test(e.data)||(i=this._getOrReturnCtx(e,i),ot(i,{validation:"ulid",code:Qe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ot(i,{validation:"url",code:Qe.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ot(i,{validation:"regex",code:Qe.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),ot(i,{code:Qe.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),ot(i,{code:Qe.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),ot(i,{code:Qe.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?xae(s).test(e.data)||(i=this._getOrReturnCtx(e,i),ot(i,{code:Qe.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?yae.test(e.data)||(i=this._getOrReturnCtx(e,i),ot(i,{code:Qe.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?bae(s).test(e.data)||(i=this._getOrReturnCtx(e,i),ot(i,{code:Qe.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?cae.test(e.data)||(i=this._getOrReturnCtx(e,i),ot(i,{validation:"duration",code:Qe.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?wae(e.data,s.version)||(i=this._getOrReturnCtx(e,i),ot(i,{validation:"ip",code:Qe.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?Sae(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),ot(i,{validation:"jwt",code:Qe.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?Cae(e.data,s.version)||(i=this._getOrReturnCtx(e,i),ot(i,{validation:"cidr",code:Qe.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?gae.test(e.data)||(i=this._getOrReturnCtx(e,i),ot(i,{validation:"base64",code:Qe.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?vae.test(e.data)||(i=this._getOrReturnCtx(e,i),ot(i,{validation:"base64url",code:Qe.invalid_string,message:s.message}),r.dirty()):Tn.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Qe.invalid_string,...St.errToObj(r)})}_addCheck(e){return new Cf({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...St.errToObj(e)})}url(e){return this._addCheck({kind:"url",...St.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...St.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...St.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...St.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...St.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...St.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...St.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...St.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...St.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...St.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...St.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...St.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...St.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...St.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...St.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...St.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...St.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...St.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...St.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...St.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...St.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...St.errToObj(n)})}nonempty(e){return this.min(1,St.errToObj(e))}trim(){return new Cf({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Cf({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Cf({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Cf.create=t=>new Cf({checks:[],typeName:Ut.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...tn(t)});function kae(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return s%o/10**i}class Sy extends xn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==vt.number){const s=this._getOrReturnCtx(e);return ot(s,{code:Qe.invalid_type,expected:vt.number,received:s.parsedType}),Ft}let r;const i=new vo;for(const s of this._def.checks)s.kind==="int"?Tn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ot(r,{code:Qe.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),ot(r,{code:Qe.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),ot(r,{code:Qe.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?kae(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),ot(r,{code:Qe.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ot(r,{code:Qe.not_finite,message:s.message}),i.dirty()):Tn.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,St.toString(n))}gt(e,n){return this.setLimit("min",e,!1,St.toString(n))}lte(e,n){return this.setLimit("max",e,!0,St.toString(n))}lt(e,n){return this.setLimit("max",e,!1,St.toString(n))}setLimit(e,n,r,i){return new Sy({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:St.toString(i)}]})}_addCheck(e){return new Sy({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:St.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:St.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:St.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:St.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:St.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:St.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:St.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:St.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:St.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Tn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Sy.create=t=>new Sy({checks:[],typeName:Ut.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...tn(t)});class Cy extends xn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==vt.bigint)return this._getInvalidInput(e);let r;const i=new vo;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),ot(r,{code:Qe.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),ot(r,{code:Qe.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ot(r,{code:Qe.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Tn.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ot(n,{code:Qe.invalid_type,expected:vt.bigint,received:n.parsedType}),Ft}gte(e,n){return this.setLimit("min",e,!0,St.toString(n))}gt(e,n){return this.setLimit("min",e,!1,St.toString(n))}lte(e,n){return this.setLimit("max",e,!0,St.toString(n))}lt(e,n){return this.setLimit("max",e,!1,St.toString(n))}setLimit(e,n,r,i){return new Cy({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:St.toString(i)}]})}_addCheck(e){return new Cy({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:St.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:St.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:St.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:St.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:St.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Cy.create=t=>new Cy({checks:[],typeName:Ut.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...tn(t)});class z1 extends xn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==vt.boolean){const r=this._getOrReturnCtx(e);return ot(r,{code:Qe.invalid_type,expected:vt.boolean,received:r.parsedType}),Ft}return Qo(e.data)}}z1.create=t=>new z1({typeName:Ut.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...tn(t)});class bw extends xn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==vt.date){const s=this._getOrReturnCtx(e);return ot(s,{code:Qe.invalid_type,expected:vt.date,received:s.parsedType}),Ft}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return ot(s,{code:Qe.invalid_date}),Ft}const r=new vo;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),ot(i,{code:Qe.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),ot(i,{code:Qe.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Tn.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new bw({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:St.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:St.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}bw.create=t=>new bw({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ut.ZodDate,...tn(t)});class GN extends xn{_parse(e){if(this._getType(e)!==vt.symbol){const r=this._getOrReturnCtx(e);return ot(r,{code:Qe.invalid_type,expected:vt.symbol,received:r.parsedType}),Ft}return Qo(e.data)}}GN.create=t=>new GN({typeName:Ut.ZodSymbol,...tn(t)});class YN extends xn{_parse(e){if(this._getType(e)!==vt.undefined){const r=this._getOrReturnCtx(e);return ot(r,{code:Qe.invalid_type,expected:vt.undefined,received:r.parsedType}),Ft}return Qo(e.data)}}YN.create=t=>new YN({typeName:Ut.ZodUndefined,...tn(t)});class QN extends xn{_parse(e){if(this._getType(e)!==vt.null){const r=this._getOrReturnCtx(e);return ot(r,{code:Qe.invalid_type,expected:vt.null,received:r.parsedType}),Ft}return Qo(e.data)}}QN.create=t=>new QN({typeName:Ut.ZodNull,...tn(t)});class JN extends xn{constructor(){super(...arguments),this._any=!0}_parse(e){return Qo(e.data)}}JN.create=t=>new JN({typeName:Ut.ZodAny,...tn(t)});class XN extends xn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Qo(e.data)}}XN.create=t=>new XN({typeName:Ut.ZodUnknown,...tn(t)});class ld extends xn{_parse(e){const n=this._getOrReturnCtx(e);return ot(n,{code:Qe.invalid_type,expected:vt.never,received:n.parsedType}),Ft}}ld.create=t=>new ld({typeName:Ut.ZodNever,...tn(t)});class ZN extends xn{_parse(e){if(this._getType(e)!==vt.undefined){const r=this._getOrReturnCtx(e);return ot(r,{code:Qe.invalid_type,expected:vt.void,received:r.parsedType}),Ft}return Qo(e.data)}}ZN.create=t=>new ZN({typeName:Ut.ZodVoid,...tn(t)});class kl extends xn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==vt.array)return ot(n,{code:Qe.invalid_type,expected:vt.array,received:n.parsedType}),Ft;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(ot(n,{code:o?Qe.too_big:Qe.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(ot(n,{code:Qe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(ot(n,{code:Qe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new ad(n,o,n.path,a)))).then(o=>vo.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new ad(n,o,n.path,a)));return vo.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new kl({...this._def,minLength:{value:e,message:St.toString(n)}})}max(e,n){return new kl({...this._def,maxLength:{value:e,message:St.toString(n)}})}length(e,n){return new kl({...this._def,exactLength:{value:e,message:St.toString(n)}})}nonempty(e){return this.min(1,e)}}kl.create=(t,e)=>new kl({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ut.ZodArray,...tn(e)});function jp(t){if(t instanceof qr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Qu.create(jp(r))}return new qr({...t._def,shape:()=>e})}else return t instanceof kl?new kl({...t._def,type:jp(t.element)}):t instanceof Qu?Qu.create(jp(t.unwrap())):t instanceof Lm?Lm.create(jp(t.unwrap())):t instanceof Yf?Yf.create(t.items.map(e=>jp(e))):t}class qr extends xn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Tn.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==vt.object){const f=this._getOrReturnCtx(e);return ot(f,{code:Qe.invalid_type,expected:vt.object,received:f.parsedType}),Ft}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ld&&this._def.unknownKeys==="strip"))for(const f in i.data)o.includes(f)||a.push(f);const u=[];for(const f of o){const h=s[f],m=i.data[f];u.push({key:{status:"valid",value:f},value:h._parse(new ad(i,m,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof ld){const f=this._def.unknownKeys;if(f==="passthrough")for(const h of a)u.push({key:{status:"valid",value:h},value:{status:"valid",value:i.data[h]}});else if(f==="strict")a.length>0&&(ot(i,{code:Qe.unrecognized_keys,keys:a}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const h of a){const m=i.data[h];u.push({key:{status:"valid",value:h},value:f._parse(new ad(i,m,i.path,h)),alwaysSet:h in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const f=[];for(const h of u){const m=await h.key,v=await h.value;f.push({key:m,value:v,alwaysSet:h.alwaysSet})}return f}).then(f=>vo.mergeObjectSync(r,f)):vo.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return St.errToObj,new qr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,o;const i=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:St.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new qr({...this._def,unknownKeys:"strip"})}passthrough(){return new qr({...this._def,unknownKeys:"passthrough"})}extend(e){return new qr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new qr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ut.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new qr({...this._def,catchall:e})}pick(e){const n={};for(const r of Tn.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new qr({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Tn.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new qr({...this._def,shape:()=>n})}deepPartial(){return jp(this)}partial(e){const n={};for(const r of Tn.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new qr({...this._def,shape:()=>n})}required(e){const n={};for(const r of Tn.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Qu;)s=s._def.innerType;n[r]=s}return new qr({...this._def,shape:()=>n})}keyof(){return k4(Tn.objectKeys(this.shape))}}qr.create=(t,e)=>new qr({shape:()=>t,unknownKeys:"strip",catchall:ld.create(),typeName:Ut.ZodObject,...tn(e)});qr.strictCreate=(t,e)=>new qr({shape:()=>t,unknownKeys:"strict",catchall:ld.create(),typeName:Ut.ZodObject,...tn(e)});qr.lazycreate=(t,e)=>new qr({shape:t,unknownKeys:"strip",catchall:ld.create(),typeName:Ut.ZodObject,...tn(e)});class xw extends xn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Oc(a.ctx.common.issues));return ot(n,{code:Qe.invalid_union,unionErrors:o}),Ft}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const u of r){const f={...n,common:{...n.common,issues:[]},parent:null},h=u._parseSync({data:n.data,path:n.path,parent:f});if(h.status==="valid")return h;h.status==="dirty"&&!s&&(s={result:h,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(u=>new Oc(u));return ot(n,{code:Qe.invalid_union,unionErrors:a}),Ft}}get options(){return this._def.options}}xw.create=(t,e)=>new xw({options:t,typeName:Ut.ZodUnion,...tn(e)});function $1(t,e){const n=Ru(t),r=Ru(e);if(t===e)return{valid:!0,data:t};if(n===vt.object&&r===vt.object){const i=Tn.objectKeys(e),s=Tn.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const u=$1(t[a],e[a]);if(!u.valid)return{valid:!1};o[a]=u.data}return{valid:!0,data:o}}else if(n===vt.array&&r===vt.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],u=$1(o,a);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return n===vt.date&&r===vt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ww extends xn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(HN(s)||HN(o))return Ft;const a=$1(s.value,o.value);return a.valid?((qN(s)||qN(o))&&n.dirty(),{status:n.value,value:a.data}):(ot(r,{code:Qe.invalid_intersection_types}),Ft)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ww.create=(t,e,n)=>new ww({left:t,right:e,typeName:Ut.ZodIntersection,...tn(n)});class Yf extends xn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==vt.array)return ot(r,{code:Qe.invalid_type,expected:vt.array,received:r.parsedType}),Ft;if(r.data.length<this._def.items.length)return ot(r,{code:Qe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ft;!this._def.rest&&r.data.length>this._def.items.length&&(ot(r,{code:Qe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const u=this._def.items[a]||this._def.rest;return u?u._parse(new ad(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>vo.mergeArray(n,o)):vo.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Yf({...this._def,rest:e})}}Yf.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Yf({items:t,typeName:Ut.ZodTuple,rest:null,...tn(e)})};class eO extends xn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==vt.map)return ot(r,{code:Qe.invalid_type,expected:vt.map,received:r.parsedType}),Ft;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,u],f)=>({key:i._parse(new ad(r,a,r.path,[f,"key"])),value:s._parse(new ad(r,u,r.path,[f,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const u of o){const f=await u.key,h=await u.value;if(f.status==="aborted"||h.status==="aborted")return Ft;(f.status==="dirty"||h.status==="dirty")&&n.dirty(),a.set(f.value,h.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const u of o){const f=u.key,h=u.value;if(f.status==="aborted"||h.status==="aborted")return Ft;(f.status==="dirty"||h.status==="dirty")&&n.dirty(),a.set(f.value,h.value)}return{status:n.value,value:a}}}}eO.create=(t,e,n)=>new eO({valueType:e,keyType:t,typeName:Ut.ZodMap,...tn(n)});class ky extends xn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==vt.set)return ot(r,{code:Qe.invalid_type,expected:vt.set,received:r.parsedType}),Ft;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(ot(r,{code:Qe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(ot(r,{code:Qe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(u){const f=new Set;for(const h of u){if(h.status==="aborted")return Ft;h.status==="dirty"&&n.dirty(),f.add(h.value)}return{status:n.value,value:f}}const a=[...r.data.values()].map((u,f)=>s._parse(new ad(r,u,r.path,f)));return r.common.async?Promise.all(a).then(u=>o(u)):o(a)}min(e,n){return new ky({...this._def,minSize:{value:e,message:St.toString(n)}})}max(e,n){return new ky({...this._def,maxSize:{value:e,message:St.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ky.create=(t,e)=>new ky({valueType:t,minSize:null,maxSize:null,typeName:Ut.ZodSet,...tn(e)});class tO extends xn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}tO.create=(t,e)=>new tO({getter:t,typeName:Ut.ZodLazy,...tn(e)});class nO extends xn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ot(n,{received:n.data,code:Qe.invalid_literal,expected:this._def.value}),Ft}return{status:"valid",value:e.data}}get value(){return this._def.value}}nO.create=(t,e)=>new nO({value:t,typeName:Ut.ZodLiteral,...tn(e)});function k4(t,e){return new Om({values:t,typeName:Ut.ZodEnum,...tn(e)})}class Om extends xn{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ot(n,{expected:Tn.joinValues(r),received:n.parsedType,code:Qe.invalid_type}),Ft}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return ot(n,{received:n.data,code:Qe.invalid_enum_value,options:r}),Ft}return Qo(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Om.create(e,{...this._def,...n})}exclude(e,n=this._def){return Om.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Om.create=k4;class rO extends xn{_parse(e){const n=Tn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==vt.string&&r.parsedType!==vt.number){const i=Tn.objectValues(n);return ot(r,{expected:Tn.joinValues(i),received:r.parsedType,code:Qe.invalid_type}),Ft}if(this._cache||(this._cache=new Set(Tn.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=Tn.objectValues(n);return ot(r,{received:r.data,code:Qe.invalid_enum_value,options:i}),Ft}return Qo(e.data)}get enum(){return this._def.values}}rO.create=(t,e)=>new rO({values:t,typeName:Ut.ZodNativeEnum,...tn(e)});class Sw extends xn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==vt.promise&&n.common.async===!1)return ot(n,{code:Qe.invalid_type,expected:vt.promise,received:n.parsedType}),Ft;const r=n.parsedType===vt.promise?n.data:Promise.resolve(n.data);return Qo(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Sw.create=(t,e)=>new Sw({type:t,typeName:Ut.ZodPromise,...tn(e)});class Dm extends xn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ut.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{ot(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Ft;const u=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return u.status==="aborted"?Ft:u.status==="dirty"||n.value==="dirty"?Vv(u.value):u});{if(n.value==="aborted")return Ft;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Ft:a.status==="dirty"||n.value==="dirty"?Vv(a.value):a}}if(i.type==="refinement"){const o=a=>{const u=i.refinement(a,s);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ft:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Ft:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Nm(o))return Ft;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Nm(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):Ft);Tn.assertNever(i)}}Dm.create=(t,e,n)=>new Dm({schema:t,typeName:Ut.ZodEffects,effect:e,...tn(n)});Dm.createWithPreprocess=(t,e,n)=>new Dm({schema:e,effect:{type:"preprocess",transform:t},typeName:Ut.ZodEffects,...tn(n)});class Qu extends xn{_parse(e){return this._getType(e)===vt.undefined?Qo(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qu.create=(t,e)=>new Qu({innerType:t,typeName:Ut.ZodOptional,...tn(e)});class Lm extends xn{_parse(e){return this._getType(e)===vt.null?Qo(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Lm.create=(t,e)=>new Lm({innerType:t,typeName:Ut.ZodNullable,...tn(e)});class W1 extends xn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===vt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}W1.create=(t,e)=>new W1({innerType:t,typeName:Ut.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...tn(e)});class H1 extends xn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return yw(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Oc(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Oc(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}H1.create=(t,e)=>new H1({innerType:t,typeName:Ut.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...tn(e)});class iO extends xn{_parse(e){if(this._getType(e)!==vt.nan){const r=this._getOrReturnCtx(e);return ot(r,{code:Qe.invalid_type,expected:vt.nan,received:r.parsedType}),Ft}return{status:"valid",value:e.data}}}iO.create=t=>new iO({typeName:Ut.ZodNaN,...tn(t)});class Tae extends xn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class bP extends xn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ft:s.status==="dirty"?(n.dirty(),Vv(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ft:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new bP({in:e,out:n,typeName:Ut.ZodPipeline})}}class q1 extends xn{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Nm(i)&&(i.value=Object.freeze(i.value)),i);return yw(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}q1.create=(t,e)=>new q1({innerType:t,typeName:Ut.ZodReadonly,...tn(e)});var Ut;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ut||(Ut={}));const T4=z1.create;ld.create;kl.create;const E4=qr.create;xw.create;ww.create;Yf.create;const Eae=Om.create;Sw.create;Qu.create;Lm.create;const sO=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Ze(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},_4=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?sO(r.ref,n,t):r.refs&&r.refs.forEach(i=>sO(i,n,t))}},_ae=(t,e)=>{e.shouldUseNativeValidation&&_4(t,e);const n={};for(const r in t){const i=Ze(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(Pae(e.names||Object.keys(t),r)){const o=Object.assign({},Ze(n,r));Fn(o,"root",s),Fn(n,r,o)}else Fn(n,r,s)}return n},Pae=(t,e)=>t.some(n=>n.startsWith(e+"."));var Rae=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(h){return h.errors.forEach(function(m){return t.push(m)})}),e){var u=n[o].types,f=u&&u[r.code];n[o]=a2(o,e,n,i,f?[].concat(f,r.message):r.message)}t.shift()}return n},P4=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,a){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(f){return s.shouldUseNativeValidation&&_4({},s),{errors:{},values:n.raw?r:f}})}catch(f){return a(f)}return u&&u.then?u.then(void 0,a):u}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:_ae(Rae(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}},Iae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mae=Iae.reduce((t,e)=>{const n=Fr(`Primitive.${e}`),r=w.forwardRef((i,s)=>{const{asChild:o,...a}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(u,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),Aae="Label",R4=w.forwardRef((t,e)=>b.jsx(Mae.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));R4.displayName=Aae;var Nae=R4;function xP({className:t,...e}){return b.jsx(Nae,{"data-slot":"label",className:nn("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}const I4=kK,M4=w.createContext({}),K1=({...t})=>b.jsx(M4.Provider,{value:{name:t.name},children:b.jsx(PK,{...t})}),xS=()=>{const t=w.useContext(M4),e=w.useContext(A4),{getFieldState:n,formState:r}=Kw(),i=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:s}=e;return{id:s,name:t.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...i}},A4=w.createContext({}),mf=w.forwardRef(({className:t,...e},n)=>{const r=w.useId();return b.jsx(A4.Provider,{value:{id:r},children:b.jsx("div",{ref:n,className:t,...e})})});mf.displayName="FormItem";const Mx=w.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:i}=xS();return b.jsx(xP,{ref:n,className:nn(r&&"text-destructive",t),htmlFor:i,...e})});Mx.displayName="FormLabel";const gf=w.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:i,formMessageId:s}=xS();return b.jsx(dL,{ref:e,id:r,"aria-describedby":n?`${i} ${s}`:`${i}`,"aria-invalid":!!n,...t})});gf.displayName="FormControl";const Oae=w.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=xS();return b.jsx("p",{ref:n,id:r,className:nn("text-sm text-muted-foreground",t),...e})});Oae.displayName="FormDescription";const Dae=w.forwardRef(({className:t,children:e,...n},r)=>{const{error:i,formMessageId:s}=xS(),o=i?String(i==null?void 0:i.message):e;return o?b.jsx("p",{ref:r,id:s,className:nn("text-sm font-medium text-destructive",t),...n,children:o}):null});Dae.displayName="FormMessage";function oO(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Lae(...t){return e=>{let n=!1;const r=t.map(i=>{const s=oO(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():oO(t[i],null)}}}}function wP(...t){return w.useCallback(Lae(...t),t)}var jae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],wS=jae.reduce((t,e)=>{const n=Fr(`Primitive.${e}`),r=w.forwardRef((i,s)=>{const{asChild:o,...a}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(u,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function aO(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Fae(...t){return e=>{let n=!1;const r=t.map(i=>{const s=aO(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():aO(t[i],null)}}}}function Uae(...t){return w.useCallback(Fae(...t),t)}var Vae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],N4=Vae.reduce((t,e)=>{const n=Fr(`Primitive.${e}`),r=w.forwardRef((i,s)=>{const{asChild:o,...a}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(u,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),Hk="rovingFocusGroup.onEntryFocus",Bae={bubbles:!1,cancelable:!0},i0="RovingFocusGroup",[G1,O4,zae]=z_(i0),[$ae,SS]=Na(i0,[zae]),[Wae,Hae]=$ae(i0),D4=w.forwardRef((t,e)=>b.jsx(G1.Provider,{scope:t.__scopeRovingFocusGroup,children:b.jsx(G1.Slot,{scope:t.__scopeRovingFocusGroup,children:b.jsx(qae,{...t,ref:e})})}));D4.displayName=i0;var qae=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:u,onEntryFocus:f,preventScrollOnEntryFocus:h=!1,...m}=t,v=w.useRef(null),S=Uae(e,v),k=aS(s),[C,E]=nd({prop:o,defaultProp:a??null,onChange:u,caller:i0}),[_,M]=w.useState(!1),A=Tl(f),I=O4(n),N=w.useRef(!1),[O,j]=w.useState(0);return w.useEffect(()=>{const V=v.current;if(V)return V.addEventListener(Hk,A),()=>V.removeEventListener(Hk,A)},[A]),b.jsx(Wae,{scope:n,orientation:r,dir:k,loop:i,currentTabStopId:C,onItemFocus:w.useCallback(V=>E(V),[E]),onItemShiftTab:w.useCallback(()=>M(!0),[]),onFocusableItemAdd:w.useCallback(()=>j(V=>V+1),[]),onFocusableItemRemove:w.useCallback(()=>j(V=>V-1),[]),children:b.jsx(N4.div,{tabIndex:_||O===0?-1:0,"data-orientation":r,...m,ref:S,style:{outline:"none",...t.style},onMouseDown:ft(t.onMouseDown,()=>{N.current=!0}),onFocus:ft(t.onFocus,V=>{const z=!N.current;if(V.target===V.currentTarget&&z&&!_){const W=new CustomEvent(Hk,Bae);if(V.currentTarget.dispatchEvent(W),!W.defaultPrevented){const J=I().filter(se=>se.focusable),Y=J.find(se=>se.active),me=J.find(se=>se.id===C),Ie=[Y,me,...J].filter(Boolean).map(se=>se.ref.current);F4(Ie,h)}}N.current=!1}),onBlur:ft(t.onBlur,()=>M(!1))})})}),L4="RovingFocusGroupItem",j4=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,u=bl(),f=s||u,h=Hae(L4,n),m=h.currentTabStopId===f,v=O4(n),{onFocusableItemAdd:S,onFocusableItemRemove:k,currentTabStopId:C}=h;return w.useEffect(()=>{if(r)return S(),()=>k()},[r,S,k]),b.jsx(G1.ItemSlot,{scope:n,id:f,focusable:r,active:i,children:b.jsx(N4.span,{tabIndex:m?0:-1,"data-orientation":h.orientation,...a,ref:e,onMouseDown:ft(t.onMouseDown,E=>{r?h.onItemFocus(f):E.preventDefault()}),onFocus:ft(t.onFocus,()=>h.onItemFocus(f)),onKeyDown:ft(t.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){h.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const _=Yae(E,h.orientation,h.dir);if(_!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let A=v().filter(I=>I.focusable).map(I=>I.ref.current);if(_==="last")A.reverse();else if(_==="prev"||_==="next"){_==="prev"&&A.reverse();const I=A.indexOf(E.currentTarget);A=h.loop?Qae(A,I+1):A.slice(I+1)}setTimeout(()=>F4(A))}}),children:typeof o=="function"?o({isCurrentTabStop:m,hasTabStop:C!=null}):o})})});j4.displayName=L4;var Kae={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Gae(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Yae(t,e,n){const r=Gae(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Kae[r]}function F4(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Qae(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var U4=D4,V4=j4,SP="Radio",[Jae,B4]=Na(SP),[Xae,Zae]=Jae(SP),z4=w.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:i=!1,required:s,disabled:o,value:a="on",onCheck:u,form:f,...h}=t,[m,v]=w.useState(null),S=wP(e,E=>v(E)),k=w.useRef(!1),C=m?f||!!m.closest("form"):!0;return b.jsxs(Xae,{scope:n,checked:i,disabled:o,children:[b.jsx(wS.button,{type:"button",role:"radio","aria-checked":i,"data-state":q4(i),"data-disabled":o?"":void 0,disabled:o,value:a,...h,ref:S,onClick:ft(t.onClick,E=>{i||u==null||u(),C&&(k.current=E.isPropagationStopped(),k.current||E.stopPropagation())})}),C&&b.jsx(H4,{control:m,bubbles:!k.current,name:r,value:a,checked:i,required:s,disabled:o,form:f,style:{transform:"translateX(-100%)"}})]})});z4.displayName=SP;var $4="RadioIndicator",W4=w.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...i}=t,s=Zae($4,n);return b.jsx(Al,{present:r||s.checked,children:b.jsx(wS.span,{"data-state":q4(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e})})});W4.displayName=$4;var ele="RadioBubbleInput",H4=w.forwardRef(({__scopeRadio:t,control:e,checked:n,bubbles:r=!0,...i},s)=>{const o=w.useRef(null),a=wP(o,s),u=$_(n),f=IE(e);return w.useEffect(()=>{const h=o.current;if(!h)return;const m=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==n&&S){const k=new Event("click",{bubbles:r});S.call(h,n),h.dispatchEvent(k)}},[u,n,r]),b.jsx(wS.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});H4.displayName=ele;function q4(t){return t?"checked":"unchecked"}var tle=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],CS="RadioGroup",[nle,qhe]=Na(CS,[SS,B4]),K4=SS(),G4=B4(),[rle,ile]=nle(CS),Y4=w.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:i,value:s,required:o=!1,disabled:a=!1,orientation:u,dir:f,loop:h=!0,onValueChange:m,...v}=t,S=K4(n),k=aS(f),[C,E]=nd({prop:s,defaultProp:i??null,onChange:m,caller:CS});return b.jsx(rle,{scope:n,name:r,required:o,disabled:a,value:C,onValueChange:E,children:b.jsx(U4,{asChild:!0,...S,orientation:u,dir:k,loop:h,children:b.jsx(wS.div,{role:"radiogroup","aria-required":o,"aria-orientation":u,"data-disabled":a?"":void 0,dir:k,...v,ref:e})})})});Y4.displayName=CS;var Q4="RadioGroupItem",J4=w.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...i}=t,s=ile(Q4,n),o=s.disabled||r,a=K4(n),u=G4(n),f=w.useRef(null),h=wP(e,f),m=s.value===i.value,v=w.useRef(!1);return w.useEffect(()=>{const S=C=>{tle.includes(C.key)&&(v.current=!0)},k=()=>v.current=!1;return document.addEventListener("keydown",S),document.addEventListener("keyup",k),()=>{document.removeEventListener("keydown",S),document.removeEventListener("keyup",k)}},[]),b.jsx(V4,{asChild:!0,...a,focusable:!o,active:m,children:b.jsx(z4,{disabled:o,required:s.required,checked:m,...u,...i,name:s.name,ref:h,onCheck:()=>s.onValueChange(i.value),onKeyDown:ft(S=>{S.key==="Enter"&&S.preventDefault()}),onFocus:ft(i.onFocus,()=>{var S;v.current&&((S=f.current)==null||S.click())})})})});J4.displayName=Q4;var sle="RadioGroupIndicator",X4=w.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,i=G4(n);return b.jsx(W4,{...i,...r,ref:e})});X4.displayName=sle;var Z4=Y4,eV=J4,ole=X4;const tV=w.forwardRef(({className:t,...e},n)=>b.jsx(Z4,{className:nn("grid gap-2",t),...e,ref:n}));tV.displayName=Z4.displayName;const Ax=w.forwardRef(({className:t,...e},n)=>b.jsx(eV,{ref:n,className:nn("aspect-square size-16 rounded-full border border-primary text-primary ring-offset-background focus:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:b.jsx(ole,{className:"flex items-center justify-center",children:b.jsx(Yj,{className:"size-[10px] fill-current text-current"})})}));Ax.displayName=eV.displayName;function lO(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ale(...t){return e=>{let n=!1;const r=t.map(i=>{const s=lO(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():lO(t[i],null)}}}}function nV(...t){return w.useCallback(ale(...t),t)}var lle=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rV=lle.reduce((t,e)=>{const n=Fr(`Primitive.${e}`),r=w.forwardRef((i,s)=>{const{asChild:o,...a}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(u,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),kS="Switch",[cle,Khe]=Na(kS),[ule,dle]=cle(kS),iV=w.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:u="on",onCheckedChange:f,form:h,...m}=t,[v,S]=w.useState(null),k=nV(e,A=>S(A)),C=w.useRef(!1),E=v?h||!!v.closest("form"):!0,[_,M]=nd({prop:i,defaultProp:s??!1,onChange:f,caller:kS});return b.jsxs(ule,{scope:n,checked:_,disabled:a,children:[b.jsx(rV.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":lV(_),"data-disabled":a?"":void 0,disabled:a,value:u,...m,ref:k,onClick:ft(t.onClick,A=>{M(I=>!I),E&&(C.current=A.isPropagationStopped(),C.current||A.stopPropagation())})}),E&&b.jsx(aV,{control:v,bubbles:!C.current,name:r,value:u,checked:_,required:o,disabled:a,form:h,style:{transform:"translateX(-100%)"}})]})});iV.displayName=kS;var sV="SwitchThumb",oV=w.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=dle(sV,n);return b.jsx(rV.span,{"data-state":lV(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});oV.displayName=sV;var fle="SwitchBubbleInput",aV=w.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},s)=>{const o=w.useRef(null),a=nV(o,s),u=$_(n),f=IE(e);return w.useEffect(()=>{const h=o.current;if(!h)return;const m=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==n&&S){const k=new Event("click",{bubbles:r});S.call(h,n),h.dispatchEvent(k)}},[u,n,r]),b.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});aV.displayName=fle;function lV(t){return t?"checked":"unchecked"}var cV=iV,hle=oV;const TS=w.forwardRef(({className:t,...e},n)=>b.jsx(cV,{className:nn("peer inline-flex h-20 w-40 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:b.jsx(hle,{className:nn("pointer-events-none block size-16 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));TS.displayName=cV.displayName;const ple=({roomID:t,isHost:e,settings:n})=>{const{strict_mode:r,invitation_expiry:i,invite_permission:s}=n,o=E4({invitation_expiry:Eae(["30","90","180"]),invite_permission:T4()}),a=r?!1:s||!1,u=Gw({resolver:P4(o),defaultValues:{invitation_expiry:i||"30",invite_permission:a}}),f=Ju({mutationFn:v=>sL(t,{...n,invitation_expiry:v.invitation_expiry,invite_permission:v.invite_permission,strict_mode:v.strict_mode})}),h=(v,S)=>{u.setValue(v,S);const k=u.getValues(),C=v==="invite_permission"&&S===!0&&r?!1:n.strict_mode;f.mutate({...k,strict_mode:C})},m=si("flex flex-col border border-slate-200 rounded-8 p-12",{"gap-12":e,"gap-4":!e});return b.jsx(I4,{...u,children:b.jsxs("div",{className:"flex flex-col flex-1 gap-8",children:[b.jsxs("div",{className:m,children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsxs(cy,{children:[b.jsx(uy,{asChild:!0,children:b.jsx(_m,{size:16,className:"text-purple-500"})}),b.jsx(Cm,{side:"left",children:"The current invitation will expire after the selected duration, rendering it invalid. A new invitation will be automatically generated to ensure continuous access."})]}),b.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Invitation expiry:"})]}),b.jsx("div",{className:"ml-20",children:e?b.jsx(K1,{control:u.control,name:"invitation_expiry",render:({field:v})=>b.jsx(mf,{children:b.jsx(gf,{children:b.jsxs(tV,{onValueChange:S=>{h("invitation_expiry",S)},defaultValue:v.value,className:"flex flex-col space-y-4",children:[b.jsxs(mf,{className:"flex items-center space-x-12 space-y-0",children:[b.jsx(gf,{children:b.jsx(Ax,{value:"30"})}),b.jsx(Mx,{className:"font-normal",children:"30 minutes"})]}),b.jsxs(mf,{className:"flex items-center space-x-12 space-y-0",children:[b.jsx(gf,{children:b.jsx(Ax,{value:"90"})}),b.jsx(Mx,{className:"font-normal",children:"90 minutes"})]}),b.jsxs(mf,{className:"flex items-center space-x-12 space-y-0",children:[b.jsx(gf,{children:b.jsx(Ax,{value:"180"})}),b.jsx(Mx,{className:"font-normal",children:"3 hours"})]})]})})})}):b.jsxs("p",{className:"text-sm text-slate-600 font-medium italic",children:["The invitation will expire after ",i," minutes."]})})]}),b.jsxs("div",{className:m,children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsxs(cy,{children:[b.jsx(uy,{asChild:!0,children:b.jsx(_m,{size:16,className:"text-purple-500"})}),b.jsx(Cm,{side:"left",children:"When enabled, users aside from the host can invite other users to join the room."})]}),b.jsx("span",{className:"text-sm font-medium",children:"Invite permission:"})]}),b.jsx("div",{className:"flex items-center gap-8 ml-20",children:e?b.jsxs("div",{className:"flex flex-col gap-4",children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx(K1,{control:u.control,name:"invite_permission",render:({field:v})=>b.jsx(mf,{children:b.jsx(gf,{children:b.jsx(TS,{id:"invite_permission",checked:v.value,onCheckedChange:S=>{h("invite_permission",S)}})})})}),b.jsx(xP,{htmlFor:"invite_permission",className:"mb-4 text-sm font-medium",children:u.watch("invite_permission")?"Allow":"Disallow"})]}),r&&b.jsx("p",{className:"text-xs text-yellow-500",children:"Enabling this setting will disable strict mode."})]}):b.jsx("p",{className:"mb-4 text-sm text-slate-600 font-medium italic",children:s?"Anyone can invite":"Only host can invite"})})]})]})})},mle=()=>{const t="flex flex-col gap-12 border border-slate-200 rounded-8 p-12";return b.jsxs("div",{className:"flex flex-col gap-8",children:[b.jsx("div",{className:t,children:b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsxs(cy,{children:[b.jsx(uy,{asChild:!0,children:b.jsx(_m,{size:16,className:"text-purple-500"})}),b.jsx(Cm,{side:"left",children:"When enabled, everyone in the room can send messages."})]}),b.jsx("span",{className:"text-sm font-medium",children:"Let everyone send messages"})]})}),b.jsx("div",{className:t,children:b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsxs(cy,{children:[b.jsx(uy,{asChild:!0,children:b.jsx(_m,{size:16,className:"text-purple-500"})}),b.jsx(Cm,{side:"left",children:"When enabled, all members can share their screen."})]}),b.jsx("span",{className:"text-sm font-medium",children:"Allow members to share their screen"})]})})]})},uV=()=>{const{settings:t}=Fw(),[e,n]=w.useState("invitation"),{pathname:r}=qs(),i=r.split("/")[2],s=cs.get("rsCookie"),{data:o}=Ho({queryKey:["me",i],queryFn:()=>jw(i,s),enabled:!!i&&!!s}),a=o==null?void 0:o.isHost,u=()=>{switch(e){case"media":return b.jsx(Zoe,{});case"invitation":return a!==void 0&&b.jsx(ple,{roomID:i,isHost:a,settings:t||{invitation_expiry:"30",invite_permission:!1}});case"chat":return b.jsx(Gee,{});case"permissions":return b.jsx(mle,{});default:return null}},f=()=>{switch(e){case"media":return"Configure your camera and microphone devices";case"invitation":return a?"Manage room invitation settings and permissions":"View current invitation settings set by the host";case"chat":return"Configure conversation settings";case"permissions":return a?"Manage various permissions for room members":"View current room permissions set by the host"}},h=si("flex items-center p-12 rounded-full bg-gray-100 hover:bg-gray-200 duration-300 ease-in-out cursor-pointer hover:scale-105",{"border border-slate-200":!r.includes("/call")}),m=S=>si("flex items-center w-full px-8 py-4 text-md cursor-pointer rounded-4 duration-150 ease-in-out",{"bg-black text-white":S,"hover:bg-slate-100":!S}),v=(t==null?void 0:t.strict_mode)||!1;return b.jsxs(e0,{children:[b.jsx(oS,{children:b.jsx("div",{className:h,children:b.jsx(tA,{size:16})})}),b.jsxs(Ym,{className:"max-w-[600px]",children:[b.jsx(Qm,{children:b.jsxs(Jm,{children:[b.jsxs("div",{className:"flex items-center gap-28",children:[b.jsxs("div",{className:"flex items-center gap-4",children:["Settings ",b.jsx(tA,{className:"size-16"})]}),v&&b.jsxs("div",{className:"flex items-center gap-4 text-xs text-yellow-500",children:[b.jsx(Jy,{size:12,className:"text-yellow-500"}),b.jsx("span",{children:"Strict mode is enabled."})]})]}),b.jsx(go,{className:"w-full mt-8"})]})}),b.jsxs("div",{className:"flex h-[340px] mt-16",children:[b.jsxs("div",{className:"flex flex-col gap-4 w-[140px]",children:[b.jsx("div",{className:m(e==="media"),onClick:()=>n("media"),children:b.jsx("span",{className:"text-sm",children:"Media Devices"})}),b.jsx("div",{className:m(e==="invitation"),onClick:()=>n("invitation"),children:b.jsx("span",{className:"text-sm",children:"Invitation"})}),b.jsx("div",{className:m(e==="chat"),onClick:()=>n("chat"),children:b.jsx("span",{className:"text-sm",children:"Conversation"})}),b.jsx("div",{className:m(e==="permissions"),onClick:()=>n("permissions"),children:b.jsx("span",{className:"text-sm",children:"Permissions"})})]}),b.jsx(go,{orientation:"vertical",className:"ml-12 mr-16"}),b.jsxs("div",{className:"flex flex-col flex-1 gap-12",children:[b.jsxs("div",{className:"flex flex-col gap-4",children:[b.jsx("span",{className:"text-sm",children:f()}),b.jsx(go,{})]}),b.jsxs("div",{className:"flex flex-col gap-12",children:[b.jsx(Kee,{isHost:a,settingsPanel:e}),u()]})]})]})]})]})},gle=()=>{const t=Il(),[e]=eW(),n=e.get("external")!=="false",{toast:r}=uZ(),[i,s]=w.useState(null),[o,a]=w.useState(!1),u=e.get("code"),f=e.get("room"),{data:h,isLoading:m,isError:v}=Ho({queryKey:["authorization",u,f],queryFn:()=>Y9(u,f)}),{mutate:S,isPending:k}=Ju({mutationFn:()=>U9(f),onSuccess:A=>{a(!0),cs.set("rsCookie",A.participant.jwt),n||t(`/room/${f}`,{state:{roomID:f},replace:!0}),r({description:"Successfully joined in! "})},onError:()=>{a(!1),s("Failed to join room. Something went wrong..")}}),{isValid:C,hasExpired:E}=h||{isValid:!1,hasExpired:!1};w.useEffect(()=>{C||(a(!1),s("Your invitation format is invalid. Please contact the host.")),E&&(a(!1),s("Your invitation has expired or does not exist. Please contact the host.")),v&&(a(!1),s("An error occurred while validating your invitation.")),!E&&C&&!v&&(s(null),a(!0))},[C,E,v]);const _=()=>{if(m)return b.jsxs("div",{className:"flex flex-col items-center gap-8",children:[b.jsx("p",{className:"text-sm animate-pulse text-orange-400",children:"Validating your invitation.."}),b.jsx(r1,{})]});if(i||v)return b.jsxs("div",{className:"flex flex-col items-center gap-8",children:[b.jsx("p",{className:"text-sm text-red-600",children:i}),b.jsx("div",{className:"animate-circle-entrance",children:b.jsx(zX,{className:"size-32 text-red-600"})})]});if(o)return b.jsxs("div",{className:"flex flex-col items-center gap-8",children:[b.jsx("div",{className:"animate-circle-entrance",children:b.jsx(Gj,{className:"size-32 text-green-600"})}),b.jsxs("div",{className:"flex flex-col items-center gap-4",children:[b.jsx("p",{className:"text-sm text-green-600",children:"Invitation is valid!"}),n&&b.jsx("p",{className:"text-sm",children:"You can now join in the room."})]})]})},M=async()=>{S(),t(`/room/${f}`,{replace:!0})};return b.jsx("div",{className:"flex justify-center items-center mt-[160px]",children:b.jsxs(A_,{className:"w-[500px]",children:[b.jsx(oF,{className:"flex flex-col items-center",children:b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx("span",{className:"text-2xl font-mono font-medium",children:"Toku"}),b.jsx("span",{className:"text-xl",children:"Authorization"})]})}),b.jsxs(aF,{className:"flex flex-col items-center gap-12",children:[b.jsxs("p",{className:"text-sm",children:["Your invitation code: ",u]}),_(),o&&!m&&b.jsxs("div",{className:"flex flex-col items-center gap-12",children:[b.jsxs(ls,{variant:"call",className:"mt-12",onClick:()=>M(),children:[b.jsx(Xj,{className:"size-20 mr-8 text-white"}),k?"Joining...":"Join Room"]}),b.jsx("p",{className:"text-xs",children:"By joining a room, you agree to our Terms of Service and Privacy Statement."})]})]})]})})},CP=({message:t,onBeforeLeave:e,shouldBlock:n=!0,allowedPaths:r=[]})=>{const i=qs(),s=w.useRef(!1),o=p8(({currentLocation:a,nextLocation:u})=>!n||s.current?!1:a.pathname.includes("/post-call")?a.pathname!==u.pathname:r.some(h=>u.pathname.includes(h))?!1:a.pathname!==u.pathname);return w.useEffect(()=>{if(o.state==="blocked"){if(i.pathname.includes("/call")||i.pathname.includes("/post-call")){window.confirm(t)?(s.current=!0,e==null||e(),o.proceed()):o.reset();return}window.confirm(t)?(e==null||e(),o.proceed()):o.reset()}},[o,t,e]),w.useEffect(()=>{if(!n)return;const a=u=>{if(i.pathname.includes("/call")||i.pathname.includes("/post-call")){e==null||e(),u.preventDefault();return}u.preventDefault()};return window.addEventListener("beforeunload",a),()=>{window.removeEventListener("beforeunload",a)}},[t,n,e,i.pathname]),{isBlocked:o.state==="blocked"}};function cO(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function vle(...t){return e=>{let n=!1;const r=t.map(i=>{const s=cO(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():cO(t[i],null)}}}}var yle=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ble=yle.reduce((t,e)=>{const n=Fr(`Primitive.${e}`),r=w.forwardRef((i,s)=>{const{asChild:o,...a}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(u,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function uO(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function dV(...t){return e=>{let n=!1;const r=t.map(i=>{const s=uO(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():uO(t[i],null)}}}}function s0(...t){return w.useCallback(dV(...t),t)}var xle=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],o0=xle.reduce((t,e)=>{const n=Fr(`Primitive.${e}`),r=w.forwardRef((i,s)=>{const{asChild:o,...a}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(u,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function wle(t,e){t&&Zf.flushSync(()=>t.dispatchEvent(e))}var Y1=["Enter"," "],Sle=["ArrowDown","PageUp","Home"],fV=["ArrowUp","PageDown","End"],Cle=[...Sle,...fV],kle={ltr:[...Y1,"ArrowRight"],rtl:[...Y1,"ArrowLeft"]},Tle={ltr:["ArrowLeft"],rtl:["ArrowRight"]},a0="Menu",[Ty,Ele,_le]=z_(a0),[th,hV]=Na(a0,[_le,Wm,SS]),ES=Wm(),pV=SS(),[Ple,nh]=th(a0),[Rle,l0]=th(a0),mV=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=ES(e),[u,f]=w.useState(null),h=w.useRef(!1),m=Tl(s),v=aS(i);return w.useEffect(()=>{const S=()=>{h.current=!0,document.addEventListener("pointerdown",k,{capture:!0,once:!0}),document.addEventListener("pointermove",k,{capture:!0,once:!0})},k=()=>h.current=!1;return document.addEventListener("keydown",S,{capture:!0}),()=>{document.removeEventListener("keydown",S,{capture:!0}),document.removeEventListener("pointerdown",k,{capture:!0}),document.removeEventListener("pointermove",k,{capture:!0})}},[]),b.jsx(NE,{...a,children:b.jsx(Ple,{scope:e,open:n,onOpenChange:m,content:u,onContentChange:f,children:b.jsx(Rle,{scope:e,onClose:w.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:h,dir:v,modal:o,children:r})})})};mV.displayName=a0;var Ile="MenuAnchor",kP=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=ES(n);return b.jsx(OE,{...i,...r,ref:e})});kP.displayName=Ile;var TP="MenuPortal",[Mle,gV]=th(TP,{forceMount:void 0}),vV=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=nh(TP,e);return b.jsx(Mle,{scope:e,forceMount:n,children:b.jsx(Al,{present:n||s.open,children:b.jsx(zw,{asChild:!0,container:i,children:r})})})};vV.displayName=TP;var Yo="MenuContent",[Ale,EP]=th(Yo),yV=w.forwardRef((t,e)=>{const n=gV(Yo,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=nh(Yo,t.__scopeMenu),o=l0(Yo,t.__scopeMenu);return b.jsx(Ty.Provider,{scope:t.__scopeMenu,children:b.jsx(Al,{present:r||s.open,children:b.jsx(Ty.Slot,{scope:t.__scopeMenu,children:o.modal?b.jsx(Nle,{...i,ref:e}):b.jsx(Ole,{...i,ref:e})})})})}),Nle=w.forwardRef((t,e)=>{const n=nh(Yo,t.__scopeMenu),r=w.useRef(null),i=s0(e,r);return w.useEffect(()=>{const s=r.current;if(s)return L_(s)},[]),b.jsx(_P,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ft(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Ole=w.forwardRef((t,e)=>{const n=nh(Yo,t.__scopeMenu);return b.jsx(_P,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Dle=Fr("MenuContent.ScrollLock"),_P=w.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:u,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:v,onDismiss:S,disableOutsideScroll:k,...C}=t,E=nh(Yo,n),_=l0(Yo,n),M=ES(n),A=pV(n),I=Ele(n),[N,O]=w.useState(null),j=w.useRef(null),V=s0(e,j,E.onContentChange),z=w.useRef(0),W=w.useRef(""),J=w.useRef(0),Y=w.useRef(null),me=w.useRef("right"),ue=w.useRef(0),Ie=k?iS:w.Fragment,se=k?{as:Dle,allowPinchZoom:!0}:void 0,xe=te=>{var de,ge;const ae=W.current+te,B=I().filter(_e=>!_e.disabled),fe=document.activeElement,ie=(de=B.find(_e=>_e.ref.current===fe))==null?void 0:de.textValue,pe=B.map(_e=>_e.textValue),ke=Kle(pe,ae,ie),Pe=(ge=B.find(_e=>_e.textValue===ke))==null?void 0:ge.ref.current;(function _e(We){W.current=We,window.clearTimeout(z.current),We!==""&&(z.current=window.setTimeout(()=>_e(""),1e3))})(ae),Pe&&setTimeout(()=>Pe.focus())};w.useEffect(()=>()=>window.clearTimeout(z.current),[]),D_();const q=w.useCallback(te=>{var B,fe;return me.current===((B=Y.current)==null?void 0:B.side)&&Yle(te,(fe=Y.current)==null?void 0:fe.area)},[]);return b.jsx(Ale,{scope:n,searchRef:W,onItemEnter:w.useCallback(te=>{q(te)&&te.preventDefault()},[q]),onItemLeave:w.useCallback(te=>{var ae;q(te)||((ae=j.current)==null||ae.focus(),O(null))},[q]),onTriggerLeave:w.useCallback(te=>{q(te)&&te.preventDefault()},[q]),pointerGraceTimerRef:J,onPointerGraceIntentChange:w.useCallback(te=>{Y.current=te},[]),children:b.jsx(Ie,{...se,children:b.jsx(nS,{asChild:!0,trapped:i,onMountAutoFocus:ft(s,te=>{var ae;te.preventDefault(),(ae=j.current)==null||ae.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:b.jsx(Wy,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:v,onDismiss:S,children:b.jsx(U4,{asChild:!0,...A,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:N,onCurrentTabStopIdChange:O,onEntryFocus:ft(u,te=>{_.isUsingKeyboardRef.current||te.preventDefault()}),preventScrollOnEntryFocus:!0,children:b.jsx(DE,{role:"menu","aria-orientation":"vertical","data-state":OV(E.open),"data-radix-menu-content":"",dir:_.dir,...M,...C,ref:V,style:{outline:"none",...C.style},onKeyDown:ft(C.onKeyDown,te=>{const B=te.target.closest("[data-radix-menu-content]")===te.currentTarget,fe=te.ctrlKey||te.altKey||te.metaKey,ie=te.key.length===1;B&&(te.key==="Tab"&&te.preventDefault(),!fe&&ie&&xe(te.key));const pe=j.current;if(te.target!==pe||!Cle.includes(te.key))return;te.preventDefault();const Pe=I().filter(de=>!de.disabled).map(de=>de.ref.current);fV.includes(te.key)&&Pe.reverse(),Hle(Pe)}),onBlur:ft(t.onBlur,te=>{te.currentTarget.contains(te.target)||(window.clearTimeout(z.current),W.current="")}),onPointerMove:ft(t.onPointerMove,Ey(te=>{const ae=te.target,B=ue.current!==te.clientX;if(te.currentTarget.contains(ae)&&B){const fe=te.clientX>ue.current?"right":"left";me.current=fe,ue.current=te.clientX}}))})})})})})})});yV.displayName=Yo;var Lle="MenuGroup",PP=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return b.jsx(o0.div,{role:"group",...r,ref:e})});PP.displayName=Lle;var jle="MenuLabel",bV=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return b.jsx(o0.div,{...r,ref:e})});bV.displayName=jle;var Cw="MenuItem",dO="menu.itemSelect",_S=w.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=w.useRef(null),o=l0(Cw,t.__scopeMenu),a=EP(Cw,t.__scopeMenu),u=s0(e,s),f=w.useRef(!1),h=()=>{const m=s.current;if(!n&&m){const v=new CustomEvent(dO,{bubbles:!0,cancelable:!0});m.addEventListener(dO,S=>r==null?void 0:r(S),{once:!0}),wle(m,v),v.defaultPrevented?f.current=!1:o.onClose()}};return b.jsx(xV,{...i,ref:u,disabled:n,onClick:ft(t.onClick,h),onPointerDown:m=>{var v;(v=t.onPointerDown)==null||v.call(t,m),f.current=!0},onPointerUp:ft(t.onPointerUp,m=>{var v;f.current||(v=m.currentTarget)==null||v.click()}),onKeyDown:ft(t.onKeyDown,m=>{const v=a.searchRef.current!=="";n||v&&m.key===" "||Y1.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});_S.displayName=Cw;var xV=w.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=EP(Cw,n),a=pV(n),u=w.useRef(null),f=s0(e,u),[h,m]=w.useState(!1),[v,S]=w.useState("");return w.useEffect(()=>{const k=u.current;k&&S((k.textContent??"").trim())},[s.children]),b.jsx(Ty.ItemSlot,{scope:n,disabled:r,textValue:i??v,children:b.jsx(V4,{asChild:!0,...a,focusable:!r,children:b.jsx(o0.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:f,onPointerMove:ft(t.onPointerMove,Ey(k=>{r?o.onItemLeave(k):(o.onItemEnter(k),k.defaultPrevented||k.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ft(t.onPointerLeave,Ey(k=>o.onItemLeave(k))),onFocus:ft(t.onFocus,()=>m(!0)),onBlur:ft(t.onBlur,()=>m(!1))})})})}),Fle="MenuCheckboxItem",wV=w.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return b.jsx(EV,{scope:t.__scopeMenu,checked:n,children:b.jsx(_S,{role:"menuitemcheckbox","aria-checked":kw(n)?"mixed":n,...i,ref:e,"data-state":IP(n),onSelect:ft(i.onSelect,()=>r==null?void 0:r(kw(n)?!0:!n),{checkForDefaultPrevented:!1})})})});wV.displayName=Fle;var SV="MenuRadioGroup",[Ule,Vle]=th(SV,{value:void 0,onValueChange:()=>{}}),CV=w.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=Tl(r);return b.jsx(Ule,{scope:t.__scopeMenu,value:n,onValueChange:s,children:b.jsx(PP,{...i,ref:e})})});CV.displayName=SV;var kV="MenuRadioItem",TV=w.forwardRef((t,e)=>{const{value:n,...r}=t,i=Vle(kV,t.__scopeMenu),s=n===i.value;return b.jsx(EV,{scope:t.__scopeMenu,checked:s,children:b.jsx(_S,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":IP(s),onSelect:ft(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});TV.displayName=kV;var RP="MenuItemIndicator",[EV,Ble]=th(RP,{checked:!1}),_V=w.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=Ble(RP,n);return b.jsx(Al,{present:r||kw(s.checked)||s.checked===!0,children:b.jsx(o0.span,{...i,ref:e,"data-state":IP(s.checked)})})});_V.displayName=RP;var zle="MenuSeparator",PV=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return b.jsx(o0.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});PV.displayName=zle;var $le="MenuArrow",RV=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=ES(n);return b.jsx(LE,{...i,...r,ref:e})});RV.displayName=$le;var Wle="MenuSub",[Ghe,IV]=th(Wle),Bv="MenuSubTrigger",MV=w.forwardRef((t,e)=>{const n=nh(Bv,t.__scopeMenu),r=l0(Bv,t.__scopeMenu),i=IV(Bv,t.__scopeMenu),s=EP(Bv,t.__scopeMenu),o=w.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:u}=s,f={__scopeMenu:t.__scopeMenu},h=w.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return w.useEffect(()=>h,[h]),w.useEffect(()=>{const m=a.current;return()=>{window.clearTimeout(m),u(null)}},[a,u]),b.jsx(kP,{asChild:!0,...f,children:b.jsx(xV,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":OV(n.open),...t,ref:dV(e,i.onTriggerChange),onClick:m=>{var v;(v=t.onClick)==null||v.call(t,m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ft(t.onPointerMove,Ey(m=>{s.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:ft(t.onPointerLeave,Ey(m=>{var S,k;h();const v=(S=n.content)==null?void 0:S.getBoundingClientRect();if(v){const C=(k=n.content)==null?void 0:k.dataset.side,E=C==="right",_=E?-5:5,M=v[E?"left":"right"],A=v[E?"right":"left"];s.onPointerGraceIntentChange({area:[{x:m.clientX+_,y:m.clientY},{x:M,y:v.top},{x:A,y:v.top},{x:A,y:v.bottom},{x:M,y:v.bottom}],side:C}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(m),m.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ft(t.onKeyDown,m=>{var S;const v=s.searchRef.current!=="";t.disabled||v&&m.key===" "||kle[r.dir].includes(m.key)&&(n.onOpenChange(!0),(S=n.content)==null||S.focus(),m.preventDefault())})})})});MV.displayName=Bv;var AV="MenuSubContent",NV=w.forwardRef((t,e)=>{const n=gV(Yo,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=nh(Yo,t.__scopeMenu),o=l0(Yo,t.__scopeMenu),a=IV(AV,t.__scopeMenu),u=w.useRef(null),f=s0(e,u);return b.jsx(Ty.Provider,{scope:t.__scopeMenu,children:b.jsx(Al,{present:r||s.open,children:b.jsx(Ty.Slot,{scope:t.__scopeMenu,children:b.jsx(_P,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:f,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var m;o.isUsingKeyboardRef.current&&((m=u.current)==null||m.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:ft(t.onFocusOutside,h=>{h.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ft(t.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:ft(t.onKeyDown,h=>{var S;const m=h.currentTarget.contains(h.target),v=Tle[o.dir].includes(h.key);m&&v&&(s.onOpenChange(!1),(S=a.trigger)==null||S.focus(),h.preventDefault())})})})})})});NV.displayName=AV;function OV(t){return t?"open":"closed"}function kw(t){return t==="indeterminate"}function IP(t){return kw(t)?"indeterminate":t?"checked":"unchecked"}function Hle(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function qle(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Kle(t,e,n){const i=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=qle(t,Math.max(s,0));i.length===1&&(o=o.filter(f=>f!==n));const u=o.find(f=>f.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}function Gle(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],u=e[o],f=a.x,h=a.y,m=u.x,v=u.y;h>r!=v>r&&n<(m-f)*(r-h)/(v-h)+f&&(i=!i)}return i}function Yle(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Gle(n,e)}function Ey(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Qle=mV,Jle=kP,Xle=vV,Zle=yV,ece=PP,tce=bV,nce=_S,rce=wV,ice=CV,sce=TV,oce=_V,ace=PV,lce=RV,cce=MV,uce=NV,PS="DropdownMenu",[dce,Yhe]=Na(PS,[hV]),hs=hV(),[fce,DV]=dce(PS),LV=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,u=hs(e),f=w.useRef(null),[h,m]=nd({prop:i,defaultProp:s??!1,onChange:o,caller:PS});return b.jsx(fce,{scope:e,triggerId:bl(),triggerRef:f,contentId:bl(),open:h,onOpenChange:m,onOpenToggle:w.useCallback(()=>m(v=>!v),[m]),modal:a,children:b.jsx(Qle,{...u,open:h,onOpenChange:m,dir:r,modal:a,children:n})})};LV.displayName=PS;var jV="DropdownMenuTrigger",FV=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=DV(jV,n),o=hs(n);return b.jsx(Jle,{asChild:!0,...o,children:b.jsx(ble.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:vle(e,s.triggerRef),onPointerDown:ft(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ft(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});FV.displayName=jV;var hce="DropdownMenuPortal",UV=t=>{const{__scopeDropdownMenu:e,...n}=t,r=hs(e);return b.jsx(Xle,{...r,...n})};UV.displayName=hce;var VV="DropdownMenuContent",BV=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=DV(VV,n),s=hs(n),o=w.useRef(!1);return b.jsx(Zle,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:ft(t.onCloseAutoFocus,a=>{var u;o.current||(u=i.triggerRef.current)==null||u.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ft(t.onInteractOutside,a=>{const u=a.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0,h=u.button===2||f;(!i.modal||h)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});BV.displayName=VV;var pce="DropdownMenuGroup",zV=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=hs(n);return b.jsx(ece,{...i,...r,ref:e})});zV.displayName=pce;var mce="DropdownMenuLabel",$V=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=hs(n);return b.jsx(tce,{...i,...r,ref:e})});$V.displayName=mce;var gce="DropdownMenuItem",WV=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=hs(n);return b.jsx(nce,{...i,...r,ref:e})});WV.displayName=gce;var vce="DropdownMenuCheckboxItem",yce=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=hs(n);return b.jsx(rce,{...i,...r,ref:e})});yce.displayName=vce;var bce="DropdownMenuRadioGroup",HV=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=hs(n);return b.jsx(ice,{...i,...r,ref:e})});HV.displayName=bce;var xce="DropdownMenuRadioItem",qV=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=hs(n);return b.jsx(sce,{...i,...r,ref:e})});qV.displayName=xce;var wce="DropdownMenuItemIndicator",KV=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=hs(n);return b.jsx(oce,{...i,...r,ref:e})});KV.displayName=wce;var Sce="DropdownMenuSeparator",GV=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=hs(n);return b.jsx(ace,{...i,...r,ref:e})});GV.displayName=Sce;var Cce="DropdownMenuArrow",kce=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=hs(n);return b.jsx(lce,{...i,...r,ref:e})});kce.displayName=Cce;var Tce="DropdownMenuSubTrigger",Ece=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=hs(n);return b.jsx(cce,{...i,...r,ref:e})});Ece.displayName=Tce;var _ce="DropdownMenuSubContent",Pce=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=hs(n);return b.jsx(uce,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Pce.displayName=_ce;var Rce=LV,Ice=FV,Mce=UV,Ace=BV,Nce=zV,Oce=$V,Dce=WV,Lce=HV,jce=qV,Fce=KV,Uce=GV;function Q1({...t}){return b.jsx(Rce,{"data-slot":"dropdown-menu",...t})}function J1({...t}){return b.jsx(Ice,{"data-slot":"dropdown-menu-trigger",...t})}function YV({className:t,sideOffset:e=4,...n}){return b.jsx(Mce,{children:b.jsx(Ace,{"data-slot":"dropdown-menu-content",sideOffset:e,className:nn("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function Vce({...t}){return b.jsx(Nce,{"data-slot":"dropdown-menu-group",...t})}function Bce({className:t,inset:e,variant:n="default",...r}){return b.jsx(Dce,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":n,className:nn("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function zce({...t}){return b.jsx(Lce,{"data-slot":"dropdown-menu-radio-group",...t})}function $ce({className:t,children:e,...n}){return b.jsxs(jce,{"data-slot":"dropdown-menu-radio-item",className:nn("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-8 rounded-sm py-8 pr-8 pl-24 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[b.jsx("span",{className:"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center",children:b.jsx(Fce,{children:b.jsx(Yj,{className:"size-2 fill-current"})})}),e]})}function Wce({className:t,inset:e,...n}){return b.jsx(Oce,{"data-slot":"dropdown-menu-label","data-inset":e,className:nn("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...n})}function Hce({className:t,...e}){return b.jsx(Uce,{"data-slot":"dropdown-menu-separator",className:nn("bg-border -mx-1 my-1 h-px",t),...e})}const qce=({settings:t,isHost:e,audioDevices:n,videoDevices:r,audioActiveDeviceId:i,videoActiveDeviceId:s,setAudioActiveDevice:o,setVideoActiveDevice:a,mediaState:u,setAudioState:f,setVideoState:h})=>{const{invite_permission:m}=t,v=async _=>{o(_)},S=async _=>{a(_)},k=_=>{const M=_?n:r,A=_?i:s;return b.jsxs(YV,{side:"bottom",align:"start",children:[b.jsx(Wce,{children:_?"Audio Device":"Video Device"}),b.jsx(Hce,{}),M.map(I=>{const N=A===I.deviceId;return b.jsx(zce,{value:A,onValueChange:O=>_?v(O):S(O),children:b.jsx($ce,{value:I.deviceId,disabled:N,children:I.label},I.deviceId)},I.deviceId)})]})},C=si("size-40 rounded-full flex items-center justify-center cursor-pointer transition-all duration-200 hover:scale-105",{"bg-gray-100 border border-gray-200 text-gray-700 hover:bg-gray-200":u.audio,"bg-red-500 border border-red-500 text-white hover:bg-red-600":!u.audio}),E=si("size-40 rounded-full flex items-center justify-center cursor-pointer transition-all duration-200 hover:scale-105",{"bg-gray-100 border border-gray-200 text-gray-700 hover:bg-gray-200":u.video,"bg-red-500 border border-red-500 text-white hover:bg-red-600":!u.video});return b.jsxs("div",{className:"flex items-center justify-center gap-8 mt-16",children:[b.jsxs("div",{className:"relative",children:[b.jsx("button",{className:C,onClick:()=>f(!u.audio),children:u.audio?b.jsx(Xy,{size:16}):b.jsx(Zw,{size:16})}),b.jsxs(Q1,{children:[b.jsx(J1,{asChild:!0,children:b.jsx("button",{className:"absolute -bottom-4 -right-4 size-20 rounded-full border border-gray-300 bg-white hover:bg-gray-100 transition-colors duration-200 flex items-center justify-center shadow-sm",children:b.jsx(e1,{className:"size-8 text-gray-600 rotate-180"})})}),k(!0)]})]}),b.jsxs("div",{className:"relative",children:[b.jsx("button",{className:E,onClick:()=>h(!u.video),children:u.video?b.jsx(eS,{size:16}):b.jsx(I_,{size:16})}),b.jsxs(Q1,{children:[b.jsx(J1,{asChild:!0,children:b.jsx("button",{className:"absolute -bottom-4 -right-4 size-20 rounded-full border border-gray-300 bg-white hover:bg-gray-100 transition-colors duration-200 flex items-center justify-center shadow-sm",children:b.jsx(e1,{className:"size-8 text-gray-600 rotate-180"})})}),k(!1)]})]}),b.jsx(go,{orientation:"vertical",className:"h-6 bg-gray-200"}),b.jsxs("div",{className:"flex items-center gap-8",children:[(m||e)&&b.jsx(UF,{}),b.jsx(uV,{})]})]})},Kce="/assets/join_tone-RSu01O8x.mp3",Gce=({isHost:t,username:e,setUsername:n,avatarSrc:r,isCallActive:i})=>{const{sendSystemEvent:s}=$y(),{register:o,watch:a,formState:{errors:u,isValid:f},reset:h}=Gw({mode:"onChange",defaultValues:{username:e||""}}),m=a("username");w.useEffect(()=>{h({username:e||""})},[e,h]);const{pathname:v}=qs(),S=Il(),k=v.split("/")[2],C=cs.get("rsCookie"),{mutate:E,isPending:_}=Ju({mutationFn:()=>V9(k),retry:!0}),M=async()=>{try{const O=await G9(k,C);await q9(k,m,r,C),t&&E();const j=new Audio(Kce);j.volume=.6,j.play(),s({type:"user.joined",payload:{}}),S(`/room/${k}/call`,{state:{roomID:k,sessionID:O},replace:!0})}catch(O){console.error(O)}},A=()=>u.username?b.jsxs("div",{className:"flex items-center gap-4 mt-8",children:[b.jsx(BX,{className:"size-16 text-red-500"}),b.jsx("span",{className:"text-xs text-red-500",children:u.username.message})]}):b.jsx("p",{className:"text-xs text-muted-foreground",children:"This will be your display name."}),I=()=>_?"Starting call...":t?"Start Call":"Join Call",N=!f||!i&&!t||_;return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"mb-16",children:[b.jsx(tS,{placeholder:"Enter your name",...o("username",{required:"Username is required.",validate:O=>!!O.trim()||"Username must not be empty.",minLength:{value:3,message:"Username must be at least 3 characters long."},maxLength:{value:16,message:"Username should not exceed over 16 characters length."}}),onChange:O=>n(O.target.value)}),b.jsx("div",{className:"mt-8 ml-12",children:A()})]}),b.jsx(ls,{variant:"call",className:"w-full",disabled:N,onClick:M,children:I()}),!i&&!t&&b.jsx("div",{className:"flex justify-center mt-8",children:b.jsx("span",{className:"text-xs text-muted-foreground text-center",children:"Please wait for the host to start the call."})})]})},QV=6048e5,Yce=864e5,Qce=6e4,Jce=36e5,Xce=1e3,Jb=43200,fO=1440,hO=Symbol.for("constructDateFrom");function li(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&hO in t?t[hO](e):t instanceof Date?new t.constructor(e):new Date(e)}function Xn(t,e){return li(e||t,t)}function JV(t,e,n){const r=Xn(t,n==null?void 0:n.in);return isNaN(e)?li((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}let Zce={};function rh(){return Zce}function cd(t,e){var a,u,f,h;const n=rh(),r=(e==null?void 0:e.weekStartsOn)??((u=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??0,i=Xn(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function jm(t,e){return cd(t,{...e,weekStartsOn:1})}function XV(t,e){const n=Xn(t,e==null?void 0:e.in),r=n.getFullYear(),i=li(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=jm(i),o=li(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=jm(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function Fm(t){const e=Xn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function RS(t,...e){const n=li.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function pO(t,e){const n=Xn(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function eue(t,e,n){const[r,i]=RS(n==null?void 0:n.in,t,e),s=pO(r),o=pO(i),a=+s-Fm(s),u=+o-Fm(o);return Math.round((a-u)/Yce)}function tue(t,e){const n=XV(t,e),r=li(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),jm(r)}function Nx(t,e){const n=+Xn(t)-+Xn(e);return n<0?-1:n>0?1:n}function nue(t){return li(t,Date.now())}function rue(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function iue(t){return!(!rue(t)&&typeof t!="number"||isNaN(+Xn(t)))}function sue(t,e,n){const[r,i]=RS(n==null?void 0:n.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function oue(t){return e=>{const n=Math.trunc,r=n(e);return r===0?0:r}}function aue(t,e){return+Xn(t)-+Xn(e)}function lue(t,e){const n=Xn(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function cue(t,e){const n=Xn(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function uue(t,e){const n=Xn(t,e==null?void 0:e.in);return+lue(n,e)==+cue(n,e)}function due(t,e,n){const[r,i,s]=RS(n==null?void 0:n.in,t,t,e),o=Nx(i,s),a=Math.abs(sue(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let u=Nx(i,s)===-o;uue(r)&&a===1&&Nx(r,s)===1&&(u=!1);const f=o*(a-+u);return f===0?0:f}function fue(t,e,n){const r=aue(t,e)/1e3;return oue()(r)}function hue(t,e){const n=Xn(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const pue={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},mue=(t,e,n)=>{let r;const i=pue[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function qk(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const gue={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},vue={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},yue={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bue={date:qk({formats:gue,defaultWidth:"full"}),time:qk({formats:vue,defaultWidth:"full"}),dateTime:qk({formats:yue,defaultWidth:"full"})},xue={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},wue=(t,e,n,r)=>xue[t];function Mv(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const Sue={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Cue={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},kue={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Tue={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Eue={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_ue={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Pue=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Rue={ordinalNumber:Pue,era:Mv({values:Sue,defaultWidth:"wide"}),quarter:Mv({values:Cue,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Mv({values:kue,defaultWidth:"wide"}),day:Mv({values:Tue,defaultWidth:"wide"}),dayPeriod:Mv({values:Eue,defaultWidth:"wide",formattingValues:_ue,defaultFormattingWidth:"wide"})};function Av(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(a)?Mue(a,m=>m.test(o)):Iue(a,m=>m.test(o));let f;f=t.valueCallback?t.valueCallback(u):u,f=n.valueCallback?n.valueCallback(f):f;const h=e.slice(o.length);return{value:f,rest:h}}}function Iue(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Mue(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Aue(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const Nue=/^(\d+)(th|st|nd|rd)?/i,Oue=/\d+/i,Due={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Lue={any:[/^b/i,/^(a|c)/i]},jue={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Fue={any:[/1/i,/2/i,/3/i,/4/i]},Uue={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Vue={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Bue={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},zue={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$ue={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Wue={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Hue={ordinalNumber:Aue({matchPattern:Nue,parsePattern:Oue,valueCallback:t=>parseInt(t,10)}),era:Av({matchPatterns:Due,defaultMatchWidth:"wide",parsePatterns:Lue,defaultParseWidth:"any"}),quarter:Av({matchPatterns:jue,defaultMatchWidth:"wide",parsePatterns:Fue,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Av({matchPatterns:Uue,defaultMatchWidth:"wide",parsePatterns:Vue,defaultParseWidth:"any"}),day:Av({matchPatterns:Bue,defaultMatchWidth:"wide",parsePatterns:zue,defaultParseWidth:"any"}),dayPeriod:Av({matchPatterns:$ue,defaultMatchWidth:"any",parsePatterns:Wue,defaultParseWidth:"any"})},MP={code:"en-US",formatDistance:mue,formatLong:bue,formatRelative:wue,localize:Rue,match:Hue,options:{weekStartsOn:0,firstWeekContainsDate:1}};function que(t,e){const n=Xn(t,e==null?void 0:e.in);return eue(n,hue(n))+1}function ZV(t,e){const n=Xn(t,e==null?void 0:e.in),r=+jm(n)-+tue(n);return Math.round(r/QV)+1}function AP(t,e){var h,m,v,S;const n=Xn(t,e==null?void 0:e.in),r=n.getFullYear(),i=rh(),s=(e==null?void 0:e.firstWeekContainsDate)??((m=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??i.firstWeekContainsDate??((S=(v=i.locale)==null?void 0:v.options)==null?void 0:S.firstWeekContainsDate)??1,o=li((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=cd(o,e),u=li((e==null?void 0:e.in)||t,0);u.setFullYear(r,0,s),u.setHours(0,0,0,0);const f=cd(u,e);return+n>=+a?r+1:+n>=+f?r:r-1}function Kue(t,e){var a,u,f,h;const n=rh(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,i=AP(t,e),s=li((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),cd(s,e)}function eB(t,e){const n=Xn(t,e==null?void 0:e.in),r=+cd(n,e)-+Kue(n,e);return Math.round(r/QV)+1}function Un(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ku={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Un(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Un(n+1,2)},d(t,e){return Un(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Un(t.getHours()%12||12,e.length)},H(t,e){return Un(t.getHours(),e.length)},m(t,e){return Un(t.getMinutes(),e.length)},s(t,e){return Un(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Un(i,e.length)}},Ap={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},mO={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ku.y(t,e)},Y:function(t,e,n,r){const i=AP(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Un(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Un(s,e.length)},R:function(t,e){const n=XV(t);return Un(n,e.length)},u:function(t,e){const n=t.getFullYear();return Un(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Un(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Un(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ku.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Un(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=eB(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Un(i,e.length)},I:function(t,e,n){const r=ZV(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Un(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ku.d(t,e)},D:function(t,e,n){const r=que(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Un(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Un(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Un(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Un(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Ap.noon:r===0?i=Ap.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Ap.evening:r>=12?i=Ap.afternoon:r>=4?i=Ap.morning:i=Ap.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ku.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ku.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Un(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Un(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ku.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ku.s(t,e)},S:function(t,e){return ku.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return vO(r);case"XXXX":case"XX":return pf(r);case"XXXXX":case"XXX":default:return pf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return vO(r);case"xxxx":case"xx":return pf(r);case"xxxxx":case"xxx":default:return pf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+gO(r,":");case"OOOO":default:return"GMT"+pf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+gO(r,":");case"zzzz":default:return"GMT"+pf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Un(r,e.length)},T:function(t,e,n){return Un(+t,e.length)}};function gO(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Un(s,2)}function vO(t,e){return t%60===0?(t>0?"-":"+")+Un(Math.abs(t)/60,2):pf(t,e)}function pf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Un(Math.trunc(r/60),2),s=Un(r%60,2);return n+i+e+s}const yO=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},tB=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Gue=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return yO(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",yO(r,e)).replace("{{time}}",tB(i,e))},X1={p:tB,P:Gue},Yue=/^D+$/,Que=/^Y+$/,Jue=["D","DD","YY","YYYY"];function nB(t){return Yue.test(t)}function rB(t){return Que.test(t)}function Z1(t,e,n){const r=Xue(t,e,n);if(console.warn(r),Jue.includes(t))throw new RangeError(r)}function Xue(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Zue=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ede=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tde=/^'([^]*?)'?$/,nde=/''/g,rde=/[a-zA-Z]/;function iB(t,e,n){var h,m,v,S;const r=rh(),i=r.locale??MP,s=r.firstWeekContainsDate??((m=(h=r.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=r.weekStartsOn??((S=(v=r.locale)==null?void 0:v.options)==null?void 0:S.weekStartsOn)??0,a=Xn(t,n==null?void 0:n.in);if(!iue(a))throw new RangeError("Invalid time value");let u=e.match(ede).map(k=>{const C=k[0];if(C==="p"||C==="P"){const E=X1[C];return E(k,i.formatLong)}return k}).join("").match(Zue).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const C=k[0];if(C==="'")return{isToken:!1,value:ide(k)};if(mO[C])return{isToken:!0,value:k};if(C.match(rde))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:k}});i.localize.preprocessor&&(u=i.localize.preprocessor(a,u));const f={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return u.map(k=>{if(!k.isToken)return k.value;const C=k.value;(rB(C)||nB(C))&&Z1(C,e,String(t));const E=mO[C[0]];return E(a,C,i.localize,f)}).join("")}function ide(t){const e=t.match(tde);return e?e[1].replace(nde,"'"):t}function sde(t,e,n){const r=rh(),i=(n==null?void 0:n.locale)??r.locale??MP,s=2520,o=Nx(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o}),[u,f]=RS(n==null?void 0:n.in,...o>0?[e,t]:[t,e]),h=fue(f,u),m=(Fm(f)-Fm(u))/1e3,v=Math.round((h-m)/60);let S;if(v<2)return v===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",v,a);if(v<45)return i.formatDistance("xMinutes",v,a);if(v<90)return i.formatDistance("aboutXHours",1,a);if(v<fO){const k=Math.round(v/60);return i.formatDistance("aboutXHours",k,a)}else{if(v<s)return i.formatDistance("xDays",1,a);if(v<Jb){const k=Math.round(v/fO);return i.formatDistance("xDays",k,a)}else if(v<Jb*2)return S=Math.round(v/Jb),i.formatDistance("aboutXMonths",S,a)}if(S=due(f,u),S<12){const k=Math.round(v/Jb);return i.formatDistance("xMonths",k,a)}else{const k=S%12,C=Math.trunc(S/12);return k<3?i.formatDistance("aboutXYears",C,a):k<9?i.formatDistance("overXYears",C,a):i.formatDistance("almostXYears",C+1,a)}}function bO(t,e){return sde(t,nue(t),e)}function ode(){return Object.assign({},rh())}function ade(t,e){const n=Xn(t,e==null?void 0:e.in).getDay();return n===0?7:n}function lde(t,e){const n=cde(e)?new e(0):li(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function cde(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const ude=10;class sB{constructor(){at(this,"subPriority",0)}validate(e,n){return!0}}class dde extends sB{constructor(e,n,r,i,s){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class fde extends sB{constructor(n,r){super();at(this,"priority",ude);at(this,"subPriority",-1);this.context=n||(i=>li(r,i))}set(n,r){return r.timestampIsSet?n:li(n,lde(n,this.context))}}class In{run(e,n,r,i){const s=this.parse(e,n,r,i);return s?{setter:new dde(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,n,r){return!0}}class hde extends In{constructor(){super(...arguments);at(this,"priority",140);at(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const Dr={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},gl={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Lr(t,e){return t&&{value:e(t.value),rest:t.rest}}function pr(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function vl(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*Jce+s*Qce+o*Xce),rest:e.slice(n[0].length)}}function oB(t){return pr(Dr.anyDigitsSigned,t)}function _r(t,e){switch(t){case 1:return pr(Dr.singleDigit,e);case 2:return pr(Dr.twoDigits,e);case 3:return pr(Dr.threeDigits,e);case 4:return pr(Dr.fourDigits,e);default:return pr(new RegExp("^\\d{1,"+t+"}"),e)}}function Tw(t,e){switch(t){case 1:return pr(Dr.singleDigitSigned,e);case 2:return pr(Dr.twoDigitsSigned,e);case 3:return pr(Dr.threeDigitsSigned,e);case 4:return pr(Dr.fourDigitsSigned,e);default:return pr(new RegExp("^-?\\d{1,"+t+"}"),e)}}function NP(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function aB(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function lB(t){return t%400===0||t%4===0&&t%100!==0}class pde extends In{constructor(){super(...arguments);at(this,"priority",130);at(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return Lr(_r(4,n),s);case"yo":return Lr(i.ordinalNumber(n,{unit:"year"}),s);default:return Lr(_r(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const s=n.getFullYear();if(i.isTwoDigitYear){const a=aB(i.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class mde extends In{constructor(){super(...arguments);at(this,"priority",130);at(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Lr(_r(4,n),s);case"Yo":return Lr(i.ordinalNumber(n,{unit:"year"}),s);default:return Lr(_r(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,s){const o=AP(n,s);if(i.isTwoDigitYear){const u=aB(i.year,o);return n.setFullYear(u,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),cd(n,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),cd(n,s)}}class gde extends In{constructor(){super(...arguments);at(this,"priority",130);at(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return Tw(r==="R"?4:r.length,n)}set(n,r,i){const s=li(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),jm(s)}}class vde extends In{constructor(){super(...arguments);at(this,"priority",130);at(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return Tw(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class yde extends In{constructor(){super(...arguments);at(this,"priority",120);at(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return _r(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class bde extends In{constructor(){super(...arguments);at(this,"priority",120);at(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return _r(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class xde extends In{constructor(){super(...arguments);at(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);at(this,"priority",110)}parse(n,r,i){const s=o=>o-1;switch(r){case"M":return Lr(pr(Dr.month,n),s);case"MM":return Lr(_r(2,n),s);case"Mo":return Lr(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class wde extends In{constructor(){super(...arguments);at(this,"priority",110);at(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const s=o=>o-1;switch(r){case"L":return Lr(pr(Dr.month,n),s);case"LL":return Lr(_r(2,n),s);case"Lo":return Lr(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function Sde(t,e,n){const r=Xn(t,n==null?void 0:n.in),i=eB(r,n)-e;return r.setDate(r.getDate()-i*7),Xn(r,n==null?void 0:n.in)}class Cde extends In{constructor(){super(...arguments);at(this,"priority",100);at(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return pr(Dr.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return _r(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,s){return cd(Sde(n,i,s),s)}}function kde(t,e,n){const r=Xn(t,n==null?void 0:n.in),i=ZV(r,n)-e;return r.setDate(r.getDate()-i*7),r}class Tde extends In{constructor(){super(...arguments);at(this,"priority",100);at(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return pr(Dr.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return _r(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return jm(kde(n,i))}}const Ede=[31,28,31,30,31,30,31,31,30,31,30,31],_de=[31,29,31,30,31,30,31,31,30,31,30,31];class Pde extends In{constructor(){super(...arguments);at(this,"priority",90);at(this,"subPriority",1);at(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return pr(Dr.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return _r(r.length,n)}}validate(n,r){const i=n.getFullYear(),s=lB(i),o=n.getMonth();return s?r>=1&&r<=_de[o]:r>=1&&r<=Ede[o]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class Rde extends In{constructor(){super(...arguments);at(this,"priority",90);at(this,"subpriority",1);at(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return pr(Dr.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return _r(r.length,n)}}validate(n,r){const i=n.getFullYear();return lB(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function OP(t,e,n){var m,v,S,k;const r=rh(),i=(n==null?void 0:n.weekStartsOn)??((v=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((k=(S=r.locale)==null?void 0:S.options)==null?void 0:k.weekStartsOn)??0,s=Xn(t,n==null?void 0:n.in),o=s.getDay(),u=(e%7+7)%7,f=7-i,h=e<0||e>6?e-(o+f)%7:(u+f)%7-(o+f)%7;return JV(s,h,n)}class Ide extends In{constructor(){super(...arguments);at(this,"priority",90);at(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=OP(n,i,s),n.setHours(0,0,0,0),n}}class Mde extends In{constructor(){super(...arguments);at(this,"priority",90);at(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,s){const o=a=>{const u=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+u};switch(r){case"e":case"ee":return Lr(_r(r.length,n),o);case"eo":return Lr(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=OP(n,i,s),n.setHours(0,0,0,0),n}}class Ade extends In{constructor(){super(...arguments);at(this,"priority",90);at(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,s){const o=a=>{const u=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+u};switch(r){case"c":case"cc":return Lr(_r(r.length,n),o);case"co":return Lr(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=OP(n,i,s),n.setHours(0,0,0,0),n}}function Nde(t,e,n){const r=Xn(t,n==null?void 0:n.in),i=ade(r,n),s=e-i;return JV(r,s,n)}class Ode extends In{constructor(){super(...arguments);at(this,"priority",90);at(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return _r(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return Lr(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return Lr(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Lr(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Lr(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=Nde(n,i),n.setHours(0,0,0,0),n}}class Dde extends In{constructor(){super(...arguments);at(this,"priority",80);at(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(NP(i),0,0,0),n}}class Lde extends In{constructor(){super(...arguments);at(this,"priority",80);at(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(NP(i),0,0,0),n}}class jde extends In{constructor(){super(...arguments);at(this,"priority",80);at(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(NP(i),0,0,0),n}}class Fde extends In{constructor(){super(...arguments);at(this,"priority",70);at(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return pr(Dr.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return _r(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const s=n.getHours()>=12;return s&&i<12?n.setHours(i+12,0,0,0):!s&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class Ude extends In{constructor(){super(...arguments);at(this,"priority",70);at(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return pr(Dr.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return _r(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class Vde extends In{constructor(){super(...arguments);at(this,"priority",70);at(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return pr(Dr.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return _r(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class Bde extends In{constructor(){super(...arguments);at(this,"priority",70);at(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return pr(Dr.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return _r(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const s=i<=24?i%24:i;return n.setHours(s,0,0,0),n}}class zde extends In{constructor(){super(...arguments);at(this,"priority",60);at(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return pr(Dr.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return _r(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class $de extends In{constructor(){super(...arguments);at(this,"priority",50);at(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return pr(Dr.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return _r(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class Wde extends In{constructor(){super(...arguments);at(this,"priority",30);at(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Lr(_r(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class Hde extends In{constructor(){super(...arguments);at(this,"priority",10);at(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return vl(gl.basicOptionalMinutes,n);case"XX":return vl(gl.basic,n);case"XXXX":return vl(gl.basicOptionalSeconds,n);case"XXXXX":return vl(gl.extendedOptionalSeconds,n);case"XXX":default:return vl(gl.extended,n)}}set(n,r,i){return r.timestampIsSet?n:li(n,n.getTime()-Fm(n)-i)}}class qde extends In{constructor(){super(...arguments);at(this,"priority",10);at(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return vl(gl.basicOptionalMinutes,n);case"xx":return vl(gl.basic,n);case"xxxx":return vl(gl.basicOptionalSeconds,n);case"xxxxx":return vl(gl.extendedOptionalSeconds,n);case"xxx":default:return vl(gl.extended,n)}}set(n,r,i){return r.timestampIsSet?n:li(n,n.getTime()-Fm(n)-i)}}class Kde extends In{constructor(){super(...arguments);at(this,"priority",40);at(this,"incompatibleTokens","*")}parse(n){return oB(n)}set(n,r,i){return[li(n,i*1e3),{timestampIsSet:!0}]}}class Gde extends In{constructor(){super(...arguments);at(this,"priority",20);at(this,"incompatibleTokens","*")}parse(n){return oB(n)}set(n,r,i){return[li(n,i),{timestampIsSet:!0}]}}const Yde={G:new hde,y:new pde,Y:new mde,R:new gde,u:new vde,Q:new yde,q:new bde,M:new xde,L:new wde,w:new Cde,I:new Tde,d:new Pde,D:new Rde,E:new Ide,e:new Mde,c:new Ade,i:new Ode,a:new Dde,b:new Lde,B:new jde,h:new Fde,H:new Ude,K:new Vde,k:new Bde,m:new zde,s:new $de,S:new Wde,X:new Hde,x:new qde,t:new Kde,T:new Gde},Qde=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Jde=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Xde=/^'([^]*?)'?$/,Zde=/''/g,efe=/\S/,tfe=/[a-zA-Z]/;function nfe(t,e,n,r){var E,_,M,A;const i=()=>li(n,NaN),s=ode(),o=s.locale??MP,a=s.firstWeekContainsDate??((_=(E=s.locale)==null?void 0:E.options)==null?void 0:_.firstWeekContainsDate)??1,u=s.weekStartsOn??((A=(M=s.locale)==null?void 0:M.options)==null?void 0:A.weekStartsOn)??0,f={firstWeekContainsDate:a,weekStartsOn:u,locale:o},h=[new fde(r==null?void 0:r.in,n)],m=e.match(Jde).map(I=>{const N=I[0];if(N in X1){const O=X1[N];return O(I,o.formatLong)}return I}).join("").match(Qde),v=[];for(let I of m){rB(I)&&Z1(I,e,t),nB(I)&&Z1(I,e,t);const N=I[0],O=Yde[N];if(O){const{incompatibleTokens:j}=O;if(Array.isArray(j)){const z=v.find(W=>j.includes(W.token)||W.token===N);if(z)throw new RangeError(`The format string mustn't contain \`${z.fullToken}\` and \`${I}\` at the same time`)}else if(O.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${I}\` and any other token at the same time`);v.push({token:N,fullToken:I});const V=O.run(t,I,o.match,f);if(!V)return i();h.push(V.setter),t=V.rest}else{if(N.match(tfe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");if(I==="''"?I="'":N==="'"&&(I=rfe(I)),t.indexOf(I)===0)t=t.slice(I.length);else return i()}}if(t.length>0&&efe.test(t))return i();const S=h.map(I=>I.priority).sort((I,N)=>N-I).filter((I,N,O)=>O.indexOf(I)===N).map(I=>h.filter(N=>N.priority===I).sort((N,O)=>O.subPriority-N.subPriority)).map(I=>I[0]);let k=Xn(n,r==null?void 0:r.in);if(isNaN(+k))return i();const C={};for(const I of S){if(!I.validate(k,f))return i();const N=I.set(k,C,f);Array.isArray(N)?(k=N[0],Object.assign(C,N[1])):k=N}return k}function rfe(t){return t.match(Xde)[1].replace(Zde,"'")}const ife=({isHost:t,host:e,createdAt:n,isCallActive:r,callStartedAt:i})=>t?b.jsxs("div",{className:"flex items-center justify-center gap-4 mt-24",children:[b.jsx(Em,{size:12,className:"text-yellow-600"}),b.jsx("span",{className:"text-xs text-gray-600",children:"You are the host of this call."})]}):b.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 mt-24",children:[b.jsxs("div",{className:"flex items-center justify-center gap-4",children:[b.jsx(Em,{size:12,className:"text-yellow-600"}),b.jsxs("span",{className:"text-xs text-gray-600",children:[e," created this room, ",bO(new Date(n))," ","ago."]})]}),r&&b.jsxs("div",{className:"flex items-center justify-center gap-4",children:[b.jsx(YX,{size:12,className:"text-green-600"}),b.jsxs("span",{className:"text-xs text-gray-600",children:["Call started, ",bO(new Date(i))," ago."]})]})]}),sfe=({selectedAudioDevice:t,selectedVideoDevice:e})=>{const n=r=>r?r.label:b.jsx("p",{className:"text-xs text-yellow-600",children:"Requires media permission"});return b.jsxs("div",{className:`flex flex-col gap-8 p-8 mt-24 outline outline-slate-200 rounded-4 
                shadow-[0_4px_20px_-4px_rgba(0,0,255,0.1)]
                transition-shadow duration-300`,children:[b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx("span",{className:"text-xs",children:"Audio:"}),b.jsx("span",{className:"text-xs text-muted-foreground",children:n(t)})]}),b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx("span",{className:"text-xs",children:"Video:"}),b.jsx("span",{className:"text-xs text-muted-foreground",children:n(e)})]})]})},xO=({participant:t,participantsInCall:e,isLobby:n})=>b.jsx("div",{children:b.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-8 hover:bg-gray-100 duration-150",children:[t.avatar_src&&b.jsx(Pm,{size:"sm",src:t.avatar_src}),b.jsx("div",{className:"flex flex-col",children:b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("span",{children:t.username}),t.isHost&&b.jsx(Em,{size:12,className:"text-yellow-600"}),n&&(e==null?void 0:e.length)===0&&b.jsx("span",{className:"text-xs text-gray-500",children:"Waiting in lobby"})]})})]})},t.id),ofe=({guests:t,participantsInLobby:e,participantsInCall:n})=>{const r=t.length+e.length;return b.jsxs(e0,{children:[b.jsx(oS,{asChild:!0,children:b.jsx("div",{className:"text-sm font-light text-blue-600 hover:text-blue-700 duration-150 cursor-pointer",children:"View All"})}),b.jsxs(Ym,{className:"max-w-[400px]",children:[b.jsx(Qm,{children:b.jsx(Jm,{children:b.jsxs("div",{className:"flex items-center gap-4",children:["Participants ",b.jsx(eF,{className:"size-16"})]})})}),b.jsx(go,{}),b.jsxs("div",{className:"flex gap-24 mt-8",children:[n.length>0&&b.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[b.jsxs("div",{className:"text-xs font-medium text-gray-600",children:["IN CALL (",n.length,")"]}),b.jsx("div",{className:"flex flex-col gap-4 text-sm",children:n.map(i=>b.jsx(xO,{participant:i},i.id))})]}),n.length>0&&e.length>0&&b.jsx(go,{orientation:"vertical"}),r>0&&b.jsx(b.Fragment,{children:b.jsxs("div",{className:"flex flex-col gap-4 text-left w-full",children:[b.jsxs("div",{className:"text-xs text-left font-medium text-gray-600",children:["IN LOBBY (",r,")"]}),b.jsx("div",{className:"flex flex-col gap-4 text-sm",children:e.map(i=>b.jsx(xO,{participant:i,participantsInCall:n,isLobby:!0},i.id))})]})})]})]})]})},wO=({participant:t})=>b.jsxs("div",{className:"flex items-center gap-4",children:[t.isHost&&b.jsx(Em,{size:12,className:"text-yellow-600"}),t.username]},t.id),afe=({guests:t,participants:e,participantsInCall:n})=>{const r=e.length+t.length+n.length,i=e.filter(a=>!n.some(u=>u.session_id===a.session_id)),s=()=>n.length===0?null:b.jsxs("div",{className:"flex flex-col gap-4",children:[b.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["IN CALL (",n.length,")"]}),b.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:n.map(a=>b.jsx(wO,{participant:a},a.id))})]}),o=()=>{if(t.length===0&&i.length===0)return null;if(i.length>0){const a=i.length+t.length;return b.jsxs(b.Fragment,{children:[n.length>0&&b.jsx(go,{}),b.jsxs("div",{className:"flex flex-col gap-4",children:[b.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["IN LOBBY (",a,")"]}),b.jsx("div",{className:"flex flex-col text-xs text-gray-500",children:i.map(u=>b.jsx(wO,{participant:u},u.id))})]})]})}};return b.jsxs("div",{className:"flex flex-col gap-4 border border-gray-200 rounded-8 p-12 mt-12",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("span",{className:"font-medium",children:"Participants"}),r>0&&b.jsx(ofe,{guests:t,participantsInLobby:i,participantsInCall:n})]}),b.jsxs("div",{className:"flex flex-col gap-8",children:[s(),o()]})]})},lfe=({username:t,mediaState:e,videoTrack:n,onGetSrc:r})=>{const i=w.useRef(null),s=i.current;return w.useEffect(()=>{n&&s&&(s.srcObject=n.mediaStream)},[n,s]),b.jsxs("div",{className:"relative size-full rounded-3xl bg-black z-50 mx-auto",children:[b.jsxs("div",{className:"relative size-full",children:[b.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 hidden sm:block",children:b.jsx(Pm,{size:"lg",value:t,editingMode:!0,onGetSrc:r})}),e.video&&b.jsx("video",{ref:i,muted:!e.audio,autoPlay:!0,playsInline:!0,className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 size-full object-cover rounded-3xl"})]}),b.jsxs("div",{className:"absolute bottom-24 left-24 flex gap-8 items-center text-xs text-green-400",children:[e.audio&&b.jsx("div",{className:"p-8 bg-green-400/20 rounded-full",children:b.jsx(Xy,{size:20,className:"text-green-400"})}),e.video&&b.jsx("div",{className:"p-8 bg-green-400/20 rounded-full",children:b.jsx(eS,{size:20,className:"text-green-400"})})]})]})},cfe=E4({strict_mode:T4()}),ufe=({roomID:t,isHost:e})=>{const{settings:n}=Fw(),r=(n==null?void 0:n.strict_mode)||!1,i=Gw({resolver:P4(cfe),defaultValues:{strict_mode:r}});w.useEffect(()=>{i.setValue("strict_mode",r)},[r,i]);const s=Ju({mutationFn:f=>sL(t,{...n,strict_mode:f.strict_mode})}),o=(f,h)=>{i.setValue(f,h);const m=i.getValues();s.mutate(m)},a=()=>e?b.jsxs("span",{children:["Strict mode means ",b.jsx("span",{className:"font-bold",children:"only the host"})," can"," ",b.jsx("span",{className:"font-bold",children:"invite"}),","," ",b.jsx("span",{className:"font-bold",children:"chat"}),", or"," ",b.jsx("span",{className:"font-bold",children:"share screen"})," by default. You can adjust these settings ",b.jsx("span",{className:"font-bold",children:"anytime"}),"."]}):b.jsxs("span",{children:["Strict mode means ",b.jsx("span",{className:"font-bold",children:"only the host"})," can"," ",b.jsx("span",{className:"font-bold",children:"invite"}),","," ",b.jsx("span",{className:"font-bold",children:"chat"}),", or"," ",b.jsx("span",{className:"font-bold",children:"share screen"})," by default. These settings can be adjusted by the host"," ",b.jsx("span",{className:"font-bold",children:"anytime"}),"."]}),u=si("flex flex-col justify-between gap-8 w-full p-12 mt-20 border rounded-8",{"border-slate-200":e,"border-yellow-400":!e&&(n==null?void 0:n.strict_mode)});return b.jsxs("div",{className:u,children:[b.jsxs("div",{className:"flex items-center justify-between h-20",children:[b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsxs(cy,{children:[b.jsx(uy,{asChild:!0,children:b.jsx(_m,{size:16,className:"text-purple-500"})}),b.jsx(Cm,{side:"top",children:a()})]}),b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx(Jy,{size:16,className:"text-yellow-600"}),b.jsx("span",{className:"text-sm text-gray-600 font-medium whitespace-nowrap",children:"Strict mode"})]})]}),e?b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx(xP,{htmlFor:"strict_mode",className:"text-sm text-gray-400 font-light whitespace-nowrap",children:i.watch("strict_mode")?"Enabled":"Disabled"}),b.jsx(I4,{...i,children:b.jsx(K1,{control:i.control,name:"strict_mode",render:({field:f})=>b.jsx(mf,{children:b.jsx(gf,{children:b.jsx(TS,{id:"strict_mode",checked:f.value,onCheckedChange:h=>{o("strict_mode",h)},className:"mt-4"})})})})})]}):b.jsx("span",{className:"text-sm text-gray-400 font-light whitespace-nowrap",children:N_.capitalize(n!=null&&n.strict_mode?"enabled":"disabled")})]}),b.jsx("span",{className:"text-xs text-gray-500 font-light",children:"Strict mode, when set by the host, restricts participant actions to host-only permissions."})]})},dfe=()=>{const{pathname:t}=qs(),{connectSystemEvents:e}=$y(),{mediaState:n,setAudioState:r,setVideoState:i,setVideoTrack:s,videoTrack:o}=bE(),{connectSettings:a,settings:u}=Fw(),f=u||{strict_mode:!1,invite_permission:!1,invitation_expiry:"30"},[h,m]=w.useState([]),[v,S]=w.useState(""),[k,C]=w.useState(null),[E,_]=w.useState({is_active:!1,started_at:""}),M=cs.get("rsCookie"),A=t.split("/")[2];w.useEffect(()=>{A&&a(A)},[A,a]);const I=w.useRef(null);CP({message:"Are you sure you want to leave the lobby? You will be disconnected from the room.",onBeforeLeave:()=>{var pe;o&&o.stop(),((pe=I.current)==null?void 0:pe.readyState)===WebSocket.OPEN&&I.current.close(1e3,"Component unmounting"),Bx(A)},allowedPaths:["/call"]}),w.useEffect(()=>{e(A)},[A,e]),w.useEffect(()=>{if(I.current=new WebSocket(`${Vf}/ws/participants/${A}`),!!I.current)return I.current.onmessage=async pe=>{const ke=JSON.parse(pe.data);m(ke)},()=>{var pe;((pe=I.current)==null?void 0:pe.readyState)===WebSocket.OPEN&&I.current.close(1e3,"Component unmounting"),I.current=null}},[A]);const N=w.useRef(null);w.useEffect(()=>{if(N.current=new WebSocket(`${Vf}/ws/call/${A}`),!!N.current)return N.current.onmessage=async pe=>{const ke=JSON.parse(pe.data);_(ke)},()=>{var pe;((pe=N.current)==null?void 0:pe.readyState)===WebSocket.OPEN&&N.current.close(1e3,"Component unmounting"),N.current=null}},[A]);const{data:O}=Ho({queryKey:["roomInfo",A],queryFn:()=>H9(A),enabled:!!A}),{data:j}=Ho({queryKey:["me",A],queryFn:()=>jw(A,M),enabled:!!A&&!!M}),{data:V}=Ho({queryKey:["participants",A],queryFn:()=>oL(A),enabled:!!A}),z=(V==null?void 0:V.participants)||[],W=(V==null?void 0:V.participantsInCall)||[],J=O||new Date().toISOString(),Y=(j==null?void 0:j.isHost)??!1,{data:me}=Ho({queryKey:["callState",A],queryFn:()=>iL(A),enabled:!!j&&!Y}),ue=(me==null?void 0:me.is_active)||(E==null?void 0:E.is_active)||!1,Ie=ue&&((me==null?void 0:me.started_at)||(E==null?void 0:E.started_at))||"",{devices:se,activeDeviceId:xe,setActiveMediaDevice:q}=vw({kind:"audioinput"}),{devices:te,activeDeviceId:ae,setActiveMediaDevice:B}=vw({kind:"videoinput"}),fe=se.find(pe=>pe.deviceId===xe),ie=te.find(pe=>pe.deviceId===ae);return w.useEffect(()=>{j!=null&&j.username&&!v&&S(j.username)},[j==null?void 0:j.username]),w.useEffect(()=>{if(te.length>0&&(!ae||ae==="default")){const pe=te[0];B(pe.deviceId)}},[te,ae,B]),w.useEffect(()=>(ae&&(async()=>{o&&o.stop();try{if(n.video){const ke=await J3({deviceId:ae});s(ke)}else s(null)}catch(ke){console.error("Failed to create video track:",ke)}})(),()=>{o&&o.stop()}),[ae,n.video]),b.jsx(b.Fragment,{children:b.jsxs("div",{className:"grid grid-cols-4 gap-48 p-56 h-screen md:bg-gradient-to-br from-white via-white to-orange-300",children:[b.jsx("div",{className:"col-span-4 md:col-span-1 flex items-center justify-center",children:b.jsxs("div",{className:"flex flex-col items-center gap-32 size-full",children:[b.jsxs("div",{className:"flex flex-col items-center",children:[b.jsx("h1",{className:"text-3xl font-mono",children:"Whispurr"}),b.jsx("img",{src:M_,alt:"logo",width:100})]}),b.jsxs("div",{className:"flex flex-col flex-1 justify-center",children:[b.jsx("h3",{className:"mb-20 text-center text-xl font-semibold tracking-tight",children:Y?"Start Call":"Join Call"}),b.jsx(Gce,{isHost:Y,username:v,setUsername:S,avatarSrc:k,isCallActive:ue}),b.jsx(qce,{settings:f,isHost:Y,mediaState:n,setAudioState:r,setVideoState:i,audioDevices:se,videoDevices:te,audioActiveDeviceId:xe,videoActiveDeviceId:ae,setAudioActiveDevice:q,setVideoActiveDevice:B}),b.jsx(ife,{isHost:Y,host:"Panos",createdAt:J,isCallActive:ue,callStartedAt:Ie}),b.jsx(ufe,{roomID:A,isHost:Y}),ue&&b.jsx(afe,{guests:h,participants:z,participantsInCall:W}),b.jsx(sfe,{selectedAudioDevice:fe,selectedVideoDevice:ie})]})]})}),b.jsx("div",{className:"col-span-4 md:col-span-3 hidden md:block",children:b.jsx(lfe,{username:v,mediaState:n,videoTrack:o,onGetSrc:C})}),b.jsxs("div",{className:"absolute bottom-16 flex items-center gap-8",onClick:()=>window.open("https://github.com/Panos61/videocall-app-client/issues/new","_blank"),children:[b.jsx("span",{className:"text-sm text-gray-600 underline cursor-pointer hover:text-gray-900",children:"Report an issue"}),b.jsx(Qj,{className:"size-16"})]})]})})},ffe=({activeSpeakers:t,remoteTracks:e})=>{const[n,r]=w.useState([]),[i,s]=w.useState({});return w.useEffect(()=>{const o=Date.now(),a={...i};t.forEach(f=>{a[f]=o}),s(a);const u=[...e].sort((f,h)=>{const m=t.includes(f.participantIdentity),v=t.includes(h.participantIdentity);if(m&&!v)return-1;if(!m&&v)return 1;const S=a[f.participantIdentity]||0;return(a[h.participantIdentity]||0)-S});r(u)},[t,e]),n},hfe=({selectedParticipant:t})=>{const{id:e}=Xf(),n=cs.get("rsCookie"),[r,i]=w.useState(!1),{data:s}=Ho({queryKey:["me",e,n],queryFn:()=>jw(e,n),enabled:!!e&&!!n}),o=s==null?void 0:s.id,{mutate:a,isPending:u,isError:f}=Ju({mutationFn:({currentHostID:h,participantID:m})=>$9(e,h,m),onSuccess:()=>{i(!1)},onError:h=>{console.error("err: ",h)}});return b.jsxs(b.Fragment,{children:[b.jsxs(Q1,{modal:!1,children:[b.jsx(J1,{asChild:!0,children:b.jsx(WX,{className:"size-12 text-gray-500 cursor-pointer hover:text-gray-700"})}),b.jsx(YV,{align:"end",children:b.jsx(Vce,{children:b.jsxs(Bce,{onSelect:()=>i(!0),children:["Assign as Host",b.jsx(eA,{className:"size-16 text-blue-500"})]})})})]}),b.jsx(e0,{open:r,onOpenChange:i,children:b.jsxs(Ym,{className:"sm:max-w-[425px]",children:[b.jsxs(Qm,{children:[b.jsx(Jm,{children:"Assign as Host"}),b.jsxs("div",{className:"flex flex-col items-center gap-12 mb-16",children:["Are you sure you want to assign this participant as the host?",b.jsxs("div",{className:"flex items-center gap-8 w-full bg-gray-100 rounded-8 p-8",children:[b.jsx(Pm,{size:"sm",src:t.avatar_src}),b.jsx("span",{className:"text-lg text-black",children:t.username})]}),b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx(_m,{size:44,className:"text-blue-500"}),b.jsx("p",{className:"text-xs text-black",children:"Important: This action is irreversible. The selected participant will become the new host. Host actions will be performed by the new host."})]})]})]}),b.jsx(V_,{children:b.jsxs("div",{className:"flex flex-col gap-8",children:[b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx(qee,{asChild:!0,children:b.jsx(ls,{variant:"outline",children:"Cancel"})}),b.jsxs(ls,{type:"submit",disabled:u,onClick:()=>a({currentHostID:o,participantID:t.id}),children:["Assign as Host",b.jsx(eA,{className:"ml-4 size-16 text-blue-500"})]})]}),f&&b.jsx("div",{className:"text-xs text-red-500",children:"Something went wrong. Try again."})]})})]})})]})},cB=({title:t,children:e,open:n,onClose:r})=>{const{isChatExpanded:i}=zy(),s=si("absolute top-0 right-0 bottom-0 w-[340px] bg-zinc-950 shadow-lg transform transition-all duration-300 ease-in-out",{"translate-x-0 opacity-100 visible":n,"translate-x-full opacity-0 invisible":!n,"w-[340px]":!i,"w-[800px]":i});return b.jsx(b.Fragment,{children:b.jsx("div",{className:s,children:b.jsxs("div",{className:"flex flex-col h-full mx-8",children:[b.jsxs("div",{className:"flex items-center justify-between p-16",children:[b.jsx("p",{className:"text-white",children:t}),b.jsx(tF,{size:"20px",onClick:r,className:"text-white"})]}),e,t==="Conversation"&&b.jsxs("div",{className:"flex items-center",children:[b.jsx("span",{className:"m-8 text-xs text-slate-300",children:"Conversation is encrypted"}),b.jsx(Jy,{size:16,className:"text-purple-700"})]})]})})})},pfe=({open:t,participants:e,invitePermission:n,isHost:r,mediaState:i,remoteMediaStates:s,sessionID:o,isActiveSpeaker:a,onClose:u})=>{const f=(m,v)=>{var k,C;return o===m?i:!m||!v?{audio:!1,video:!1}:{audio:((k=s[m])==null?void 0:k.audio)??!1,video:((C=s[m])==null?void 0:C.video)??!1}},h=(m,v)=>si("flex items-center gap-8 py-4 px-8 rounded-12 cursor-default duration-500",{"bg-orange-200/75":m.isHost&&!v,"hover:bg-orange-300":m.isHost,"bg-green-200/75":v});return b.jsx(cB,{title:"Participants",open:t,onClose:u,children:b.jsxs(b.Fragment,{children:[(n||r)&&b.jsx(UF,{}),!n&&!r&&b.jsxs("div",{className:"ml-16 w-fit outline outline-gray-700 rounded-8 p-8 flex items-center gap-8",children:[b.jsx(Jy,{className:"size-12 text-orange-400"}),b.jsx("span",{className:"text-xs text-muted italic",children:"Only host can invite participants."})]}),b.jsxs("p",{className:"p-16 text-xs text-white font-bold",children:["IN MEETING (",e.length,")"]}),b.jsx(go,{className:"mb-12 bg-gray-700 outline"}),b.jsx("div",{className:"flex flex-col gap-4 py-8 px-12 mx-4 bg-white rounded-16",children:e.map(m=>b.jsxs("div",{className:h(m,a),children:[b.jsx(Pm,{size:"sm",src:m.avatar_src}),b.jsxs("div",{className:"flex items-center gap-4",children:[m.isHost&&b.jsx(Em,{size:12,className:"text-yellow-600"}),b.jsx("p",{className:"text-sm text-black break-all",children:m.username}),m.isHost&&b.jsx("span",{className:"text-xs text-black font-bold",children:m.isHost&&"(Host)"})]}),b.jsxs("div",{className:"flex items-center gap-8 ml-auto",children:[f(m.session_id,m).audio?b.jsx(Xy,{color:"#000000",className:"size-12"}):b.jsx(Zw,{color:"#dc2626",className:"size-12"}),f(m.session_id,m).video?b.jsx(eS,{color:"#000000",className:"size-12"}):b.jsx(I_,{color:"#dc2626",className:"size-12"}),r&&o!==m.session_id&&b.jsx(hfe,{selectedParticipant:m})]})]},m.id))})]})})},Xb=({index:t,isSidePanel:e,participant:n,track:r,audioTracks:i,remoteIdentity:s,isLocal:o,isActiveSpeaker:a,responsiveWidth:u,mediaState:f,remoteMediaStates:h})=>{var xe;const{events:{raisedHandEvents:m}}=Ma(),v=o?"local-video":`${s}-video`,S=w.useRef(null),k=w.useRef(null),C=w.useRef(null),E=w.useRef(null),[_,M]=w.useState(!1),[A,I]=w.useState(o),N=w.useRef(!1),O=()=>{let q="lg",te="lg",ae=20;return e?(u=u||0,u<185?(q="sm",te="sm",ae=16):u<250?(q="md",te="sm",ae=16):u<590&&(q="md",te="lg",ae=20),{avatarSize:q,usernameSize:te,iconSize:ae}):{avatarSize:q,usernameSize:te,iconSize:ae}},{avatarSize:j,usernameSize:V,iconSize:z}=O(),W=w.useCallback(q=>{k.current=q,M(!!q)},[]);w.useEffect(()=>{if(o)return;const q=C.current;if(!q)return;const te=new IntersectionObserver(([ae])=>{N.current=ae.isIntersecting,ae.isIntersecting&&!A&&setTimeout(()=>{I(!0)},1e3)},{threshold:.1});return te.observe(q),()=>{te.unobserve(q)}},[o,A,n==null?void 0:n.username,s]);const J=()=>r&&(f!=null&&f.video)?b.jsx("div",{id:"video-wrapper",className:"relative size-full",children:b.jsx("video",{id:v,ref:S,muted:!(f!=null&&f.audio),autoPlay:!0,className:"absolute size-full object-cover"},t)}):b.jsx("div",{className:"absolute inset-0 size-full flex items-center justify-center",children:b.jsx(Pm,{src:n==null?void 0:n.avatar_src,className:"size-24 object-cover",size:j})}),Y=()=>{var te,ae;if(!s||!n)return;if(A&&r&&((te=h[s])!=null&&te.video))return A?b.jsx("video",{id:v,ref:W,muted:!((ae=h[s])!=null&&ae.audio),autoPlay:!0,className:"absolute size-full object-cover"},t):b.jsx("div",{className:"absolute inset-0 flex items-center justify-center size-full",children:b.jsx(r1,{size:"lg"})});const q=si("absolute inset-0 size-full flex items-center justify-center duration-1000",{"bg-zinc-800":!A,"bg-zinc-900":A});return b.jsx("div",{className:q,children:b.jsxs("div",{className:"flex flex-col items-center gap-4",children:[!A&&b.jsx(r1,{size:e?"md":"lg"}),A&&b.jsx(Pm,{src:n.avatar_src,className:"size-24 object-cover",size:j})]})})};w.useEffect(()=>{E.current&&r&&(f!=null&&f.audio)&&r.attach(E.current);const q=E.current;return()=>{r&&q&&r.detach(q)}},[r,f==null?void 0:f.audio]),w.useEffect(()=>{S.current&&r&&(f!=null&&f.video)&&r.attach(S.current);const q=S.current;return()=>{r&&q&&r.detach(q)}},[r,f==null?void 0:f.video]),w.useEffect(()=>{var te;const q=k.current;if(s){const ae=(te=h[s])==null?void 0:te.video;q&&(r&&ae?r.attach(q):r.detach(q))}return()=>{r&&q&&r.detach(q)}},[r,h,s,_]),w.useEffect(()=>{var te;if(!i||!s)return;const q=i.find(ae=>ae.participantIdentity===s);return E.current&&q&&((te=h[s])!=null&&te.audio)&&q.track.attach(E.current),()=>{E.current&&q&&q.track.detach(E.current)}},[i,h,s]);const me=()=>{var q;return o?f:!s||!n?{audio:!1}:{audio:(q=h[s])==null?void 0:q.audio}},ue=m.some(q=>q.username===(n==null?void 0:n.username)),Ie=si("relative flex items-center justify-center size-full rounded-8 overflow-hidden bg-zinc-900 text-gr",{"transition-transform duration-1000 ease-out":!ue,"outline outline-yellow-500":ue,"outline outline-green-500":a}),se=si("absolute bottom-4 right-12 px-12 py-4 rounded-md text-white bg-black bg-opacity-45 z-50",{"w-48 text-xs bg-black/80 truncate":V==="sm","text-sm":V==="lg"});return b.jsxs("div",{ref:C,className:Ie,children:[ue&&b.jsx(P_,{size:e?16:24,className:"absolute top-12 right-12 text-yellow-500"}),o?J():Y(),b.jsx("div",{className:se,children:n==null?void 0:n.username}),b.jsx("div",{className:"absolute bottom-4 left-12 py-4 z-50",children:(xe=me())!=null&&xe.audio?b.jsx(Xy,{color:"#e5e7eb",className:`size-${z}`}):b.jsx(Zw,{color:"#dc2626",className:`size-${z}`})})]})},SO=({isSidePanel:t,screenShareTrack:e})=>{const n=w.useRef(null),{events:{shareScreenEvents:r}}=Ma();if(w.useEffect(()=>{const s=n.current,o=e==null?void 0:e.track;return s&&o&&(console.warn("Attaching screen share track to video element"),o.attach(s)),()=>{s&&o&&(console.warn("Detaching screen share track from video element"),o.detach(s))}},[e]),!e)return null;const i=si("absolute bottom-4 right-12 flex items-center gap-8 px-12 py-4 rounded-md text-sm text-white bg-black z-50",{"bg-black/45":t,"bg-black":!t});return b.jsxs("div",{className:"relative flex items-center justify-center size-full rounded-8 overflow-hidden bg-zinc-900 text-gr outline outline-green-500/45 transition-all duration-1000 ease-out",children:[b.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute size-full object-contain"}),b.jsxs("div",{className:i,children:[!t&&r.length>0&&b.jsxs("span",{children:[r[0].username,"'s shared screen"]}),b.jsx(R_,{size:t?12:20,className:"text-green-500"})]})]})},CO=({hostEventType:t})=>{const[e,{startCountdown:n}]=KE({countStart:5}),r=w.useRef(null);return w.useEffect(()=>{n()},[n]),w.useEffect(()=>{e===0&&r.current&&Lb.dismiss(r.current)},[e]),w.useEffect(()=>(r.current=Lb.info(t==="left"?"Previous Host has left the room, you are randomly promoted to host.":"Previous Host has been replaced by a new host.",{duration:1/0}),()=>{r.current&&Lb.dismiss(r.current)}),[]),w.useEffect(()=>{r.current&&e>0&&Lb.info(t==="left"?"Previous Host has left the room, you are randomly promoted to host.":"Previous Host has been replaced by a new host.",{id:r.current})},[e,t]),null};function kO({className:t,...e}){return b.jsx("kbd",{"data-slot":"kbd",className:nn("bg-muted text-muted-foreground pointer-events-none inline-flex h-5 w-fit min-w-5 select-none items-center justify-center gap-1 rounded-sm px-1 font-sans text-xs font-medium","[&_svg:not([class*='size-'])]:size-3","[[data-slot=tooltip-content]_&]:bg-background/20 [[data-slot=tooltip-content]_&]:text-background dark:[[data-slot=tooltip-content]_&]:bg-background/10",t),...e})}function mfe({className:t,...e}){return b.jsx("kbd",{"data-slot":"kbd-group",className:nn("inline-flex items-center gap-1",t),...e})}const gfe=()=>b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx($X,{size:14,className:"text-gray-600"}),b.jsx("span",{className:"text-xs text-gray-600",children:"58s"})]}),vfe=[{id:1,emoji:""},{id:2,emoji:""},{id:3,emoji:""},{id:4,emoji:""},{id:5,emoji:""},{id:6,emoji:""},{id:7,emoji:""}],yfe=()=>{const{sendUserEvent:t}=Ma(),[e,n]=w.useState(!1),r=w.useRef(null),i=o=>{t({type:"reaction.sent",payload:{reaction_type:o}})},s=b.jsx("div",{className:"absolute bottom-12 right-full w-[172px] flex items-center justify-between gap-8 p-4 overflow-hidden z-10 rounded-8 bg-white shadow-elevation-low",children:vfe.map(o=>b.jsx("div",{className:"flex items-center justify -center size-28 rounded-full hover:scale-110 duration-150 ease-in-out cursor-pointer",onClick:()=>i(o.emoji),children:b.jsx("span",{className:"text-xl",children:o.emoji})},o.id))});return b.jsxs("div",{ref:r,className:"flex items-center rounded-full bg-white hover:bg-slate-200 duration-300 ease-in-out cursor-pointer z-50 relative",children:[b.jsx(Zj,{size:16,onClick:()=>n(!0)}),e&&s]})},bfe=({message:t,index:e})=>{const[n,r]=w.useState(null);return b.jsxs("div",{className:"flex flex-col gap-4",children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("span",{className:"text-xs text-gray-600 font-bold",children:"You"}),b.jsx("span",{className:"text-xs text-gray-500",children:iB(new Date,"HH:mm")}),b.jsx(Gj,{size:14,className:"text-green-700"})]}),b.jsxs("div",{onMouseEnter:()=>r(e),onMouseLeave:()=>r(null),className:"flex items-center gap-4",children:[b.jsx("div",{className:"p-8 w-[74%] h-auto bg-green-100 rounded-lg text-sm break-all",children:t}),n===e&&b.jsx(yfe,{}),b.jsx(gfe,{})]},e)]})},xfe=({open:t,onClose:e})=>{const{isChatExpanded:n,setIsChatExpanded:r}=zy(),{id:i}=Xf(),[s,o]=w.useState([]),[a,u]=w.useState([]),[f,h]=w.useState(""),m=w.useRef(null),v=w.useRef(null),S=w.useCallback(()=>{if(!i||m.current)return;const M=new WebSocket(`${Vf}/ws/chat/${i}`);m.current=M,M.onopen=()=>{console.log("chat socket has opened!")},M.onclose=()=>{console.warn("Chat WebSocket closed")},M.onerror=()=>{console.error("chat socket has closed!")},M.onmessage=A=>{try{const I=JSON.parse(A.data);o(N=>[...N,I.payload]),u(N=>[...N,I])}catch(I){console.error(I)}}},[i]);w.useEffect(()=>(S(),()=>{var M;((M=m.current)==null?void 0:M.readyState)===WebSocket.OPEN&&m.current.close(),m.current=null}),[S]);const k=()=>{const M=f.trim();if(!M)return;const A=m.current;!A||A.readyState!==WebSocket.OPEN||(A.send(JSON.stringify({payload:M})),h(""),v.current&&(v.current.style.height="auto"))},C=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),k())},E=w.useRef(null),_=()=>{var M;(M=E.current)==null||M.scrollIntoView({behavior:"smooth"})};return w.useEffect(()=>{_()},[s]),b.jsx(cB,{title:"Conversation",open:t,onClose:e,children:b.jsx("div",{className:"h-[calc(100%-100px)] flex flex-col",children:b.jsxs("div",{className:"flex-1 flex flex-col justify-between items-center gap-4 w-full py-8 px-12 bg-white rounded-16 overflow-y-auto",children:[b.jsxs("div",{className:"flex flex-col items-center gap-4 w-full ",children:[b.jsxs("div",{className:"flex items-center mt-4 self-start gap-24 w-full",children:[b.jsx("div",{className:"p-4 self-center rounded-8 bg-violet-100 hover:bg-violet-200 duration-150 cursor-pointer",onClick:()=>r(!n),children:n?b.jsx(VX,{size:20,className:"text-violet-600"}):b.jsx(UX,{size:20,className:"text-violet-600"})}),b.jsx("div",{className:"flex items-center",children:b.jsxs("div",{className:"flex items-center gap-8 mr-8",children:[b.jsx("p",{className:"self-center text-xs text-slate-800",children:"Let everyone send messages"}),b.jsx(TS,{})]})})]}),b.jsx(go,{className:"mt-4"})]}),b.jsxs("div",{className:"flex-1 py-4 w-full overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-white",children:[b.jsx("div",{className:"flex flex-col gap-8",children:s.map((M,A)=>b.jsx(bfe,{message:M,index:A},A))}),s.length>0&&b.jsx("div",{ref:E})]}),b.jsxs("div",{className:"flex gap-4 w-full",children:[b.jsx("textarea",{ref:v,rows:1,value:f,onChange:M=>h(M.target.value),onKeyDown:C,placeholder:"Send a message to everyone",className:"flex-1 py-12 px-4 rounded-12 text-sm font-light indent-16 bg-gray-200 outline-hidden duration-300 ease-in-out hover:bg-gray-100 focus:outline-hidden focus:bg-gray-100 resize-none overflow-hidden scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",onInput:M=>{const A=M.target;A.style.height="auto";const N=44*2.5;A.style.height=Math.min(A.scrollHeight,N)+"px",A.style.overflowY=A.scrollHeight>N?"auto":"hidden"}}),b.jsx("button",{onClick:k,className:"p-12 h-44 self-center rounded-8 duration-200 hover:bg-green-200",children:b.jsx(eZ,{size:20,className:"text-green-600"})})]}),b.jsxs(mfe,{className:"flex gap-4 mt-4 text-xs text-gray-600",children:[b.jsx(kO,{children:""}),b.jsx("span",{className:"text-xs",children:"to send message &"}),b.jsx(kO,{children:"/poll"}),b.jsx("span",{className:"text-xs",children:"to create poll"})]})]})})})},wfe=({username:t})=>{const e=w.useRef(1e4),[n,r]=w.useState(!0);return w.useEffect(()=>{setTimeout(()=>{e.current=0,r(!1)},e.current)},[]),n?b.jsxs("div",{className:"flex items-center justify-center gap-8 px-8 py-4 w-full border border-zinc-500 rounded-8 text-white hover:bg-zinc-500/20 duration-300 animate-circle-entrance",children:[b.jsx("span",{className:"text-sm",children:t}),b.jsx(P_,{size:20,className:"text-yellow-500"})]}):null},Sfe=({emoji:t,id:e,username:n,onAnimationEnd:r})=>{const[i,s]=w.useState(!1),o=Math.random()*100-50,a=4+Math.random()*2,u=h=>{h.animationName==="float-out"&&r(e)};w.useEffect(()=>{const h=setTimeout(()=>{s(!0)},a*1e3-500);return()=>clearTimeout(h)},[e,r,a]);const f=si("absolute bottom-20 left-1/2 pointer-events-none",{"animate-float-in":!i,"animate-float-out":i});return b.jsxs("div",{className:f,onAnimationEnd:u,style:{"--random-x-end":`${o}px`,"--duration":`${a}s`},children:[b.jsxs("div",{className:"flex flex-col gap-4 items-center",children:[b.jsx("div",{className:"text-4xl",children:t}),b.jsx("div",{className:"text-white text-sm font-medium bg-violet-300/45 bg-opacity-50 px-8 py-4 rounded-full whitespace-nowrap text-center",children:n})]}),b.jsx("style",{children:`
          @keyframes float-in {
            0% {
              transform: translate(-50%, 0) scale(0.6);
              opacity: 0;
            }
            15% {
              transform: translate(-50%, -50px) scale(1);
              opacity: 1;
            }
            100% {
              /* Move to -40vh (middle of screen) */
              transform: translate(calc(-40% + var(--random-x-end)), -40vh) scale(1);
              opacity: 1;
            }
          }
          @keyframes float-out {
            0% {
              /* Start fade out from wherever float-in ended (approx middle) */
              transform: translate(calc(-40% + var(--random-x-end)), -40vh) scale(1);
              opacity: 1;
            }
            100% {
              /* Continue floating up a bit while fading out */
              transform: translate(calc(-40% + var(--random-x-end)), -40vh) scale(1);
              opacity: 0;
            }
          }
          .animate-float-in {
            animation: float-in var(--duration) linear forwards;
          }
          .animate-float-out {
            animation: float-out 0.5s ease-out forwards;
          }
        `})]})},Cfe=()=>{const{events:{reactionEvents:t}}=Ma(),e=w.useMemo(()=>t.map(s=>({id:s.id,emoji:s.reaction_type,username:s.username})),[t]),[n,r]=w.useState([]);w.useEffect(()=>{r(s=>{const o=e.filter(a=>!s.find(u=>u.id===a.id));return o.length>0?[...s,...o]:s})},[e]);const i=w.useCallback(s=>{r(o=>o.filter(a=>a.id!==s))},[]);return b.jsx("div",{className:"fixed inset-0 z-50 pointer-events-none",children:n.map(s=>b.jsx(Sfe,{id:s.id,emoji:s.emoji,username:s.username,onAnimationEnd:i},s.id))})},kfe=({participantsCount:t})=>{const{setShareScreenView:e}=zy(),{events:{shareScreenEvents:n}}=Ma();return b.jsxs("div",{className:"flex items-center gap-12",children:[b.jsxs("div",{className:"flex items-center gap-8 p-8 outline outline-zinc-800 rounded-8 text-sm text-white bg-zinc-900 hover:bg-zinc-800 duration-300 ease-in-out cursor-pointer",onClick:()=>e("participants"),children:[b.jsxs("span",{children:["Participants (",t,")"]}),b.jsx(Jj,{size:16,className:"text-white"})]}),n&&n.map(r=>b.jsxs("div",{className:"flex items-center gap-8 p-8 outline outline-zinc-800 rounded-8 text-sm text-white bg-green-700/20 hover:bg-green-600/25 duration-300 ease-in-out cursor-pointer",onClick:()=>e([{trackSid:r.trackSid}]),children:[b.jsxs("span",{children:[r.username,"'s screen"]}),b.jsx(R_,{size:16,className:"text-green-500"})]},r.trackSid))]})},Tfe=()=>{const{id:t}=Xf(),e=w.useRef(null),[n,r]=w.useState(0),{data:i,isLoading:s}=Ho({queryKey:["callState",t],queryFn:()=>iL(t),enabled:!!t});w.useEffect(()=>{if(i&&e.current===null)try{const u=nfe(i.started_at,"eee MMM dd yyyy HH:mm:ss 'GMT'xx (zzzz)",new Date);if(!isNaN(u.getTime()))e.current=u;else{const f=new Date(i.started_at);isNaN(f.getTime())?console.error("Failed to parse date:",i.started_at):e.current=f}}catch(u){console.error("Error parsing date:",u)}},[i]),w.useEffect(()=>{if(!e.current)return;const u=setInterval(()=>{const h=Math.floor((new Date().getTime()-e.current.getTime())/1e3);r(h)},1e3);return()=>clearInterval(u)},[e.current]);const o=u=>{if(u<0)return"00:00";const f=Math.floor(u/3600),h=Math.floor(u%3600/60),m=u%60,v=String(h).padStart(2,"0"),S=String(m).padStart(2,"0");return f>0?`${String(f).padStart(2,"0")}:${v}:${S}`:`${v}:${S}`},a=s||!e.current?"00:00":o(n);return b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx("div",{className:"min-w-[36px] text-xs text-gray-300 font-mono",children:a}),b.jsx("span",{className:"text-gray-300",children:"-"}),b.jsx("p",{className:"text-xs text-white",children:"Call in progress"}),b.jsx("div",{className:"size-8 rounded-full bg-green-500 animate-pulse"})]})},Efe=({isSharingScreen:t,participantsCount:e})=>{const{events:{raisedHandEvents:n}}=Ma(),r=[...new Set(n.map(i=>i.username))];return b.jsxs("header",{className:"flex items-center justify-between h-52 px-48 border-b border-zinc-800",children:[b.jsxs("div",{className:"flex items-center gap-72",children:[b.jsx("div",{className:"text-lg text-white font-mono",children:"Whispurr"}),b.jsx("div",{className:"flex items-center gap-8",children:r.map(i=>b.jsx(wfe,{username:i},i))})]}),t&&b.jsx(kfe,{participantsCount:e}),b.jsx(Tfe,{})]})},_fe=w.forwardRef(({children:t},e)=>b.jsx("div",{className:"overflow-hidden size-full bg-black",children:b.jsx("div",{ref:e,className:"flex flex-col gap-8 size-full px-12 py-8 overflow-y-auto hover:bg-zinc-800/40 duration-500 ease-out scrollbar-thin scrollbar-track-black scrollbar-thumb-zinc-600",children:w.Children.toArray(t).filter(Boolean).map((n,r)=>b.jsx("div",{className:"w-full aspect-video",children:n},r))})})),Pfe=()=>{const[t,e]=w.useState(new Date);return w.useEffect(()=>{const n=setInterval(()=>{e(new Date)},1e3);return()=>clearInterval(n)},[]),b.jsx("div",{className:"w-auto text-md lg:text-lg text-white font-medium",children:iB(t,"h:mm aa")})},Rfe=()=>b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx(tZ,{size:18,className:"text-green-500 stroke-3"}),b.jsx("p",{className:"text-xs text-white",children:"Connection"})]}),Ife=[{id:1,emoji:""},{id:2,emoji:""},{id:3,emoji:""},{id:4,emoji:""},{id:5,emoji:""},{id:6,emoji:""},{id:7,emoji:""}],Mfe=({sessionID:t})=>{const{sendUserEvent:e}=Ma(),n=w.useRef(null),r=QK(n),i=o=>{e({type:"reaction.sent",senderID:t,payload:{reaction_type:o}})},s=b.jsx("div",{className:"absolute bottom-full left-[120px] -translate-x-1/2 flex items-center justify-between gap-8 p-4 w-[280px] rounded-8 bg-white shadow-elevation-low",children:Ife.map(o=>b.jsx("div",{className:"flex items-center justify-center size-32 rounded-full hover:bg-violet-200 duration-150 ease-in-out cursor-pointer",onClick:()=>i(o.emoji),children:b.jsx("span",{className:"text-xl",children:o.emoji})},o.id))});return b.jsxs("div",{ref:n,className:"flex items-center p-12 rounded-full bg-white hover:bg-slate-200 duration-300 ease-in-out cursor-pointer z-50 relative",children:[b.jsx(Zj,{size:16}),r&&s]})},Afe=({sessionID:t})=>{const{sendUserEvent:e}=Ma(),n=()=>{e({type:"raised_hand.sent",senderID:t,payload:{raised_hand:!0}})};return b.jsx("div",{className:"flex items-center p-12 rounded-full bg-white hover:bg-slate-200 duration-300 ease-in-out cursor-pointer hover:scale-105",onClick:n,children:b.jsx(P_,{size:16,className:"text-yellow-500"})})},Nfe=({sessionID:t,room:e,onScreenShareChange:n})=>{const{sendUserEvent:r,events:{shareScreenEvents:i}}=Ma(),[s,o]=w.useState(!1);w.useEffect(()=>{if(!(e!=null&&e.localParticipant))return;const f=()=>{const v=Array.from(e.localParticipant.videoTrackPublications.values()).find(k=>k.source===Ee.Source.ScreenShare),S=!!v;o(S),n&&(S&&v?n(!0,{track:v.videoTrack,participantIdentity:t,kind:Ee.Kind.Video}):n(!1))};f();const h=v=>{v.source===Ee.Source.ScreenShare&&setTimeout(f,100)},m=()=>{setTimeout(f,100)};return e.localParticipant.on("trackPublished",h),e.localParticipant.on("trackUnpublished",m),()=>{e.localParticipant.off("trackPublished",h),e.localParticipant.off("trackUnpublished",m)}},[e,n,t,i]);const a=async()=>{if(!(e!=null&&e.localParticipant))return;let f="";try{if(s)await e.localParticipant.setScreenShareEnabled(!1),o(!1),r({type:"share_screen.ended",senderID:t,payload:{active:!1,track_sid:null}});else{const h=await e.localParticipant.setScreenShareEnabled(!0);if(!h||!h.track)return;f=h.track.sid||"",setTimeout(()=>{const v=Array.from(e.localParticipant.videoTrackPublications.values()).find(S=>S.source===Ee.Source.ScreenShare);v&&(o(!0),n&&n(!0,{track:v.videoTrack,participantIdentity:t,kind:Ee.Kind.Video}))},200),r({type:"share_screen.started",senderID:t,payload:{active:!0,track_sid:f}})}}catch(h){console.error("Error toggling screen share:",h)}},u=si("flex items-center p-12 rounded-full duration-300 ease-in-out cursor-pointer hover:scale-105",{"bg-red-500 hover:bg-red-600":s,"bg-white hover:bg-slate-200":!s});return b.jsx("div",{className:u,onClick:a,children:s?b.jsx(ZX,{size:16,className:"text-white"}):b.jsx(R_,{size:16,className:"text-green-500"})})},Ofe=({sessionID:t,room:e,mediaState:n,setAudioState:r,setVideoState:i,activePanel:s,setActivePanel:o,onScreenShareChange:a})=>{const{sendSystemEvent:u}=$y(),{videoTrack:f,setVideoTrack:h}=bE(),{setIsChatExpanded:m,setIsFocusView:v,isFocusView:S}=zy(),k=Il(),{id:C}=Xf();if(!C)return null;const E=cs.get("rsCookie"),_=async()=>{r(!n.audio,t),e!=null&&e.localParticipant&&await e.localParticipant.setMicrophoneEnabled(!n.audio)},M=async()=>{i(!n.video,t),e!=null&&e.localParticipant&&await e.localParticipant.setCameraEnabled(!n.video)},A=async()=>{try{e!=null&&e.localParticipant&&(await e.localParticipant.setCameraEnabled(!1),await e.localParticipant.setMicrophoneEnabled(!1)),e&&await e.disconnect(),u({type:"user.left",payload:{}}),f&&(f.stop(),h(null)),r(!1,t),i(!1,t),await B9(C,E),k(`/room/${C}/post-call`,{replace:!0})}catch(N){console.error("Error during leave:",N)}finally{k(`/room/${C}/post-call`,{replace:!0})}},I="flex items-center p-12 rounded-full bg-white hover:bg-slate-200 duration-300 ease-in-out cursor-pointer hover:scale-105";return b.jsxs("div",{className:"flex items-center w-full px-24",children:[b.jsx("div",{className:"flex-1 mr-16",children:b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx(Pfe,{}),b.jsx(go,{orientation:"vertical",className:"h-28 bg-zinc-500"}),b.jsx(Rfe,{})]})}),b.jsx("div",{className:"flex-shrink-0",children:b.jsxs("div",{className:"flex items-center justify-center gap-8 p-8 border border-t-0 border-b-0 border-zinc-700 rounded-12",children:[b.jsxs("div",{className:"flex items-center gap-4 p-4 border border-zinc-500 rounded-16 text-xs bg-zinc-800 hover:bg-zinc-600/20 duration-300 ease-in-out cursor-pointer",onClick:()=>v(!S),children:[b.jsx("div",{className:"p-4 bg-white rounded-full",children:S?b.jsx(Jj,{size:16}):b.jsx(qX,{size:16})}),b.jsx("span",{className:"text-zinc-200",children:S?"Focus view":"Tile view"})]}),b.jsx(go,{orientation:"vertical",className:"h-28 bg-zinc-700"}),b.jsx("div",{className:I,onClick:_,children:n.audio?b.jsx(Xy,{size:16}):b.jsx(Zw,{color:"#dc2626",size:16})}),b.jsx("div",{className:I,onClick:M,children:n.video?b.jsx(eS,{size:16}):b.jsx(I_,{color:"#dc2626",size:16})}),b.jsx(Afe,{sessionID:t}),b.jsx(Mfe,{sessionID:t}),b.jsx(Nfe,{sessionID:t,room:e,onScreenShareChange:a}),b.jsx("div",{className:I,onClick:()=>o(s==="chat"?null:"chat"),children:b.jsx(KX,{size:16,className:"text-violet-500"})}),b.jsx("div",{className:I,onClick:()=>{o(s==="participants"?null:"participants"),m(!1)},children:b.jsx(eF,{size:16})}),b.jsx(uV,{}),b.jsx("div",{className:si(I,"!bg-red-500"),onClick:A,children:b.jsx(QX,{size:16,color:"white"})})]})}),b.jsx("div",{className:"flex-1"})]})},IS=w.createContext(null);IS.displayName="PanelGroupContext";const kr={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},DP=10,jf=w.useLayoutEffect,TO=rE.useId,Dfe=typeof TO=="function"?TO:()=>null;let Lfe=0;function LP(t=null){const e=Dfe(),n=w.useRef(t||e||null);return n.current===null&&(n.current=""+Lfe++),t??n.current}function uB({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:s,id:o,maxSize:a,minSize:u,onCollapse:f,onExpand:h,onResize:m,order:v,style:S,tagName:k="div",...C}){const E=w.useContext(IS);if(E===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:_,expandPanel:M,getPanelSize:A,getPanelStyle:I,groupId:N,isPanelCollapsed:O,reevaluatePanelConstraints:j,registerPanel:V,resizePanel:z,unregisterPanel:W}=E,J=LP(o),Y=w.useRef({callbacks:{onCollapse:f,onExpand:h,onResize:m},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:a,minSize:u},id:J,idIsFromProps:o!==void 0,order:v});w.useRef({didLogMissingDefaultSizeWarning:!1}),jf(()=>{const{callbacks:ue,constraints:Ie}=Y.current,se={...Ie};Y.current.id=J,Y.current.idIsFromProps=o!==void 0,Y.current.order=v,ue.onCollapse=f,ue.onExpand=h,ue.onResize=m,Ie.collapsedSize=n,Ie.collapsible=r,Ie.defaultSize=i,Ie.maxSize=a,Ie.minSize=u,(se.collapsedSize!==Ie.collapsedSize||se.collapsible!==Ie.collapsible||se.maxSize!==Ie.maxSize||se.minSize!==Ie.minSize)&&j(Y.current,se)}),jf(()=>{const ue=Y.current;return V(ue),()=>{W(ue)}},[v,J,V,W]),w.useImperativeHandle(s,()=>({collapse:()=>{_(Y.current)},expand:ue=>{M(Y.current,ue)},getId(){return J},getSize(){return A(Y.current)},isCollapsed(){return O(Y.current)},isExpanded(){return!O(Y.current)},resize:ue=>{z(Y.current,ue)}}),[_,M,A,O,J,z]);const me=I(Y.current,i);return w.createElement(k,{...C,children:t,className:e,id:J,style:{...me,...S},[kr.groupId]:N,[kr.panel]:"",[kr.panelCollapsible]:r||void 0,[kr.panelId]:J,[kr.panelSize]:parseFloat(""+me.flexGrow).toFixed(1)})}const dB=w.forwardRef((t,e)=>w.createElement(uB,{...t,forwardedRef:e}));uB.displayName="Panel";dB.displayName="forwardRef(Panel)";let eE=null,Ox=-1,Nu=null;function jfe(t,e,n){const r=(e&gB)!==0,i=(e&vB)!==0,s=(e&yB)!==0,o=(e&bB)!==0;if(e){if(r)return s?"se-resize":o?"ne-resize":"e-resize";if(i)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Ffe(){Nu!==null&&(document.head.removeChild(Nu),eE=null,Nu=null,Ox=-1)}function Kk(t,e,n){var r,i;const s=jfe(t,e);if(eE!==s){if(eE=s,Nu===null&&(Nu=document.createElement("style"),document.head.appendChild(Nu)),Ox>=0){var o;(o=Nu.sheet)===null||o===void 0||o.removeRule(Ox)}Ox=(r=(i=Nu.sheet)===null||i===void 0?void 0:i.insertRule(`*{cursor: ${s} !important;}`))!==null&&r!==void 0?r:-1}}function fB(t){return t.type==="keydown"}function hB(t){return t.type.startsWith("pointer")}function pB(t){return t.type.startsWith("mouse")}function MS(t){if(hB(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(pB(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function Ufe(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Vfe(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function Bfe(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:PO(t),b:PO(e)};let r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;Qt(r,"Stacking order can only be calculated for elements with a common ancestor");const i={a:_O(EO(n.a)),b:_O(EO(n.b))};if(i.a===i.b){const s=r.childNodes,o={a:n.a.at(-1),b:n.b.at(-1)};let a=s.length;for(;a--;){const u=s[a];if(u===o.a)return 1;if(u===o.b)return-1}}return Math.sign(i.a-i.b)}const zfe=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function $fe(t){var e;const n=getComputedStyle((e=mB(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function Wfe(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||$fe(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||zfe.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function EO(t){let e=t.length;for(;e--;){const n=t[e];if(Qt(n,"Missing node"),Wfe(n))return n}return null}function _O(t){return t&&Number(getComputedStyle(t).zIndex)||0}function PO(t){const e=[];for(;t;)e.push(t),t=mB(t);return e}function mB(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const gB=1,vB=2,yB=4,bB=8,Hfe=Ufe()==="coarse";let Ea=[],am=!1,Ou=new Map,AS=new Map;const _y=new Set;function qfe(t,e,n,r,i){var s;const{ownerDocument:o}=e,a={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:i},u=(s=Ou.get(o))!==null&&s!==void 0?s:0;return Ou.set(o,u+1),_y.add(a),Ew(),function(){var h;AS.delete(t),_y.delete(a);const m=(h=Ou.get(o))!==null&&h!==void 0?h:1;if(Ou.set(o,m-1),Ew(),m===1&&Ou.delete(o),Ea.includes(a)){const v=Ea.indexOf(a);v>=0&&Ea.splice(v,1),NS(),i("up",!0,null)}}}function Kfe(t){const{target:e}=t,{x:n,y:r}=MS(t);am=!0,jP({target:e,x:n,y:r}),Ew(),Ea.length>0&&(_w("down",t),NS(),t.preventDefault(),xB(e)||t.stopImmediatePropagation())}function Gk(t){const{x:e,y:n}=MS(t);if(am&&t.type!=="pointerleave"&&t.buttons===0&&(am=!1,_w("up",t)),!am){const{target:r}=t;jP({target:r,x:e,y:n})}_w("move",t),NS(),Ea.length>0&&t.preventDefault()}function Yk(t){const{target:e}=t,{x:n,y:r}=MS(t);AS.clear(),am=!1,Ea.length>0&&(t.preventDefault(),xB(e)||t.stopImmediatePropagation()),_w("up",t),jP({target:e,x:n,y:r}),NS(),Ew()}function xB(t){let e=t;for(;e;){if(e.hasAttribute(kr.resizeHandle))return!0;e=e.parentElement}return!1}function jP({target:t,x:e,y:n}){Ea.splice(0);let r=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(r=t),_y.forEach(i=>{const{element:s,hitAreaMargins:o}=i,a=s.getBoundingClientRect(),{bottom:u,left:f,right:h,top:m}=a,v=Hfe?o.coarse:o.fine;if(e>=f-v&&e<=h+v&&n>=m-v&&n<=u+v){if(r!==null&&document.contains(r)&&s!==r&&!s.contains(r)&&!r.contains(s)&&Bfe(r,s)>0){let k=r,C=!1;for(;k&&!k.contains(s);){if(Vfe(k.getBoundingClientRect(),a)){C=!0;break}k=k.parentElement}if(C)return}Ea.push(i)}})}function Qk(t,e){AS.set(t,e)}function NS(){let t=!1,e=!1;Ea.forEach(r=>{const{direction:i}=r;i==="horizontal"?t=!0:e=!0});let n=0;AS.forEach(r=>{n|=r}),t&&e?Kk("intersection",n):t?Kk("horizontal",n):e?Kk("vertical",n):Ffe()}let Jk;function Ew(){var t;(t=Jk)===null||t===void 0||t.abort(),Jk=new AbortController;const e={capture:!0,signal:Jk.signal};_y.size&&(am?(Ea.length>0&&Ou.forEach((n,r)=>{const{body:i}=r;n>0&&(i.addEventListener("contextmenu",Yk,e),i.addEventListener("pointerleave",Gk,e),i.addEventListener("pointermove",Gk,e))}),Ou.forEach((n,r)=>{const{body:i}=r;i.addEventListener("pointerup",Yk,e),i.addEventListener("pointercancel",Yk,e)})):Ou.forEach((n,r)=>{const{body:i}=r;n>0&&(i.addEventListener("pointerdown",Kfe,e),i.addEventListener("pointermove",Gk,e))}))}function _w(t,e){_y.forEach(n=>{const{setResizeHandlerState:r}=n,i=Ea.includes(n);r(t,i,e)})}function Gfe(){const[t,e]=w.useState(0);return w.useCallback(()=>e(n=>n+1),[])}function Qt(t,e){if(!t)throw console.error(e),Error(e)}function Qf(t,e,n=DP){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function _c(t,e,n=DP){return Qf(t,e,n)===0}function lo(t,e,n){return Qf(t,e,n)===0}function Yfe(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const i=t[r],s=e[r];if(!lo(i,s,n))return!1}return!0}function Kp({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];Qt(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:i=0,collapsible:s,maxSize:o=100,minSize:a=0}=r;if(Qf(n,a)<0)if(s){const u=(i+a)/2;Qf(n,u)<0?n=i:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(DP)),n}function zv({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:i,trigger:s}){if(lo(t,0))return e;const o=[...e],[a,u]=r;Qt(a!=null,"Invalid first pivot index"),Qt(u!=null,"Invalid second pivot index");let f=0;if(s==="keyboard"){{const m=t<0?u:a,v=n[m];Qt(v,`Panel constraints not found for index ${m}`);const{collapsedSize:S=0,collapsible:k,minSize:C=0}=v;if(k){const E=e[m];if(Qt(E!=null,`Previous layout not found for panel index ${m}`),lo(E,S)){const _=C-E;Qf(_,Math.abs(t))>0&&(t=t<0?0-_:_)}}}{const m=t<0?a:u,v=n[m];Qt(v,`No panel constraints found for index ${m}`);const{collapsedSize:S=0,collapsible:k,minSize:C=0}=v;if(k){const E=e[m];if(Qt(E!=null,`Previous layout not found for panel index ${m}`),lo(E,C)){const _=E-S;Qf(_,Math.abs(t))>0&&(t=t<0?0-_:_)}}}}{const m=t<0?1:-1;let v=t<0?u:a,S=0;for(;;){const C=e[v];Qt(C!=null,`Previous layout not found for panel index ${v}`);const _=Kp({panelConstraints:n,panelIndex:v,size:100})-C;if(S+=_,v+=m,v<0||v>=n.length)break}const k=Math.min(Math.abs(t),Math.abs(S));t=t<0?0-k:k}{let v=t<0?a:u;for(;v>=0&&v<n.length;){const S=Math.abs(t)-Math.abs(f),k=e[v];Qt(k!=null,`Previous layout not found for panel index ${v}`);const C=k-S,E=Kp({panelConstraints:n,panelIndex:v,size:C});if(!lo(k,E)&&(f+=k-E,o[v]=E,f.toFixed(3).localeCompare(Math.abs(t).toFixed(3),void 0,{numeric:!0})>=0))break;t<0?v--:v++}}if(Yfe(i,o))return i;{const m=t<0?u:a,v=e[m];Qt(v!=null,`Previous layout not found for panel index ${m}`);const S=v+f,k=Kp({panelConstraints:n,panelIndex:m,size:S});if(o[m]=k,!lo(k,S)){let C=S-k,_=t<0?u:a;for(;_>=0&&_<n.length;){const M=o[_];Qt(M!=null,`Previous layout not found for panel index ${_}`);const A=M+C,I=Kp({panelConstraints:n,panelIndex:_,size:A});if(lo(M,I)||(C-=I-M,o[_]=I),lo(C,0))break;t>0?_--:_++}}}const h=o.reduce((m,v)=>v+m,0);return lo(h,100)?o:i}function Qfe({layout:t,panelsArray:e,pivotIndices:n}){let r=0,i=100,s=0,o=0;const a=n[0];Qt(a!=null,"No pivot index found"),e.forEach((m,v)=>{const{constraints:S}=m,{maxSize:k=100,minSize:C=0}=S;v===a?(r=C,i=k):(s+=C,o+=k)});const u=Math.min(i,100-s),f=Math.max(r,100-o),h=t[a];return{valueMax:u,valueMin:f,valueNow:h}}function Py(t,e=document){return Array.from(e.querySelectorAll(`[${kr.resizeHandleId}][data-panel-group-id="${t}"]`))}function wB(t,e,n=document){const i=Py(t,n).findIndex(s=>s.getAttribute(kr.resizeHandleId)===e);return i??null}function SB(t,e,n){const r=wB(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function Jfe(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function CB(t,e=document){if(Jfe(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function OS(t,e=document){const n=e.querySelector(`[${kr.resizeHandleId}="${t}"]`);return n||null}function Xfe(t,e,n,r=document){var i,s,o,a;const u=OS(e,r),f=Py(t,r),h=u?f.indexOf(u):-1,m=(i=(s=n[h])===null||s===void 0?void 0:s.id)!==null&&i!==void 0?i:null,v=(o=(a=n[h+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[m,v]}function Zfe({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:i,panelGroupElement:s,setLayout:o}){w.useRef({didWarnAboutMissingResizeHandle:!1}),jf(()=>{if(!s)return;const a=Py(n,s);for(let u=0;u<i.length-1;u++){const{valueMax:f,valueMin:h,valueNow:m}=Qfe({layout:r,panelsArray:i,pivotIndices:[u,u+1]}),v=a[u];if(v!=null){const S=i[u];Qt(S,`No panel data found for index "${u}"`),v.setAttribute("aria-controls",S.id),v.setAttribute("aria-valuemax",""+Math.round(f)),v.setAttribute("aria-valuemin",""+Math.round(h)),v.setAttribute("aria-valuenow",m!=null?""+Math.round(m):"")}}return()=>{a.forEach((u,f)=>{u.removeAttribute("aria-controls"),u.removeAttribute("aria-valuemax"),u.removeAttribute("aria-valuemin"),u.removeAttribute("aria-valuenow")})}},[n,r,i,s]),w.useEffect(()=>{if(!s)return;const a=e.current;Qt(a,"Eager values not found");const{panelDataArray:u}=a,f=CB(n,s);Qt(f!=null,`No group found for id "${n}"`);const h=Py(n,s);Qt(h,`No resize handles found for group id "${n}"`);const m=h.map(v=>{const S=v.getAttribute(kr.resizeHandleId);Qt(S,"Resize handle element has no handle id attribute");const[k,C]=Xfe(n,S,u,s);if(k==null||C==null)return()=>{};const E=_=>{if(!_.defaultPrevented)switch(_.key){case"Enter":{_.preventDefault();const M=u.findIndex(A=>A.id===k);if(M>=0){const A=u[M];Qt(A,`No panel data found for index ${M}`);const I=r[M],{collapsedSize:N=0,collapsible:O,minSize:j=0}=A.constraints;if(I!=null&&O){const V=zv({delta:lo(I,N)?j-N:N-I,initialLayout:r,panelConstraints:u.map(z=>z.constraints),pivotIndices:SB(n,S,s),prevLayout:r,trigger:"keyboard"});r!==V&&o(V)}}break}}};return v.addEventListener("keydown",E),()=>{v.removeEventListener("keydown",E)}});return()=>{m.forEach(v=>v())}},[s,t,e,n,r,i,o])}function RO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function kB(t,e){const n=t==="horizontal",{x:r,y:i}=MS(e);return n?r:i}function ehe(t,e,n,r,i){const s=n==="horizontal",o=OS(e,i);Qt(o,`No resize handle element found for id "${e}"`);const a=o.getAttribute(kr.groupId);Qt(a,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=r;const f=kB(n,t),h=CB(a,i);Qt(h,`No group element found for id "${a}"`);const m=h.getBoundingClientRect(),v=s?m.width:m.height;return(f-u)/v*100}function the(t,e,n,r,i,s){if(fB(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:i!=null?a=i:a=10;let u=0;switch(t.key){case"ArrowDown":u=o?0:a;break;case"ArrowLeft":u=o?-a:0;break;case"ArrowRight":u=o?a:0;break;case"ArrowUp":u=o?0:-a;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return r==null?0:ehe(t,e,n,r,s)}function nhe({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let r=0,i=100;for(let s=0;s<t.length;s++){const o=n[s];Qt(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;a!=null&&(r++,e[s]=a,i-=a)}for(let s=0;s<t.length;s++){const o=n[s];Qt(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;if(a!=null)continue;const u=t.length-r,f=i/u;r++,e[s]=f,i-=f}return e}function Np(t,e,n){e.forEach((r,i)=>{const s=t[i];Qt(s,`Panel data not found for index ${i}`);const{callbacks:o,constraints:a,id:u}=s,{collapsedSize:f=0,collapsible:h}=a,m=n[u];if(m==null||r!==m){n[u]=r;const{onCollapse:v,onExpand:S,onResize:k}=o;k&&k(r,m),h&&(v||S)&&(S&&(m==null||_c(m,f))&&!_c(r,f)&&S(),v&&(m==null||!_c(m,f))&&_c(r,f)&&v())}})}function Zb(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function rhe({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:i,precision:s=3}){const o=n[i];let a;return o==null?a=t!=null?t.toFixed(s):"1":r.length===1?a="1":a=o.toFixed(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function ihe(t,e=10){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...i)},e)}}function IO(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function TB(t){return`react-resizable-panels:${t}`}function EB(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:i,order:s}=e;return i?r:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function _B(t,e){try{const n=TB(t),r=e.getItem(n);if(r){const i=JSON.parse(r);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function she(t,e,n){var r,i;const s=(r=_B(t,n))!==null&&r!==void 0?r:{},o=EB(e);return(i=s[o])!==null&&i!==void 0?i:null}function ohe(t,e,n,r,i){var s;const o=TB(t),a=EB(e),u=(s=_B(t,i))!==null&&s!==void 0?s:{};u[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(o,JSON.stringify(u))}catch(f){console.error(f)}}function MO({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!lo(r,100)&&n.length>0)for(let s=0;s<e.length;s++){const o=n[s];Qt(o!=null,`No layout data found for index ${s}`);const a=100/r*o;n[s]=a}let i=0;for(let s=0;s<e.length;s++){const o=n[s];Qt(o!=null,`No layout data found for index ${s}`);const a=Kp({panelConstraints:e,panelIndex:s,size:o});o!=a&&(i+=o-a,n[s]=a)}if(!lo(i,0))for(let s=0;s<e.length;s++){const o=n[s];Qt(o!=null,`No layout data found for index ${s}`);const a=o+i,u=Kp({panelConstraints:e,panelIndex:s,size:a});if(o!==u&&(i-=u-o,n[s]=u,lo(i,0)))break}return n}const ahe=100,$v={getItem:t=>(IO($v),$v.getItem(t)),setItem:(t,e)=>{IO($v),$v.setItem(t,e)}},AO={};function PB({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:i,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:u=$v,style:f,tagName:h="div",...m}){const v=LP(s),S=w.useRef(null),[k,C]=w.useState(null),[E,_]=w.useState([]),M=Gfe(),A=w.useRef({}),I=w.useRef(new Map),N=w.useRef(0),O=w.useRef({autoSaveId:t,direction:r,dragState:k,id:v,keyboardResizeBy:a,onLayout:o,storage:u}),j=w.useRef({layout:E,panelDataArray:[],panelDataArrayChanged:!1});w.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),w.useImperativeHandle(i,()=>({getId:()=>O.current.id,getLayout:()=>{const{layout:ie}=j.current;return ie},setLayout:ie=>{const{onLayout:pe}=O.current,{layout:ke,panelDataArray:Pe}=j.current,de=MO({layout:ie,panelConstraints:Pe.map(ge=>ge.constraints)});RO(ke,de)||(_(de),j.current.layout=de,pe&&pe(de),Np(Pe,de,A.current))}}),[]),jf(()=>{O.current.autoSaveId=t,O.current.direction=r,O.current.dragState=k,O.current.id=v,O.current.onLayout=o,O.current.storage=u}),Zfe({committedValuesRef:O,eagerValuesRef:j,groupId:v,layout:E,panelDataArray:j.current.panelDataArray,setLayout:_,panelGroupElement:S.current}),w.useEffect(()=>{const{panelDataArray:ie}=j.current;if(t){if(E.length===0||E.length!==ie.length)return;let pe=AO[t];pe==null&&(pe=ihe(ohe,ahe),AO[t]=pe);const ke=[...ie],Pe=new Map(I.current);pe(t,ke,Pe,E,u)}},[t,E,u]),w.useEffect(()=>{});const V=w.useCallback(ie=>{const{onLayout:pe}=O.current,{layout:ke,panelDataArray:Pe}=j.current;if(ie.constraints.collapsible){const de=Pe.map(dt=>dt.constraints),{collapsedSize:ge=0,panelSize:_e,pivotIndices:We}=uf(Pe,ie,ke);if(Qt(_e!=null,`Panel size not found for panel "${ie.id}"`),!_c(_e,ge)){I.current.set(ie.id,_e);const mt=Fp(Pe,ie)===Pe.length-1?_e-ge:ge-_e,Et=zv({delta:mt,initialLayout:ke,panelConstraints:de,pivotIndices:We,prevLayout:ke,trigger:"imperative-api"});Zb(ke,Et)||(_(Et),j.current.layout=Et,pe&&pe(Et),Np(Pe,Et,A.current))}}},[]),z=w.useCallback((ie,pe)=>{const{onLayout:ke}=O.current,{layout:Pe,panelDataArray:de}=j.current;if(ie.constraints.collapsible){const ge=de.map(Ct=>Ct.constraints),{collapsedSize:_e=0,panelSize:We=0,minSize:dt=0,pivotIndices:mt}=uf(de,ie,Pe),Et=pe??dt;if(_c(We,_e)){const Ct=I.current.get(ie.id),jn=Ct!=null&&Ct>=Et?Ct:Et,ln=Fp(de,ie)===de.length-1?We-jn:jn-We,Mn=zv({delta:ln,initialLayout:Pe,panelConstraints:ge,pivotIndices:mt,prevLayout:Pe,trigger:"imperative-api"});Zb(Pe,Mn)||(_(Mn),j.current.layout=Mn,ke&&ke(Mn),Np(de,Mn,A.current))}}},[]),W=w.useCallback(ie=>{const{layout:pe,panelDataArray:ke}=j.current,{panelSize:Pe}=uf(ke,ie,pe);return Qt(Pe!=null,`Panel size not found for panel "${ie.id}"`),Pe},[]),J=w.useCallback((ie,pe)=>{const{panelDataArray:ke}=j.current,Pe=Fp(ke,ie);return rhe({defaultSize:pe,dragState:k,layout:E,panelData:ke,panelIndex:Pe})},[k,E]),Y=w.useCallback(ie=>{const{layout:pe,panelDataArray:ke}=j.current,{collapsedSize:Pe=0,collapsible:de,panelSize:ge}=uf(ke,ie,pe);return Qt(ge!=null,`Panel size not found for panel "${ie.id}"`),de===!0&&_c(ge,Pe)},[]),me=w.useCallback(ie=>{const{layout:pe,panelDataArray:ke}=j.current,{collapsedSize:Pe=0,collapsible:de,panelSize:ge}=uf(ke,ie,pe);return Qt(ge!=null,`Panel size not found for panel "${ie.id}"`),!de||Qf(ge,Pe)>0},[]),ue=w.useCallback(ie=>{const{panelDataArray:pe}=j.current;pe.push(ie),pe.sort((ke,Pe)=>{const de=ke.order,ge=Pe.order;return de==null&&ge==null?0:de==null?-1:ge==null?1:de-ge}),j.current.panelDataArrayChanged=!0,M()},[M]);jf(()=>{if(j.current.panelDataArrayChanged){j.current.panelDataArrayChanged=!1;const{autoSaveId:ie,onLayout:pe,storage:ke}=O.current,{layout:Pe,panelDataArray:de}=j.current;let ge=null;if(ie){const We=she(ie,de,ke);We&&(I.current=new Map(Object.entries(We.expandToSizes)),ge=We.layout)}ge==null&&(ge=nhe({panelDataArray:de}));const _e=MO({layout:ge,panelConstraints:de.map(We=>We.constraints)});RO(Pe,_e)||(_(_e),j.current.layout=_e,pe&&pe(_e),Np(de,_e,A.current))}}),jf(()=>{const ie=j.current;return()=>{ie.layout=[]}},[]);const Ie=w.useCallback(ie=>{let pe=!1;const ke=S.current;return ke&&window.getComputedStyle(ke,null).getPropertyValue("direction")==="rtl"&&(pe=!0),function(de){de.preventDefault();const ge=S.current;if(!ge)return()=>null;const{direction:_e,dragState:We,id:dt,keyboardResizeBy:mt,onLayout:Et}=O.current,{layout:Ct,panelDataArray:jn}=j.current,{initialLayout:wn}=We??{},ln=SB(dt,ie,ge);let Mn=the(de,ie,_e,We,mt,ge);const En=_e==="horizontal";En&&pe&&(Mn=-Mn);const Q=jn.map(qe=>qe.constraints),le=zv({delta:Mn,initialLayout:wn??Ct,panelConstraints:Q,pivotIndices:ln,prevLayout:Ct,trigger:fB(de)?"keyboard":"mouse-or-touch"}),ye=!Zb(Ct,le);(hB(de)||pB(de))&&N.current!=Mn&&(N.current=Mn,!ye&&Mn!==0?En?Qk(ie,Mn<0?gB:vB):Qk(ie,Mn<0?yB:bB):Qk(ie,0)),ye&&(_(le),j.current.layout=le,Et&&Et(le),Np(jn,le,A.current))}},[]),se=w.useCallback((ie,pe)=>{const{onLayout:ke}=O.current,{layout:Pe,panelDataArray:de}=j.current,ge=de.map(Ct=>Ct.constraints),{panelSize:_e,pivotIndices:We}=uf(de,ie,Pe);Qt(_e!=null,`Panel size not found for panel "${ie.id}"`);const mt=Fp(de,ie)===de.length-1?_e-pe:pe-_e,Et=zv({delta:mt,initialLayout:Pe,panelConstraints:ge,pivotIndices:We,prevLayout:Pe,trigger:"imperative-api"});Zb(Pe,Et)||(_(Et),j.current.layout=Et,ke&&ke(Et),Np(de,Et,A.current))},[]),xe=w.useCallback((ie,pe)=>{const{layout:ke,panelDataArray:Pe}=j.current,{collapsedSize:de=0,collapsible:ge}=pe,{collapsedSize:_e=0,collapsible:We,maxSize:dt=100,minSize:mt=0}=ie.constraints,{panelSize:Et}=uf(Pe,ie,ke);Et!=null&&(ge&&We&&_c(Et,de)?_c(de,_e)||se(ie,_e):Et<mt?se(ie,mt):Et>dt&&se(ie,dt))},[se]),q=w.useCallback((ie,pe)=>{const{direction:ke}=O.current,{layout:Pe}=j.current;if(!S.current)return;const de=OS(ie,S.current);Qt(de,`Drag handle element not found for id "${ie}"`);const ge=kB(ke,pe);C({dragHandleId:ie,dragHandleRect:de.getBoundingClientRect(),initialCursorPosition:ge,initialLayout:Pe})},[]),te=w.useCallback(()=>{C(null)},[]),ae=w.useCallback(ie=>{const{panelDataArray:pe}=j.current,ke=Fp(pe,ie);ke>=0&&(pe.splice(ke,1),delete A.current[ie.id],j.current.panelDataArrayChanged=!0,M())},[M]),B=w.useMemo(()=>({collapsePanel:V,direction:r,dragState:k,expandPanel:z,getPanelSize:W,getPanelStyle:J,groupId:v,isPanelCollapsed:Y,isPanelExpanded:me,reevaluatePanelConstraints:xe,registerPanel:ue,registerResizeHandle:Ie,resizePanel:se,startDragging:q,stopDragging:te,unregisterPanel:ae,panelGroupElement:S.current}),[V,k,r,z,W,J,v,Y,me,xe,ue,Ie,se,q,te,ae]),fe={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return w.createElement(IS.Provider,{value:B},w.createElement(h,{...m,children:e,className:n,id:s,ref:S,style:{...fe,...f},[kr.group]:"",[kr.groupDirection]:r,[kr.groupId]:v}))}const RB=w.forwardRef((t,e)=>w.createElement(PB,{...t,forwardedRef:e}));PB.displayName="PanelGroup";RB.displayName="forwardRef(PanelGroup)";function Fp(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function uf(t,e,n){const r=Fp(t,e),s=r===t.length-1?[r-1,r]:[r,r+1],o=n[r];return{...e.constraints,panelSize:o,pivotIndices:s}}function lhe({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){w.useEffect(()=>{if(t||n==null||r==null)return;const i=OS(e,r);if(i==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=i.getAttribute(kr.groupId);Qt(a,`No group element found for id "${a}"`);const u=Py(a,r),f=wB(a,e,r);Qt(f!==null,`No resize element found for id "${e}"`);const h=o.shiftKey?f>0?f-1:u.length-1:f+1<u.length?f+1:0;u[h].focus();break}}};return i.addEventListener("keydown",s),()=>{i.removeEventListener("keydown",s)}},[r,t,e,n])}function IB({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:i,onBlur:s,onClick:o,onDragging:a,onFocus:u,onPointerDown:f,onPointerUp:h,style:m={},tabIndex:v=0,tagName:S="div",...k}){var C,E;const _=w.useRef(null),M=w.useRef({onClick:o,onDragging:a,onPointerDown:f,onPointerUp:h});w.useEffect(()=>{M.current.onClick=o,M.current.onDragging=a,M.current.onPointerDown=f,M.current.onPointerUp=h});const A=w.useContext(IS);if(A===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:I,groupId:N,registerResizeHandle:O,startDragging:j,stopDragging:V,panelGroupElement:z}=A,W=LP(i),[J,Y]=w.useState("inactive"),[me,ue]=w.useState(!1),[Ie,se]=w.useState(null),xe=w.useRef({state:J});jf(()=>{xe.current.state=J}),w.useEffect(()=>{if(n)se(null);else{const B=O(W);se(()=>B)}},[n,W,O]);const q=(C=r==null?void 0:r.coarse)!==null&&C!==void 0?C:15,te=(E=r==null?void 0:r.fine)!==null&&E!==void 0?E:5;w.useEffect(()=>{if(n||Ie==null)return;const B=_.current;Qt(B,"Element ref not attached");let fe=!1;return qfe(W,B,I,{coarse:q,fine:te},(pe,ke,Pe)=>{if(!ke){Y("inactive");return}switch(pe){case"down":{Y("drag"),fe=!1,Qt(Pe,'Expected event to be defined for "down" action'),j(W,Pe);const{onDragging:de,onPointerDown:ge}=M.current;de==null||de(!0),ge==null||ge();break}case"move":{const{state:de}=xe.current;fe=!0,de!=="drag"&&Y("hover"),Qt(Pe,'Expected event to be defined for "move" action'),Ie(Pe);break}case"up":{Y("hover"),V();const{onClick:de,onDragging:ge,onPointerUp:_e}=M.current;ge==null||ge(!1),_e==null||_e(),fe||de==null||de();break}}})},[q,I,n,te,O,W,Ie,j,V]),lhe({disabled:n,handleId:W,resizeHandler:Ie,panelGroupElement:z});const ae={touchAction:"none",userSelect:"none"};return w.createElement(S,{...k,children:t,className:e,id:i,onBlur:()=>{ue(!1),s==null||s()},onFocus:()=>{ue(!0),u==null||u()},ref:_,role:"separator",style:{...ae,...m},tabIndex:v,[kr.groupDirection]:I,[kr.groupId]:N,[kr.resizeHandle]:"",[kr.resizeHandleActive]:J==="drag"?"pointer":me?"keyboard":void 0,[kr.resizeHandleEnabled]:!n,[kr.resizeHandleId]:W,[kr.resizeHandleState]:J})}IB.displayName="PanelResizeHandle";function che({className:t,...e}){return b.jsx(RB,{"data-slot":"resizable-panel-group",className:nn("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...e})}function NO({...t}){return b.jsx(dB,{"data-slot":"resizable-panel",...t})}function uhe({withHandle:t,className:e,...n}){return b.jsx(IB,{"data-slot":"resizable-handle",className:nn("focus-visible:ring-ring relative flex w-px items-center justify-center bg-transparent after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 [&[data-panel-group-direction=vertical]>div]:rotate-90",e),...n,children:t&&b.jsx("div",{className:"flex size-20 items-center justify-center rounded-xs z-10",children:b.jsx(jX,{className:"size-20 text-violet-500 hover:text-violet-600 duration-300"})})})}const dhe=()=>{const{connectSettings:t,settings:e,disconnect:n}=Fw(),{latestHostLeft:r,latestHostUpdate:i}=$y(),{ws:s,connectUserEvents:o,sendUserEvent:a,events:{shareScreenEvents:u},disconnectUserEvents:f}=Ma(),{connectMedia:h,disconnectMedia:m,mediaState:v,remoteMediaStates:S,setAudioState:k,setVideoState:C,setVideoTrack:E,audioTrack:_,setAudioTrack:M,videoTrack:A}=bE(),{isChatExpanded:I,shareScreenView:N,setShareScreenView:O,isFocusView:j}=zy(),V=w.useRef(S);w.useEffect(()=>{V.current=S},[S]);const z=w.useRef(v);w.useEffect(()=>{z.current=v},[v]);const[W,J]=w.useState("participants"),[Y,me]=w.useState(new Map),[ue,Ie]=w.useState([]),se=w.useRef(null),[xe,q]=w.useState(),[te,ae]=w.useState([]),[B,fe]=w.useState([]),[ie,pe]=w.useState(null),[ke,Pe]=w.useState([]),de=qs(),{id:ge}=Xf(),{sessionID:_e}=de.state||{};CP({message:"Are you sure you want to leave the call? You will be disconnected from the room too.",onBeforeLeave:()=>{const Ne=se.current;Ne&&Ne.disconnect(),A&&A.stop(),_&&_.stop(),n(),ge&&Bx(ge)},allowedPaths:["/post-call"]});const{data:We,isError:dt}=Ho({queryKey:["lvkToken",ge],queryFn:()=>W9(ge,_e),enabled:!!ge&&!!_e});w.useEffect(()=>{We?q(We):dt&&q(void 0)},[We,dt]),w.useEffect(()=>{if(ge&&_e&&o(ge,_e),!!s)return()=>{f()}},[ge,_e]),w.useEffect(()=>((async()=>{try{ge&&_e&&h(ge,_e)}catch(ht){console.error("Failed to establish WebSocket connection:",ht)}})(),()=>{m()}),[ge,_e]),w.useEffect(()=>(ge&&_e&&t(ge),()=>{n()}),[ge,t]),w.useEffect(()=>{se.current=new Mm({adaptiveStream:!0,dynacast:!0,videoCaptureDefaults:{resolution:Im.h720.resolution},audioCaptureDefaults:{autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},publishDefaults:{audioPreset:uw.speech,videoCodec:"vp8"}});const Ne=se.current,ht=(bt,fn,_n)=>{bt.kind===Ee.Kind.Video&&fn.source===Ee.Source.ScreenShare?pe({track:bt,participantIdentity:_n.identity,kind:Ee.Kind.Video}):bt.kind===Ee.Kind.Video?ae(or=>[...or,{track:bt,participantIdentity:_n.identity,kind:Ee.Kind.Video}]):bt.kind===Ee.Kind.Audio&&fe(or=>[...or,{track:bt,participantIdentity:_n.identity,kind:Ee.Kind.Audio}])},$t=()=>{var fn,_n,or,ci;const bt=Array.from(Ne.localParticipant.videoTrackPublications.values()).find(Ur=>Ur.source===Ee.Source.ScreenShare);if(bt&&bt.videoTrack)pe({track:bt.videoTrack,participantIdentity:_e,kind:Ee.Kind.Video});else{if(A)E(A);else{const Ur=(_n=(fn=Ne==null?void 0:Ne.localParticipant)==null?void 0:fn.videoTrackPublications.values().next().value)==null?void 0:_n.videoTrack;E(Ur)}if(_)M(_);else{const Ur=(ci=(or=Ne==null?void 0:Ne.localParticipant)==null?void 0:or.audioTrackPublications.values().next().value)==null?void 0:ci.audioTrack;M(Ur)}}};Ne.localParticipant.on("trackPublished",$t),Ne.on(Ae.TrackSubscribed,ht),Ne.on(Ae.TrackUnsubscribed,mt),Ne.on(Ae.ActiveSpeakersChanged,bt=>{Pe(bt.map(fn=>fn.identity))});const cn=bt=>{const fn={...V.current,[_e]:z.current};a({type:"sync.media",session_id:_e,payload:fn}),me(_n=>{const or=new Map(_n);return or.set(bt.identity,bt),or}),Ct()},dn=()=>{a({type:"media.control.updated",session_id:_e,payload:{audio:z.current.audio,video:z.current.video}}),a({type:"sync.media",session_id:_e,payload:{}})};return Ne.on(Ae.ParticipantConnected,cn),Ne.on(Ae.Connected,dn),Ne.on(Ae.ParticipantDisconnected,bt=>{me(fn=>{const _n=new Map(fn);return _n.delete(bt.identity),_n}),ae(fn=>fn.filter(_n=>_n.participantIdentity!==bt.identity)),fe(fn=>fn.filter(_n=>_n.participantIdentity!==bt.identity)),setTimeout(()=>{Ct()},200)}),Ne.on(Ae.Disconnected,()=>{me(new Map),ae([]),fe([]),Ie([]),q(void 0),E(null),M(null),k(!1),C(!1)}),()=>{Ne.localParticipant.off("trackPublished",$t),Ne.off(Ae.TrackSubscribed,ht),Ne.off(Ae.TrackUnsubscribed,mt),Ne.off(Ae.ParticipantConnected,cn),Ne.off(Ae.Connected,dn),Ne.disconnect()}},[]);const mt=(Ne,ht)=>{Ne.detach(),Ne.kind===Ee.Kind.Video&&ht.source===Ee.Source.ScreenShare?pe(null):Ne.kind===Ee.Kind.Video?ae($t=>$t.filter(cn=>cn.track.sid!==Ne.sid)):Ne.kind===Ee.Kind.Audio&&fe($t=>$t.filter(cn=>cn.track.sid!==Ne.sid))};w.useEffect(()=>{const Ne=se.current;if(!Ne)return;console.log("lvkToken: ",xe),(async()=>{var $t,cn;try{if(!xe){console.error("Failed to get LiveKit token");return}if(Ne.state===kn.Connected)return;const dn="wss://rooms-dev-zamqmzo0.livekit.cloud";if(Ne==null||Ne.prepareConnection(dn,xe),await Ne.connect(dn,xe),!v.video){const bt=Ne.localParticipant.getTrackPublication(Ee.Source.Camera);bt&&bt.track&&bt.track.mute()}if(!v.audio){const bt=Ne.localParticipant.getTrackPublication(Ee.Source.Microphone);bt&&bt.track&&bt.track.mute()}if(Ne!=null&&Ne.remoteParticipants){const bt=new Map;Ne.remoteParticipants.forEach(fn=>{bt.set(fn.identity,fn)}),me(bt)}if(A)E(A);else{const bt=(cn=($t=Ne==null?void 0:Ne.localParticipant)==null?void 0:$t.videoTrackPublications.values().next().value)==null?void 0:cn.videoTrack;E(bt||null)}}catch(dn){console.error("Error connecting to LiveKit room:",dn)}})()},[ge,_e,xe]);const{data:Et,refetch:Ct}=Ho({queryKey:["call-participants",ge],queryFn:()=>oL(ge)});w.useEffect(()=>{Et&&Ie(Et.participantsInCall)},[Et,_e,Y]);const jn=(e==null?void 0:e.invite_permission)||!1,wn=ue.find(Ne=>Ne.session_id==_e),ln=(wn==null?void 0:wn.isHost)||!1,Mn=Array.from(Y.keys()).filter(Ne=>Ne!==_e),En=Ne=>{const ht=Mn.find($t=>$t===Ne);return ue.find($t=>$t.session_id===ht)},Q=w.useCallback((Ne,ht)=>{Ne&&ht?(pe(ht),O([{trackSid:ht.track.sid}])):(pe(null),O("participants"))},[O]);w.useEffect(()=>{u.length>0?O([{trackSid:(ie==null?void 0:ie.track.sid)||""}]):(pe(null),O("participants"))},[u,O]),w.useEffect(()=>{var $t;if(!ie||!(($t=se.current)!=null&&$t.localParticipant))return;const ht=setInterval(()=>{var dn,bt;Array.from(((bt=(dn=se.current)==null?void 0:dn.localParticipant)==null?void 0:bt.videoTrackPublications.values())||[]).find(fn=>fn.source===Ee.Source.ScreenShare)||(a({type:"share_screen.ended",senderID:_e,payload:{active:!1,trackSid:ie.track.sid,username:(wn==null?void 0:wn.username)||"Unknown"}}),pe(null))},1e3);return()=>clearInterval(ht)},[ie,_e,wn,a]);const le=si("mx-4 mb-12 h-full transition-all duration-300 ease-in-out",{"mr-[348px]":W!==null,"mr-[800px]":I&&W==="chat"}),ye=Y.size+(j?0:1),qe={gridTemplateColumns:`repeat(${Math.ceil(Math.sqrt(ye))}, 1fr)`},Ge=w.useRef(null),{width:Be=0}=XK({ref:Ge}),Xe=ffe({activeSpeakers:ke,remoteTracks:te});return b.jsxs("div",{className:"h-screen bg-black flex flex-col",children:[b.jsx(Efe,{isSharingScreen:u.length>0,participantsCount:ue.length}),b.jsxs("div",{className:"flex-1 relative overflow-hidden",children:[r&&b.jsx(CO,{hostEventType:"left"}),i&&b.jsx(CO,{hostEventType:"updated"}),b.jsxs(che,{direction:"horizontal",className:"h-full",children:[b.jsx(NO,{defaultSize:8,minSize:8,maxSize:40,hidden:!j,children:b.jsxs(_fe,{ref:Ge,children:[u.length>0&&ie&&b.jsx("div",{className:"h-full overscroll-auto",children:b.jsx(SO,{isSidePanel:!0,screenShareTrack:ie})}),Xe.map((Ne,ht)=>b.jsx(Xb,{isSidePanel:!0,index:ht,responsiveWidth:Be||0,participant:En(Ne.participantIdentity),track:Ne.track,audioTracks:B,remoteIdentity:Ne.participantIdentity,isLocal:!1,isActiveSpeaker:ke.includes(Ne.participantIdentity),remoteMediaStates:S},`${Ne.participantIdentity}-${ht}`)),b.jsx(Xb,{isSidePanel:!0,participant:wn,responsiveWidth:Be||0,track:A,isLocal:!0,mediaState:v,audioTracks:B,isActiveSpeaker:ke.includes(_e),remoteMediaStates:S},"local-video")]})}),b.jsx(uhe,{withHandle:!0,hidden:!j}),b.jsx(NO,{defaultSize:70,minSize:30,children:b.jsxs("div",{className:"h-full relative overflow-hidden",children:[b.jsx(Cfe,{}),b.jsxs("div",{className:le,children:[N!=="participants"&&ie&&b.jsx("div",{className:"h-full p-8 overscroll-auto",children:b.jsx(SO,{isSidePanel:!1,screenShareTrack:ie})}),N==="participants"&&b.jsxs("div",{className:"grid gap-8 h-full p-8 overflow-auto transition-all duration-300 ease-in-out",style:qe,children:[te.map((Ne,ht)=>Ne.track.kind==="video"&&b.jsx(Xb,{index:ht,isSidePanel:!1,participant:En(Ne.participantIdentity),track:Ne.track,audioTracks:B,remoteIdentity:Ne.participantIdentity,isLocal:!1,isActiveSpeaker:ke.includes(Ne.participantIdentity),remoteMediaStates:S},Ne.track.sid)),(te.length===0||!j)&&b.jsx(Xb,{isSidePanel:!1,participant:wn,track:A,isLocal:!0,mediaState:v,audioTracks:B,isActiveSpeaker:ke.includes(_e),remoteMediaStates:S},"local-video")]})]})]})})]}),b.jsx(pfe,{open:W==="participants",participants:ue,invitePermission:jn,isHost:ln,sessionID:_e,mediaState:v,remoteMediaStates:S,isActiveSpeaker:ke.includes(_e),onClose:()=>J(null)}),b.jsx(xfe,{open:W==="chat",onClose:()=>J(null)})]}),b.jsx("div",{className:"flex items-center border-t border-zinc-800 bg-zinc-950",children:b.jsx(Ofe,{sessionID:_e,room:se.current,mediaState:v,setAudioState:k,setVideoState:C,activePanel:W,setActivePanel:J,onScreenShareChange:Q})})]})},fhe=()=>{const{sendSystemEvent:t,disconnectSystemEvents:e}=$y(),n=Rw(),r=Il(),{id:i}=Xf(),[s,o]=w.useState(!1),a=cs.get("rsCookie");CP({message:"Are you sure you want to leave the room? All your data will be deleted.",onBeforeLeave:()=>{o(!0),e(),i&&Bx(i)},shouldBlock:!s,allowedPaths:[]});const{data:u}=Ho({queryKey:["me",i,a],queryFn:()=>jw(i,a),enabled:!!i&&!!a}),f=u==null?void 0:u.id,h=u==null?void 0:u.isHost,{mutate:m,isPending:v}=Ju({mutationFn:()=>Bx(i),onMutate:()=>{n.cancelQueries(),e(),cs.remove("rsCookie"),o(!0)},onSuccess:()=>{r("/",{replace:!0})},onError:()=>{r("/",{replace:!0})}}),{mutate:S,isPending:k}=Ju({mutationFn:()=>z9(i,a),onMutate:()=>{n.cancelQueries(),e(),cs.remove("rsCookie"),o(!0)},onSuccess:()=>{r("/",{replace:!0})},onError:()=>{r("/",{replace:!0})}}),C=()=>{o(!0),setTimeout(()=>r(`/room/${i}`,{replace:!0}),0)},E=()=>{f&&(t({type:"host.left",payload:{previous_host_id:f}}),m())},_=()=>{f&&(t({type:"host.left",payload:{previous_host_id:f}}),S())},[M,{startCountdown:A}]=KE({countStart:60});return w.useEffect(()=>{A(),M===0&&m()},[A,M]),!i||!a?null:b.jsxs("div",{className:"flex flex-col items-center gap-48 mt-72",children:[b.jsxs("header",{className:"absolute top-40 flex flex-col items-center",children:[b.jsx("p",{className:"text-2xl font-mono text-gray-800",children:"Whispurr"}),b.jsx("img",{src:M_,alt:"logo",width:80})]}),b.jsxs("div",{className:"flex flex-col items-center justify-center gap-28 mt-[120px]",children:[b.jsx("h1",{className:"text-4xl",children:"You left the call"}),b.jsxs("div",{className:"flex items-center justify-center gap-4",children:[b.jsx(Em,{size:12,className:"text-yellow-600"}),b.jsx("span",{className:"text-xs text-gray-600",children:"You are the host of this call."})]}),b.jsxs("div",{className:"flex items-center justify-center gap-12",children:[b.jsxs(ls,{variant:"outline",onClick:C,children:[b.jsx(HX,{size:20,className:"mr-8"}),"Stay in Lobby"]}),h?b.jsx(e0,{children:b.jsxs("form",{children:[b.jsx(oS,{asChild:!0,children:b.jsxs(ls,{variant:"destructive",children:[b.jsx(fk,{size:20,className:"mr-8"}),"Leave Room"]})}),b.jsxs(Ym,{className:"flex flex-col gap-24 sm:max-w-[425px]",children:[b.jsxs(Qm,{children:[b.jsx(Jm,{children:"Leave the Room"}),b.jsx(B_,{className:"text-sm text-muted-foreground",children:"Youre the current host. If you leave, you can either hand over the session to others or end the call for everyone. Choose what happens next."})]}),b.jsxs(V_,{children:[b.jsxs(ls,{type:"submit",disabled:v,onClick:E,children:[b.jsx(fk,{size:16,className:"mr-8"}),v?"Leaving...":"Leave"]}),b.jsxs(ls,{type:"submit",variant:"destructive",disabled:k,onClick:_,children:[b.jsx(XX,{size:16,className:"mr-8"}),k?"Ending...":"End"]})]})]})]})}):b.jsxs(ls,{variant:"destructive",disabled:v,onClick:()=>m(),children:[b.jsx(fk,{size:20,className:"mr-8"}),"Leave Room"]})]}),b.jsxs("span",{className:"text-sm underline",children:["Returning to home screen in ",M," seconds."]})]}),b.jsxs("div",{className:"flex items-center justify-center gap-12",children:[b.jsx("span",{className:"text-sm",children:"Were you satisfied with your overall experience?"}),b.jsxs("div",{className:"flex items-center justify-center gap-12",children:[b.jsx(rZ,{size:20,className:"cursor-pointer hover:scale-105 duration-300 ease-in-out hover:text-green-500"}),b.jsx(nZ,{size:20,className:"cursor-pointer hover:scale-105 duration-300 ease-in-out hover:text-red-500"})]})]}),b.jsx(A_,{className:"flex flex-row items-center justify-center gap-12 p-16 w-[384px] shadow-elevation-low",children:b.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[b.jsxs("div",{className:"flex items-center justify-center gap-4",children:[b.jsx(Jy,{size:20,className:"text-orange-500"}),b.jsx("h2",{className:"text-lg font-semibold",children:"No Trace Left Behind"})]}),b.jsx("span",{className:"text-sm text-muted-foreground",children:"Your session data and personal information have been securely erased. No trace of your participation remains on our servers, ensuring your privacy and digital footprint are fully protected."}),b.jsx("span",{className:"text-sm text-blue-500 underline cursor-pointer hover:text-blue-600 duration-300 ease-in-out",children:"Learn more"})]})}),b.jsxs("div",{className:"absolute bottom-16 flex items-center gap-8",onClick:()=>window.open("https://github.com/Panos61/videocall-app-client/issues/new","_blank"),children:[b.jsx("span",{className:"text-sm text-gray-600 underline cursor-pointer hover:text-gray-900",children:"Report an issue"}),b.jsx(Qj,{className:"size-16"})]})]})},hhe=()=>{const t=Il(),[e,{startCountdown:n}]=KE({countStart:60});return w.useEffect(()=>{n(),e===0&&t("/",{replace:!0})},[n,e]),b.jsxs("div",{className:"flex flex-col justify-center items-center gap-24",children:[b.jsxs("div",{className:"flex flex-col gap-12 mt-[160px]",children:[b.jsxs("h1",{className:"max-w-[580px] text-center text-2xl font-mono font-medium",children:["Whoops.. This room cannot be found or the URL is invalid."," "]}),b.jsx("p",{className:"max-w-[580px] text-center text-md",children:"Make sure that you've entered the correct meeting room id in the URL, e.g. https://localhost:3000/room/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"})]}),b.jsx(ls,{onClick:()=>t("/",{replace:!0}),children:"Return to home screen"}),b.jsxs("span",{className:"mt-12 text-sm underline",children:["Returning to home screen in ",e," seconds."]})]})},phe=()=>{const t=Il();return b.jsxs("div",{className:"flex flex-col justify-center items-center gap-24",children:[b.jsxs("div",{className:"flex flex-col gap-12 mt-[160px]",children:[b.jsxs("h1",{className:"max-w-[580px] text-center text-2xl font-mono font-medium",children:["Whoops..404 This page cannot be found."," "]}),b.jsx("p",{className:"max-w-[580px] text-center text-md",children:"The page you are looking for does not exist."})]}),b.jsx(ls,{onClick:()=>t("/"),children:"Return to home screen"})]})},mhe=new O6,ghe=()=>{const t=K8([{path:"/",element:b.jsx(wZ,{})},{path:"/room-invite",element:b.jsx(gle,{})},{path:"/room/:id",element:b.jsx(qC,{children:b.jsx(dfe,{})})},{path:"/room/:id/call",element:b.jsx(qC,{children:b.jsx(dhe,{})})},{path:"/room/:id/post-call",element:b.jsx(qC,{children:b.jsx(fhe,{})})},{path:"/whoops",element:b.jsx(hhe,{})},{path:"*",element:b.jsx(phe,{})}]);return b.jsx(D6,{client:mhe,children:b.jsx(tH,{children:b.jsx(J9,{children:b.jsx(aW,{children:b.jsx(lW,{children:b.jsxs(X9,{children:[b.jsx(wK,{children:b.jsx(oW,{router:t})}),b.jsx(RH,{richColors:!0,position:"top-center"})]})})})})})})};d6.createRoot(document.getElementById("root")).render(b.jsx(Re.StrictMode,{children:b.jsx(ghe,{})}));
