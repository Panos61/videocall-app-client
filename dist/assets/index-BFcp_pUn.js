var Z5=Object.defineProperty;var fP=t=>{throw TypeError(t)};var e6=(t,e,n)=>e in t?Z5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var lt=(t,e,n)=>e6(t,typeof e!="symbol"?e+"":e,n),LC=(t,e,n)=>e.has(t)||fP("Cannot "+n);var X=(t,e,n)=>(LC(t,e,"read from private field"),n?n.call(t):e.get(t)),Ct=(t,e,n)=>e.has(t)?fP("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),it=(t,e,n,r)=>(LC(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Xt=(t,e,n)=>(LC(t,e,"access private method"),n);var Ib=(t,e,n,r)=>({set _(i){it(t,e,i,n)},get _(){return X(t,e,r)}});function t6(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jC={exports:{}},wv={},FC={exports:{}},rn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hP;function n6(){if(hP)return rn;hP=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function y(B){return B===null||typeof B!="object"?null:(B=p&&B[p]||B["@@iterator"],typeof B=="function"?B:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,C={};function E(B,de,se){this.props=B,this.context=de,this.refs=C,this.updater=se||S}E.prototype.isReactComponent={},E.prototype.setState=function(B,de){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,de,"setState")},E.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function _(){}_.prototype=E.prototype;function A(B,de,se){this.props=B,this.context=de,this.refs=C,this.updater=se||S}var M=A.prototype=new _;M.constructor=A,k(M,E.prototype),M.isPureReactComponent=!0;var I=Array.isArray,N=Object.prototype.hasOwnProperty,O={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function V(B,de,se){var me,Te={},Re=null,ie=null;if(de!=null)for(me in de.ref!==void 0&&(ie=de.ref),de.key!==void 0&&(Re=""+de.key),de)N.call(de,me)&&!j.hasOwnProperty(me)&&(Te[me]=de[me]);var be=arguments.length-2;if(be===1)Te.children=se;else if(1<be){for(var Le=Array(be),$e=0;$e<be;$e++)Le[$e]=arguments[$e+2];Te.children=Le}if(B&&B.defaultProps)for(me in be=B.defaultProps,be)Te[me]===void 0&&(Te[me]=be[me]);return{$$typeof:t,type:B,key:Re,ref:ie,props:Te,_owner:O.current}}function $(B,de){return{$$typeof:t,type:B.type,key:de,ref:B.ref,props:B.props,_owner:B._owner}}function W(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function J(B){var de={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(se){return de[se]})}var Y=/\/+/g;function pe(B,de){return typeof B=="object"&&B!==null&&B.key!=null?J(""+B.key):de.toString(36)}function fe(B,de,se,me,Te){var Re=typeof B;(Re==="undefined"||Re==="boolean")&&(B=null);var ie=!1;if(B===null)ie=!0;else switch(Re){case"string":case"number":ie=!0;break;case"object":switch(B.$$typeof){case t:case e:ie=!0}}if(ie)return ie=B,Te=Te(ie),B=me===""?"."+pe(ie,0):me,I(Te)?(se="",B!=null&&(se=B.replace(Y,"$&/")+"/"),fe(Te,de,se,"",function($e){return $e})):Te!=null&&(W(Te)&&(Te=$(Te,se+(!Te.key||ie&&ie.key===Te.key?"":(""+Te.key).replace(Y,"$&/")+"/")+B)),de.push(Te)),1;if(ie=0,me=me===""?".":me+":",I(B))for(var be=0;be<B.length;be++){Re=B[be];var Le=me+pe(Re,be);ie+=fe(Re,de,se,Le,Te)}else if(Le=y(B),typeof Le=="function")for(B=Le.call(B),be=0;!(Re=B.next()).done;)Re=Re.value,Le=me+pe(Re,be++),ie+=fe(Re,de,se,Le,Te);else if(Re==="object")throw de=String(B),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.");return ie}function Ee(B,de,se){if(B==null)return B;var me=[],Te=0;return fe(B,me,"","",function(Re){return de.call(se,Re,Te++)}),me}function le(B){if(B._status===-1){var de=B._result;de=de(),de.then(function(se){(B._status===0||B._status===-1)&&(B._status=1,B._result=se)},function(se){(B._status===0||B._status===-1)&&(B._status=2,B._result=se)}),B._status===-1&&(B._status=0,B._result=de)}if(B._status===1)return B._result.default;throw B._result}var Se={current:null},q={transition:null},te={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:q,ReactCurrentOwner:O};function ae(){throw Error("act(...) is not supported in production builds of React.")}return rn.Children={map:Ee,forEach:function(B,de,se){Ee(B,function(){de.apply(this,arguments)},se)},count:function(B){var de=0;return Ee(B,function(){de++}),de},toArray:function(B){return Ee(B,function(de){return de})||[]},only:function(B){if(!W(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},rn.Component=E,rn.Fragment=n,rn.Profiler=i,rn.PureComponent=A,rn.StrictMode=r,rn.Suspense=c,rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,rn.act=ae,rn.cloneElement=function(B,de,se){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var me=k({},B.props),Te=B.key,Re=B.ref,ie=B._owner;if(de!=null){if(de.ref!==void 0&&(Re=de.ref,ie=O.current),de.key!==void 0&&(Te=""+de.key),B.type&&B.type.defaultProps)var be=B.type.defaultProps;for(Le in de)N.call(de,Le)&&!j.hasOwnProperty(Le)&&(me[Le]=de[Le]===void 0&&be!==void 0?be[Le]:de[Le])}var Le=arguments.length-2;if(Le===1)me.children=se;else if(1<Le){be=Array(Le);for(var $e=0;$e<Le;$e++)be[$e]=arguments[$e+2];me.children=be}return{$$typeof:t,type:B.type,key:Te,ref:Re,props:me,_owner:ie}},rn.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:s,_context:B},B.Consumer=B},rn.createElement=V,rn.createFactory=function(B){var de=V.bind(null,B);return de.type=B,de},rn.createRef=function(){return{current:null}},rn.forwardRef=function(B){return{$$typeof:a,render:B}},rn.isValidElement=W,rn.lazy=function(B){return{$$typeof:h,_payload:{_status:-1,_result:B},_init:le}},rn.memo=function(B,de){return{$$typeof:d,type:B,compare:de===void 0?null:de}},rn.startTransition=function(B){var de=q.transition;q.transition={};try{B()}finally{q.transition=de}},rn.unstable_act=ae,rn.useCallback=function(B,de){return Se.current.useCallback(B,de)},rn.useContext=function(B){return Se.current.useContext(B)},rn.useDebugValue=function(){},rn.useDeferredValue=function(B){return Se.current.useDeferredValue(B)},rn.useEffect=function(B,de){return Se.current.useEffect(B,de)},rn.useId=function(){return Se.current.useId()},rn.useImperativeHandle=function(B,de,se){return Se.current.useImperativeHandle(B,de,se)},rn.useInsertionEffect=function(B,de){return Se.current.useInsertionEffect(B,de)},rn.useLayoutEffect=function(B,de){return Se.current.useLayoutEffect(B,de)},rn.useMemo=function(B,de){return Se.current.useMemo(B,de)},rn.useReducer=function(B,de,se){return Se.current.useReducer(B,de,se)},rn.useRef=function(B){return Se.current.useRef(B)},rn.useState=function(B){return Se.current.useState(B)},rn.useSyncExternalStore=function(B,de,se){return Se.current.useSyncExternalStore(B,de,se)},rn.useTransition=function(){return Se.current.useTransition()},rn.version="18.3.1",rn}var pP;function aE(){return pP||(pP=1,FC.exports=n6()),FC.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mP;function r6(){if(mP)return wv;mP=1;var t=aE(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,d){var h,p={},y=null,S=null;d!==void 0&&(y=""+d),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(S=c.ref);for(h in c)r.call(c,h)&&!s.hasOwnProperty(h)&&(p[h]=c[h]);if(a&&a.defaultProps)for(h in c=a.defaultProps,c)p[h]===void 0&&(p[h]=c[h]);return{$$typeof:e,type:a,key:y,ref:S,props:p,_owner:i.current}}return wv.Fragment=n,wv.jsx=o,wv.jsxs=o,wv}var gP;function i6(){return gP||(gP=1,jC.exports=r6()),jC.exports}var b=i6(),v=aE();const Pe=Nw(v),Mw=t6({__proto__:null,default:Pe},[v]);var Nb={},UC={exports:{}},Ps={},VC={exports:{}},BC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vP;function s6(){return vP||(vP=1,function(t){function e(q,te){var ae=q.length;q.push(te);e:for(;0<ae;){var B=ae-1>>>1,de=q[B];if(0<i(de,te))q[B]=te,q[ae]=de,ae=B;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var te=q[0],ae=q.pop();if(ae!==te){q[0]=ae;e:for(var B=0,de=q.length,se=de>>>1;B<se;){var me=2*(B+1)-1,Te=q[me],Re=me+1,ie=q[Re];if(0>i(Te,ae))Re<de&&0>i(ie,Te)?(q[B]=ie,q[Re]=ae,B=Re):(q[B]=Te,q[me]=ae,B=me);else if(Re<de&&0>i(ie,ae))q[B]=ie,q[Re]=ae,B=Re;else break e}}return te}function i(q,te){var ae=q.sortIndex-te.sortIndex;return ae!==0?ae:q.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],d=[],h=1,p=null,y=3,S=!1,k=!1,C=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(q){for(var te=n(d);te!==null;){if(te.callback===null)r(d);else if(te.startTime<=q)r(d),te.sortIndex=te.expirationTime,e(c,te);else break;te=n(d)}}function I(q){if(C=!1,M(q),!k)if(n(c)!==null)k=!0,le(N);else{var te=n(d);te!==null&&Se(I,te.startTime-q)}}function N(q,te){k=!1,C&&(C=!1,_(V),V=-1),S=!0;var ae=y;try{for(M(te),p=n(c);p!==null&&(!(p.expirationTime>te)||q&&!J());){var B=p.callback;if(typeof B=="function"){p.callback=null,y=p.priorityLevel;var de=B(p.expirationTime<=te);te=t.unstable_now(),typeof de=="function"?p.callback=de:p===n(c)&&r(c),M(te)}else r(c);p=n(c)}if(p!==null)var se=!0;else{var me=n(d);me!==null&&Se(I,me.startTime-te),se=!1}return se}finally{p=null,y=ae,S=!1}}var O=!1,j=null,V=-1,$=5,W=-1;function J(){return!(t.unstable_now()-W<$)}function Y(){if(j!==null){var q=t.unstable_now();W=q;var te=!0;try{te=j(!0,q)}finally{te?pe():(O=!1,j=null)}}else O=!1}var pe;if(typeof A=="function")pe=function(){A(Y)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,Ee=fe.port2;fe.port1.onmessage=Y,pe=function(){Ee.postMessage(null)}}else pe=function(){E(Y,0)};function le(q){j=q,O||(O=!0,pe())}function Se(q,te){V=E(function(){q(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){k||S||(k=!0,le(N))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(q){switch(y){case 1:case 2:case 3:var te=3;break;default:te=y}var ae=y;y=te;try{return q()}finally{y=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,te){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ae=y;y=q;try{return te()}finally{y=ae}},t.unstable_scheduleCallback=function(q,te,ae){var B=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?B+ae:B):ae=B,q){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=ae+de,q={id:h++,callback:te,priorityLevel:q,startTime:ae,expirationTime:de,sortIndex:-1},ae>B?(q.sortIndex=ae,e(d,q),n(c)===null&&q===n(d)&&(C?(_(V),V=-1):C=!0,Se(I,ae-B))):(q.sortIndex=de,e(c,q),k||S||(k=!0,le(N))),q},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(q){var te=y;return function(){var ae=y;y=te;try{return q.apply(this,arguments)}finally{y=ae}}}}(BC)),BC}var yP;function o6(){return yP||(yP=1,VC.exports=s6()),VC.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bP;function a6(){if(bP)return Ps;bP=1;var t=aE(),e=o6();function n(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,g=1;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(l,u){o(l,u),o(l+"Capture",u)}function o(l,u){for(i[l]=u,l=0;l<u.length;l++)r.add(u[l])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function y(l){return c.call(p,l)?!0:c.call(h,l)?!1:d.test(l)?p[l]=!0:(h[l]=!0,!1)}function S(l,u,g,x){if(g!==null&&g.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return x?!1:g!==null?!g.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function k(l,u,g,x){if(u===null||typeof u>"u"||S(l,u,g,x))return!0;if(x)return!1;if(g!==null)switch(g.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function C(l,u,g,x,T,R,L){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=x,this.attributeNamespace=T,this.mustUseProperty=g,this.propertyName=l,this.type=u,this.sanitizeURL=R,this.removeEmptyString=L}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){E[l]=new C(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var u=l[0];E[u]=new C(u,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){E[l]=new C(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){E[l]=new C(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){E[l]=new C(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){E[l]=new C(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){E[l]=new C(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){E[l]=new C(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){E[l]=new C(l,5,!1,l.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function A(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var u=l.replace(_,A);E[u]=new C(u,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var u=l.replace(_,A);E[u]=new C(u,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var u=l.replace(_,A);E[u]=new C(u,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){E[l]=new C(l,1,!1,l.toLowerCase(),null,!1,!1)}),E.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){E[l]=new C(l,1,!1,l.toLowerCase(),null,!0,!0)});function M(l,u,g,x){var T=E.hasOwnProperty(u)?E[u]:null;(T!==null?T.type!==0:x||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(k(u,g,T,x)&&(g=null),x||T===null?y(u)&&(g===null?l.removeAttribute(u):l.setAttribute(u,""+g)):T.mustUseProperty?l[T.propertyName]=g===null?T.type===3?!1:"":g:(u=T.attributeName,x=T.attributeNamespace,g===null?l.removeAttribute(u):(T=T.type,g=T===3||T===4&&g===!0?"":""+g,x?l.setAttributeNS(x,u,g):l.setAttribute(u,g))))}var I=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),O=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),J=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),q=Symbol.iterator;function te(l){return l===null||typeof l!="object"?null:(l=q&&l[q]||l["@@iterator"],typeof l=="function"?l:null)}var ae=Object.assign,B;function de(l){if(B===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);B=u&&u[1]||""}return`
`+B+l}var se=!1;function me(l,u){if(!l||se)return"";se=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Ce){var x=Ce}Reflect.construct(l,[],u)}else{try{u.call()}catch(Ce){x=Ce}l.call(u.prototype)}else{try{throw Error()}catch(Ce){x=Ce}l()}}catch(Ce){if(Ce&&x&&typeof Ce.stack=="string"){for(var T=Ce.stack.split(`
`),R=x.stack.split(`
`),L=T.length-1,z=R.length-1;1<=L&&0<=z&&T[L]!==R[z];)z--;for(;1<=L&&0<=z;L--,z--)if(T[L]!==R[z]){if(L!==1||z!==1)do if(L--,z--,0>z||T[L]!==R[z]){var Z=`
`+T[L].replace(" at new "," at ");return l.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",l.displayName)),Z}while(1<=L&&0<=z);break}}}finally{se=!1,Error.prepareStackTrace=g}return(l=l?l.displayName||l.name:"")?de(l):""}function Te(l){switch(l.tag){case 5:return de(l.type);case 16:return de("Lazy");case 13:return de("Suspense");case 19:return de("SuspenseList");case 0:case 2:case 15:return l=me(l.type,!1),l;case 11:return l=me(l.type.render,!1),l;case 1:return l=me(l.type,!0),l;default:return""}}function Re(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case j:return"Fragment";case O:return"Portal";case $:return"Profiler";case V:return"StrictMode";case pe:return"Suspense";case fe:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case J:return(l.displayName||"Context")+".Consumer";case W:return(l._context.displayName||"Context")+".Provider";case Y:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Ee:return u=l.displayName||null,u!==null?u:Re(l.type)||"Memo";case le:u=l._payload,l=l._init;try{return Re(l(u))}catch{}}return null}function ie(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=u.render,l=l.displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(u);case 8:return u===V?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function be(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Le(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function $e(l){var u=Le(l)?"checked":"value",g=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),x=""+l[u];if(!l.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var T=g.get,R=g.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return T.call(this)},set:function(L){x=""+L,R.call(this,L)}}),Object.defineProperty(l,u,{enumerable:g.enumerable}),{getValue:function(){return x},setValue:function(L){x=""+L},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Je(l){l._valueTracker||(l._valueTracker=$e(l))}function pt(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var g=u.getValue(),x="";return l&&(x=Le(l)?l.checked?"true":"false":l.value),l=x,l!==g?(u.setValue(l),!0):!1}function Et(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function wt(l,u){var g=u.checked;return ae({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??l._wrapperState.initialChecked})}function _n(l,u){var g=u.defaultValue==null?"":u.defaultValue,x=u.checked!=null?u.checked:u.defaultChecked;g=be(u.value!=null?u.value:g),l._wrapperState={initialChecked:x,initialValue:g,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function er(l,u){u=u.checked,u!=null&&M(l,"checked",u,!1)}function dn(l,u){er(l,u);var g=be(u.value),x=u.type;if(g!=null)x==="number"?(g===0&&l.value===""||l.value!=g)&&(l.value=""+g):l.value!==""+g&&(l.value=""+g);else if(x==="submit"||x==="reset"){l.removeAttribute("value");return}u.hasOwnProperty("value")?Nn(l,u.type,g):u.hasOwnProperty("defaultValue")&&Nn(l,u.type,be(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(l.defaultChecked=!!u.defaultChecked)}function tn(l,u,g){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var x=u.type;if(!(x!=="submit"&&x!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+l._wrapperState.initialValue,g||u===l.value||(l.value=u),l.defaultValue=u}g=l.name,g!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,g!==""&&(l.name=g)}function Nn(l,u,g){(u!=="number"||Et(l.ownerDocument)!==l)&&(g==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+g&&(l.defaultValue=""+g))}var Q=Array.isArray;function ce(l,u,g,x){if(l=l.options,u){u={};for(var T=0;T<g.length;T++)u["$"+g[T]]=!0;for(g=0;g<l.length;g++)T=u.hasOwnProperty("$"+l[g].value),l[g].selected!==T&&(l[g].selected=T),T&&x&&(l[g].defaultSelected=!0)}else{for(g=""+be(g),u=null,T=0;T<l.length;T++){if(l[T].value===g){l[T].selected=!0,x&&(l[T].defaultSelected=!0);return}u!==null||l[T].disabled||(u=l[T])}u!==null&&(u.selected=!0)}}function ve(l,u){if(u.dangerouslySetInnerHTML!=null)throw Error(n(91));return ae({},u,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function qe(l,u){var g=u.value;if(g==null){if(g=u.children,u=u.defaultValue,g!=null){if(u!=null)throw Error(n(92));if(Q(g)){if(1<g.length)throw Error(n(93));g=g[0]}u=g}u==null&&(u=""),g=u}l._wrapperState={initialValue:be(g)}}function Ge(l,u){var g=be(u.value),x=be(u.defaultValue);g!=null&&(g=""+g,g!==l.value&&(l.value=g),u.defaultValue==null&&l.defaultValue!==g&&(l.defaultValue=g)),x!=null&&(l.defaultValue=""+x)}function Be(l){var u=l.textContent;u===l._wrapperState.initialValue&&u!==""&&u!==null&&(l.value=u)}function Ze(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kt(l,u){return l==null||l==="http://www.w3.org/1999/xhtml"?Ze(u):l==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Ft,We=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,g,x,T){MSApp.execUnsafeLocalFunction(function(){return l(u,g,x,T)})}:l}(function(l,u){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=u;else{for(Ft=Ft||document.createElement("div"),Ft.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=Ft.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;u.firstChild;)l.appendChild(u.firstChild)}});function Ut(l,u){if(u){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=u;return}}l.textContent=u}var Qt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hn=["Webkit","ms","Moz","O"];Object.keys(Qt).forEach(function(l){hn.forEach(function(u){u=u+l.charAt(0).toUpperCase()+l.substring(1),Qt[u]=Qt[l]})});function Hn(l,u,g){return u==null||typeof u=="boolean"||u===""?"":g||typeof u!="number"||u===0||Qt.hasOwnProperty(l)&&Qt[l]?(""+u).trim():u+"px"}function It(l,u){l=l.style;for(var g in u)if(u.hasOwnProperty(g)){var x=g.indexOf("--")===0,T=Hn(g,u[g],x);g==="float"&&(g="cssFloat"),x?l.setProperty(g,T):l[g]=T}}var xn=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rn(l,u){if(u){if(xn[l]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(n(137,l));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(n(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(n(61))}if(u.style!=null&&typeof u.style!="object")throw Error(n(62))}}function sr(l,u){if(l.indexOf("-")===-1)return typeof u.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Br=null;function cr(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Jo=null,Ks=null,Ki=null;function Ol(l){if(l=pi(l)){if(typeof Jo!="function")throw Error(n(280));var u=l.stateNode;u&&(u=Ah(u),Jo(l.stateNode,l.type,u))}}function Dt(l){Ks?Ki?Ki.push(l):Ki=[l]:Ks=l}function Vn(){if(Ks){var l=Ks,u=Ki;if(Ki=Ks=null,Ol(l),u)for(l=0;l<u.length;l++)Ol(u[l])}}function Yn(l,u){return l(u)}function Ir(){}var bo=!1;function G(l,u,g){if(bo)return l(u,g);bo=!0;try{return Yn(l,u,g)}finally{bo=!1,(Ks!==null||Ki!==null)&&(Ir(),Vn())}}function re(l,u){var g=l.stateNode;if(g===null)return null;var x=Ah(g);if(x===null)return null;g=x[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(l=l.type,x=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!x;break e;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(n(231,u,typeof g));return g}var we=!1;if(a)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){we=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch{we=!1}function He(l,u,g,x,T,R,L,z,Z){var Ce=Array.prototype.slice.call(arguments,3);try{u.apply(g,Ce)}catch(Fe){this.onError(Fe)}}var ct=!1,st=null,ut=!1,yt=null,Pt={onError:function(l){ct=!0,st=l}};function _t(l,u,g,x,T,R,L,z,Z){ct=!1,st=null,He.apply(Pt,arguments)}function vt(l,u,g,x,T,R,L,z,Z){if(_t.apply(this,arguments),ct){if(ct){var Ce=st;ct=!1,st=null}else throw Error(n(198));ut||(ut=!0,yt=Ce)}}function At(l){var u=l,g=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(g=u.return),l=u.return;while(l)}return u.tag===3?g:null}function Cn(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function ur(l){if(At(l)!==l)throw Error(n(188))}function Xr(l){var u=l.alternate;if(!u){if(u=At(l),u===null)throw Error(n(188));return u!==l?null:l}for(var g=l,x=u;;){var T=g.return;if(T===null)break;var R=T.alternate;if(R===null){if(x=T.return,x!==null){g=x;continue}break}if(T.child===R.child){for(R=T.child;R;){if(R===g)return ur(T),l;if(R===x)return ur(T),u;R=R.sibling}throw Error(n(188))}if(g.return!==x.return)g=T,x=R;else{for(var L=!1,z=T.child;z;){if(z===g){L=!0,g=T,x=R;break}if(z===x){L=!0,x=T,g=R;break}z=z.sibling}if(!L){for(z=R.child;z;){if(z===g){L=!0,g=R,x=T;break}if(z===x){L=!0,x=R,g=T;break}z=z.sibling}if(!L)throw Error(n(189))}}if(g.alternate!==x)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?l:u}function Bn(l){return l=Xr(l),l!==null?Mn(l):null}function Mn(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=Mn(l);if(u!==null)return u;l=l.sibling}return null}var xo=e.unstable_scheduleCallback,Da=e.unstable_cancelCallback,Gi=e.unstable_shouldYield,hs=e.unstable_requestPaint,On=e.unstable_now,Dl=e.unstable_getCurrentPriorityLevel,Gs=e.unstable_ImmediatePriority,Ll=e.unstable_UserBlockingPriority,wo=e.unstable_NormalPriority,nn=e.unstable_LowPriority,yr=e.unstable_IdlePriority,Ys=null,zr=null;function dr(l){if(zr&&typeof zr.onCommitFiberRoot=="function")try{zr.onCommitFiberRoot(Ys,l,void 0,(l.current.flags&128)===128)}catch{}}var di=Math.clz32?Math.clz32:f0,gd=Math.log,rh=Math.LN2;function f0(l){return l>>>=0,l===0?32:31-(gd(l)/rh|0)|0}var jc=64,ih=4194304;function Fc(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function jl(l,u){var g=l.pendingLanes;if(g===0)return 0;var x=0,T=l.suspendedLanes,R=l.pingedLanes,L=g&268435455;if(L!==0){var z=L&~T;z!==0?x=Fc(z):(R&=L,R!==0&&(x=Fc(R)))}else L=g&~T,L!==0?x=Fc(L):R!==0&&(x=Fc(R));if(x===0)return 0;if(u!==0&&u!==x&&(u&T)===0&&(T=x&-x,R=u&-u,T>=R||T===16&&(R&4194240)!==0))return u;if((x&4)!==0&&(x|=g&16),u=l.entangledLanes,u!==0)for(l=l.entanglements,u&=x;0<u;)g=31-di(u),T=1<<g,x|=l[g],u&=~T;return x}function h0(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function US(l,u){for(var g=l.suspendedLanes,x=l.pingedLanes,T=l.expirationTimes,R=l.pendingLanes;0<R;){var L=31-di(R),z=1<<L,Z=T[L];Z===-1?((z&g)===0||(z&x)!==0)&&(T[L]=h0(z,u)):Z<=u&&(l.expiredLanes|=z),R&=~z}}function sh(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function rg(){var l=jc;return jc<<=1,(jc&4194240)===0&&(jc=64),l}function vd(l){for(var u=[],g=0;31>g;g++)u.push(l);return u}function yd(l,u,g){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,u=31-di(u),l[u]=g}function p0(l,u){var g=l.pendingLanes&~u;l.pendingLanes=u,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=u,l.mutableReadLanes&=u,l.entangledLanes&=u,u=l.entanglements;var x=l.eventTimes;for(l=l.expirationTimes;0<g;){var T=31-di(g),R=1<<T;u[T]=0,x[T]=-1,l[T]=-1,g&=~R}}function bd(l,u){var g=l.entangledLanes|=u;for(l=l.entanglements;g;){var x=31-di(g),T=1<<x;T&u|l[x]&u&&(l[x]|=u),g&=~T}}var wn=0;function Fl(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var ig,oh,m0,sg,og,ah=!1,xd=[],La=null,ja=null,Fa=null,Uc=new Map,wd=new Map,Ua=[],VS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function g0(l,u){switch(l){case"focusin":case"focusout":La=null;break;case"dragenter":case"dragleave":ja=null;break;case"mouseover":case"mouseout":Fa=null;break;case"pointerover":case"pointerout":Uc.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":wd.delete(u.pointerId)}}function Ul(l,u,g,x,T,R){return l===null||l.nativeEvent!==R?(l={blockedOn:u,domEventName:g,eventSystemFlags:x,nativeEvent:R,targetContainers:[T]},u!==null&&(u=pi(u),u!==null&&oh(u)),l):(l.eventSystemFlags|=x,u=l.targetContainers,T!==null&&u.indexOf(T)===-1&&u.push(T),l)}function BS(l,u,g,x,T){switch(u){case"focusin":return La=Ul(La,l,u,g,x,T),!0;case"dragenter":return ja=Ul(ja,l,u,g,x,T),!0;case"mouseover":return Fa=Ul(Fa,l,u,g,x,T),!0;case"pointerover":var R=T.pointerId;return Uc.set(R,Ul(Uc.get(R)||null,l,u,g,x,T)),!0;case"gotpointercapture":return R=T.pointerId,wd.set(R,Ul(wd.get(R)||null,l,u,g,x,T)),!0}return!1}function v0(l){var u=To(l.target);if(u!==null){var g=At(u);if(g!==null){if(u=g.tag,u===13){if(u=Cn(g),u!==null){l.blockedOn=u,og(l.priority,function(){m0(g)});return}}else if(u===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function lh(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var g=dh(l.domEventName,l.eventSystemFlags,u[0],l.nativeEvent);if(g===null){g=l.nativeEvent;var x=new g.constructor(g.type,g);Br=x,g.target.dispatchEvent(x),Br=null}else return u=pi(g),u!==null&&oh(u),l.blockedOn=g,!1;u.shift()}return!0}function y0(l,u,g){lh(l)&&g.delete(u)}function zS(){ah=!1,La!==null&&lh(La)&&(La=null),ja!==null&&lh(ja)&&(ja=null),Fa!==null&&lh(Fa)&&(Fa=null),Uc.forEach(y0),wd.forEach(y0)}function Pn(l,u){l.blockedOn===u&&(l.blockedOn=null,ah||(ah=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,zS)))}function kn(l){function u(T){return Pn(T,l)}if(0<xd.length){Pn(xd[0],l);for(var g=1;g<xd.length;g++){var x=xd[g];x.blockedOn===l&&(x.blockedOn=null)}}for(La!==null&&Pn(La,l),ja!==null&&Pn(ja,l),Fa!==null&&Pn(Fa,l),Uc.forEach(u),wd.forEach(u),g=0;g<Ua.length;g++)x=Ua[g],x.blockedOn===l&&(x.blockedOn=null);for(;0<Ua.length&&(g=Ua[0],g.blockedOn===null);)v0(g),g.blockedOn===null&&Ua.shift()}var Vc=I.ReactCurrentBatchConfig,ch=!0;function $S(l,u,g,x){var T=wn,R=Vc.transition;Vc.transition=null;try{wn=1,ag(l,u,g,x)}finally{wn=T,Vc.transition=R}}function WS(l,u,g,x){var T=wn,R=Vc.transition;Vc.transition=null;try{wn=4,ag(l,u,g,x)}finally{wn=T,Vc.transition=R}}function ag(l,u,g,x){if(ch){var T=dh(l,u,g,x);if(T===null)kg(l,u,x,uh,g),g0(l,x);else if(BS(T,l,u,g,x))x.stopPropagation();else if(g0(l,x),u&4&&-1<VS.indexOf(l)){for(;T!==null;){var R=pi(T);if(R!==null&&ig(R),R=dh(l,u,g,x),R===null&&kg(l,u,x,uh,g),R===T)break;T=R}T!==null&&x.stopPropagation()}else kg(l,u,x,null,g)}}var uh=null;function dh(l,u,g,x){if(uh=null,l=cr(x),l=To(l),l!==null)if(u=At(l),u===null)l=null;else if(g=u.tag,g===13){if(l=Cn(u),l!==null)return l;l=null}else if(g===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null);return uh=l,null}function b0(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dl()){case Gs:return 1;case Ll:return 4;case wo:case nn:return 16;case yr:return 536870912;default:return 16}default:return 16}}var Qn=null,Sd=null,So=null;function lg(){if(So)return So;var l,u=Sd,g=u.length,x,T="value"in Qn?Qn.value:Qn.textContent,R=T.length;for(l=0;l<g&&u[l]===T[l];l++);var L=g-l;for(x=1;x<=L&&u[g-x]===T[R-x];x++);return So=T.slice(l,1<x?1-x:void 0)}function Bc(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Ti(){return!0}function cg(){return!1}function Li(l){function u(g,x,T,R,L){this._reactName=g,this._targetInst=T,this.type=x,this.nativeEvent=R,this.target=L,this.currentTarget=null;for(var z in l)l.hasOwnProperty(z)&&(g=l[z],this[z]=g?g(R):R[z]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Ti:cg,this.isPropagationStopped=cg,this}return ae(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Ti)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Ti)},persist:function(){},isPersistent:Ti}),u}var Vl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fh=Li(Vl),zc=ae({},Vl,{view:0,detail:0}),x0=Li(zc),Ei,ug,fi,hh=ae({},zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mg,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==fi&&(fi&&l.type==="mousemove"?(Ei=l.screenX-fi.screenX,ug=l.screenY-fi.screenY):ug=Ei=0,fi=l),Ei)},movementY:function(l){return"movementY"in l?l.movementY:ug}}),dg=Li(hh),Va=ae({},hh,{dataTransfer:0}),ph=Li(Va),fg=ae({},zc,{relatedTarget:0}),zn=Li(fg),Ba=ae({},Vl,{animationName:0,elapsedTime:0,pseudoElement:0}),hg=Li(Ba),HS=ae({},Vl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),pg=Li(HS),qS=ae({},Vl,{data:0}),w0=Li(qS),KS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $c(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=mh[l])?!!u[l]:!1}function mg(){return $c}var C0=ae({},zc,{key:function(l){if(l.key){var u=KS[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Bc(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?S0[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mg,charCode:function(l){return l.type==="keypress"?Bc(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Bc(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),k0=Li(C0),gg=ae({},hh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gh=Li(gg),T0=ae({},zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mg}),GS=Li(T0),vg=ae({},Vl,{propertyName:0,elapsedTime:0,pseudoElement:0}),yg=Li(vg),YS=ae({},hh,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),E0=Li(YS),Yi=[9,13,27,32],Cd=a&&"CompositionEvent"in window,Xo=null;a&&"documentMode"in document&&(Xo=document.documentMode);var _0=a&&"TextEvent"in window&&!Xo,bg=a&&(!Cd||Xo&&8<Xo&&11>=Xo),R0=" ",P0=!1;function A0(l,u){switch(l){case"keyup":return Yi.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I0(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Wc=!1;function Hc(l,u){switch(l){case"compositionend":return I0(u);case"keypress":return u.which!==32?null:(P0=!0,R0);case"textInput":return l=u.data,l===R0&&P0?null:l;default:return null}}function QS(l,u){if(Wc)return l==="compositionend"||!Cd&&A0(l,u)?(l=lg(),So=Sd=Qn=null,Wc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return bg&&u.locale!=="ko"?null:u.data;default:return null}}var JS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vh(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!JS[l.type]:u==="textarea"}function xg(l,u,g,x){Dt(x),u=Eh(u,"onChange"),0<u.length&&(g=new fh("onChange","change",null,g,x),l.push({event:g,listeners:u}))}var ps=null,za=null;function XS(l){F0(l,0)}function yh(l){var u=Wt(l);if(pt(u))return l}function ZS(l,u){if(l==="change")return u}var Bl=!1;if(a){var Qi;if(a){var bh="oninput"in document;if(!bh){var N0=document.createElement("div");N0.setAttribute("oninput","return;"),bh=typeof N0.oninput=="function"}Qi=bh}else Qi=!1;Bl=Qi&&(!document.documentMode||9<document.documentMode)}function M0(){ps&&(ps.detachEvent("onpropertychange",O0),za=ps=null)}function O0(l){if(l.propertyName==="value"&&yh(za)){var u=[];xg(u,za,l,cr(l)),G(XS,u)}}function eC(l,u,g){l==="focusin"?(M0(),ps=u,za=g,ps.attachEvent("onpropertychange",O0)):l==="focusout"&&M0()}function tC(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return yh(za)}function qc(l,u){if(l==="click")return yh(u)}function oe(l,u){if(l==="input"||l==="change")return yh(u)}function Ae(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var xe=typeof Object.is=="function"?Object.is:Ae;function nt(l,u){if(xe(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var g=Object.keys(l),x=Object.keys(u);if(g.length!==x.length)return!1;for(x=0;x<g.length;x++){var T=g[x];if(!c.call(u,T)||!xe(l[T],u[T]))return!1}return!0}function jt(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function vn(l,u){var g=jt(l);l=0;for(var x;g;){if(g.nodeType===3){if(x=l+g.textContent.length,l<=u&&x>=u)return{node:g,offset:u-l};l=x}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=jt(g)}}function br(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?br(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function Dn(){for(var l=window,u=Et();u instanceof l.HTMLIFrameElement;){try{var g=typeof u.contentWindow.location.href=="string"}catch{g=!1}if(g)l=u.contentWindow;else break;u=Et(l.document)}return u}function kd(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}function nC(l){var u=Dn(),g=l.focusedElem,x=l.selectionRange;if(u!==g&&g&&g.ownerDocument&&br(g.ownerDocument.documentElement,g)){if(x!==null&&kd(g)){if(u=x.start,l=x.end,l===void 0&&(l=u),"selectionStart"in g)g.selectionStart=u,g.selectionEnd=Math.min(l,g.value.length);else if(l=(u=g.ownerDocument||document)&&u.defaultView||window,l.getSelection){l=l.getSelection();var T=g.textContent.length,R=Math.min(x.start,T);x=x.end===void 0?R:Math.min(x.end,T),!l.extend&&R>x&&(T=x,x=R,R=T),T=vn(g,R);var L=vn(g,x);T&&L&&(l.rangeCount!==1||l.anchorNode!==T.node||l.anchorOffset!==T.offset||l.focusNode!==L.node||l.focusOffset!==L.offset)&&(u=u.createRange(),u.setStart(T.node,T.offset),l.removeAllRanges(),R>x?(l.addRange(u),l.extend(L.node,L.offset)):(u.setEnd(L.node,L.offset),l.addRange(u)))}}for(u=[],l=g;l=l.parentNode;)l.nodeType===1&&u.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<u.length;g++)l=u[g],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var ms=a&&"documentMode"in document&&11>=document.documentMode,Zo=null,wg=null,Co=null,Kc=!1;function Td(l,u,g){var x=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Kc||Zo==null||Zo!==Et(x)||(x=Zo,"selectionStart"in x&&kd(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Co&&nt(Co,x)||(Co=x,x=Eh(wg,"onSelect"),0<x.length&&(u=new fh("onSelect","select",null,u,g),l.push({event:u,listeners:x}),u.target=Zo)))}function yn(l,u){var g={};return g[l.toLowerCase()]=u.toLowerCase(),g["Webkit"+l]="webkit"+u,g["Moz"+l]="moz"+u,g}var Gc={animationend:yn("Animation","AnimationEnd"),animationiteration:yn("Animation","AnimationIteration"),animationstart:yn("Animation","AnimationStart"),transitionend:yn("Transition","TransitionEnd")},xh={},Ed={};a&&(Ed=document.createElement("div").style,"AnimationEvent"in window||(delete Gc.animationend.animation,delete Gc.animationiteration.animation,delete Gc.animationstart.animation),"TransitionEvent"in window||delete Gc.transitionend.transition);function wh(l){if(xh[l])return xh[l];if(!Gc[l])return l;var u=Gc[l],g;for(g in u)if(u.hasOwnProperty(g)&&g in Ed)return xh[l]=u[g];return l}var D0=wh("animationend"),L0=wh("animationiteration"),_d=wh("animationstart"),ea=wh("transitionend"),Rd=new Map,Sg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qs(l,u){Rd.set(l,u),s(u,[l])}for(var Sh=0;Sh<Sg.length;Sh++){var Ch=Sg[Sh],kh=Ch.toLowerCase(),j0=Ch[0].toUpperCase()+Ch.slice(1);Qs(kh,"on"+j0)}Qs(D0,"onAnimationEnd"),Qs(L0,"onAnimationIteration"),Qs(_d,"onAnimationStart"),Qs("dblclick","onDoubleClick"),Qs("focusin","onFocus"),Qs("focusout","onBlur"),Qs(ea,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zl=new Set("cancel close invalid load scroll toggle".split(" ").concat(ta));function Pd(l,u,g){var x=l.type||"unknown-event";l.currentTarget=g,vt(x,u,void 0,l),l.currentTarget=null}function F0(l,u){u=(u&4)!==0;for(var g=0;g<l.length;g++){var x=l[g],T=x.event;x=x.listeners;e:{var R=void 0;if(u)for(var L=x.length-1;0<=L;L--){var z=x[L],Z=z.instance,Ce=z.currentTarget;if(z=z.listener,Z!==R&&T.isPropagationStopped())break e;Pd(T,z,Ce),R=Z}else for(L=0;L<x.length;L++){if(z=x[L],Z=z.instance,Ce=z.currentTarget,z=z.listener,Z!==R&&T.isPropagationStopped())break e;Pd(T,z,Ce),R=Z}}}if(ut)throw l=yt,ut=!1,yt=null,l}function qn(l,u){var g=u[Ph];g===void 0&&(g=u[Ph]=new Set);var x=l+"__bubble";g.has(x)||(Th(u,l,2,!1),g.add(x))}function Cg(l,u,g){var x=0;u&&(x|=4),Th(g,l,x,u)}var $l="_reactListening"+Math.random().toString(36).slice(2);function $a(l){if(!l[$l]){l[$l]=!0,r.forEach(function(g){g!=="selectionchange"&&(zl.has(g)||Cg(g,!1,l),Cg(g,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[$l]||(u[$l]=!0,Cg("selectionchange",!1,u))}}function Th(l,u,g,x){switch(b0(u)){case 1:var T=$S;break;case 4:T=WS;break;default:T=ag}g=T.bind(null,u,g,l),T=void 0,!we||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(T=!0),x?T!==void 0?l.addEventListener(u,g,{capture:!0,passive:T}):l.addEventListener(u,g,!0):T!==void 0?l.addEventListener(u,g,{passive:T}):l.addEventListener(u,g,!1)}function kg(l,u,g,x,T){var R=x;if((u&1)===0&&(u&2)===0&&x!==null)e:for(;;){if(x===null)return;var L=x.tag;if(L===3||L===4){var z=x.stateNode.containerInfo;if(z===T||z.nodeType===8&&z.parentNode===T)break;if(L===4)for(L=x.return;L!==null;){var Z=L.tag;if((Z===3||Z===4)&&(Z=L.stateNode.containerInfo,Z===T||Z.nodeType===8&&Z.parentNode===T))return;L=L.return}for(;z!==null;){if(L=To(z),L===null)return;if(Z=L.tag,Z===5||Z===6){x=R=L;continue e}z=z.parentNode}}x=x.return}G(function(){var Ce=R,Fe=cr(g),ze=[];e:{var je=Rd.get(l);if(je!==void 0){var rt=fh,dt=l;switch(l){case"keypress":if(Bc(g)===0)break e;case"keydown":case"keyup":rt=k0;break;case"focusin":dt="focus",rt=zn;break;case"focusout":dt="blur",rt=zn;break;case"beforeblur":case"afterblur":rt=zn;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=dg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=ph;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=GS;break;case D0:case L0:case _d:rt=hg;break;case ea:rt=yg;break;case"scroll":rt=x0;break;case"wheel":rt=E0;break;case"copy":case"cut":case"paste":rt=pg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=gh}var ht=(u&4)!==0,hr=!ht&&l==="scroll",he=ht?je!==null?je+"Capture":null:je;ht=[];for(var ne=Ce,ge;ne!==null;){ge=ne;var Ke=ge.stateNode;if(ge.tag===5&&Ke!==null&&(ge=Ke,he!==null&&(Ke=re(ne,he),Ke!=null&&ht.push(Yc(ne,Ke,ge)))),hr)break;ne=ne.return}0<ht.length&&(je=new rt(je,dt,null,g,Fe),ze.push({event:je,listeners:ht}))}}if((u&7)===0){e:{if(je=l==="mouseover"||l==="pointerover",rt=l==="mouseout"||l==="pointerout",je&&g!==Br&&(dt=g.relatedTarget||g.fromElement)&&(To(dt)||dt[Ji]))break e;if((rt||je)&&(je=Fe.window===Fe?Fe:(je=Fe.ownerDocument)?je.defaultView||je.parentWindow:window,rt?(dt=g.relatedTarget||g.toElement,rt=Ce,dt=dt?To(dt):null,dt!==null&&(hr=At(dt),dt!==hr||dt.tag!==5&&dt.tag!==6)&&(dt=null)):(rt=null,dt=Ce),rt!==dt)){if(ht=dg,Ke="onMouseLeave",he="onMouseEnter",ne="mouse",(l==="pointerout"||l==="pointerover")&&(ht=gh,Ke="onPointerLeave",he="onPointerEnter",ne="pointer"),hr=rt==null?je:Wt(rt),ge=dt==null?je:Wt(dt),je=new ht(Ke,ne+"leave",rt,g,Fe),je.target=hr,je.relatedTarget=ge,Ke=null,To(Fe)===Ce&&(ht=new ht(he,ne+"enter",dt,g,Fe),ht.target=ge,ht.relatedTarget=hr,Ke=ht),hr=Ke,rt&&dt)t:{for(ht=rt,he=dt,ne=0,ge=ht;ge;ge=Qc(ge))ne++;for(ge=0,Ke=he;Ke;Ke=Qc(Ke))ge++;for(;0<ne-ge;)ht=Qc(ht),ne--;for(;0<ge-ne;)he=Qc(he),ge--;for(;ne--;){if(ht===he||he!==null&&ht===he.alternate)break t;ht=Qc(ht),he=Qc(he)}ht=null}else ht=null;rt!==null&&xr(ze,je,rt,ht,!1),dt!==null&&hr!==null&&xr(ze,hr,dt,ht,!0)}}e:{if(je=Ce?Wt(Ce):window,rt=je.nodeName&&je.nodeName.toLowerCase(),rt==="select"||rt==="input"&&je.type==="file")var mt=ZS;else if(vh(je))if(Bl)mt=oe;else{mt=tC;var Tt=eC}else(rt=je.nodeName)&&rt.toLowerCase()==="input"&&(je.type==="checkbox"||je.type==="radio")&&(mt=qc);if(mt&&(mt=mt(l,Ce))){xg(ze,mt,g,Fe);break e}Tt&&Tt(l,je,Ce),l==="focusout"&&(Tt=je._wrapperState)&&Tt.controlled&&je.type==="number"&&Nn(je,"number",je.value)}switch(Tt=Ce?Wt(Ce):window,l){case"focusin":(vh(Tt)||Tt.contentEditable==="true")&&(Zo=Tt,wg=Ce,Co=null);break;case"focusout":Co=wg=Zo=null;break;case"mousedown":Kc=!0;break;case"contextmenu":case"mouseup":case"dragend":Kc=!1,Td(ze,g,Fe);break;case"selectionchange":if(ms)break;case"keydown":case"keyup":Td(ze,g,Fe)}var St;if(Cd)e:{switch(l){case"compositionstart":var Nt="onCompositionStart";break e;case"compositionend":Nt="onCompositionEnd";break e;case"compositionupdate":Nt="onCompositionUpdate";break e}Nt=void 0}else Wc?A0(l,g)&&(Nt="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(Nt="onCompositionStart");Nt&&(bg&&g.locale!=="ko"&&(Wc||Nt!=="onCompositionStart"?Nt==="onCompositionEnd"&&Wc&&(St=lg()):(Qn=Fe,Sd="value"in Qn?Qn.value:Qn.textContent,Wc=!0)),Tt=Eh(Ce,Nt),0<Tt.length&&(Nt=new w0(Nt,l,null,g,Fe),ze.push({event:Nt,listeners:Tt}),St?Nt.data=St:(St=I0(g),St!==null&&(Nt.data=St)))),(St=_0?Hc(l,g):QS(l,g))&&(Ce=Eh(Ce,"onBeforeInput"),0<Ce.length&&(Fe=new w0("onBeforeInput","beforeinput",null,g,Fe),ze.push({event:Fe,listeners:Ce}),Fe.data=St))}F0(ze,u)})}function Yc(l,u,g){return{instance:l,listener:u,currentTarget:g}}function Eh(l,u){for(var g=u+"Capture",x=[];l!==null;){var T=l,R=T.stateNode;T.tag===5&&R!==null&&(T=R,R=re(l,g),R!=null&&x.unshift(Yc(l,R,T)),R=re(l,u),R!=null&&x.push(Yc(l,R,T))),l=l.return}return x}function Qc(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function xr(l,u,g,x,T){for(var R=u._reactName,L=[];g!==null&&g!==x;){var z=g,Z=z.alternate,Ce=z.stateNode;if(Z!==null&&Z===x)break;z.tag===5&&Ce!==null&&(z=Ce,T?(Z=re(g,R),Z!=null&&L.unshift(Yc(g,Z,z))):T||(Z=re(g,R),Z!=null&&L.push(Yc(g,Z,z)))),g=g.return}L.length!==0&&l.push({event:u,listeners:L})}var hi=/\r\n?/g,rC=/\u0000|\uFFFD/g;function U0(l){return(typeof l=="string"?l:""+l).replace(hi,`
`).replace(rC,"")}function Ad(l,u,g){if(u=U0(u),U0(l)!==u&&g)throw Error(n(425))}function _h(){}var Id=null,Wl=null;function Nd(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Wa=typeof setTimeout=="function"?setTimeout:void 0,Md=typeof clearTimeout=="function"?clearTimeout:void 0,Jc=typeof Promise=="function"?Promise:void 0,Rh=typeof queueMicrotask=="function"?queueMicrotask:typeof Jc<"u"?function(l){return Jc.resolve(null).then(l).catch(Xc)}:Wa;function Xc(l){setTimeout(function(){throw l})}function Tg(l,u){var g=u,x=0;do{var T=g.nextSibling;if(l.removeChild(g),T&&T.nodeType===8)if(g=T.data,g==="/$"){if(x===0){l.removeChild(T),kn(u);return}x--}else g!=="$"&&g!=="$?"&&g!=="$!"||x++;g=T}while(g);kn(u)}function Ha(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return l}function V0(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"){if(u===0)return l;u--}else g==="/$"&&u++}l=l.previousSibling}return null}var Zc=Math.random().toString(36).slice(2),ko="__reactFiber$"+Zc,qa="__reactProps$"+Zc,Ji="__reactContainer$"+Zc,Ph="__reactEvents$"+Zc,F="__reactListeners$"+Zc,eu="__reactHandles$"+Zc;function To(l){var u=l[ko];if(u)return u;for(var g=l.parentNode;g;){if(u=g[Ji]||g[ko]){if(g=u.alternate,u.child!==null||g!==null&&g.child!==null)for(l=V0(l);l!==null;){if(g=l[ko])return g;l=V0(l)}return u}l=g,g=l.parentNode}return null}function pi(l){return l=l[ko]||l[Ji],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Wt(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(n(33))}function Ah(l){return l[qa]||null}var Eg=[],tu=-1;function ji(l){return{current:l}}function Kn(l){0>tu||(l.current=Eg[tu],Eg[tu]=null,tu--)}function $n(l,u){tu++,Eg[tu]=l.current,l.current=u}var Ka={},mi=ji(Ka),Fi=ji(!1),_i=Ka;function nu(l,u){var g=l.type.contextTypes;if(!g)return Ka;var x=l.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===u)return x.__reactInternalMemoizedMaskedChildContext;var T={},R;for(R in g)T[R]=u[R];return x&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=T),T}function Ui(l){return l=l.childContextTypes,l!=null}function Ih(){Kn(Fi),Kn(mi)}function B0(l,u,g){if(mi.current!==Ka)throw Error(n(168));$n(mi,u),$n(Fi,g)}function z0(l,u,g){var x=l.stateNode;if(u=u.childContextTypes,typeof x.getChildContext!="function")return g;x=x.getChildContext();for(var T in x)if(!(T in u))throw Error(n(108,ie(l)||"Unknown",T));return ae({},g,x)}function gs(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Ka,_i=mi.current,$n(mi,l),$n(Fi,Fi.current),!0}function $0(l,u,g){var x=l.stateNode;if(!x)throw Error(n(169));g?(l=z0(l,u,_i),x.__reactInternalMemoizedMergedChildContext=l,Kn(Fi),Kn(mi),$n(mi,l)):Kn(Fi),$n(Fi,g)}var na=null,Nh=!1,_g=!1;function W0(l){na===null?na=[l]:na.push(l)}function Hl(l){Nh=!0,W0(l)}function Ga(){if(!_g&&na!==null){_g=!0;var l=0,u=wn;try{var g=na;for(wn=1;l<g.length;l++){var x=g[l];do x=x(!0);while(x!==null)}na=null,Nh=!1}catch(T){throw na!==null&&(na=na.slice(l+1)),xo(Gs,Ga),T}finally{wn=u,_g=!1}}return null}var ru=[],gi=0,Mh=null,Oh=0,vs=[],ys=0,ql=null,Eo=1,_o="";function Kl(l,u){ru[gi++]=Oh,ru[gi++]=Mh,Mh=l,Oh=u}function H0(l,u,g){vs[ys++]=Eo,vs[ys++]=_o,vs[ys++]=ql,ql=l;var x=Eo;l=_o;var T=32-di(x)-1;x&=~(1<<T),g+=1;var R=32-di(u)+T;if(30<R){var L=T-T%5;R=(x&(1<<L)-1).toString(32),x>>=L,T-=L,Eo=1<<32-di(u)+T|g<<T|x,_o=R+l}else Eo=1<<R|g<<T|x,_o=l}function Od(l){l.return!==null&&(Kl(l,1),H0(l,1,0))}function Gl(l){for(;l===Mh;)Mh=ru[--gi],ru[gi]=null,Oh=ru[--gi],ru[gi]=null;for(;l===ql;)ql=vs[--ys],vs[ys]=null,_o=vs[--ys],vs[ys]=null,Eo=vs[--ys],vs[ys]=null}var vi=null,Xi=null,Gn=!1,Js=null;function Ro(l,u){var g=Ts(5,null,null,0);g.elementType="DELETED",g.stateNode=u,g.return=l,u=l.deletions,u===null?(l.deletions=[g],l.flags|=16):u.push(g)}function Dh(l,u){switch(l.tag){case 5:var g=l.type;return u=u.nodeType!==1||g.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(l.stateNode=u,vi=l,Xi=Ha(u.firstChild),!0):!1;case 6:return u=l.pendingProps===""||u.nodeType!==3?null:u,u!==null?(l.stateNode=u,vi=l,Xi=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(g=ql!==null?{id:Eo,overflow:_o}:null,l.memoizedState={dehydrated:u,treeContext:g,retryLane:1073741824},g=Ts(18,null,null,0),g.stateNode=u,g.return=l,l.child=g,vi=l,Xi=null,!0):!1;default:return!1}}function ra(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Vi(l){if(Gn){var u=Xi;if(u){var g=u;if(!Dh(l,u)){if(ra(l))throw Error(n(418));u=Ha(g.nextSibling);var x=vi;u&&Dh(l,u)?Ro(x,g):(l.flags=l.flags&-4097|2,Gn=!1,vi=l)}}else{if(ra(l))throw Error(n(418));l.flags=l.flags&-4097|2,Gn=!1,vi=l}}}function q0(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;vi=l}function Dd(l){if(l!==vi)return!1;if(!Gn)return q0(l),Gn=!0,!1;var u;if((u=l.tag!==3)&&!(u=l.tag!==5)&&(u=l.type,u=u!=="head"&&u!=="body"&&!Nd(l.type,l.memoizedProps)),u&&(u=Xi)){if(ra(l))throw Rg(),Error(n(418));for(;u;)Ro(l,u),u=Ha(u.nextSibling)}if(q0(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8){var g=l.data;if(g==="/$"){if(u===0){Xi=Ha(l.nextSibling);break e}u--}else g!=="$"&&g!=="$!"&&g!=="$?"||u++}l=l.nextSibling}Xi=null}}else Xi=vi?Ha(l.stateNode.nextSibling):null;return!0}function Rg(){for(var l=Xi;l;)l=Ha(l.nextSibling)}function Po(){Xi=vi=null,Gn=!1}function Ao(l){Js===null?Js=[l]:Js.push(l)}var K0=I.ReactCurrentBatchConfig;function Ld(l,u,g){if(l=g.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(n(309));var x=g.stateNode}if(!x)throw Error(n(147,l));var T=x,R=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===R?u.ref:(u=function(L){var z=T.refs;L===null?delete z[R]:z[R]=L},u._stringRef=R,u)}if(typeof l!="string")throw Error(n(284));if(!g._owner)throw Error(n(290,l))}return l}function Yl(l,u){throw l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function G0(l){var u=l._init;return u(l._payload)}function Pg(l){function u(he,ne){if(l){var ge=he.deletions;ge===null?(he.deletions=[ne],he.flags|=16):ge.push(ne)}}function g(he,ne){if(!l)return null;for(;ne!==null;)u(he,ne),ne=ne.sibling;return null}function x(he,ne){for(he=new Map;ne!==null;)ne.key!==null?he.set(ne.key,ne):he.set(ne.index,ne),ne=ne.sibling;return he}function T(he,ne){return he=io(he,ne),he.index=0,he.sibling=null,he}function R(he,ne,ge){return he.index=ge,l?(ge=he.alternate,ge!==null?(ge=ge.index,ge<ne?(he.flags|=2,ne):ge):(he.flags|=2,ne)):(he.flags|=1048576,ne)}function L(he){return l&&he.alternate===null&&(he.flags|=2),he}function z(he,ne,ge,Ke){return ne===null||ne.tag!==6?(ne=mv(ge,he.mode,Ke),ne.return=he,ne):(ne=T(ne,ge),ne.return=he,ne)}function Z(he,ne,ge,Ke){var mt=ge.type;return mt===j?Fe(he,ne,ge.props.children,Ke,ge.key):ne!==null&&(ne.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===le&&G0(mt)===ne.type)?(Ke=T(ne,ge.props),Ke.ref=Ld(he,ne,ge),Ke.return=he,Ke):(Ke=gp(ge.type,ge.key,ge.props,null,he.mode,Ke),Ke.ref=Ld(he,ne,ge),Ke.return=he,Ke)}function Ce(he,ne,ge,Ke){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ge.containerInfo||ne.stateNode.implementation!==ge.implementation?(ne=gv(ge,he.mode,Ke),ne.return=he,ne):(ne=T(ne,ge.children||[]),ne.return=he,ne)}function Fe(he,ne,ge,Ke,mt){return ne===null||ne.tag!==7?(ne=oc(ge,he.mode,Ke,mt),ne.return=he,ne):(ne=T(ne,ge),ne.return=he,ne)}function ze(he,ne,ge){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=mv(""+ne,he.mode,ge),ne.return=he,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case N:return ge=gp(ne.type,ne.key,ne.props,null,he.mode,ge),ge.ref=Ld(he,null,ne),ge.return=he,ge;case O:return ne=gv(ne,he.mode,ge),ne.return=he,ne;case le:var Ke=ne._init;return ze(he,Ke(ne._payload),ge)}if(Q(ne)||te(ne))return ne=oc(ne,he.mode,ge,null),ne.return=he,ne;Yl(he,ne)}return null}function je(he,ne,ge,Ke){var mt=ne!==null?ne.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return mt!==null?null:z(he,ne,""+ge,Ke);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case N:return ge.key===mt?Z(he,ne,ge,Ke):null;case O:return ge.key===mt?Ce(he,ne,ge,Ke):null;case le:return mt=ge._init,je(he,ne,mt(ge._payload),Ke)}if(Q(ge)||te(ge))return mt!==null?null:Fe(he,ne,ge,Ke,null);Yl(he,ge)}return null}function rt(he,ne,ge,Ke,mt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return he=he.get(ge)||null,z(ne,he,""+Ke,mt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case N:return he=he.get(Ke.key===null?ge:Ke.key)||null,Z(ne,he,Ke,mt);case O:return he=he.get(Ke.key===null?ge:Ke.key)||null,Ce(ne,he,Ke,mt);case le:var Tt=Ke._init;return rt(he,ne,ge,Tt(Ke._payload),mt)}if(Q(Ke)||te(Ke))return he=he.get(ge)||null,Fe(ne,he,Ke,mt,null);Yl(ne,Ke)}return null}function dt(he,ne,ge,Ke){for(var mt=null,Tt=null,St=ne,Nt=ne=0,Hr=null;St!==null&&Nt<ge.length;Nt++){St.index>Nt?(Hr=St,St=null):Hr=St.sibling;var bn=je(he,St,ge[Nt],Ke);if(bn===null){St===null&&(St=Hr);break}l&&St&&bn.alternate===null&&u(he,St),ne=R(bn,ne,Nt),Tt===null?mt=bn:Tt.sibling=bn,Tt=bn,St=Hr}if(Nt===ge.length)return g(he,St),Gn&&Kl(he,Nt),mt;if(St===null){for(;Nt<ge.length;Nt++)St=ze(he,ge[Nt],Ke),St!==null&&(ne=R(St,ne,Nt),Tt===null?mt=St:Tt.sibling=St,Tt=St);return Gn&&Kl(he,Nt),mt}for(St=x(he,St);Nt<ge.length;Nt++)Hr=rt(St,he,Nt,ge[Nt],Ke),Hr!==null&&(l&&Hr.alternate!==null&&St.delete(Hr.key===null?Nt:Hr.key),ne=R(Hr,ne,Nt),Tt===null?mt=Hr:Tt.sibling=Hr,Tt=Hr);return l&&St.forEach(function(ol){return u(he,ol)}),Gn&&Kl(he,Nt),mt}function ht(he,ne,ge,Ke){var mt=te(ge);if(typeof mt!="function")throw Error(n(150));if(ge=mt.call(ge),ge==null)throw Error(n(151));for(var Tt=mt=null,St=ne,Nt=ne=0,Hr=null,bn=ge.next();St!==null&&!bn.done;Nt++,bn=ge.next()){St.index>Nt?(Hr=St,St=null):Hr=St.sibling;var ol=je(he,St,bn.value,Ke);if(ol===null){St===null&&(St=Hr);break}l&&St&&ol.alternate===null&&u(he,St),ne=R(ol,ne,Nt),Tt===null?mt=ol:Tt.sibling=ol,Tt=ol,St=Hr}if(bn.done)return g(he,St),Gn&&Kl(he,Nt),mt;if(St===null){for(;!bn.done;Nt++,bn=ge.next())bn=ze(he,bn.value,Ke),bn!==null&&(ne=R(bn,ne,Nt),Tt===null?mt=bn:Tt.sibling=bn,Tt=bn);return Gn&&Kl(he,Nt),mt}for(St=x(he,St);!bn.done;Nt++,bn=ge.next())bn=rt(St,he,Nt,bn.value,Ke),bn!==null&&(l&&bn.alternate!==null&&St.delete(bn.key===null?Nt:bn.key),ne=R(bn,ne,Nt),Tt===null?mt=bn:Tt.sibling=bn,Tt=bn);return l&&St.forEach(function(kC){return u(he,kC)}),Gn&&Kl(he,Nt),mt}function hr(he,ne,ge,Ke){if(typeof ge=="object"&&ge!==null&&ge.type===j&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case N:e:{for(var mt=ge.key,Tt=ne;Tt!==null;){if(Tt.key===mt){if(mt=ge.type,mt===j){if(Tt.tag===7){g(he,Tt.sibling),ne=T(Tt,ge.props.children),ne.return=he,he=ne;break e}}else if(Tt.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===le&&G0(mt)===Tt.type){g(he,Tt.sibling),ne=T(Tt,ge.props),ne.ref=Ld(he,Tt,ge),ne.return=he,he=ne;break e}g(he,Tt);break}else u(he,Tt);Tt=Tt.sibling}ge.type===j?(ne=oc(ge.props.children,he.mode,Ke,ge.key),ne.return=he,he=ne):(Ke=gp(ge.type,ge.key,ge.props,null,he.mode,Ke),Ke.ref=Ld(he,ne,ge),Ke.return=he,he=Ke)}return L(he);case O:e:{for(Tt=ge.key;ne!==null;){if(ne.key===Tt)if(ne.tag===4&&ne.stateNode.containerInfo===ge.containerInfo&&ne.stateNode.implementation===ge.implementation){g(he,ne.sibling),ne=T(ne,ge.children||[]),ne.return=he,he=ne;break e}else{g(he,ne);break}else u(he,ne);ne=ne.sibling}ne=gv(ge,he.mode,Ke),ne.return=he,he=ne}return L(he);case le:return Tt=ge._init,hr(he,ne,Tt(ge._payload),Ke)}if(Q(ge))return dt(he,ne,ge,Ke);if(te(ge))return ht(he,ne,ge,Ke);Yl(he,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,ne!==null&&ne.tag===6?(g(he,ne.sibling),ne=T(ne,ge),ne.return=he,he=ne):(g(he,ne),ne=mv(ge,he.mode,Ke),ne.return=he,he=ne),L(he)):g(he,ne)}return hr}var or=Pg(!0),Lh=Pg(!1),jd=ji(null),Zi=null,Ya=null,iu=null;function ia(){iu=Ya=Zi=null}function jh(l){var u=jd.current;Kn(jd),l._currentValue=u}function Zr(l,u,g){for(;l!==null;){var x=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,x!==null&&(x.childLanes|=u)):x!==null&&(x.childLanes&u)!==u&&(x.childLanes|=u),l===g)break;l=l.return}}function Qa(l,u){Zi=l,iu=Ya=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&u)!==0&&(Pi=!0),l.firstContext=null)}function bs(l){var u=l._currentValue;if(iu!==l)if(l={context:l,memoizedValue:u,next:null},Ya===null){if(Zi===null)throw Error(n(308));Ya=l,Zi.dependencies={lanes:0,firstContext:l}}else Ya=Ya.next=l;return u}var Ql=null;function Ag(l){Ql===null?Ql=[l]:Ql.push(l)}function Fh(l,u,g,x){var T=u.interleaved;return T===null?(g.next=g,Ag(u)):(g.next=T.next,T.next=g),u.interleaved=g,sa(l,x)}function sa(l,u){l.lanes|=u;var g=l.alternate;for(g!==null&&(g.lanes|=u),g=l,l=l.return;l!==null;)l.childLanes|=u,g=l.alternate,g!==null&&(g.childLanes|=u),g=l,l=l.return;return g.tag===3?g.stateNode:null}var xs=!1;function Uh(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Y0(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function oa(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function ws(l,u,g){var x=l.updateQueue;if(x===null)return null;if(x=x.shared,(pn&2)!==0){var T=x.pending;return T===null?u.next=u:(u.next=T.next,T.next=u),x.pending=u,sa(l,g)}return T=x.interleaved,T===null?(u.next=u,Ag(x)):(u.next=T.next,T.next=u),x.interleaved=u,sa(l,g)}function Vh(l,u,g){if(u=u.updateQueue,u!==null&&(u=u.shared,(g&4194240)!==0)){var x=u.lanes;x&=l.pendingLanes,g|=x,u.lanes=g,bd(l,g)}}function Q0(l,u){var g=l.updateQueue,x=l.alternate;if(x!==null&&(x=x.updateQueue,g===x)){var T=null,R=null;if(g=g.firstBaseUpdate,g!==null){do{var L={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};R===null?T=R=L:R=R.next=L,g=g.next}while(g!==null);R===null?T=R=u:R=R.next=u}else T=R=u;g={baseState:x.baseState,firstBaseUpdate:T,lastBaseUpdate:R,shared:x.shared,effects:x.effects},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=u:l.next=u,g.lastBaseUpdate=u}function su(l,u,g,x){var T=l.updateQueue;xs=!1;var R=T.firstBaseUpdate,L=T.lastBaseUpdate,z=T.shared.pending;if(z!==null){T.shared.pending=null;var Z=z,Ce=Z.next;Z.next=null,L===null?R=Ce:L.next=Ce,L=Z;var Fe=l.alternate;Fe!==null&&(Fe=Fe.updateQueue,z=Fe.lastBaseUpdate,z!==L&&(z===null?Fe.firstBaseUpdate=Ce:z.next=Ce,Fe.lastBaseUpdate=Z))}if(R!==null){var ze=T.baseState;L=0,Fe=Ce=Z=null,z=R;do{var je=z.lane,rt=z.eventTime;if((x&je)===je){Fe!==null&&(Fe=Fe.next={eventTime:rt,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var dt=l,ht=z;switch(je=u,rt=g,ht.tag){case 1:if(dt=ht.payload,typeof dt=="function"){ze=dt.call(rt,ze,je);break e}ze=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=ht.payload,je=typeof dt=="function"?dt.call(rt,ze,je):dt,je==null)break e;ze=ae({},ze,je);break e;case 2:xs=!0}}z.callback!==null&&z.lane!==0&&(l.flags|=64,je=T.effects,je===null?T.effects=[z]:je.push(z))}else rt={eventTime:rt,lane:je,tag:z.tag,payload:z.payload,callback:z.callback,next:null},Fe===null?(Ce=Fe=rt,Z=ze):Fe=Fe.next=rt,L|=je;if(z=z.next,z===null){if(z=T.shared.pending,z===null)break;je=z,z=je.next,je.next=null,T.lastBaseUpdate=je,T.shared.pending=null}}while(!0);if(Fe===null&&(Z=ze),T.baseState=Z,T.firstBaseUpdate=Ce,T.lastBaseUpdate=Fe,u=T.shared.interleaved,u!==null){T=u;do L|=T.lane,T=T.next;while(T!==u)}else R===null&&(T.shared.lanes=0);tl|=L,l.lanes=L,l.memoizedState=ze}}function Ig(l,u,g){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var x=l[u],T=x.callback;if(T!==null){if(x.callback=null,x=g,typeof T!="function")throw Error(n(191,T));T.call(x)}}}var Fd={},Io=ji(Fd),Ud=ji(Fd),ou=ji(Fd);function aa(l){if(l===Fd)throw Error(n(174));return l}function Ng(l,u){switch($n(ou,u),$n(Ud,l),$n(Io,Fd),l=u.nodeType,l){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:kt(null,"");break;default:l=l===8?u.parentNode:u,u=l.namespaceURI||null,l=l.tagName,u=kt(u,l)}Kn(Io),$n(Io,u)}function Ja(){Kn(Io),Kn(Ud),Kn(ou)}function Mg(l){aa(ou.current);var u=aa(Io.current),g=kt(u,l.type);u!==g&&($n(Ud,l),$n(Io,g))}function Bh(l){Ud.current===l&&(Kn(Io),Kn(Ud))}var Jn=ji(0);function Jl(l){for(var u=l;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Og=[];function zh(){for(var l=0;l<Og.length;l++)Og[l]._workInProgressVersionPrimary=null;Og.length=0}var Vd=I.ReactCurrentDispatcher,Dg=I.ReactCurrentBatchConfig,Xa=0,tr=null,fr=null,Nr=null,au=!1,Bd=!1,Xl=0,Kt=0;function yi(){throw Error(n(321))}function Lg(l,u){if(u===null)return!1;for(var g=0;g<u.length&&g<l.length;g++)if(!xe(l[g],u[g]))return!1;return!0}function Zl(l,u,g,x,T,R){if(Xa=R,tr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Vd.current=l===null||l.memoizedState===null?sC:Yh,l=g(x,T),Bd){R=0;do{if(Bd=!1,Xl=0,25<=R)throw Error(n(301));R+=1,Nr=fr=null,u.updateQueue=null,Vd.current=du,l=g(x,T)}while(Bd)}if(Vd.current=Gh,u=fr!==null&&fr.next!==null,Xa=0,Nr=fr=tr=null,au=!1,u)throw Error(n(300));return l}function $h(){var l=Xl!==0;return Xl=0,l}function No(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nr===null?tr.memoizedState=Nr=l:Nr=Nr.next=l,Nr}function Ss(){if(fr===null){var l=tr.alternate;l=l!==null?l.memoizedState:null}else l=fr.next;var u=Nr===null?tr.memoizedState:Nr.next;if(u!==null)Nr=u,fr=l;else{if(l===null)throw Error(n(310));fr=l,l={memoizedState:fr.memoizedState,baseState:fr.baseState,baseQueue:fr.baseQueue,queue:fr.queue,next:null},Nr===null?tr.memoizedState=Nr=l:Nr=Nr.next=l}return Nr}function bi(l,u){return typeof u=="function"?u(l):u}function jg(l){var u=Ss(),g=u.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=l;var x=fr,T=x.baseQueue,R=g.pending;if(R!==null){if(T!==null){var L=T.next;T.next=R.next,R.next=L}x.baseQueue=T=R,g.pending=null}if(T!==null){R=T.next,x=x.baseState;var z=L=null,Z=null,Ce=R;do{var Fe=Ce.lane;if((Xa&Fe)===Fe)Z!==null&&(Z=Z.next={lane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),x=Ce.hasEagerState?Ce.eagerState:l(x,Ce.action);else{var ze={lane:Fe,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null};Z===null?(z=Z=ze,L=x):Z=Z.next=ze,tr.lanes|=Fe,tl|=Fe}Ce=Ce.next}while(Ce!==null&&Ce!==R);Z===null?L=x:Z.next=z,xe(x,u.memoizedState)||(Pi=!0),u.memoizedState=x,u.baseState=L,u.baseQueue=Z,g.lastRenderedState=x}if(l=g.interleaved,l!==null){T=l;do R=T.lane,tr.lanes|=R,tl|=R,T=T.next;while(T!==l)}else T===null&&(g.lanes=0);return[u.memoizedState,g.dispatch]}function lu(l){var u=Ss(),g=u.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=l;var x=g.dispatch,T=g.pending,R=u.memoizedState;if(T!==null){g.pending=null;var L=T=T.next;do R=l(R,L.action),L=L.next;while(L!==T);xe(R,u.memoizedState)||(Pi=!0),u.memoizedState=R,u.baseQueue===null&&(u.baseState=R),g.lastRenderedState=R}return[R,x]}function Wh(){}function Fg(l,u){var g=tr,x=Ss(),T=u(),R=!xe(x.memoizedState,T);if(R&&(x.memoizedState=T,Pi=!0),x=x.queue,Mo(la.bind(null,g,x,l),[l]),x.getSnapshot!==u||R||Nr!==null&&Nr.memoizedState.tag&1){if(g.flags|=2048,cu(9,Bi.bind(null,g,x,T,u),void 0,null),Wr===null)throw Error(n(349));(Xa&30)!==0||Ug(g,u,T)}return T}function Ug(l,u,g){l.flags|=16384,l={getSnapshot:u,value:g},u=tr.updateQueue,u===null?(u={lastEffect:null,stores:null},tr.updateQueue=u,u.stores=[l]):(g=u.stores,g===null?u.stores=[l]:g.push(l))}function Bi(l,u,g,x){u.value=g,u.getSnapshot=x,Hh(u)&&Vg(l)}function la(l,u,g){return g(function(){Hh(u)&&Vg(l)})}function Hh(l){var u=l.getSnapshot;l=l.value;try{var g=u();return!xe(l,g)}catch{return!0}}function Vg(l){var u=sa(l,1);u!==null&&ro(u,l,1,-1)}function zd(l){var u=No();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:l},u.queue=l,l=l.dispatch=nb.bind(null,tr,l),[u.memoizedState,l]}function cu(l,u,g,x){return l={tag:l,create:u,destroy:g,deps:x,next:null},u=tr.updateQueue,u===null?(u={lastEffect:null,stores:null},tr.updateQueue=u,u.lastEffect=l.next=l):(g=u.lastEffect,g===null?u.lastEffect=l.next=l:(x=g.next,g.next=l,l.next=x,u.lastEffect=l)),l}function qh(){return Ss().memoizedState}function $d(l,u,g,x){var T=No();tr.flags|=l,T.memoizedState=cu(1|u,g,void 0,x===void 0?null:x)}function uu(l,u,g,x){var T=Ss();x=x===void 0?null:x;var R=void 0;if(fr!==null){var L=fr.memoizedState;if(R=L.destroy,x!==null&&Lg(x,L.deps)){T.memoizedState=cu(u,g,R,x);return}}tr.flags|=l,T.memoizedState=cu(1|u,g,R,x)}function Kh(l,u){return $d(8390656,8,l,u)}function Mo(l,u){return uu(2048,8,l,u)}function J0(l,u){return uu(4,2,l,u)}function ca(l,u){return uu(4,4,l,u)}function Bg(l,u){if(typeof u=="function")return l=l(),u(l),function(){u(null)};if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function zg(l,u,g){return g=g!=null?g.concat([l]):null,uu(4,4,Bg.bind(null,u,l),g)}function Wd(){}function X0(l,u){var g=Ss();u=u===void 0?null:u;var x=g.memoizedState;return x!==null&&u!==null&&Lg(u,x[1])?x[0]:(g.memoizedState=[l,u],l)}function Z0(l,u){var g=Ss();u=u===void 0?null:u;var x=g.memoizedState;return x!==null&&u!==null&&Lg(u,x[1])?x[0]:(l=l(),g.memoizedState=[l,u],l)}function eb(l,u,g){return(Xa&21)===0?(l.baseState&&(l.baseState=!1,Pi=!0),l.memoizedState=g):(xe(g,u)||(g=rg(),tr.lanes|=g,tl|=g,l.baseState=!0),u)}function tb(l,u){var g=wn;wn=g!==0&&4>g?g:4,l(!0);var x=Dg.transition;Dg.transition={};try{l(!1),u()}finally{wn=g,Dg.transition=x}}function $g(){return Ss().memoizedState}function iC(l,u,g){var x=il(l);if(g={lane:x,action:g,hasEagerState:!1,eagerState:null,next:null},Wg(l))Ri(u,g);else if(g=Fh(l,u,g,x),g!==null){var T=Ni();ro(g,l,x,T),Xs(g,u,x)}}function nb(l,u,g){var x=il(l),T={lane:x,action:g,hasEagerState:!1,eagerState:null,next:null};if(Wg(l))Ri(u,T);else{var R=l.alternate;if(l.lanes===0&&(R===null||R.lanes===0)&&(R=u.lastRenderedReducer,R!==null))try{var L=u.lastRenderedState,z=R(L,g);if(T.hasEagerState=!0,T.eagerState=z,xe(z,L)){var Z=u.interleaved;Z===null?(T.next=T,Ag(u)):(T.next=Z.next,Z.next=T),u.interleaved=T;return}}catch{}finally{}g=Fh(l,u,T,x),g!==null&&(T=Ni(),ro(g,l,x,T),Xs(g,u,x))}}function Wg(l){var u=l.alternate;return l===tr||u!==null&&u===tr}function Ri(l,u){Bd=au=!0;var g=l.pending;g===null?u.next=u:(u.next=g.next,g.next=u),l.pending=u}function Xs(l,u,g){if((g&4194240)!==0){var x=u.lanes;x&=l.pendingLanes,g|=x,u.lanes=g,bd(l,g)}}var Gh={readContext:bs,useCallback:yi,useContext:yi,useEffect:yi,useImperativeHandle:yi,useInsertionEffect:yi,useLayoutEffect:yi,useMemo:yi,useReducer:yi,useRef:yi,useState:yi,useDebugValue:yi,useDeferredValue:yi,useTransition:yi,useMutableSource:yi,useSyncExternalStore:yi,useId:yi,unstable_isNewReconciler:!1},sC={readContext:bs,useCallback:function(l,u){return No().memoizedState=[l,u===void 0?null:u],l},useContext:bs,useEffect:Kh,useImperativeHandle:function(l,u,g){return g=g!=null?g.concat([l]):null,$d(4194308,4,Bg.bind(null,u,l),g)},useLayoutEffect:function(l,u){return $d(4194308,4,l,u)},useInsertionEffect:function(l,u){return $d(4,2,l,u)},useMemo:function(l,u){var g=No();return u=u===void 0?null:u,l=l(),g.memoizedState=[l,u],l},useReducer:function(l,u,g){var x=No();return u=g!==void 0?g(u):u,x.memoizedState=x.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},x.queue=l,l=l.dispatch=iC.bind(null,tr,l),[x.memoizedState,l]},useRef:function(l){var u=No();return l={current:l},u.memoizedState=l},useState:zd,useDebugValue:Wd,useDeferredValue:function(l){return No().memoizedState=l},useTransition:function(){var l=zd(!1),u=l[0];return l=tb.bind(null,l[1]),No().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,g){var x=tr,T=No();if(Gn){if(g===void 0)throw Error(n(407));g=g()}else{if(g=u(),Wr===null)throw Error(n(349));(Xa&30)!==0||Ug(x,u,g)}T.memoizedState=g;var R={value:g,getSnapshot:u};return T.queue=R,Kh(la.bind(null,x,R,l),[l]),x.flags|=2048,cu(9,Bi.bind(null,x,R,g,u),void 0,null),g},useId:function(){var l=No(),u=Wr.identifierPrefix;if(Gn){var g=_o,x=Eo;g=(x&~(1<<32-di(x)-1)).toString(32)+g,u=":"+u+"R"+g,g=Xl++,0<g&&(u+="H"+g.toString(32)),u+=":"}else g=Kt++,u=":"+u+"r"+g.toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},Yh={readContext:bs,useCallback:X0,useContext:bs,useEffect:Mo,useImperativeHandle:zg,useInsertionEffect:J0,useLayoutEffect:ca,useMemo:Z0,useReducer:jg,useRef:qh,useState:function(){return jg(bi)},useDebugValue:Wd,useDeferredValue:function(l){var u=Ss();return eb(u,fr.memoizedState,l)},useTransition:function(){var l=jg(bi)[0],u=Ss().memoizedState;return[l,u]},useMutableSource:Wh,useSyncExternalStore:Fg,useId:$g,unstable_isNewReconciler:!1},du={readContext:bs,useCallback:X0,useContext:bs,useEffect:Mo,useImperativeHandle:zg,useInsertionEffect:J0,useLayoutEffect:ca,useMemo:Z0,useReducer:lu,useRef:qh,useState:function(){return lu(bi)},useDebugValue:Wd,useDeferredValue:function(l){var u=Ss();return fr===null?u.memoizedState=l:eb(u,fr.memoizedState,l)},useTransition:function(){var l=lu(bi)[0],u=Ss().memoizedState;return[l,u]},useMutableSource:Wh,useSyncExternalStore:Fg,useId:$g,unstable_isNewReconciler:!1};function Cs(l,u){if(l&&l.defaultProps){u=ae({},u),l=l.defaultProps;for(var g in l)u[g]===void 0&&(u[g]=l[g]);return u}return u}function Qh(l,u,g,x){u=l.memoizedState,g=g(x,u),g=g==null?u:ae({},u,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var Jh={isMounted:function(l){return(l=l._reactInternals)?At(l)===l:!1},enqueueSetState:function(l,u,g){l=l._reactInternals;var x=Ni(),T=il(l),R=oa(x,T);R.payload=u,g!=null&&(R.callback=g),u=ws(l,R,T),u!==null&&(ro(u,l,T,x),Vh(u,l,T))},enqueueReplaceState:function(l,u,g){l=l._reactInternals;var x=Ni(),T=il(l),R=oa(x,T);R.tag=1,R.payload=u,g!=null&&(R.callback=g),u=ws(l,R,T),u!==null&&(ro(u,l,T,x),Vh(u,l,T))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var g=Ni(),x=il(l),T=oa(g,x);T.tag=2,u!=null&&(T.callback=u),u=ws(l,T,x),u!==null&&(ro(u,l,x,g),Vh(u,l,x))}};function Hg(l,u,g,x,T,R,L){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(x,R,L):u.prototype&&u.prototype.isPureReactComponent?!nt(g,x)||!nt(T,R):!0}function ec(l,u,g){var x=!1,T=Ka,R=u.contextType;return typeof R=="object"&&R!==null?R=bs(R):(T=Ui(u)?_i:mi.current,x=u.contextTypes,R=(x=x!=null)?nu(l,T):Ka),u=new u(g,R),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Jh,l.stateNode=u,u._reactInternals=l,x&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=T,l.__reactInternalMemoizedMaskedChildContext=R),u}function fu(l,u,g,x){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,x),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,x),u.state!==l&&Jh.enqueueReplaceState(u,u.state,null)}function qg(l,u,g,x){var T=l.stateNode;T.props=g,T.state=l.memoizedState,T.refs={},Uh(l);var R=u.contextType;typeof R=="object"&&R!==null?T.context=bs(R):(R=Ui(u)?_i:mi.current,T.context=nu(l,R)),T.state=l.memoizedState,R=u.getDerivedStateFromProps,typeof R=="function"&&(Qh(l,u,R,g),T.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(u=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),u!==T.state&&Jh.enqueueReplaceState(T,T.state,null),su(l,g,T,x),T.state=l.memoizedState),typeof T.componentDidMount=="function"&&(l.flags|=4194308)}function tc(l,u){try{var g="",x=u;do g+=Te(x),x=x.return;while(x);var T=g}catch(R){T=`
Error generating stack: `+R.message+`
`+R.stack}return{value:l,source:u,stack:T,digest:null}}function Xh(l,u,g){return{value:l,source:null,stack:g??null,digest:u??null}}function hu(l,u){try{console.error(u.value)}catch(g){setTimeout(function(){throw g})}}var rb=typeof WeakMap=="function"?WeakMap:Map;function Hd(l,u,g){g=oa(-1,g),g.tag=3,g.payload={element:null};var x=u.value;return g.callback=function(){cp||(cp=!0,lv=x),hu(l,u)},g}function Zh(l,u,g){g=oa(-1,g),g.tag=3;var x=l.type.getDerivedStateFromError;if(typeof x=="function"){var T=u.value;g.payload=function(){return x(T)},g.callback=function(){hu(l,u)}}var R=l.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(g.callback=function(){hu(l,u),typeof x!="function"&&(nl===null?nl=new Set([this]):nl.add(this));var L=u.stack;this.componentDidCatch(u.value,{componentStack:L!==null?L:""})}),g}function qd(l,u,g){var x=l.pingCache;if(x===null){x=l.pingCache=new rb;var T=new Set;x.set(u,T)}else T=x.get(u),T===void 0&&(T=new Set,x.set(u,T));T.has(g)||(T.add(g),l=hC.bind(null,l,u,g),u.then(l,l))}function ib(l){do{var u;if((u=l.tag===13)&&(u=l.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return l;l=l.return}while(l!==null);return null}function Kg(l,u,g,x,T){return(l.mode&1)===0?(l===u?l.flags|=65536:(l.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(u=oa(-1,1),u.tag=2,ws(g,u,1))),g.lanes|=1),l):(l.flags|=65536,l.lanes=T,l)}var ep=I.ReactCurrentOwner,Pi=!1;function ei(l,u,g,x){u.child=l===null?Lh(u,null,g,x):or(u,l.child,g,x)}function sb(l,u,g,x,T){g=g.render;var R=u.ref;return Qa(u,T),x=Zl(l,u,g,x,R,T),g=$h(),l!==null&&!Pi?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~T,Zs(l,u,T)):(Gn&&g&&Od(u),u.flags|=1,ei(l,u,x,T),u.child)}function Gg(l,u,g,x,T){if(l===null){var R=g.type;return typeof R=="function"&&!mp(R)&&R.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(u.tag=15,u.type=R,Oo(l,u,R,x,T)):(l=gp(g.type,null,x,u,u.mode,T),l.ref=u.ref,l.return=u,u.child=l)}if(R=l.child,(l.lanes&T)===0){var L=R.memoizedProps;if(g=g.compare,g=g!==null?g:nt,g(L,x)&&l.ref===u.ref)return Zs(l,u,T)}return u.flags|=1,l=io(R,x),l.ref=u.ref,l.return=u,u.child=l}function Oo(l,u,g,x,T){if(l!==null){var R=l.memoizedProps;if(nt(R,x)&&l.ref===u.ref)if(Pi=!1,u.pendingProps=x=R,(l.lanes&T)!==0)(l.flags&131072)!==0&&(Pi=!0);else return u.lanes=l.lanes,Zs(l,u,T)}return Jg(l,u,g,x,T)}function Yg(l,u,g){var x=u.pendingProps,T=x.children,R=l!==null?l.memoizedState:null;if(x.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},$n(vu,ts),ts|=g;else{if((g&1073741824)===0)return l=R!==null?R.baseLanes|g:g,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,$n(vu,ts),ts|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=R!==null?R.baseLanes:g,$n(vu,ts),ts|=x}else R!==null?(x=R.baseLanes|g,u.memoizedState=null):x=g,$n(vu,ts),ts|=x;return ei(l,u,T,g),u.child}function Qg(l,u){var g=u.ref;(l===null&&g!==null||l!==null&&l.ref!==g)&&(u.flags|=512,u.flags|=2097152)}function Jg(l,u,g,x,T){var R=Ui(g)?_i:mi.current;return R=nu(u,R),Qa(u,T),g=Zl(l,u,g,x,R,T),x=$h(),l!==null&&!Pi?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~T,Zs(l,u,T)):(Gn&&x&&Od(u),u.flags|=1,ei(l,u,g,T),u.child)}function Xg(l,u,g,x,T){if(Ui(g)){var R=!0;gs(u)}else R=!1;if(Qa(u,T),u.stateNode===null)np(l,u),ec(u,g,x),qg(u,g,x,T),x=!0;else if(l===null){var L=u.stateNode,z=u.memoizedProps;L.props=z;var Z=L.context,Ce=g.contextType;typeof Ce=="object"&&Ce!==null?Ce=bs(Ce):(Ce=Ui(g)?_i:mi.current,Ce=nu(u,Ce));var Fe=g.getDerivedStateFromProps,ze=typeof Fe=="function"||typeof L.getSnapshotBeforeUpdate=="function";ze||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(z!==x||Z!==Ce)&&fu(u,L,x,Ce),xs=!1;var je=u.memoizedState;L.state=je,su(u,x,L,T),Z=u.memoizedState,z!==x||je!==Z||Fi.current||xs?(typeof Fe=="function"&&(Qh(u,g,Fe,x),Z=u.memoizedState),(z=xs||Hg(u,g,z,x,je,Z,Ce))?(ze||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(u.flags|=4194308)):(typeof L.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=x,u.memoizedState=Z),L.props=x,L.state=Z,L.context=Ce,x=z):(typeof L.componentDidMount=="function"&&(u.flags|=4194308),x=!1)}else{L=u.stateNode,Y0(l,u),z=u.memoizedProps,Ce=u.type===u.elementType?z:Cs(u.type,z),L.props=Ce,ze=u.pendingProps,je=L.context,Z=g.contextType,typeof Z=="object"&&Z!==null?Z=bs(Z):(Z=Ui(g)?_i:mi.current,Z=nu(u,Z));var rt=g.getDerivedStateFromProps;(Fe=typeof rt=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(z!==ze||je!==Z)&&fu(u,L,x,Z),xs=!1,je=u.memoizedState,L.state=je,su(u,x,L,T);var dt=u.memoizedState;z!==ze||je!==dt||Fi.current||xs?(typeof rt=="function"&&(Qh(u,g,rt,x),dt=u.memoizedState),(Ce=xs||Hg(u,g,Ce,x,je,dt,Z)||!1)?(Fe||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(x,dt,Z),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(x,dt,Z)),typeof L.componentDidUpdate=="function"&&(u.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof L.componentDidUpdate!="function"||z===l.memoizedProps&&je===l.memoizedState||(u.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||z===l.memoizedProps&&je===l.memoizedState||(u.flags|=1024),u.memoizedProps=x,u.memoizedState=dt),L.props=x,L.state=dt,L.context=Z,x=Ce):(typeof L.componentDidUpdate!="function"||z===l.memoizedProps&&je===l.memoizedState||(u.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||z===l.memoizedProps&&je===l.memoizedState||(u.flags|=1024),x=!1)}return Zg(l,u,g,x,R,T)}function Zg(l,u,g,x,T,R){Qg(l,u);var L=(u.flags&128)!==0;if(!x&&!L)return T&&$0(u,g,!1),Zs(l,u,R);x=u.stateNode,ep.current=u;var z=L&&typeof g.getDerivedStateFromError!="function"?null:x.render();return u.flags|=1,l!==null&&L?(u.child=or(u,l.child,null,R),u.child=or(u,null,z,R)):ei(l,u,z,R),u.memoizedState=x.state,T&&$0(u,g,!0),u.child}function ob(l){var u=l.stateNode;u.pendingContext?B0(l,u.pendingContext,u.pendingContext!==u.context):u.context&&B0(l,u.context,!1),Ng(l,u.containerInfo)}function Do(l,u,g,x,T){return Po(),Ao(T),u.flags|=256,ei(l,u,g,x),u.child}var Kd={dehydrated:null,treeContext:null,retryLane:0};function Gd(l){return{baseLanes:l,cachePool:null,transitions:null}}function tp(l,u,g){var x=u.pendingProps,T=Jn.current,R=!1,L=(u.flags&128)!==0,z;if((z=L)||(z=l!==null&&l.memoizedState===null?!1:(T&2)!==0),z?(R=!0,u.flags&=-129):(l===null||l.memoizedState!==null)&&(T|=1),$n(Jn,T&1),l===null)return Vi(u),l=u.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((u.mode&1)===0?u.lanes=1:l.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(L=x.children,l=x.fallback,R?(x=u.mode,R=u.child,L={mode:"hidden",children:L},(x&1)===0&&R!==null?(R.childLanes=0,R.pendingProps=L):R=vp(L,x,0,null),l=oc(l,x,g,null),R.return=u,l.return=u,R.sibling=l,u.child=R,u.child.memoizedState=Gd(g),u.memoizedState=Kd,l):pu(u,L));if(T=l.memoizedState,T!==null&&(z=T.dehydrated,z!==null))return Rt(l,u,L,x,z,T,g);if(R){R=x.fallback,L=u.mode,T=l.child,z=T.sibling;var Z={mode:"hidden",children:x.children};return(L&1)===0&&u.child!==T?(x=u.child,x.childLanes=0,x.pendingProps=Z,u.deletions=null):(x=io(T,Z),x.subtreeFlags=T.subtreeFlags&14680064),z!==null?R=io(z,R):(R=oc(R,L,g,null),R.flags|=2),R.return=u,x.return=u,x.sibling=R,u.child=x,x=R,R=u.child,L=l.child.memoizedState,L=L===null?Gd(g):{baseLanes:L.baseLanes|g,cachePool:null,transitions:L.transitions},R.memoizedState=L,R.childLanes=l.childLanes&~g,u.memoizedState=Kd,x}return R=l.child,l=R.sibling,x=io(R,{mode:"visible",children:x.children}),(u.mode&1)===0&&(x.lanes=g),x.return=u,x.sibling=null,l!==null&&(g=u.deletions,g===null?(u.deletions=[l],u.flags|=16):g.push(l)),u.child=x,u.memoizedState=null,x}function pu(l,u){return u=vp({mode:"visible",children:u},l.mode,0,null),u.return=l,l.child=u}function ua(l,u,g,x){return x!==null&&Ao(x),or(u,l.child,null,g),l=pu(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function Rt(l,u,g,x,T,R,L){if(g)return u.flags&256?(u.flags&=-257,x=Xh(Error(n(422))),ua(l,u,L,x)):u.memoizedState!==null?(u.child=l.child,u.flags|=128,null):(R=x.fallback,T=u.mode,x=vp({mode:"visible",children:x.children},T,0,null),R=oc(R,T,L,null),R.flags|=2,x.return=u,R.return=u,x.sibling=R,u.child=x,(u.mode&1)!==0&&or(u,l.child,null,L),u.child.memoizedState=Gd(L),u.memoizedState=Kd,R);if((u.mode&1)===0)return ua(l,u,L,null);if(T.data==="$!"){if(x=T.nextSibling&&T.nextSibling.dataset,x)var z=x.dgst;return x=z,R=Error(n(419)),x=Xh(R,x,void 0),ua(l,u,L,x)}if(z=(L&l.childLanes)!==0,Pi||z){if(x=Wr,x!==null){switch(L&-L){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(x.suspendedLanes|L))!==0?0:T,T!==0&&T!==R.retryLane&&(R.retryLane=T,sa(l,T),ro(x,l,T,-1))}return pv(),x=Xh(Error(n(421))),ua(l,u,L,x)}return T.data==="$?"?(u.flags|=128,u.child=l.child,u=pC.bind(null,l),T._reactRetry=u,null):(l=R.treeContext,Xi=Ha(T.nextSibling),vi=u,Gn=!0,Js=null,l!==null&&(vs[ys++]=Eo,vs[ys++]=_o,vs[ys++]=ql,Eo=l.id,_o=l.overflow,ql=u),u=pu(u,x.children),u.flags|=4096,u)}function Yd(l,u,g){l.lanes|=u;var x=l.alternate;x!==null&&(x.lanes|=u),Zr(l.return,u,g)}function Qd(l,u,g,x,T){var R=l.memoizedState;R===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:x,tail:g,tailMode:T}:(R.isBackwards=u,R.rendering=null,R.renderingStartTime=0,R.last=x,R.tail=g,R.tailMode=T)}function Za(l,u,g){var x=u.pendingProps,T=x.revealOrder,R=x.tail;if(ei(l,u,x.children,g),x=Jn.current,(x&2)!==0)x=x&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Yd(l,g,u);else if(l.tag===19)Yd(l,g,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}x&=1}if($n(Jn,x),(u.mode&1)===0)u.memoizedState=null;else switch(T){case"forwards":for(g=u.child,T=null;g!==null;)l=g.alternate,l!==null&&Jl(l)===null&&(T=g),g=g.sibling;g=T,g===null?(T=u.child,u.child=null):(T=g.sibling,g.sibling=null),Qd(u,!1,T,g,R);break;case"backwards":for(g=null,T=u.child,u.child=null;T!==null;){if(l=T.alternate,l!==null&&Jl(l)===null){u.child=T;break}l=T.sibling,T.sibling=g,g=T,T=l}Qd(u,!0,g,null,R);break;case"together":Qd(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function np(l,u){(u.mode&1)===0&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function Zs(l,u,g){if(l!==null&&(u.dependencies=l.dependencies),tl|=u.lanes,(g&u.childLanes)===0)return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,g=io(l,l.pendingProps),u.child=g,g.return=u;l.sibling!==null;)l=l.sibling,g=g.sibling=io(l,l.pendingProps),g.return=u;g.sibling=null}return u.child}function ab(l,u,g){switch(u.tag){case 3:ob(u),Po();break;case 5:Mg(u);break;case 1:Ui(u.type)&&gs(u);break;case 4:Ng(u,u.stateNode.containerInfo);break;case 10:var x=u.type._context,T=u.memoizedProps.value;$n(jd,x._currentValue),x._currentValue=T;break;case 13:if(x=u.memoizedState,x!==null)return x.dehydrated!==null?($n(Jn,Jn.current&1),u.flags|=128,null):(g&u.child.childLanes)!==0?tp(l,u,g):($n(Jn,Jn.current&1),l=Zs(l,u,g),l!==null?l.sibling:null);$n(Jn,Jn.current&1);break;case 19:if(x=(g&u.childLanes)!==0,(l.flags&128)!==0){if(x)return Za(l,u,g);u.flags|=128}if(T=u.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),$n(Jn,Jn.current),x)break;return null;case 22:case 23:return u.lanes=0,Yg(l,u,g)}return Zs(l,u,g)}var ti,ev,lb,tv;ti=function(l,u){for(var g=u.child;g!==null;){if(g.tag===5||g.tag===6)l.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},ev=function(){},lb=function(l,u,g,x){var T=l.memoizedProps;if(T!==x){l=u.stateNode,aa(Io.current);var R=null;switch(g){case"input":T=wt(l,T),x=wt(l,x),R=[];break;case"select":T=ae({},T,{value:void 0}),x=ae({},x,{value:void 0}),R=[];break;case"textarea":T=ve(l,T),x=ve(l,x),R=[];break;default:typeof T.onClick!="function"&&typeof x.onClick=="function"&&(l.onclick=_h)}Rn(g,x);var L;g=null;for(Ce in T)if(!x.hasOwnProperty(Ce)&&T.hasOwnProperty(Ce)&&T[Ce]!=null)if(Ce==="style"){var z=T[Ce];for(L in z)z.hasOwnProperty(L)&&(g||(g={}),g[L]="")}else Ce!=="dangerouslySetInnerHTML"&&Ce!=="children"&&Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&Ce!=="autoFocus"&&(i.hasOwnProperty(Ce)?R||(R=[]):(R=R||[]).push(Ce,null));for(Ce in x){var Z=x[Ce];if(z=T!=null?T[Ce]:void 0,x.hasOwnProperty(Ce)&&Z!==z&&(Z!=null||z!=null))if(Ce==="style")if(z){for(L in z)!z.hasOwnProperty(L)||Z&&Z.hasOwnProperty(L)||(g||(g={}),g[L]="");for(L in Z)Z.hasOwnProperty(L)&&z[L]!==Z[L]&&(g||(g={}),g[L]=Z[L])}else g||(R||(R=[]),R.push(Ce,g)),g=Z;else Ce==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,z=z?z.__html:void 0,Z!=null&&z!==Z&&(R=R||[]).push(Ce,Z)):Ce==="children"?typeof Z!="string"&&typeof Z!="number"||(R=R||[]).push(Ce,""+Z):Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ce)?(Z!=null&&Ce==="onScroll"&&qn("scroll",l),R||z===Z||(R=[])):(R=R||[]).push(Ce,Z))}g&&(R=R||[]).push("style",g);var Ce=R;(u.updateQueue=Ce)&&(u.flags|=4)}},tv=function(l,u,g,x){g!==x&&(u.flags|=4)};function Jd(l,u){if(!Gn)switch(l.tailMode){case"hidden":u=l.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var x=null;g!==null;)g.alternate!==null&&(x=g),g=g.sibling;x===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:x.sibling=null}}function ni(l){var u=l.alternate!==null&&l.alternate.child===l.child,g=0,x=0;if(u)for(var T=l.child;T!==null;)g|=T.lanes|T.childLanes,x|=T.subtreeFlags&14680064,x|=T.flags&14680064,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)g|=T.lanes|T.childLanes,x|=T.subtreeFlags,x|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=x,l.childLanes=g,u}function oC(l,u,g){var x=u.pendingProps;switch(Gl(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ni(u),null;case 1:return Ui(u.type)&&Ih(),ni(u),null;case 3:return x=u.stateNode,Ja(),Kn(Fi),Kn(mi),zh(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(l===null||l.child===null)&&(Dd(u)?u.flags|=4:l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Js!==null&&(dv(Js),Js=null))),ev(l,u),ni(u),null;case 5:Bh(u);var T=aa(ou.current);if(g=u.type,l!==null&&u.stateNode!=null)lb(l,u,g,x,T),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!x){if(u.stateNode===null)throw Error(n(166));return ni(u),null}if(l=aa(Io.current),Dd(u)){x=u.stateNode,g=u.type;var R=u.memoizedProps;switch(x[ko]=u,x[qa]=R,l=(u.mode&1)!==0,g){case"dialog":qn("cancel",x),qn("close",x);break;case"iframe":case"object":case"embed":qn("load",x);break;case"video":case"audio":for(T=0;T<ta.length;T++)qn(ta[T],x);break;case"source":qn("error",x);break;case"img":case"image":case"link":qn("error",x),qn("load",x);break;case"details":qn("toggle",x);break;case"input":_n(x,R),qn("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!R.multiple},qn("invalid",x);break;case"textarea":qe(x,R),qn("invalid",x)}Rn(g,R),T=null;for(var L in R)if(R.hasOwnProperty(L)){var z=R[L];L==="children"?typeof z=="string"?x.textContent!==z&&(R.suppressHydrationWarning!==!0&&Ad(x.textContent,z,l),T=["children",z]):typeof z=="number"&&x.textContent!==""+z&&(R.suppressHydrationWarning!==!0&&Ad(x.textContent,z,l),T=["children",""+z]):i.hasOwnProperty(L)&&z!=null&&L==="onScroll"&&qn("scroll",x)}switch(g){case"input":Je(x),tn(x,R,!0);break;case"textarea":Je(x),Be(x);break;case"select":case"option":break;default:typeof R.onClick=="function"&&(x.onclick=_h)}x=T,u.updateQueue=x,x!==null&&(u.flags|=4)}else{L=T.nodeType===9?T:T.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Ze(g)),l==="http://www.w3.org/1999/xhtml"?g==="script"?(l=L.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof x.is=="string"?l=L.createElement(g,{is:x.is}):(l=L.createElement(g),g==="select"&&(L=l,x.multiple?L.multiple=!0:x.size&&(L.size=x.size))):l=L.createElementNS(l,g),l[ko]=u,l[qa]=x,ti(l,u,!1,!1),u.stateNode=l;e:{switch(L=sr(g,x),g){case"dialog":qn("cancel",l),qn("close",l),T=x;break;case"iframe":case"object":case"embed":qn("load",l),T=x;break;case"video":case"audio":for(T=0;T<ta.length;T++)qn(ta[T],l);T=x;break;case"source":qn("error",l),T=x;break;case"img":case"image":case"link":qn("error",l),qn("load",l),T=x;break;case"details":qn("toggle",l),T=x;break;case"input":_n(l,x),T=wt(l,x),qn("invalid",l);break;case"option":T=x;break;case"select":l._wrapperState={wasMultiple:!!x.multiple},T=ae({},x,{value:void 0}),qn("invalid",l);break;case"textarea":qe(l,x),T=ve(l,x),qn("invalid",l);break;default:T=x}Rn(g,T),z=T;for(R in z)if(z.hasOwnProperty(R)){var Z=z[R];R==="style"?It(l,Z):R==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&We(l,Z)):R==="children"?typeof Z=="string"?(g!=="textarea"||Z!=="")&&Ut(l,Z):typeof Z=="number"&&Ut(l,""+Z):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(i.hasOwnProperty(R)?Z!=null&&R==="onScroll"&&qn("scroll",l):Z!=null&&M(l,R,Z,L))}switch(g){case"input":Je(l),tn(l,x,!1);break;case"textarea":Je(l),Be(l);break;case"option":x.value!=null&&l.setAttribute("value",""+be(x.value));break;case"select":l.multiple=!!x.multiple,R=x.value,R!=null?ce(l,!!x.multiple,R,!1):x.defaultValue!=null&&ce(l,!!x.multiple,x.defaultValue,!0);break;default:typeof T.onClick=="function"&&(l.onclick=_h)}switch(g){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return ni(u),null;case 6:if(l&&u.stateNode!=null)tv(l,u,l.memoizedProps,x);else{if(typeof x!="string"&&u.stateNode===null)throw Error(n(166));if(g=aa(ou.current),aa(Io.current),Dd(u)){if(x=u.stateNode,g=u.memoizedProps,x[ko]=u,(R=x.nodeValue!==g)&&(l=vi,l!==null))switch(l.tag){case 3:Ad(x.nodeValue,g,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Ad(x.nodeValue,g,(l.mode&1)!==0)}R&&(u.flags|=4)}else x=(g.nodeType===9?g:g.ownerDocument).createTextNode(x),x[ko]=u,u.stateNode=x}return ni(u),null;case 13:if(Kn(Jn),x=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Gn&&Xi!==null&&(u.mode&1)!==0&&(u.flags&128)===0)Rg(),Po(),u.flags|=98560,R=!1;else if(R=Dd(u),x!==null&&x.dehydrated!==null){if(l===null){if(!R)throw Error(n(318));if(R=u.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(n(317));R[ko]=u}else Po(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;ni(u),R=!1}else Js!==null&&(dv(Js),Js=null),R=!0;if(!R)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=g,u):(x=x!==null,x!==(l!==null&&l.memoizedState!==null)&&x&&(u.child.flags|=8192,(u.mode&1)!==0&&(l===null||(Jn.current&1)!==0?Mr===0&&(Mr=3):pv())),u.updateQueue!==null&&(u.flags|=4),ni(u),null);case 4:return Ja(),ev(l,u),l===null&&$a(u.stateNode.containerInfo),ni(u),null;case 10:return jh(u.type._context),ni(u),null;case 17:return Ui(u.type)&&Ih(),ni(u),null;case 19:if(Kn(Jn),R=u.memoizedState,R===null)return ni(u),null;if(x=(u.flags&128)!==0,L=R.rendering,L===null)if(x)Jd(R,!1);else{if(Mr!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(L=Jl(l),L!==null){for(u.flags|=128,Jd(R,!1),x=L.updateQueue,x!==null&&(u.updateQueue=x,u.flags|=4),u.subtreeFlags=0,x=g,g=u.child;g!==null;)R=g,l=x,R.flags&=14680066,L=R.alternate,L===null?(R.childLanes=0,R.lanes=l,R.child=null,R.subtreeFlags=0,R.memoizedProps=null,R.memoizedState=null,R.updateQueue=null,R.dependencies=null,R.stateNode=null):(R.childLanes=L.childLanes,R.lanes=L.lanes,R.child=L.child,R.subtreeFlags=0,R.deletions=null,R.memoizedProps=L.memoizedProps,R.memoizedState=L.memoizedState,R.updateQueue=L.updateQueue,R.type=L.type,l=L.dependencies,R.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),g=g.sibling;return $n(Jn,Jn.current&1|2),u.child}l=l.sibling}R.tail!==null&&On()>nc&&(u.flags|=128,x=!0,Jd(R,!1),u.lanes=4194304)}else{if(!x)if(l=Jl(L),l!==null){if(u.flags|=128,x=!0,g=l.updateQueue,g!==null&&(u.updateQueue=g,u.flags|=4),Jd(R,!0),R.tail===null&&R.tailMode==="hidden"&&!L.alternate&&!Gn)return ni(u),null}else 2*On()-R.renderingStartTime>nc&&g!==1073741824&&(u.flags|=128,x=!0,Jd(R,!1),u.lanes=4194304);R.isBackwards?(L.sibling=u.child,u.child=L):(g=R.last,g!==null?g.sibling=L:u.child=L,R.last=L)}return R.tail!==null?(u=R.tail,R.rendering=u,R.tail=u.sibling,R.renderingStartTime=On(),u.sibling=null,g=Jn.current,$n(Jn,x?g&1|2:g&1),u):(ni(u),null);case 22:case 23:return hv(),x=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==x&&(u.flags|=8192),x&&(u.mode&1)!==0?(ts&1073741824)!==0&&(ni(u),u.subtreeFlags&6&&(u.flags|=8192)):ni(u),null;case 24:return null;case 25:return null}throw Error(n(156,u.tag))}function aC(l,u){switch(Gl(u),u.tag){case 1:return Ui(u.type)&&Ih(),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Ja(),Kn(Fi),Kn(mi),zh(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 5:return Bh(u),null;case 13:if(Kn(Jn),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));Po()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return Kn(Jn),null;case 4:return Ja(),null;case 10:return jh(u.type._context),null;case 22:case 23:return hv(),null;case 24:return null;default:return null}}var rp=!1,Xn=!1,Ai=typeof WeakSet=="function"?WeakSet:Set,ot=null;function mu(l,u){var g=l.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(x){nr(l,u,x)}else g.current=null}function Xd(l,u,g){try{g()}catch(x){nr(l,u,x)}}var cb=!1;function lC(l,u){if(Id=ch,l=Dn(),kd(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else e:{g=(g=l.ownerDocument)&&g.defaultView||window;var x=g.getSelection&&g.getSelection();if(x&&x.rangeCount!==0){g=x.anchorNode;var T=x.anchorOffset,R=x.focusNode;x=x.focusOffset;try{g.nodeType,R.nodeType}catch{g=null;break e}var L=0,z=-1,Z=-1,Ce=0,Fe=0,ze=l,je=null;t:for(;;){for(var rt;ze!==g||T!==0&&ze.nodeType!==3||(z=L+T),ze!==R||x!==0&&ze.nodeType!==3||(Z=L+x),ze.nodeType===3&&(L+=ze.nodeValue.length),(rt=ze.firstChild)!==null;)je=ze,ze=rt;for(;;){if(ze===l)break t;if(je===g&&++Ce===T&&(z=L),je===R&&++Fe===x&&(Z=L),(rt=ze.nextSibling)!==null)break;ze=je,je=ze.parentNode}ze=rt}g=z===-1||Z===-1?null:{start:z,end:Z}}else g=null}g=g||{start:0,end:0}}else g=null;for(Wl={focusedElem:l,selectionRange:g},ch=!1,ot=u;ot!==null;)if(u=ot,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,ot=l;else for(;ot!==null;){u=ot;try{var dt=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(dt!==null){var ht=dt.memoizedProps,hr=dt.memoizedState,he=u.stateNode,ne=he.getSnapshotBeforeUpdate(u.elementType===u.type?ht:Cs(u.type,ht),hr);he.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var ge=u.stateNode.containerInfo;ge.nodeType===1?ge.textContent="":ge.nodeType===9&&ge.documentElement&&ge.removeChild(ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ke){nr(u,u.return,Ke)}if(l=u.sibling,l!==null){l.return=u.return,ot=l;break}ot=u.return}return dt=cb,cb=!1,dt}function da(l,u,g){var x=u.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var T=x=x.next;do{if((T.tag&l)===l){var R=T.destroy;T.destroy=void 0,R!==void 0&&Xd(u,g,R)}T=T.next}while(T!==x)}}function Zd(l,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var g=u=u.next;do{if((g.tag&l)===l){var x=g.create;g.destroy=x()}g=g.next}while(g!==u)}}function ip(l){var u=l.ref;if(u!==null){var g=l.stateNode;switch(l.tag){case 5:l=g;break;default:l=g}typeof u=="function"?u(l):u.current=l}}function ub(l){var u=l.alternate;u!==null&&(l.alternate=null,ub(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&(delete u[ko],delete u[qa],delete u[Ph],delete u[F],delete u[eu])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function db(l){return l.tag===5||l.tag===3||l.tag===4}function fb(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||db(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function nv(l,u,g){var x=l.tag;if(x===5||x===6)l=l.stateNode,u?g.nodeType===8?g.parentNode.insertBefore(l,u):g.insertBefore(l,u):(g.nodeType===8?(u=g.parentNode,u.insertBefore(l,g)):(u=g,u.appendChild(l)),g=g._reactRootContainer,g!=null||u.onclick!==null||(u.onclick=_h));else if(x!==4&&(l=l.child,l!==null))for(nv(l,u,g),l=l.sibling;l!==null;)nv(l,u,g),l=l.sibling}function sp(l,u,g){var x=l.tag;if(x===5||x===6)l=l.stateNode,u?g.insertBefore(l,u):g.appendChild(l);else if(x!==4&&(l=l.child,l!==null))for(sp(l,u,g),l=l.sibling;l!==null;)sp(l,u,g),l=l.sibling}var $r=null,eo=!1;function Lo(l,u,g){for(g=g.child;g!==null;)rv(l,u,g),g=g.sibling}function rv(l,u,g){if(zr&&typeof zr.onCommitFiberUnmount=="function")try{zr.onCommitFiberUnmount(Ys,g)}catch{}switch(g.tag){case 5:Xn||mu(g,u);case 6:var x=$r,T=eo;$r=null,Lo(l,u,g),$r=x,eo=T,$r!==null&&(eo?(l=$r,g=g.stateNode,l.nodeType===8?l.parentNode.removeChild(g):l.removeChild(g)):$r.removeChild(g.stateNode));break;case 18:$r!==null&&(eo?(l=$r,g=g.stateNode,l.nodeType===8?Tg(l.parentNode,g):l.nodeType===1&&Tg(l,g),kn(l)):Tg($r,g.stateNode));break;case 4:x=$r,T=eo,$r=g.stateNode.containerInfo,eo=!0,Lo(l,u,g),$r=x,eo=T;break;case 0:case 11:case 14:case 15:if(!Xn&&(x=g.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){T=x=x.next;do{var R=T,L=R.destroy;R=R.tag,L!==void 0&&((R&2)!==0||(R&4)!==0)&&Xd(g,u,L),T=T.next}while(T!==x)}Lo(l,u,g);break;case 1:if(!Xn&&(mu(g,u),x=g.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=g.memoizedProps,x.state=g.memoizedState,x.componentWillUnmount()}catch(z){nr(g,u,z)}Lo(l,u,g);break;case 21:Lo(l,u,g);break;case 22:g.mode&1?(Xn=(x=Xn)||g.memoizedState!==null,Lo(l,u,g),Xn=x):Lo(l,u,g);break;default:Lo(l,u,g)}}function gu(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var g=l.stateNode;g===null&&(g=l.stateNode=new Ai),u.forEach(function(x){var T=mC.bind(null,l,x);g.has(x)||(g.add(x),x.then(T,T))})}}function es(l,u){var g=u.deletions;if(g!==null)for(var x=0;x<g.length;x++){var T=g[x];try{var R=l,L=u,z=L;e:for(;z!==null;){switch(z.tag){case 5:$r=z.stateNode,eo=!1;break e;case 3:$r=z.stateNode.containerInfo,eo=!0;break e;case 4:$r=z.stateNode.containerInfo,eo=!0;break e}z=z.return}if($r===null)throw Error(n(160));rv(R,L,T),$r=null,eo=!1;var Z=T.alternate;Z!==null&&(Z.return=null),T.return=null}catch(Ce){nr(T,u,Ce)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)iv(u,l),u=u.sibling}function iv(l,u){var g=l.alternate,x=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(es(u,l),to(l),x&4){try{da(3,l,l.return),Zd(3,l)}catch(ht){nr(l,l.return,ht)}try{da(5,l,l.return)}catch(ht){nr(l,l.return,ht)}}break;case 1:es(u,l),to(l),x&512&&g!==null&&mu(g,g.return);break;case 5:if(es(u,l),to(l),x&512&&g!==null&&mu(g,g.return),l.flags&32){var T=l.stateNode;try{Ut(T,"")}catch(ht){nr(l,l.return,ht)}}if(x&4&&(T=l.stateNode,T!=null)){var R=l.memoizedProps,L=g!==null?g.memoizedProps:R,z=l.type,Z=l.updateQueue;if(l.updateQueue=null,Z!==null)try{z==="input"&&R.type==="radio"&&R.name!=null&&er(T,R),sr(z,L);var Ce=sr(z,R);for(L=0;L<Z.length;L+=2){var Fe=Z[L],ze=Z[L+1];Fe==="style"?It(T,ze):Fe==="dangerouslySetInnerHTML"?We(T,ze):Fe==="children"?Ut(T,ze):M(T,Fe,ze,Ce)}switch(z){case"input":dn(T,R);break;case"textarea":Ge(T,R);break;case"select":var je=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!R.multiple;var rt=R.value;rt!=null?ce(T,!!R.multiple,rt,!1):je!==!!R.multiple&&(R.defaultValue!=null?ce(T,!!R.multiple,R.defaultValue,!0):ce(T,!!R.multiple,R.multiple?[]:"",!1))}T[qa]=R}catch(ht){nr(l,l.return,ht)}}break;case 6:if(es(u,l),to(l),x&4){if(l.stateNode===null)throw Error(n(162));T=l.stateNode,R=l.memoizedProps;try{T.nodeValue=R}catch(ht){nr(l,l.return,ht)}}break;case 3:if(es(u,l),to(l),x&4&&g!==null&&g.memoizedState.isDehydrated)try{kn(u.containerInfo)}catch(ht){nr(l,l.return,ht)}break;case 4:es(u,l),to(l);break;case 13:es(u,l),to(l),T=l.child,T.flags&8192&&(R=T.memoizedState!==null,T.stateNode.isHidden=R,!R||T.alternate!==null&&T.alternate.memoizedState!==null||(av=On())),x&4&&gu(l);break;case 22:if(Fe=g!==null&&g.memoizedState!==null,l.mode&1?(Xn=(Ce=Xn)||Fe,es(u,l),Xn=Ce):es(u,l),to(l),x&8192){if(Ce=l.memoizedState!==null,(l.stateNode.isHidden=Ce)&&!Fe&&(l.mode&1)!==0)for(ot=l,Fe=l.child;Fe!==null;){for(ze=ot=Fe;ot!==null;){switch(je=ot,rt=je.child,je.tag){case 0:case 11:case 14:case 15:da(4,je,je.return);break;case 1:mu(je,je.return);var dt=je.stateNode;if(typeof dt.componentWillUnmount=="function"){x=je,g=je.return;try{u=x,dt.props=u.memoizedProps,dt.state=u.memoizedState,dt.componentWillUnmount()}catch(ht){nr(x,g,ht)}}break;case 5:mu(je,je.return);break;case 22:if(je.memoizedState!==null){el(ze);continue}}rt!==null?(rt.return=je,ot=rt):el(ze)}Fe=Fe.sibling}e:for(Fe=null,ze=l;;){if(ze.tag===5){if(Fe===null){Fe=ze;try{T=ze.stateNode,Ce?(R=T.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none"):(z=ze.stateNode,Z=ze.memoizedProps.style,L=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,z.style.display=Hn("display",L))}catch(ht){nr(l,l.return,ht)}}}else if(ze.tag===6){if(Fe===null)try{ze.stateNode.nodeValue=Ce?"":ze.memoizedProps}catch(ht){nr(l,l.return,ht)}}else if((ze.tag!==22&&ze.tag!==23||ze.memoizedState===null||ze===l)&&ze.child!==null){ze.child.return=ze,ze=ze.child;continue}if(ze===l)break e;for(;ze.sibling===null;){if(ze.return===null||ze.return===l)break e;Fe===ze&&(Fe=null),ze=ze.return}Fe===ze&&(Fe=null),ze.sibling.return=ze.return,ze=ze.sibling}}break;case 19:es(u,l),to(l),x&4&&gu(l);break;case 21:break;default:es(u,l),to(l)}}function to(l){var u=l.flags;if(u&2){try{e:{for(var g=l.return;g!==null;){if(db(g)){var x=g;break e}g=g.return}throw Error(n(160))}switch(x.tag){case 5:var T=x.stateNode;x.flags&32&&(Ut(T,""),x.flags&=-33);var R=fb(l);sp(l,R,T);break;case 3:case 4:var L=x.stateNode.containerInfo,z=fb(l);nv(l,z,L);break;default:throw Error(n(161))}}catch(Z){nr(l,l.return,Z)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function op(l,u,g){ot=l,sv(l)}function sv(l,u,g){for(var x=(l.mode&1)!==0;ot!==null;){var T=ot,R=T.child;if(T.tag===22&&x){var L=T.memoizedState!==null||rp;if(!L){var z=T.alternate,Z=z!==null&&z.memoizedState!==null||Xn;z=rp;var Ce=Xn;if(rp=L,(Xn=Z)&&!Ce)for(ot=T;ot!==null;)L=ot,Z=L.child,L.tag===22&&L.memoizedState!==null?hb(T):Z!==null?(Z.return=L,ot=Z):hb(T);for(;R!==null;)ot=R,sv(R),R=R.sibling;ot=T,rp=z,Xn=Ce}no(l)}else(T.subtreeFlags&8772)!==0&&R!==null?(R.return=T,ot=R):no(l)}}function no(l){for(;ot!==null;){var u=ot;if((u.flags&8772)!==0){var g=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:Xn||Zd(5,u);break;case 1:var x=u.stateNode;if(u.flags&4&&!Xn)if(g===null)x.componentDidMount();else{var T=u.elementType===u.type?g.memoizedProps:Cs(u.type,g.memoizedProps);x.componentDidUpdate(T,g.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var R=u.updateQueue;R!==null&&Ig(u,R,x);break;case 3:var L=u.updateQueue;if(L!==null){if(g=null,u.child!==null)switch(u.child.tag){case 5:g=u.child.stateNode;break;case 1:g=u.child.stateNode}Ig(u,L,g)}break;case 5:var z=u.stateNode;if(g===null&&u.flags&4){g=z;var Z=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&g.focus();break;case"img":Z.src&&(g.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var Ce=u.alternate;if(Ce!==null){var Fe=Ce.memoizedState;if(Fe!==null){var ze=Fe.dehydrated;ze!==null&&kn(ze)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Xn||u.flags&512&&ip(u)}catch(je){nr(u,u.return,je)}}if(u===l){ot=null;break}if(g=u.sibling,g!==null){g.return=u.return,ot=g;break}ot=u.return}}function el(l){for(;ot!==null;){var u=ot;if(u===l){ot=null;break}var g=u.sibling;if(g!==null){g.return=u.return,ot=g;break}ot=u.return}}function hb(l){for(;ot!==null;){var u=ot;try{switch(u.tag){case 0:case 11:case 15:var g=u.return;try{Zd(4,u)}catch(Z){nr(u,g,Z)}break;case 1:var x=u.stateNode;if(typeof x.componentDidMount=="function"){var T=u.return;try{x.componentDidMount()}catch(Z){nr(u,T,Z)}}var R=u.return;try{ip(u)}catch(Z){nr(u,R,Z)}break;case 5:var L=u.return;try{ip(u)}catch(Z){nr(u,L,Z)}}}catch(Z){nr(u,u.return,Z)}if(u===l){ot=null;break}var z=u.sibling;if(z!==null){z.return=u.return,ot=z;break}ot=u.return}}var pb=Math.ceil,ap=I.ReactCurrentDispatcher,ov=I.ReactCurrentOwner,ks=I.ReactCurrentBatchConfig,pn=0,Wr=null,wr=null,ri=0,ts=0,vu=ji(0),Mr=0,ef=null,tl=0,tf=0,lp=0,nf=null,zi=null,av=0,nc=1/0,fa=null,cp=!1,lv=null,nl=null,up=!1,rl=null,Ii=0,rf=0,cv=null,dp=-1,sf=0;function Ni(){return(pn&6)!==0?On():dp!==-1?dp:dp=On()}function il(l){return(l.mode&1)===0?1:(pn&2)!==0&&ri!==0?ri&-ri:K0.transition!==null?(sf===0&&(sf=rg()),sf):(l=wn,l!==0||(l=window.event,l=l===void 0?16:b0(l.type)),l)}function ro(l,u,g,x){if(50<rf)throw rf=0,cv=null,Error(n(185));yd(l,g,x),((pn&2)===0||l!==Wr)&&(l===Wr&&((pn&2)===0&&(tf|=g),Mr===4&&sl(l,ri)),$i(l,x),g===1&&pn===0&&(u.mode&1)===0&&(nc=On()+500,Nh&&Ga()))}function $i(l,u){var g=l.callbackNode;US(l,u);var x=jl(l,l===Wr?ri:0);if(x===0)g!==null&&Da(g),l.callbackNode=null,l.callbackPriority=0;else if(u=x&-x,l.callbackPriority!==u){if(g!=null&&Da(g),u===1)l.tag===0?Hl(mb.bind(null,l)):W0(mb.bind(null,l)),Rh(function(){(pn&6)===0&&Ga()}),g=null;else{switch(Fl(x)){case 1:g=Gs;break;case 4:g=Ll;break;case 16:g=wo;break;case 536870912:g=yr;break;default:g=wo}g=Sb(g,fp.bind(null,l))}l.callbackPriority=u,l.callbackNode=g}}function fp(l,u){if(dp=-1,sf=0,(pn&6)!==0)throw Error(n(327));var g=l.callbackNode;if(yu()&&l.callbackNode!==g)return null;var x=jl(l,l===Wr?ri:0);if(x===0)return null;if((x&30)!==0||(x&l.expiredLanes)!==0||u)u=hp(l,x);else{u=x;var T=pn;pn|=2;var R=vb();(Wr!==l||ri!==u)&&(fa=null,nc=On()+500,ic(l,u));do try{dC();break}catch(z){gb(l,z)}while(!0);ia(),ap.current=R,pn=T,wr!==null?u=0:(Wr=null,ri=0,u=Mr)}if(u!==0){if(u===2&&(T=sh(l),T!==0&&(x=T,u=uv(l,T))),u===1)throw g=ef,ic(l,0),sl(l,x),$i(l,On()),g;if(u===6)sl(l,x);else{if(T=l.current.alternate,(x&30)===0&&!cC(T)&&(u=hp(l,x),u===2&&(R=sh(l),R!==0&&(x=R,u=uv(l,R))),u===1))throw g=ef,ic(l,0),sl(l,x),$i(l,On()),g;switch(l.finishedWork=T,l.finishedLanes=x,u){case 0:case 1:throw Error(n(345));case 2:sc(l,zi,fa);break;case 3:if(sl(l,x),(x&130023424)===x&&(u=av+500-On(),10<u)){if(jl(l,0)!==0)break;if(T=l.suspendedLanes,(T&x)!==x){Ni(),l.pingedLanes|=l.suspendedLanes&T;break}l.timeoutHandle=Wa(sc.bind(null,l,zi,fa),u);break}sc(l,zi,fa);break;case 4:if(sl(l,x),(x&4194240)===x)break;for(u=l.eventTimes,T=-1;0<x;){var L=31-di(x);R=1<<L,L=u[L],L>T&&(T=L),x&=~R}if(x=T,x=On()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*pb(x/1960))-x,10<x){l.timeoutHandle=Wa(sc.bind(null,l,zi,fa),x);break}sc(l,zi,fa);break;case 5:sc(l,zi,fa);break;default:throw Error(n(329))}}}return $i(l,On()),l.callbackNode===g?fp.bind(null,l):null}function uv(l,u){var g=nf;return l.current.memoizedState.isDehydrated&&(ic(l,u).flags|=256),l=hp(l,u),l!==2&&(u=zi,zi=g,u!==null&&dv(u)),l}function dv(l){zi===null?zi=l:zi.push.apply(zi,l)}function cC(l){for(var u=l;;){if(u.flags&16384){var g=u.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var x=0;x<g.length;x++){var T=g[x],R=T.getSnapshot;T=T.value;try{if(!xe(R(),T))return!1}catch{return!1}}}if(g=u.child,u.subtreeFlags&16384&&g!==null)g.return=u,u=g;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function sl(l,u){for(u&=~lp,u&=~tf,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var g=31-di(u),x=1<<g;l[g]=-1,u&=~x}}function mb(l){if((pn&6)!==0)throw Error(n(327));yu();var u=jl(l,0);if((u&1)===0)return $i(l,On()),null;var g=hp(l,u);if(l.tag!==0&&g===2){var x=sh(l);x!==0&&(u=x,g=uv(l,x))}if(g===1)throw g=ef,ic(l,0),sl(l,u),$i(l,On()),g;if(g===6)throw Error(n(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,sc(l,zi,fa),$i(l,On()),null}function fv(l,u){var g=pn;pn|=1;try{return l(u)}finally{pn=g,pn===0&&(nc=On()+500,Nh&&Ga())}}function rc(l){rl!==null&&rl.tag===0&&(pn&6)===0&&yu();var u=pn;pn|=1;var g=ks.transition,x=wn;try{if(ks.transition=null,wn=1,l)return l()}finally{wn=x,ks.transition=g,pn=u,(pn&6)===0&&Ga()}}function hv(){ts=vu.current,Kn(vu)}function ic(l,u){l.finishedWork=null,l.finishedLanes=0;var g=l.timeoutHandle;if(g!==-1&&(l.timeoutHandle=-1,Md(g)),wr!==null)for(g=wr.return;g!==null;){var x=g;switch(Gl(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Ih();break;case 3:Ja(),Kn(Fi),Kn(mi),zh();break;case 5:Bh(x);break;case 4:Ja();break;case 13:Kn(Jn);break;case 19:Kn(Jn);break;case 10:jh(x.type._context);break;case 22:case 23:hv()}g=g.return}if(Wr=l,wr=l=io(l.current,null),ri=ts=u,Mr=0,ef=null,lp=tf=tl=0,zi=nf=null,Ql!==null){for(u=0;u<Ql.length;u++)if(g=Ql[u],x=g.interleaved,x!==null){g.interleaved=null;var T=x.next,R=g.pending;if(R!==null){var L=R.next;R.next=T,x.next=L}g.pending=x}Ql=null}return l}function gb(l,u){do{var g=wr;try{if(ia(),Vd.current=Gh,au){for(var x=tr.memoizedState;x!==null;){var T=x.queue;T!==null&&(T.pending=null),x=x.next}au=!1}if(Xa=0,Nr=fr=tr=null,Bd=!1,Xl=0,ov.current=null,g===null||g.return===null){Mr=1,ef=u,wr=null;break}e:{var R=l,L=g.return,z=g,Z=u;if(u=ri,z.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var Ce=Z,Fe=z,ze=Fe.tag;if((Fe.mode&1)===0&&(ze===0||ze===11||ze===15)){var je=Fe.alternate;je?(Fe.updateQueue=je.updateQueue,Fe.memoizedState=je.memoizedState,Fe.lanes=je.lanes):(Fe.updateQueue=null,Fe.memoizedState=null)}var rt=ib(L);if(rt!==null){rt.flags&=-257,Kg(rt,L,z,R,u),rt.mode&1&&qd(R,Ce,u),u=rt,Z=Ce;var dt=u.updateQueue;if(dt===null){var ht=new Set;ht.add(Z),u.updateQueue=ht}else dt.add(Z);break e}else{if((u&1)===0){qd(R,Ce,u),pv();break e}Z=Error(n(426))}}else if(Gn&&z.mode&1){var hr=ib(L);if(hr!==null){(hr.flags&65536)===0&&(hr.flags|=256),Kg(hr,L,z,R,u),Ao(tc(Z,z));break e}}R=Z=tc(Z,z),Mr!==4&&(Mr=2),nf===null?nf=[R]:nf.push(R),R=L;do{switch(R.tag){case 3:R.flags|=65536,u&=-u,R.lanes|=u;var he=Hd(R,Z,u);Q0(R,he);break e;case 1:z=Z;var ne=R.type,ge=R.stateNode;if((R.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(nl===null||!nl.has(ge)))){R.flags|=65536,u&=-u,R.lanes|=u;var Ke=Zh(R,z,u);Q0(R,Ke);break e}}R=R.return}while(R!==null)}bb(g)}catch(mt){u=mt,wr===g&&g!==null&&(wr=g=g.return);continue}break}while(!0)}function vb(){var l=ap.current;return ap.current=Gh,l===null?Gh:l}function pv(){(Mr===0||Mr===3||Mr===2)&&(Mr=4),Wr===null||(tl&268435455)===0&&(tf&268435455)===0||sl(Wr,ri)}function hp(l,u){var g=pn;pn|=2;var x=vb();(Wr!==l||ri!==u)&&(fa=null,ic(l,u));do try{uC();break}catch(T){gb(l,T)}while(!0);if(ia(),pn=g,ap.current=x,wr!==null)throw Error(n(261));return Wr=null,ri=0,Mr}function uC(){for(;wr!==null;)yb(wr)}function dC(){for(;wr!==null&&!Gi();)yb(wr)}function yb(l){var u=wb(l.alternate,l,ts);l.memoizedProps=l.pendingProps,u===null?bb(l):wr=u,ov.current=null}function bb(l){var u=l;do{var g=u.alternate;if(l=u.return,(u.flags&32768)===0){if(g=oC(g,u,ts),g!==null){wr=g;return}}else{if(g=aC(g,u),g!==null){g.flags&=32767,wr=g;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{Mr=6,wr=null;return}}if(u=u.sibling,u!==null){wr=u;return}wr=u=l}while(u!==null);Mr===0&&(Mr=5)}function sc(l,u,g){var x=wn,T=ks.transition;try{ks.transition=null,wn=1,fC(l,u,g,x)}finally{ks.transition=T,wn=x}return null}function fC(l,u,g,x){do yu();while(rl!==null);if((pn&6)!==0)throw Error(n(327));g=l.finishedWork;var T=l.finishedLanes;if(g===null)return null;if(l.finishedWork=null,l.finishedLanes=0,g===l.current)throw Error(n(177));l.callbackNode=null,l.callbackPriority=0;var R=g.lanes|g.childLanes;if(p0(l,R),l===Wr&&(wr=Wr=null,ri=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||up||(up=!0,Sb(wo,function(){return yu(),null})),R=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||R){R=ks.transition,ks.transition=null;var L=wn;wn=1;var z=pn;pn|=4,ov.current=null,lC(l,g),iv(g,l),nC(Wl),ch=!!Id,Wl=Id=null,l.current=g,op(g),hs(),pn=z,wn=L,ks.transition=R}else l.current=g;if(up&&(up=!1,rl=l,Ii=T),R=l.pendingLanes,R===0&&(nl=null),dr(g.stateNode),$i(l,On()),u!==null)for(x=l.onRecoverableError,g=0;g<u.length;g++)T=u[g],x(T.value,{componentStack:T.stack,digest:T.digest});if(cp)throw cp=!1,l=lv,lv=null,l;return(Ii&1)!==0&&l.tag!==0&&yu(),R=l.pendingLanes,(R&1)!==0?l===cv?rf++:(rf=0,cv=l):rf=0,Ga(),null}function yu(){if(rl!==null){var l=Fl(Ii),u=ks.transition,g=wn;try{if(ks.transition=null,wn=16>l?16:l,rl===null)var x=!1;else{if(l=rl,rl=null,Ii=0,(pn&6)!==0)throw Error(n(331));var T=pn;for(pn|=4,ot=l.current;ot!==null;){var R=ot,L=R.child;if((ot.flags&16)!==0){var z=R.deletions;if(z!==null){for(var Z=0;Z<z.length;Z++){var Ce=z[Z];for(ot=Ce;ot!==null;){var Fe=ot;switch(Fe.tag){case 0:case 11:case 15:da(8,Fe,R)}var ze=Fe.child;if(ze!==null)ze.return=Fe,ot=ze;else for(;ot!==null;){Fe=ot;var je=Fe.sibling,rt=Fe.return;if(ub(Fe),Fe===Ce){ot=null;break}if(je!==null){je.return=rt,ot=je;break}ot=rt}}}var dt=R.alternate;if(dt!==null){var ht=dt.child;if(ht!==null){dt.child=null;do{var hr=ht.sibling;ht.sibling=null,ht=hr}while(ht!==null)}}ot=R}}if((R.subtreeFlags&2064)!==0&&L!==null)L.return=R,ot=L;else e:for(;ot!==null;){if(R=ot,(R.flags&2048)!==0)switch(R.tag){case 0:case 11:case 15:da(9,R,R.return)}var he=R.sibling;if(he!==null){he.return=R.return,ot=he;break e}ot=R.return}}var ne=l.current;for(ot=ne;ot!==null;){L=ot;var ge=L.child;if((L.subtreeFlags&2064)!==0&&ge!==null)ge.return=L,ot=ge;else e:for(L=ne;ot!==null;){if(z=ot,(z.flags&2048)!==0)try{switch(z.tag){case 0:case 11:case 15:Zd(9,z)}}catch(mt){nr(z,z.return,mt)}if(z===L){ot=null;break e}var Ke=z.sibling;if(Ke!==null){Ke.return=z.return,ot=Ke;break e}ot=z.return}}if(pn=T,Ga(),zr&&typeof zr.onPostCommitFiberRoot=="function")try{zr.onPostCommitFiberRoot(Ys,l)}catch{}x=!0}return x}finally{wn=g,ks.transition=u}}return!1}function pp(l,u,g){u=tc(g,u),u=Hd(l,u,1),l=ws(l,u,1),u=Ni(),l!==null&&(yd(l,1,u),$i(l,u))}function nr(l,u,g){if(l.tag===3)pp(l,l,g);else for(;u!==null;){if(u.tag===3){pp(u,l,g);break}else if(u.tag===1){var x=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(nl===null||!nl.has(x))){l=tc(g,l),l=Zh(u,l,1),u=ws(u,l,1),l=Ni(),u!==null&&(yd(u,1,l),$i(u,l));break}}u=u.return}}function hC(l,u,g){var x=l.pingCache;x!==null&&x.delete(u),u=Ni(),l.pingedLanes|=l.suspendedLanes&g,Wr===l&&(ri&g)===g&&(Mr===4||Mr===3&&(ri&130023424)===ri&&500>On()-av?ic(l,0):lp|=g),$i(l,u)}function xb(l,u){u===0&&((l.mode&1)===0?u=1:(u=ih,ih<<=1,(ih&130023424)===0&&(ih=4194304)));var g=Ni();l=sa(l,u),l!==null&&(yd(l,u,g),$i(l,g))}function pC(l){var u=l.memoizedState,g=0;u!==null&&(g=u.retryLane),xb(l,g)}function mC(l,u){var g=0;switch(l.tag){case 13:var x=l.stateNode,T=l.memoizedState;T!==null&&(g=T.retryLane);break;case 19:x=l.stateNode;break;default:throw Error(n(314))}x!==null&&x.delete(u),xb(l,g)}var wb;wb=function(l,u,g){if(l!==null)if(l.memoizedProps!==u.pendingProps||Fi.current)Pi=!0;else{if((l.lanes&g)===0&&(u.flags&128)===0)return Pi=!1,ab(l,u,g);Pi=(l.flags&131072)!==0}else Pi=!1,Gn&&(u.flags&1048576)!==0&&H0(u,Oh,u.index);switch(u.lanes=0,u.tag){case 2:var x=u.type;np(l,u),l=u.pendingProps;var T=nu(u,mi.current);Qa(u,g),T=Zl(null,u,x,l,T,g);var R=$h();return u.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Ui(x)?(R=!0,gs(u)):R=!1,u.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,Uh(u),T.updater=Jh,u.stateNode=T,T._reactInternals=u,qg(u,x,l,g),u=Zg(null,u,x,!0,R,g)):(u.tag=0,Gn&&R&&Od(u),ei(null,u,T,g),u=u.child),u;case 16:x=u.elementType;e:{switch(np(l,u),l=u.pendingProps,T=x._init,x=T(x._payload),u.type=x,T=u.tag=vC(x),l=Cs(x,l),T){case 0:u=Jg(null,u,x,l,g);break e;case 1:u=Xg(null,u,x,l,g);break e;case 11:u=sb(null,u,x,l,g);break e;case 14:u=Gg(null,u,x,Cs(x.type,l),g);break e}throw Error(n(306,x,""))}return u;case 0:return x=u.type,T=u.pendingProps,T=u.elementType===x?T:Cs(x,T),Jg(l,u,x,T,g);case 1:return x=u.type,T=u.pendingProps,T=u.elementType===x?T:Cs(x,T),Xg(l,u,x,T,g);case 3:e:{if(ob(u),l===null)throw Error(n(387));x=u.pendingProps,R=u.memoizedState,T=R.element,Y0(l,u),su(u,x,null,g);var L=u.memoizedState;if(x=L.element,R.isDehydrated)if(R={element:x,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},u.updateQueue.baseState=R,u.memoizedState=R,u.flags&256){T=tc(Error(n(423)),u),u=Do(l,u,x,g,T);break e}else if(x!==T){T=tc(Error(n(424)),u),u=Do(l,u,x,g,T);break e}else for(Xi=Ha(u.stateNode.containerInfo.firstChild),vi=u,Gn=!0,Js=null,g=Lh(u,null,x,g),u.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Po(),x===T){u=Zs(l,u,g);break e}ei(l,u,x,g)}u=u.child}return u;case 5:return Mg(u),l===null&&Vi(u),x=u.type,T=u.pendingProps,R=l!==null?l.memoizedProps:null,L=T.children,Nd(x,T)?L=null:R!==null&&Nd(x,R)&&(u.flags|=32),Qg(l,u),ei(l,u,L,g),u.child;case 6:return l===null&&Vi(u),null;case 13:return tp(l,u,g);case 4:return Ng(u,u.stateNode.containerInfo),x=u.pendingProps,l===null?u.child=or(u,null,x,g):ei(l,u,x,g),u.child;case 11:return x=u.type,T=u.pendingProps,T=u.elementType===x?T:Cs(x,T),sb(l,u,x,T,g);case 7:return ei(l,u,u.pendingProps,g),u.child;case 8:return ei(l,u,u.pendingProps.children,g),u.child;case 12:return ei(l,u,u.pendingProps.children,g),u.child;case 10:e:{if(x=u.type._context,T=u.pendingProps,R=u.memoizedProps,L=T.value,$n(jd,x._currentValue),x._currentValue=L,R!==null)if(xe(R.value,L)){if(R.children===T.children&&!Fi.current){u=Zs(l,u,g);break e}}else for(R=u.child,R!==null&&(R.return=u);R!==null;){var z=R.dependencies;if(z!==null){L=R.child;for(var Z=z.firstContext;Z!==null;){if(Z.context===x){if(R.tag===1){Z=oa(-1,g&-g),Z.tag=2;var Ce=R.updateQueue;if(Ce!==null){Ce=Ce.shared;var Fe=Ce.pending;Fe===null?Z.next=Z:(Z.next=Fe.next,Fe.next=Z),Ce.pending=Z}}R.lanes|=g,Z=R.alternate,Z!==null&&(Z.lanes|=g),Zr(R.return,g,u),z.lanes|=g;break}Z=Z.next}}else if(R.tag===10)L=R.type===u.type?null:R.child;else if(R.tag===18){if(L=R.return,L===null)throw Error(n(341));L.lanes|=g,z=L.alternate,z!==null&&(z.lanes|=g),Zr(L,g,u),L=R.sibling}else L=R.child;if(L!==null)L.return=R;else for(L=R;L!==null;){if(L===u){L=null;break}if(R=L.sibling,R!==null){R.return=L.return,L=R;break}L=L.return}R=L}ei(l,u,T.children,g),u=u.child}return u;case 9:return T=u.type,x=u.pendingProps.children,Qa(u,g),T=bs(T),x=x(T),u.flags|=1,ei(l,u,x,g),u.child;case 14:return x=u.type,T=Cs(x,u.pendingProps),T=Cs(x.type,T),Gg(l,u,x,T,g);case 15:return Oo(l,u,u.type,u.pendingProps,g);case 17:return x=u.type,T=u.pendingProps,T=u.elementType===x?T:Cs(x,T),np(l,u),u.tag=1,Ui(x)?(l=!0,gs(u)):l=!1,Qa(u,g),ec(u,x,T),qg(u,x,T,g),Zg(null,u,x,!0,l,g);case 19:return Za(l,u,g);case 22:return Yg(l,u,g)}throw Error(n(156,u.tag))};function Sb(l,u){return xo(l,u)}function gC(l,u,g,x){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ts(l,u,g,x){return new gC(l,u,g,x)}function mp(l){return l=l.prototype,!(!l||!l.isReactComponent)}function vC(l){if(typeof l=="function")return mp(l)?1:0;if(l!=null){if(l=l.$$typeof,l===Y)return 11;if(l===Ee)return 14}return 2}function io(l,u){var g=l.alternate;return g===null?(g=Ts(l.tag,u,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=u,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&14680064,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,u=l.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g}function gp(l,u,g,x,T,R){var L=2;if(x=l,typeof l=="function")mp(l)&&(L=1);else if(typeof l=="string")L=5;else e:switch(l){case j:return oc(g.children,T,R,u);case V:L=8,T|=8;break;case $:return l=Ts(12,g,u,T|2),l.elementType=$,l.lanes=R,l;case pe:return l=Ts(13,g,u,T),l.elementType=pe,l.lanes=R,l;case fe:return l=Ts(19,g,u,T),l.elementType=fe,l.lanes=R,l;case Se:return vp(g,T,R,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case W:L=10;break e;case J:L=9;break e;case Y:L=11;break e;case Ee:L=14;break e;case le:L=16,x=null;break e}throw Error(n(130,l==null?l:typeof l,""))}return u=Ts(L,g,u,T),u.elementType=l,u.type=x,u.lanes=R,u}function oc(l,u,g,x){return l=Ts(7,l,x,u),l.lanes=g,l}function vp(l,u,g,x){return l=Ts(22,l,x,u),l.elementType=Se,l.lanes=g,l.stateNode={isHidden:!1},l}function mv(l,u,g){return l=Ts(6,l,null,u),l.lanes=g,l}function gv(l,u,g){return u=Ts(4,l.children!==null?l.children:[],l.key,u),u.lanes=g,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function yC(l,u,g,x,T){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vd(0),this.expirationTimes=vd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vd(0),this.identifierPrefix=x,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function vv(l,u,g,x,T,R,L,z,Z){return l=new yC(l,u,g,z,Z),u===1?(u=1,R===!0&&(u|=8)):u=0,R=Ts(3,null,null,u),l.current=R,R.stateNode=l,R.memoizedState={element:x,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uh(R),l}function bC(l,u,g){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:x==null?null:""+x,children:l,containerInfo:u,implementation:g}}function Cb(l){if(!l)return Ka;l=l._reactInternals;e:{if(At(l)!==l||l.tag!==1)throw Error(n(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Ui(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(n(171))}if(l.tag===1){var g=l.type;if(Ui(g))return z0(l,g,u)}return u}function kb(l,u,g,x,T,R,L,z,Z){return l=vv(g,x,!0,l,T,R,L,z,Z),l.context=Cb(null),g=l.current,x=Ni(),T=il(g),R=oa(x,T),R.callback=u??null,ws(g,R,T),l.current.lanes=T,yd(l,T,x),$i(l,x),l}function yp(l,u,g,x){var T=u.current,R=Ni(),L=il(T);return g=Cb(g),u.context===null?u.context=g:u.pendingContext=g,u=oa(R,L),u.payload={element:l},x=x===void 0?null:x,x!==null&&(u.callback=x),l=ws(T,u,L),l!==null&&(ro(l,T,L,R),Vh(l,T,L)),L}function bp(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function Tb(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<u?g:u}}function yv(l,u){Tb(l,u),(l=l.alternate)&&Tb(l,u)}function xC(){return null}var Eb=typeof reportError=="function"?reportError:function(l){console.error(l)};function xp(l){this._internalRoot=l}of.prototype.render=xp.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));yp(l,u,null,null)},of.prototype.unmount=xp.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;rc(function(){yp(null,l,null,null)}),u[Ji]=null}};function of(l){this._internalRoot=l}of.prototype.unstable_scheduleHydration=function(l){if(l){var u=sg();l={blockedOn:null,target:l,priority:u};for(var g=0;g<Ua.length&&u!==0&&u<Ua[g].priority;g++);Ua.splice(g,0,l),g===0&&v0(l)}};function bv(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function wp(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function _b(){}function wC(l,u,g,x,T){if(T){if(typeof x=="function"){var R=x;x=function(){var Ce=bp(L);R.call(Ce)}}var L=kb(u,x,l,0,null,!1,!1,"",_b);return l._reactRootContainer=L,l[Ji]=L.current,$a(l.nodeType===8?l.parentNode:l),rc(),L}for(;T=l.lastChild;)l.removeChild(T);if(typeof x=="function"){var z=x;x=function(){var Ce=bp(Z);z.call(Ce)}}var Z=vv(l,0,!1,null,null,!1,!1,"",_b);return l._reactRootContainer=Z,l[Ji]=Z.current,$a(l.nodeType===8?l.parentNode:l),rc(function(){yp(u,Z,g,x)}),Z}function ac(l,u,g,x,T){var R=g._reactRootContainer;if(R){var L=R;if(typeof T=="function"){var z=T;T=function(){var Z=bp(L);z.call(Z)}}yp(u,L,l,T)}else L=wC(g,u,l,T,x);return bp(L)}ig=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var g=Fc(u.pendingLanes);g!==0&&(bd(u,g|1),$i(u,On()),(pn&6)===0&&(nc=On()+500,Ga()))}break;case 13:rc(function(){var x=sa(l,1);if(x!==null){var T=Ni();ro(x,l,1,T)}}),yv(l,1)}},oh=function(l){if(l.tag===13){var u=sa(l,134217728);if(u!==null){var g=Ni();ro(u,l,134217728,g)}yv(l,134217728)}},m0=function(l){if(l.tag===13){var u=il(l),g=sa(l,u);if(g!==null){var x=Ni();ro(g,l,u,x)}yv(l,u)}},sg=function(){return wn},og=function(l,u){var g=wn;try{return wn=l,u()}finally{wn=g}},Jo=function(l,u,g){switch(u){case"input":if(dn(l,g),u=g.name,g.type==="radio"&&u!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<g.length;u++){var x=g[u];if(x!==l&&x.form===l.form){var T=Ah(x);if(!T)throw Error(n(90));pt(x),dn(x,T)}}}break;case"textarea":Ge(l,g);break;case"select":u=g.value,u!=null&&ce(l,!!g.multiple,u,!1)}},Yn=fv,Ir=rc;var SC={usingClientEntryPoint:!1,Events:[pi,Wt,Ah,Dt,Vn,fv]},af={findFiberByHostInstance:To,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CC={bundleType:af.bundleType,version:af.version,rendererPackageName:af.rendererPackageName,rendererConfig:af.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=Bn(l),l===null?null:l.stateNode},findFiberByHostInstance:af.findFiberByHostInstance||xC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sp.isDisabled&&Sp.supportsFiber)try{Ys=Sp.inject(CC),zr=Sp}catch{}}return Ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SC,Ps.createPortal=function(l,u){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bv(u))throw Error(n(200));return bC(l,u,null,g)},Ps.createRoot=function(l,u){if(!bv(l))throw Error(n(299));var g=!1,x="",T=Eb;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),u=vv(l,1,!1,null,null,g,!1,x,T),l[Ji]=u.current,$a(l.nodeType===8?l.parentNode:l),new xp(u)},Ps.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=Bn(u),l=l===null?null:l.stateNode,l},Ps.flushSync=function(l){return rc(l)},Ps.hydrate=function(l,u,g){if(!wp(u))throw Error(n(200));return ac(null,l,u,!0,g)},Ps.hydrateRoot=function(l,u,g){if(!bv(l))throw Error(n(405));var x=g!=null&&g.hydratedSources||null,T=!1,R="",L=Eb;if(g!=null&&(g.unstable_strictMode===!0&&(T=!0),g.identifierPrefix!==void 0&&(R=g.identifierPrefix),g.onRecoverableError!==void 0&&(L=g.onRecoverableError)),u=kb(u,null,l,1,g??null,T,!1,R,L),l[Ji]=u.current,$a(l),x)for(l=0;l<x.length;l++)g=x[l],T=g._getVersion,T=T(g._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[g,T]:u.mutableSourceEagerHydrationData.push(g,T);return new of(u)},Ps.render=function(l,u,g){if(!wp(u))throw Error(n(200));return ac(null,l,u,!1,g)},Ps.unmountComponentAtNode=function(l){if(!wp(l))throw Error(n(40));return l._reactRootContainer?(rc(function(){ac(null,null,l,!1,function(){l._reactRootContainer=null,l[Ji]=null})}),!0):!1},Ps.unstable_batchedUpdates=fv,Ps.unstable_renderSubtreeIntoContainer=function(l,u,g,x){if(!wp(g))throw Error(n(200));if(l==null||l._reactInternals===void 0)throw Error(n(38));return ac(l,u,g,!1,x)},Ps.version="18.3.1-next-f1338f8080-20240426",Ps}var xP;function sD(){if(xP)return UC.exports;xP=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),UC.exports=a6(),UC.exports}var wP;function l6(){if(wP)return Nb;wP=1;var t=sD();return Nb.createRoot=t.createRoot,Nb.hydrateRoot=t.hydrateRoot,Nb}var c6=l6();const u6=Nw(c6);var Vm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},d6={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Du,oE,GO,f6=(GO=class{constructor(){Ct(this,Du,d6);Ct(this,oE,!1)}setTimeoutProvider(t){it(this,Du,t)}setTimeout(t,e){return X(this,Du).setTimeout(t,e)}clearTimeout(t){X(this,Du).clearTimeout(t)}setInterval(t,e){return X(this,Du).setInterval(t,e)}clearInterval(t){X(this,Du).clearInterval(t)}},Du=new WeakMap,oE=new WeakMap,GO),vf=new f6;function h6(t){setTimeout(t,0)}var Ff=typeof window>"u"||"Deno"in globalThis;function os(){}function p6(t,e){return typeof t=="function"?t(e):t}function rT(t){return typeof t=="number"&&t>=0&&t!==1/0}function oD(t,e){return Math.max(t+(e||0)-Date.now(),0)}function qu(t,e){return typeof t=="function"?t(e):t}function Wo(t,e){return typeof t=="function"?t(e):t}function SP(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==lE(o,e.options))return!1}else if(!oy(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function CP(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Uf(e.options.mutationKey)!==Uf(s))return!1}else if(!oy(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function lE(t,e){return((e==null?void 0:e.queryKeyHashFn)||Uf)(t)}function Uf(t){return JSON.stringify(t,(e,n)=>iT(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function oy(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>oy(t[n],e[n])):!1}var m6=Object.prototype.hasOwnProperty;function aD(t,e){if(t===e)return t;const n=kP(t)&&kP(e);if(!n&&!(iT(t)&&iT(e)))return e;const i=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),o=s.length,a=n?new Array(o):{};let c=0;for(let d=0;d<o;d++){const h=n?d:s[d],p=t[h],y=e[h];if(p===y){a[h]=p,(n?d<i:m6.call(t,h))&&c++;continue}if(p===null||y===null||typeof p!="object"||typeof y!="object"){a[h]=y;continue}const S=aD(p,y);a[h]=S,S===p&&c++}return i===o&&c===i?t:a}function Fx(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function kP(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function iT(t){if(!TP(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!TP(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function TP(t){return Object.prototype.toString.call(t)==="[object Object]"}function g6(t){return new Promise(e=>{vf.setTimeout(e,t)})}function sT(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?aD(t,e):e}function v6(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function y6(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var cE=Symbol();function lD(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===cE?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function cD(t,e){return typeof t=="function"?t(...e):!!t}var kf,Lu,lm,YO,b6=(YO=class extends Vm{constructor(){super();Ct(this,kf);Ct(this,Lu);Ct(this,lm);it(this,lm,e=>{if(!Ff&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){X(this,Lu)||this.setEventListener(X(this,lm))}onUnsubscribe(){var e;this.hasListeners()||((e=X(this,Lu))==null||e.call(this),it(this,Lu,void 0))}setEventListener(e){var n;it(this,lm,e),(n=X(this,Lu))==null||n.call(this),it(this,Lu,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){X(this,kf)!==e&&(it(this,kf,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof X(this,kf)=="boolean"?X(this,kf):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},kf=new WeakMap,Lu=new WeakMap,lm=new WeakMap,YO),uE=new b6;function oT(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var x6=h6;function w6(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=x6;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{s(()=>{a(...c)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var oi=w6(),cm,ju,um,QO,S6=(QO=class extends Vm{constructor(){super();Ct(this,cm,!0);Ct(this,ju);Ct(this,um);it(this,um,e=>{if(!Ff&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){X(this,ju)||this.setEventListener(X(this,um))}onUnsubscribe(){var e;this.hasListeners()||((e=X(this,ju))==null||e.call(this),it(this,ju,void 0))}setEventListener(e){var n;it(this,um,e),(n=X(this,ju))==null||n.call(this),it(this,ju,e(this.setOnline.bind(this)))}setOnline(e){X(this,cm)!==e&&(it(this,cm,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return X(this,cm)}},cm=new WeakMap,ju=new WeakMap,um=new WeakMap,QO),Ux=new S6;function C6(t){return Math.min(1e3*2**t,3e4)}function uD(t){return(t??"online")==="online"?Ux.isOnline():!0}var aT=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function dD(t){let e=!1,n=0,r;const i=oT(),s=()=>i.status!=="pending",o=C=>{var E;if(!s()){const _=new aT(C);y(_),(E=t.onCancel)==null||E.call(t,_)}},a=()=>{e=!0},c=()=>{e=!1},d=()=>uE.isFocused()&&(t.networkMode==="always"||Ux.isOnline())&&t.canRun(),h=()=>uD(t.networkMode)&&t.canRun(),p=C=>{s()||(r==null||r(),i.resolve(C))},y=C=>{s()||(r==null||r(),i.reject(C))},S=()=>new Promise(C=>{var E;r=_=>{(s()||d())&&C(_)},(E=t.onPause)==null||E.call(t)}).then(()=>{var C;r=void 0,s()||(C=t.onContinue)==null||C.call(t)}),k=()=>{if(s())return;let C;const E=n===0?t.initialPromise:void 0;try{C=E??t.fn()}catch(_){C=Promise.reject(_)}Promise.resolve(C).then(p).catch(_=>{var O;if(s())return;const A=t.retry??(Ff?0:3),M=t.retryDelay??C6,I=typeof M=="function"?M(n,_):M,N=A===!0||typeof A=="number"&&n<A||typeof A=="function"&&A(n,_);if(e||!N){y(_);return}n++,(O=t.onFail)==null||O.call(t,n,_),g6(I).then(()=>d()?void 0:S()).then(()=>{e?y(_):k()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:c,canStart:h,start:()=>(h()?k():S().then(k),i)}}var Tf,JO,fD=(JO=class{constructor(){Ct(this,Tf)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),rT(this.gcTime)&&it(this,Tf,vf.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ff?1/0:5*60*1e3))}clearGcTimeout(){X(this,Tf)&&(vf.clearTimeout(X(this,Tf)),it(this,Tf,void 0))}},Tf=new WeakMap,JO),Ef,dm,zo,_f,wi,My,Rf,ya,hc,XO,k6=(XO=class extends fD{constructor(e){super();Ct(this,ya);Ct(this,Ef);Ct(this,dm);Ct(this,zo);Ct(this,_f);Ct(this,wi);Ct(this,My);Ct(this,Rf);it(this,Rf,!1),it(this,My,e.defaultOptions),this.setOptions(e.options),this.observers=[],it(this,_f,e.client),it(this,zo,X(this,_f).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,it(this,Ef,EP(this.options)),this.state=e.state??X(this,Ef),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=X(this,wi))==null?void 0:e.promise}setOptions(e){if(this.options={...X(this,My),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=EP(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),it(this,Ef,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&X(this,zo).remove(this)}setData(e,n){const r=sT(this.state.data,e,this.options);return Xt(this,ya,hc).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Xt(this,ya,hc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=X(this,wi))==null?void 0:r.promise;return(i=X(this,wi))==null||i.cancel(e),n?n.then(os).catch(os):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(X(this,Ef))}isActive(){return this.observers.some(e=>Wo(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===cE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>qu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!oD(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=X(this,wi))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=X(this,wi))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),X(this,zo).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(X(this,wi)&&(X(this,Rf)?X(this,wi).cancel({revert:!0}):X(this,wi).cancelRetry()),this.scheduleGc()),X(this,zo).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Xt(this,ya,hc).call(this,{type:"invalidate"})}async fetch(e,n){var c,d,h,p,y,S,k,C,E,_,A,M;if(this.state.fetchStatus!=="idle"&&((c=X(this,wi))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(X(this,wi))return X(this,wi).continueRetry(),X(this,wi).promise}if(e&&this.setOptions(e),!this.options.queryFn){const I=this.observers.find(N=>N.options.queryFn);I&&this.setOptions(I.options)}const r=new AbortController,i=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(it(this,Rf,!0),r.signal)})},s=()=>{const I=lD(this.options,n),O=(()=>{const j={client:X(this,_f),queryKey:this.queryKey,meta:this.meta};return i(j),j})();return it(this,Rf,!1),this.options.persister?this.options.persister(I,O,this):I(O)},a=(()=>{const I={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:X(this,_f),state:this.state,fetchFn:s};return i(I),I})();(d=this.options.behavior)==null||d.onFetch(a,this),it(this,dm,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=a.fetchOptions)==null?void 0:h.meta))&&Xt(this,ya,hc).call(this,{type:"fetch",meta:(p=a.fetchOptions)==null?void 0:p.meta}),it(this,wi,dD({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:I=>{I instanceof aT&&I.revert&&this.setState({...X(this,dm),fetchStatus:"idle"}),r.abort()},onFail:(I,N)=>{Xt(this,ya,hc).call(this,{type:"failed",failureCount:I,error:N})},onPause:()=>{Xt(this,ya,hc).call(this,{type:"pause"})},onContinue:()=>{Xt(this,ya,hc).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const I=await X(this,wi).start();if(I===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(I),(S=(y=X(this,zo).config).onSuccess)==null||S.call(y,I,this),(C=(k=X(this,zo).config).onSettled)==null||C.call(k,I,this.state.error,this),I}catch(I){if(I instanceof aT){if(I.silent)return X(this,wi).promise;if(I.revert){if(this.state.data===void 0)throw I;return this.state.data}}throw Xt(this,ya,hc).call(this,{type:"error",error:I}),(_=(E=X(this,zo).config).onError)==null||_.call(E,I,this),(M=(A=X(this,zo).config).onSettled)==null||M.call(A,this.state.data,I,this),I}finally{this.scheduleGc()}}},Ef=new WeakMap,dm=new WeakMap,zo=new WeakMap,_f=new WeakMap,wi=new WeakMap,My=new WeakMap,Rf=new WeakMap,ya=new WeakSet,hc=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...hD(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return it(this,dm,e.manual?i:void 0),i;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),oi.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),X(this,zo).notify({query:this,type:"updated",action:e})})},XO);function hD(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:uD(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function EP(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var As,gn,Oy,rs,Pf,fm,vc,Fu,Dy,hm,pm,Af,If,Uu,mm,jn,jv,lT,cT,uT,dT,fT,hT,pT,pD,ZO,T6=(ZO=class extends Vm{constructor(e,n){super();Ct(this,jn);Ct(this,As);Ct(this,gn);Ct(this,Oy);Ct(this,rs);Ct(this,Pf);Ct(this,fm);Ct(this,vc);Ct(this,Fu);Ct(this,Dy);Ct(this,hm);Ct(this,pm);Ct(this,Af);Ct(this,If);Ct(this,Uu);Ct(this,mm,new Set);this.options=n,it(this,As,e),it(this,Fu,null),it(this,vc,oT()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(X(this,gn).addObserver(this),_P(X(this,gn),this.options)?Xt(this,jn,jv).call(this):this.updateResult(),Xt(this,jn,dT).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return mT(X(this,gn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return mT(X(this,gn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Xt(this,jn,fT).call(this),Xt(this,jn,hT).call(this),X(this,gn).removeObserver(this)}setOptions(e){const n=this.options,r=X(this,gn);if(this.options=X(this,As).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Wo(this.options.enabled,X(this,gn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Xt(this,jn,pT).call(this),X(this,gn).setOptions(this.options),n._defaulted&&!Fx(this.options,n)&&X(this,As).getQueryCache().notify({type:"observerOptionsUpdated",query:X(this,gn),observer:this});const i=this.hasListeners();i&&RP(X(this,gn),r,this.options,n)&&Xt(this,jn,jv).call(this),this.updateResult(),i&&(X(this,gn)!==r||Wo(this.options.enabled,X(this,gn))!==Wo(n.enabled,X(this,gn))||qu(this.options.staleTime,X(this,gn))!==qu(n.staleTime,X(this,gn)))&&Xt(this,jn,lT).call(this);const s=Xt(this,jn,cT).call(this);i&&(X(this,gn)!==r||Wo(this.options.enabled,X(this,gn))!==Wo(n.enabled,X(this,gn))||s!==X(this,Uu))&&Xt(this,jn,uT).call(this,s)}getOptimisticResult(e){const n=X(this,As).getQueryCache().build(X(this,As),e),r=this.createResult(n,e);return _6(this,r)&&(it(this,rs,r),it(this,fm,this.options),it(this,Pf,X(this,gn).state)),r}getCurrentResult(){return X(this,rs)}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&X(this,vc).status==="pending"&&X(this,vc).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){X(this,mm).add(e)}getCurrentQuery(){return X(this,gn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=X(this,As).defaultQueryOptions(e),r=X(this,As).getQueryCache().build(X(this,As),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Xt(this,jn,jv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),X(this,rs)))}createResult(e,n){var $;const r=X(this,gn),i=this.options,s=X(this,rs),o=X(this,Pf),a=X(this,fm),d=e!==r?e.state:X(this,Oy),{state:h}=e;let p={...h},y=!1,S;if(n._optimisticResults){const W=this.hasListeners(),J=!W&&_P(e,n),Y=W&&RP(e,r,n,i);(J||Y)&&(p={...p,...hD(h.data,e.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:k,errorUpdatedAt:C,status:E}=p;S=p.data;let _=!1;if(n.placeholderData!==void 0&&S===void 0&&E==="pending"){let W;s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(W=s.data,_=!0):W=typeof n.placeholderData=="function"?n.placeholderData(($=X(this,pm))==null?void 0:$.state.data,X(this,pm)):n.placeholderData,W!==void 0&&(E="success",S=sT(s==null?void 0:s.data,W,n),y=!0)}if(n.select&&S!==void 0&&!_)if(s&&S===(o==null?void 0:o.data)&&n.select===X(this,Dy))S=X(this,hm);else try{it(this,Dy,n.select),S=n.select(S),S=sT(s==null?void 0:s.data,S,n),it(this,hm,S),it(this,Fu,null)}catch(W){it(this,Fu,W)}X(this,Fu)&&(k=X(this,Fu),S=X(this,hm),C=Date.now(),E="error");const A=p.fetchStatus==="fetching",M=E==="pending",I=E==="error",N=M&&A,O=S!==void 0,V={status:E,fetchStatus:p.fetchStatus,isPending:M,isSuccess:E==="success",isError:I,isInitialLoading:N,isLoading:N,data:S,dataUpdatedAt:p.dataUpdatedAt,error:k,errorUpdatedAt:C,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>d.dataUpdateCount||p.errorUpdateCount>d.errorUpdateCount,isFetching:A,isRefetching:A&&!M,isLoadingError:I&&!O,isPaused:p.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:I&&O,isStale:dE(e,n),refetch:this.refetch,promise:X(this,vc),isEnabled:Wo(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const W=pe=>{V.status==="error"?pe.reject(V.error):V.data!==void 0&&pe.resolve(V.data)},J=()=>{const pe=it(this,vc,V.promise=oT());W(pe)},Y=X(this,vc);switch(Y.status){case"pending":e.queryHash===r.queryHash&&W(Y);break;case"fulfilled":(V.status==="error"||V.data!==Y.value)&&J();break;case"rejected":(V.status!=="error"||V.error!==Y.reason)&&J();break}}return V}updateResult(){const e=X(this,rs),n=this.createResult(X(this,gn),this.options);if(it(this,Pf,X(this,gn).state),it(this,fm,this.options),X(this,Pf).data!==void 0&&it(this,pm,X(this,gn)),Fx(n,e))return;it(this,rs,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!X(this,mm).size)return!0;const o=new Set(s??X(this,mm));return this.options.throwOnError&&o.add("error"),Object.keys(X(this,rs)).some(a=>{const c=a;return X(this,rs)[c]!==e[c]&&o.has(c)})};Xt(this,jn,pD).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Xt(this,jn,dT).call(this)}},As=new WeakMap,gn=new WeakMap,Oy=new WeakMap,rs=new WeakMap,Pf=new WeakMap,fm=new WeakMap,vc=new WeakMap,Fu=new WeakMap,Dy=new WeakMap,hm=new WeakMap,pm=new WeakMap,Af=new WeakMap,If=new WeakMap,Uu=new WeakMap,mm=new WeakMap,jn=new WeakSet,jv=function(e){Xt(this,jn,pT).call(this);let n=X(this,gn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(os)),n},lT=function(){Xt(this,jn,fT).call(this);const e=qu(this.options.staleTime,X(this,gn));if(Ff||X(this,rs).isStale||!rT(e))return;const r=oD(X(this,rs).dataUpdatedAt,e)+1;it(this,Af,vf.setTimeout(()=>{X(this,rs).isStale||this.updateResult()},r))},cT=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(X(this,gn)):this.options.refetchInterval)??!1},uT=function(e){Xt(this,jn,hT).call(this),it(this,Uu,e),!(Ff||Wo(this.options.enabled,X(this,gn))===!1||!rT(X(this,Uu))||X(this,Uu)===0)&&it(this,If,vf.setInterval(()=>{(this.options.refetchIntervalInBackground||uE.isFocused())&&Xt(this,jn,jv).call(this)},X(this,Uu)))},dT=function(){Xt(this,jn,lT).call(this),Xt(this,jn,uT).call(this,Xt(this,jn,cT).call(this))},fT=function(){X(this,Af)&&(vf.clearTimeout(X(this,Af)),it(this,Af,void 0))},hT=function(){X(this,If)&&(vf.clearInterval(X(this,If)),it(this,If,void 0))},pT=function(){const e=X(this,As).getQueryCache().build(X(this,As),this.options);if(e===X(this,gn))return;const n=X(this,gn);it(this,gn,e),it(this,Oy,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},pD=function(e){oi.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(X(this,rs))}),X(this,As).getQueryCache().notify({query:X(this,gn),type:"observerResultsUpdated"})})},ZO);function E6(t,e){return Wo(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function _P(t,e){return E6(t,e)||t.state.data!==void 0&&mT(t,e,e.refetchOnMount)}function mT(t,e,n){if(Wo(e.enabled,t)!==!1&&qu(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&dE(t,e)}return!1}function RP(t,e,n,r){return(t!==e||Wo(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&dE(t,n)}function dE(t,e){return Wo(e.enabled,t)!==!1&&t.isStaleByTime(qu(e.staleTime,t))}function _6(t,e){return!Fx(t.getCurrentResult(),e)}function PP(t){return{onFetch:(e,n)=>{var h,p,y,S,k;const r=e.options,i=(y=(p=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:p.fetchMore)==null?void 0:y.direction,s=((S=e.state.data)==null?void 0:S.pages)||[],o=((k=e.state.data)==null?void 0:k.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const d=async()=>{let C=!1;const E=M=>{Object.defineProperty(M,"signal",{enumerable:!0,get:()=>(e.signal.aborted?C=!0:e.signal.addEventListener("abort",()=>{C=!0}),e.signal)})},_=lD(e.options,e.fetchOptions),A=async(M,I,N)=>{if(C)return Promise.reject();if(I==null&&M.pages.length)return Promise.resolve(M);const j=(()=>{const J={client:e.client,queryKey:e.queryKey,pageParam:I,direction:N?"backward":"forward",meta:e.options.meta};return E(J),J})(),V=await _(j),{maxPages:$}=e.options,W=N?y6:v6;return{pages:W(M.pages,V,$),pageParams:W(M.pageParams,I,$)}};if(i&&s.length){const M=i==="backward",I=M?R6:AP,N={pages:s,pageParams:o},O=I(r,N);a=await A(N,O,M)}else{const M=t??s.length;do{const I=c===0?o[0]??r.initialPageParam:AP(r,a);if(c>0&&I==null)break;a=await A(a,I),c++}while(c<M)}return a};e.options.persister?e.fetchFn=()=>{var C,E;return(E=(C=e.options).persister)==null?void 0:E.call(C,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=d}}}function AP(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function R6(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Ly,dl,is,Nf,fl,Tu,eD,P6=(eD=class extends fD{constructor(e){super();Ct(this,fl);Ct(this,Ly);Ct(this,dl);Ct(this,is);Ct(this,Nf);it(this,Ly,e.client),this.mutationId=e.mutationId,it(this,is,e.mutationCache),it(this,dl,[]),this.state=e.state||mD(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){X(this,dl).includes(e)||(X(this,dl).push(e),this.clearGcTimeout(),X(this,is).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){it(this,dl,X(this,dl).filter(n=>n!==e)),this.scheduleGc(),X(this,is).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){X(this,dl).length||(this.state.status==="pending"?this.scheduleGc():X(this,is).remove(this))}continue(){var e;return((e=X(this,Nf))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,c,d,h,p,y,S,k,C,E,_,A,M,I,N,O,j,V,$;const n=()=>{Xt(this,fl,Tu).call(this,{type:"continue"})},r={client:X(this,Ly),meta:this.options.meta,mutationKey:this.options.mutationKey};it(this,Nf,dD({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(W,J)=>{Xt(this,fl,Tu).call(this,{type:"failed",failureCount:W,error:J})},onPause:()=>{Xt(this,fl,Tu).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>X(this,is).canRun(this)}));const i=this.state.status==="pending",s=!X(this,Nf).canStart();try{if(i)n();else{Xt(this,fl,Tu).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=X(this,is).config).onMutate)==null?void 0:a.call(o,e,this,r));const J=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,e,r));J!==this.state.context&&Xt(this,fl,Tu).call(this,{type:"pending",context:J,variables:e,isPaused:s})}const W=await X(this,Nf).start();return await((p=(h=X(this,is).config).onSuccess)==null?void 0:p.call(h,W,e,this.state.context,this,r)),await((S=(y=this.options).onSuccess)==null?void 0:S.call(y,W,e,this.state.context,r)),await((C=(k=X(this,is).config).onSettled)==null?void 0:C.call(k,W,null,this.state.variables,this.state.context,this,r)),await((_=(E=this.options).onSettled)==null?void 0:_.call(E,W,null,e,this.state.context,r)),Xt(this,fl,Tu).call(this,{type:"success",data:W}),W}catch(W){try{throw await((M=(A=X(this,is).config).onError)==null?void 0:M.call(A,W,e,this.state.context,this,r)),await((N=(I=this.options).onError)==null?void 0:N.call(I,W,e,this.state.context,r)),await((j=(O=X(this,is).config).onSettled)==null?void 0:j.call(O,void 0,W,this.state.variables,this.state.context,this,r)),await(($=(V=this.options).onSettled)==null?void 0:$.call(V,void 0,W,e,this.state.context,r)),W}finally{Xt(this,fl,Tu).call(this,{type:"error",error:W})}}finally{X(this,is).runNext(this)}}},Ly=new WeakMap,dl=new WeakMap,is=new WeakMap,Nf=new WeakMap,fl=new WeakSet,Tu=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),oi.batch(()=>{X(this,dl).forEach(r=>{r.onMutationUpdate(e)}),X(this,is).notify({mutation:this,type:"updated",action:e})})},eD);function mD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yc,ba,jy,tD,A6=(tD=class extends Vm{constructor(e={}){super();Ct(this,yc);Ct(this,ba);Ct(this,jy);this.config=e,it(this,yc,new Set),it(this,ba,new Map),it(this,jy,0)}build(e,n,r){const i=new P6({client:e,mutationCache:this,mutationId:++Ib(this,jy)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){X(this,yc).add(e);const n=Mb(e);if(typeof n=="string"){const r=X(this,ba).get(n);r?r.push(e):X(this,ba).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(X(this,yc).delete(e)){const n=Mb(e);if(typeof n=="string"){const r=X(this,ba).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&X(this,ba).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Mb(e);if(typeof n=="string"){const r=X(this,ba).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Mb(e);if(typeof n=="string"){const i=(r=X(this,ba).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){oi.batch(()=>{X(this,yc).forEach(e=>{this.notify({type:"removed",mutation:e})}),X(this,yc).clear(),X(this,ba).clear()})}getAll(){return Array.from(X(this,yc))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>CP(n,r))}findAll(e={}){return this.getAll().filter(n=>CP(e,n))}notify(e){oi.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return oi.batch(()=>Promise.all(e.map(n=>n.continue().catch(os))))}},yc=new WeakMap,ba=new WeakMap,jy=new WeakMap,tD);function Mb(t){var e;return(e=t.options.scope)==null?void 0:e.id}var bc,Vu,Is,xc,_c,rx,gT,nD,I6=(nD=class extends Vm{constructor(n,r){super();Ct(this,_c);Ct(this,bc);Ct(this,Vu);Ct(this,Is);Ct(this,xc);it(this,bc,n),this.setOptions(r),this.bindMethods(),Xt(this,_c,rx).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=X(this,bc).defaultMutationOptions(n),Fx(this.options,r)||X(this,bc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:X(this,Is),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Uf(r.mutationKey)!==Uf(this.options.mutationKey)?this.reset():((i=X(this,Is))==null?void 0:i.state.status)==="pending"&&X(this,Is).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=X(this,Is))==null||n.removeObserver(this)}onMutationUpdate(n){Xt(this,_c,rx).call(this),Xt(this,_c,gT).call(this,n)}getCurrentResult(){return X(this,Vu)}reset(){var n;(n=X(this,Is))==null||n.removeObserver(this),it(this,Is,void 0),Xt(this,_c,rx).call(this),Xt(this,_c,gT).call(this)}mutate(n,r){var i;return it(this,xc,r),(i=X(this,Is))==null||i.removeObserver(this),it(this,Is,X(this,bc).getMutationCache().build(X(this,bc),this.options)),X(this,Is).addObserver(this),X(this,Is).execute(n)}},bc=new WeakMap,Vu=new WeakMap,Is=new WeakMap,xc=new WeakMap,_c=new WeakSet,rx=function(){var r;const n=((r=X(this,Is))==null?void 0:r.state)??mD();it(this,Vu,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},gT=function(n){oi.batch(()=>{var r,i,s,o,a,c,d,h;if(X(this,xc)&&this.hasListeners()){const p=X(this,Vu).variables,y=X(this,Vu).context,S={client:X(this,bc),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((i=(r=X(this,xc)).onSuccess)==null||i.call(r,n.data,p,y,S),(o=(s=X(this,xc)).onSettled)==null||o.call(s,n.data,null,p,y,S)):(n==null?void 0:n.type)==="error"&&((c=(a=X(this,xc)).onError)==null||c.call(a,n.error,p,y,S),(h=(d=X(this,xc)).onSettled)==null||h.call(d,void 0,n.error,p,y,S))}this.listeners.forEach(p=>{p(X(this,Vu))})})},nD),hl,rD,N6=(rD=class extends Vm{constructor(e={}){super();Ct(this,hl);this.config=e,it(this,hl,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??lE(i,n);let o=this.get(s);return o||(o=new k6({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){X(this,hl).has(e.queryHash)||(X(this,hl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=X(this,hl).get(e.queryHash);n&&(e.destroy(),n===e&&X(this,hl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){oi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return X(this,hl).get(e)}getAll(){return[...X(this,hl).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>SP(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>SP(e,r)):n}notify(e){oi.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){oi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){oi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},hl=new WeakMap,rD),Cr,Bu,zu,gm,vm,$u,ym,bm,iD,M6=(iD=class{constructor(t={}){Ct(this,Cr);Ct(this,Bu);Ct(this,zu);Ct(this,gm);Ct(this,vm);Ct(this,$u);Ct(this,ym);Ct(this,bm);it(this,Cr,t.queryCache||new N6),it(this,Bu,t.mutationCache||new A6),it(this,zu,t.defaultOptions||{}),it(this,gm,new Map),it(this,vm,new Map),it(this,$u,0)}mount(){Ib(this,$u)._++,X(this,$u)===1&&(it(this,ym,uE.subscribe(async t=>{t&&(await this.resumePausedMutations(),X(this,Cr).onFocus())})),it(this,bm,Ux.subscribe(async t=>{t&&(await this.resumePausedMutations(),X(this,Cr).onOnline())})))}unmount(){var t,e;Ib(this,$u)._--,X(this,$u)===0&&((t=X(this,ym))==null||t.call(this),it(this,ym,void 0),(e=X(this,bm))==null||e.call(this),it(this,bm,void 0))}isFetching(t){return X(this,Cr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return X(this,Bu).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=X(this,Cr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=X(this,Cr).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(qu(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return X(this,Cr).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=X(this,Cr).get(r.queryHash),s=i==null?void 0:i.state.data,o=p6(e,s);if(o!==void 0)return X(this,Cr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return oi.batch(()=>X(this,Cr).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=X(this,Cr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=X(this,Cr);oi.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=X(this,Cr);return oi.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=oi.batch(()=>X(this,Cr).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(os).catch(os)}invalidateQueries(t,e={}){return oi.batch(()=>(X(this,Cr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=oi.batch(()=>X(this,Cr).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(os)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(os)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=X(this,Cr).build(this,e);return n.isStaleByTime(qu(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(os).catch(os)}fetchInfiniteQuery(t){return t.behavior=PP(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(os).catch(os)}ensureInfiniteQueryData(t){return t.behavior=PP(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ux.isOnline()?X(this,Bu).resumePausedMutations():Promise.resolve()}getQueryCache(){return X(this,Cr)}getMutationCache(){return X(this,Bu)}getDefaultOptions(){return X(this,zu)}setDefaultOptions(t){it(this,zu,t)}setQueryDefaults(t,e){X(this,gm).set(Uf(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...X(this,gm).values()],n={};return e.forEach(r=>{oy(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){X(this,vm).set(Uf(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...X(this,vm).values()],n={};return e.forEach(r=>{oy(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...X(this,zu).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=lE(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===cE&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...X(this,zu).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){X(this,Cr).clear(),X(this,Bu).clear()}},Cr=new WeakMap,Bu=new WeakMap,zu=new WeakMap,gm=new WeakMap,vm=new WeakMap,$u=new WeakMap,ym=new WeakMap,bm=new WeakMap,iD),gD=v.createContext(void 0),Ow=t=>{const e=v.useContext(gD);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},O6=({client:t,children:e})=>(v.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),b.jsx(gD.Provider,{value:t,children:e})),vD=v.createContext(!1),D6=()=>v.useContext(vD);vD.Provider;function L6(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var j6=v.createContext(L6()),F6=()=>v.useContext(j6),U6=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},V6=t=>{v.useEffect(()=>{t.clearReset()},[t])},B6=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||cD(n,[t.error,r])),z6=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},$6=(t,e)=>t.isLoading&&t.isFetching&&!e,W6=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,IP=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function H6(t,e,n){var p,y,S,k,C;const r=D6(),i=F6(),s=Ow(),o=s.defaultQueryOptions(t);(y=(p=s.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||y.call(p,o),o._optimisticResults=r?"isRestoring":"optimistic",z6(o),U6(o,i),V6(i);const a=!s.getQueryCache().get(o.queryHash),[c]=v.useState(()=>new e(s,o)),d=c.getOptimisticResult(o),h=!r&&t.subscribed!==!1;if(v.useSyncExternalStore(v.useCallback(E=>{const _=h?c.subscribe(oi.batchCalls(E)):os;return c.updateResult(),_},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),v.useEffect(()=>{c.setOptions(o)},[o,c]),W6(o,d))throw IP(o,c,i);if(B6({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((k=(S=s.getDefaultOptions().queries)==null?void 0:S._experimental_afterQuery)==null||k.call(S,o,d),o.experimental_prefetchInRender&&!Ff&&$6(d,r)){const E=a?IP(o,c,i):(C=s.getQueryCache().get(o.queryHash))==null?void 0:C.promise;E==null||E.catch(os).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function po(t,e){return H6(t,T6)}function Ju(t,e){const n=Ow(),[r]=v.useState(()=>new I6(n,t));v.useEffect(()=>{r.setOptions(t)},[r,t]);const i=v.useSyncExternalStore(v.useCallback(o=>r.subscribe(oi.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=v.useCallback((o,a)=>{r.mutate(o,a).catch(os)},[r]);if(i.error&&cD(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var yD=t=>{throw TypeError(t)},q6=(t,e,n)=>e.has(t)||yD("Cannot "+n),zC=(t,e,n)=>(q6(t,e,"read from private field"),n?n.call(t):e.get(t)),K6=(t,e,n)=>e.has(t)?yD("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),NP="popstate";function G6(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return ay("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Xu(i)}return Q6(e,n,null,t)}function cn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Y6(){return Math.random().toString(36).substring(2,10)}function MP(t,e){return{usr:t.state,key:t.key,idx:e}}function ay(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ud(e):e,state:n,key:e&&e.key||r||Y6()}}function Xu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ud(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Q6(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",c=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function p(){a="POP";let E=h(),_=E==null?null:E-d;d=E,c&&c({action:a,location:C.location,delta:_})}function y(E,_){a="PUSH";let A=ay(C.location,E,_);d=h()+1;let M=MP(A,d),I=C.createHref(A);try{o.pushState(M,"",I)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(I)}s&&c&&c({action:a,location:C.location,delta:1})}function S(E,_){a="REPLACE";let A=ay(C.location,E,_);d=h();let M=MP(A,d),I=C.createHref(A);o.replaceState(M,"",I),s&&c&&c({action:a,location:C.location,delta:0})}function k(E){return bD(E)}let C={get action(){return a},get location(){return t(i,o)},listen(E){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(NP,p),c=E,()=>{i.removeEventListener(NP,p),c=null}},createHref(E){return e(i,E)},createURL:k,encodeLocation(E){let _=k(E);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:S,go(E){return o.go(E)}};return C}function bD(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),cn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Xu(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}var Fv,OP=class{constructor(t){if(K6(this,Fv,new Map),t)for(let[e,n]of t)this.set(e,n)}get(t){if(zC(this,Fv).has(t))return zC(this,Fv).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){zC(this,Fv).set(t,e)}};Fv=new WeakMap;var J6=new Set(["lazy","caseSensitive","path","id","index","children"]);function X6(t){return J6.has(t)}var Z6=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function e8(t){return Z6.has(t)}function t8(t){return t.index===!0}function ly(t,e,n=[],r={},i=!1){return t.map((s,o)=>{let a=[...n,String(o)],c=typeof s.id=="string"?s.id:a.join("-");if(cn(s.index!==!0||!s.children,"Cannot specify children on an index route"),cn(i||!r[c],`Found a route id collision on id "${c}".  Route id's must be globally unique within Data Router usages`),t8(s)){let d={...s,...e(s),id:c};return r[c]=d,d}else{let d={...s,...e(s),id:c,children:void 0};return r[c]=d,s.children&&(d.children=ly(s.children,e,a,r,i)),d}})}function Au(t,e,n="/"){return ix(t,e,n,!1)}function ix(t,e,n,r){let i=typeof e=="string"?ud(e):e,s=Ws(i.pathname||"/",n);if(s==null)return null;let o=xD(t);r8(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let d=p8(s);a=f8(o[c],d,r)}return a}function n8(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],loaderData:e[n.id],handle:n.handle}}function xD(t,e=[],n=[],r="",i=!1){let s=(o,a,c=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&c)return;cn(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let p=yl([r,h.relativePath]),y=n.concat(h);o.children&&o.children.length>0&&(cn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),xD(o.children,e,y,p,c)),!(o.path==null&&!o.index)&&e.push({path:p,score:u8(p,o.index),routesMeta:y})};return t.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,a);else for(let d of wD(o.path))s(o,a,!0,d)}),e}function wD(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=wD(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function r8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:d8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var i8=/^:[\w-]+$/,s8=3,o8=2,a8=1,l8=10,c8=-2,DP=t=>t==="*";function u8(t,e){let n=t.split("/"),r=n.length;return n.some(DP)&&(r+=c8),e&&(r+=o8),n.filter(i=>!DP(i)).reduce((i,s)=>i+(i8.test(s)?s8:s===""?a8:l8),r)}function d8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function f8(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],d=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",p=Vx({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),y=c.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=Vx({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:yl([s,p.pathname]),pathnameBase:y8(yl([s,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(s=yl([s,p.pathnameBase]))}return o}function Vx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=h8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:p},y)=>{if(h==="*"){let k=a[y]||"";o=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const S=a[y];return p&&!S?d[h]=void 0:d[h]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function h8(t,e=!1,n=!0){Vr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function p8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ws(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function m8({basename:t,pathname:e}){return e==="/"?t:yl([t,e])}function g8(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ud(t):t;return{pathname:n?n.startsWith("/")?n:v8(n,e):e,search:b8(r),hash:x8(i)}}function v8(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function $C(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SD(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function fE(t){let e=SD(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function hE(t,e,n,r=!1){let i;typeof t=="string"?i=ud(t):(i={...t},cn(!i.pathname||!i.pathname.includes("?"),$C("?","pathname","search",i)),cn(!i.pathname||!i.pathname.includes("#"),$C("#","pathname","hash",i)),cn(!i.search||!i.search.includes("#"),$C("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),p-=1;i.pathname=y.join("/")}a=p>=0?e[p]:"/"}let c=g8(i,a),d=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var yl=t=>t.join("/").replace(/\/\/+/g,"/"),y8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),b8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,x8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Bx=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function cy(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var CD=["POST","PUT","PATCH","DELETE"],w8=new Set(CD),S8=["GET",...CD],C8=new Set(S8),k8=new Set([301,302,303,307,308]),T8=new Set([307,308]),WC={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},E8={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Mp={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},_8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pE=t=>_8.test(t),R8=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),kD="remix-router-transitions",TD=Symbol("ResetLoaderData");function P8(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";cn(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=t.hydrationRouteProperties||[],i=t.mapRouteProperties||R8,s={},o=ly(t.routes,i,void 0,s),a,c=t.basename||"/";c.startsWith("/")||(c=`/${c}`);let d=t.dataStrategy||O8,h={...t.future},p=null,y=new Set,S=null,k=null,C=null,E=t.hydrationData!=null,_=Au(o,t.history.location,c),A=!1,M=null,I;if(_==null&&!t.patchRoutesOnNavigation){let G=$o(404,{pathname:t.history.location.pathname}),{matches:re,route:we}=Ob(o);I=!0,_=re,M={[we.id]:G}}else if(_&&!t.hydrationData&&Vn(_,o,t.history.location.pathname).active&&(_=null),_)if(_.some(G=>G.route.lazy))I=!1;else if(!_.some(G=>mE(G.route)))I=!0;else{let G=t.hydrationData?t.hydrationData.loaderData:null,re=t.hydrationData?t.hydrationData.errors:null;if(re){let we=_.findIndex(Oe=>re[Oe.route.id]!==void 0);I=_.slice(0,we+1).every(Oe=>!yT(Oe.route,G,re))}else I=_.every(we=>!yT(we.route,G,re))}else{I=!1,_=[];let G=Vn(null,o,t.history.location.pathname);G.active&&G.matches&&(A=!0,_=G.matches)}let N,O={historyAction:t.history.action,location:t.history.location,matches:_,initialized:I,navigation:WC,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||M,fetchers:new Map,blockers:new Map},j="POP",V=!1,$,W=!1,J=new Map,Y=null,pe=!1,fe=!1,Ee=new Set,le=new Map,Se=0,q=-1,te=new Map,ae=new Set,B=new Map,de=new Map,se=new Set,me=new Map,Te,Re=null;function ie(){if(p=t.history.listen(({action:G,location:re,delta:we})=>{if(Te){Te(),Te=void 0;return}Vr(me.size===0||we!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Oe=cr({currentLocation:O.location,nextLocation:re,historyAction:G});if(Oe&&we!=null){let He=new Promise(ct=>{Te=ct});t.history.go(we*-1),Br(Oe,{state:"blocked",location:re,proceed(){Br(Oe,{state:"proceeding",proceed:void 0,reset:void 0,location:re}),He.then(()=>t.history.go(we))},reset(){let ct=new Map(O.blockers);ct.set(Oe,Mp),$e({blockers:ct})}});return}return wt(G,re)}),n){Y8(e,J);let G=()=>Q8(e,J);e.addEventListener("pagehide",G),Y=()=>e.removeEventListener("pagehide",G)}return O.initialized||wt("POP",O.location,{initialHydration:!0}),N}function be(){p&&p(),Y&&Y(),y.clear(),$&&$.abort(),O.fetchers.forEach((G,re)=>Ut(re)),O.blockers.forEach((G,re)=>sr(re))}function Le(G){return y.add(G),()=>y.delete(G)}function $e(G,re={}){G.matches&&(G.matches=G.matches.map(He=>{let ct=s[He.route.id],st=He.route;return st.element!==ct.element||st.errorElement!==ct.errorElement||st.hydrateFallbackElement!==ct.hydrateFallbackElement?{...He,route:ct}:He})),O={...O,...G};let we=[],Oe=[];O.fetchers.forEach((He,ct)=>{He.state==="idle"&&(se.has(ct)?we.push(ct):Oe.push(ct))}),se.forEach(He=>{!O.fetchers.has(He)&&!le.has(He)&&we.push(He)}),[...y].forEach(He=>He(O,{deletedFetchers:we,viewTransitionOpts:re.viewTransitionOpts,flushSync:re.flushSync===!0})),we.forEach(He=>Ut(He)),Oe.forEach(He=>O.fetchers.delete(He))}function Je(G,re,{flushSync:we}={}){var _t,vt;let Oe=O.actionData!=null&&O.navigation.formMethod!=null&&Ds(O.navigation.formMethod)&&O.navigation.state==="loading"&&((_t=G.state)==null?void 0:_t._isRedirect)!==!0,He;re.actionData?Object.keys(re.actionData).length>0?He=re.actionData:He=null:Oe?He=O.actionData:He=null;let ct=re.loaderData?HP(O.loaderData,re.loaderData,re.matches||[],re.errors):O.loaderData,st=O.blockers;st.size>0&&(st=new Map(st),st.forEach((At,Cn)=>st.set(Cn,Mp)));let ut=pe?!1:Dt(G,re.matches||O.matches),yt=V===!0||O.navigation.formMethod!=null&&Ds(O.navigation.formMethod)&&((vt=G.state)==null?void 0:vt._isRedirect)!==!0;a&&(o=a,a=void 0),pe||j==="POP"||(j==="PUSH"?t.history.push(G,G.state):j==="REPLACE"&&t.history.replace(G,G.state));let Pt;if(j==="POP"){let At=J.get(O.location.pathname);At&&At.has(G.pathname)?Pt={currentLocation:O.location,nextLocation:G}:J.has(G.pathname)&&(Pt={currentLocation:G,nextLocation:O.location})}else if(W){let At=J.get(O.location.pathname);At?At.add(G.pathname):(At=new Set([G.pathname]),J.set(O.location.pathname,At)),Pt={currentLocation:O.location,nextLocation:G}}$e({...re,actionData:He,loaderData:ct,historyAction:j,location:G,initialized:!0,navigation:WC,revalidation:"idle",restoreScrollPosition:ut,preventScrollReset:yt,blockers:st},{viewTransitionOpts:Pt,flushSync:we===!0}),j="POP",V=!1,W=!1,pe=!1,fe=!1,Re==null||Re.resolve(),Re=null}async function pt(G,re){if(typeof G=="number"){t.history.go(G);return}let we=vT(O.location,O.matches,c,G,re==null?void 0:re.fromRouteId,re==null?void 0:re.relative),{path:Oe,submission:He,error:ct}=LP(!1,we,re),st=O.location,ut=ay(O.location,Oe,re&&re.state);ut={...ut,...t.history.encodeLocation(ut)};let yt=re&&re.replace!=null?re.replace:void 0,Pt="PUSH";yt===!0?Pt="REPLACE":yt===!1||He!=null&&Ds(He.formMethod)&&He.formAction===O.location.pathname+O.location.search&&(Pt="REPLACE");let _t=re&&"preventScrollReset"in re?re.preventScrollReset===!0:void 0,vt=(re&&re.flushSync)===!0,At=cr({currentLocation:st,nextLocation:ut,historyAction:Pt});if(At){Br(At,{state:"blocked",location:ut,proceed(){Br(At,{state:"proceeding",proceed:void 0,reset:void 0,location:ut}),pt(G,re)},reset(){let Cn=new Map(O.blockers);Cn.set(At,Mp),$e({blockers:Cn})}});return}await wt(Pt,ut,{submission:He,pendingError:ct,preventScrollReset:_t,replace:re&&re.replace,enableViewTransition:re&&re.viewTransition,flushSync:vt})}function Et(){Re||(Re=J8()),Be(),$e({revalidation:"loading"});let G=Re.promise;return O.navigation.state==="submitting"?G:O.navigation.state==="idle"?(wt(O.historyAction,O.location,{startUninterruptedRevalidation:!0}),G):(wt(j||O.historyAction,O.navigation.location,{overrideNavigation:O.navigation,enableViewTransition:W===!0}),G)}async function wt(G,re,we){$&&$.abort(),$=null,j=G,pe=(we&&we.startUninterruptedRevalidation)===!0,Ol(O.location,O.matches),V=(we&&we.preventScrollReset)===!0,W=(we&&we.enableViewTransition)===!0;let Oe=a||o,He=we&&we.overrideNavigation,ct=we!=null&&we.initialHydration&&O.matches&&O.matches.length>0&&!A?O.matches:Au(Oe,re,c),st=(we&&we.flushSync)===!0;if(ct&&O.initialized&&!fe&&z8(O.location,re)&&!(we&&we.submission&&Ds(we.submission.formMethod))){Je(re,{matches:ct},{flushSync:st});return}let ut=Vn(ct,Oe,re.pathname);if(ut.active&&ut.matches&&(ct=ut.matches),!ct){let{error:Xr,notFoundMatches:Bn,route:Mn}=Jo(re.pathname);Je(re,{matches:Bn,loaderData:{},errors:{[Mn.id]:Xr}},{flushSync:st});return}$=new AbortController;let yt=Op(t.history,re,$.signal,we&&we.submission),Pt=t.getContext?await t.getContext():new OP,_t;if(we&&we.pendingError)_t=[Iu(ct).route.id,{type:"error",error:we.pendingError}];else if(we&&we.submission&&Ds(we.submission.formMethod)){let Xr=await _n(yt,re,we.submission,ct,Pt,ut.active,we&&we.initialHydration===!0,{replace:we.replace,flushSync:st});if(Xr.shortCircuited)return;if(Xr.pendingActionResult){let[Bn,Mn]=Xr.pendingActionResult;if(co(Mn)&&cy(Mn.error)&&Mn.error.status===404){$=null,Je(re,{matches:Xr.matches,loaderData:{},errors:{[Bn]:Mn.error}});return}}ct=Xr.matches||ct,_t=Xr.pendingActionResult,He=HC(re,we.submission),st=!1,ut.active=!1,yt=Op(t.history,yt.url,yt.signal)}let{shortCircuited:vt,matches:At,loaderData:Cn,errors:ur}=await er(yt,re,ct,Pt,ut.active,He,we&&we.submission,we&&we.fetcherSubmission,we&&we.replace,we&&we.initialHydration===!0,st,_t);vt||($=null,Je(re,{matches:At||ct,...qP(_t),loaderData:Cn,errors:ur}))}async function _n(G,re,we,Oe,He,ct,st,ut={}){Be();let yt=K8(re,we);if($e({navigation:yt},{flushSync:ut.flushSync===!0}),ct){let vt=await Yn(Oe,re.pathname,G.signal);if(vt.type==="aborted")return{shortCircuited:!0};if(vt.type==="error"){if(vt.partialMatches.length===0){let{matches:Cn,route:ur}=Ob(o);return{matches:Cn,pendingActionResult:[ur.id,{type:"error",error:vt.error}]}}let At=Iu(vt.partialMatches).route.id;return{matches:vt.partialMatches,pendingActionResult:[At,{type:"error",error:vt.error}]}}else if(vt.matches)Oe=vt.matches;else{let{notFoundMatches:At,error:Cn,route:ur}=Jo(re.pathname);return{matches:At,pendingActionResult:[ur.id,{type:"error",error:Cn}]}}}let Pt,_t=sx(Oe,re);if(!_t.route.action&&!_t.route.lazy)Pt={type:"error",error:$o(405,{method:G.method,pathname:re.pathname,routeId:_t.route.id})};else{let vt=Kp(i,s,G,Oe,_t,st?[]:r,He),At=await qe(G,vt,He,null);if(Pt=At[_t.route.id],!Pt){for(let Cn of Oe)if(At[Cn.route.id]){Pt=At[Cn.route.id];break}}if(G.signal.aborted)return{shortCircuited:!0}}if(yf(Pt)){let vt;return ut&&ut.replace!=null?vt=ut.replace:vt=zP(Pt.response.headers.get("Location"),new URL(G.url),c)===O.location.pathname+O.location.search,await ve(G,Pt,!0,{submission:we,replace:vt}),{shortCircuited:!0}}if(co(Pt)){let vt=Iu(Oe,_t.route.id);return(ut&&ut.replace)!==!0&&(j="PUSH"),{matches:Oe,pendingActionResult:[vt.route.id,Pt,_t.route.id]}}return{matches:Oe,pendingActionResult:[_t.route.id,Pt]}}async function er(G,re,we,Oe,He,ct,st,ut,yt,Pt,_t,vt){let At=ct||HC(re,st),Cn=st||ut||GP(At),ur=!pe&&!Pt;if(He){if(ur){let yr=dn(vt);$e({navigation:At,...yr!==void 0?{actionData:yr}:{}},{flushSync:_t})}let nn=await Yn(we,re.pathname,G.signal);if(nn.type==="aborted")return{shortCircuited:!0};if(nn.type==="error"){if(nn.partialMatches.length===0){let{matches:Ys,route:zr}=Ob(o);return{matches:Ys,loaderData:{},errors:{[zr.id]:nn.error}}}let yr=Iu(nn.partialMatches).route.id;return{matches:nn.partialMatches,loaderData:{},errors:{[yr]:nn.error}}}else if(nn.matches)we=nn.matches;else{let{error:yr,notFoundMatches:Ys,route:zr}=Jo(re.pathname);return{matches:Ys,loaderData:{},errors:{[zr.id]:yr}}}}let Xr=a||o,{dsMatches:Bn,revalidatingFetchers:Mn}=jP(G,Oe,i,s,t.history,O,we,Cn,re,Pt?[]:r,Pt===!0,fe,Ee,se,B,ae,Xr,c,t.patchRoutesOnNavigation!=null,vt);if(q=++Se,!t.dataStrategy&&!Bn.some(nn=>nn.shouldLoad)&&!Bn.some(nn=>nn.route.middleware&&nn.route.middleware.length>0)&&Mn.length===0){let nn=It();return Je(re,{matches:we,loaderData:{},errors:vt&&co(vt[1])?{[vt[0]]:vt[1].error}:null,...qP(vt),...nn?{fetchers:new Map(O.fetchers)}:{}},{flushSync:_t}),{shortCircuited:!0}}if(ur){let nn={};if(!He){nn.navigation=At;let yr=dn(vt);yr!==void 0&&(nn.actionData=yr)}Mn.length>0&&(nn.fetchers=tn(Mn)),$e(nn,{flushSync:_t})}Mn.forEach(nn=>{hn(nn.key),nn.controller&&le.set(nn.key,nn.controller)});let xo=()=>Mn.forEach(nn=>hn(nn.key));$&&$.signal.addEventListener("abort",xo);let{loaderResults:Da,fetcherResults:Gi}=await Ge(Bn,Mn,G,Oe);if(G.signal.aborted)return{shortCircuited:!0};$&&$.signal.removeEventListener("abort",xo),Mn.forEach(nn=>le.delete(nn.key));let hs=Db(Da);if(hs)return await ve(G,hs.result,!0,{replace:yt}),{shortCircuited:!0};if(hs=Db(Gi),hs)return ae.add(hs.key),await ve(G,hs.result,!0,{replace:yt}),{shortCircuited:!0};let{loaderData:On,errors:Dl}=WP(O,we,Da,vt,Mn,Gi);Pt&&O.errors&&(Dl={...O.errors,...Dl});let Gs=It(),Ll=xn(q),wo=Gs||Ll||Mn.length>0;return{matches:we,loaderData:On,errors:Dl,...wo?{fetchers:new Map(O.fetchers)}:{}}}function dn(G){if(G&&!co(G[1]))return{[G[0]]:G[1].data};if(O.actionData)return Object.keys(O.actionData).length===0?null:O.actionData}function tn(G){return G.forEach(re=>{let we=O.fetchers.get(re.key),Oe=Sv(void 0,we?we.data:void 0);O.fetchers.set(re.key,Oe)}),new Map(O.fetchers)}async function Nn(G,re,we,Oe){hn(G);let He=(Oe&&Oe.flushSync)===!0,ct=a||o,st=vT(O.location,O.matches,c,we,re,Oe==null?void 0:Oe.relative),ut=Au(ct,st,c),yt=Vn(ut,ct,st);if(yt.active&&yt.matches&&(ut=yt.matches),!ut){kt(G,re,$o(404,{pathname:st}),{flushSync:He});return}let{path:Pt,submission:_t,error:vt}=LP(!0,st,Oe);if(vt){kt(G,re,vt,{flushSync:He});return}let At=t.getContext?await t.getContext():new OP,Cn=(Oe&&Oe.preventScrollReset)===!0;if(_t&&Ds(_t.formMethod)){await Q(G,re,Pt,ut,At,yt.active,He,Cn,_t);return}B.set(G,{routeId:re,path:Pt}),await ce(G,re,Pt,ut,At,yt.active,He,Cn,_t)}async function Q(G,re,we,Oe,He,ct,st,ut,yt){Be(),B.delete(G);let Pt=O.fetchers.get(G);Ze(G,G8(yt,Pt),{flushSync:st});let _t=new AbortController,vt=Op(t.history,we,_t.signal,yt);if(ct){let dr=await Yn(Oe,new URL(vt.url).pathname,vt.signal,G);if(dr.type==="aborted")return;if(dr.type==="error"){kt(G,re,dr.error,{flushSync:st});return}else if(dr.matches)Oe=dr.matches;else{kt(G,re,$o(404,{pathname:we}),{flushSync:st});return}}let At=sx(Oe,we);if(!At.route.action&&!At.route.lazy){let dr=$o(405,{method:yt.formMethod,pathname:we,routeId:re});kt(G,re,dr,{flushSync:st});return}le.set(G,_t);let Cn=Se,ur=Kp(i,s,vt,Oe,At,r,He),Bn=(await qe(vt,ur,He,G))[At.route.id];if(vt.signal.aborted){le.get(G)===_t&&le.delete(G);return}if(se.has(G)){if(yf(Bn)||co(Bn)){Ze(G,pc(void 0));return}}else{if(yf(Bn))if(le.delete(G),q>Cn){Ze(G,pc(void 0));return}else return ae.add(G),Ze(G,Sv(yt)),ve(vt,Bn,!1,{fetcherSubmission:yt,preventScrollReset:ut});if(co(Bn)){kt(G,re,Bn.error);return}}let Mn=O.navigation.location||O.location,xo=Op(t.history,Mn,_t.signal),Da=a||o,Gi=O.navigation.state!=="idle"?Au(Da,O.navigation.location,c):O.matches;cn(Gi,"Didn't find any matches after fetcher action");let hs=++Se;te.set(G,hs);let On=Sv(yt,Bn.data);O.fetchers.set(G,On);let{dsMatches:Dl,revalidatingFetchers:Gs}=jP(xo,He,i,s,t.history,O,Gi,yt,Mn,r,!1,fe,Ee,se,B,ae,Da,c,t.patchRoutesOnNavigation!=null,[At.route.id,Bn]);Gs.filter(dr=>dr.key!==G).forEach(dr=>{let di=dr.key,gd=O.fetchers.get(di),rh=Sv(void 0,gd?gd.data:void 0);O.fetchers.set(di,rh),hn(di),dr.controller&&le.set(di,dr.controller)}),$e({fetchers:new Map(O.fetchers)});let Ll=()=>Gs.forEach(dr=>hn(dr.key));_t.signal.addEventListener("abort",Ll);let{loaderResults:wo,fetcherResults:nn}=await Ge(Dl,Gs,xo,He);if(_t.signal.aborted)return;if(_t.signal.removeEventListener("abort",Ll),te.delete(G),le.delete(G),Gs.forEach(dr=>le.delete(dr.key)),O.fetchers.has(G)){let dr=pc(Bn.data);O.fetchers.set(G,dr)}let yr=Db(wo);if(yr)return ve(xo,yr.result,!1,{preventScrollReset:ut});if(yr=Db(nn),yr)return ae.add(yr.key),ve(xo,yr.result,!1,{preventScrollReset:ut});let{loaderData:Ys,errors:zr}=WP(O,Gi,wo,void 0,Gs,nn);xn(hs),O.navigation.state==="loading"&&hs>q?(cn(j,"Expected pending action"),$&&$.abort(),Je(O.navigation.location,{matches:Gi,loaderData:Ys,errors:zr,fetchers:new Map(O.fetchers)})):($e({errors:zr,loaderData:HP(O.loaderData,Ys,Gi,zr),fetchers:new Map(O.fetchers)}),fe=!1)}async function ce(G,re,we,Oe,He,ct,st,ut,yt){let Pt=O.fetchers.get(G);Ze(G,Sv(yt,Pt?Pt.data:void 0),{flushSync:st});let _t=new AbortController,vt=Op(t.history,we,_t.signal);if(ct){let Mn=await Yn(Oe,new URL(vt.url).pathname,vt.signal,G);if(Mn.type==="aborted")return;if(Mn.type==="error"){kt(G,re,Mn.error,{flushSync:st});return}else if(Mn.matches)Oe=Mn.matches;else{kt(G,re,$o(404,{pathname:we}),{flushSync:st});return}}let At=sx(Oe,we);le.set(G,_t);let Cn=Se,ur=Kp(i,s,vt,Oe,At,r,He),Bn=(await qe(vt,ur,He,G))[At.route.id];if(le.get(G)===_t&&le.delete(G),!vt.signal.aborted){if(se.has(G)){Ze(G,pc(void 0));return}if(yf(Bn))if(q>Cn){Ze(G,pc(void 0));return}else{ae.add(G),await ve(vt,Bn,!1,{preventScrollReset:ut});return}if(co(Bn)){kt(G,re,Bn.error);return}Ze(G,pc(Bn.data))}}async function ve(G,re,we,{submission:Oe,fetcherSubmission:He,preventScrollReset:ct,replace:st}={}){re.response.headers.has("X-Remix-Revalidate")&&(fe=!0);let ut=re.response.headers.get("Location");cn(ut,"Expected a Location header on the redirect Response"),ut=zP(ut,new URL(G.url),c);let yt=ay(O.location,ut,{_isRedirect:!0});if(n){let ur=!1;if(re.response.headers.has("X-Remix-Reload-Document"))ur=!0;else if(pE(ut)){const Xr=bD(ut,!0);ur=Xr.origin!==e.location.origin||Ws(Xr.pathname,c)==null}if(ur){st?e.location.replace(ut):e.location.assign(ut);return}}$=null;let Pt=st===!0||re.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:_t,formAction:vt,formEncType:At}=O.navigation;!Oe&&!He&&_t&&vt&&At&&(Oe=GP(O.navigation));let Cn=Oe||He;if(T8.has(re.response.status)&&Cn&&Ds(Cn.formMethod))await wt(Pt,yt,{submission:{...Cn,formAction:ut},preventScrollReset:ct||V,enableViewTransition:we?W:void 0});else{let ur=HC(yt,Oe);await wt(Pt,yt,{overrideNavigation:ur,fetcherSubmission:He,preventScrollReset:ct||V,enableViewTransition:we?W:void 0})}}async function qe(G,re,we,Oe){let He,ct={};try{He=await L8(d,G,re,Oe,we,!1)}catch(st){return re.filter(ut=>ut.shouldLoad).forEach(ut=>{ct[ut.route.id]={type:"error",error:st}}),ct}if(G.signal.aborted)return ct;for(let[st,ut]of Object.entries(He))if(H8(ut)){let yt=ut.result;ct[st]={type:"redirect",response:V8(yt,G,st,re,c)}}else ct[st]=await U8(ut);return ct}async function Ge(G,re,we,Oe){let He=qe(we,G,Oe,null),ct=Promise.all(re.map(async yt=>{if(yt.matches&&yt.match&&yt.request&&yt.controller){let _t=(await qe(yt.request,yt.matches,Oe,yt.key))[yt.match.route.id];return{[yt.key]:_t}}else return Promise.resolve({[yt.key]:{type:"error",error:$o(404,{pathname:yt.path})}})})),st=await He,ut=(await ct).reduce((yt,Pt)=>Object.assign(yt,Pt),{});return{loaderResults:st,fetcherResults:ut}}function Be(){fe=!0,B.forEach((G,re)=>{le.has(re)&&Ee.add(re),hn(re)})}function Ze(G,re,we={}){O.fetchers.set(G,re),$e({fetchers:new Map(O.fetchers)},{flushSync:(we&&we.flushSync)===!0})}function kt(G,re,we,Oe={}){let He=Iu(O.matches,re);Ut(G),$e({errors:{[He.route.id]:we},fetchers:new Map(O.fetchers)},{flushSync:(Oe&&Oe.flushSync)===!0})}function Ft(G){return de.set(G,(de.get(G)||0)+1),se.has(G)&&se.delete(G),O.fetchers.get(G)||E8}function We(G,re){hn(G,re==null?void 0:re.reason),Ze(G,pc(null))}function Ut(G){let re=O.fetchers.get(G);le.has(G)&&!(re&&re.state==="loading"&&te.has(G))&&hn(G),B.delete(G),te.delete(G),ae.delete(G),se.delete(G),Ee.delete(G),O.fetchers.delete(G)}function Qt(G){let re=(de.get(G)||0)-1;re<=0?(de.delete(G),se.add(G)):de.set(G,re),$e({fetchers:new Map(O.fetchers)})}function hn(G,re){let we=le.get(G);we&&(we.abort(re),le.delete(G))}function Hn(G){for(let re of G){let we=Ft(re),Oe=pc(we.data);O.fetchers.set(re,Oe)}}function It(){let G=[],re=!1;for(let we of ae){let Oe=O.fetchers.get(we);cn(Oe,`Expected fetcher: ${we}`),Oe.state==="loading"&&(ae.delete(we),G.push(we),re=!0)}return Hn(G),re}function xn(G){let re=[];for(let[we,Oe]of te)if(Oe<G){let He=O.fetchers.get(we);cn(He,`Expected fetcher: ${we}`),He.state==="loading"&&(hn(we),te.delete(we),re.push(we))}return Hn(re),re.length>0}function Rn(G,re){let we=O.blockers.get(G)||Mp;return me.get(G)!==re&&me.set(G,re),we}function sr(G){O.blockers.delete(G),me.delete(G)}function Br(G,re){let we=O.blockers.get(G)||Mp;cn(we.state==="unblocked"&&re.state==="blocked"||we.state==="blocked"&&re.state==="blocked"||we.state==="blocked"&&re.state==="proceeding"||we.state==="blocked"&&re.state==="unblocked"||we.state==="proceeding"&&re.state==="unblocked",`Invalid blocker state transition: ${we.state} -> ${re.state}`);let Oe=new Map(O.blockers);Oe.set(G,re),$e({blockers:Oe})}function cr({currentLocation:G,nextLocation:re,historyAction:we}){if(me.size===0)return;me.size>1&&Vr(!1,"A router only supports one blocker at a time");let Oe=Array.from(me.entries()),[He,ct]=Oe[Oe.length-1],st=O.blockers.get(He);if(!(st&&st.state==="proceeding")&&ct({currentLocation:G,nextLocation:re,historyAction:we}))return He}function Jo(G){let re=$o(404,{pathname:G}),we=a||o,{matches:Oe,route:He}=Ob(we);return{notFoundMatches:Oe,route:He,error:re}}function Ks(G,re,we){if(S=G,C=re,k=we||null,!E&&O.navigation===WC){E=!0;let Oe=Dt(O.location,O.matches);Oe!=null&&$e({restoreScrollPosition:Oe})}return()=>{S=null,C=null,k=null}}function Ki(G,re){return k&&k(G,re.map(Oe=>n8(Oe,O.loaderData)))||G.key}function Ol(G,re){if(S&&C){let we=Ki(G,re);S[we]=C()}}function Dt(G,re){if(S){let we=Ki(G,re),Oe=S[we];if(typeof Oe=="number")return Oe}return null}function Vn(G,re,we){if(t.patchRoutesOnNavigation)if(G){if(Object.keys(G[0].params).length>0)return{active:!0,matches:ix(re,we,c,!0)}}else return{active:!0,matches:ix(re,we,c,!0)||[]};return{active:!1,matches:null}}async function Yn(G,re,we,Oe){if(!t.patchRoutesOnNavigation)return{type:"success",matches:G};let He=G;for(;;){let ct=a==null,st=a||o,ut=s;try{await t.patchRoutesOnNavigation({signal:we,path:re,matches:He,fetcherKey:Oe,patch:(_t,vt)=>{we.aborted||FP(_t,vt,st,ut,i,!1)}})}catch(_t){return{type:"error",error:_t,partialMatches:He}}finally{ct&&!we.aborted&&(o=[...o])}if(we.aborted)return{type:"aborted"};let yt=Au(st,re,c);if(yt)return{type:"success",matches:yt};let Pt=ix(st,re,c,!0);if(!Pt||He.length===Pt.length&&He.every((_t,vt)=>_t.route.id===Pt[vt].route.id))return{type:"success",matches:null};He=Pt}}function Ir(G){s={},a=ly(G,i,void 0,s)}function bo(G,re,we=!1){let Oe=a==null;FP(G,re,a||o,s,i,we),Oe&&(o=[...o],$e({}))}return N={get basename(){return c},get future(){return h},get state(){return O},get routes(){return o},get window(){return e},initialize:ie,subscribe:Le,enableScrollRestoration:Ks,navigate:pt,fetch:Nn,revalidate:Et,createHref:G=>t.history.createHref(G),encodeLocation:G=>t.history.encodeLocation(G),getFetcher:Ft,resetFetcher:We,deleteFetcher:Qt,dispose:be,getBlocker:Rn,deleteBlocker:sr,patchRoutes:bo,_internalFetchControllers:le,_internalSetRoutes:Ir,_internalSetStateDoNotUseOrYouWillBreakYourApp(G){$e(G)}},N}function A8(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function vT(t,e,n,r,i,s){let o,a;if(i){o=[];for(let d of e)if(o.push(d),d.route.id===i){a=d;break}}else o=e,a=e[e.length-1];let c=hE(r||".",fE(o),Ws(t.pathname,n)||t.pathname,s==="path");if(r==null&&(c.search=t.search,c.hash=t.hash),(r==null||r===""||r===".")&&a){let d=gE(c.search);if(a.route.index&&!d)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!a.route.index&&d){let h=new URLSearchParams(c.search),p=h.getAll("index");h.delete("index"),p.filter(S=>S).forEach(S=>h.append("index",S));let y=h.toString();c.search=y?`?${y}`:""}}return n!=="/"&&(c.pathname=m8({basename:n,pathname:c.pathname})),Xu(c)}function LP(t,e,n){if(!n||!A8(n))return{path:e};if(n.formMethod&&!q8(n.formMethod))return{path:e,error:$o(405,{method:n.formMethod})};let r=()=>({path:e,error:$o(400,{type:"invalid-body"})}),s=(n.formMethod||"get").toUpperCase(),o=ID(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Ds(s))return r();let p=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((y,[S,k])=>`${y}${S}=${k}
`,""):String(n.body);return{path:e,submission:{formMethod:s,formAction:o,formEncType:n.formEncType,formData:void 0,json:void 0,text:p}}}else if(n.formEncType==="application/json"){if(!Ds(s))return r();try{let p=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:s,formAction:o,formEncType:n.formEncType,formData:void 0,json:p,text:void 0}}}catch{return r()}}}cn(typeof FormData=="function","FormData is not available in this environment");let a,c;if(n.formData)a=xT(n.formData),c=n.formData;else if(n.body instanceof FormData)a=xT(n.body),c=n.body;else if(n.body instanceof URLSearchParams)a=n.body,c=$P(a);else if(n.body==null)a=new URLSearchParams,c=new FormData;else try{a=new URLSearchParams(n.body),c=$P(a)}catch{return r()}let d={formMethod:s,formAction:o,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Ds(d.formMethod))return{path:e,submission:d};let h=ud(e);return t&&h.search&&gE(h.search)&&a.append("index",""),h.search=`?${a}`,{path:Xu(h),submission:d}}function jP(t,e,n,r,i,s,o,a,c,d,h,p,y,S,k,C,E,_,A,M){var pe;let I=M?co(M[1])?M[1].error:M[1].data:void 0,N=i.createURL(s.location),O=i.createURL(c),j;if(h&&s.errors){let fe=Object.keys(s.errors)[0];j=o.findIndex(Ee=>Ee.route.id===fe)}else if(M&&co(M[1])){let fe=M[0];j=o.findIndex(Ee=>Ee.route.id===fe)-1}let V=M?M[1].statusCode:void 0,$=V&&V>=400,W={currentUrl:N,currentParams:((pe=s.matches[0])==null?void 0:pe.params)||{},nextUrl:O,nextParams:o[0].params,...a,actionResult:I,actionStatus:V},J=o.map((fe,Ee)=>{let{route:le}=fe,Se=null;if(j!=null&&Ee>j?Se=!1:le.lazy?Se=!0:mE(le)?h?Se=yT(le,s.loaderData,s.errors):I8(s.loaderData,s.matches[Ee],fe)&&(Se=!0):Se=!1,Se!==null)return bT(n,r,t,fe,d,e,Se);let q=$?!1:p||N.pathname+N.search===O.pathname+O.search||N.search!==O.search||N8(s.matches[Ee],fe),te={...W,defaultShouldRevalidate:q},ae=zx(fe,te);return bT(n,r,t,fe,d,e,ae,te)}),Y=[];return k.forEach((fe,Ee)=>{if(h||!o.some(se=>se.route.id===fe.routeId)||S.has(Ee))return;let le=s.fetchers.get(Ee),Se=le&&le.state!=="idle"&&le.data===void 0,q=Au(E,fe.path,_);if(!q){if(A&&Se)return;Y.push({key:Ee,routeId:fe.routeId,path:fe.path,matches:null,match:null,request:null,controller:null});return}if(C.has(Ee))return;let te=sx(q,fe.path),ae=new AbortController,B=Op(i,fe.path,ae.signal),de=null;if(y.has(Ee))y.delete(Ee),de=Kp(n,r,B,q,te,d,e);else if(Se)p&&(de=Kp(n,r,B,q,te,d,e));else{let se={...W,defaultShouldRevalidate:$?!1:p};zx(te,se)&&(de=Kp(n,r,B,q,te,d,e,se))}de&&Y.push({key:Ee,routeId:fe.routeId,path:fe.path,matches:de,match:te,request:B,controller:ae})}),{dsMatches:J,revalidatingFetchers:Y}}function mE(t){return t.loader!=null||t.middleware!=null&&t.middleware.length>0}function yT(t,e,n){if(t.lazy)return!0;if(!mE(t))return!1;let r=e!=null&&t.id in e,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function I8(t,e,n){let r=!e||n.route.id!==e.route.id,i=!t.hasOwnProperty(n.route.id);return r||i}function N8(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function zx(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function FP(t,e,n,r,i,s){let o;if(t){let d=r[t];cn(d,`No route found to patch children into: routeId = ${t}`),d.children||(d.children=[]),o=d.children}else o=n;let a=[],c=[];if(e.forEach(d=>{let h=o.find(p=>ED(d,p));h?c.push({existingRoute:h,newRoute:d}):a.push(d)}),a.length>0){let d=ly(a,i,[t||"_","patch",String((o==null?void 0:o.length)||"0")],r);o.push(...d)}if(s&&c.length>0)for(let d=0;d<c.length;d++){let{existingRoute:h,newRoute:p}=c[d],y=h,[S]=ly([p],i,[],{},!0);Object.assign(y,{element:S.element?S.element:y.element,errorElement:S.errorElement?S.errorElement:y.errorElement,hydrateFallbackElement:S.hydrateFallbackElement?S.hydrateFallbackElement:y.hydrateFallbackElement})}}function ED(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>ED(n,s))}):!1}var UP=new WeakMap,_D=({key:t,route:e,manifest:n,mapRouteProperties:r})=>{let i=n[e.id];if(cn(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let s=i.lazy[t];if(!s)return;let o=UP.get(i);o||(o={},UP.set(i,o));let a=o[t];if(a)return a;let c=(async()=>{let d=X6(t),p=i[t]!==void 0&&t!=="hasErrorBoundary";if(d)Vr(!d,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),o[t]=Promise.resolve();else if(p)Vr(!1,`Route "${i.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let y=await s();y!=null&&(Object.assign(i,{[t]:y}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[t]=void 0,Object.values(i.lazy).every(y=>y===void 0)&&(i.lazy=void 0))})();return o[t]=c,c},VP=new WeakMap;function M8(t,e,n,r,i){let s=n[t.id];if(cn(s,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let h=VP.get(s);if(h)return{lazyRoutePromise:h,lazyHandlerPromise:h};let p=(async()=>{cn(typeof t.lazy=="function","No lazy route function found");let y=await t.lazy(),S={};for(let k in y){let C=y[k];if(C===void 0)continue;let E=e8(k),A=s[k]!==void 0&&k!=="hasErrorBoundary";E?Vr(!E,"Route property "+k+" is not a supported property to be returned from a lazy route function. This property will be ignored."):A?Vr(!A,`Route "${s.id}" has a static property "${k}" defined but its lazy function is also returning a value for this property. The lazy route property "${k}" will be ignored.`):S[k]=C}Object.assign(s,S),Object.assign(s,{...r(s),lazy:void 0})})();return VP.set(s,p),p.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:p}}let o=Object.keys(t.lazy),a=[],c;for(let h of o){if(i&&i.includes(h))continue;let p=_D({key:h,route:t,manifest:n,mapRouteProperties:r});p&&(a.push(p),h===e&&(c=p))}let d=a.length>0?Promise.all(a).then(()=>{}):void 0;return d==null||d.catch(()=>{}),c==null||c.catch(()=>{}),{lazyRoutePromise:d,lazyHandlerPromise:c}}async function BP(t){let e=t.matches.filter(i=>i.shouldLoad),n={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,s)=>{n[e[s].route.id]=i}),n}async function O8(t){return t.matches.some(e=>e.route.middleware)?RD(t,()=>BP(t)):BP(t)}function RD(t,e){return D8(t,e,r=>r,$8,n);function n(r,i,s){if(s)return Promise.resolve(Object.assign(s.value,{[i]:{type:"error",result:r}}));{let{matches:o}=t,a=Math.min(Math.max(o.findIndex(d=>d.route.id===i),0),Math.max(o.findIndex(d=>d.unstable_shouldCallHandler()),0)),c=Iu(o,o[a].route.id).route.id;return Promise.resolve({[c]:{type:"error",result:r}})}}}async function D8(t,e,n,r,i){let{matches:s,request:o,params:a,context:c}=t,d=s.flatMap(p=>p.route.middleware?p.route.middleware.map(y=>[p.route.id,y]):[]);return await PD({request:o,params:a,context:c},d,e,n,r,i)}async function PD(t,e,n,r,i,s,o=0){let{request:a}=t;if(a.signal.aborted)throw a.signal.reason??new Error(`Request aborted: ${a.method} ${a.url}`);let c=e[o];if(!c)return await n();let[d,h]=c,p,y=async()=>{if(p)throw new Error("You may only call `next()` once per middleware");try{return p={value:await PD(t,e,n,r,i,s,o+1)},p.value}catch(S){return p={value:await s(S,d,p)},p.value}};try{let S=await h(t,y),k=S!=null?r(S):void 0;return i(k)?k:p?k??p.value:(p={value:await y()},p.value)}catch(S){return await s(S,d,p)}}function AD(t,e,n,r,i){let s=_D({key:"middleware",route:r.route,manifest:e,mapRouteProperties:t}),o=M8(r.route,Ds(n.method)?"action":"loader",e,t,i);return{middleware:s,route:o.lazyRoutePromise,handler:o.lazyHandlerPromise}}function bT(t,e,n,r,i,s,o,a=null){let c=!1,d=AD(t,e,n,r,i);return{...r,_lazyPromises:d,shouldLoad:o,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler(h){return c=!0,a?typeof h=="boolean"?zx(r,{...a,defaultShouldRevalidate:h}):zx(r,a):o},resolve(h){let{lazy:p,loader:y,middleware:S}=r.route,k=c||o||h&&!Ds(n.method)&&(p||y),C=S&&S.length>0&&!y&&!p;return k&&!C?j8({request:n,match:r,lazyHandlerPromise:d==null?void 0:d.handler,lazyRoutePromise:d==null?void 0:d.route,handlerOverride:h,scopedContext:s}):Promise.resolve({type:"data",result:void 0})}}}function Kp(t,e,n,r,i,s,o,a=null){return r.map(c=>c.route.id!==i.route.id?{...c,shouldLoad:!1,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler:()=>!1,_lazyPromises:AD(t,e,n,c,s),resolve:()=>Promise.resolve({type:"data",result:void 0})}:bT(t,e,n,c,s,o,!0,a))}async function L8(t,e,n,r,i,s){n.some(d=>{var h;return(h=d._lazyPromises)==null?void 0:h.middleware})&&await Promise.all(n.map(d=>{var h;return(h=d._lazyPromises)==null?void 0:h.middleware}));let o={request:e,params:n[0].params,context:i,matches:n},c=await t({...o,fetcherKey:r,runClientMiddleware:d=>{let h=o;return RD(h,()=>d({...h,fetcherKey:r,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(n.flatMap(d=>{var h,p;return[(h=d._lazyPromises)==null?void 0:h.handler,(p=d._lazyPromises)==null?void 0:p.route]}))}catch{}return c}async function j8({request:t,match:e,lazyHandlerPromise:n,lazyRoutePromise:r,handlerOverride:i,scopedContext:s}){let o,a,c=Ds(t.method),d=c?"action":"loader",h=p=>{let y,S=new Promise((E,_)=>y=_);a=()=>y(),t.signal.addEventListener("abort",a);let k=E=>typeof p!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${d}" [routeId: ${e.route.id}]`)):p({request:t,params:e.params,context:s},...E!==void 0?[E]:[]),C=(async()=>{try{return{type:"data",result:await(i?i(_=>k(_)):k())}}catch(E){return{type:"error",result:E}}})();return Promise.race([C,S])};try{let p=c?e.route.action:e.route.loader;if(n||r)if(p){let y,[S]=await Promise.all([h(p).catch(k=>{y=k}),n,r]);if(y!==void 0)throw y;o=S}else{await n;let y=c?e.route.action:e.route.loader;if(y)[o]=await Promise.all([h(y),r]);else if(d==="action"){let S=new URL(t.url),k=S.pathname+S.search;throw $o(405,{method:t.method,pathname:k,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(p)o=await h(p);else{let y=new URL(t.url),S=y.pathname+y.search;throw $o(404,{pathname:S})}}catch(p){return{type:"error",result:p}}finally{a&&t.signal.removeEventListener("abort",a)}return o}async function F8(t){let e=t.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?t.body==null?null:t.json():t.text()}async function U8(t){var r,i,s,o,a,c;let{result:e,type:n}=t;if(ND(e)){let d;try{d=await F8(e)}catch(h){return{type:"error",error:h}}return n==="error"?{type:"error",error:new Bx(e.status,e.statusText,d),statusCode:e.status,headers:e.headers}:{type:"data",data:d,statusCode:e.status,headers:e.headers}}return n==="error"?KP(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new Bx(((s=e.init)==null?void 0:s.status)||500,void 0,e.data),statusCode:cy(e)?e.status:void 0,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:cy(e)?e.status:void 0}:KP(e)?{type:"data",data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function V8(t,e,n,r,i){let s=t.headers.get("Location");if(cn(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!pE(s)){let o=r.slice(0,r.findIndex(a=>a.route.id===n)+1);s=vT(new URL(e.url),o,i,s),t.headers.set("Location",s)}return t}function zP(t,e,n){if(pE(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=Ws(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Op(t,e,n,r){let i=t.createURL(ID(e)).toString(),s={signal:n};if(r&&Ds(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=xT(r.formData):s.body=r.formData}return new Request(i,s)}function xT(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function $P(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function B8(t,e,n,r=!1,i=!1){let s={},o=null,a,c=!1,d={},h=n&&co(n[1])?n[1].error:void 0;return t.forEach(p=>{if(!(p.route.id in e))return;let y=p.route.id,S=e[y];if(cn(!yf(S),"Cannot handle redirect results in processLoaderData"),co(S)){let k=S.error;if(h!==void 0&&(k=h,h=void 0),o=o||{},i)o[y]=k;else{let C=Iu(t,y);o[C.route.id]==null&&(o[C.route.id]=k)}r||(s[y]=TD),c||(c=!0,a=cy(S.error)?S.error.status:500),S.headers&&(d[y]=S.headers)}else s[y]=S.data,S.statusCode&&S.statusCode!==200&&!c&&(a=S.statusCode),S.headers&&(d[y]=S.headers)}),h!==void 0&&n&&(o={[n[0]]:h},n[2]&&(s[n[2]]=void 0)),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:d}}function WP(t,e,n,r,i,s){let{loaderData:o,errors:a}=B8(e,n,r);return i.filter(c=>!c.matches||c.matches.some(d=>d.shouldLoad)).forEach(c=>{let{key:d,match:h,controller:p}=c;if(p&&p.signal.aborted)return;let y=s[d];if(cn(y,"Did not find corresponding fetcher result"),co(y)){let S=Iu(t.matches,h==null?void 0:h.route.id);a&&a[S.route.id]||(a={...a,[S.route.id]:y.error}),t.fetchers.delete(d)}else if(yf(y))cn(!1,"Unhandled fetcher revalidation redirect");else{let S=pc(y.data);t.fetchers.set(d,S)}}),{loaderData:o,errors:a}}function HP(t,e,n,r){let i=Object.entries(e).filter(([,s])=>s!==TD).reduce((s,[o,a])=>(s[o]=a,s),{});for(let s of n){let o=s.route.id;if(!e.hasOwnProperty(o)&&t.hasOwnProperty(o)&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function qP(t){return t?co(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Iu(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Ob(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function $o(t,{pathname:e,routeId:n,method:r,type:i,message:s}={}){let o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",r&&e&&n?a=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:i==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a=`Route "${n}" does not match URL "${e}"`):t===404?(o="Not Found",a=`No route matches URL "${e}"`):t===405&&(o="Method Not Allowed",r&&e&&n?a=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(a=`Invalid request method "${r.toUpperCase()}"`)),new Bx(t||500,o,new Error(a),!0)}function Db(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(yf(i))return{key:r,result:i}}}function ID(t){let e=typeof t=="string"?ud(t):t;return Xu({...e,hash:""})}function z8(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function $8(t){return t!=null&&typeof t=="object"&&Object.entries(t).every(([e,n])=>typeof e=="string"&&W8(n))}function W8(t){return t!=null&&typeof t=="object"&&"type"in t&&"result"in t&&(t.type==="data"||t.type==="error")}function H8(t){return ND(t.result)&&k8.has(t.result.status)}function co(t){return t.type==="error"}function yf(t){return(t&&t.type)==="redirect"}function KP(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function ND(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function q8(t){return C8.has(t.toUpperCase())}function Ds(t){return w8.has(t.toUpperCase())}function gE(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function sx(t,e){let n=typeof e=="string"?ud(e).search:e.search;if(t[t.length-1].route.index&&gE(n||""))return t[t.length-1];let r=SD(t);return r[r.length-1]}function GP(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function HC(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function K8(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Sv(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function G8(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function pc(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Y8(t,e){try{let n=t.sessionStorage.getItem(kD);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function Q8(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(kD,JSON.stringify(n))}catch(r){Vr(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function J8(){let t,e,n=new Promise((r,i)=>{t=async s=>{r(s);try{await n}catch{}},e=async s=>{i(s);try{await n}catch{}}});return{promise:n,resolve:t,reject:e}}var Qf=v.createContext(null);Qf.displayName="DataRouter";var Fy=v.createContext(null);Fy.displayName="DataRouterState";v.createContext(!1);var vE=v.createContext({isTransitioning:!1});vE.displayName="ViewTransition";var MD=v.createContext(new Map);MD.displayName="Fetchers";var X8=v.createContext(null);X8.displayName="Await";var Pl=v.createContext(null);Pl.displayName="Navigation";var Dw=v.createContext(null);Dw.displayName="Location";var Aa=v.createContext({outlet:null,matches:[],isDataRoute:!1});Aa.displayName="Route";var yE=v.createContext(null);yE.displayName="RouteError";function Z8(t,{relative:e}={}){cn(Uy(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=v.useContext(Pl),{hash:i,pathname:s,search:o}=Vy(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:yl([n,s])),r.createHref({pathname:a,search:o,hash:i})}function Uy(){return v.useContext(Dw)!=null}function qs(){return cn(Uy(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Dw).location}var OD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function DD(t){v.useContext(Pl).static||v.useLayoutEffect(t)}function Ia(){let{isDataRoute:t}=v.useContext(Aa);return t?pW():eW()}function eW(){cn(Uy(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(Qf),{basename:e,navigator:n}=v.useContext(Pl),{matches:r}=v.useContext(Aa),{pathname:i}=qs(),s=JSON.stringify(fE(r)),o=v.useRef(!1);return DD(()=>{o.current=!0}),v.useCallback((c,d={})=>{if(Vr(o.current,OD),!o.current)return;if(typeof c=="number"){n.go(c);return}let h=hE(c,JSON.parse(s),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:yl([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,s,i,t])}var tW=v.createContext(null);function nW(t){let e=v.useContext(Aa).outlet;return v.useMemo(()=>e&&v.createElement(tW.Provider,{value:t},e),[e,t])}function Jf(){let{matches:t}=v.useContext(Aa),e=t[t.length-1];return e?e.params:{}}function Vy(t,{relative:e}={}){let{matches:n}=v.useContext(Aa),{pathname:r}=qs(),i=JSON.stringify(fE(n));return v.useMemo(()=>hE(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function rW(t,e,n,r,i){cn(Uy(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=v.useContext(Pl),{matches:o}=v.useContext(Aa),a=o[o.length-1],c=a?a.params:{},d=a?a.pathname:"/",h=a?a.pathnameBase:"/",p=a&&a.route;{let A=p&&p.path||"";FD(d,!p||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let y=qs(),S;S=y;let k=S.pathname||"/",C=k;if(h!=="/"){let A=h.replace(/^\//,"").split("/");C="/"+k.replace(/^\//,"").split("/").slice(A.length).join("/")}let E=Au(t,{pathname:C});return Vr(p||E!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Vr(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),lW(E&&E.map(A=>Object.assign({},A,{params:Object.assign({},c,A.params),pathname:yl([h,s.encodeLocation?s.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?h:yl([h,s.encodeLocation?s.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),o,n,r,i)}function iW(){let t=dW(),e=cy(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:s},"ErrorBoundary")," or"," ",v.createElement("code",{style:s},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:i},n):null,o)}var sW=v.createElement(iW,null),oW=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?v.createElement(Aa.Provider,{value:this.props.routeContext},v.createElement(yE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function aW({routeContext:t,match:e,children:n}){let r=v.useContext(Qf);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(Aa.Provider,{value:t},n)}function lW(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let d=s.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);cn(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let a=!1,c=-1;if(n)for(let d=0;d<s.length;d++){let h=s[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:y}=n,S=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!y||y[h.route.id]===void 0);if(h.route.lazy||S){a=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((d,h,p)=>{let y,S=!1,k=null,C=null;n&&(y=o&&h.route.id?o[h.route.id]:void 0,k=h.route.errorElement||sW,a&&(c<0&&p===0?(FD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,C=null):c===p&&(S=!0,C=h.route.hydrateFallbackElement||null)));let E=e.concat(s.slice(0,p+1)),_=()=>{let A;return y?A=k:S?A=C:h.route.Component?A=v.createElement(h.route.Component,null):h.route.element?A=h.route.element:A=d,v.createElement(aW,{match:h,routeContext:{outlet:d,matches:E,isDataRoute:n!=null},children:A})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?v.createElement(oW,{location:n.location,revalidation:n.revalidation,component:k,error:y,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0},unstable_onError:r}):_()},null)}function bE(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LD(t){let e=v.useContext(Qf);return cn(e,bE(t)),e}function jD(t){let e=v.useContext(Fy);return cn(e,bE(t)),e}function cW(t){let e=v.useContext(Aa);return cn(e,bE(t)),e}function xE(t){let e=cW(t),n=e.matches[e.matches.length-1];return cn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function uW(){return xE("useRouteId")}function dW(){var r;let t=v.useContext(yE),e=jD("useRouteError"),n=xE("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}var fW=0;function hW(t){let{router:e,basename:n}=LD("useBlocker"),r=jD("useBlocker"),[i,s]=v.useState(""),o=v.useCallback(a=>{if(typeof t!="function")return!!t;if(n==="/")return t(a);let{currentLocation:c,nextLocation:d,historyAction:h}=a;return t({currentLocation:{...c,pathname:Ws(c.pathname,n)||c.pathname},nextLocation:{...d,pathname:Ws(d.pathname,n)||d.pathname},historyAction:h})},[n,t]);return v.useEffect(()=>{let a=String(++fW);return s(a),()=>e.deleteBlocker(a)},[e]),v.useEffect(()=>{i!==""&&e.getBlocker(i,o)},[e,i,o]),i&&r.blockers.has(i)?r.blockers.get(i):Mp}function pW(){let{router:t}=LD("useNavigate"),e=xE("useNavigate"),n=v.useRef(!1);return DD(()=>{n.current=!0}),v.useCallback(async(i,s={})=>{Vr(n.current,OD),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var YP={};function FD(t,e,n){!e&&!YP[t]&&(YP[t]=!0,Vr(!1,n))}var QP={};function JP(t,e){!t&&!QP[e]&&(QP[e]=!0,console.warn(e))}function mW(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&Vr(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:v.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&Vr(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:v.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&Vr(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:v.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var gW=["HydrateFallback","hydrateFallbackElement"],vW=class{constructor(){this.status="pending",this.promise=new Promise((t,e)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",e(n))}})}};function yW({router:t,flushSync:e,unstable_onError:n}){let[r,i]=v.useState(t.state),[s,o]=v.useState(),[a,c]=v.useState({isTransitioning:!1}),[d,h]=v.useState(),[p,y]=v.useState(),[S,k]=v.useState(),C=v.useRef(new Map),E=v.useCallback(N=>{i(O=>(N.errors&&n&&Object.entries(N.errors).forEach(([j,V])=>{var $;(($=O.errors)==null?void 0:$[j])!==V&&n(V)}),N))},[n]),_=v.useCallback((N,{deletedFetchers:O,flushSync:j,viewTransitionOpts:V})=>{N.fetchers.forEach((W,J)=>{W.data!==void 0&&C.current.set(J,W.data)}),O.forEach(W=>C.current.delete(W)),JP(j===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let $=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(JP(V==null||$,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!V||!$){e&&j?e(()=>E(N)):v.startTransition(()=>E(N));return}if(e&&j){e(()=>{p&&(d&&d.resolve(),p.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:V.currentLocation,nextLocation:V.nextLocation})});let W=t.window.document.startViewTransition(()=>{e(()=>E(N))});W.finished.finally(()=>{e(()=>{h(void 0),y(void 0),o(void 0),c({isTransitioning:!1})})}),e(()=>y(W));return}p?(d&&d.resolve(),p.skipTransition(),k({state:N,currentLocation:V.currentLocation,nextLocation:V.nextLocation})):(o(N),c({isTransitioning:!0,flushSync:!1,currentLocation:V.currentLocation,nextLocation:V.nextLocation}))},[t.window,e,p,d,E]);v.useLayoutEffect(()=>t.subscribe(_),[t,_]),v.useEffect(()=>{a.isTransitioning&&!a.flushSync&&h(new vW)},[a]),v.useEffect(()=>{if(d&&s&&t.window){let N=s,O=d.promise,j=t.window.document.startViewTransition(async()=>{v.startTransition(()=>E(N)),await O});j.finished.finally(()=>{h(void 0),y(void 0),o(void 0),c({isTransitioning:!1})}),y(j)}},[s,d,t.window,E]),v.useEffect(()=>{d&&s&&r.location.key===s.location.key&&d.resolve()},[d,p,r.location,s]),v.useEffect(()=>{!a.isTransitioning&&S&&(o(S.state),c({isTransitioning:!0,flushSync:!1,currentLocation:S.currentLocation,nextLocation:S.nextLocation}),k(void 0))},[a.isTransitioning,S]);let A=v.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:N=>t.navigate(N),push:(N,O,j)=>t.navigate(N,{state:O,preventScrollReset:j==null?void 0:j.preventScrollReset}),replace:(N,O,j)=>t.navigate(N,{replace:!0,state:O,preventScrollReset:j==null?void 0:j.preventScrollReset})}),[t]),M=t.basename||"/",I=v.useMemo(()=>({router:t,navigator:A,static:!1,basename:M,unstable_onError:n}),[t,A,M,n]);return v.createElement(v.Fragment,null,v.createElement(Qf.Provider,{value:I},v.createElement(Fy.Provider,{value:r},v.createElement(MD.Provider,{value:C.current},v.createElement(vE.Provider,{value:a},v.createElement(SW,{basename:M,location:r.location,navigationType:r.historyAction,navigator:A},v.createElement(bW,{routes:t.routes,future:t.future,state:r,unstable_onError:n})))))),null)}var bW=v.memo(xW);function xW({routes:t,future:e,state:n,unstable_onError:r}){return rW(t,void 0,n,r,e)}function wW(t){return nW(t.context)}function SW({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){cn(!Uy(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=v.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=ud(n));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:y="default"}=n,S=v.useMemo(()=>{let k=Ws(c,o);return k==null?null:{location:{pathname:k,search:d,hash:h,state:p,key:y},navigationType:r}},[o,c,d,h,p,y,r]);return Vr(S!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:v.createElement(Pl.Provider,{value:a},v.createElement(Dw.Provider,{children:e,value:S}))}var ox="get",ax="application/x-www-form-urlencoded";function Lw(t){return t!=null&&typeof t.tagName=="string"}function CW(t){return Lw(t)&&t.tagName.toLowerCase()==="button"}function kW(t){return Lw(t)&&t.tagName.toLowerCase()==="form"}function TW(t){return Lw(t)&&t.tagName.toLowerCase()==="input"}function EW(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _W(t,e){return t.button===0&&(!e||e==="_self")&&!EW(t)}function wT(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function RW(t,e){let n=wT(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}var Lb=null;function PW(){if(Lb===null)try{new FormData(document.createElement("form"),0),Lb=!1}catch{Lb=!0}return Lb}var AW=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qC(t){return t!=null&&!AW.has(t)?(Vr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ax}"`),null):t}function IW(t,e){let n,r,i,s,o;if(kW(t)){let a=t.getAttribute("action");r=a?Ws(a,e):null,n=t.getAttribute("method")||ox,i=qC(t.getAttribute("enctype"))||ax,s=new FormData(t)}else if(CW(t)||TW(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||a.getAttribute("action");if(r=c?Ws(c,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||ox,i=qC(t.getAttribute("formenctype"))||qC(a.getAttribute("enctype"))||ax,s=new FormData(a,t),!PW()){let{name:d,type:h,value:p}=t;if(h==="image"){let y=d?`${d}.`:"";s.append(`${y}x`,"0"),s.append(`${y}y`,"0")}else d&&s.append(d,p)}}else{if(Lw(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ox,r=null,i=ax,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function wE(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function NW(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ws(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function MW(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function OW(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function DW(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await MW(s,n);return o.links?o.links():[]}return[]}));return UW(r.flat(1).filter(OW).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function XP(t,e,n,r,i,s){let o=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,a=(c,d)=>{var h;return n[d].pathname!==c.pathname||((h=n[d].route.path)==null?void 0:h.endsWith("*"))&&n[d].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,d)=>o(c,d)||a(c,d)):s==="data"?e.filter((c,d)=>{var p;let h=r.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(o(c,d)||a(c,d))return!0;if(c.route.shouldRevalidate){let y=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function LW(t,e,{includeHydrateFallback:n}={}){return jW(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function jW(t){return[...new Set(t)]}function FW(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function UW(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(FW(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function UD(){let t=v.useContext(Qf);return wE(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function VW(){let t=v.useContext(Fy);return wE(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var SE=v.createContext(void 0);SE.displayName="FrameworkContext";function VD(){let t=v.useContext(SE);return wE(t,"You must render this element inside a <HydratedRouter> element"),t}function BW(t,e){let n=v.useContext(SE),[r,i]=v.useState(!1),[s,o]=v.useState(!1),{onFocus:a,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=e,y=v.useRef(null);v.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let C=_=>{_.forEach(A=>{o(A.isIntersecting)})},E=new IntersectionObserver(C,{threshold:.5});return y.current&&E.observe(y.current),()=>{E.disconnect()}}},[t]),v.useEffect(()=>{if(r){let C=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(C)}}},[r]);let S=()=>{i(!0)},k=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,y,{}]:[s,y,{onFocus:Cv(a,S),onBlur:Cv(c,k),onMouseEnter:Cv(d,S),onMouseLeave:Cv(h,k),onTouchStart:Cv(p,S)}]:[!1,y,{}]}function Cv(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function zW({page:t,...e}){let{router:n}=UD(),r=v.useMemo(()=>Au(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?v.createElement(WW,{page:t,matches:r,...e}):null}function $W(t){let{manifest:e,routeModules:n}=VD(),[r,i]=v.useState([]);return v.useEffect(()=>{let s=!1;return DW(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function WW({page:t,matches:e,...n}){let r=qs(),{manifest:i,routeModules:s}=VD(),{basename:o}=UD(),{loaderData:a,matches:c}=VW(),d=v.useMemo(()=>XP(t,e,c,i,r,"data"),[t,e,c,i,r]),h=v.useMemo(()=>XP(t,e,c,i,r,"assets"),[t,e,c,i,r]),p=v.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let k=new Set,C=!1;if(e.forEach(_=>{var M;let A=i.routes[_.route.id];!A||!A.hasLoader||(!d.some(I=>I.route.id===_.route.id)&&_.route.id in a&&((M=s[_.route.id])!=null&&M.shouldRevalidate)||A.hasClientLoader?C=!0:k.add(_.route.id))}),k.size===0)return[];let E=NW(t,o,"data");return C&&k.size>0&&E.searchParams.set("_routes",e.filter(_=>k.has(_.route.id)).map(_=>_.route.id).join(",")),[E.pathname+E.search]},[o,a,r,i,d,e,t,s]),y=v.useMemo(()=>LW(h,i),[h,i]),S=$W(h);return v.createElement(v.Fragment,null,p.map(k=>v.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),y.map(k=>v.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),S.map(({key:k,link:C})=>v.createElement("link",{key:k,nonce:n.nonce,...C})))}function HW(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var BD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{BD&&(window.__reactRouterVersion="7.9.4")}catch{}function qW(t,e){return P8({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:G6({window:e==null?void 0:e.window}),hydrationData:KW(),routes:t,mapRouteProperties:mW,hydrationRouteProperties:gW,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function KW(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:GW(t.errors)}),t}function GW(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Bx(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}var zD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$D=v.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:c,to:d,preventScrollReset:h,viewTransition:p,...y},S){let{basename:k}=v.useContext(Pl),C=typeof d=="string"&&zD.test(d),E,_=!1;if(typeof d=="string"&&C&&(E=d,BD))try{let $=new URL(window.location.href),W=d.startsWith("//")?new URL($.protocol+d):new URL(d),J=Ws(W.pathname,k);W.origin===$.origin&&J!=null?d=J+W.search+W.hash:_=!0}catch{Vr(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=Z8(d,{relative:i}),[M,I,N]=BW(r,y),O=XW(d,{replace:o,state:a,target:c,preventScrollReset:h,relative:i,viewTransition:p});function j($){e&&e($),$.defaultPrevented||O($)}let V=v.createElement("a",{...y,...N,href:E||A,onClick:_||s?e:j,ref:HW(S,I),target:c,"data-discover":!C&&n==="render"?"true":void 0});return M&&!C?v.createElement(v.Fragment,null,V,v.createElement(zW,{page:A})):V});$D.displayName="Link";var YW=v.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:c,...d},h){let p=Vy(o,{relative:d.relative}),y=qs(),S=v.useContext(Fy),{navigator:k,basename:C}=v.useContext(Pl),E=S!=null&&iH(p)&&a===!0,_=k.encodeLocation?k.encodeLocation(p).pathname:p.pathname,A=y.pathname,M=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;n||(A=A.toLowerCase(),M=M?M.toLowerCase():null,_=_.toLowerCase()),M&&C&&(M=Ws(M,C)||M);const I=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let N=A===_||!i&&A.startsWith(_)&&A.charAt(I)==="/",O=M!=null&&(M===_||!i&&M.startsWith(_)&&M.charAt(_.length)==="/"),j={isActive:N,isPending:O,isTransitioning:E},V=N?e:void 0,$;typeof r=="function"?$=r(j):$=[r,N?"active":null,O?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let W=typeof s=="function"?s(j):s;return v.createElement($D,{...d,"aria-current":V,className:$,ref:h,style:W,to:o,viewTransition:a},typeof c=="function"?c(j):c)});YW.displayName="NavLink";var QW=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=ox,action:a,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:p,...y},S)=>{let k=nH(),C=rH(a,{relative:d}),E=o.toLowerCase()==="get"?"get":"post",_=typeof a=="string"&&zD.test(a),A=M=>{if(c&&c(M),M.defaultPrevented)return;M.preventDefault();let I=M.nativeEvent.submitter,N=(I==null?void 0:I.getAttribute("formmethod"))||o;k(I||M.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:i,state:s,relative:d,preventScrollReset:h,viewTransition:p})};return v.createElement("form",{ref:S,method:E,action:C,onSubmit:r?c:A,...y,"data-discover":!_&&t==="render"?"true":void 0})});QW.displayName="Form";function JW(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WD(t){let e=v.useContext(Qf);return cn(e,JW(t)),e}function XW(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=Ia(),c=qs(),d=Vy(t,{relative:s});return v.useCallback(h=>{if(_W(h,e)){h.preventDefault();let p=n!==void 0?n:Xu(c)===Xu(d);a(t,{replace:p,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[c,a,d,n,r,e,t,i,s,o])}function ZW(t){Vr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=v.useRef(wT(t)),n=v.useRef(!1),r=qs(),i=v.useMemo(()=>RW(r.search,n.current?null:e.current),[r.search]),s=Ia(),o=v.useCallback((a,c)=>{const d=wT(typeof a=="function"?a(new URLSearchParams(i)):a);n.current=!0,s("?"+d,c)},[s,i]);return[i,o]}var eH=0,tH=()=>`__${String(++eH)}__`;function nH(){let{router:t}=WD("useSubmit"),{basename:e}=v.useContext(Pl),n=uW();return v.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:c,body:d}=IW(r,e);if(i.navigate===!1){let h=i.fetcherKey||tH();await t.fetch(h,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function rH(t,{relative:e}={}){let{basename:n}=v.useContext(Pl),r=v.useContext(Aa);cn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Vy(t||".",{relative:e})},o=qs();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),c=a.getAll("index");if(c.some(h=>h==="")){a.delete("index"),c.filter(p=>p).forEach(p=>a.append("index",p));let h=a.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:yl([n,s.pathname])),Xu(s)}function iH(t,{relative:e}={}){let n=v.useContext(vE);cn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=WD("useViewTransitionState"),i=Vy(t,{relative:e});if(!n.isTransitioning)return!1;let s=Ws(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ws(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Vx(i.pathname,o)!=null||Vx(i.pathname,s)!=null}var Xf=sD();const HD=Nw(Xf);function sH(t){return v.createElement(yW,{flushSync:Xf.flushSync,...t})}const Bm="https://api.panos-dev.com",By="wss://api.panos-dev.com",qD=v.createContext(void 0),oH=({children:t})=>{const e=v.useRef(null),[n,r]=v.useState(!1),[i,s]=v.useState([]),[o,a]=v.useState([]),[c,d]=v.useState([]),[h,p]=v.useState({}),y=(E,_)=>{(!e.current||e.current.readyState!==WebSocket.OPEN)&&(e.current&&e.current.close(),e.current=new WebSocket(`${By}/ws/user-events/${E}`),e.current.onopen=()=>{r(!0)},e.current.onclose=()=>{r(!1)},e.current.onerror=()=>{r(!1)},e.current.onmessage=A=>{try{const M=JSON.parse(A.data);switch(M.type){case"media.state.updated":M.participant_id!==_&&p(I=>({...I,[M.participant_id]:M.payload}));break;case"media.synced":if(M.participant_id!==_){const I=M.payload,{[_]:N,...O}=I;p(O)}break;case"reaction.sent":s(I=>[...I,{...M.payload,id:`${M.session_id}-${Date.now()}`}]),setTimeout(()=>{s(I=>I.slice(1))},5e3);break;case"raisedhand.sent":a(I=>[...I,M.payload]),setTimeout(()=>{a(I=>I.slice(1))},1e4);break;case"sharescreen.started":d(I=>[...I,M.payload]);break;case"sharescreen.ended":d(I=>I.filter(N=>N.trackSid!==M.payload.trackSid));break}}catch(M){console.error("Failed to parse incoming event:",M)}})},S=()=>{var E;(E=e.current)==null||E.close(),e.current=null,r(!1)},k=E=>{e.current&&e.current.readyState===WebSocket.OPEN?e.current.send(JSON.stringify(E)):console.warn("WebSocket not ready, message not sent:",E)},C={reactionEvents:i,raisedHandEvents:o,shareScreenEvents:c,remoteMediaStates:h};return b.jsx(qD.Provider,{value:{ws:e.current,isConnected:n,events:C,connectUserEvents:y,sendUserEvent:k,disconnectUserEvents:S},children:t})},Na=()=>{const t=v.useContext(qD);if(!t)throw new Error("No events context.");return t},KD=v.createContext(void 0),aH=({children:t})=>{const{connectUserEvents:e,disconnectUserEvents:n,sendUserEvent:r,isConnected:i,events:{remoteMediaStates:s}}=Na(),[o,a]=v.useState({audio:!1,video:!1}),[c,d]=v.useState(null),[h,p]=v.useState(null),[y,S]=v.useState(null),[k,C]=v.useState(null),E=(V,$)=>{_(),e(V,$,"")},_=()=>{n()};v.useEffect(()=>()=>{n()},[]);const A=async(V,$="")=>{const W={...o,audio:V};if(a(W),i&&$){const J={type:"media.state.updated",participant_id:$,payload:{audio:W.audio,video:W.video}};r(J)}},M=async(V,$="")=>{const W={...o,video:V};if(a(W),i&&$){const J={type:"media.state.updated",participant_id:$,payload:{audio:W.audio,video:W.video}};r(J)}},I=async V=>{d({deviceId:V.deviceId,label:V.label}),o.audio&&(await A(!1),await A(!0))},N=async V=>{p({deviceId:V.deviceId,label:V.label}),o.video&&(await M(!1),await M(!0))},O=async V=>{C(V)},j=async V=>{S(V)};return b.jsx(KD.Provider,{value:{connectMedia:E,disconnectMedia:_,mediaState:o,remoteMediaStates:s,setAudioState:A,setVideoState:M,setAudioDevice:I,setVideoDevice:N,audioDevice:c,videoDevice:h,audioTrack:k,videoTrack:y,setAudioTrack:O,setVideoTrack:j},children:t})},CE=()=>{const t=v.useContext(KD);if(!t)throw new Error("No media context.");return t};function GD(t,e){return function(){return t.apply(e,arguments)}}const{toString:lH}=Object.prototype,{getPrototypeOf:kE}=Object,{iterator:jw,toStringTag:YD}=Symbol,Fw=(t=>e=>{const n=lH.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ma=t=>(t=t.toLowerCase(),e=>Fw(e)===t),Uw=t=>e=>typeof e===t,{isArray:zm}=Array,xm=Uw("undefined");function zy(t){return t!==null&&!xm(t)&&t.constructor!==null&&!xm(t.constructor)&&Us(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const QD=Ma("ArrayBuffer");function cH(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&QD(t.buffer),e}const uH=Uw("string"),Us=Uw("function"),JD=Uw("number"),$y=t=>t!==null&&typeof t=="object",dH=t=>t===!0||t===!1,lx=t=>{if(Fw(t)!=="object")return!1;const e=kE(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(YD in t)&&!(jw in t)},fH=t=>{if(!$y(t)||zy(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},hH=Ma("Date"),pH=Ma("File"),mH=Ma("Blob"),gH=Ma("FileList"),vH=t=>$y(t)&&Us(t.pipe),yH=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Us(t.append)&&((e=Fw(t))==="formdata"||e==="object"&&Us(t.toString)&&t.toString()==="[object FormData]"))},bH=Ma("URLSearchParams"),[xH,wH,SH,CH]=["ReadableStream","Request","Response","Headers"].map(Ma),kH=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Wy(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),zm(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(zy(t))return;const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function XD(t,e){if(zy(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const bf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ZD=t=>!xm(t)&&t!==bf;function ST(){const{caseless:t,skipUndefined:e}=ZD(this)&&this||{},n={},r=(i,s)=>{const o=t&&XD(n,s)||s;lx(n[o])&&lx(i)?n[o]=ST(n[o],i):lx(i)?n[o]=ST({},i):zm(i)?n[o]=i.slice():(!e||!xm(i))&&(n[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Wy(arguments[i],r);return n}const TH=(t,e,n,{allOwnKeys:r}={})=>(Wy(e,(i,s)=>{n&&Us(i)?t[s]=GD(i,n):t[s]=i},{allOwnKeys:r}),t),EH=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),_H=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},RH=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&kE(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},PH=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},AH=t=>{if(!t)return null;if(zm(t))return t;let e=t.length;if(!JD(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},IH=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&kE(Uint8Array)),NH=(t,e)=>{const r=(t&&t[jw]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},MH=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},OH=Ma("HTMLFormElement"),DH=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),ZP=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),LH=Ma("RegExp"),eL=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Wy(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},jH=t=>{eL(t,(e,n)=>{if(Us(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Us(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},FH=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return zm(t)?r(t):r(String(t).split(e)),n},UH=()=>{},VH=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function BH(t){return!!(t&&Us(t.append)&&t[YD]==="FormData"&&t[jw])}const zH=t=>{const e=new Array(10),n=(r,i)=>{if($y(r)){if(e.indexOf(r)>=0)return;if(zy(r))return r;if(!("toJSON"in r)){e[i]=r;const s=zm(r)?[]:{};return Wy(r,(o,a)=>{const c=n(o,i+1);!xm(c)&&(s[a]=c)}),e[i]=void 0,s}}return r};return n(t,0)},$H=Ma("AsyncFunction"),WH=t=>t&&($y(t)||Us(t))&&Us(t.then)&&Us(t.catch),tL=((t,e)=>t?setImmediate:e?((n,r)=>(bf.addEventListener("message",({source:i,data:s})=>{i===bf&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),bf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Us(bf.postMessage)),HH=typeof queueMicrotask<"u"?queueMicrotask.bind(bf):typeof process<"u"&&process.nextTick||tL,qH=t=>t!=null&&Us(t[jw]),ke={isArray:zm,isArrayBuffer:QD,isBuffer:zy,isFormData:yH,isArrayBufferView:cH,isString:uH,isNumber:JD,isBoolean:dH,isObject:$y,isPlainObject:lx,isEmptyObject:fH,isReadableStream:xH,isRequest:wH,isResponse:SH,isHeaders:CH,isUndefined:xm,isDate:hH,isFile:pH,isBlob:mH,isRegExp:LH,isFunction:Us,isStream:vH,isURLSearchParams:bH,isTypedArray:IH,isFileList:gH,forEach:Wy,merge:ST,extend:TH,trim:kH,stripBOM:EH,inherits:_H,toFlatObject:RH,kindOf:Fw,kindOfTest:Ma,endsWith:PH,toArray:AH,forEachEntry:NH,matchAll:MH,isHTMLForm:OH,hasOwnProperty:ZP,hasOwnProp:ZP,reduceDescriptors:eL,freezeMethods:jH,toObjectSet:FH,toCamelCase:DH,noop:UH,toFiniteNumber:VH,findKey:XD,global:bf,isContextDefined:ZD,isSpecCompliantForm:BH,toJSONObject:zH,isAsyncFn:$H,isThenable:WH,setImmediate:tL,asap:HH,isIterable:qH};function qt(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}ke.inherits(qt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ke.toJSONObject(this.config),code:this.code,status:this.status}}});const nL=qt.prototype,rL={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{rL[t]={value:t}});Object.defineProperties(qt,rL);Object.defineProperty(nL,"isAxiosError",{value:!0});qt.from=(t,e,n,r,i,s)=>{const o=Object.create(nL);ke.toFlatObject(t,o,function(h){return h!==Error.prototype},d=>d!=="isAxiosError");const a=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return qt.call(o,a,c,n,r,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const KH=null;function CT(t){return ke.isPlainObject(t)||ke.isArray(t)}function iL(t){return ke.endsWith(t,"[]")?t.slice(0,-2):t}function eA(t,e,n){return t?t.concat(e).map(function(i,s){return i=iL(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function GH(t){return ke.isArray(t)&&!t.some(CT)}const YH=ke.toFlatObject(ke,{},null,function(e){return/^is[A-Z]/.test(e)});function Vw(t,e,n){if(!ke.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=ke.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,E){return!ke.isUndefined(E[C])});const r=n.metaTokens,i=n.visitor||h,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&ke.isSpecCompliantForm(e);if(!ke.isFunction(i))throw new TypeError("visitor must be a function");function d(k){if(k===null)return"";if(ke.isDate(k))return k.toISOString();if(ke.isBoolean(k))return k.toString();if(!c&&ke.isBlob(k))throw new qt("Blob is not supported. Use a Buffer instead.");return ke.isArrayBuffer(k)||ke.isTypedArray(k)?c&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function h(k,C,E){let _=k;if(k&&!E&&typeof k=="object"){if(ke.endsWith(C,"{}"))C=r?C:C.slice(0,-2),k=JSON.stringify(k);else if(ke.isArray(k)&&GH(k)||(ke.isFileList(k)||ke.endsWith(C,"[]"))&&(_=ke.toArray(k)))return C=iL(C),_.forEach(function(M,I){!(ke.isUndefined(M)||M===null)&&e.append(o===!0?eA([C],I,s):o===null?C:C+"[]",d(M))}),!1}return CT(k)?!0:(e.append(eA(E,C,s),d(k)),!1)}const p=[],y=Object.assign(YH,{defaultVisitor:h,convertValue:d,isVisitable:CT});function S(k,C){if(!ke.isUndefined(k)){if(p.indexOf(k)!==-1)throw Error("Circular reference detected in "+C.join("."));p.push(k),ke.forEach(k,function(_,A){(!(ke.isUndefined(_)||_===null)&&i.call(e,_,ke.isString(A)?A.trim():A,C,y))===!0&&S(_,C?C.concat(A):[A])}),p.pop()}}if(!ke.isObject(t))throw new TypeError("data must be an object");return S(t),e}function tA(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function TE(t,e){this._pairs=[],t&&Vw(t,this,e)}const sL=TE.prototype;sL.append=function(e,n){this._pairs.push([e,n])};sL.toString=function(e){const n=e?function(r){return e.call(this,r,tA)}:tA;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function QH(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function oL(t,e,n){if(!e)return t;const r=n&&n.encode||QH;ke.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=ke.isURLSearchParams(e)?e.toString():new TE(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class nA{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ke.forEach(this.handlers,function(r){r!==null&&e(r)})}}const aL={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},JH=typeof URLSearchParams<"u"?URLSearchParams:TE,XH=typeof FormData<"u"?FormData:null,ZH=typeof Blob<"u"?Blob:null,e9={isBrowser:!0,classes:{URLSearchParams:JH,FormData:XH,Blob:ZH},protocols:["http","https","file","blob","url","data"]},EE=typeof window<"u"&&typeof document<"u",kT=typeof navigator=="object"&&navigator||void 0,t9=EE&&(!kT||["ReactNative","NativeScript","NS"].indexOf(kT.product)<0),n9=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",r9=EE&&window.location.href||"http://localhost",i9=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:EE,hasStandardBrowserEnv:t9,hasStandardBrowserWebWorkerEnv:n9,navigator:kT,origin:r9},Symbol.toStringTag,{value:"Module"})),Wi={...i9,...e9};function s9(t,e){return Vw(t,new Wi.classes.URLSearchParams,{visitor:function(n,r,i,s){return Wi.isNode&&ke.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function o9(t){return ke.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function a9(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function lL(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=s>=n.length;return o=!o&&ke.isArray(i)?i.length:o,c?(ke.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!ke.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&ke.isArray(i[o])&&(i[o]=a9(i[o])),!a)}if(ke.isFormData(t)&&ke.isFunction(t.entries)){const n={};return ke.forEachEntry(t,(r,i)=>{e(o9(r),i,n,0)}),n}return null}function l9(t,e,n){if(ke.isString(t))try{return(e||JSON.parse)(t),ke.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Hy={transitional:aL,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=ke.isObject(e);if(s&&ke.isHTMLForm(e)&&(e=new FormData(e)),ke.isFormData(e))return i?JSON.stringify(lL(e)):e;if(ke.isArrayBuffer(e)||ke.isBuffer(e)||ke.isStream(e)||ke.isFile(e)||ke.isBlob(e)||ke.isReadableStream(e))return e;if(ke.isArrayBufferView(e))return e.buffer;if(ke.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return s9(e,this.formSerializer).toString();if((a=ke.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Vw(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),l9(e)):e}],transformResponse:[function(e){const n=this.transitional||Hy.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(ke.isResponse(e)||ke.isReadableStream(e))return e;if(e&&ke.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?qt.from(a,qt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wi.classes.FormData,Blob:Wi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ke.forEach(["delete","get","head","post","put","patch"],t=>{Hy.headers[t]={}});const c9=ke.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),u9=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&c9[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},rA=Symbol("internals");function kv(t){return t&&String(t).trim().toLowerCase()}function cx(t){return t===!1||t==null?t:ke.isArray(t)?t.map(cx):String(t)}function d9(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const f9=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function KC(t,e,n,r,i){if(ke.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!ke.isString(e)){if(ke.isString(r))return e.indexOf(r)!==-1;if(ke.isRegExp(r))return r.test(e)}}function h9(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function p9(t,e){const n=ke.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let Vs=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,c,d){const h=kv(c);if(!h)throw new Error("header name must be a non-empty string");const p=ke.findKey(i,h);(!p||i[p]===void 0||d===!0||d===void 0&&i[p]!==!1)&&(i[p||c]=cx(a))}const o=(a,c)=>ke.forEach(a,(d,h)=>s(d,h,c));if(ke.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(ke.isString(e)&&(e=e.trim())&&!f9(e))o(u9(e),n);else if(ke.isObject(e)&&ke.isIterable(e)){let a={},c,d;for(const h of e){if(!ke.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[d=h[0]]=(c=a[d])?ke.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(a,n)}else e!=null&&s(n,e,r);return this}get(e,n){if(e=kv(e),e){const r=ke.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return d9(i);if(ke.isFunction(n))return n.call(this,i,r);if(ke.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=kv(e),e){const r=ke.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||KC(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=kv(o),o){const a=ke.findKey(r,o);a&&(!n||KC(r,r[a],a,n))&&(delete r[a],i=!0)}}return ke.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||KC(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return ke.forEach(this,(i,s)=>{const o=ke.findKey(r,s);if(o){n[o]=cx(i),delete n[s];return}const a=e?h9(s):String(s).trim();a!==s&&delete n[s],n[a]=cx(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return ke.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&ke.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[rA]=this[rA]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=kv(o);r[a]||(p9(i,o),r[a]=!0)}return ke.isArray(e)?e.forEach(s):s(e),this}};Vs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ke.reduceDescriptors(Vs.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});ke.freezeMethods(Vs);function GC(t,e){const n=this||Hy,r=e||n,i=Vs.from(r.headers);let s=r.data;return ke.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function cL(t){return!!(t&&t.__CANCEL__)}function $m(t,e,n){qt.call(this,t??"canceled",qt.ERR_CANCELED,e,n),this.name="CanceledError"}ke.inherits($m,qt,{__CANCEL__:!0});function uL(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new qt("Request failed with status code "+n.status,[qt.ERR_BAD_REQUEST,qt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function m9(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function g9(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),h=r[s];o||(o=d),n[i]=c,r[i]=d;let p=s,y=0;for(;p!==i;)y+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),d-o<e)return;const S=h&&d-h;return S?Math.round(y*1e3/S):void 0}}function v9(t,e){let n=0,r=1e3/e,i,s;const o=(d,h=Date.now())=>{n=h,i=null,s&&(clearTimeout(s),s=null),t(...d)};return[(...d)=>{const h=Date.now(),p=h-n;p>=r?o(d,h):(i=d,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const $x=(t,e,n=3)=>{let r=0;const i=g9(50,250);return v9(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,c=o-r,d=i(c),h=o<=a;r=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:d||void 0,estimated:d&&a&&h?(a-o)/d:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(p)},n)},iA=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},sA=t=>(...e)=>ke.asap(()=>t(...e)),y9=Wi.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Wi.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Wi.origin),Wi.navigator&&/(msie|trident)/i.test(Wi.navigator.userAgent)):()=>!0,b9=Wi.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];ke.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),ke.isString(r)&&o.push("path="+r),ke.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function x9(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function w9(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function dL(t,e,n){let r=!x9(e);return t&&(r||n==!1)?w9(t,e):e}const oA=t=>t instanceof Vs?{...t}:t;function Vf(t,e){e=e||{};const n={};function r(d,h,p,y){return ke.isPlainObject(d)&&ke.isPlainObject(h)?ke.merge.call({caseless:y},d,h):ke.isPlainObject(h)?ke.merge({},h):ke.isArray(h)?h.slice():h}function i(d,h,p,y){if(ke.isUndefined(h)){if(!ke.isUndefined(d))return r(void 0,d,p,y)}else return r(d,h,p,y)}function s(d,h){if(!ke.isUndefined(h))return r(void 0,h)}function o(d,h){if(ke.isUndefined(h)){if(!ke.isUndefined(d))return r(void 0,d)}else return r(void 0,h)}function a(d,h,p){if(p in e)return r(d,h);if(p in t)return r(void 0,d)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(d,h,p)=>i(oA(d),oA(h),p,!0)};return ke.forEach(Object.keys({...t,...e}),function(h){const p=c[h]||i,y=p(t[h],e[h],h);ke.isUndefined(y)&&p!==a||(n[h]=y)}),n}const fL=t=>{const e=Vf({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=Vs.from(o),e.url=oL(dL(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),ke.isFormData(n)){if(Wi.hasStandardBrowserEnv||Wi.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ke.isFunction(n.getHeaders)){const c=n.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([h,p])=>{d.includes(h.toLowerCase())&&o.set(h,p)})}}if(Wi.hasStandardBrowserEnv&&(r&&ke.isFunction(r)&&(r=r(e)),r||r!==!1&&y9(e.url))){const c=i&&s&&b9.read(s);c&&o.set(i,c)}return e},S9=typeof XMLHttpRequest<"u",C9=S9&&function(t){return new Promise(function(n,r){const i=fL(t);let s=i.data;const o=Vs.from(i.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:d}=i,h,p,y,S,k;function C(){S&&S(),k&&k(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let E=new XMLHttpRequest;E.open(i.method.toUpperCase(),i.url,!0),E.timeout=i.timeout;function _(){if(!E)return;const M=Vs.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),N={data:!a||a==="text"||a==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:M,config:t,request:E};uL(function(j){n(j),C()},function(j){r(j),C()},N),E=null}"onloadend"in E?E.onloadend=_:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(_)},E.onabort=function(){E&&(r(new qt("Request aborted",qt.ECONNABORTED,t,E)),E=null)},E.onerror=function(I){const N=I&&I.message?I.message:"Network Error",O=new qt(N,qt.ERR_NETWORK,t,E);O.event=I||null,r(O),E=null},E.ontimeout=function(){let I=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const N=i.transitional||aL;i.timeoutErrorMessage&&(I=i.timeoutErrorMessage),r(new qt(I,N.clarifyTimeoutError?qt.ETIMEDOUT:qt.ECONNABORTED,t,E)),E=null},s===void 0&&o.setContentType(null),"setRequestHeader"in E&&ke.forEach(o.toJSON(),function(I,N){E.setRequestHeader(N,I)}),ke.isUndefined(i.withCredentials)||(E.withCredentials=!!i.withCredentials),a&&a!=="json"&&(E.responseType=i.responseType),d&&([y,k]=$x(d,!0),E.addEventListener("progress",y)),c&&E.upload&&([p,S]=$x(c),E.upload.addEventListener("progress",p),E.upload.addEventListener("loadend",S)),(i.cancelToken||i.signal)&&(h=M=>{E&&(r(!M||M.type?new $m(null,t,E):M),E.abort(),E=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const A=m9(i.url);if(A&&Wi.protocols.indexOf(A)===-1){r(new qt("Unsupported protocol "+A+":",qt.ERR_BAD_REQUEST,t));return}E.send(s||null)})},k9=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(d){if(!i){i=!0,a();const h=d instanceof Error?d:this.reason;r.abort(h instanceof qt?h:new $m(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,s(new qt(`timeout ${e} of ms exceeded`,qt.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),t=null)};t.forEach(d=>d.addEventListener("abort",s));const{signal:c}=r;return c.unsubscribe=()=>ke.asap(a),c}},T9=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},E9=async function*(t,e){for await(const n of _9(t))yield*T9(n,e)},_9=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},aA=(t,e,n,r)=>{const i=E9(t,e);let s=0,o,a=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:d,value:h}=await i.next();if(d){a(),c.close();return}let p=h.byteLength;if(n){let y=s+=p;n(y)}c.enqueue(new Uint8Array(h))}catch(d){throw a(d),d}},cancel(c){return a(c),i.return()}},{highWaterMark:2})},lA=64*1024,{isFunction:jb}=ke,R9=(({Request:t,Response:e})=>({Request:t,Response:e}))(ke.global),{ReadableStream:cA,TextEncoder:uA}=ke.global,dA=(t,...e)=>{try{return!!t(...e)}catch{return!1}},P9=t=>{t=ke.merge.call({skipUndefined:!0},R9,t);const{fetch:e,Request:n,Response:r}=t,i=e?jb(e):typeof fetch=="function",s=jb(n),o=jb(r);if(!i)return!1;const a=i&&jb(cA),c=i&&(typeof uA=="function"?(k=>C=>k.encode(C))(new uA):async k=>new Uint8Array(await new n(k).arrayBuffer())),d=s&&a&&dA(()=>{let k=!1;const C=new n(Wi.origin,{body:new cA,method:"POST",get duplex(){return k=!0,"half"}}).headers.has("Content-Type");return k&&!C}),h=o&&a&&dA(()=>ke.isReadableStream(new r("").body)),p={stream:h&&(k=>k.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(k=>{!p[k]&&(p[k]=(C,E)=>{let _=C&&C[k];if(_)return _.call(C);throw new qt(`Response type '${k}' is not supported`,qt.ERR_NOT_SUPPORT,E)})});const y=async k=>{if(k==null)return 0;if(ke.isBlob(k))return k.size;if(ke.isSpecCompliantForm(k))return(await new n(Wi.origin,{method:"POST",body:k}).arrayBuffer()).byteLength;if(ke.isArrayBufferView(k)||ke.isArrayBuffer(k))return k.byteLength;if(ke.isURLSearchParams(k)&&(k=k+""),ke.isString(k))return(await c(k)).byteLength},S=async(k,C)=>{const E=ke.toFiniteNumber(k.getContentLength());return E??y(C)};return async k=>{let{url:C,method:E,data:_,signal:A,cancelToken:M,timeout:I,onDownloadProgress:N,onUploadProgress:O,responseType:j,headers:V,withCredentials:$="same-origin",fetchOptions:W}=fL(k),J=e||fetch;j=j?(j+"").toLowerCase():"text";let Y=k9([A,M&&M.toAbortSignal()],I),pe=null;const fe=Y&&Y.unsubscribe&&(()=>{Y.unsubscribe()});let Ee;try{if(O&&d&&E!=="get"&&E!=="head"&&(Ee=await S(V,_))!==0){let B=new n(C,{method:"POST",body:_,duplex:"half"}),de;if(ke.isFormData(_)&&(de=B.headers.get("content-type"))&&V.setContentType(de),B.body){const[se,me]=iA(Ee,$x(sA(O)));_=aA(B.body,lA,se,me)}}ke.isString($)||($=$?"include":"omit");const le=s&&"credentials"in n.prototype,Se={...W,signal:Y,method:E.toUpperCase(),headers:V.normalize().toJSON(),body:_,duplex:"half",credentials:le?$:void 0};pe=s&&new n(C,Se);let q=await(s?J(pe,W):J(C,Se));const te=h&&(j==="stream"||j==="response");if(h&&(N||te&&fe)){const B={};["status","statusText","headers"].forEach(Te=>{B[Te]=q[Te]});const de=ke.toFiniteNumber(q.headers.get("content-length")),[se,me]=N&&iA(de,$x(sA(N),!0))||[];q=new r(aA(q.body,lA,se,()=>{me&&me(),fe&&fe()}),B)}j=j||"text";let ae=await p[ke.findKey(p,j)||"text"](q,k);return!te&&fe&&fe(),await new Promise((B,de)=>{uL(B,de,{data:ae,headers:Vs.from(q.headers),status:q.status,statusText:q.statusText,config:k,request:pe})})}catch(le){throw fe&&fe(),le&&le.name==="TypeError"&&/Load failed|fetch/i.test(le.message)?Object.assign(new qt("Network Error",qt.ERR_NETWORK,k,pe),{cause:le.cause||le}):qt.from(le,le&&le.code,k,pe)}}},A9=new Map,hL=t=>{let e=t?t.env:{};const{fetch:n,Request:r,Response:i}=e,s=[r,i,n];let o=s.length,a=o,c,d,h=A9;for(;a--;)c=s[a],d=h.get(c),d===void 0&&h.set(c,d=a?new Map:P9(e)),h=d;return d};hL();const TT={http:KH,xhr:C9,fetch:{get:hL}};ke.forEach(TT,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const fA=t=>`- ${t}`,I9=t=>ke.isFunction(t)||t===null||t===!1,pL={getAdapter:(t,e)=>{t=ke.isArray(t)?t:[t];const{length:n}=t;let r,i;const s={};for(let o=0;o<n;o++){r=t[o];let a;if(i=r,!I9(r)&&(i=TT[(a=String(r)).toLowerCase()],i===void 0))throw new qt(`Unknown adapter '${a}'`);if(i&&(ke.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let a=n?o.length>1?`since :
`+o.map(fA).join(`
`):" "+fA(o[0]):"as no adapter specified";throw new qt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:TT};function YC(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new $m(null,t)}function hA(t){return YC(t),t.headers=Vs.from(t.headers),t.data=GC.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),pL.getAdapter(t.adapter||Hy.adapter,t)(t).then(function(r){return YC(t),r.data=GC.call(t,t.transformResponse,r),r.headers=Vs.from(r.headers),r},function(r){return cL(r)||(YC(t),r&&r.response&&(r.response.data=GC.call(t,t.transformResponse,r.response),r.response.headers=Vs.from(r.response.headers))),Promise.reject(r)})}const mL="1.12.2",Bw={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Bw[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const pA={};Bw.transitional=function(e,n,r){function i(s,o){return"[Axios v"+mL+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new qt(i(o," has been removed"+(n?" in "+n:"")),qt.ERR_DEPRECATED);return n&&!pA[o]&&(pA[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};Bw.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function N9(t,e,n){if(typeof t!="object")throw new qt("options must be an object",qt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new qt("option "+s+" must be "+c,qt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new qt("Unknown option "+s,qt.ERR_BAD_OPTION)}}const ux={assertOptions:N9,validators:Bw},al=ux.validators;let Mf=class{constructor(e){this.defaults=e||{},this.interceptors={request:new nA,response:new nA}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Vf(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&ux.assertOptions(r,{silentJSONParsing:al.transitional(al.boolean),forcedJSONParsing:al.transitional(al.boolean),clarifyTimeoutError:al.transitional(al.boolean)},!1),i!=null&&(ke.isFunction(i)?n.paramsSerializer={serialize:i}:ux.assertOptions(i,{encode:al.function,serialize:al.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ux.assertOptions(n,{baseUrl:al.spelling("baseURL"),withXsrfToken:al.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&ke.merge(s.common,s[n.method]);s&&ke.forEach(["delete","get","head","post","put","patch","common"],k=>{delete s[k]}),n.headers=Vs.concat(o,s);const a=[];let c=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(n)===!1||(c=c&&C.synchronous,a.unshift(C.fulfilled,C.rejected))});const d=[];this.interceptors.response.forEach(function(C){d.push(C.fulfilled,C.rejected)});let h,p=0,y;if(!c){const k=[hA.bind(this),void 0];for(k.unshift(...a),k.push(...d),y=k.length,h=Promise.resolve(n);p<y;)h=h.then(k[p++],k[p++]);return h}y=a.length;let S=n;for(;p<y;){const k=a[p++],C=a[p++];try{S=k(S)}catch(E){C.call(this,E);break}}try{h=hA.call(this,S)}catch(k){return Promise.reject(k)}for(p=0,y=d.length;p<y;)h=h.then(d[p++],d[p++]);return h}getUri(e){e=Vf(this.defaults,e);const n=dL(e.baseURL,e.url,e.allowAbsoluteUrls);return oL(n,e.params,e.paramsSerializer)}};ke.forEach(["delete","get","head","options"],function(e){Mf.prototype[e]=function(n,r){return this.request(Vf(r||{},{method:e,url:n,data:(r||{}).data}))}});ke.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Vf(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Mf.prototype[e]=n(),Mf.prototype[e+"Form"]=n(!0)});let M9=class gL{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new $m(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new gL(function(i){e=i}),cancel:e}}};function O9(t){return function(n){return t.apply(null,n)}}function D9(t){return ke.isObject(t)&&t.isAxiosError===!0}const ET={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ET).forEach(([t,e])=>{ET[e]=t});function vL(t){const e=new Mf(t),n=GD(Mf.prototype.request,e);return ke.extend(n,Mf.prototype,e,{allOwnKeys:!0}),ke.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return vL(Vf(t,i))},n}const ir=vL(Hy);ir.Axios=Mf;ir.CanceledError=$m;ir.CancelToken=M9;ir.isCancel=cL;ir.VERSION=mL;ir.toFormData=Vw;ir.AxiosError=qt;ir.Cancel=ir.CanceledError;ir.all=function(e){return Promise.all(e)};ir.spread=O9;ir.isAxiosError=D9;ir.mergeConfig=Vf;ir.AxiosHeaders=Vs;ir.formToJSON=t=>lL(ke.isHTMLForm(t)?new FormData(t):t);ir.getAdapter=pL.getAdapter;ir.HttpStatusCode=ET;ir.default=ir;const{Axios:xge,AxiosError:wge,CanceledError:Sge,isCancel:Cge,CancelToken:kge,VERSION:Tge,all:Ege,Cancel:_ge,isAxiosError:Rge,spread:Pge,toFormData:Age,AxiosHeaders:Ige,HttpStatusCode:Nge,formToJSON:Mge,getAdapter:Oge,mergeConfig:Dge}=ir;/*! js-cookie v3.0.5 | MIT */function Fb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var L9={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function _T(t,e){function n(i,s,o){if(!(typeof document>"u")){o=Fb({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var c in o)o[c]&&(a+="; "+c,o[c]!==!0&&(a+="="+o[c].split(";")[0]));return document.cookie=i+"="+t.write(s,i)+a}}function r(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},a=0;a<s.length;a++){var c=s[a].split("="),d=c.slice(1).join("=");try{var h=decodeURIComponent(c[0]);if(o[h]=t.read(d,h),i===h)break}catch{}}return i?o[i]:o}}return Object.create({set:n,get:r,remove:function(i,s){n(i,"",Fb({},s,{expires:-1}))},withAttributes:function(i){return _T(this.converter,Fb({},this.attributes,i))},withConverter:function(i){return _T(Fb({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var ki=_T(L9,{path:"/"});const Jr=ir.create({baseURL:Bm,headers:{"Content-Type":"application/json"}});Jr.interceptors.request.use(t=>{const e=ki.get("rsCookie");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));Jr.interceptors.response.use(t=>t,async t=>{var n,r;if(!t.config)return Promise.reject(t);const e=t.config;if(((n=t.response)==null?void 0:n.status)===404)return e._isCritical&&(window.location.href="/whoops"),Promise.reject(t);if(((r=t.response)==null?void 0:r.status)===401&&!e._retry){e._retry=!0;try{const i=ki.get("rsCookie");if(!i)return ki.remove("rsCookie"),window.location.href="/",Promise.reject(t);const s=await ir.post(`${Bm}/refresh-token`,{},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}});if(s.data.token){const o=s.data.token;return ki.set("rsCookie",o),e.headers.Authorization=`Bearer ${o}`,Jr(e)}}catch(i){return ki.remove("rsCookie"),window.location.href="/",Promise.reject(i)}}return Promise.reject(t)});const j9=async t=>{await Jr.post(`/get-me/${t}`,{},{_isCritical:!0})},F9=async()=>(await ir.get(`${Bm}/create-room`,{headers:{"Content-Type":"application/json"},withCredentials:!0})).data,U9=async t=>(await Jr.post(`/join-room/${t}`)).data,V9=async t=>(await Jr.post(`/start-call/${t}`)).data,B9=async(t,e)=>(await Jr.get(`/leave-call/${t}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}})).data,Wx=async t=>(await Jr.get(`/exit-room/${t}`)).data,z9=async(t,e)=>(await Jr.get(`/kill-room/${t}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}})).data,$9=async(t,e,n)=>(await Jr.post(`/assign-host/${t}`,{current_host_id:e,new_host_id:n})).data,W9=async(t,e)=>(await Jr.post(`/lvk-token/${t}`,{participant_id:e})).data,yL=async t=>(await Jr.get(`/call/${t}`)).data,qy=async(t,e)=>(await Jr.post(`/get-me/${t}`,{headers:{Authorization:`Bearer ${e}`}})).data,H9=async t=>(await Jr.get(`/room-info/${t}`)).data,q9=async(t,e,n,r)=>(await Jr.post(`/set-participant-call-data/${t}`,{username:e,avatar_src:n},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}})).data,K9=async t=>{var e;try{return(await Jr.get(`/settings/${t}`)).data}catch(n){if(ir.isAxiosError(n)&&((e=n.response)==null?void 0:e.status)===400)return{strict_mode:!1,invitation_expiry:"30",invite_permission:!1}}},bL=async(t,e)=>{try{return(await Jr.post(`/update-settings/${t}`,{settings:e})).data}catch(n){console.error(n)}},xL=async t=>{const e=await Jr.get(`${Bm}/participants/${t}`);return{participants:e.data.participants,participantsInCall:e.data.participantsInCall}},G9=async(t,e)=>(await Jr.post(`/set-session/${t}`,{},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}})).data,Y9=async(t,e)=>(await Jr.post("/authorization",{code:t,room_id:e})).data,Q9=async t=>(await ir.get(`${Bm}/invitation-code/${t}`)).data.invitation,wL=v.createContext(void 0),J9=({children:t})=>{const e=v.useRef(null),[n,r]=v.useState(null),i=v.useCallback(async o=>{if(!(e.current&&e.current.readyState===WebSocket.OPEN)){try{const a=await K9(o);r(a)}catch(a){console.error("Error fetching initial settings",a)}e.current&&e.current.close(),e.current=new WebSocket(`${By}/ws/settings-broadcast/${o}`),e.current.onmessage=a=>{if(!e.current)return;const c=JSON.parse(a.data);r(c)}}},[]),s=()=>{var o;(o=e.current)==null||o.close(),e.current=null};return b.jsx(wL.Provider,{value:{ws:e.current,connectSettings:i,settings:n,disconnect:s},children:t})},zw=()=>{const t=v.useContext(wL);if(!t)throw new Error("No session context.");return t},SL=v.createContext(void 0),X9=({children:t})=>{const[e,n]=v.useState(!1),[r,i]=v.useState([]),[s,o]=v.useState(!1);return b.jsx(SL.Provider,{value:{isChatExpanded:e,setIsChatExpanded:n,shareScreenView:r,setShareScreenView:i,isFocusView:s,setIsFocusView:o},children:t})},Ky=()=>{const t=v.useContext(SL);if(!t)throw new Error("No preferences context.");return t},Z9=(t,e)=>{t.invalidateQueries({queryKey:["call-participants",e]}),t.invalidateQueries({queryKey:["me",e]})},eq=(t,e)=>{t.invalidateQueries({queryKey:["call-participants",e]}),t.invalidateQueries({queryKey:["me",e]})},CL=v.createContext(void 0),tq=({children:t})=>{const e=Ow(),n=v.useRef(null),[r,i]=v.useState(!1),[s,o]=v.useState([]),[a,c]=v.useState(null),[d,h]=v.useState(null),[p,y]=v.useState(null),S=E=>{(!n.current||n.current.readyState!==WebSocket.OPEN)&&(n.current&&n.current.close(),n.current=new WebSocket(`${By}/ws/system-events/${E}`),n.current.onopen=()=>{var _;i(((_=n.current)==null?void 0:_.readyState)===WebSocket.OPEN)},n.current.onclose=()=>{i(!1)},n.current.onerror=()=>{i(!1)},n.current.onmessage=_=>{try{const A=JSON.parse(_.data),M={type:A.type,payload:A.payload,received_at:Date.now()};switch(o(I=>[...I,M].slice(-20)),A.type){case"room.killed":const I=A.payload;y({type:"room.killed",payload:I,received_at:Date.now()});break;case"host.left":const N=A.payload;c({type:"host.left",payload:N,received_at:Date.now()}),eq(e,E);break;case"host.updated":const O=A.payload;h({type:"host.updated",payload:O,received_at:Date.now()}),Z9(e,E);break}}catch(A){console.error("Failed to parse incoming event:",A)}})},k=()=>{var E;(E=n.current)==null||E.close(),n.current=null,i(!1)},C=E=>{r&&n.current&&n.current.readyState===WebSocket.OPEN?n.current.send(JSON.stringify(E)):console.warn("WebSocket not ready, message not sent:",E)};return b.jsx(CL.Provider,{value:{ws:n.current,connectSystemEvents:S,sendSystemEvent:C,disconnectSystemEvents:k,isConnected:r,recentSystemEvents:s,latestHostLeft:a,latestHostUpdate:d,latestRoomKilled:p},children:t})},Wm=()=>{const t=v.useContext(CL);if(!t)throw new Error("No system events context.");return t},nq=t=>/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rq=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kL=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sq=v.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},c)=>v.createElement("svg",{ref:c,...iq,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:kL("lucide",i),...a},[...o.map(([d,h])=>v.createElement(d,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=(t,e)=>{const n=v.forwardRef(({className:r,...i},s)=>v.createElement(sq,{ref:s,iconNode:e,className:kL(`lucide-${rq(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oq=$t("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aq=$t("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=$t("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lq=$t("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cq=$t("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=$t("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=$t("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uq=$t("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=$t("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dq=$t("Clock1",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 14.5 8",key:"12zbmj"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=$t("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fq=$t("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=$t("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=$t("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=$t("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hq=$t("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=$t("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=$t("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pq=$t("LayoutPanelLeft",[["rect",{width:"7",height:"18",x:"3",y:"3",rx:"1",key:"2obqm"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=$t("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=$t("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=$t("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mq=$t("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gq=$t("MessageSquareWarning",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v2",key:"stiyo7"}],["path",{d:"M12 13h.01",key:"y0uutt"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=$t("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=$t("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vq=$t("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yq=$t("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=$t("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xq=$t("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wq=$t("ScreenShareOff",[["path",{d:"M13 3H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-3",key:"i8wdob"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=$t("ScreenShare",[["path",{d:"M13 3H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-3",key:"i8wdob"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m17 8 5-5",key:"fqif7o"}],["path",{d:"M17 3h5v5",key:"1o3tu8"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=$t("SendHorizontal",[["path",{d:"m3 3 3 9-3 9 19-9Z",key:"1aobqy"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=$t("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cq=$t("Signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=$t("SmilePlus",[["path",{d:"M22 11v1a10 10 0 1 1-9-10",key:"ew0xw9"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}],["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kq=$t("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tq=$t("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=$t("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=$t("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=$t("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=$t("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eq=$t("WalletMinimal",[["path",{d:"M17 14h.01",key:"7oqj8z"}],["path",{d:"M7 7h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14",key:"u1rqew"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=$t("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var JC,yA;function _q(){if(yA)return JC;yA=1;var t="Expected a function",e=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,c=typeof Wu=="object"&&Wu&&Wu.Object===Object&&Wu,d=typeof self=="object"&&self&&self.Object===Object&&self,h=c||d||Function("return this")(),p=Object.prototype,y=p.toString,S=Math.max,k=Math.min,C=function(){return h.Date.now()};function E(N,O,j){var V,$,W,J,Y,pe,fe=0,Ee=!1,le=!1,Se=!0;if(typeof N!="function")throw new TypeError(t);O=I(O)||0,_(j)&&(Ee=!!j.leading,le="maxWait"in j,W=le?S(I(j.maxWait)||0,O):W,Se="trailing"in j?!!j.trailing:Se);function q(ie){var be=V,Le=$;return V=$=void 0,fe=ie,J=N.apply(Le,be),J}function te(ie){return fe=ie,Y=setTimeout(de,O),Ee?q(ie):J}function ae(ie){var be=ie-pe,Le=ie-fe,$e=O-be;return le?k($e,W-Le):$e}function B(ie){var be=ie-pe,Le=ie-fe;return pe===void 0||be>=O||be<0||le&&Le>=W}function de(){var ie=C();if(B(ie))return se(ie);Y=setTimeout(de,ae(ie))}function se(ie){return Y=void 0,Se&&V?q(ie):(V=$=void 0,J)}function me(){Y!==void 0&&clearTimeout(Y),fe=0,V=pe=$=Y=void 0}function Te(){return Y===void 0?J:se(C())}function Re(){var ie=C(),be=B(ie);if(V=arguments,$=this,pe=ie,be){if(Y===void 0)return te(pe);if(le)return Y=setTimeout(de,O),q(pe)}return Y===void 0&&(Y=setTimeout(de,O)),J}return Re.cancel=me,Re.flush=Te,Re}function _(N){var O=typeof N;return!!N&&(O=="object"||O=="function")}function A(N){return!!N&&typeof N=="object"}function M(N){return typeof N=="symbol"||A(N)&&y.call(N)==n}function I(N){if(typeof N=="number")return N;if(M(N))return e;if(_(N)){var O=typeof N.valueOf=="function"?N.valueOf():N;N=_(O)?O+"":O}if(typeof N!="string")return N===0?N:+N;N=N.replace(r,"");var j=s.test(N);return j||o.test(N)?a(N.slice(2),j?2:8):i.test(N)?e:+N}return JC=E,JC}_q();function Rq(t=!1){if(typeof t!="boolean")throw new Error("defaultValue must be `true` or `false`");const[e,n]=v.useState(t),r=v.useCallback(()=>{n(!0)},[]),i=v.useCallback(()=>{n(!1)},[]),s=v.useCallback(()=>{n(o=>!o)},[]);return{value:e,setValue:n,setTrue:r,setFalse:i,toggle:s}}var AE=typeof window<"u"?v.useLayoutEffect:v.useEffect;function Pq(t,e,n,r){const i=v.useRef(e);AE(()=>{i.current=e},[e]),v.useEffect(()=>{const s=window;if(!(s&&s.addEventListener))return;const o=a=>{i.current(a)};return s.addEventListener(t,o,r),()=>{s.removeEventListener(t,o,r)}},[t,n,r])}function Aq(){const[t,e]=v.useState(null),n=v.useCallback(async r=>{if(!(navigator!=null&&navigator.clipboard))return console.warn("Clipboard not supported"),!1;try{return await navigator.clipboard.writeText(r),e(r),!0}catch(i){return console.warn("Copy failed",i),e(null),!1}},[]);return[t,n]}function Iq(t){const[e,n]=v.useState(t??0),r=v.useCallback(()=>{n(o=>o+1)},[]),i=v.useCallback(()=>{n(o=>o-1)},[]),s=v.useCallback(()=>{n(t??0)},[t]);return{count:e,increment:r,decrement:i,reset:s,setCount:n}}function Nq(t,e){const n=v.useRef(t);AE(()=>{n.current=t},[t]),v.useEffect(()=>{if(e===null)return;const r=setInterval(()=>{n.current()},e);return()=>{clearInterval(r)}},[e])}function IE({countStart:t,countStop:e=0,intervalMs:n=1e3,isIncrement:r=!1}){const{count:i,increment:s,decrement:o,reset:a}=Iq(t),{value:c,setTrue:d,setFalse:h}=Rq(!1),p=v.useCallback(()=>{h(),a()},[h,a]),y=v.useCallback(()=>{if(i===e){h();return}r?s():o()},[i,e,o,s,r,h]);return Nq(y,c?n:null),[i,{startCountdown:d,stopCountdown:h,resetCountdown:p}]}var Mq=typeof window>"u";function Oq(t,{defaultValue:e=!1,initializeWithValue:n=!0}={}){const r=a=>Mq?e:window.matchMedia(a).matches,[i,s]=v.useState(()=>n?r(t):e);function o(){s(r(t))}return AE(()=>{const a=window.matchMedia(t);return o(),a.addListener?a.addListener(o):a.addEventListener("change",o),()=>{a.removeListener?a.removeListener(o):a.removeEventListener("change",o)}},[t]),i}function Dq(){const t=v.useRef(!1);return v.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),v.useCallback(()=>t.current,[])}function Lq(t,e,n="mousedown",r={}){Pq(n,i=>{const s=i.target;if(!s||!s.isConnected)return;(Array.isArray(t)?t.filter(a=>!!a.current).every(a=>a.current&&!a.current.contains(s)):t.current&&!t.current.contains(s))&&e(i)},void 0,r)}var bA={width:void 0,height:void 0};function jq(t){const{ref:e,box:n="content-box"}=t,[{width:r,height:i},s]=v.useState(bA),o=Dq(),a=v.useRef({...bA}),c=v.useRef(void 0);return c.current=t.onResize,v.useEffect(()=>{if(!e.current||typeof window>"u"||!("ResizeObserver"in window))return;const d=new ResizeObserver(([h])=>{const p=n==="border-box"?"borderBoxSize":n==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",y=xA(h,p,"inlineSize"),S=xA(h,p,"blockSize");if(a.current.width!==y||a.current.height!==S){const C={width:y,height:S};a.current.width=y,a.current.height=S,c.current?c.current(C):o()&&s(C)}});return d.observe(e.current,{box:n}),()=>{d.disconnect()}},[n,e,o]),{width:r,height:i}}function xA(t,e,n){return t[e]?Array.isArray(t[e])?t[e][0][n]:t[e][n]:e==="contentBoxSize"?t.contentRect[n==="inlineSize"?"width":"height"]:void 0}const Fq=(t,e)=>{const n=new EventSource(`${Bm}/sse-invitation-update/${t}`);return n.addEventListener("update",r=>{const i=r.data;e(i)}),n};function wA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Uq(...t){return e=>{let n=!1;const r=t.map(i=>{const s=wA(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():wA(t[i],null)}}}}var Vq=Symbol.for("react.lazy"),Hx=Mw[" use ".trim().toString()];function Bq(t){return typeof t=="object"&&t!==null&&"then"in t}function OL(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===Vq&&"_payload"in t&&Bq(t._payload)}function zq(t){const e=$q(t),n=v.forwardRef((r,i)=>{let{children:s,...o}=r;OL(s)&&typeof Hx=="function"&&(s=Hx(s._payload));const a=v.Children.toArray(s),c=a.find(Hq);if(c){const d=c.props.children,h=a.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return b.jsx(e,{...o,ref:i,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var DL=zq("Slot");function $q(t){const e=v.forwardRef((n,r)=>{let{children:i,...s}=n;if(OL(i)&&typeof Hx=="function"&&(i=Hx(i._payload)),v.isValidElement(i)){const o=Kq(i),a=qq(s,i.props);return i.type!==v.Fragment&&(a.ref=r?Uq(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Wq=Symbol("radix.slottable");function Hq(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Wq}function qq(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Kq(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function LL(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=LL(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function jL(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=LL(t))&&(r&&(r+=" "),r+=e);return r}const SA=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,CA=jL,Gq=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return CA(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(d=>{const h=n==null?void 0:n[d],p=s==null?void 0:s[d];if(h===null)return null;const y=SA(h)||SA(p);return i[d][y]}),a=n&&Object.entries(n).reduce((d,h)=>{let[p,y]=h;return y===void 0||(d[p]=y),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:p,className:y,...S}=h;return Object.entries(S).every(k=>{let[C,E]=k;return Array.isArray(E)?E.includes({...s,...a}[C]):{...s,...a}[C]===E})?[...d,p,y]:d},[]);return CA(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)},NE="-",Yq=t=>{const e=Jq(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(NE);return a[0]===""&&a.length!==1&&a.shift(),FL(a,e)||Qq(o)},getConflictingClassGroupIds:(o,a)=>{const c=n[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},FL=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?FL(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(NE);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},kA=/^\[(.+)\]$/,Qq=t=>{if(kA.test(t)){const e=kA.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Jq=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Zq(Object.entries(t.classGroups),n).forEach(([s,o])=>{PT(o,r,s,e)}),r},PT=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:TA(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(Xq(i)){PT(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{PT(o,TA(e,s),n,r)})})},TA=(t,e)=>{let n=t;return e.split(NE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Xq=t=>t.isThemeGetter,Zq=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,e7=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},UL="!",t7=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const c=[];let d=0,h=0,p;for(let E=0;E<a.length;E++){let _=a[E];if(d===0){if(_===i&&(r||a.slice(E,E+s)===e)){c.push(a.slice(h,E)),h=E+s;continue}if(_==="/"){p=E;continue}}_==="["?d++:_==="]"&&d--}const y=c.length===0?a:a.substring(h),S=y.startsWith(UL),k=S?y.substring(1):y,C=p&&p>h?p-h:void 0;return{modifiers:c,hasImportantModifier:S,baseClassName:k,maybePostfixModifierPosition:C}};return n?a=>n({className:a,parseClassName:o}):o},n7=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},r7=t=>({cache:e7(t.cacheSize),parseClassName:t7(t),...Yq(t)}),i7=/\s+/,s7=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(i7);let a="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:h,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:S}=n(d);let k=!!S,C=r(k?y.substring(0,S):y);if(!C){if(!k){a=d+(a.length>0?" "+a:a);continue}if(C=r(y),!C){a=d+(a.length>0?" "+a:a);continue}k=!1}const E=n7(h).join(":"),_=p?E+UL:E,A=_+C;if(s.includes(A))continue;s.push(A);const M=i(C,k);for(let I=0;I<M.length;++I){const N=M[I];s.push(_+N)}a=d+(a.length>0?" "+a:a)}return a};function o7(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=VL(e))&&(r&&(r+=" "),r+=n);return r}const VL=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=VL(t[r]))&&(n&&(n+=" "),n+=e);return n};function a7(t,...e){let n,r,i,s=o;function o(c){const d=e.reduce((h,p)=>p(h),t());return n=r7(d),r=n.cache.get,i=n.cache.set,s=a,a(c)}function a(c){const d=r(c);if(d)return d;const h=s7(c,n);return i(c,h),h}return function(){return s(o7.apply(null,arguments))}}const rr=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},BL=/^\[(?:([a-z-]+):)?(.+)\]$/i,l7=/^\d+\/\d+$/,c7=new Set(["px","full","screen"]),u7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,d7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,f7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,h7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,p7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,dc=t=>Gp(t)||c7.has(t)||l7.test(t),xu=t=>qm(t,"length",S7),Gp=t=>!!t&&!Number.isNaN(Number(t)),XC=t=>qm(t,"number",Gp),Tv=t=>!!t&&Number.isInteger(Number(t)),m7=t=>t.endsWith("%")&&Gp(t.slice(0,-1)),Yt=t=>BL.test(t),wu=t=>u7.test(t),g7=new Set(["length","size","percentage"]),v7=t=>qm(t,g7,zL),y7=t=>qm(t,"position",zL),b7=new Set(["image","url"]),x7=t=>qm(t,b7,k7),w7=t=>qm(t,"",C7),Ev=()=>!0,qm=(t,e,n)=>{const r=BL.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},S7=t=>d7.test(t)&&!f7.test(t),zL=()=>!1,C7=t=>h7.test(t),k7=t=>p7.test(t),T7=()=>{const t=rr("colors"),e=rr("spacing"),n=rr("blur"),r=rr("brightness"),i=rr("borderColor"),s=rr("borderRadius"),o=rr("borderSpacing"),a=rr("borderWidth"),c=rr("contrast"),d=rr("grayscale"),h=rr("hueRotate"),p=rr("invert"),y=rr("gap"),S=rr("gradientColorStops"),k=rr("gradientColorStopPositions"),C=rr("inset"),E=rr("margin"),_=rr("opacity"),A=rr("padding"),M=rr("saturate"),I=rr("scale"),N=rr("sepia"),O=rr("skew"),j=rr("space"),V=rr("translate"),$=()=>["auto","contain","none"],W=()=>["auto","hidden","clip","visible","scroll"],J=()=>["auto",Yt,e],Y=()=>[Yt,e],pe=()=>["",dc,xu],fe=()=>["auto",Gp,Yt],Ee=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],le=()=>["solid","dashed","dotted","double","none"],Se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],te=()=>["","0",Yt],ae=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[Gp,Yt];return{cacheSize:500,separator:":",theme:{colors:[Ev],spacing:[dc,xu],blur:["none","",wu,Yt],brightness:B(),borderColor:[t],borderRadius:["none","","full",wu,Yt],borderSpacing:Y(),borderWidth:pe(),contrast:B(),grayscale:te(),hueRotate:B(),invert:te(),gap:Y(),gradientColorStops:[t],gradientColorStopPositions:[m7,xu],inset:J(),margin:J(),opacity:B(),padding:Y(),saturate:B(),scale:B(),sepia:te(),skew:B(),space:Y(),translate:Y()},classGroups:{aspect:[{aspect:["auto","square","video",Yt]}],container:["container"],columns:[{columns:[wu]}],"break-after":[{"break-after":ae()}],"break-before":[{"break-before":ae()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ee(),Yt]}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Tv,Yt]}],basis:[{basis:J()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Yt]}],grow:[{grow:te()}],shrink:[{shrink:te()}],order:[{order:["first","last","none",Tv,Yt]}],"grid-cols":[{"grid-cols":[Ev]}],"col-start-end":[{col:["auto",{span:["full",Tv,Yt]},Yt]}],"col-start":[{"col-start":fe()}],"col-end":[{"col-end":fe()}],"grid-rows":[{"grid-rows":[Ev]}],"row-start-end":[{row:["auto",{span:[Tv,Yt]},Yt]}],"row-start":[{"row-start":fe()}],"row-end":[{"row-end":fe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Yt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Yt]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[A]}],px:[{px:[A]}],py:[{py:[A]}],ps:[{ps:[A]}],pe:[{pe:[A]}],pt:[{pt:[A]}],pr:[{pr:[A]}],pb:[{pb:[A]}],pl:[{pl:[A]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Yt,e]}],"min-w":[{"min-w":[Yt,e,"min","max","fit"]}],"max-w":[{"max-w":[Yt,e,"none","full","min","max","fit","prose",{screen:[wu]},wu]}],h:[{h:[Yt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Yt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Yt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Yt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",wu,xu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",XC]}],"font-family":[{font:[Ev]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Yt]}],"line-clamp":[{"line-clamp":["none",Gp,XC]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",dc,Yt]}],"list-image":[{"list-image":["none",Yt]}],"list-style-type":[{list:["none","disc","decimal",Yt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...le(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",dc,xu]}],"underline-offset":[{"underline-offset":["auto",dc,Yt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ee(),y7]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",v7]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},x7]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[k]}],"gradient-via-pos":[{via:[k]}],"gradient-to-pos":[{to:[k]}],"gradient-from":[{from:[S]}],"gradient-via":[{via:[S]}],"gradient-to":[{to:[S]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...le(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:le()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...le()]}],"outline-offset":[{"outline-offset":[dc,Yt]}],"outline-w":[{outline:[dc,xu]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:pe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[dc,xu]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",wu,w7]}],"shadow-color":[{shadow:[Ev]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...Se(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Se()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",wu,Yt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[M]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[M]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Yt]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",Yt]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",Yt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[Tv,Yt]}],"translate-x":[{"translate-x":[V]}],"translate-y":[{"translate-y":[V]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Yt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Yt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Yt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[dc,xu,XC]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},E7=a7(T7);function Vt(...t){return E7(jL(t))}const ME=Gq("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors duration-300 focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",call:"bg-green-800 text-white hover:bg-green-700 duration-700 ease-in-out"},size:{default:"h-10 px-16 py-8",sm:"h-9 rounded-md px-12",lg:"h-11 rounded-md px-32",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ls=v.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?DL:"button";return b.jsx(o,{className:Vt(ME({variant:e,size:n,className:t})),ref:s,...i})});ls.displayName="Button";function ft(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function EA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function $L(...t){return e=>{let n=!1;const r=t.map(i=>{const s=EA(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():EA(t[i],null)}}}}function OE(...t){return v.useCallback($L(...t),t)}function _7(t,e){const n=v.createContext(e),r=s=>{const{children:o,...a}=s,c=v.useMemo(()=>a,Object.values(a));return b.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function i(s){const o=v.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function Yo(t,e=[]){let n=[];function r(s,o){const a=v.createContext(o),c=n.length;n=[...n,o];const d=p=>{var _;const{scope:y,children:S,...k}=p,C=((_=y==null?void 0:y[t])==null?void 0:_[c])||a,E=v.useMemo(()=>k,Object.values(k));return b.jsx(C.Provider,{value:E,children:S})};d.displayName=s+"Provider";function h(p,y){var C;const S=((C=y==null?void 0:y[t])==null?void 0:C[c])||a,k=v.useContext(S);if(k)return k;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${s}\``)}return[d,h]}const i=()=>{const s=n.map(o=>v.createContext(o));return function(a){const c=(a==null?void 0:a[t])||s;return v.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return i.scopeName=t,[r,R7(i,...e)]}function R7(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:c,scopeName:d})=>{const p=c(s)[`__scope${d}`];return{...a,...p}},{});return v.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var qi=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},P7=Mw[" useId ".trim().toString()]||(()=>{}),A7=0;function bl(t){const[e,n]=v.useState(P7());return qi(()=>{n(r=>r??String(A7++))},[t]),e?`radix-${e}`:""}var I7=Mw[" useInsertionEffect ".trim().toString()]||qi;function Zu({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=N7({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:i;{const h=v.useRef(t!==void 0);v.useEffect(()=>{const p=h.current;p!==a&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=a},[a,r])}const d=v.useCallback(h=>{var p;if(a){const y=M7(h)?h(t):h;y!==t&&((p=o.current)==null||p.call(o,y))}else s(h)},[a,t,s,o]);return[c,d]}function N7({defaultProp:t,onChange:e}){const[n,r]=v.useState(t),i=v.useRef(n),s=v.useRef(e);return I7(()=>{s.current=e},[e]),v.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function M7(t){return typeof t=="function"}function _A(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function WL(...t){return e=>{let n=!1;const r=t.map(i=>{const s=_A(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():_A(t[i],null)}}}}function HL(...t){return v.useCallback(WL(...t),t)}function O7(t){const e=D7(t),n=v.forwardRef((r,i)=>{const{children:s,...o}=r,a=v.Children.toArray(s),c=a.find(j7);if(c){const d=c.props.children,h=a.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return b.jsx(e,{...o,ref:i,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function D7(t){const e=v.forwardRef((n,r)=>{const{children:i,...s}=n;if(v.isValidElement(i)){const o=U7(i),a=F7(s,i.props);return i.type!==v.Fragment&&(a.ref=r?WL(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var L7=Symbol("radix.slottable");function j7(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===L7}function F7(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function U7(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var V7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qL=V7.reduce((t,e)=>{const n=O7(`Primitive.${e}`),r=v.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function B7(t,e){t&&Xf.flushSync(()=>t.dispatchEvent(e))}function Tl(t){const e=v.useRef(t);return v.useEffect(()=>{e.current=t}),v.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function z7(t,e=globalThis==null?void 0:globalThis.document){const n=Tl(t);v.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var $7="DismissableLayer",AT="dismissableLayer.update",W7="dismissableLayer.pointerDownOutside",H7="dismissableLayer.focusOutside",RA,KL=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Yy=v.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...c}=t,d=v.useContext(KL),[h,p]=v.useState(null),y=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,S]=v.useState({}),k=HL(e,j=>p(j)),C=Array.from(d.layers),[E]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),_=C.indexOf(E),A=h?C.indexOf(h):-1,M=d.layersWithOutsidePointerEventsDisabled.size>0,I=A>=_,N=G7(j=>{const V=j.target,$=[...d.branches].some(W=>W.contains(V));!I||$||(i==null||i(j),o==null||o(j),j.defaultPrevented||a==null||a())},y),O=Y7(j=>{const V=j.target;[...d.branches].some(W=>W.contains(V))||(s==null||s(j),o==null||o(j),j.defaultPrevented||a==null||a())},y);return z7(j=>{A===d.layers.size-1&&(r==null||r(j),!j.defaultPrevented&&a&&(j.preventDefault(),a()))},y),v.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(RA=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),PA(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=RA)}},[h,y,n,d]),v.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),PA())},[h,d]),v.useEffect(()=>{const j=()=>S({});return document.addEventListener(AT,j),()=>document.removeEventListener(AT,j)},[]),b.jsx(qL.div,{...c,ref:k,style:{pointerEvents:M?I?"auto":"none":void 0,...t.style},onFocusCapture:ft(t.onFocusCapture,O.onFocusCapture),onBlurCapture:ft(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:ft(t.onPointerDownCapture,N.onPointerDownCapture)})});Yy.displayName=$7;var q7="DismissableLayerBranch",K7=v.forwardRef((t,e)=>{const n=v.useContext(KL),r=v.useRef(null),i=HL(e,r);return v.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),b.jsx(qL.div,{...t,ref:i})});K7.displayName=q7;function G7(t,e=globalThis==null?void 0:globalThis.document){const n=Tl(t),r=v.useRef(!1),i=v.useRef(()=>{});return v.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){GL(W7,n,d,{discrete:!0})};const d={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Y7(t,e=globalThis==null?void 0:globalThis.document){const n=Tl(t),r=v.useRef(!1);return v.useEffect(()=>{const i=s=>{s.target&&!r.current&&GL(H7,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function PA(){const t=new CustomEvent(AT);document.dispatchEvent(t)}function GL(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?B7(i,s):i.dispatchEvent(s)}function AA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function YL(...t){return e=>{let n=!1;const r=t.map(i=>{const s=AA(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():AA(t[i],null)}}}}function Q7(...t){return v.useCallback(YL(...t),t)}function J7(t){const e=X7(t),n=v.forwardRef((r,i)=>{const{children:s,...o}=r,a=v.Children.toArray(s),c=a.find(eK);if(c){const d=c.props.children,h=a.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return b.jsx(e,{...o,ref:i,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function X7(t){const e=v.forwardRef((n,r)=>{const{children:i,...s}=n;if(v.isValidElement(i)){const o=nK(i),a=tK(s,i.props);return i.type!==v.Fragment&&(a.ref=r?YL(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Z7=Symbol("radix.slottable");function eK(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Z7}function tK(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function nK(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var rK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],iK=rK.reduce((t,e)=>{const n=J7(`Primitive.${e}`),r=v.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),ZC="focusScope.autoFocusOnMount",ek="focusScope.autoFocusOnUnmount",IA={bubbles:!1,cancelable:!0},sK="FocusScope",Hw=v.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,c]=v.useState(null),d=Tl(i),h=Tl(s),p=v.useRef(null),y=Q7(e,C=>c(C)),S=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(r){let C=function(M){if(S.paused||!a)return;const I=M.target;a.contains(I)?p.current=I:Eu(p.current,{select:!0})},E=function(M){if(S.paused||!a)return;const I=M.relatedTarget;I!==null&&(a.contains(I)||Eu(p.current,{select:!0}))},_=function(M){if(document.activeElement===document.body)for(const N of M)N.removedNodes.length>0&&Eu(a)};document.addEventListener("focusin",C),document.addEventListener("focusout",E);const A=new MutationObserver(_);return a&&A.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",E),A.disconnect()}}},[r,a,S.paused]),v.useEffect(()=>{if(a){MA.add(S);const C=document.activeElement;if(!a.contains(C)){const _=new CustomEvent(ZC,IA);a.addEventListener(ZC,d),a.dispatchEvent(_),_.defaultPrevented||(oK(dK(QL(a)),{select:!0}),document.activeElement===C&&Eu(a))}return()=>{a.removeEventListener(ZC,d),setTimeout(()=>{const _=new CustomEvent(ek,IA);a.addEventListener(ek,h),a.dispatchEvent(_),_.defaultPrevented||Eu(C??document.body,{select:!0}),a.removeEventListener(ek,h),MA.remove(S)},0)}}},[a,d,h,S]);const k=v.useCallback(C=>{if(!n&&!r||S.paused)return;const E=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,_=document.activeElement;if(E&&_){const A=C.currentTarget,[M,I]=aK(A);M&&I?!C.shiftKey&&_===I?(C.preventDefault(),n&&Eu(M,{select:!0})):C.shiftKey&&_===M&&(C.preventDefault(),n&&Eu(I,{select:!0})):_===A&&C.preventDefault()}},[n,r,S.paused]);return b.jsx(iK.div,{tabIndex:-1,...o,ref:y,onKeyDown:k})});Hw.displayName=sK;function oK(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Eu(r,{select:e}),document.activeElement!==n)return}function aK(t){const e=QL(t),n=NA(e,t),r=NA(e.reverse(),t);return[n,r]}function QL(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function NA(t,e){for(const n of t)if(!lK(n,{upTo:e}))return n}function lK(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function cK(t){return t instanceof HTMLInputElement&&"select"in t}function Eu(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&cK(t)&&e&&t.select()}}var MA=uK();function uK(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=OA(t,e),t.unshift(e)},remove(e){var n;t=OA(t,e),(n=t[0])==null||n.resume()}}}function OA(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function dK(t){return t.filter(e=>e.tagName!=="A")}function DA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function fK(...t){return e=>{let n=!1;const r=t.map(i=>{const s=DA(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():DA(t[i],null)}}}}function hK(t){const e=pK(t),n=v.forwardRef((r,i)=>{const{children:s,...o}=r,a=v.Children.toArray(s),c=a.find(gK);if(c){const d=c.props.children,h=a.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return b.jsx(e,{...o,ref:i,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function pK(t){const e=v.forwardRef((n,r)=>{const{children:i,...s}=n;if(v.isValidElement(i)){const o=yK(i),a=vK(s,i.props);return i.type!==v.Fragment&&(a.ref=r?fK(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var mK=Symbol("radix.slottable");function gK(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===mK}function vK(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function yK(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var bK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xK=bK.reduce((t,e)=>{const n=hK(`Primitive.${e}`),r=v.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),wK="Portal",qw=v.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=v.useState(!1);qi(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?HD.createPortal(b.jsx(xK.div,{...r,ref:e}),o):null});qw.displayName=wK;function LA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function SK(...t){return e=>{let n=!1;const r=t.map(i=>{const s=LA(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():LA(t[i],null)}}}}function CK(...t){return v.useCallback(SK(...t),t)}function kK(t,e){return v.useReducer((n,r)=>e[n][r]??n,t)}var Al=t=>{const{present:e,children:n}=t,r=TK(e),i=typeof n=="function"?n({present:r.isPresent}):v.Children.only(n),s=CK(r.ref,EK(i));return typeof n=="function"||r.isPresent?v.cloneElement(i,{ref:s}):null};Al.displayName="Presence";function TK(t){const[e,n]=v.useState(),r=v.useRef(null),i=v.useRef(t),s=v.useRef("none"),o=t?"mounted":"unmounted",[a,c]=kK(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const d=Ub(r.current);s.current=a==="mounted"?d:"none"},[a]),qi(()=>{const d=r.current,h=i.current;if(h!==t){const y=s.current,S=Ub(d);t?c("MOUNT"):S==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&y!==S?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),qi(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,p=S=>{const C=Ub(r.current).includes(CSS.escape(S.animationName));if(S.target===e&&C&&(c("ANIMATION_END"),!i.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},y=S=>{S.target===e&&(s.current=Ub(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:v.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function Ub(t){return(t==null?void 0:t.animationName)||"none"}function EK(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function JL(t){const e=_K(t),n=v.forwardRef((r,i)=>{const{children:s,...o}=r,a=v.Children.toArray(s),c=a.find(PK);if(c){const d=c.props.children,h=a.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return b.jsx(e,{...o,ref:i,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function _K(t){const e=v.forwardRef((n,r)=>{const{children:i,...s}=n;if(v.isValidElement(i)){const o=IK(i),a=AK(s,i.props);return i.type!==v.Fragment&&(a.ref=r?$L(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var RK=Symbol("radix.slottable");function PK(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===RK}function AK(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function IK(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var NK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Qy=NK.reduce((t,e)=>{const n=JL(`Primitive.${e}`),r=v.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),tk=0;function DE(){v.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??jA()),document.body.insertAdjacentElement("beforeend",t[1]??jA()),tk++,()=>{tk===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),tk--}},[])}function jA(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var pl=function(){return pl=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pl.apply(this,arguments)};function XL(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function MK(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var dx="right-scroll-bar-position",fx="width-before-scroll-bar",OK="with-scroll-bars-hidden",DK="--removed-body-scroll-bar-size";function nk(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function LK(t,e){var n=v.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var jK=typeof window<"u"?v.useLayoutEffect:v.useEffect,FA=new WeakMap;function FK(t,e){var n=LK(null,function(r){return t.forEach(function(i){return nk(i,r)})});return jK(function(){var r=FA.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||nk(a,null)}),s.forEach(function(a){i.has(a)||nk(a,o)})}FA.set(n,t)},[t]),n}function UK(t){return t}function VK(t,e){e===void 0&&(e=UK);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var c=function(){var h=o;o=[],h.forEach(s)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),n}}}};return i}function BK(t){t===void 0&&(t={});var e=VK(null);return e.options=pl({async:!0,ssr:!1},t),e}var ZL=function(t){var e=t.sideCar,n=XL(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return v.createElement(r,pl({},n))};ZL.isSideCarExport=!0;function zK(t,e){return t.useMedium(e),ZL}var ej=BK(),rk=function(){},Kw=v.forwardRef(function(t,e){var n=v.useRef(null),r=v.useState({onScrollCapture:rk,onWheelCapture:rk,onTouchMoveCapture:rk}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,c=t.className,d=t.removeScrollBar,h=t.enabled,p=t.shards,y=t.sideCar,S=t.noIsolation,k=t.inert,C=t.allowPinchZoom,E=t.as,_=E===void 0?"div":E,A=t.gapMode,M=XL(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=y,N=FK([n,e]),O=pl(pl({},M),i);return v.createElement(v.Fragment,null,h&&v.createElement(I,{sideCar:ej,removeScrollBar:d,shards:p,noIsolation:S,inert:k,setCallbacks:s,allowPinchZoom:!!C,lockRef:n,gapMode:A}),o?v.cloneElement(v.Children.only(a),pl(pl({},O),{ref:N})):v.createElement(_,pl({},O,{className:c,ref:N}),a))});Kw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Kw.classNames={fullWidth:fx,zeroRight:dx};var $K=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function WK(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=$K();return e&&t.setAttribute("nonce",e),t}function HK(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function qK(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var KK=function(){var t=0,e=null;return{add:function(n){t==0&&(e=WK())&&(HK(e,n),qK(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},GK=function(){var t=KK();return function(e,n){v.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},tj=function(){var t=GK(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},YK={left:0,top:0,right:0,gap:0},ik=function(t){return parseInt(t||"",10)||0},QK=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[ik(n),ik(r),ik(i)]},JK=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return YK;var e=QK(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},XK=tj(),Yp="data-scroll-locked",ZK=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(OK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Yp,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(dx,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(fx,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(dx," .").concat(dx,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(fx," .").concat(fx,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Yp,`] {
    `).concat(DK,": ").concat(a,`px;
  }
`)},UA=function(){var t=parseInt(document.body.getAttribute(Yp)||"0",10);return isFinite(t)?t:0},eG=function(){v.useEffect(function(){return document.body.setAttribute(Yp,(UA()+1).toString()),function(){var t=UA()-1;t<=0?document.body.removeAttribute(Yp):document.body.setAttribute(Yp,t.toString())}},[])},tG=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;eG();var s=v.useMemo(function(){return JK(i)},[i]);return v.createElement(XK,{styles:ZK(s,!e,i,n?"":"!important")})},IT=!1;if(typeof window<"u")try{var Vb=Object.defineProperty({},"passive",{get:function(){return IT=!0,!0}});window.addEventListener("test",Vb,Vb),window.removeEventListener("test",Vb,Vb)}catch{IT=!1}var Tp=IT?{passive:!1}:!1,nG=function(t){return t.tagName==="TEXTAREA"},nj=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!nG(t)&&n[e]==="visible")},rG=function(t){return nj(t,"overflowY")},iG=function(t){return nj(t,"overflowX")},VA=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=rj(t,r);if(i){var s=ij(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},sG=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},oG=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},rj=function(t,e){return t==="v"?rG(e):iG(e)},ij=function(t,e){return t==="v"?sG(e):oG(e)},aG=function(t,e){return t==="h"&&e==="rtl"?-1:1},lG=function(t,e,n,r,i){var s=aG(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,c=e.contains(a),d=!1,h=o>0,p=0,y=0;do{var S=ij(t,a),k=S[0],C=S[1],E=S[2],_=C-E-s*k;(k||_)&&rj(t,a)&&(p+=_,y+=k),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(h&&Math.abs(p)<1||!h&&Math.abs(y)<1)&&(d=!0),d},Bb=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},BA=function(t){return[t.deltaX,t.deltaY]},zA=function(t){return t&&"current"in t?t.current:t},cG=function(t,e){return t[0]===e[0]&&t[1]===e[1]},uG=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},dG=0,Ep=[];function fG(t){var e=v.useRef([]),n=v.useRef([0,0]),r=v.useRef(),i=v.useState(dG++)[0],s=v.useState(tj)[0],o=v.useRef(t);v.useEffect(function(){o.current=t},[t]),v.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var C=MK([t.lockRef.current],(t.shards||[]).map(zA),!0).filter(Boolean);return C.forEach(function(E){return E.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),C.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=v.useCallback(function(C,E){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!o.current.allowPinchZoom;var _=Bb(C),A=n.current,M="deltaX"in C?C.deltaX:A[0]-_[0],I="deltaY"in C?C.deltaY:A[1]-_[1],N,O=C.target,j=Math.abs(M)>Math.abs(I)?"h":"v";if("touches"in C&&j==="h"&&O.type==="range")return!1;var V=VA(j,O);if(!V)return!0;if(V?N=j:(N=j==="v"?"h":"v",V=VA(j,O)),!V)return!1;if(!r.current&&"changedTouches"in C&&(M||I)&&(r.current=N),!N)return!0;var $=r.current||N;return lG($,E,C,$==="h"?M:I)},[]),c=v.useCallback(function(C){var E=C;if(!(!Ep.length||Ep[Ep.length-1]!==s)){var _="deltaY"in E?BA(E):Bb(E),A=e.current.filter(function(N){return N.name===E.type&&(N.target===E.target||E.target===N.shadowParent)&&cG(N.delta,_)})[0];if(A&&A.should){E.cancelable&&E.preventDefault();return}if(!A){var M=(o.current.shards||[]).map(zA).filter(Boolean).filter(function(N){return N.contains(E.target)}),I=M.length>0?a(E,M[0]):!o.current.noIsolation;I&&E.cancelable&&E.preventDefault()}}},[]),d=v.useCallback(function(C,E,_,A){var M={name:C,delta:E,target:_,should:A,shadowParent:hG(_)};e.current.push(M),setTimeout(function(){e.current=e.current.filter(function(I){return I!==M})},1)},[]),h=v.useCallback(function(C){n.current=Bb(C),r.current=void 0},[]),p=v.useCallback(function(C){d(C.type,BA(C),C.target,a(C,t.lockRef.current))},[]),y=v.useCallback(function(C){d(C.type,Bb(C),C.target,a(C,t.lockRef.current))},[]);v.useEffect(function(){return Ep.push(s),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:y}),document.addEventListener("wheel",c,Tp),document.addEventListener("touchmove",c,Tp),document.addEventListener("touchstart",h,Tp),function(){Ep=Ep.filter(function(C){return C!==s}),document.removeEventListener("wheel",c,Tp),document.removeEventListener("touchmove",c,Tp),document.removeEventListener("touchstart",h,Tp)}},[]);var S=t.removeScrollBar,k=t.inert;return v.createElement(v.Fragment,null,k?v.createElement(s,{styles:uG(i)}):null,S?v.createElement(tG,{gapMode:t.gapMode}):null)}function hG(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const pG=zK(ej,fG);var Gw=v.forwardRef(function(t,e){return v.createElement(Kw,pl({},t,{ref:e,sideCar:pG}))});Gw.classNames=Kw.classNames;var mG=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},_p=new WeakMap,zb=new WeakMap,$b={},sk=0,sj=function(t){return t&&(t.host||sj(t.parentNode))},gG=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=sj(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},vG=function(t,e,n,r){var i=gG(e,Array.isArray(t)?t:[t]);$b[n]||($b[n]=new WeakMap);var s=$b[n],o=[],a=new Set,c=new Set(i),d=function(p){!p||a.has(p)||(a.add(p),d(p.parentNode))};i.forEach(d);var h=function(p){!p||c.has(p)||Array.prototype.forEach.call(p.children,function(y){if(a.has(y))h(y);else try{var S=y.getAttribute(r),k=S!==null&&S!=="false",C=(_p.get(y)||0)+1,E=(s.get(y)||0)+1;_p.set(y,C),s.set(y,E),o.push(y),C===1&&k&&zb.set(y,!0),E===1&&y.setAttribute(n,"true"),k||y.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",y,_)}})};return h(e),a.clear(),sk++,function(){o.forEach(function(p){var y=_p.get(p)-1,S=s.get(p)-1;_p.set(p,y),s.set(p,S),y||(zb.has(p)||p.removeAttribute(r),zb.delete(p)),S||p.removeAttribute(n)}),sk--,sk||(_p=new WeakMap,_p=new WeakMap,zb=new WeakMap,$b={})}},LE=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=mG(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),vG(r,i,n,"aria-hidden")):function(){return null}},Yw="Dialog",[oj,aj]=Yo(Yw),[yG,Oa]=oj(Yw),lj=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=v.useRef(null),c=v.useRef(null),[d,h]=Zu({prop:r,defaultProp:i??!1,onChange:s,caller:Yw});return b.jsx(yG,{scope:e,triggerRef:a,contentRef:c,contentId:bl(),titleId:bl(),descriptionId:bl(),open:d,onOpenChange:h,onOpenToggle:v.useCallback(()=>h(p=>!p),[h]),modal:o,children:n})};lj.displayName=Yw;var cj="DialogTrigger",uj=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Oa(cj,n),s=OE(e,i.triggerRef);return b.jsx(Qy.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":UE(i.open),...r,ref:s,onClick:ft(t.onClick,i.onOpenToggle)})});uj.displayName=cj;var jE="DialogPortal",[bG,dj]=oj(jE,{forceMount:void 0}),fj=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Oa(jE,e);return b.jsx(bG,{scope:e,forceMount:n,children:v.Children.map(r,o=>b.jsx(Al,{present:n||s.open,children:b.jsx(qw,{asChild:!0,container:i,children:o})}))})};fj.displayName=jE;var qx="DialogOverlay",hj=v.forwardRef((t,e)=>{const n=dj(qx,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Oa(qx,t.__scopeDialog);return s.modal?b.jsx(Al,{present:r||s.open,children:b.jsx(wG,{...i,ref:e})}):null});hj.displayName=qx;var xG=JL("DialogOverlay.RemoveScroll"),wG=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Oa(qx,n);return b.jsx(Gw,{as:xG,allowPinchZoom:!0,shards:[i.contentRef],children:b.jsx(Qy.div,{"data-state":UE(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Bf="DialogContent",pj=v.forwardRef((t,e)=>{const n=dj(Bf,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Oa(Bf,t.__scopeDialog);return b.jsx(Al,{present:r||s.open,children:s.modal?b.jsx(SG,{...i,ref:e}):b.jsx(CG,{...i,ref:e})})});pj.displayName=Bf;var SG=v.forwardRef((t,e)=>{const n=Oa(Bf,t.__scopeDialog),r=v.useRef(null),i=OE(e,n.contentRef,r);return v.useEffect(()=>{const s=r.current;if(s)return LE(s)},[]),b.jsx(mj,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ft(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ft(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:ft(t.onFocusOutside,s=>s.preventDefault())})}),CG=v.forwardRef((t,e)=>{const n=Oa(Bf,t.__scopeDialog),r=v.useRef(!1),i=v.useRef(!1);return b.jsx(mj,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),mj=v.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Oa(Bf,n),c=v.useRef(null),d=OE(e,c);return DE(),b.jsxs(b.Fragment,{children:[b.jsx(Hw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:b.jsx(Yy,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":UE(a.open),...o,ref:d,onDismiss:()=>a.onOpenChange(!1)})}),b.jsxs(b.Fragment,{children:[b.jsx(TG,{titleId:a.titleId}),b.jsx(_G,{contentRef:c,descriptionId:a.descriptionId})]})]})}),FE="DialogTitle",gj=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Oa(FE,n);return b.jsx(Qy.h2,{id:i.titleId,...r,ref:e})});gj.displayName=FE;var vj="DialogDescription",yj=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Oa(vj,n);return b.jsx(Qy.p,{id:i.descriptionId,...r,ref:e})});yj.displayName=vj;var bj="DialogClose",xj=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Oa(bj,n);return b.jsx(Qy.button,{type:"button",...r,ref:e,onClick:ft(t.onClick,()=>i.onOpenChange(!1))})});xj.displayName=bj;function UE(t){return t?"open":"closed"}var wj="DialogTitleWarning",[kG,Sj]=_7(wj,{contentName:Bf,titleName:FE,docsSlug:"dialog"}),TG=({titleId:t})=>{const e=Sj(wj),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return v.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},EG="DialogDescriptionWarning",_G=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Sj(EG).contentName}}.`;return v.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Cj=lj,kj=uj,Tj=fj,VE=hj,BE=pj,zE=gj,$E=yj,Qw=xj;const Jy=Cj,Jw=kj,RG=Tj,PG=Qw,Ej=v.forwardRef(({className:t,...e},n)=>b.jsx(VE,{ref:n,className:Vt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));Ej.displayName=VE.displayName;const Km=v.forwardRef(({className:t,children:e,...n},r)=>b.jsxs(RG,{children:[b.jsx(Ej,{}),b.jsxs(BE,{ref:r,className:Vt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,b.jsxs(Qw,{className:"absolute right-16 top-16 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-hidden focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[b.jsx(ML,{className:"size-16"}),b.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Km.displayName=BE.displayName;const Gm=({className:t,...e})=>b.jsx("div",{className:Vt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Gm.displayName="DialogHeader";const WE=({className:t,...e})=>b.jsx("div",{className:Vt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-8",t),...e});WE.displayName="DialogFooter";const Ym=v.forwardRef(({className:t,...e},n)=>b.jsx(zE,{ref:n,className:Vt("text-lg font-semibold leading-none tracking-tight",t),...e}));Ym.displayName=zE.displayName;const HE=v.forwardRef(({className:t,...e},n)=>b.jsx($E,{ref:n,className:t,...e}));HE.displayName=$E.displayName;const Cm=v.forwardRef(({className:t,type:e,...n},r)=>b.jsx("input",{type:e,className:Vt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-off set-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-1 duration-300 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Cm.displayName="Input";const _j=()=>{const{pathname:t}=qs(),[e,n]=Aq(),r=v.useRef(null),[i,s]=v.useState(""),[o,a]=v.useState(""),[c,d]=v.useState(!1),h=t.split("/")[2],{data:p}=po({queryKey:["invitationCode",h],queryFn:()=>Q9(h)}),y=(C,E)=>`${window.location.origin}/room-invite?code=${C}&room=${E}`;v.useEffect(()=>{if(p){const C=y(p,h);a(C);const E=C.replace(window.location.origin,"");s(E)}},[p]),v.useEffect(()=>(r.current||(r.current=Fq(h,C=>{a(E=>{if(E!==C){const _=y(C,h),A=_.replace(window.location.origin,"");return s(A),_}return E})})),()=>{var C;(C=r.current)==null||C.close(),r.current=null}),[h]);const S=()=>t.includes("/call")?b.jsxs("div",{className:"flex items-center justify-center gap-8 mt-12 p-8 w-full rounded-md text-sm text-white bg-violet-900 hover:bg-violet-800 duration-300",children:[b.jsx(vA,{size:16}),"Invite someone"]}):b.jsx("div",{className:"flex items-center p-12 border rounded-full border-gray-200 bg-gray-100 hover:bg-gray-200 hover:scale-105 duration-300 ease-in-out cursor-pointer",children:b.jsx(vA,{size:16})}),k=C=>()=>{n(C).then(()=>{d(!0),setTimeout(()=>d(!1),2500)})};return b.jsxs(Jy,{children:[b.jsx(Jw,{children:S()}),b.jsxs(Km,{className:"sm:max-w-[425px]",children:[b.jsxs(Gm,{children:[b.jsx(Ym,{children:"Invitation "}),b.jsx(HE,{children:"Copy the invitation URL below and share it with a user that wants to participate in this call."})]}),b.jsxs("div",{className:"flex gap-12 mt-8",children:[b.jsx(Cm,{id:"invitation",value:i,disabled:!0}),b.jsx(ls,{type:"submit",variant:"ghost",disabled:c,onClick:k(o),children:e&&c?"Copied":"Copy"})]})]})]})};function $A(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function AG(...t){return e=>{let n=!1;const r=t.map(i=>{const s=$A(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():$A(t[i],null)}}}}function Rj(...t){return v.useCallback(AG(...t),t)}var IG=Symbol("radix.slottable");function NG(t){const e=({children:n})=>b.jsx(b.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=IG,e}var Pj="AlertDialog",[MG,Lge]=Yo(Pj,[aj]),Oc=aj(),Aj=t=>{const{__scopeAlertDialog:e,...n}=t,r=Oc(e);return b.jsx(Cj,{...r,...n,modal:!0})};Aj.displayName=Pj;var OG="AlertDialogTrigger",DG=v.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Oc(n);return b.jsx(kj,{...i,...r,ref:e})});DG.displayName=OG;var LG="AlertDialogPortal",Ij=t=>{const{__scopeAlertDialog:e,...n}=t,r=Oc(e);return b.jsx(Tj,{...r,...n})};Ij.displayName=LG;var jG="AlertDialogOverlay",Nj=v.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Oc(n);return b.jsx(VE,{...i,...r,ref:e})});Nj.displayName=jG;var Qp="AlertDialogContent",[FG,UG]=MG(Qp),VG=NG("AlertDialogContent"),Mj=v.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...i}=t,s=Oc(n),o=v.useRef(null),a=Rj(e,o),c=v.useRef(null);return b.jsx(kG,{contentName:Qp,titleName:Oj,docsSlug:"alert-dialog",children:b.jsx(FG,{scope:n,cancelRef:c,children:b.jsxs(BE,{role:"alertdialog",...s,...i,ref:a,onOpenAutoFocus:ft(i.onOpenAutoFocus,d=>{var h;d.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[b.jsx(VG,{children:r}),b.jsx(zG,{contentRef:o})]})})})});Mj.displayName=Qp;var Oj="AlertDialogTitle",Dj=v.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Oc(n);return b.jsx(zE,{...i,...r,ref:e})});Dj.displayName=Oj;var Lj="AlertDialogDescription",jj=v.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Oc(n);return b.jsx($E,{...i,...r,ref:e})});jj.displayName=Lj;var BG="AlertDialogAction",Fj=v.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Oc(n);return b.jsx(Qw,{...i,...r,ref:e})});Fj.displayName=BG;var Uj="AlertDialogCancel",Vj=v.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:i}=UG(Uj,n),s=Oc(n),o=Rj(e,i);return b.jsx(Qw,{...s,...r,ref:o})});Vj.displayName=Uj;var zG=({contentRef:t})=>{const e=`\`${Qp}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Qp}\` by passing a \`${Lj}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Qp}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return v.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},$G=Aj,WG=Ij,Bj=Nj,zj=Mj,$j=Fj,Wj=Vj,Hj=Dj,qj=jj;const HG=$G,qG=WG,Kj=v.forwardRef(({className:t,...e},n)=>b.jsx(Bj,{className:Vt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));Kj.displayName=Bj.displayName;const Gj=v.forwardRef(({className:t,...e},n)=>b.jsxs(qG,{children:[b.jsx(Kj,{}),b.jsx(zj,{ref:n,className:Vt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Gj.displayName=zj.displayName;const Yj=({className:t,...e})=>b.jsx("div",{className:Vt("flex flex-col space-y-2 text-center sm:text-left",t),...e});Yj.displayName="AlertDialogHeader";const Qj=({className:t,...e})=>b.jsx("div",{className:Vt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Qj.displayName="AlertDialogFooter";const Jj=v.forwardRef(({className:t,...e},n)=>b.jsx(Hj,{ref:n,className:Vt("text-lg font-semibold",t),...e}));Jj.displayName=Hj.displayName;const Xj=v.forwardRef(({className:t,...e},n)=>b.jsx(qj,{ref:n,className:Vt("text-sm text-muted-foreground",t),...e}));Xj.displayName=qj.displayName;const Zj=v.forwardRef(({className:t,...e},n)=>b.jsx($j,{ref:n,className:Vt(ME(),t),...e}));Zj.displayName=$j.displayName;const KG=v.forwardRef(({className:t,...e},n)=>b.jsx(Wj,{ref:n,className:Vt(ME({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));KG.displayName=Wj.displayName;const GG=()=>{const{latestRoomKilled:t}=Wm(),e=Ia(),[n,r]=v.useState(!1);return v.useEffect(()=>{t&&r(!0)},[t]),b.jsx(HG,{open:n,children:b.jsxs(Gj,{children:[b.jsxs(Yj,{children:[b.jsx(Jj,{children:"Call has ended by host "}),b.jsx(Xj,{children:"The host has killed the room. You have been automatically removed from the room."})]}),b.jsx(Qj,{children:b.jsx(Zj,{onClick:()=>e("/",{replace:!0}),children:"Return to home"})})]})})};var ok={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var WA;function YG(){return WA||(WA=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(ok)),ok.exports}var QG=YG();const li=Nw(QG);function HA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function JG(...t){return e=>{let n=!1;const r=t.map(i=>{const s=HA(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():HA(t[i],null)}}}}var e2=v.forwardRef((t,e)=>{const{children:n,...r}=t,i=v.Children.toArray(n),s=i.find(ZG);if(s){const o=s.props.children,a=i.map(c=>c===s?v.Children.count(o)>1?v.Children.only(null):v.isValidElement(o)?o.props.children:null:c);return b.jsx(NT,{...r,ref:e,children:v.isValidElement(o)?v.cloneElement(o,void 0,a):null})}return b.jsx(NT,{...r,ref:e,children:n})});e2.displayName="Slot";var NT=v.forwardRef((t,e)=>{const{children:n,...r}=t;if(v.isValidElement(n)){const i=tY(n),s=eY(r,n.props);return n.type!==v.Fragment&&(s.ref=e?JG(e,i):i),v.cloneElement(n,s)}return v.Children.count(n)>1?v.Children.only(null):null});NT.displayName="SlotClone";var XG=({children:t})=>b.jsx(b.Fragment,{children:t});function ZG(t){return v.isValidElement(t)&&t.type===XG}function eY(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function tY(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var nY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],rY=nY.reduce((t,e)=>{const n=v.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?e2:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(a,{...o,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),iY="Separator",qA="horizontal",sY=["horizontal","vertical"],t2=v.forwardRef((t,e)=>{const{decorative:n,orientation:r=qA,...i}=t,s=oY(r)?r:qA,a=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return b.jsx(rY.div,{"data-orientation":s,...a,...i,ref:e})});t2.displayName=iY;function oY(t){return sY.includes(t)}var n2=t2;const Bs=v.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>b.jsx(n2,{ref:i,decorative:n,orientation:e,className:Vt("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Bs.displayName=n2.displayName;var Uv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var aY=Uv.exports,KA;function lY(){return KA||(KA=1,function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",p=1,y=2,S=4,k=1,C=2,E=1,_=2,A=4,M=8,I=16,N=32,O=64,j=128,V=256,$=512,W=30,J="...",Y=800,pe=16,fe=1,Ee=2,le=3,Se=1/0,q=9007199254740991,te=17976931348623157e292,ae=NaN,B=4294967295,de=B-1,se=B>>>1,me=[["ary",j],["bind",E],["bindKey",_],["curry",M],["curryRight",I],["flip",$],["partial",N],["partialRight",O],["rearg",V]],Te="[object Arguments]",Re="[object Array]",ie="[object AsyncFunction]",be="[object Boolean]",Le="[object Date]",$e="[object DOMException]",Je="[object Error]",pt="[object Function]",Et="[object GeneratorFunction]",wt="[object Map]",_n="[object Number]",er="[object Null]",dn="[object Object]",tn="[object Promise]",Nn="[object Proxy]",Q="[object RegExp]",ce="[object Set]",ve="[object String]",qe="[object Symbol]",Ge="[object Undefined]",Be="[object WeakMap]",Ze="[object WeakSet]",kt="[object ArrayBuffer]",Ft="[object DataView]",We="[object Float32Array]",Ut="[object Float64Array]",Qt="[object Int8Array]",hn="[object Int16Array]",Hn="[object Int32Array]",It="[object Uint8Array]",xn="[object Uint8ClampedArray]",Rn="[object Uint16Array]",sr="[object Uint32Array]",Br=/\b__p \+= '';/g,cr=/\b(__p \+=) '' \+/g,Jo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ks=/&(?:amp|lt|gt|quot|#39);/g,Ki=/[&<>"']/g,Ol=RegExp(Ks.source),Dt=RegExp(Ki.source),Vn=/<%-([\s\S]+?)%>/g,Yn=/<%([\s\S]+?)%>/g,Ir=/<%=([\s\S]+?)%>/g,bo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,G=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,we=/[\\^$.*+?()[\]{}|]/g,Oe=RegExp(we.source),He=/^\s+/,ct=/\s/,st=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ut=/\{\n\/\* \[wrapped with (.+)\] \*/,yt=/,? & /,Pt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_t=/[()=,{}\[\]\/\s]/,vt=/\\(\\)?/g,At=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Cn=/\w*$/,ur=/^[-+]0x[0-9a-f]+$/i,Xr=/^0b[01]+$/i,Bn=/^\[object .+?Constructor\]$/,Mn=/^0o[0-7]+$/i,xo=/^(?:0|[1-9]\d*)$/,Da=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Gi=/($^)/,hs=/['\n\r\u2028\u2029\\]/g,On="\\ud800-\\udfff",Dl="\\u0300-\\u036f",Gs="\\ufe20-\\ufe2f",Ll="\\u20d0-\\u20ff",wo=Dl+Gs+Ll,nn="\\u2700-\\u27bf",yr="a-z\\xdf-\\xf6\\xf8-\\xff",Ys="\\xac\\xb1\\xd7\\xf7",zr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",dr="\\u2000-\\u206f",di=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",gd="A-Z\\xc0-\\xd6\\xd8-\\xde",rh="\\ufe0e\\ufe0f",f0=Ys+zr+dr+di,jc="[']",ih="["+On+"]",Fc="["+f0+"]",jl="["+wo+"]",h0="\\d+",US="["+nn+"]",sh="["+yr+"]",rg="[^"+On+f0+h0+nn+yr+gd+"]",vd="\\ud83c[\\udffb-\\udfff]",yd="(?:"+jl+"|"+vd+")",p0="[^"+On+"]",bd="(?:\\ud83c[\\udde6-\\uddff]){2}",wn="[\\ud800-\\udbff][\\udc00-\\udfff]",Fl="["+gd+"]",ig="\\u200d",oh="(?:"+sh+"|"+rg+")",m0="(?:"+Fl+"|"+rg+")",sg="(?:"+jc+"(?:d|ll|m|re|s|t|ve))?",og="(?:"+jc+"(?:D|LL|M|RE|S|T|VE))?",ah=yd+"?",xd="["+rh+"]?",La="(?:"+ig+"(?:"+[p0,bd,wn].join("|")+")"+xd+ah+")*",ja="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Fa="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Uc=xd+ah+La,wd="(?:"+[US,bd,wn].join("|")+")"+Uc,Ua="(?:"+[p0+jl+"?",jl,bd,wn,ih].join("|")+")",VS=RegExp(jc,"g"),g0=RegExp(jl,"g"),Ul=RegExp(vd+"(?="+vd+")|"+Ua+Uc,"g"),BS=RegExp([Fl+"?"+sh+"+"+sg+"(?="+[Fc,Fl,"$"].join("|")+")",m0+"+"+og+"(?="+[Fc,Fl+oh,"$"].join("|")+")",Fl+"?"+oh+"+"+sg,Fl+"+"+og,Fa,ja,h0,wd].join("|"),"g"),v0=RegExp("["+ig+On+wo+rh+"]"),lh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,y0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zS=-1,Pn={};Pn[We]=Pn[Ut]=Pn[Qt]=Pn[hn]=Pn[Hn]=Pn[It]=Pn[xn]=Pn[Rn]=Pn[sr]=!0,Pn[Te]=Pn[Re]=Pn[kt]=Pn[be]=Pn[Ft]=Pn[Le]=Pn[Je]=Pn[pt]=Pn[wt]=Pn[_n]=Pn[dn]=Pn[Q]=Pn[ce]=Pn[ve]=Pn[Be]=!1;var kn={};kn[Te]=kn[Re]=kn[kt]=kn[Ft]=kn[be]=kn[Le]=kn[We]=kn[Ut]=kn[Qt]=kn[hn]=kn[Hn]=kn[wt]=kn[_n]=kn[dn]=kn[Q]=kn[ce]=kn[ve]=kn[qe]=kn[It]=kn[xn]=kn[Rn]=kn[sr]=!0,kn[Je]=kn[pt]=kn[Be]=!1;var Vc={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ch={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$S={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},WS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ag=parseFloat,uh=parseInt,dh=typeof Wu=="object"&&Wu&&Wu.Object===Object&&Wu,b0=typeof self=="object"&&self&&self.Object===Object&&self,Qn=dh||b0||Function("return this")(),Sd=e&&!e.nodeType&&e,So=Sd&&!0&&t&&!t.nodeType&&t,lg=So&&So.exports===Sd,Bc=lg&&dh.process,Ti=function(){try{var oe=So&&So.require&&So.require("util").types;return oe||Bc&&Bc.binding&&Bc.binding("util")}catch{}}(),cg=Ti&&Ti.isArrayBuffer,Li=Ti&&Ti.isDate,Vl=Ti&&Ti.isMap,fh=Ti&&Ti.isRegExp,zc=Ti&&Ti.isSet,x0=Ti&&Ti.isTypedArray;function Ei(oe,Ae,xe){switch(xe.length){case 0:return oe.call(Ae);case 1:return oe.call(Ae,xe[0]);case 2:return oe.call(Ae,xe[0],xe[1]);case 3:return oe.call(Ae,xe[0],xe[1],xe[2])}return oe.apply(Ae,xe)}function ug(oe,Ae,xe,nt){for(var jt=-1,vn=oe==null?0:oe.length;++jt<vn;){var br=oe[jt];Ae(nt,br,xe(br),oe)}return nt}function fi(oe,Ae){for(var xe=-1,nt=oe==null?0:oe.length;++xe<nt&&Ae(oe[xe],xe,oe)!==!1;);return oe}function hh(oe,Ae){for(var xe=oe==null?0:oe.length;xe--&&Ae(oe[xe],xe,oe)!==!1;);return oe}function dg(oe,Ae){for(var xe=-1,nt=oe==null?0:oe.length;++xe<nt;)if(!Ae(oe[xe],xe,oe))return!1;return!0}function Va(oe,Ae){for(var xe=-1,nt=oe==null?0:oe.length,jt=0,vn=[];++xe<nt;){var br=oe[xe];Ae(br,xe,oe)&&(vn[jt++]=br)}return vn}function ph(oe,Ae){var xe=oe==null?0:oe.length;return!!xe&&$c(oe,Ae,0)>-1}function fg(oe,Ae,xe){for(var nt=-1,jt=oe==null?0:oe.length;++nt<jt;)if(xe(Ae,oe[nt]))return!0;return!1}function zn(oe,Ae){for(var xe=-1,nt=oe==null?0:oe.length,jt=Array(nt);++xe<nt;)jt[xe]=Ae(oe[xe],xe,oe);return jt}function Ba(oe,Ae){for(var xe=-1,nt=Ae.length,jt=oe.length;++xe<nt;)oe[jt+xe]=Ae[xe];return oe}function hg(oe,Ae,xe,nt){var jt=-1,vn=oe==null?0:oe.length;for(nt&&vn&&(xe=oe[++jt]);++jt<vn;)xe=Ae(xe,oe[jt],jt,oe);return xe}function HS(oe,Ae,xe,nt){var jt=oe==null?0:oe.length;for(nt&&jt&&(xe=oe[--jt]);jt--;)xe=Ae(xe,oe[jt],jt,oe);return xe}function pg(oe,Ae){for(var xe=-1,nt=oe==null?0:oe.length;++xe<nt;)if(Ae(oe[xe],xe,oe))return!0;return!1}var qS=gg("length");function w0(oe){return oe.split("")}function KS(oe){return oe.match(Pt)||[]}function S0(oe,Ae,xe){var nt;return xe(oe,function(jt,vn,br){if(Ae(jt,vn,br))return nt=vn,!1}),nt}function mh(oe,Ae,xe,nt){for(var jt=oe.length,vn=xe+(nt?1:-1);nt?vn--:++vn<jt;)if(Ae(oe[vn],vn,oe))return vn;return-1}function $c(oe,Ae,xe){return Ae===Ae?yh(oe,Ae,xe):mh(oe,C0,xe)}function mg(oe,Ae,xe,nt){for(var jt=xe-1,vn=oe.length;++jt<vn;)if(nt(oe[jt],Ae))return jt;return-1}function C0(oe){return oe!==oe}function k0(oe,Ae){var xe=oe==null?0:oe.length;return xe?vg(oe,Ae)/xe:ae}function gg(oe){return function(Ae){return Ae==null?n:Ae[oe]}}function gh(oe){return function(Ae){return oe==null?n:oe[Ae]}}function T0(oe,Ae,xe,nt,jt){return jt(oe,function(vn,br,Dn){xe=nt?(nt=!1,vn):Ae(xe,vn,br,Dn)}),xe}function GS(oe,Ae){var xe=oe.length;for(oe.sort(Ae);xe--;)oe[xe]=oe[xe].value;return oe}function vg(oe,Ae){for(var xe,nt=-1,jt=oe.length;++nt<jt;){var vn=Ae(oe[nt]);vn!==n&&(xe=xe===n?vn:xe+vn)}return xe}function yg(oe,Ae){for(var xe=-1,nt=Array(oe);++xe<oe;)nt[xe]=Ae(xe);return nt}function YS(oe,Ae){return zn(Ae,function(xe){return[xe,oe[xe]]})}function E0(oe){return oe&&oe.slice(0,bh(oe)+1).replace(He,"")}function Yi(oe){return function(Ae){return oe(Ae)}}function Cd(oe,Ae){return zn(Ae,function(xe){return oe[xe]})}function Xo(oe,Ae){return oe.has(Ae)}function _0(oe,Ae){for(var xe=-1,nt=oe.length;++xe<nt&&$c(Ae,oe[xe],0)>-1;);return xe}function bg(oe,Ae){for(var xe=oe.length;xe--&&$c(Ae,oe[xe],0)>-1;);return xe}function R0(oe,Ae){for(var xe=oe.length,nt=0;xe--;)oe[xe]===Ae&&++nt;return nt}var P0=gh(Vc),A0=gh(ch);function I0(oe){return"\\"+WS[oe]}function Wc(oe,Ae){return oe==null?n:oe[Ae]}function Hc(oe){return v0.test(oe)}function QS(oe){return lh.test(oe)}function JS(oe){for(var Ae,xe=[];!(Ae=oe.next()).done;)xe.push(Ae.value);return xe}function vh(oe){var Ae=-1,xe=Array(oe.size);return oe.forEach(function(nt,jt){xe[++Ae]=[jt,nt]}),xe}function xg(oe,Ae){return function(xe){return oe(Ae(xe))}}function ps(oe,Ae){for(var xe=-1,nt=oe.length,jt=0,vn=[];++xe<nt;){var br=oe[xe];(br===Ae||br===h)&&(oe[xe]=h,vn[jt++]=xe)}return vn}function za(oe){var Ae=-1,xe=Array(oe.size);return oe.forEach(function(nt){xe[++Ae]=nt}),xe}function XS(oe){var Ae=-1,xe=Array(oe.size);return oe.forEach(function(nt){xe[++Ae]=[nt,nt]}),xe}function yh(oe,Ae,xe){for(var nt=xe-1,jt=oe.length;++nt<jt;)if(oe[nt]===Ae)return nt;return-1}function ZS(oe,Ae,xe){for(var nt=xe+1;nt--;)if(oe[nt]===Ae)return nt;return nt}function Bl(oe){return Hc(oe)?M0(oe):qS(oe)}function Qi(oe){return Hc(oe)?O0(oe):w0(oe)}function bh(oe){for(var Ae=oe.length;Ae--&&ct.test(oe.charAt(Ae)););return Ae}var N0=gh($S);function M0(oe){for(var Ae=Ul.lastIndex=0;Ul.test(oe);)++Ae;return Ae}function O0(oe){return oe.match(Ul)||[]}function eC(oe){return oe.match(BS)||[]}var tC=function oe(Ae){Ae=Ae==null?Qn:qc.defaults(Qn.Object(),Ae,qc.pick(Qn,y0));var xe=Ae.Array,nt=Ae.Date,jt=Ae.Error,vn=Ae.Function,br=Ae.Math,Dn=Ae.Object,kd=Ae.RegExp,nC=Ae.String,ms=Ae.TypeError,Zo=xe.prototype,wg=vn.prototype,Co=Dn.prototype,Kc=Ae["__core-js_shared__"],Td=wg.toString,yn=Co.hasOwnProperty,Gc=0,xh=function(){var f=/[^.]+$/.exec(Kc&&Kc.keys&&Kc.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),Ed=Co.toString,wh=Td.call(Dn),D0=Qn._,L0=kd("^"+Td.call(yn).replace(we,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_d=lg?Ae.Buffer:n,ea=Ae.Symbol,Rd=Ae.Uint8Array,Sg=_d?_d.allocUnsafe:n,Qs=xg(Dn.getPrototypeOf,Dn),Sh=Dn.create,Ch=Co.propertyIsEnumerable,kh=Zo.splice,j0=ea?ea.isConcatSpreadable:n,ta=ea?ea.iterator:n,zl=ea?ea.toStringTag:n,Pd=function(){try{var f=Za(Dn,"defineProperty");return f({},"",{}),f}catch{}}(),F0=Ae.clearTimeout!==Qn.clearTimeout&&Ae.clearTimeout,qn=nt&&nt.now!==Qn.Date.now&&nt.now,Cg=Ae.setTimeout!==Qn.setTimeout&&Ae.setTimeout,$l=br.ceil,$a=br.floor,Th=Dn.getOwnPropertySymbols,kg=_d?_d.isBuffer:n,Yc=Ae.isFinite,Eh=Zo.join,Qc=xg(Dn.keys,Dn),xr=br.max,hi=br.min,rC=nt.now,U0=Ae.parseInt,Ad=br.random,_h=Zo.reverse,Id=Za(Ae,"DataView"),Wl=Za(Ae,"Map"),Nd=Za(Ae,"Promise"),Wa=Za(Ae,"Set"),Md=Za(Ae,"WeakMap"),Jc=Za(Dn,"create"),Rh=Md&&new Md,Xc={},Tg=el(Id),Ha=el(Wl),V0=el(Nd),Zc=el(Wa),ko=el(Md),qa=ea?ea.prototype:n,Ji=qa?qa.valueOf:n,Ph=qa?qa.toString:n;function F(f){if(Sr(f)&&!Ht(f)&&!(f instanceof Wt)){if(f instanceof pi)return f;if(yn.call(f,"__wrapped__"))return pb(f)}return new pi(f)}var eu=function(){function f(){}return function(m){if(!pr(m))return{};if(Sh)return Sh(m);f.prototype=m;var w=new f;return f.prototype=n,w}}();function To(){}function pi(f,m){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=n}F.templateSettings={escape:Vn,evaluate:Yn,interpolate:Ir,variable:"",imports:{_:F}},F.prototype=To.prototype,F.prototype.constructor=F,pi.prototype=eu(To.prototype),pi.prototype.constructor=pi;function Wt(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function Ah(){var f=new Wt(this.__wrapped__);return f.__actions__=Ri(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=Ri(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=Ri(this.__views__),f}function Eg(){if(this.__filtered__){var f=new Wt(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function tu(){var f=this.__wrapped__.value(),m=this.__dir__,w=Ht(f),P=m<0,D=w?f.length:0,U=ev(0,D,this.__views__),H=U.start,ee=U.end,ue=ee-H,Ne=P?ee:H-1,Me=this.__iteratees__,Ve=Me.length,tt=0,bt=hi(ue,this.__takeCount__);if(!w||!P&&D==ue&&bt==ue)return cu(f,this.__actions__);var Mt=[];e:for(;ue--&&tt<bt;){Ne+=m;for(var Jt=-1,Ot=f[Ne];++Jt<Ve;){var an=Me[Jt],mn=an.iteratee,oo=an.type,ns=mn(Ot);if(oo==Ee)Ot=ns;else if(!ns){if(oo==fe)continue e;break e}}Mt[tt++]=Ot}return Mt}Wt.prototype=eu(To.prototype),Wt.prototype.constructor=Wt;function ji(f){var m=-1,w=f==null?0:f.length;for(this.clear();++m<w;){var P=f[m];this.set(P[0],P[1])}}function Kn(){this.__data__=Jc?Jc(null):{},this.size=0}function $n(f){var m=this.has(f)&&delete this.__data__[f];return this.size-=m?1:0,m}function Ka(f){var m=this.__data__;if(Jc){var w=m[f];return w===c?n:w}return yn.call(m,f)?m[f]:n}function mi(f){var m=this.__data__;return Jc?m[f]!==n:yn.call(m,f)}function Fi(f,m){var w=this.__data__;return this.size+=this.has(f)?0:1,w[f]=Jc&&m===n?c:m,this}ji.prototype.clear=Kn,ji.prototype.delete=$n,ji.prototype.get=Ka,ji.prototype.has=mi,ji.prototype.set=Fi;function _i(f){var m=-1,w=f==null?0:f.length;for(this.clear();++m<w;){var P=f[m];this.set(P[0],P[1])}}function nu(){this.__data__=[],this.size=0}function Ui(f){var m=this.__data__,w=vi(m,f);if(w<0)return!1;var P=m.length-1;return w==P?m.pop():kh.call(m,w,1),--this.size,!0}function Ih(f){var m=this.__data__,w=vi(m,f);return w<0?n:m[w][1]}function B0(f){return vi(this.__data__,f)>-1}function z0(f,m){var w=this.__data__,P=vi(w,f);return P<0?(++this.size,w.push([f,m])):w[P][1]=m,this}_i.prototype.clear=nu,_i.prototype.delete=Ui,_i.prototype.get=Ih,_i.prototype.has=B0,_i.prototype.set=z0;function gs(f){var m=-1,w=f==null?0:f.length;for(this.clear();++m<w;){var P=f[m];this.set(P[0],P[1])}}function $0(){this.size=0,this.__data__={hash:new ji,map:new(Wl||_i),string:new ji}}function na(f){var m=Yd(this,f).delete(f);return this.size-=m?1:0,m}function Nh(f){return Yd(this,f).get(f)}function _g(f){return Yd(this,f).has(f)}function W0(f,m){var w=Yd(this,f),P=w.size;return w.set(f,m),this.size+=w.size==P?0:1,this}gs.prototype.clear=$0,gs.prototype.delete=na,gs.prototype.get=Nh,gs.prototype.has=_g,gs.prototype.set=W0;function Hl(f){var m=-1,w=f==null?0:f.length;for(this.__data__=new gs;++m<w;)this.add(f[m])}function Ga(f){return this.__data__.set(f,c),this}function ru(f){return this.__data__.has(f)}Hl.prototype.add=Hl.prototype.push=Ga,Hl.prototype.has=ru;function gi(f){var m=this.__data__=new _i(f);this.size=m.size}function Mh(){this.__data__=new _i,this.size=0}function Oh(f){var m=this.__data__,w=m.delete(f);return this.size=m.size,w}function vs(f){return this.__data__.get(f)}function ys(f){return this.__data__.has(f)}function ql(f,m){var w=this.__data__;if(w instanceof _i){var P=w.__data__;if(!Wl||P.length<i-1)return P.push([f,m]),this.size=++w.size,this;w=this.__data__=new gs(P)}return w.set(f,m),this.size=w.size,this}gi.prototype.clear=Mh,gi.prototype.delete=Oh,gi.prototype.get=vs,gi.prototype.has=ys,gi.prototype.set=ql;function Eo(f,m){var w=Ht(f),P=!w&&lf(f),D=!w&&!P&&bu(f),U=!w&&!P&&!D&&Cp(f),H=w||P||D||U,ee=H?yg(f.length,nC):[],ue=ee.length;for(var Ne in f)(m||yn.call(f,Ne))&&!(H&&(Ne=="length"||D&&(Ne=="offset"||Ne=="parent")||U&&(Ne=="buffer"||Ne=="byteLength"||Ne=="byteOffset")||Xn(Ne,ue)))&&ee.push(Ne);return ee}function _o(f){var m=f.length;return m?f[au(0,m-1)]:n}function Kl(f,m){return op(Ri(f),ra(m,0,f.length))}function H0(f){return op(Ri(f))}function Od(f,m,w){(w!==n&&!ha(f[m],w)||w===n&&!(m in f))&&Ro(f,m,w)}function Gl(f,m,w){var P=f[m];(!(yn.call(f,m)&&ha(P,w))||w===n&&!(m in f))&&Ro(f,m,w)}function vi(f,m){for(var w=f.length;w--;)if(ha(f[w][0],m))return w;return-1}function Xi(f,m,w,P){return Ao(f,function(D,U,H){m(P,D,w(D),H)}),P}function Gn(f,m){return f&&Xs(m,xi(m),f)}function Js(f,m){return f&&Xs(m,_s(m),f)}function Ro(f,m,w){m=="__proto__"&&Pd?Pd(f,m,{configurable:!0,enumerable:!0,value:w,writable:!0}):f[m]=w}function Dh(f,m){for(var w=-1,P=m.length,D=xe(P),U=f==null;++w<P;)D[w]=U?n:_C(f,m[w]);return D}function ra(f,m,w){return f===f&&(w!==n&&(f=f<=w?f:w),m!==n&&(f=f>=m?f:m)),f}function Vi(f,m,w,P,D,U){var H,ee=m&p,ue=m&y,Ne=m&S;if(w&&(H=D?w(f,P,D,U):w(f)),H!==n)return H;if(!pr(f))return f;var Me=Ht(f);if(Me){if(H=Jd(f),!ee)return Ri(f,H)}else{var Ve=ti(f),tt=Ve==pt||Ve==Et;if(bu(f))return zg(f,ee);if(Ve==dn||Ve==Te||tt&&!D){if(H=ue||tt?{}:ni(f),!ee)return ue?sC(f,Js(H,f)):Gh(f,Gn(H,f))}else{if(!kn[Ve])return D?f:{};H=oC(f,Ve,ee)}}U||(U=new gi);var bt=U.get(f);if(bt)return bt;U.set(f,H),JR(f)?f.forEach(function(Ot){H.add(Vi(Ot,m,w,Ot,f,U))}):YR(f)&&f.forEach(function(Ot,an){H.set(an,Vi(Ot,m,w,an,f,U))});var Mt=Ne?ue?Gd:Kd:ue?_s:xi,Jt=Me?n:Mt(f);return fi(Jt||f,function(Ot,an){Jt&&(an=Ot,Ot=f[an]),Gl(H,an,Vi(Ot,m,w,an,f,U))}),H}function q0(f){var m=xi(f);return function(w){return Dd(w,f,m)}}function Dd(f,m,w){var P=w.length;if(f==null)return!P;for(f=Dn(f);P--;){var D=w[P],U=m[D],H=f[D];if(H===n&&!(D in f)||!U(H))return!1}return!0}function Rg(f,m,w){if(typeof f!="function")throw new ms(o);return gu(function(){f.apply(n,w)},m)}function Po(f,m,w,P){var D=-1,U=ph,H=!0,ee=f.length,ue=[],Ne=m.length;if(!ee)return ue;w&&(m=zn(m,Yi(w))),P?(U=fg,H=!1):m.length>=i&&(U=Xo,H=!1,m=new Hl(m));e:for(;++D<ee;){var Me=f[D],Ve=w==null?Me:w(Me);if(Me=P||Me!==0?Me:0,H&&Ve===Ve){for(var tt=Ne;tt--;)if(m[tt]===Ve)continue e;ue.push(Me)}else U(m,Ve,P)||ue.push(Me)}return ue}var Ao=Cs(Zi),K0=Cs(Ya,!0);function Ld(f,m){var w=!0;return Ao(f,function(P,D,U){return w=!!m(P,D,U),w}),w}function Yl(f,m,w){for(var P=-1,D=f.length;++P<D;){var U=f[P],H=m(U);if(H!=null&&(ee===n?H===H&&!so(H):w(H,ee)))var ee=H,ue=U}return ue}function G0(f,m,w,P){var D=f.length;for(w=Gt(w),w<0&&(w=-w>D?0:D+w),P=P===n||P>D?D:Gt(P),P<0&&(P+=D),P=w>P?0:ZR(P);w<P;)f[w++]=m;return f}function Pg(f,m){var w=[];return Ao(f,function(P,D,U){m(P,D,U)&&w.push(P)}),w}function or(f,m,w,P,D){var U=-1,H=f.length;for(w||(w=rp),D||(D=[]);++U<H;){var ee=f[U];m>0&&w(ee)?m>1?or(ee,m-1,w,P,D):Ba(D,ee):P||(D[D.length]=ee)}return D}var Lh=Qh(),jd=Qh(!0);function Zi(f,m){return f&&Lh(f,m,xi)}function Ya(f,m){return f&&jd(f,m,xi)}function iu(f,m){return Va(m,function(w){return lc(f[w])})}function ia(f,m){m=Mo(m,f);for(var w=0,P=m.length;f!=null&&w<P;)f=f[no(m[w++])];return w&&w==P?f:n}function jh(f,m,w){var P=m(f);return Ht(f)?P:Ba(P,w(f))}function Zr(f){return f==null?f===n?Ge:er:zl&&zl in Dn(f)?np(f):nv(f)}function Qa(f,m){return f>m}function bs(f,m){return f!=null&&yn.call(f,m)}function Ql(f,m){return f!=null&&m in Dn(f)}function Ag(f,m,w){return f>=hi(m,w)&&f<xr(m,w)}function Fh(f,m,w){for(var P=w?fg:ph,D=f[0].length,U=f.length,H=U,ee=xe(U),ue=1/0,Ne=[];H--;){var Me=f[H];H&&m&&(Me=zn(Me,Yi(m))),ue=hi(Me.length,ue),ee[H]=!w&&(m||D>=120&&Me.length>=120)?new Hl(H&&Me):n}Me=f[0];var Ve=-1,tt=ee[0];e:for(;++Ve<D&&Ne.length<ue;){var bt=Me[Ve],Mt=m?m(bt):bt;if(bt=w||bt!==0?bt:0,!(tt?Xo(tt,Mt):P(Ne,Mt,w))){for(H=U;--H;){var Jt=ee[H];if(!(Jt?Xo(Jt,Mt):P(f[H],Mt,w)))continue e}tt&&tt.push(Mt),Ne.push(bt)}}return Ne}function sa(f,m,w,P){return Zi(f,function(D,U,H){m(P,w(D),U,H)}),P}function xs(f,m,w){m=Mo(m,f),f=$r(f,m);var P=f==null?f:f[no(Ii(m))];return P==null?n:Ei(P,f,w)}function Uh(f){return Sr(f)&&Zr(f)==Te}function Y0(f){return Sr(f)&&Zr(f)==kt}function oa(f){return Sr(f)&&Zr(f)==Le}function ws(f,m,w,P,D){return f===m?!0:f==null||m==null||!Sr(f)&&!Sr(m)?f!==f&&m!==m:Vh(f,m,w,P,ws,D)}function Vh(f,m,w,P,D,U){var H=Ht(f),ee=Ht(m),ue=H?Re:ti(f),Ne=ee?Re:ti(m);ue=ue==Te?dn:ue,Ne=Ne==Te?dn:Ne;var Me=ue==dn,Ve=Ne==dn,tt=ue==Ne;if(tt&&bu(f)){if(!bu(m))return!1;H=!0,Me=!1}if(tt&&!Me)return U||(U=new gi),H||Cp(f)?Xg(f,m,w,P,D,U):Zg(f,m,ue,w,P,D,U);if(!(w&k)){var bt=Me&&yn.call(f,"__wrapped__"),Mt=Ve&&yn.call(m,"__wrapped__");if(bt||Mt){var Jt=bt?f.value():f,Ot=Mt?m.value():m;return U||(U=new gi),D(Jt,Ot,w,P,U)}}return tt?(U||(U=new gi),ob(f,m,w,P,D,U)):!1}function Q0(f){return Sr(f)&&ti(f)==wt}function su(f,m,w,P){var D=w.length,U=D,H=!P;if(f==null)return!U;for(f=Dn(f);D--;){var ee=w[D];if(H&&ee[2]?ee[1]!==f[ee[0]]:!(ee[0]in f))return!1}for(;++D<U;){ee=w[D];var ue=ee[0],Ne=f[ue],Me=ee[1];if(H&&ee[2]){if(Ne===n&&!(ue in f))return!1}else{var Ve=new gi;if(P)var tt=P(Ne,Me,ue,f,m,Ve);if(!(tt===n?ws(Me,Ne,k|C,P,Ve):tt))return!1}}return!0}function Ig(f){if(!pr(f)||cb(f))return!1;var m=lc(f)?L0:Bn;return m.test(el(f))}function Fd(f){return Sr(f)&&Zr(f)==Q}function Io(f){return Sr(f)&&ti(f)==ce}function Ud(f){return Sr(f)&&Rb(f.length)&&!!Pn[Zr(f)]}function ou(f){return typeof f=="function"?f:f==null?Rs:typeof f=="object"?Ht(f)?Jn(f[0],f[1]):Bh(f):uP(f)}function aa(f){if(!da(f))return Qc(f);var m=[];for(var w in Dn(f))yn.call(f,w)&&w!="constructor"&&m.push(w);return m}function Ng(f){if(!pr(f))return fb(f);var m=da(f),w=[];for(var P in f)P=="constructor"&&(m||!yn.call(f,P))||w.push(P);return w}function Ja(f,m){return f<m}function Mg(f,m){var w=-1,P=Es(f)?xe(f.length):[];return Ao(f,function(D,U,H){P[++w]=m(D,U,H)}),P}function Bh(f){var m=Qd(f);return m.length==1&&m[0][2]?ip(m[0][0],m[0][1]):function(w){return w===f||su(w,f,m)}}function Jn(f,m){return ot(f)&&Zd(m)?ip(no(f),m):function(w){var P=_C(w,f);return P===n&&P===m?RC(w,f):ws(m,P,k|C)}}function Jl(f,m,w,P,D){f!==m&&Lh(m,function(U,H){if(D||(D=new gi),pr(U))Og(f,m,H,w,Jl,P,D);else{var ee=P?P(Lo(f,H),U,H+"",f,m,D):n;ee===n&&(ee=U),Od(f,H,ee)}},_s)}function Og(f,m,w,P,D,U,H){var ee=Lo(f,w),ue=Lo(m,w),Ne=H.get(ue);if(Ne){Od(f,w,Ne);return}var Me=U?U(ee,ue,w+"",f,m,H):n,Ve=Me===n;if(Ve){var tt=Ht(ue),bt=!tt&&bu(ue),Mt=!tt&&!bt&&Cp(ue);Me=ue,tt||bt||Mt?Ht(ee)?Me=ee:Or(ee)?Me=Ri(ee):bt?(Ve=!1,Me=zg(ue,!0)):Mt?(Ve=!1,Me=tb(ue,!0)):Me=[]:xv(ue)||lf(ue)?(Me=ee,lf(ee)?Me=eP(ee):(!pr(ee)||lc(ee))&&(Me=ni(ue))):Ve=!1}Ve&&(H.set(ue,Me),D(Me,ue,P,U,H),H.delete(ue)),Od(f,w,Me)}function zh(f,m){var w=f.length;if(w)return m+=m<0?w:0,Xn(m,w)?f[m]:n}function Vd(f,m,w){m.length?m=zn(m,function(U){return Ht(U)?function(H){return ia(H,U.length===1?U[0]:U)}:U}):m=[Rs];var P=-1;m=zn(m,Yi(Rt()));var D=Mg(f,function(U,H,ee){var ue=zn(m,function(Ne){return Ne(U)});return{criteria:ue,index:++P,value:U}});return GS(D,function(U,H){return iC(U,H,w)})}function Dg(f,m){return Xa(f,m,function(w,P){return RC(f,P)})}function Xa(f,m,w){for(var P=-1,D=m.length,U={};++P<D;){var H=m[P],ee=ia(f,H);w(ee,H)&&Zl(U,Mo(H,f),ee)}return U}function tr(f){return function(m){return ia(m,f)}}function fr(f,m,w,P){var D=P?mg:$c,U=-1,H=m.length,ee=f;for(f===m&&(m=Ri(m)),w&&(ee=zn(f,Yi(w)));++U<H;)for(var ue=0,Ne=m[U],Me=w?w(Ne):Ne;(ue=D(ee,Me,ue,P))>-1;)ee!==f&&kh.call(ee,ue,1),kh.call(f,ue,1);return f}function Nr(f,m){for(var w=f?m.length:0,P=w-1;w--;){var D=m[w];if(w==P||D!==U){var U=D;Xn(D)?kh.call(f,D,1):Hh(f,D)}}return f}function au(f,m){return f+$a(Ad()*(m-f+1))}function Bd(f,m,w,P){for(var D=-1,U=xr($l((m-f)/(w||1)),0),H=xe(U);U--;)H[P?U:++D]=f,f+=w;return H}function Xl(f,m){var w="";if(!f||m<1||m>q)return w;do m%2&&(w+=f),m=$a(m/2),m&&(f+=f);while(m);return w}function Kt(f,m){return es(sp(f,m,Rs),f+"")}function yi(f){return _o(kp(f))}function Lg(f,m){var w=kp(f);return op(w,ra(m,0,w.length))}function Zl(f,m,w,P){if(!pr(f))return f;m=Mo(m,f);for(var D=-1,U=m.length,H=U-1,ee=f;ee!=null&&++D<U;){var ue=no(m[D]),Ne=w;if(ue==="__proto__"||ue==="constructor"||ue==="prototype")return f;if(D!=H){var Me=ee[ue];Ne=P?P(Me,ue,ee):n,Ne===n&&(Ne=pr(Me)?Me:Xn(m[D+1])?[]:{})}Gl(ee,ue,Ne),ee=ee[ue]}return f}var $h=Rh?function(f,m){return Rh.set(f,m),f}:Rs,No=Pd?function(f,m){return Pd(f,"toString",{configurable:!0,enumerable:!1,value:AC(m),writable:!0})}:Rs;function Ss(f){return op(kp(f))}function bi(f,m,w){var P=-1,D=f.length;m<0&&(m=-m>D?0:D+m),w=w>D?D:w,w<0&&(w+=D),D=m>w?0:w-m>>>0,m>>>=0;for(var U=xe(D);++P<D;)U[P]=f[P+m];return U}function jg(f,m){var w;return Ao(f,function(P,D,U){return w=m(P,D,U),!w}),!!w}function lu(f,m,w){var P=0,D=f==null?P:f.length;if(typeof m=="number"&&m===m&&D<=se){for(;P<D;){var U=P+D>>>1,H=f[U];H!==null&&!so(H)&&(w?H<=m:H<m)?P=U+1:D=U}return D}return Wh(f,m,Rs,w)}function Wh(f,m,w,P){var D=0,U=f==null?0:f.length;if(U===0)return 0;m=w(m);for(var H=m!==m,ee=m===null,ue=so(m),Ne=m===n;D<U;){var Me=$a((D+U)/2),Ve=w(f[Me]),tt=Ve!==n,bt=Ve===null,Mt=Ve===Ve,Jt=so(Ve);if(H)var Ot=P||Mt;else Ne?Ot=Mt&&(P||tt):ee?Ot=Mt&&tt&&(P||!bt):ue?Ot=Mt&&tt&&!bt&&(P||!Jt):bt||Jt?Ot=!1:Ot=P?Ve<=m:Ve<m;Ot?D=Me+1:U=Me}return hi(U,de)}function Fg(f,m){for(var w=-1,P=f.length,D=0,U=[];++w<P;){var H=f[w],ee=m?m(H):H;if(!w||!ha(ee,ue)){var ue=ee;U[D++]=H===0?0:H}}return U}function Ug(f){return typeof f=="number"?f:so(f)?ae:+f}function Bi(f){if(typeof f=="string")return f;if(Ht(f))return zn(f,Bi)+"";if(so(f))return Ph?Ph.call(f):"";var m=f+"";return m=="0"&&1/f==-1/0?"-0":m}function la(f,m,w){var P=-1,D=ph,U=f.length,H=!0,ee=[],ue=ee;if(w)H=!1,D=fg;else if(U>=i){var Ne=m?null:sb(f);if(Ne)return za(Ne);H=!1,D=Xo,ue=new Hl}else ue=m?[]:ee;e:for(;++P<U;){var Me=f[P],Ve=m?m(Me):Me;if(Me=w||Me!==0?Me:0,H&&Ve===Ve){for(var tt=ue.length;tt--;)if(ue[tt]===Ve)continue e;m&&ue.push(Ve),ee.push(Me)}else D(ue,Ve,w)||(ue!==ee&&ue.push(Ve),ee.push(Me))}return ee}function Hh(f,m){return m=Mo(m,f),f=$r(f,m),f==null||delete f[no(Ii(m))]}function Vg(f,m,w,P){return Zl(f,m,w(ia(f,m)),P)}function zd(f,m,w,P){for(var D=f.length,U=P?D:-1;(P?U--:++U<D)&&m(f[U],U,f););return w?bi(f,P?0:U,P?U+1:D):bi(f,P?U+1:0,P?D:U)}function cu(f,m){var w=f;return w instanceof Wt&&(w=w.value()),hg(m,function(P,D){return D.func.apply(D.thisArg,Ba([P],D.args))},w)}function qh(f,m,w){var P=f.length;if(P<2)return P?la(f[0]):[];for(var D=-1,U=xe(P);++D<P;)for(var H=f[D],ee=-1;++ee<P;)ee!=D&&(U[D]=Po(U[D]||H,f[ee],m,w));return la(or(U,1),m,w)}function $d(f,m,w){for(var P=-1,D=f.length,U=m.length,H={};++P<D;){var ee=P<U?m[P]:n;w(H,f[P],ee)}return H}function uu(f){return Or(f)?f:[]}function Kh(f){return typeof f=="function"?f:Rs}function Mo(f,m){return Ht(f)?f:ot(f,m)?[f]:sv(Ln(f))}var J0=Kt;function ca(f,m,w){var P=f.length;return w=w===n?P:w,!m&&w>=P?f:bi(f,m,w)}var Bg=F0||function(f){return Qn.clearTimeout(f)};function zg(f,m){if(m)return f.slice();var w=f.length,P=Sg?Sg(w):new f.constructor(w);return f.copy(P),P}function Wd(f){var m=new f.constructor(f.byteLength);return new Rd(m).set(new Rd(f)),m}function X0(f,m){var w=m?Wd(f.buffer):f.buffer;return new f.constructor(w,f.byteOffset,f.byteLength)}function Z0(f){var m=new f.constructor(f.source,Cn.exec(f));return m.lastIndex=f.lastIndex,m}function eb(f){return Ji?Dn(Ji.call(f)):{}}function tb(f,m){var w=m?Wd(f.buffer):f.buffer;return new f.constructor(w,f.byteOffset,f.length)}function $g(f,m){if(f!==m){var w=f!==n,P=f===null,D=f===f,U=so(f),H=m!==n,ee=m===null,ue=m===m,Ne=so(m);if(!ee&&!Ne&&!U&&f>m||U&&H&&ue&&!ee&&!Ne||P&&H&&ue||!w&&ue||!D)return 1;if(!P&&!U&&!Ne&&f<m||Ne&&w&&D&&!P&&!U||ee&&w&&D||!H&&D||!ue)return-1}return 0}function iC(f,m,w){for(var P=-1,D=f.criteria,U=m.criteria,H=D.length,ee=w.length;++P<H;){var ue=$g(D[P],U[P]);if(ue){if(P>=ee)return ue;var Ne=w[P];return ue*(Ne=="desc"?-1:1)}}return f.index-m.index}function nb(f,m,w,P){for(var D=-1,U=f.length,H=w.length,ee=-1,ue=m.length,Ne=xr(U-H,0),Me=xe(ue+Ne),Ve=!P;++ee<ue;)Me[ee]=m[ee];for(;++D<H;)(Ve||D<U)&&(Me[w[D]]=f[D]);for(;Ne--;)Me[ee++]=f[D++];return Me}function Wg(f,m,w,P){for(var D=-1,U=f.length,H=-1,ee=w.length,ue=-1,Ne=m.length,Me=xr(U-ee,0),Ve=xe(Me+Ne),tt=!P;++D<Me;)Ve[D]=f[D];for(var bt=D;++ue<Ne;)Ve[bt+ue]=m[ue];for(;++H<ee;)(tt||D<U)&&(Ve[bt+w[H]]=f[D++]);return Ve}function Ri(f,m){var w=-1,P=f.length;for(m||(m=xe(P));++w<P;)m[w]=f[w];return m}function Xs(f,m,w,P){var D=!w;w||(w={});for(var U=-1,H=m.length;++U<H;){var ee=m[U],ue=P?P(w[ee],f[ee],ee,w,f):n;ue===n&&(ue=f[ee]),D?Ro(w,ee,ue):Gl(w,ee,ue)}return w}function Gh(f,m){return Xs(f,Zs(f),m)}function sC(f,m){return Xs(f,ab(f),m)}function Yh(f,m){return function(w,P){var D=Ht(w)?ug:Xi,U=m?m():{};return D(w,f,Rt(P,2),U)}}function du(f){return Kt(function(m,w){var P=-1,D=w.length,U=D>1?w[D-1]:n,H=D>2?w[2]:n;for(U=f.length>3&&typeof U=="function"?(D--,U):n,H&&Ai(w[0],w[1],H)&&(U=D<3?n:U,D=1),m=Dn(m);++P<D;){var ee=w[P];ee&&f(m,ee,P,U)}return m})}function Cs(f,m){return function(w,P){if(w==null)return w;if(!Es(w))return f(w,P);for(var D=w.length,U=m?D:-1,H=Dn(w);(m?U--:++U<D)&&P(H[U],U,H)!==!1;);return w}}function Qh(f){return function(m,w,P){for(var D=-1,U=Dn(m),H=P(m),ee=H.length;ee--;){var ue=H[f?ee:++D];if(w(U[ue],ue,U)===!1)break}return m}}function Jh(f,m,w){var P=m&E,D=fu(f);function U(){var H=this&&this!==Qn&&this instanceof U?D:f;return H.apply(P?w:this,arguments)}return U}function Hg(f){return function(m){m=Ln(m);var w=Hc(m)?Qi(m):n,P=w?w[0]:m.charAt(0),D=w?ca(w,1).join(""):m.slice(1);return P[f]()+D}}function ec(f){return function(m){return hg(lP(aP(m).replace(VS,"")),f,"")}}function fu(f){return function(){var m=arguments;switch(m.length){case 0:return new f;case 1:return new f(m[0]);case 2:return new f(m[0],m[1]);case 3:return new f(m[0],m[1],m[2]);case 4:return new f(m[0],m[1],m[2],m[3]);case 5:return new f(m[0],m[1],m[2],m[3],m[4]);case 6:return new f(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new f(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var w=eu(f.prototype),P=f.apply(w,m);return pr(P)?P:w}}function qg(f,m,w){var P=fu(f);function D(){for(var U=arguments.length,H=xe(U),ee=U,ue=ua(D);ee--;)H[ee]=arguments[ee];var Ne=U<3&&H[0]!==ue&&H[U-1]!==ue?[]:ps(H,ue);if(U-=Ne.length,U<w)return Pi(f,m,hu,D.placeholder,n,H,Ne,n,n,w-U);var Me=this&&this!==Qn&&this instanceof D?P:f;return Ei(Me,this,H)}return D}function tc(f){return function(m,w,P){var D=Dn(m);if(!Es(m)){var U=Rt(w,3);m=xi(m),w=function(ee){return U(D[ee],ee,D)}}var H=f(m,w,P);return H>-1?D[U?m[H]:H]:n}}function Xh(f){return Do(function(m){var w=m.length,P=w,D=pi.prototype.thru;for(f&&m.reverse();P--;){var U=m[P];if(typeof U!="function")throw new ms(o);if(D&&!H&&pu(U)=="wrapper")var H=new pi([],!0)}for(P=H?P:w;++P<w;){U=m[P];var ee=pu(U),ue=ee=="wrapper"?tp(U):n;ue&&Xd(ue[0])&&ue[1]==(j|M|N|V)&&!ue[4].length&&ue[9]==1?H=H[pu(ue[0])].apply(H,ue[3]):H=U.length==1&&Xd(U)?H[ee]():H.thru(U)}return function(){var Ne=arguments,Me=Ne[0];if(H&&Ne.length==1&&Ht(Me))return H.plant(Me).value();for(var Ve=0,tt=w?m[Ve].apply(this,Ne):Me;++Ve<w;)tt=m[Ve].call(this,tt);return tt}})}function hu(f,m,w,P,D,U,H,ee,ue,Ne){var Me=m&j,Ve=m&E,tt=m&_,bt=m&(M|I),Mt=m&$,Jt=tt?n:fu(f);function Ot(){for(var an=arguments.length,mn=xe(an),oo=an;oo--;)mn[oo]=arguments[oo];if(bt)var ns=ua(Ot),ao=R0(mn,ns);if(P&&(mn=nb(mn,P,D,bt)),U&&(mn=Wg(mn,U,H,bt)),an-=ao,bt&&an<Ne){var Dr=ps(mn,ns);return Pi(f,m,hu,Ot.placeholder,w,mn,Dr,ee,ue,Ne-an)}var pa=Ve?w:this,uc=tt?pa[f]:f;return an=mn.length,ee?mn=eo(mn,ee):Mt&&an>1&&mn.reverse(),Me&&ue<an&&(mn.length=ue),this&&this!==Qn&&this instanceof Ot&&(uc=Jt||fu(uc)),uc.apply(pa,mn)}return Ot}function rb(f,m){return function(w,P){return sa(w,f,m(P),{})}}function Hd(f,m){return function(w,P){var D;if(w===n&&P===n)return m;if(w!==n&&(D=w),P!==n){if(D===n)return P;typeof w=="string"||typeof P=="string"?(w=Bi(w),P=Bi(P)):(w=Ug(w),P=Ug(P)),D=f(w,P)}return D}}function Zh(f){return Do(function(m){return m=zn(m,Yi(Rt())),Kt(function(w){var P=this;return f(m,function(D){return Ei(D,P,w)})})})}function qd(f,m){m=m===n?" ":Bi(m);var w=m.length;if(w<2)return w?Xl(m,f):m;var P=Xl(m,$l(f/Bl(m)));return Hc(m)?ca(Qi(P),0,f).join(""):P.slice(0,f)}function ib(f,m,w,P){var D=m&E,U=fu(f);function H(){for(var ee=-1,ue=arguments.length,Ne=-1,Me=P.length,Ve=xe(Me+ue),tt=this&&this!==Qn&&this instanceof H?U:f;++Ne<Me;)Ve[Ne]=P[Ne];for(;ue--;)Ve[Ne++]=arguments[++ee];return Ei(tt,D?w:this,Ve)}return H}function Kg(f){return function(m,w,P){return P&&typeof P!="number"&&Ai(m,w,P)&&(w=P=n),m=cc(m),w===n?(w=m,m=0):w=cc(w),P=P===n?m<w?1:-1:cc(P),Bd(m,w,P,f)}}function ep(f){return function(m,w){return typeof m=="string"&&typeof w=="string"||(m=jo(m),w=jo(w)),f(m,w)}}function Pi(f,m,w,P,D,U,H,ee,ue,Ne){var Me=m&M,Ve=Me?H:n,tt=Me?n:H,bt=Me?U:n,Mt=Me?n:U;m|=Me?N:O,m&=~(Me?O:N),m&A||(m&=-4);var Jt=[f,m,D,bt,Ve,Mt,tt,ee,ue,Ne],Ot=w.apply(n,Jt);return Xd(f)&&rv(Ot,Jt),Ot.placeholder=P,iv(Ot,f,m)}function ei(f){var m=br[f];return function(w,P){if(w=jo(w),P=P==null?0:hi(Gt(P),292),P&&Yc(w)){var D=(Ln(w)+"e").split("e"),U=m(D[0]+"e"+(+D[1]+P));return D=(Ln(U)+"e").split("e"),+(D[0]+"e"+(+D[1]-P))}return m(w)}}var sb=Wa&&1/za(new Wa([,-0]))[1]==Se?function(f){return new Wa(f)}:MC;function Gg(f){return function(m){var w=ti(m);return w==wt?vh(m):w==ce?XS(m):YS(m,f(m))}}function Oo(f,m,w,P,D,U,H,ee){var ue=m&_;if(!ue&&typeof f!="function")throw new ms(o);var Ne=P?P.length:0;if(Ne||(m&=-97,P=D=n),H=H===n?H:xr(Gt(H),0),ee=ee===n?ee:Gt(ee),Ne-=D?D.length:0,m&O){var Me=P,Ve=D;P=D=n}var tt=ue?n:tp(f),bt=[f,m,w,P,D,Me,Ve,U,H,ee];if(tt&&db(bt,tt),f=bt[0],m=bt[1],w=bt[2],P=bt[3],D=bt[4],ee=bt[9]=bt[9]===n?ue?0:f.length:xr(bt[9]-Ne,0),!ee&&m&(M|I)&&(m&=-25),!m||m==E)var Mt=Jh(f,m,w);else m==M||m==I?Mt=qg(f,m,ee):(m==N||m==(E|N))&&!D.length?Mt=ib(f,m,w,P):Mt=hu.apply(n,bt);var Jt=tt?$h:rv;return iv(Jt(Mt,bt),f,m)}function Yg(f,m,w,P){return f===n||ha(f,Co[w])&&!yn.call(P,w)?m:f}function Qg(f,m,w,P,D,U){return pr(f)&&pr(m)&&(U.set(m,f),Jl(f,m,n,Qg,U),U.delete(m)),f}function Jg(f){return xv(f)?n:f}function Xg(f,m,w,P,D,U){var H=w&k,ee=f.length,ue=m.length;if(ee!=ue&&!(H&&ue>ee))return!1;var Ne=U.get(f),Me=U.get(m);if(Ne&&Me)return Ne==m&&Me==f;var Ve=-1,tt=!0,bt=w&C?new Hl:n;for(U.set(f,m),U.set(m,f);++Ve<ee;){var Mt=f[Ve],Jt=m[Ve];if(P)var Ot=H?P(Jt,Mt,Ve,m,f,U):P(Mt,Jt,Ve,f,m,U);if(Ot!==n){if(Ot)continue;tt=!1;break}if(bt){if(!pg(m,function(an,mn){if(!Xo(bt,mn)&&(Mt===an||D(Mt,an,w,P,U)))return bt.push(mn)})){tt=!1;break}}else if(!(Mt===Jt||D(Mt,Jt,w,P,U))){tt=!1;break}}return U.delete(f),U.delete(m),tt}function Zg(f,m,w,P,D,U,H){switch(w){case Ft:if(f.byteLength!=m.byteLength||f.byteOffset!=m.byteOffset)return!1;f=f.buffer,m=m.buffer;case kt:return!(f.byteLength!=m.byteLength||!U(new Rd(f),new Rd(m)));case be:case Le:case _n:return ha(+f,+m);case Je:return f.name==m.name&&f.message==m.message;case Q:case ve:return f==m+"";case wt:var ee=vh;case ce:var ue=P&k;if(ee||(ee=za),f.size!=m.size&&!ue)return!1;var Ne=H.get(f);if(Ne)return Ne==m;P|=C,H.set(f,m);var Me=Xg(ee(f),ee(m),P,D,U,H);return H.delete(f),Me;case qe:if(Ji)return Ji.call(f)==Ji.call(m)}return!1}function ob(f,m,w,P,D,U){var H=w&k,ee=Kd(f),ue=ee.length,Ne=Kd(m),Me=Ne.length;if(ue!=Me&&!H)return!1;for(var Ve=ue;Ve--;){var tt=ee[Ve];if(!(H?tt in m:yn.call(m,tt)))return!1}var bt=U.get(f),Mt=U.get(m);if(bt&&Mt)return bt==m&&Mt==f;var Jt=!0;U.set(f,m),U.set(m,f);for(var Ot=H;++Ve<ue;){tt=ee[Ve];var an=f[tt],mn=m[tt];if(P)var oo=H?P(mn,an,tt,m,f,U):P(an,mn,tt,f,m,U);if(!(oo===n?an===mn||D(an,mn,w,P,U):oo)){Jt=!1;break}Ot||(Ot=tt=="constructor")}if(Jt&&!Ot){var ns=f.constructor,ao=m.constructor;ns!=ao&&"constructor"in f&&"constructor"in m&&!(typeof ns=="function"&&ns instanceof ns&&typeof ao=="function"&&ao instanceof ao)&&(Jt=!1)}return U.delete(f),U.delete(m),Jt}function Do(f){return es(sp(f,n,lp),f+"")}function Kd(f){return jh(f,xi,Zs)}function Gd(f){return jh(f,_s,ab)}var tp=Rh?function(f){return Rh.get(f)}:MC;function pu(f){for(var m=f.name+"",w=Xc[m],P=yn.call(Xc,m)?w.length:0;P--;){var D=w[P],U=D.func;if(U==null||U==f)return D.name}return m}function ua(f){var m=yn.call(F,"placeholder")?F:f;return m.placeholder}function Rt(){var f=F.iteratee||IC;return f=f===IC?ou:f,arguments.length?f(arguments[0],arguments[1]):f}function Yd(f,m){var w=f.__data__;return mu(m)?w[typeof m=="string"?"string":"hash"]:w.map}function Qd(f){for(var m=xi(f),w=m.length;w--;){var P=m[w],D=f[P];m[w]=[P,D,Zd(D)]}return m}function Za(f,m){var w=Wc(f,m);return Ig(w)?w:n}function np(f){var m=yn.call(f,zl),w=f[zl];try{f[zl]=n;var P=!0}catch{}var D=Ed.call(f);return P&&(m?f[zl]=w:delete f[zl]),D}var Zs=Th?function(f){return f==null?[]:(f=Dn(f),Va(Th(f),function(m){return Ch.call(f,m)}))}:OC,ab=Th?function(f){for(var m=[];f;)Ba(m,Zs(f)),f=Qs(f);return m}:OC,ti=Zr;(Id&&ti(new Id(new ArrayBuffer(1)))!=Ft||Wl&&ti(new Wl)!=wt||Nd&&ti(Nd.resolve())!=tn||Wa&&ti(new Wa)!=ce||Md&&ti(new Md)!=Be)&&(ti=function(f){var m=Zr(f),w=m==dn?f.constructor:n,P=w?el(w):"";if(P)switch(P){case Tg:return Ft;case Ha:return wt;case V0:return tn;case Zc:return ce;case ko:return Be}return m});function ev(f,m,w){for(var P=-1,D=w.length;++P<D;){var U=w[P],H=U.size;switch(U.type){case"drop":f+=H;break;case"dropRight":m-=H;break;case"take":m=hi(m,f+H);break;case"takeRight":f=xr(f,m-H);break}}return{start:f,end:m}}function lb(f){var m=f.match(ut);return m?m[1].split(yt):[]}function tv(f,m,w){m=Mo(m,f);for(var P=-1,D=m.length,U=!1;++P<D;){var H=no(m[P]);if(!(U=f!=null&&w(f,H)))break;f=f[H]}return U||++P!=D?U:(D=f==null?0:f.length,!!D&&Rb(D)&&Xn(H,D)&&(Ht(f)||lf(f)))}function Jd(f){var m=f.length,w=new f.constructor(m);return m&&typeof f[0]=="string"&&yn.call(f,"index")&&(w.index=f.index,w.input=f.input),w}function ni(f){return typeof f.constructor=="function"&&!da(f)?eu(Qs(f)):{}}function oC(f,m,w){var P=f.constructor;switch(m){case kt:return Wd(f);case be:case Le:return new P(+f);case Ft:return X0(f,w);case We:case Ut:case Qt:case hn:case Hn:case It:case xn:case Rn:case sr:return tb(f,w);case wt:return new P;case _n:case ve:return new P(f);case Q:return Z0(f);case ce:return new P;case qe:return eb(f)}}function aC(f,m){var w=m.length;if(!w)return f;var P=w-1;return m[P]=(w>1?"& ":"")+m[P],m=m.join(w>2?", ":" "),f.replace(st,`{
/* [wrapped with `+m+`] */
`)}function rp(f){return Ht(f)||lf(f)||!!(j0&&f&&f[j0])}function Xn(f,m){var w=typeof f;return m=m??q,!!m&&(w=="number"||w!="symbol"&&xo.test(f))&&f>-1&&f%1==0&&f<m}function Ai(f,m,w){if(!pr(w))return!1;var P=typeof m;return(P=="number"?Es(w)&&Xn(m,w.length):P=="string"&&m in w)?ha(w[m],f):!1}function ot(f,m){if(Ht(f))return!1;var w=typeof f;return w=="number"||w=="symbol"||w=="boolean"||f==null||so(f)?!0:G.test(f)||!bo.test(f)||m!=null&&f in Dn(m)}function mu(f){var m=typeof f;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?f!=="__proto__":f===null}function Xd(f){var m=pu(f),w=F[m];if(typeof w!="function"||!(m in Wt.prototype))return!1;if(f===w)return!0;var P=tp(w);return!!P&&f===P[0]}function cb(f){return!!xh&&xh in f}var lC=Kc?lc:DC;function da(f){var m=f&&f.constructor,w=typeof m=="function"&&m.prototype||Co;return f===w}function Zd(f){return f===f&&!pr(f)}function ip(f,m){return function(w){return w==null?!1:w[f]===m&&(m!==n||f in Dn(w))}}function ub(f){var m=ge(f,function(P){return w.size===d&&w.clear(),P}),w=m.cache;return m}function db(f,m){var w=f[1],P=m[1],D=w|P,U=D<(E|_|j),H=P==j&&w==M||P==j&&w==V&&f[7].length<=m[8]||P==(j|V)&&m[7].length<=m[8]&&w==M;if(!(U||H))return f;P&E&&(f[2]=m[2],D|=w&E?0:A);var ee=m[3];if(ee){var ue=f[3];f[3]=ue?nb(ue,ee,m[4]):ee,f[4]=ue?ps(f[3],h):m[4]}return ee=m[5],ee&&(ue=f[5],f[5]=ue?Wg(ue,ee,m[6]):ee,f[6]=ue?ps(f[5],h):m[6]),ee=m[7],ee&&(f[7]=ee),P&j&&(f[8]=f[8]==null?m[8]:hi(f[8],m[8])),f[9]==null&&(f[9]=m[9]),f[0]=m[0],f[1]=D,f}function fb(f){var m=[];if(f!=null)for(var w in Dn(f))m.push(w);return m}function nv(f){return Ed.call(f)}function sp(f,m,w){return m=xr(m===n?f.length-1:m,0),function(){for(var P=arguments,D=-1,U=xr(P.length-m,0),H=xe(U);++D<U;)H[D]=P[m+D];D=-1;for(var ee=xe(m+1);++D<m;)ee[D]=P[D];return ee[m]=w(H),Ei(f,this,ee)}}function $r(f,m){return m.length<2?f:ia(f,bi(m,0,-1))}function eo(f,m){for(var w=f.length,P=hi(m.length,w),D=Ri(f);P--;){var U=m[P];f[P]=Xn(U,w)?D[U]:n}return f}function Lo(f,m){if(!(m==="constructor"&&typeof f[m]=="function")&&m!="__proto__")return f[m]}var rv=to($h),gu=Cg||function(f,m){return Qn.setTimeout(f,m)},es=to(No);function iv(f,m,w){var P=m+"";return es(f,aC(P,hb(lb(P),w)))}function to(f){var m=0,w=0;return function(){var P=rC(),D=pe-(P-w);if(w=P,D>0){if(++m>=Y)return arguments[0]}else m=0;return f.apply(n,arguments)}}function op(f,m){var w=-1,P=f.length,D=P-1;for(m=m===n?P:m;++w<m;){var U=au(w,D),H=f[U];f[U]=f[w],f[w]=H}return f.length=m,f}var sv=ub(function(f){var m=[];return f.charCodeAt(0)===46&&m.push(""),f.replace(re,function(w,P,D,U){m.push(D?U.replace(vt,"$1"):P||w)}),m});function no(f){if(typeof f=="string"||so(f))return f;var m=f+"";return m=="0"&&1/f==-1/0?"-0":m}function el(f){if(f!=null){try{return Td.call(f)}catch{}try{return f+""}catch{}}return""}function hb(f,m){return fi(me,function(w){var P="_."+w[0];m&w[1]&&!ph(f,P)&&f.push(P)}),f.sort()}function pb(f){if(f instanceof Wt)return f.clone();var m=new pi(f.__wrapped__,f.__chain__);return m.__actions__=Ri(f.__actions__),m.__index__=f.__index__,m.__values__=f.__values__,m}function ap(f,m,w){(w?Ai(f,m,w):m===n)?m=1:m=xr(Gt(m),0);var P=f==null?0:f.length;if(!P||m<1)return[];for(var D=0,U=0,H=xe($l(P/m));D<P;)H[U++]=bi(f,D,D+=m);return H}function ov(f){for(var m=-1,w=f==null?0:f.length,P=0,D=[];++m<w;){var U=f[m];U&&(D[P++]=U)}return D}function ks(){var f=arguments.length;if(!f)return[];for(var m=xe(f-1),w=arguments[0],P=f;P--;)m[P-1]=arguments[P];return Ba(Ht(w)?Ri(w):[w],or(m,1))}var pn=Kt(function(f,m){return Or(f)?Po(f,or(m,1,Or,!0)):[]}),Wr=Kt(function(f,m){var w=Ii(m);return Or(w)&&(w=n),Or(f)?Po(f,or(m,1,Or,!0),Rt(w,2)):[]}),wr=Kt(function(f,m){var w=Ii(m);return Or(w)&&(w=n),Or(f)?Po(f,or(m,1,Or,!0),n,w):[]});function ri(f,m,w){var P=f==null?0:f.length;return P?(m=w||m===n?1:Gt(m),bi(f,m<0?0:m,P)):[]}function ts(f,m,w){var P=f==null?0:f.length;return P?(m=w||m===n?1:Gt(m),m=P-m,bi(f,0,m<0?0:m)):[]}function vu(f,m){return f&&f.length?zd(f,Rt(m,3),!0,!0):[]}function Mr(f,m){return f&&f.length?zd(f,Rt(m,3),!0):[]}function ef(f,m,w,P){var D=f==null?0:f.length;return D?(w&&typeof w!="number"&&Ai(f,m,w)&&(w=0,P=D),G0(f,m,w,P)):[]}function tl(f,m,w){var P=f==null?0:f.length;if(!P)return-1;var D=w==null?0:Gt(w);return D<0&&(D=xr(P+D,0)),mh(f,Rt(m,3),D)}function tf(f,m,w){var P=f==null?0:f.length;if(!P)return-1;var D=P-1;return w!==n&&(D=Gt(w),D=w<0?xr(P+D,0):hi(D,P-1)),mh(f,Rt(m,3),D,!0)}function lp(f){var m=f==null?0:f.length;return m?or(f,1):[]}function nf(f){var m=f==null?0:f.length;return m?or(f,Se):[]}function zi(f,m){var w=f==null?0:f.length;return w?(m=m===n?1:Gt(m),or(f,m)):[]}function av(f){for(var m=-1,w=f==null?0:f.length,P={};++m<w;){var D=f[m];P[D[0]]=D[1]}return P}function nc(f){return f&&f.length?f[0]:n}function fa(f,m,w){var P=f==null?0:f.length;if(!P)return-1;var D=w==null?0:Gt(w);return D<0&&(D=xr(P+D,0)),$c(f,m,D)}function cp(f){var m=f==null?0:f.length;return m?bi(f,0,-1):[]}var lv=Kt(function(f){var m=zn(f,uu);return m.length&&m[0]===f[0]?Fh(m):[]}),nl=Kt(function(f){var m=Ii(f),w=zn(f,uu);return m===Ii(w)?m=n:w.pop(),w.length&&w[0]===f[0]?Fh(w,Rt(m,2)):[]}),up=Kt(function(f){var m=Ii(f),w=zn(f,uu);return m=typeof m=="function"?m:n,m&&w.pop(),w.length&&w[0]===f[0]?Fh(w,n,m):[]});function rl(f,m){return f==null?"":Eh.call(f,m)}function Ii(f){var m=f==null?0:f.length;return m?f[m-1]:n}function rf(f,m,w){var P=f==null?0:f.length;if(!P)return-1;var D=P;return w!==n&&(D=Gt(w),D=D<0?xr(P+D,0):hi(D,P-1)),m===m?ZS(f,m,D):mh(f,C0,D,!0)}function cv(f,m){return f&&f.length?zh(f,Gt(m)):n}var dp=Kt(sf);function sf(f,m){return f&&f.length&&m&&m.length?fr(f,m):f}function Ni(f,m,w){return f&&f.length&&m&&m.length?fr(f,m,Rt(w,2)):f}function il(f,m,w){return f&&f.length&&m&&m.length?fr(f,m,n,w):f}var ro=Do(function(f,m){var w=f==null?0:f.length,P=Dh(f,m);return Nr(f,zn(m,function(D){return Xn(D,w)?+D:D}).sort($g)),P});function $i(f,m){var w=[];if(!(f&&f.length))return w;var P=-1,D=[],U=f.length;for(m=Rt(m,3);++P<U;){var H=f[P];m(H,P,f)&&(w.push(H),D.push(P))}return Nr(f,D),w}function fp(f){return f==null?f:_h.call(f)}function uv(f,m,w){var P=f==null?0:f.length;return P?(w&&typeof w!="number"&&Ai(f,m,w)?(m=0,w=P):(m=m==null?0:Gt(m),w=w===n?P:Gt(w)),bi(f,m,w)):[]}function dv(f,m){return lu(f,m)}function cC(f,m,w){return Wh(f,m,Rt(w,2))}function sl(f,m){var w=f==null?0:f.length;if(w){var P=lu(f,m);if(P<w&&ha(f[P],m))return P}return-1}function mb(f,m){return lu(f,m,!0)}function fv(f,m,w){return Wh(f,m,Rt(w,2),!0)}function rc(f,m){var w=f==null?0:f.length;if(w){var P=lu(f,m,!0)-1;if(ha(f[P],m))return P}return-1}function hv(f){return f&&f.length?Fg(f):[]}function ic(f,m){return f&&f.length?Fg(f,Rt(m,2)):[]}function gb(f){var m=f==null?0:f.length;return m?bi(f,1,m):[]}function vb(f,m,w){return f&&f.length?(m=w||m===n?1:Gt(m),bi(f,0,m<0?0:m)):[]}function pv(f,m,w){var P=f==null?0:f.length;return P?(m=w||m===n?1:Gt(m),m=P-m,bi(f,m<0?0:m,P)):[]}function hp(f,m){return f&&f.length?zd(f,Rt(m,3),!1,!0):[]}function uC(f,m){return f&&f.length?zd(f,Rt(m,3)):[]}var dC=Kt(function(f){return la(or(f,1,Or,!0))}),yb=Kt(function(f){var m=Ii(f);return Or(m)&&(m=n),la(or(f,1,Or,!0),Rt(m,2))}),bb=Kt(function(f){var m=Ii(f);return m=typeof m=="function"?m:n,la(or(f,1,Or,!0),n,m)});function sc(f){return f&&f.length?la(f):[]}function fC(f,m){return f&&f.length?la(f,Rt(m,2)):[]}function yu(f,m){return m=typeof m=="function"?m:n,f&&f.length?la(f,n,m):[]}function pp(f){if(!(f&&f.length))return[];var m=0;return f=Va(f,function(w){if(Or(w))return m=xr(w.length,m),!0}),yg(m,function(w){return zn(f,gg(w))})}function nr(f,m){if(!(f&&f.length))return[];var w=pp(f);return m==null?w:zn(w,function(P){return Ei(m,n,P)})}var hC=Kt(function(f,m){return Or(f)?Po(f,m):[]}),xb=Kt(function(f){return qh(Va(f,Or))}),pC=Kt(function(f){var m=Ii(f);return Or(m)&&(m=n),qh(Va(f,Or),Rt(m,2))}),mC=Kt(function(f){var m=Ii(f);return m=typeof m=="function"?m:n,qh(Va(f,Or),n,m)}),wb=Kt(pp);function Sb(f,m){return $d(f||[],m||[],Gl)}function gC(f,m){return $d(f||[],m||[],Zl)}var Ts=Kt(function(f){var m=f.length,w=m>1?f[m-1]:n;return w=typeof w=="function"?(f.pop(),w):n,nr(f,w)});function mp(f){var m=F(f);return m.__chain__=!0,m}function vC(f,m){return m(f),f}function io(f,m){return m(f)}var gp=Do(function(f){var m=f.length,w=m?f[0]:0,P=this.__wrapped__,D=function(U){return Dh(U,f)};return m>1||this.__actions__.length||!(P instanceof Wt)||!Xn(w)?this.thru(D):(P=P.slice(w,+w+(m?1:0)),P.__actions__.push({func:io,args:[D],thisArg:n}),new pi(P,this.__chain__).thru(function(U){return m&&!U.length&&U.push(n),U}))});function oc(){return mp(this)}function vp(){return new pi(this.value(),this.__chain__)}function mv(){this.__values__===n&&(this.__values__=XR(this.value()));var f=this.__index__>=this.__values__.length,m=f?n:this.__values__[this.__index__++];return{done:f,value:m}}function gv(){return this}function yC(f){for(var m,w=this;w instanceof To;){var P=pb(w);P.__index__=0,P.__values__=n,m?D.__wrapped__=P:m=P;var D=P;w=w.__wrapped__}return D.__wrapped__=f,m}function vv(){var f=this.__wrapped__;if(f instanceof Wt){var m=f;return this.__actions__.length&&(m=new Wt(this)),m=m.reverse(),m.__actions__.push({func:io,args:[fp],thisArg:n}),new pi(m,this.__chain__)}return this.thru(fp)}function bC(){return cu(this.__wrapped__,this.__actions__)}var Cb=Yh(function(f,m,w){yn.call(f,w)?++f[w]:Ro(f,w,1)});function kb(f,m,w){var P=Ht(f)?dg:Ld;return w&&Ai(f,m,w)&&(m=n),P(f,Rt(m,3))}function yp(f,m){var w=Ht(f)?Va:Pg;return w(f,Rt(m,3))}var bp=tc(tl),Tb=tc(tf);function yv(f,m){return or(ac(f,m),1)}function xC(f,m){return or(ac(f,m),Se)}function Eb(f,m,w){return w=w===n?1:Gt(w),or(ac(f,m),w)}function xp(f,m){var w=Ht(f)?fi:Ao;return w(f,Rt(m,3))}function of(f,m){var w=Ht(f)?hh:K0;return w(f,Rt(m,3))}var bv=Yh(function(f,m,w){yn.call(f,w)?f[w].push(m):Ro(f,w,[m])});function wp(f,m,w,P){f=Es(f)?f:kp(f),w=w&&!P?Gt(w):0;var D=f.length;return w<0&&(w=xr(D+w,0)),Pb(f)?w<=D&&f.indexOf(m,w)>-1:!!D&&$c(f,m,w)>-1}var _b=Kt(function(f,m,w){var P=-1,D=typeof m=="function",U=Es(f)?xe(f.length):[];return Ao(f,function(H){U[++P]=D?Ei(m,H,w):xs(H,m,w)}),U}),wC=Yh(function(f,m,w){Ro(f,w,m)});function ac(f,m){var w=Ht(f)?zn:Mg;return w(f,Rt(m,3))}function SC(f,m,w,P){return f==null?[]:(Ht(m)||(m=m==null?[]:[m]),w=P?n:w,Ht(w)||(w=w==null?[]:[w]),Vd(f,m,w))}var af=Yh(function(f,m,w){f[w?0:1].push(m)},function(){return[[],[]]});function CC(f,m,w){var P=Ht(f)?hg:T0,D=arguments.length<3;return P(f,Rt(m,4),w,D,Ao)}function Sp(f,m,w){var P=Ht(f)?HS:T0,D=arguments.length<3;return P(f,Rt(m,4),w,D,K0)}function l(f,m){var w=Ht(f)?Va:Pg;return w(f,Ke(Rt(m,3)))}function u(f){var m=Ht(f)?_o:yi;return m(f)}function g(f,m,w){(w?Ai(f,m,w):m===n)?m=1:m=Gt(m);var P=Ht(f)?Kl:Lg;return P(f,m)}function x(f){var m=Ht(f)?H0:Ss;return m(f)}function T(f){if(f==null)return 0;if(Es(f))return Pb(f)?Bl(f):f.length;var m=ti(f);return m==wt||m==ce?f.size:aa(f).length}function R(f,m,w){var P=Ht(f)?pg:jg;return w&&Ai(f,m,w)&&(m=n),P(f,Rt(m,3))}var L=Kt(function(f,m){if(f==null)return[];var w=m.length;return w>1&&Ai(f,m[0],m[1])?m=[]:w>2&&Ai(m[0],m[1],m[2])&&(m=[m[0]]),Vd(f,or(m,1),[])}),z=qn||function(){return Qn.Date.now()};function Z(f,m){if(typeof m!="function")throw new ms(o);return f=Gt(f),function(){if(--f<1)return m.apply(this,arguments)}}function Ce(f,m,w){return m=w?n:m,m=f&&m==null?f.length:m,Oo(f,j,n,n,n,n,m)}function Fe(f,m){var w;if(typeof m!="function")throw new ms(o);return f=Gt(f),function(){return--f>0&&(w=m.apply(this,arguments)),f<=1&&(m=n),w}}var ze=Kt(function(f,m,w){var P=E;if(w.length){var D=ps(w,ua(ze));P|=N}return Oo(f,P,m,w,D)}),je=Kt(function(f,m,w){var P=E|_;if(w.length){var D=ps(w,ua(je));P|=N}return Oo(m,P,f,w,D)});function rt(f,m,w){m=w?n:m;var P=Oo(f,M,n,n,n,n,n,m);return P.placeholder=rt.placeholder,P}function dt(f,m,w){m=w?n:m;var P=Oo(f,I,n,n,n,n,n,m);return P.placeholder=dt.placeholder,P}function ht(f,m,w){var P,D,U,H,ee,ue,Ne=0,Me=!1,Ve=!1,tt=!0;if(typeof f!="function")throw new ms(o);m=jo(m)||0,pr(w)&&(Me=!!w.leading,Ve="maxWait"in w,U=Ve?xr(jo(w.maxWait)||0,m):U,tt="trailing"in w?!!w.trailing:tt);function bt(Dr){var pa=P,uc=D;return P=D=n,Ne=Dr,H=f.apply(uc,pa),H}function Mt(Dr){return Ne=Dr,ee=gu(an,m),Me?bt(Dr):H}function Jt(Dr){var pa=Dr-ue,uc=Dr-Ne,dP=m-pa;return Ve?hi(dP,U-uc):dP}function Ot(Dr){var pa=Dr-ue,uc=Dr-Ne;return ue===n||pa>=m||pa<0||Ve&&uc>=U}function an(){var Dr=z();if(Ot(Dr))return mn(Dr);ee=gu(an,Jt(Dr))}function mn(Dr){return ee=n,tt&&P?bt(Dr):(P=D=n,H)}function oo(){ee!==n&&Bg(ee),Ne=0,P=ue=D=ee=n}function ns(){return ee===n?H:mn(z())}function ao(){var Dr=z(),pa=Ot(Dr);if(P=arguments,D=this,ue=Dr,pa){if(ee===n)return Mt(ue);if(Ve)return Bg(ee),ee=gu(an,m),bt(ue)}return ee===n&&(ee=gu(an,m)),H}return ao.cancel=oo,ao.flush=ns,ao}var hr=Kt(function(f,m){return Rg(f,1,m)}),he=Kt(function(f,m,w){return Rg(f,jo(m)||0,w)});function ne(f){return Oo(f,$)}function ge(f,m){if(typeof f!="function"||m!=null&&typeof m!="function")throw new ms(o);var w=function(){var P=arguments,D=m?m.apply(this,P):P[0],U=w.cache;if(U.has(D))return U.get(D);var H=f.apply(this,P);return w.cache=U.set(D,H)||U,H};return w.cache=new(ge.Cache||gs),w}ge.Cache=gs;function Ke(f){if(typeof f!="function")throw new ms(o);return function(){var m=arguments;switch(m.length){case 0:return!f.call(this);case 1:return!f.call(this,m[0]);case 2:return!f.call(this,m[0],m[1]);case 3:return!f.call(this,m[0],m[1],m[2])}return!f.apply(this,m)}}function mt(f){return Fe(2,f)}var Tt=J0(function(f,m){m=m.length==1&&Ht(m[0])?zn(m[0],Yi(Rt())):zn(or(m,1),Yi(Rt()));var w=m.length;return Kt(function(P){for(var D=-1,U=hi(P.length,w);++D<U;)P[D]=m[D].call(this,P[D]);return Ei(f,this,P)})}),St=Kt(function(f,m){var w=ps(m,ua(St));return Oo(f,N,n,m,w)}),Nt=Kt(function(f,m){var w=ps(m,ua(Nt));return Oo(f,O,n,m,w)}),Hr=Do(function(f,m){return Oo(f,V,n,n,n,m)});function bn(f,m){if(typeof f!="function")throw new ms(o);return m=m===n?m:Gt(m),Kt(f,m)}function ol(f,m){if(typeof f!="function")throw new ms(o);return m=m==null?0:xr(Gt(m),0),Kt(function(w){var P=w[m],D=ca(w,0,m);return P&&Ba(D,P),Ei(f,this,D)})}function kC(f,m,w){var P=!0,D=!0;if(typeof f!="function")throw new ms(o);return pr(w)&&(P="leading"in w?!!w.leading:P,D="trailing"in w?!!w.trailing:D),ht(f,m,{leading:P,maxWait:m,trailing:D})}function Az(f){return Ce(f,1)}function Iz(f,m){return St(Kh(m),f)}function Nz(){if(!arguments.length)return[];var f=arguments[0];return Ht(f)?f:[f]}function Mz(f){return Vi(f,S)}function Oz(f,m){return m=typeof m=="function"?m:n,Vi(f,S,m)}function Dz(f){return Vi(f,p|S)}function Lz(f,m){return m=typeof m=="function"?m:n,Vi(f,p|S,m)}function jz(f,m){return m==null||Dd(f,m,xi(m))}function ha(f,m){return f===m||f!==f&&m!==m}var Fz=ep(Qa),Uz=ep(function(f,m){return f>=m}),lf=Uh(function(){return arguments}())?Uh:function(f){return Sr(f)&&yn.call(f,"callee")&&!Ch.call(f,"callee")},Ht=xe.isArray,Vz=cg?Yi(cg):Y0;function Es(f){return f!=null&&Rb(f.length)&&!lc(f)}function Or(f){return Sr(f)&&Es(f)}function Bz(f){return f===!0||f===!1||Sr(f)&&Zr(f)==be}var bu=kg||DC,zz=Li?Yi(Li):oa;function $z(f){return Sr(f)&&f.nodeType===1&&!xv(f)}function Wz(f){if(f==null)return!0;if(Es(f)&&(Ht(f)||typeof f=="string"||typeof f.splice=="function"||bu(f)||Cp(f)||lf(f)))return!f.length;var m=ti(f);if(m==wt||m==ce)return!f.size;if(da(f))return!aa(f).length;for(var w in f)if(yn.call(f,w))return!1;return!0}function Hz(f,m){return ws(f,m)}function qz(f,m,w){w=typeof w=="function"?w:n;var P=w?w(f,m):n;return P===n?ws(f,m,n,w):!!P}function TC(f){if(!Sr(f))return!1;var m=Zr(f);return m==Je||m==$e||typeof f.message=="string"&&typeof f.name=="string"&&!xv(f)}function Kz(f){return typeof f=="number"&&Yc(f)}function lc(f){if(!pr(f))return!1;var m=Zr(f);return m==pt||m==Et||m==ie||m==Nn}function GR(f){return typeof f=="number"&&f==Gt(f)}function Rb(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=q}function pr(f){var m=typeof f;return f!=null&&(m=="object"||m=="function")}function Sr(f){return f!=null&&typeof f=="object"}var YR=Vl?Yi(Vl):Q0;function Gz(f,m){return f===m||su(f,m,Qd(m))}function Yz(f,m,w){return w=typeof w=="function"?w:n,su(f,m,Qd(m),w)}function Qz(f){return QR(f)&&f!=+f}function Jz(f){if(lC(f))throw new jt(s);return Ig(f)}function Xz(f){return f===null}function Zz(f){return f==null}function QR(f){return typeof f=="number"||Sr(f)&&Zr(f)==_n}function xv(f){if(!Sr(f)||Zr(f)!=dn)return!1;var m=Qs(f);if(m===null)return!0;var w=yn.call(m,"constructor")&&m.constructor;return typeof w=="function"&&w instanceof w&&Td.call(w)==wh}var EC=fh?Yi(fh):Fd;function e$(f){return GR(f)&&f>=-9007199254740991&&f<=q}var JR=zc?Yi(zc):Io;function Pb(f){return typeof f=="string"||!Ht(f)&&Sr(f)&&Zr(f)==ve}function so(f){return typeof f=="symbol"||Sr(f)&&Zr(f)==qe}var Cp=x0?Yi(x0):Ud;function t$(f){return f===n}function n$(f){return Sr(f)&&ti(f)==Be}function r$(f){return Sr(f)&&Zr(f)==Ze}var i$=ep(Ja),s$=ep(function(f,m){return f<=m});function XR(f){if(!f)return[];if(Es(f))return Pb(f)?Qi(f):Ri(f);if(ta&&f[ta])return JS(f[ta]());var m=ti(f),w=m==wt?vh:m==ce?za:kp;return w(f)}function cc(f){if(!f)return f===0?f:0;if(f=jo(f),f===Se||f===-1/0){var m=f<0?-1:1;return m*te}return f===f?f:0}function Gt(f){var m=cc(f),w=m%1;return m===m?w?m-w:m:0}function ZR(f){return f?ra(Gt(f),0,B):0}function jo(f){if(typeof f=="number")return f;if(so(f))return ae;if(pr(f)){var m=typeof f.valueOf=="function"?f.valueOf():f;f=pr(m)?m+"":m}if(typeof f!="string")return f===0?f:+f;f=E0(f);var w=Xr.test(f);return w||Mn.test(f)?uh(f.slice(2),w?2:8):ur.test(f)?ae:+f}function eP(f){return Xs(f,_s(f))}function o$(f){return f?ra(Gt(f),-9007199254740991,q):f===0?f:0}function Ln(f){return f==null?"":Bi(f)}var a$=du(function(f,m){if(da(m)||Es(m)){Xs(m,xi(m),f);return}for(var w in m)yn.call(m,w)&&Gl(f,w,m[w])}),tP=du(function(f,m){Xs(m,_s(m),f)}),Ab=du(function(f,m,w,P){Xs(m,_s(m),f,P)}),l$=du(function(f,m,w,P){Xs(m,xi(m),f,P)}),c$=Do(Dh);function u$(f,m){var w=eu(f);return m==null?w:Gn(w,m)}var d$=Kt(function(f,m){f=Dn(f);var w=-1,P=m.length,D=P>2?m[2]:n;for(D&&Ai(m[0],m[1],D)&&(P=1);++w<P;)for(var U=m[w],H=_s(U),ee=-1,ue=H.length;++ee<ue;){var Ne=H[ee],Me=f[Ne];(Me===n||ha(Me,Co[Ne])&&!yn.call(f,Ne))&&(f[Ne]=U[Ne])}return f}),f$=Kt(function(f){return f.push(n,Qg),Ei(nP,n,f)});function h$(f,m){return S0(f,Rt(m,3),Zi)}function p$(f,m){return S0(f,Rt(m,3),Ya)}function m$(f,m){return f==null?f:Lh(f,Rt(m,3),_s)}function g$(f,m){return f==null?f:jd(f,Rt(m,3),_s)}function v$(f,m){return f&&Zi(f,Rt(m,3))}function y$(f,m){return f&&Ya(f,Rt(m,3))}function b$(f){return f==null?[]:iu(f,xi(f))}function x$(f){return f==null?[]:iu(f,_s(f))}function _C(f,m,w){var P=f==null?n:ia(f,m);return P===n?w:P}function w$(f,m){return f!=null&&tv(f,m,bs)}function RC(f,m){return f!=null&&tv(f,m,Ql)}var S$=rb(function(f,m,w){m!=null&&typeof m.toString!="function"&&(m=Ed.call(m)),f[m]=w},AC(Rs)),C$=rb(function(f,m,w){m!=null&&typeof m.toString!="function"&&(m=Ed.call(m)),yn.call(f,m)?f[m].push(w):f[m]=[w]},Rt),k$=Kt(xs);function xi(f){return Es(f)?Eo(f):aa(f)}function _s(f){return Es(f)?Eo(f,!0):Ng(f)}function T$(f,m){var w={};return m=Rt(m,3),Zi(f,function(P,D,U){Ro(w,m(P,D,U),P)}),w}function E$(f,m){var w={};return m=Rt(m,3),Zi(f,function(P,D,U){Ro(w,D,m(P,D,U))}),w}var _$=du(function(f,m,w){Jl(f,m,w)}),nP=du(function(f,m,w,P){Jl(f,m,w,P)}),R$=Do(function(f,m){var w={};if(f==null)return w;var P=!1;m=zn(m,function(U){return U=Mo(U,f),P||(P=U.length>1),U}),Xs(f,Gd(f),w),P&&(w=Vi(w,p|y|S,Jg));for(var D=m.length;D--;)Hh(w,m[D]);return w});function P$(f,m){return rP(f,Ke(Rt(m)))}var A$=Do(function(f,m){return f==null?{}:Dg(f,m)});function rP(f,m){if(f==null)return{};var w=zn(Gd(f),function(P){return[P]});return m=Rt(m),Xa(f,w,function(P,D){return m(P,D[0])})}function I$(f,m,w){m=Mo(m,f);var P=-1,D=m.length;for(D||(D=1,f=n);++P<D;){var U=f==null?n:f[no(m[P])];U===n&&(P=D,U=w),f=lc(U)?U.call(f):U}return f}function N$(f,m,w){return f==null?f:Zl(f,m,w)}function M$(f,m,w,P){return P=typeof P=="function"?P:n,f==null?f:Zl(f,m,w,P)}var iP=Gg(xi),sP=Gg(_s);function O$(f,m,w){var P=Ht(f),D=P||bu(f)||Cp(f);if(m=Rt(m,4),w==null){var U=f&&f.constructor;D?w=P?new U:[]:pr(f)?w=lc(U)?eu(Qs(f)):{}:w={}}return(D?fi:Zi)(f,function(H,ee,ue){return m(w,H,ee,ue)}),w}function D$(f,m){return f==null?!0:Hh(f,m)}function L$(f,m,w){return f==null?f:Vg(f,m,Kh(w))}function j$(f,m,w,P){return P=typeof P=="function"?P:n,f==null?f:Vg(f,m,Kh(w),P)}function kp(f){return f==null?[]:Cd(f,xi(f))}function F$(f){return f==null?[]:Cd(f,_s(f))}function U$(f,m,w){return w===n&&(w=m,m=n),w!==n&&(w=jo(w),w=w===w?w:0),m!==n&&(m=jo(m),m=m===m?m:0),ra(jo(f),m,w)}function V$(f,m,w){return m=cc(m),w===n?(w=m,m=0):w=cc(w),f=jo(f),Ag(f,m,w)}function B$(f,m,w){if(w&&typeof w!="boolean"&&Ai(f,m,w)&&(m=w=n),w===n&&(typeof m=="boolean"?(w=m,m=n):typeof f=="boolean"&&(w=f,f=n)),f===n&&m===n?(f=0,m=1):(f=cc(f),m===n?(m=f,f=0):m=cc(m)),f>m){var P=f;f=m,m=P}if(w||f%1||m%1){var D=Ad();return hi(f+D*(m-f+ag("1e-"+((D+"").length-1))),m)}return au(f,m)}var z$=ec(function(f,m,w){return m=m.toLowerCase(),f+(w?oP(m):m)});function oP(f){return PC(Ln(f).toLowerCase())}function aP(f){return f=Ln(f),f&&f.replace(Da,P0).replace(g0,"")}function $$(f,m,w){f=Ln(f),m=Bi(m);var P=f.length;w=w===n?P:ra(Gt(w),0,P);var D=w;return w-=m.length,w>=0&&f.slice(w,D)==m}function W$(f){return f=Ln(f),f&&Dt.test(f)?f.replace(Ki,A0):f}function H$(f){return f=Ln(f),f&&Oe.test(f)?f.replace(we,"\\$&"):f}var q$=ec(function(f,m,w){return f+(w?"-":"")+m.toLowerCase()}),K$=ec(function(f,m,w){return f+(w?" ":"")+m.toLowerCase()}),G$=Hg("toLowerCase");function Y$(f,m,w){f=Ln(f),m=Gt(m);var P=m?Bl(f):0;if(!m||P>=m)return f;var D=(m-P)/2;return qd($a(D),w)+f+qd($l(D),w)}function Q$(f,m,w){f=Ln(f),m=Gt(m);var P=m?Bl(f):0;return m&&P<m?f+qd(m-P,w):f}function J$(f,m,w){f=Ln(f),m=Gt(m);var P=m?Bl(f):0;return m&&P<m?qd(m-P,w)+f:f}function X$(f,m,w){return w||m==null?m=0:m&&(m=+m),U0(Ln(f).replace(He,""),m||0)}function Z$(f,m,w){return(w?Ai(f,m,w):m===n)?m=1:m=Gt(m),Xl(Ln(f),m)}function e5(){var f=arguments,m=Ln(f[0]);return f.length<3?m:m.replace(f[1],f[2])}var t5=ec(function(f,m,w){return f+(w?"_":"")+m.toLowerCase()});function n5(f,m,w){return w&&typeof w!="number"&&Ai(f,m,w)&&(m=w=n),w=w===n?B:w>>>0,w?(f=Ln(f),f&&(typeof m=="string"||m!=null&&!EC(m))&&(m=Bi(m),!m&&Hc(f))?ca(Qi(f),0,w):f.split(m,w)):[]}var r5=ec(function(f,m,w){return f+(w?" ":"")+PC(m)});function i5(f,m,w){return f=Ln(f),w=w==null?0:ra(Gt(w),0,f.length),m=Bi(m),f.slice(w,w+m.length)==m}function s5(f,m,w){var P=F.templateSettings;w&&Ai(f,m,w)&&(m=n),f=Ln(f),m=Ab({},m,P,Yg);var D=Ab({},m.imports,P.imports,Yg),U=xi(D),H=Cd(D,U),ee,ue,Ne=0,Me=m.interpolate||Gi,Ve="__p += '",tt=kd((m.escape||Gi).source+"|"+Me.source+"|"+(Me===Ir?At:Gi).source+"|"+(m.evaluate||Gi).source+"|$","g"),bt="//# sourceURL="+(yn.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zS+"]")+`
`;f.replace(tt,function(Ot,an,mn,oo,ns,ao){return mn||(mn=oo),Ve+=f.slice(Ne,ao).replace(hs,I0),an&&(ee=!0,Ve+=`' +
__e(`+an+`) +
'`),ns&&(ue=!0,Ve+=`';
`+ns+`;
__p += '`),mn&&(Ve+=`' +
((__t = (`+mn+`)) == null ? '' : __t) +
'`),Ne=ao+Ot.length,Ot}),Ve+=`';
`;var Mt=yn.call(m,"variable")&&m.variable;if(!Mt)Ve=`with (obj) {
`+Ve+`
}
`;else if(_t.test(Mt))throw new jt(a);Ve=(ue?Ve.replace(Br,""):Ve).replace(cr,"$1").replace(Jo,"$1;"),Ve="function("+(Mt||"obj")+`) {
`+(Mt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ee?", __e = _.escape":"")+(ue?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ve+`return __p
}`;var Jt=cP(function(){return vn(U,bt+"return "+Ve).apply(n,H)});if(Jt.source=Ve,TC(Jt))throw Jt;return Jt}function o5(f){return Ln(f).toLowerCase()}function a5(f){return Ln(f).toUpperCase()}function l5(f,m,w){if(f=Ln(f),f&&(w||m===n))return E0(f);if(!f||!(m=Bi(m)))return f;var P=Qi(f),D=Qi(m),U=_0(P,D),H=bg(P,D)+1;return ca(P,U,H).join("")}function c5(f,m,w){if(f=Ln(f),f&&(w||m===n))return f.slice(0,bh(f)+1);if(!f||!(m=Bi(m)))return f;var P=Qi(f),D=bg(P,Qi(m))+1;return ca(P,0,D).join("")}function u5(f,m,w){if(f=Ln(f),f&&(w||m===n))return f.replace(He,"");if(!f||!(m=Bi(m)))return f;var P=Qi(f),D=_0(P,Qi(m));return ca(P,D).join("")}function d5(f,m){var w=W,P=J;if(pr(m)){var D="separator"in m?m.separator:D;w="length"in m?Gt(m.length):w,P="omission"in m?Bi(m.omission):P}f=Ln(f);var U=f.length;if(Hc(f)){var H=Qi(f);U=H.length}if(w>=U)return f;var ee=w-Bl(P);if(ee<1)return P;var ue=H?ca(H,0,ee).join(""):f.slice(0,ee);if(D===n)return ue+P;if(H&&(ee+=ue.length-ee),EC(D)){if(f.slice(ee).search(D)){var Ne,Me=ue;for(D.global||(D=kd(D.source,Ln(Cn.exec(D))+"g")),D.lastIndex=0;Ne=D.exec(Me);)var Ve=Ne.index;ue=ue.slice(0,Ve===n?ee:Ve)}}else if(f.indexOf(Bi(D),ee)!=ee){var tt=ue.lastIndexOf(D);tt>-1&&(ue=ue.slice(0,tt))}return ue+P}function f5(f){return f=Ln(f),f&&Ol.test(f)?f.replace(Ks,N0):f}var h5=ec(function(f,m,w){return f+(w?" ":"")+m.toUpperCase()}),PC=Hg("toUpperCase");function lP(f,m,w){return f=Ln(f),m=w?n:m,m===n?QS(f)?eC(f):KS(f):f.match(m)||[]}var cP=Kt(function(f,m){try{return Ei(f,n,m)}catch(w){return TC(w)?w:new jt(w)}}),p5=Do(function(f,m){return fi(m,function(w){w=no(w),Ro(f,w,ze(f[w],f))}),f});function m5(f){var m=f==null?0:f.length,w=Rt();return f=m?zn(f,function(P){if(typeof P[1]!="function")throw new ms(o);return[w(P[0]),P[1]]}):[],Kt(function(P){for(var D=-1;++D<m;){var U=f[D];if(Ei(U[0],this,P))return Ei(U[1],this,P)}})}function g5(f){return q0(Vi(f,p))}function AC(f){return function(){return f}}function v5(f,m){return f==null||f!==f?m:f}var y5=Xh(),b5=Xh(!0);function Rs(f){return f}function IC(f){return ou(typeof f=="function"?f:Vi(f,p))}function x5(f){return Bh(Vi(f,p))}function w5(f,m){return Jn(f,Vi(m,p))}var S5=Kt(function(f,m){return function(w){return xs(w,f,m)}}),C5=Kt(function(f,m){return function(w){return xs(f,w,m)}});function NC(f,m,w){var P=xi(m),D=iu(m,P);w==null&&!(pr(m)&&(D.length||!P.length))&&(w=m,m=f,f=this,D=iu(m,xi(m)));var U=!(pr(w)&&"chain"in w)||!!w.chain,H=lc(f);return fi(D,function(ee){var ue=m[ee];f[ee]=ue,H&&(f.prototype[ee]=function(){var Ne=this.__chain__;if(U||Ne){var Me=f(this.__wrapped__),Ve=Me.__actions__=Ri(this.__actions__);return Ve.push({func:ue,args:arguments,thisArg:f}),Me.__chain__=Ne,Me}return ue.apply(f,Ba([this.value()],arguments))})}),f}function k5(){return Qn._===this&&(Qn._=D0),this}function MC(){}function T5(f){return f=Gt(f),Kt(function(m){return zh(m,f)})}var E5=Zh(zn),_5=Zh(dg),R5=Zh(pg);function uP(f){return ot(f)?gg(no(f)):tr(f)}function P5(f){return function(m){return f==null?n:ia(f,m)}}var A5=Kg(),I5=Kg(!0);function OC(){return[]}function DC(){return!1}function N5(){return{}}function M5(){return""}function O5(){return!0}function D5(f,m){if(f=Gt(f),f<1||f>q)return[];var w=B,P=hi(f,B);m=Rt(m),f-=B;for(var D=yg(P,m);++w<f;)m(w);return D}function L5(f){return Ht(f)?zn(f,no):so(f)?[f]:Ri(sv(Ln(f)))}function j5(f){var m=++Gc;return Ln(f)+m}var F5=Hd(function(f,m){return f+m},0),U5=ei("ceil"),V5=Hd(function(f,m){return f/m},1),B5=ei("floor");function z5(f){return f&&f.length?Yl(f,Rs,Qa):n}function $5(f,m){return f&&f.length?Yl(f,Rt(m,2),Qa):n}function W5(f){return k0(f,Rs)}function H5(f,m){return k0(f,Rt(m,2))}function q5(f){return f&&f.length?Yl(f,Rs,Ja):n}function K5(f,m){return f&&f.length?Yl(f,Rt(m,2),Ja):n}var G5=Hd(function(f,m){return f*m},1),Y5=ei("round"),Q5=Hd(function(f,m){return f-m},0);function J5(f){return f&&f.length?vg(f,Rs):0}function X5(f,m){return f&&f.length?vg(f,Rt(m,2)):0}return F.after=Z,F.ary=Ce,F.assign=a$,F.assignIn=tP,F.assignInWith=Ab,F.assignWith=l$,F.at=c$,F.before=Fe,F.bind=ze,F.bindAll=p5,F.bindKey=je,F.castArray=Nz,F.chain=mp,F.chunk=ap,F.compact=ov,F.concat=ks,F.cond=m5,F.conforms=g5,F.constant=AC,F.countBy=Cb,F.create=u$,F.curry=rt,F.curryRight=dt,F.debounce=ht,F.defaults=d$,F.defaultsDeep=f$,F.defer=hr,F.delay=he,F.difference=pn,F.differenceBy=Wr,F.differenceWith=wr,F.drop=ri,F.dropRight=ts,F.dropRightWhile=vu,F.dropWhile=Mr,F.fill=ef,F.filter=yp,F.flatMap=yv,F.flatMapDeep=xC,F.flatMapDepth=Eb,F.flatten=lp,F.flattenDeep=nf,F.flattenDepth=zi,F.flip=ne,F.flow=y5,F.flowRight=b5,F.fromPairs=av,F.functions=b$,F.functionsIn=x$,F.groupBy=bv,F.initial=cp,F.intersection=lv,F.intersectionBy=nl,F.intersectionWith=up,F.invert=S$,F.invertBy=C$,F.invokeMap=_b,F.iteratee=IC,F.keyBy=wC,F.keys=xi,F.keysIn=_s,F.map=ac,F.mapKeys=T$,F.mapValues=E$,F.matches=x5,F.matchesProperty=w5,F.memoize=ge,F.merge=_$,F.mergeWith=nP,F.method=S5,F.methodOf=C5,F.mixin=NC,F.negate=Ke,F.nthArg=T5,F.omit=R$,F.omitBy=P$,F.once=mt,F.orderBy=SC,F.over=E5,F.overArgs=Tt,F.overEvery=_5,F.overSome=R5,F.partial=St,F.partialRight=Nt,F.partition=af,F.pick=A$,F.pickBy=rP,F.property=uP,F.propertyOf=P5,F.pull=dp,F.pullAll=sf,F.pullAllBy=Ni,F.pullAllWith=il,F.pullAt=ro,F.range=A5,F.rangeRight=I5,F.rearg=Hr,F.reject=l,F.remove=$i,F.rest=bn,F.reverse=fp,F.sampleSize=g,F.set=N$,F.setWith=M$,F.shuffle=x,F.slice=uv,F.sortBy=L,F.sortedUniq=hv,F.sortedUniqBy=ic,F.split=n5,F.spread=ol,F.tail=gb,F.take=vb,F.takeRight=pv,F.takeRightWhile=hp,F.takeWhile=uC,F.tap=vC,F.throttle=kC,F.thru=io,F.toArray=XR,F.toPairs=iP,F.toPairsIn=sP,F.toPath=L5,F.toPlainObject=eP,F.transform=O$,F.unary=Az,F.union=dC,F.unionBy=yb,F.unionWith=bb,F.uniq=sc,F.uniqBy=fC,F.uniqWith=yu,F.unset=D$,F.unzip=pp,F.unzipWith=nr,F.update=L$,F.updateWith=j$,F.values=kp,F.valuesIn=F$,F.without=hC,F.words=lP,F.wrap=Iz,F.xor=xb,F.xorBy=pC,F.xorWith=mC,F.zip=wb,F.zipObject=Sb,F.zipObjectDeep=gC,F.zipWith=Ts,F.entries=iP,F.entriesIn=sP,F.extend=tP,F.extendWith=Ab,NC(F,F),F.add=F5,F.attempt=cP,F.camelCase=z$,F.capitalize=oP,F.ceil=U5,F.clamp=U$,F.clone=Mz,F.cloneDeep=Dz,F.cloneDeepWith=Lz,F.cloneWith=Oz,F.conformsTo=jz,F.deburr=aP,F.defaultTo=v5,F.divide=V5,F.endsWith=$$,F.eq=ha,F.escape=W$,F.escapeRegExp=H$,F.every=kb,F.find=bp,F.findIndex=tl,F.findKey=h$,F.findLast=Tb,F.findLastIndex=tf,F.findLastKey=p$,F.floor=B5,F.forEach=xp,F.forEachRight=of,F.forIn=m$,F.forInRight=g$,F.forOwn=v$,F.forOwnRight=y$,F.get=_C,F.gt=Fz,F.gte=Uz,F.has=w$,F.hasIn=RC,F.head=nc,F.identity=Rs,F.includes=wp,F.indexOf=fa,F.inRange=V$,F.invoke=k$,F.isArguments=lf,F.isArray=Ht,F.isArrayBuffer=Vz,F.isArrayLike=Es,F.isArrayLikeObject=Or,F.isBoolean=Bz,F.isBuffer=bu,F.isDate=zz,F.isElement=$z,F.isEmpty=Wz,F.isEqual=Hz,F.isEqualWith=qz,F.isError=TC,F.isFinite=Kz,F.isFunction=lc,F.isInteger=GR,F.isLength=Rb,F.isMap=YR,F.isMatch=Gz,F.isMatchWith=Yz,F.isNaN=Qz,F.isNative=Jz,F.isNil=Zz,F.isNull=Xz,F.isNumber=QR,F.isObject=pr,F.isObjectLike=Sr,F.isPlainObject=xv,F.isRegExp=EC,F.isSafeInteger=e$,F.isSet=JR,F.isString=Pb,F.isSymbol=so,F.isTypedArray=Cp,F.isUndefined=t$,F.isWeakMap=n$,F.isWeakSet=r$,F.join=rl,F.kebabCase=q$,F.last=Ii,F.lastIndexOf=rf,F.lowerCase=K$,F.lowerFirst=G$,F.lt=i$,F.lte=s$,F.max=z5,F.maxBy=$5,F.mean=W5,F.meanBy=H5,F.min=q5,F.minBy=K5,F.stubArray=OC,F.stubFalse=DC,F.stubObject=N5,F.stubString=M5,F.stubTrue=O5,F.multiply=G5,F.nth=cv,F.noConflict=k5,F.noop=MC,F.now=z,F.pad=Y$,F.padEnd=Q$,F.padStart=J$,F.parseInt=X$,F.random=B$,F.reduce=CC,F.reduceRight=Sp,F.repeat=Z$,F.replace=e5,F.result=I$,F.round=Y5,F.runInContext=oe,F.sample=u,F.size=T,F.snakeCase=t5,F.some=R,F.sortedIndex=dv,F.sortedIndexBy=cC,F.sortedIndexOf=sl,F.sortedLastIndex=mb,F.sortedLastIndexBy=fv,F.sortedLastIndexOf=rc,F.startCase=r5,F.startsWith=i5,F.subtract=Q5,F.sum=J5,F.sumBy=X5,F.template=s5,F.times=D5,F.toFinite=cc,F.toInteger=Gt,F.toLength=ZR,F.toLower=o5,F.toNumber=jo,F.toSafeInteger=o$,F.toString=Ln,F.toUpper=a5,F.trim=l5,F.trimEnd=c5,F.trimStart=u5,F.truncate=d5,F.unescape=f5,F.uniqueId=j5,F.upperCase=h5,F.upperFirst=PC,F.each=xp,F.eachRight=of,F.first=nc,NC(F,function(){var f={};return Zi(F,function(m,w){yn.call(F.prototype,w)||(f[w]=m)}),f}(),{chain:!1}),F.VERSION=r,fi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){F[f].placeholder=F}),fi(["drop","take"],function(f,m){Wt.prototype[f]=function(w){w=w===n?1:xr(Gt(w),0);var P=this.__filtered__&&!m?new Wt(this):this.clone();return P.__filtered__?P.__takeCount__=hi(w,P.__takeCount__):P.__views__.push({size:hi(w,B),type:f+(P.__dir__<0?"Right":"")}),P},Wt.prototype[f+"Right"]=function(w){return this.reverse()[f](w).reverse()}}),fi(["filter","map","takeWhile"],function(f,m){var w=m+1,P=w==fe||w==le;Wt.prototype[f]=function(D){var U=this.clone();return U.__iteratees__.push({iteratee:Rt(D,3),type:w}),U.__filtered__=U.__filtered__||P,U}}),fi(["head","last"],function(f,m){var w="take"+(m?"Right":"");Wt.prototype[f]=function(){return this[w](1).value()[0]}}),fi(["initial","tail"],function(f,m){var w="drop"+(m?"":"Right");Wt.prototype[f]=function(){return this.__filtered__?new Wt(this):this[w](1)}}),Wt.prototype.compact=function(){return this.filter(Rs)},Wt.prototype.find=function(f){return this.filter(f).head()},Wt.prototype.findLast=function(f){return this.reverse().find(f)},Wt.prototype.invokeMap=Kt(function(f,m){return typeof f=="function"?new Wt(this):this.map(function(w){return xs(w,f,m)})}),Wt.prototype.reject=function(f){return this.filter(Ke(Rt(f)))},Wt.prototype.slice=function(f,m){f=Gt(f);var w=this;return w.__filtered__&&(f>0||m<0)?new Wt(w):(f<0?w=w.takeRight(-f):f&&(w=w.drop(f)),m!==n&&(m=Gt(m),w=m<0?w.dropRight(-m):w.take(m-f)),w)},Wt.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Wt.prototype.toArray=function(){return this.take(B)},Zi(Wt.prototype,function(f,m){var w=/^(?:filter|find|map|reject)|While$/.test(m),P=/^(?:head|last)$/.test(m),D=F[P?"take"+(m=="last"?"Right":""):m],U=P||/^find/.test(m);D&&(F.prototype[m]=function(){var H=this.__wrapped__,ee=P?[1]:arguments,ue=H instanceof Wt,Ne=ee[0],Me=ue||Ht(H),Ve=function(an){var mn=D.apply(F,Ba([an],ee));return P&&tt?mn[0]:mn};Me&&w&&typeof Ne=="function"&&Ne.length!=1&&(ue=Me=!1);var tt=this.__chain__,bt=!!this.__actions__.length,Mt=U&&!tt,Jt=ue&&!bt;if(!U&&Me){H=Jt?H:new Wt(this);var Ot=f.apply(H,ee);return Ot.__actions__.push({func:io,args:[Ve],thisArg:n}),new pi(Ot,tt)}return Mt&&Jt?f.apply(this,ee):(Ot=this.thru(Ve),Mt?P?Ot.value()[0]:Ot.value():Ot)})}),fi(["pop","push","shift","sort","splice","unshift"],function(f){var m=Zo[f],w=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",P=/^(?:pop|shift)$/.test(f);F.prototype[f]=function(){var D=arguments;if(P&&!this.__chain__){var U=this.value();return m.apply(Ht(U)?U:[],D)}return this[w](function(H){return m.apply(Ht(H)?H:[],D)})}}),Zi(Wt.prototype,function(f,m){var w=F[m];if(w){var P=w.name+"";yn.call(Xc,P)||(Xc[P]=[]),Xc[P].push({name:m,func:w})}}),Xc[hu(n,_).name]=[{name:"wrapper",func:n}],Wt.prototype.clone=Ah,Wt.prototype.reverse=Eg,Wt.prototype.value=tu,F.prototype.at=gp,F.prototype.chain=oc,F.prototype.commit=vp,F.prototype.next=mv,F.prototype.plant=yC,F.prototype.reverse=vv,F.prototype.toJSON=F.prototype.valueOf=F.prototype.value=bC,F.prototype.first=F.prototype.head,ta&&(F.prototype[ta]=gv),F},qc=tC();So?((So.exports=qc)._=qc,Sd._=qc):Qn._=qc}).call(aY)}(Uv,Uv.exports)),Uv.exports}var qE=lY();const cY=({isHost:t,settingsPanel:e})=>!t&&(e==="invitation"||e==="permissions")?b.jsxs("div",{className:"flex items-center gap-8 p-8 w-fit border border-yellow-400 rounded-8 text-xs bg-yellow-50",children:[b.jsx(gq,{size:16,className:"text-yellow-500"}),b.jsxs("span",{children:[qE.capitalize(e)," settings can only be changed by the host."]})]}):null,uY=()=>b.jsx("div",{children:b.jsx("div",{className:"flex flex-col gap-4",children:b.jsx("span",{className:"text-sm font-medium",children:"Conversation Settings"})})});var Xy=t=>t.type==="checkbox",xf=t=>t instanceof Date,Os=t=>t==null;const r2=t=>typeof t=="object";var Qr=t=>!Os(t)&&!Array.isArray(t)&&r2(t)&&!xf(t),i2=t=>Qr(t)&&t.target?Xy(t.target)?t.target.checked:t.target.value:t,dY=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,s2=(t,e)=>t.has(dY(e)),fY=t=>{const e=t.constructor&&t.constructor.prototype;return Qr(e)&&e.hasOwnProperty("isPrototypeOf")},KE=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ii(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(KE&&(t instanceof Blob||r))&&(n||Qr(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!fY(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=ii(t[i]));else return t;return e}var Xw=t=>/^\w*$/.test(t),Er=t=>t===void 0,GE=t=>Array.isArray(t)?t.filter(Boolean):[],YE=t=>GE(t.replace(/["|']|\]/g,"").split(/\.|\[/)),et=(t,e,n)=>{if(!e||!Qr(t))return n;const r=(Xw(e)?[e]:YE(e)).reduce((i,s)=>Os(i)?i:i[s],t);return Er(r)||r===t?Er(t[e])?n:t[e]:r},uo=t=>typeof t=="boolean",Fn=(t,e,n)=>{let r=-1;const i=Xw(e)?[e]:YE(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let c=n;if(r!==o){const d=t[a];c=Qr(d)||Array.isArray(d)?d:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=c,t=t[a]}};const Kx={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},wa={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},fc={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},QE=Pe.createContext(null);QE.displayName="HookFormContext";const Zw=()=>Pe.useContext(QE),hY=t=>{const{children:e,...n}=t;return Pe.createElement(QE.Provider,{value:n},e)};var o2=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==wa.all&&(e._proxyFormState[o]=!r||wa.all),n&&(n[o]=!0),t[o]}});return i};const JE=typeof window<"u"?Pe.useLayoutEffect:Pe.useEffect;function pY(t){const e=Zw(),{control:n=e.control,disabled:r,name:i,exact:s}=t||{},[o,a]=Pe.useState(n._formState),c=Pe.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return JE(()=>n._subscribe({name:i,formState:c.current,exact:s,callback:d=>{!r&&a({...n._formState,...d})}}),[i,r,s]),Pe.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),Pe.useMemo(()=>o2(o,n,c.current,!1),[o,n])}var ho=t=>typeof t=="string",a2=(t,e,n,r,i)=>ho(t)?(r&&e.watch.add(t),et(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),et(n,s))):(r&&(e.watchAll=!0),n),MT=t=>Os(t)||!r2(t);function wc(t,e,n=new WeakSet){if(MT(t)||MT(e))return t===e;if(xf(t)&&xf(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const s of r){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(xf(o)&&xf(a)||Qr(o)&&Qr(a)||Array.isArray(o)&&Array.isArray(a)?!wc(o,a,n):o!==a)return!1}}return!0}function mY(t){const e=Zw(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o,compute:a}=t||{},c=Pe.useRef(i),d=Pe.useRef(a),h=Pe.useRef(void 0);d.current=a;const p=Pe.useMemo(()=>n._getWatch(r,c.current),[n,r]),[y,S]=Pe.useState(d.current?d.current(p):p);return JE(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:k=>{if(!s){const C=a2(r,n._names,k.values||n._formValues,!1,c.current);if(d.current){const E=d.current(C);wc(E,h.current)||(S(E),h.current=E)}else S(C)}}}),[n,s,r,o]),Pe.useEffect(()=>n._removeUnmounted()),y}function gY(t){const e=Zw(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s,defaultValue:o}=t,a=s2(i._names.array,n),c=Pe.useMemo(()=>et(i._formValues,n,et(i._defaultValues,n,o)),[i,n,o]),d=mY({control:i,name:n,defaultValue:c,exact:!0}),h=pY({control:i,name:n,exact:!0}),p=Pe.useRef(t),y=Pe.useRef(void 0),S=Pe.useRef(i.register(n,{...t.rules,value:d,...uo(t.disabled)?{disabled:t.disabled}:{}}));p.current=t;const k=Pe.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!et(h.errors,n)},isDirty:{enumerable:!0,get:()=>!!et(h.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!et(h.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!et(h.validatingFields,n)},error:{enumerable:!0,get:()=>et(h.errors,n)}}),[h,n]),C=Pe.useCallback(M=>S.current.onChange({target:{value:i2(M),name:n},type:Kx.CHANGE}),[n]),E=Pe.useCallback(()=>S.current.onBlur({target:{value:et(i._formValues,n),name:n},type:Kx.BLUR}),[n,i._formValues]),_=Pe.useCallback(M=>{const I=et(i._fields,n);I&&M&&(I._f.ref={focus:()=>M.focus&&M.focus(),select:()=>M.select&&M.select(),setCustomValidity:N=>M.setCustomValidity(N),reportValidity:()=>M.reportValidity()})},[i._fields,n]),A=Pe.useMemo(()=>({name:n,value:d,...uo(r)||h.disabled?{disabled:h.disabled||r}:{},onChange:C,onBlur:E,ref:_}),[n,r,h.disabled,C,E,_,d]);return Pe.useEffect(()=>{const M=i._options.shouldUnregister||s,I=y.current;I&&I!==n&&!a&&i.unregister(I),i.register(n,{...p.current.rules,...uo(p.current.disabled)?{disabled:p.current.disabled}:{}});const N=(O,j)=>{const V=et(i._fields,O);V&&V._f&&(V._f.mount=j)};if(N(n,!0),M){const O=ii(et(i._options.defaultValues,n,p.current.defaultValue));Fn(i._defaultValues,n,O),Er(et(i._formValues,n))&&Fn(i._formValues,n,O)}return!a&&i.register(n),y.current=n,()=>{(a?M&&!i._state.action:M)?i.unregister(n):N(n,!1)}},[n,i,a,s]),Pe.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),Pe.useMemo(()=>({field:A,formState:h,fieldState:k}),[A,h,k])}const vY=t=>t.render(gY(t));var l2=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},Gv=t=>Array.isArray(t)?t:[t],GA=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function c2(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r],s=e[r];if(i&&Qr(i)&&s){const o=c2(i,s);Qr(o)&&(n[r]=o)}else t[r]&&(n[r]=s)}return n}var Ns=t=>Qr(t)&&!Object.keys(t).length,XE=t=>t.type==="file",Sa=t=>typeof t=="function",Gx=t=>{if(!KE)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},u2=t=>t.type==="select-multiple",ZE=t=>t.type==="radio",yY=t=>ZE(t)||Xy(t),ak=t=>Gx(t)&&t.isConnected;function bY(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Er(t)?r++:t[e[r++]];return t}function xY(t){for(const e in t)if(t.hasOwnProperty(e)&&!Er(t[e]))return!1;return!0}function qr(t,e){const n=Array.isArray(e)?e:Xw(e)?[e]:YE(e),r=n.length===1?t:bY(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Qr(r)&&Ns(r)||Array.isArray(r)&&xY(r))&&qr(t,n.slice(0,-1)),t}var wY=t=>{for(const e in t)if(Sa(t[e]))return!0;return!1};function d2(t){return Array.isArray(t)||Qr(t)&&!wY(t)}function OT(t,e={}){for(const n in t)d2(t[n])?(e[n]=Array.isArray(t[n])?[]:{},OT(t[n],e[n])):Er(t[n])||(e[n]=!0);return e}function Dp(t,e,n){n||(n=OT(e));for(const r in t)d2(t[r])?Er(e)||MT(n[r])?n[r]=OT(t[r],Array.isArray(t[r])?[]:{}):Dp(t[r],Os(e)?{}:e[r],n[r]):n[r]=!wc(t[r],e[r]);return n}const YA={value:!1,isValid:!1},QA={value:!0,isValid:!0};var f2=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Er(t[0].attributes.value)?Er(t[0].value)||t[0].value===""?QA:{value:t[0].value,isValid:!0}:QA:YA}return YA},h2=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Er(t)?t:e?t===""?NaN:t&&+t:n&&ho(t)?new Date(t):r?r(t):t;const JA={isValid:!1,value:null};var p2=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,JA):JA;function XA(t){const e=t.ref;return XE(e)?e.files:ZE(e)?p2(t.refs).value:u2(e)?[...e.selectedOptions].map(({value:n})=>n):Xy(e)?f2(t.refs).value:h2(Er(e.value)?t.ref.value:e.value,t)}var SY=(t,e,n,r)=>{const i={};for(const s of t){const o=et(e,s);o&&Fn(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Yx=t=>t instanceof RegExp,_v=t=>Er(t)?t:Yx(t)?t.source:Qr(t)?Yx(t.value)?t.value.source:t.value:t,ZA=t=>({isOnSubmit:!t||t===wa.onSubmit,isOnBlur:t===wa.onBlur,isOnChange:t===wa.onChange,isOnAll:t===wa.all,isOnTouch:t===wa.onTouched});const eI="AsyncFunction";var CY=t=>!!t&&!!t.validate&&!!(Sa(t.validate)&&t.validate.constructor.name===eI||Qr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===eI)),kY=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),tI=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Yv=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=et(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Yv(a,e))break}else if(Qr(a)&&Yv(a,e))break}}};function nI(t,e,n){const r=et(t,n);if(r||Xw(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=et(e,s),a=et(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:n}}var TY=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return Ns(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||wa.all))},EY=(t,e,n)=>!t||!e||t===e||Gv(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),_Y=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,RY=(t,e)=>!GE(et(t,e)).length&&qr(t,e),PY=(t,e,n)=>{const r=Gv(et(t,n));return Fn(r,"root",e[n]),Fn(t,n,r),t};function rI(t,e,n="validate"){if(ho(t)||Array.isArray(t)&&t.every(ho)||uo(t)&&!t)return{type:n,message:ho(t)?t:"",ref:e}}var Rp=t=>Qr(t)&&!Yx(t)?t:{value:t,message:""},iI=async(t,e,n,r,i,s)=>{const{ref:o,refs:a,required:c,maxLength:d,minLength:h,min:p,max:y,pattern:S,validate:k,name:C,valueAsNumber:E,mount:_}=t._f,A=et(n,C);if(!_||e.has(C))return{};const M=a?a[0]:o,I=Y=>{i&&M.reportValidity&&(M.setCustomValidity(uo(Y)?"":Y||""),M.reportValidity())},N={},O=ZE(o),j=Xy(o),V=O||j,$=(E||XE(o))&&Er(o.value)&&Er(A)||Gx(o)&&o.value===""||A===""||Array.isArray(A)&&!A.length,W=l2.bind(null,C,r,N),J=(Y,pe,fe,Ee=fc.maxLength,le=fc.minLength)=>{const Se=Y?pe:fe;N[C]={type:Y?Ee:le,message:Se,ref:o,...W(Y?Ee:le,Se)}};if(s?!Array.isArray(A)||!A.length:c&&(!V&&($||Os(A))||uo(A)&&!A||j&&!f2(a).isValid||O&&!p2(a).isValid)){const{value:Y,message:pe}=ho(c)?{value:!!c,message:c}:Rp(c);if(Y&&(N[C]={type:fc.required,message:pe,ref:M,...W(fc.required,pe)},!r))return I(pe),N}if(!$&&(!Os(p)||!Os(y))){let Y,pe;const fe=Rp(y),Ee=Rp(p);if(!Os(A)&&!isNaN(A)){const le=o.valueAsNumber||A&&+A;Os(fe.value)||(Y=le>fe.value),Os(Ee.value)||(pe=le<Ee.value)}else{const le=o.valueAsDate||new Date(A),Se=ae=>new Date(new Date().toDateString()+" "+ae),q=o.type=="time",te=o.type=="week";ho(fe.value)&&A&&(Y=q?Se(A)>Se(fe.value):te?A>fe.value:le>new Date(fe.value)),ho(Ee.value)&&A&&(pe=q?Se(A)<Se(Ee.value):te?A<Ee.value:le<new Date(Ee.value))}if((Y||pe)&&(J(!!Y,fe.message,Ee.message,fc.max,fc.min),!r))return I(N[C].message),N}if((d||h)&&!$&&(ho(A)||s&&Array.isArray(A))){const Y=Rp(d),pe=Rp(h),fe=!Os(Y.value)&&A.length>+Y.value,Ee=!Os(pe.value)&&A.length<+pe.value;if((fe||Ee)&&(J(fe,Y.message,pe.message),!r))return I(N[C].message),N}if(S&&!$&&ho(A)){const{value:Y,message:pe}=Rp(S);if(Yx(Y)&&!A.match(Y)&&(N[C]={type:fc.pattern,message:pe,ref:o,...W(fc.pattern,pe)},!r))return I(pe),N}if(k){if(Sa(k)){const Y=await k(A,n),pe=rI(Y,M);if(pe&&(N[C]={...pe,...W(fc.validate,pe.message)},!r))return I(pe.message),N}else if(Qr(k)){let Y={};for(const pe in k){if(!Ns(Y)&&!r)break;const fe=rI(await k[pe](A,n),M,pe);fe&&(Y={...fe,...W(pe,fe.message)},I(fe.message),r&&(N[C]=Y))}if(!Ns(Y)&&(N[C]={ref:M,...Y},!r))return N}}return I(!0),N};const AY={mode:wa.onSubmit,reValidateMode:wa.onChange,shouldFocusError:!0};function IY(t={}){let e={...AY,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Sa(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Qr(e.defaultValues)||Qr(e.values)?ii(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:ii(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...h};const y={array:GA(),state:GA()},S=e.criteriaMode===wa.all,k=Q=>ce=>{clearTimeout(d),d=setTimeout(Q,ce)},C=async Q=>{if(!e.disabled&&(h.isValid||p.isValid||Q)){const ce=e.resolver?Ns((await j()).errors):await $(r,!0);ce!==n.isValid&&y.state.next({isValid:ce})}},E=(Q,ce)=>{!e.disabled&&(h.isValidating||h.validatingFields||p.isValidating||p.validatingFields)&&((Q||Array.from(a.mount)).forEach(ve=>{ve&&(ce?Fn(n.validatingFields,ve,ce):qr(n.validatingFields,ve))}),y.state.next({validatingFields:n.validatingFields,isValidating:!Ns(n.validatingFields)}))},_=(Q,ce=[],ve,qe,Ge=!0,Be=!0)=>{if(qe&&ve&&!e.disabled){if(o.action=!0,Be&&Array.isArray(et(r,Q))){const Ze=ve(et(r,Q),qe.argA,qe.argB);Ge&&Fn(r,Q,Ze)}if(Be&&Array.isArray(et(n.errors,Q))){const Ze=ve(et(n.errors,Q),qe.argA,qe.argB);Ge&&Fn(n.errors,Q,Ze),RY(n.errors,Q)}if((h.touchedFields||p.touchedFields)&&Be&&Array.isArray(et(n.touchedFields,Q))){const Ze=ve(et(n.touchedFields,Q),qe.argA,qe.argB);Ge&&Fn(n.touchedFields,Q,Ze)}(h.dirtyFields||p.dirtyFields)&&(n.dirtyFields=Dp(i,s)),y.state.next({name:Q,isDirty:J(Q,ce),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Fn(s,Q,ce)},A=(Q,ce)=>{Fn(n.errors,Q,ce),y.state.next({errors:n.errors})},M=Q=>{n.errors=Q,y.state.next({errors:n.errors,isValid:!1})},I=(Q,ce,ve,qe)=>{const Ge=et(r,Q);if(Ge){const Be=et(s,Q,Er(ve)?et(i,Q):ve);Er(Be)||qe&&qe.defaultChecked||ce?Fn(s,Q,ce?Be:XA(Ge._f)):fe(Q,Be),o.mount&&C()}},N=(Q,ce,ve,qe,Ge)=>{let Be=!1,Ze=!1;const kt={name:Q};if(!e.disabled){if(!ve||qe){(h.isDirty||p.isDirty)&&(Ze=n.isDirty,n.isDirty=kt.isDirty=J(),Be=Ze!==kt.isDirty);const Ft=wc(et(i,Q),ce);Ze=!!et(n.dirtyFields,Q),Ft?qr(n.dirtyFields,Q):Fn(n.dirtyFields,Q,!0),kt.dirtyFields=n.dirtyFields,Be=Be||(h.dirtyFields||p.dirtyFields)&&Ze!==!Ft}if(ve){const Ft=et(n.touchedFields,Q);Ft||(Fn(n.touchedFields,Q,ve),kt.touchedFields=n.touchedFields,Be=Be||(h.touchedFields||p.touchedFields)&&Ft!==ve)}Be&&Ge&&y.state.next(kt)}return Be?kt:{}},O=(Q,ce,ve,qe)=>{const Ge=et(n.errors,Q),Be=(h.isValid||p.isValid)&&uo(ce)&&n.isValid!==ce;if(e.delayError&&ve?(c=k(()=>A(Q,ve)),c(e.delayError)):(clearTimeout(d),c=null,ve?Fn(n.errors,Q,ve):qr(n.errors,Q)),(ve?!wc(Ge,ve):Ge)||!Ns(qe)||Be){const Ze={...qe,...Be&&uo(ce)?{isValid:ce}:{},errors:n.errors,name:Q};n={...n,...Ze},y.state.next(Ze)}},j=async Q=>{E(Q,!0);const ce=await e.resolver(s,e.context,SY(Q||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return E(Q),ce},V=async Q=>{const{errors:ce}=await j(Q);if(Q)for(const ve of Q){const qe=et(ce,ve);qe?Fn(n.errors,ve,qe):qr(n.errors,ve)}else n.errors=ce;return ce},$=async(Q,ce,ve={valid:!0})=>{for(const qe in Q){const Ge=Q[qe];if(Ge){const{_f:Be,...Ze}=Ge;if(Be){const kt=a.array.has(Be.name),Ft=Ge._f&&CY(Ge._f);Ft&&h.validatingFields&&E([Be.name],!0);const We=await iI(Ge,a.disabled,s,S,e.shouldUseNativeValidation&&!ce,kt);if(Ft&&h.validatingFields&&E([Be.name]),We[Be.name]&&(ve.valid=!1,ce))break;!ce&&(et(We,Be.name)?kt?PY(n.errors,We,Be.name):Fn(n.errors,Be.name,We[Be.name]):qr(n.errors,Be.name))}!Ns(Ze)&&await $(Ze,ce,ve)}}return ve.valid},W=()=>{for(const Q of a.unMount){const ce=et(r,Q);ce&&(ce._f.refs?ce._f.refs.every(ve=>!ak(ve)):!ak(ce._f.ref))&&ie(Q)}a.unMount=new Set},J=(Q,ce)=>!e.disabled&&(Q&&ce&&Fn(s,Q,ce),!wc(ae(),i)),Y=(Q,ce,ve)=>a2(Q,a,{...o.mount?s:Er(ce)?i:ho(Q)?{[Q]:ce}:ce},ve,ce),pe=Q=>GE(et(o.mount?s:i,Q,e.shouldUnregister?et(i,Q,[]):[])),fe=(Q,ce,ve={})=>{const qe=et(r,Q);let Ge=ce;if(qe){const Be=qe._f;Be&&(!Be.disabled&&Fn(s,Q,h2(ce,Be)),Ge=Gx(Be.ref)&&Os(ce)?"":ce,u2(Be.ref)?[...Be.ref.options].forEach(Ze=>Ze.selected=Ge.includes(Ze.value)):Be.refs?Xy(Be.ref)?Be.refs.forEach(Ze=>{(!Ze.defaultChecked||!Ze.disabled)&&(Array.isArray(Ge)?Ze.checked=!!Ge.find(kt=>kt===Ze.value):Ze.checked=Ge===Ze.value||!!Ge)}):Be.refs.forEach(Ze=>Ze.checked=Ze.value===Ge):XE(Be.ref)?Be.ref.value="":(Be.ref.value=Ge,Be.ref.type||y.state.next({name:Q,values:ii(s)})))}(ve.shouldDirty||ve.shouldTouch)&&N(Q,Ge,ve.shouldTouch,ve.shouldDirty,!0),ve.shouldValidate&&te(Q)},Ee=(Q,ce,ve)=>{for(const qe in ce){if(!ce.hasOwnProperty(qe))return;const Ge=ce[qe],Be=Q+"."+qe,Ze=et(r,Be);(a.array.has(Q)||Qr(Ge)||Ze&&!Ze._f)&&!xf(Ge)?Ee(Be,Ge,ve):fe(Be,Ge,ve)}},le=(Q,ce,ve={})=>{const qe=et(r,Q),Ge=a.array.has(Q),Be=ii(ce);Fn(s,Q,Be),Ge?(y.array.next({name:Q,values:ii(s)}),(h.isDirty||h.dirtyFields||p.isDirty||p.dirtyFields)&&ve.shouldDirty&&y.state.next({name:Q,dirtyFields:Dp(i,s),isDirty:J(Q,Be)})):qe&&!qe._f&&!Os(Be)?Ee(Q,Be,ve):fe(Q,Be,ve),tI(Q,a)&&y.state.next({...n,name:Q}),y.state.next({name:o.mount?Q:void 0,values:ii(s)})},Se=async Q=>{o.mount=!0;const ce=Q.target;let ve=ce.name,qe=!0;const Ge=et(r,ve),Be=Ft=>{qe=Number.isNaN(Ft)||xf(Ft)&&isNaN(Ft.getTime())||wc(Ft,et(s,ve,Ft))},Ze=ZA(e.mode),kt=ZA(e.reValidateMode);if(Ge){let Ft,We;const Ut=ce.type?XA(Ge._f):i2(Q),Qt=Q.type===Kx.BLUR||Q.type===Kx.FOCUS_OUT,hn=!kY(Ge._f)&&!e.resolver&&!et(n.errors,ve)&&!Ge._f.deps||_Y(Qt,et(n.touchedFields,ve),n.isSubmitted,kt,Ze),Hn=tI(ve,a,Qt);Fn(s,ve,Ut),Qt?(!ce||!ce.readOnly)&&(Ge._f.onBlur&&Ge._f.onBlur(Q),c&&c(0)):Ge._f.onChange&&Ge._f.onChange(Q);const It=N(ve,Ut,Qt),xn=!Ns(It)||Hn;if(!Qt&&y.state.next({name:ve,type:Q.type,values:ii(s)}),hn)return(h.isValid||p.isValid)&&(e.mode==="onBlur"?Qt&&C():Qt||C()),xn&&y.state.next({name:ve,...Hn?{}:It});if(!Qt&&Hn&&y.state.next({...n}),e.resolver){const{errors:Rn}=await j([ve]);if(Be(Ut),qe){const sr=nI(n.errors,r,ve),Br=nI(Rn,r,sr.name||ve);Ft=Br.error,ve=Br.name,We=Ns(Rn)}}else E([ve],!0),Ft=(await iI(Ge,a.disabled,s,S,e.shouldUseNativeValidation))[ve],E([ve]),Be(Ut),qe&&(Ft?We=!1:(h.isValid||p.isValid)&&(We=await $(r,!0)));qe&&(Ge._f.deps&&(!Array.isArray(Ge._f.deps)||Ge._f.deps.length>0)&&te(Ge._f.deps),O(ve,We,Ft,It))}},q=(Q,ce)=>{if(et(n.errors,ce)&&Q.focus)return Q.focus(),1},te=async(Q,ce={})=>{let ve,qe;const Ge=Gv(Q);if(e.resolver){const Be=await V(Er(Q)?Q:Ge);ve=Ns(Be),qe=Q?!Ge.some(Ze=>et(Be,Ze)):ve}else Q?(qe=(await Promise.all(Ge.map(async Be=>{const Ze=et(r,Be);return await $(Ze&&Ze._f?{[Be]:Ze}:Ze)}))).every(Boolean),!(!qe&&!n.isValid)&&C()):qe=ve=await $(r);return y.state.next({...!ho(Q)||(h.isValid||p.isValid)&&ve!==n.isValid?{}:{name:Q},...e.resolver||!Q?{isValid:ve}:{},errors:n.errors}),ce.shouldFocus&&!qe&&Yv(r,q,Q?Ge:a.mount),qe},ae=(Q,ce)=>{let ve={...o.mount?s:i};return ce&&(ve=c2(ce.dirtyFields?n.dirtyFields:n.touchedFields,ve)),Er(Q)?ve:ho(Q)?et(ve,Q):Q.map(qe=>et(ve,qe))},B=(Q,ce)=>({invalid:!!et((ce||n).errors,Q),isDirty:!!et((ce||n).dirtyFields,Q),error:et((ce||n).errors,Q),isValidating:!!et(n.validatingFields,Q),isTouched:!!et((ce||n).touchedFields,Q)}),de=Q=>{Q&&Gv(Q).forEach(ce=>qr(n.errors,ce)),y.state.next({errors:Q?n.errors:{}})},se=(Q,ce,ve)=>{const qe=(et(r,Q,{_f:{}})._f||{}).ref,Ge=et(n.errors,Q)||{},{ref:Be,message:Ze,type:kt,...Ft}=Ge;Fn(n.errors,Q,{...Ft,...ce,ref:qe}),y.state.next({name:Q,errors:n.errors,isValid:!1}),ve&&ve.shouldFocus&&qe&&qe.focus&&qe.focus()},me=(Q,ce)=>Sa(Q)?y.state.subscribe({next:ve=>"values"in ve&&Q(Y(void 0,ce),ve)}):Y(Q,ce,!0),Te=Q=>y.state.subscribe({next:ce=>{EY(Q.name,ce.name,Q.exact)&&TY(ce,Q.formState||h,dn,Q.reRenderRoot)&&Q.callback({values:{...s},...n,...ce,defaultValues:i})}}).unsubscribe,Re=Q=>(o.mount=!0,p={...p,...Q.formState},Te({...Q,formState:p})),ie=(Q,ce={})=>{for(const ve of Q?Gv(Q):a.mount)a.mount.delete(ve),a.array.delete(ve),ce.keepValue||(qr(r,ve),qr(s,ve)),!ce.keepError&&qr(n.errors,ve),!ce.keepDirty&&qr(n.dirtyFields,ve),!ce.keepTouched&&qr(n.touchedFields,ve),!ce.keepIsValidating&&qr(n.validatingFields,ve),!e.shouldUnregister&&!ce.keepDefaultValue&&qr(i,ve);y.state.next({values:ii(s)}),y.state.next({...n,...ce.keepDirty?{isDirty:J()}:{}}),!ce.keepIsValid&&C()},be=({disabled:Q,name:ce})=>{(uo(Q)&&o.mount||Q||a.disabled.has(ce))&&(Q?a.disabled.add(ce):a.disabled.delete(ce))},Le=(Q,ce={})=>{let ve=et(r,Q);const qe=uo(ce.disabled)||uo(e.disabled);return Fn(r,Q,{...ve||{},_f:{...ve&&ve._f?ve._f:{ref:{name:Q}},name:Q,mount:!0,...ce}}),a.mount.add(Q),ve?be({disabled:uo(ce.disabled)?ce.disabled:e.disabled,name:Q}):I(Q,!0,ce.value),{...qe?{disabled:ce.disabled||e.disabled}:{},...e.progressive?{required:!!ce.required,min:_v(ce.min),max:_v(ce.max),minLength:_v(ce.minLength),maxLength:_v(ce.maxLength),pattern:_v(ce.pattern)}:{},name:Q,onChange:Se,onBlur:Se,ref:Ge=>{if(Ge){Le(Q,ce),ve=et(r,Q);const Be=Er(Ge.value)&&Ge.querySelectorAll&&Ge.querySelectorAll("input,select,textarea")[0]||Ge,Ze=yY(Be),kt=ve._f.refs||[];if(Ze?kt.find(Ft=>Ft===Be):Be===ve._f.ref)return;Fn(r,Q,{_f:{...ve._f,...Ze?{refs:[...kt.filter(ak),Be,...Array.isArray(et(i,Q))?[{}]:[]],ref:{type:Be.type,name:Q}}:{ref:Be}}}),I(Q,!1,void 0,Be)}else ve=et(r,Q,{}),ve._f&&(ve._f.mount=!1),(e.shouldUnregister||ce.shouldUnregister)&&!(s2(a.array,Q)&&o.action)&&a.unMount.add(Q)}}},$e=()=>e.shouldFocusError&&Yv(r,q,a.mount),Je=Q=>{uo(Q)&&(y.state.next({disabled:Q}),Yv(r,(ce,ve)=>{const qe=et(r,ve);qe&&(ce.disabled=qe._f.disabled||Q,Array.isArray(qe._f.refs)&&qe._f.refs.forEach(Ge=>{Ge.disabled=qe._f.disabled||Q}))},0,!1))},pt=(Q,ce)=>async ve=>{let qe;ve&&(ve.preventDefault&&ve.preventDefault(),ve.persist&&ve.persist());let Ge=ii(s);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:Be,values:Ze}=await j();n.errors=Be,Ge=ii(Ze)}else await $(r);if(a.disabled.size)for(const Be of a.disabled)qr(Ge,Be);if(qr(n.errors,"root"),Ns(n.errors)){y.state.next({errors:{}});try{await Q(Ge,ve)}catch(Be){qe=Be}}else ce&&await ce({...n.errors},ve),$e(),setTimeout($e);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ns(n.errors)&&!qe,submitCount:n.submitCount+1,errors:n.errors}),qe)throw qe},Et=(Q,ce={})=>{et(r,Q)&&(Er(ce.defaultValue)?le(Q,ii(et(i,Q))):(le(Q,ce.defaultValue),Fn(i,Q,ii(ce.defaultValue))),ce.keepTouched||qr(n.touchedFields,Q),ce.keepDirty||(qr(n.dirtyFields,Q),n.isDirty=ce.defaultValue?J(Q,ii(et(i,Q))):J()),ce.keepError||(qr(n.errors,Q),h.isValid&&C()),y.state.next({...n}))},wt=(Q,ce={})=>{const ve=Q?ii(Q):i,qe=ii(ve),Ge=Ns(Q),Be=Ge?i:qe;if(ce.keepDefaultValues||(i=ve),!ce.keepValues){if(ce.keepDirtyValues){const Ze=new Set([...a.mount,...Object.keys(Dp(i,s))]);for(const kt of Array.from(Ze))et(n.dirtyFields,kt)?Fn(Be,kt,et(s,kt)):le(kt,et(Be,kt))}else{if(KE&&Er(Q))for(const Ze of a.mount){const kt=et(r,Ze);if(kt&&kt._f){const Ft=Array.isArray(kt._f.refs)?kt._f.refs[0]:kt._f.ref;if(Gx(Ft)){const We=Ft.closest("form");if(We){We.reset();break}}}}if(ce.keepFieldsRef)for(const Ze of a.mount)le(Ze,et(Be,Ze));else r={}}s=e.shouldUnregister?ce.keepDefaultValues?ii(i):{}:ii(Be),y.array.next({values:{...Be}}),y.state.next({values:{...Be}})}a={mount:ce.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!ce.keepIsValid||!!ce.keepDirtyValues,o.watch=!!e.shouldUnregister,y.state.next({submitCount:ce.keepSubmitCount?n.submitCount:0,isDirty:Ge?!1:ce.keepDirty?n.isDirty:!!(ce.keepDefaultValues&&!wc(Q,i)),isSubmitted:ce.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ge?{}:ce.keepDirtyValues?ce.keepDefaultValues&&s?Dp(i,s):n.dirtyFields:ce.keepDefaultValues&&Q?Dp(i,Q):ce.keepDirty?n.dirtyFields:{},touchedFields:ce.keepTouched?n.touchedFields:{},errors:ce.keepErrors?n.errors:{},isSubmitSuccessful:ce.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},_n=(Q,ce)=>wt(Sa(Q)?Q(s):Q,ce),er=(Q,ce={})=>{const ve=et(r,Q),qe=ve&&ve._f;if(qe){const Ge=qe.refs?qe.refs[0]:qe.ref;Ge.focus&&(Ge.focus(),ce.shouldSelect&&Sa(Ge.select)&&Ge.select())}},dn=Q=>{n={...n,...Q}},Nn={control:{register:Le,unregister:ie,getFieldState:B,handleSubmit:pt,setError:se,_subscribe:Te,_runSchema:j,_focusError:$e,_getWatch:Y,_getDirty:J,_setValid:C,_setFieldArray:_,_setDisabledField:be,_setErrors:M,_getFieldArray:pe,_reset:wt,_resetDefaultValues:()=>Sa(e.defaultValues)&&e.defaultValues().then(Q=>{_n(Q,e.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:W,_disableForm:Je,_subjects:y,_proxyFormState:h,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(Q){o=Q},get _defaultValues(){return i},get _names(){return a},set _names(Q){a=Q},get _formState(){return n},get _options(){return e},set _options(Q){e={...e,...Q}}},subscribe:Re,trigger:te,register:Le,handleSubmit:pt,watch:me,setValue:le,getValues:ae,reset:_n,resetField:Et,clearErrors:de,unregister:ie,setError:se,setFocus:er,getFieldState:B};return{...Nn,formControl:Nn}}function eS(t={}){const e=Pe.useRef(void 0),n=Pe.useRef(void 0),[r,i]=Pe.useState({isDirty:!1,isValidating:!1,isLoading:Sa(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Sa(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Sa(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=IY(t);e.current={...a,formState:r}}const s=e.current.control;return s._options=t,JE(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),Pe.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Pe.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),Pe.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),Pe.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),Pe.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),Pe.useEffect(()=>{t.values&&!wc(t.values,n.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[s,t.values]),Pe.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=o2(r,s),e.current}var En;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(En||(En={}));var sI;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(sI||(sI={}));const gt=En.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Pu=t=>{switch(typeof t){case"undefined":return gt.undefined;case"string":return gt.string;case"number":return Number.isNaN(t)?gt.nan:gt.number;case"boolean":return gt.boolean;case"function":return gt.function;case"bigint":return gt.bigint;case"symbol":return gt.symbol;case"object":return Array.isArray(t)?gt.array:t===null?gt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?gt.promise:typeof Map<"u"&&t instanceof Map?gt.map:typeof Set<"u"&&t instanceof Set?gt.set:typeof Date<"u"&&t instanceof Date?gt.date:gt.object;default:return gt.unknown}},Qe=En.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Rc extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(n(o))):a[d]=a[d]||{_errors:[]},a=a[d],c++}}};return i(this),r}static assert(e){if(!(e instanceof Rc))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,En.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];n[s]=n[s]||[],n[s].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Rc.create=t=>new Rc(t);const DT=(t,e)=>{let n;switch(t.code){case Qe.invalid_type:t.received===gt.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Qe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,En.jsonStringifyReplacer)}`;break;case Qe.unrecognized_keys:n=`Unrecognized key(s) in object: ${En.joinValues(t.keys,", ")}`;break;case Qe.invalid_union:n="Invalid input";break;case Qe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${En.joinValues(t.options)}`;break;case Qe.invalid_enum_value:n=`Invalid enum value. Expected ${En.joinValues(t.options)}, received '${t.received}'`;break;case Qe.invalid_arguments:n="Invalid function arguments";break;case Qe.invalid_return_type:n="Invalid function return type";break;case Qe.invalid_date:n="Invalid date";break;case Qe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:En.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Qe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Qe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Qe.custom:n="Invalid input";break;case Qe.invalid_intersection_types:n="Intersection results could not be merged";break;case Qe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Qe.not_finite:n="Number must be finite";break;default:n=e.defaultError,En.assertNever(t)}return{message:n}};let NY=DT;function MY(){return NY}const OY=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const c=r.filter(d=>!!d).slice().reverse();for(const d of c)a=d(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}};function at(t,e){const n=MY(),r=OY({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===DT?void 0:DT].filter(i=>!!i)});t.common.issues.push(r)}class vo{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Bt;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return vo.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Bt;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Bt=Object.freeze({status:"aborted"}),Vv=t=>({status:"dirty",value:t}),Qo=t=>({status:"valid",value:t}),oI=t=>t.status==="aborted",aI=t=>t.status==="dirty",km=t=>t.status==="valid",Qx=t=>typeof Promise<"u"&&t instanceof Promise;var xt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(xt||(xt={}));class ed{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const lI=(t,e)=>{if(km(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Rc(t.common.issues);return this._error=n,this._error}}};function on(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??n??a.defaultError}},description:i}}class Sn{get description(){return this._def.description}_getType(e){return Pu(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Pu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new vo,ctx:{common:e.parent.common,data:e.data,parsedType:Pu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Qx(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pu(e)},i=this._parseSync({data:e,path:r.path,parent:r});return lI(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pu(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return km(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(i=(r=s==null?void 0:s.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>km(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pu(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(Qx(i)?i:Promise.resolve(i));return lI(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:Qe.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Em({schema:this,typeName:zt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ku.create(this,this._def)}nullable(){return _m.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return xl.create(this)}promise(){return ew.create(this,this._def)}or(e){return Xx.create([this,e],this._def)}and(e){return Zx.create(this,e,this._def)}transform(e){return new Em({...on(this._def),schema:this,typeName:zt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new FT({...on(this._def),innerType:this,defaultValue:n,typeName:zt.ZodDefault})}brand(){return new rQ({typeName:zt.ZodBranded,type:this,...on(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new UT({...on(this._def),innerType:this,catchValue:n,typeName:zt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return e_.create(this,e)}readonly(){return VT.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const DY=/^c[^\s-]{8,}$/i,LY=/^[0-9a-z]+$/,jY=/^[0-9A-HJKMNP-TV-Z]{26}$/i,FY=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,UY=/^[a-z0-9_-]{21}$/i,VY=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,BY=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,zY=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,$Y="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let lk;const WY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,HY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,qY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,KY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,GY=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,YY=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,m2="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",QY=new RegExp(`^${m2}$`);function g2(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function JY(t){return new RegExp(`^${g2(t)}$`)}function XY(t){let e=`${m2}T${g2(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function ZY(t,e){return!!((e==="v4"||!e)&&WY.test(t)||(e==="v6"||!e)&&qY.test(t))}function eQ(t,e){if(!VY.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function tQ(t,e){return!!((e==="v4"||!e)&&HY.test(t)||(e==="v6"||!e)&&KY.test(t))}class wf extends Sn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==gt.string){const s=this._getOrReturnCtx(e);return at(s,{code:Qe.invalid_type,expected:gt.string,received:s.parsedType}),Bt}const r=new vo;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),at(i,{code:Qe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),at(i,{code:Qe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?at(i,{code:Qe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&at(i,{code:Qe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")zY.test(e.data)||(i=this._getOrReturnCtx(e,i),at(i,{validation:"email",code:Qe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")lk||(lk=new RegExp($Y,"u")),lk.test(e.data)||(i=this._getOrReturnCtx(e,i),at(i,{validation:"emoji",code:Qe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")FY.test(e.data)||(i=this._getOrReturnCtx(e,i),at(i,{validation:"uuid",code:Qe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")UY.test(e.data)||(i=this._getOrReturnCtx(e,i),at(i,{validation:"nanoid",code:Qe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")DY.test(e.data)||(i=this._getOrReturnCtx(e,i),at(i,{validation:"cuid",code:Qe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")LY.test(e.data)||(i=this._getOrReturnCtx(e,i),at(i,{validation:"cuid2",code:Qe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")jY.test(e.data)||(i=this._getOrReturnCtx(e,i),at(i,{validation:"ulid",code:Qe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),at(i,{validation:"url",code:Qe.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),at(i,{validation:"regex",code:Qe.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),at(i,{code:Qe.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),at(i,{code:Qe.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),at(i,{code:Qe.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?XY(s).test(e.data)||(i=this._getOrReturnCtx(e,i),at(i,{code:Qe.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?QY.test(e.data)||(i=this._getOrReturnCtx(e,i),at(i,{code:Qe.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?JY(s).test(e.data)||(i=this._getOrReturnCtx(e,i),at(i,{code:Qe.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?BY.test(e.data)||(i=this._getOrReturnCtx(e,i),at(i,{validation:"duration",code:Qe.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?ZY(e.data,s.version)||(i=this._getOrReturnCtx(e,i),at(i,{validation:"ip",code:Qe.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?eQ(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),at(i,{validation:"jwt",code:Qe.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?tQ(e.data,s.version)||(i=this._getOrReturnCtx(e,i),at(i,{validation:"cidr",code:Qe.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?GY.test(e.data)||(i=this._getOrReturnCtx(e,i),at(i,{validation:"base64",code:Qe.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?YY.test(e.data)||(i=this._getOrReturnCtx(e,i),at(i,{validation:"base64url",code:Qe.invalid_string,message:s.message}),r.dirty()):En.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Qe.invalid_string,...xt.errToObj(r)})}_addCheck(e){return new wf({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...xt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...xt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...xt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...xt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...xt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...xt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...xt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...xt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...xt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...xt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...xt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...xt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...xt.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...xt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...xt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...xt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...xt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...xt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...xt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...xt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...xt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...xt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...xt.errToObj(n)})}nonempty(e){return this.min(1,xt.errToObj(e))}trim(){return new wf({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new wf({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new wf({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}wf.create=t=>new wf({checks:[],typeName:zt.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...on(t)});function nQ(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return s%o/10**i}class uy extends Sn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==gt.number){const s=this._getOrReturnCtx(e);return at(s,{code:Qe.invalid_type,expected:gt.number,received:s.parsedType}),Bt}let r;const i=new vo;for(const s of this._def.checks)s.kind==="int"?En.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),at(r,{code:Qe.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),at(r,{code:Qe.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),at(r,{code:Qe.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?nQ(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),at(r,{code:Qe.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),at(r,{code:Qe.not_finite,message:s.message}),i.dirty()):En.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,xt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,xt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,xt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,xt.toString(n))}setLimit(e,n,r,i){return new uy({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:xt.toString(i)}]})}_addCheck(e){return new uy({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:xt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:xt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:xt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:xt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:xt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:xt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:xt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:xt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:xt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&En.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}uy.create=t=>new uy({checks:[],typeName:zt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...on(t)});class dy extends Sn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==gt.bigint)return this._getInvalidInput(e);let r;const i=new vo;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),at(r,{code:Qe.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),at(r,{code:Qe.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),at(r,{code:Qe.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):En.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return at(n,{code:Qe.invalid_type,expected:gt.bigint,received:n.parsedType}),Bt}gte(e,n){return this.setLimit("min",e,!0,xt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,xt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,xt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,xt.toString(n))}setLimit(e,n,r,i){return new dy({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:xt.toString(i)}]})}_addCheck(e){return new dy({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:xt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:xt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:xt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:xt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:xt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}dy.create=t=>new dy({checks:[],typeName:zt.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...on(t)});class LT extends Sn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==gt.boolean){const r=this._getOrReturnCtx(e);return at(r,{code:Qe.invalid_type,expected:gt.boolean,received:r.parsedType}),Bt}return Qo(e.data)}}LT.create=t=>new LT({typeName:zt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...on(t)});class Jx extends Sn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==gt.date){const s=this._getOrReturnCtx(e);return at(s,{code:Qe.invalid_type,expected:gt.date,received:s.parsedType}),Bt}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return at(s,{code:Qe.invalid_date}),Bt}const r=new vo;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),at(i,{code:Qe.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),at(i,{code:Qe.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):En.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Jx({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:xt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:xt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Jx.create=t=>new Jx({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:zt.ZodDate,...on(t)});class cI extends Sn{_parse(e){if(this._getType(e)!==gt.symbol){const r=this._getOrReturnCtx(e);return at(r,{code:Qe.invalid_type,expected:gt.symbol,received:r.parsedType}),Bt}return Qo(e.data)}}cI.create=t=>new cI({typeName:zt.ZodSymbol,...on(t)});class uI extends Sn{_parse(e){if(this._getType(e)!==gt.undefined){const r=this._getOrReturnCtx(e);return at(r,{code:Qe.invalid_type,expected:gt.undefined,received:r.parsedType}),Bt}return Qo(e.data)}}uI.create=t=>new uI({typeName:zt.ZodUndefined,...on(t)});class dI extends Sn{_parse(e){if(this._getType(e)!==gt.null){const r=this._getOrReturnCtx(e);return at(r,{code:Qe.invalid_type,expected:gt.null,received:r.parsedType}),Bt}return Qo(e.data)}}dI.create=t=>new dI({typeName:zt.ZodNull,...on(t)});class fI extends Sn{constructor(){super(...arguments),this._any=!0}_parse(e){return Qo(e.data)}}fI.create=t=>new fI({typeName:zt.ZodAny,...on(t)});class hI extends Sn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Qo(e.data)}}hI.create=t=>new hI({typeName:zt.ZodUnknown,...on(t)});class td extends Sn{_parse(e){const n=this._getOrReturnCtx(e);return at(n,{code:Qe.invalid_type,expected:gt.never,received:n.parsedType}),Bt}}td.create=t=>new td({typeName:zt.ZodNever,...on(t)});class pI extends Sn{_parse(e){if(this._getType(e)!==gt.undefined){const r=this._getOrReturnCtx(e);return at(r,{code:Qe.invalid_type,expected:gt.void,received:r.parsedType}),Bt}return Qo(e.data)}}pI.create=t=>new pI({typeName:zt.ZodVoid,...on(t)});class xl extends Sn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==gt.array)return at(n,{code:Qe.invalid_type,expected:gt.array,received:n.parsedType}),Bt;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(at(n,{code:o?Qe.too_big:Qe.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(at(n,{code:Qe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(at(n,{code:Qe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new ed(n,o,n.path,a)))).then(o=>vo.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new ed(n,o,n.path,a)));return vo.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new xl({...this._def,minLength:{value:e,message:xt.toString(n)}})}max(e,n){return new xl({...this._def,maxLength:{value:e,message:xt.toString(n)}})}length(e,n){return new xl({...this._def,exactLength:{value:e,message:xt.toString(n)}})}nonempty(e){return this.min(1,e)}}xl.create=(t,e)=>new xl({type:t,minLength:null,maxLength:null,exactLength:null,typeName:zt.ZodArray,...on(e)});function Lp(t){if(t instanceof Kr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ku.create(Lp(r))}return new Kr({...t._def,shape:()=>e})}else return t instanceof xl?new xl({...t._def,type:Lp(t.element)}):t instanceof Ku?Ku.create(Lp(t.unwrap())):t instanceof _m?_m.create(Lp(t.unwrap())):t instanceof zf?zf.create(t.items.map(e=>Lp(e))):t}class Kr extends Sn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=En.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==gt.object){const d=this._getOrReturnCtx(e);return at(d,{code:Qe.invalid_type,expected:gt.object,received:d.parsedType}),Bt}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof td&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||a.push(d);const c=[];for(const d of o){const h=s[d],p=i.data[d];c.push({key:{status:"valid",value:d},value:h._parse(new ed(i,p,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof td){const d=this._def.unknownKeys;if(d==="passthrough")for(const h of a)c.push({key:{status:"valid",value:h},value:{status:"valid",value:i.data[h]}});else if(d==="strict")a.length>0&&(at(i,{code:Qe.unrecognized_keys,keys:a}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const h of a){const p=i.data[h];c.push({key:{status:"valid",value:h},value:d._parse(new ed(i,p,i.path,h)),alwaysSet:h in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const h of c){const p=await h.key,y=await h.value;d.push({key:p,value:y,alwaysSet:h.alwaysSet})}return d}).then(d=>vo.mergeObjectSync(r,d)):vo.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return xt.errToObj,new Kr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,o;const i=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:xt.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Kr({...this._def,unknownKeys:"strip"})}passthrough(){return new Kr({...this._def,unknownKeys:"passthrough"})}extend(e){return new Kr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Kr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:zt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Kr({...this._def,catchall:e})}pick(e){const n={};for(const r of En.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Kr({...this._def,shape:()=>n})}omit(e){const n={};for(const r of En.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Kr({...this._def,shape:()=>n})}deepPartial(){return Lp(this)}partial(e){const n={};for(const r of En.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new Kr({...this._def,shape:()=>n})}required(e){const n={};for(const r of En.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Ku;)s=s._def.innerType;n[r]=s}return new Kr({...this._def,shape:()=>n})}keyof(){return v2(En.objectKeys(this.shape))}}Kr.create=(t,e)=>new Kr({shape:()=>t,unknownKeys:"strip",catchall:td.create(),typeName:zt.ZodObject,...on(e)});Kr.strictCreate=(t,e)=>new Kr({shape:()=>t,unknownKeys:"strict",catchall:td.create(),typeName:zt.ZodObject,...on(e)});Kr.lazycreate=(t,e)=>new Kr({shape:t,unknownKeys:"strip",catchall:td.create(),typeName:zt.ZodObject,...on(e)});class Xx extends Sn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Rc(a.ctx.common.issues));return at(n,{code:Qe.invalid_union,unionErrors:o}),Bt}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of r){const d={...n,common:{...n.common,issues:[]},parent:null},h=c._parseSync({data:n.data,path:n.path,parent:d});if(h.status==="valid")return h;h.status==="dirty"&&!s&&(s={result:h,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new Rc(c));return at(n,{code:Qe.invalid_union,unionErrors:a}),Bt}}get options(){return this._def.options}}Xx.create=(t,e)=>new Xx({options:t,typeName:zt.ZodUnion,...on(e)});function jT(t,e){const n=Pu(t),r=Pu(e);if(t===e)return{valid:!0,data:t};if(n===gt.object&&r===gt.object){const i=En.objectKeys(e),s=En.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const c=jT(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===gt.array&&r===gt.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],c=jT(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===gt.date&&r===gt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Zx extends Sn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(oI(s)||oI(o))return Bt;const a=jT(s.value,o.value);return a.valid?((aI(s)||aI(o))&&n.dirty(),{status:n.value,value:a.data}):(at(r,{code:Qe.invalid_intersection_types}),Bt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Zx.create=(t,e,n)=>new Zx({left:t,right:e,typeName:zt.ZodIntersection,...on(n)});class zf extends Sn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==gt.array)return at(r,{code:Qe.invalid_type,expected:gt.array,received:r.parsedType}),Bt;if(r.data.length<this._def.items.length)return at(r,{code:Qe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Bt;!this._def.rest&&r.data.length>this._def.items.length&&(at(r,{code:Qe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new ed(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>vo.mergeArray(n,o)):vo.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new zf({...this._def,rest:e})}}zf.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new zf({items:t,typeName:zt.ZodTuple,rest:null,...on(e)})};class mI extends Sn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==gt.map)return at(r,{code:Qe.invalid_type,expected:gt.map,received:r.parsedType}),Bt;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,c],d)=>({key:i._parse(new ed(r,a,r.path,[d,"key"])),value:s._parse(new ed(r,c,r.path,[d,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,h=await c.value;if(d.status==="aborted"||h.status==="aborted")return Bt;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),a.set(d.value,h.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const d=c.key,h=c.value;if(d.status==="aborted"||h.status==="aborted")return Bt;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),a.set(d.value,h.value)}return{status:n.value,value:a}}}}mI.create=(t,e,n)=>new mI({valueType:e,keyType:t,typeName:zt.ZodMap,...on(n)});class fy extends Sn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==gt.set)return at(r,{code:Qe.invalid_type,expected:gt.set,received:r.parsedType}),Bt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(at(r,{code:Qe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(at(r,{code:Qe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(c){const d=new Set;for(const h of c){if(h.status==="aborted")return Bt;h.status==="dirty"&&n.dirty(),d.add(h.value)}return{status:n.value,value:d}}const a=[...r.data.values()].map((c,d)=>s._parse(new ed(r,c,r.path,d)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new fy({...this._def,minSize:{value:e,message:xt.toString(n)}})}max(e,n){return new fy({...this._def,maxSize:{value:e,message:xt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}fy.create=(t,e)=>new fy({valueType:t,minSize:null,maxSize:null,typeName:zt.ZodSet,...on(e)});class gI extends Sn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}gI.create=(t,e)=>new gI({getter:t,typeName:zt.ZodLazy,...on(e)});class vI extends Sn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return at(n,{received:n.data,code:Qe.invalid_literal,expected:this._def.value}),Bt}return{status:"valid",value:e.data}}get value(){return this._def.value}}vI.create=(t,e)=>new vI({value:t,typeName:zt.ZodLiteral,...on(e)});function v2(t,e){return new Tm({values:t,typeName:zt.ZodEnum,...on(e)})}class Tm extends Sn{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return at(n,{expected:En.joinValues(r),received:n.parsedType,code:Qe.invalid_type}),Bt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return at(n,{received:n.data,code:Qe.invalid_enum_value,options:r}),Bt}return Qo(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Tm.create(e,{...this._def,...n})}exclude(e,n=this._def){return Tm.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Tm.create=v2;class yI extends Sn{_parse(e){const n=En.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==gt.string&&r.parsedType!==gt.number){const i=En.objectValues(n);return at(r,{expected:En.joinValues(i),received:r.parsedType,code:Qe.invalid_type}),Bt}if(this._cache||(this._cache=new Set(En.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=En.objectValues(n);return at(r,{received:r.data,code:Qe.invalid_enum_value,options:i}),Bt}return Qo(e.data)}get enum(){return this._def.values}}yI.create=(t,e)=>new yI({values:t,typeName:zt.ZodNativeEnum,...on(e)});class ew extends Sn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==gt.promise&&n.common.async===!1)return at(n,{code:Qe.invalid_type,expected:gt.promise,received:n.parsedType}),Bt;const r=n.parsedType===gt.promise?n.data:Promise.resolve(n.data);return Qo(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ew.create=(t,e)=>new ew({type:t,typeName:zt.ZodPromise,...on(e)});class Em extends Sn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===zt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{at(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Bt;const c=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return c.status==="aborted"?Bt:c.status==="dirty"||n.value==="dirty"?Vv(c.value):c});{if(n.value==="aborted")return Bt;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Bt:a.status==="dirty"||n.value==="dirty"?Vv(a.value):a}}if(i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Bt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Bt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!km(o))return Bt;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>km(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):Bt);En.assertNever(i)}}Em.create=(t,e,n)=>new Em({schema:t,typeName:zt.ZodEffects,effect:e,...on(n)});Em.createWithPreprocess=(t,e,n)=>new Em({schema:e,effect:{type:"preprocess",transform:t},typeName:zt.ZodEffects,...on(n)});class Ku extends Sn{_parse(e){return this._getType(e)===gt.undefined?Qo(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ku.create=(t,e)=>new Ku({innerType:t,typeName:zt.ZodOptional,...on(e)});class _m extends Sn{_parse(e){return this._getType(e)===gt.null?Qo(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_m.create=(t,e)=>new _m({innerType:t,typeName:zt.ZodNullable,...on(e)});class FT extends Sn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===gt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}FT.create=(t,e)=>new FT({innerType:t,typeName:zt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...on(e)});class UT extends Sn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Qx(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Rc(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Rc(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}UT.create=(t,e)=>new UT({innerType:t,typeName:zt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...on(e)});class bI extends Sn{_parse(e){if(this._getType(e)!==gt.nan){const r=this._getOrReturnCtx(e);return at(r,{code:Qe.invalid_type,expected:gt.nan,received:r.parsedType}),Bt}return{status:"valid",value:e.data}}}bI.create=t=>new bI({typeName:zt.ZodNaN,...on(t)});class rQ extends Sn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class e_ extends Sn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Bt:s.status==="dirty"?(n.dirty(),Vv(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Bt:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new e_({in:e,out:n,typeName:zt.ZodPipeline})}}class VT extends Sn{_parse(e){const n=this._def.innerType._parse(e),r=i=>(km(i)&&(i.value=Object.freeze(i.value)),i);return Qx(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}VT.create=(t,e)=>new VT({innerType:t,typeName:zt.ZodReadonly,...on(e)});var zt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(zt||(zt={}));const y2=LT.create;td.create;xl.create;const b2=Kr.create;Xx.create;Zx.create;zf.create;const iQ=Tm.create;ew.create;Ku.create;_m.create;const xI=(t,e,n)=>{if(t&&"reportValidity"in t){const r=et(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},x2=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?xI(r.ref,n,t):r.refs&&r.refs.forEach(i=>xI(i,n,t))}},sQ=(t,e)=>{e.shouldUseNativeValidation&&x2(t,e);const n={};for(const r in t){const i=et(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(oQ(e.names||Object.keys(t),r)){const o=Object.assign({},et(n,r));Fn(o,"root",s),Fn(n,r,o)}else Fn(n,r,s)}return n},oQ=(t,e)=>t.some(n=>n.startsWith(e+"."));var aQ=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(h){return h.errors.forEach(function(p){return t.push(p)})}),e){var c=n[o].types,d=c&&c[r.code];n[o]=l2(o,e,n,i,d?[].concat(d,r.message):r.message)}t.shift()}return n},w2=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,a){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(d){return s.shouldUseNativeValidation&&x2({},s),{errors:{},values:n.raw?r:d}})}catch(d){return a(d)}return c&&c.then?c.then(void 0,a):c}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:sQ(aQ(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}};function wI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function lQ(...t){return e=>{let n=!1;const r=t.map(i=>{const s=wI(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():wI(t[i],null)}}}}function cQ(t){const e=uQ(t),n=v.forwardRef((r,i)=>{const{children:s,...o}=r,a=v.Children.toArray(s),c=a.find(fQ);if(c){const d=c.props.children,h=a.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return b.jsx(e,{...o,ref:i,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function uQ(t){const e=v.forwardRef((n,r)=>{const{children:i,...s}=n;if(v.isValidElement(i)){const o=pQ(i),a=hQ(s,i.props);return i.type!==v.Fragment&&(a.ref=r?lQ(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var dQ=Symbol("radix.slottable");function fQ(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===dQ}function hQ(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function pQ(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var mQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],gQ=mQ.reduce((t,e)=>{const n=cQ(`Primitive.${e}`),r=v.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),vQ="Label",S2=v.forwardRef((t,e)=>b.jsx(gQ.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));S2.displayName=vQ;var yQ=S2;function t_({className:t,...e}){return b.jsx(yQ,{"data-slot":"label",className:Vt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}const C2=hY,k2=v.createContext({}),BT=({...t})=>b.jsx(k2.Provider,{value:{name:t.name},children:b.jsx(vY,{...t})}),tS=()=>{const t=v.useContext(k2),e=v.useContext(T2),{getFieldState:n,formState:r}=Zw(),i=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:s}=e;return{id:s,name:t.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...i}},T2=v.createContext({}),mf=v.forwardRef(({className:t,...e},n)=>{const r=v.useId();return b.jsx(T2.Provider,{value:{id:r},children:b.jsx("div",{ref:n,className:t,...e})})});mf.displayName="FormItem";const hx=v.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:i}=tS();return b.jsx(t_,{ref:n,className:Vt(r&&"text-destructive",t),htmlFor:i,...e})});hx.displayName="FormLabel";const gf=v.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:i,formMessageId:s}=tS();return b.jsx(DL,{ref:e,id:r,"aria-describedby":n?`${i} ${s}`:`${i}`,"aria-invalid":!!n,...t})});gf.displayName="FormControl";const bQ=v.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=tS();return b.jsx("p",{ref:n,id:r,className:Vt("text-sm text-muted-foreground",t),...e})});bQ.displayName="FormDescription";const xQ=v.forwardRef(({className:t,children:e,...n},r)=>{const{error:i,formMessageId:s}=tS(),o=i?String(i==null?void 0:i.message):e;return o?b.jsx("p",{ref:r,id:s,className:Vt("text-sm font-medium text-destructive",t),...n,children:o}):null});xQ.displayName="FormMessage";function SI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function E2(...t){return e=>{let n=!1;const r=t.map(i=>{const s=SI(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():SI(t[i],null)}}}}function n_(...t){return v.useCallback(E2(...t),t)}function wQ(t){const e=SQ(t),n=v.forwardRef((r,i)=>{const{children:s,...o}=r,a=v.Children.toArray(s),c=a.find(kQ);if(c){const d=c.props.children,h=a.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return b.jsx(e,{...o,ref:i,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function SQ(t){const e=v.forwardRef((n,r)=>{const{children:i,...s}=n;if(v.isValidElement(i)){const o=EQ(i),a=TQ(s,i.props);return i.type!==v.Fragment&&(a.ref=r?E2(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var CQ=Symbol("radix.slottable");function kQ(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===CQ}function TQ(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function EQ(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var _Q=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],nS=_Q.reduce((t,e)=>{const n=wQ(`Primitive.${e}`),r=v.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function CI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function _2(...t){return e=>{let n=!1;const r=t.map(i=>{const s=CI(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():CI(t[i],null)}}}}function kI(...t){return v.useCallback(_2(...t),t)}function TI(t){const e=RQ(t),n=v.forwardRef((r,i)=>{const{children:s,...o}=r,a=v.Children.toArray(s),c=a.find(AQ);if(c){const d=c.props.children,h=a.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return b.jsx(e,{...o,ref:i,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function RQ(t){const e=v.forwardRef((n,r)=>{const{children:i,...s}=n;if(v.isValidElement(i)){const o=NQ(i),a=IQ(s,i.props);return i.type!==v.Fragment&&(a.ref=r?_2(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var PQ=Symbol("radix.slottable");function AQ(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===PQ}function IQ(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function NQ(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function r_(t){const e=t+"CollectionProvider",[n,r]=Yo(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=C=>{const{scope:E,children:_}=C,A=Pe.useRef(null),M=Pe.useRef(new Map).current;return b.jsx(i,{scope:E,itemMap:M,collectionRef:A,children:_})};o.displayName=e;const a=t+"CollectionSlot",c=TI(a),d=Pe.forwardRef((C,E)=>{const{scope:_,children:A}=C,M=s(a,_),I=kI(E,M.collectionRef);return b.jsx(c,{ref:I,children:A})});d.displayName=a;const h=t+"CollectionItemSlot",p="data-radix-collection-item",y=TI(h),S=Pe.forwardRef((C,E)=>{const{scope:_,children:A,...M}=C,I=Pe.useRef(null),N=kI(E,I),O=s(h,_);return Pe.useEffect(()=>(O.itemMap.set(I,{ref:I,...M}),()=>void O.itemMap.delete(I))),b.jsx(y,{[p]:"",ref:N,children:A})});S.displayName=h;function k(C){const E=s(t+"CollectionConsumer",C);return Pe.useCallback(()=>{const A=E.collectionRef.current;if(!A)return[];const M=Array.from(A.querySelectorAll(`[${p}]`));return Array.from(E.itemMap.values()).sort((O,j)=>M.indexOf(O.ref.current)-M.indexOf(j.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:o,Slot:d,ItemSlot:S},k,r]}function EI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function R2(...t){return e=>{let n=!1;const r=t.map(i=>{const s=EI(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():EI(t[i],null)}}}}function MQ(...t){return v.useCallback(R2(...t),t)}function OQ(t){const e=DQ(t),n=v.forwardRef((r,i)=>{const{children:s,...o}=r,a=v.Children.toArray(s),c=a.find(jQ);if(c){const d=c.props.children,h=a.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return b.jsx(e,{...o,ref:i,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function DQ(t){const e=v.forwardRef((n,r)=>{const{children:i,...s}=n;if(v.isValidElement(i)){const o=UQ(i),a=FQ(s,i.props);return i.type!==v.Fragment&&(a.ref=r?R2(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var LQ=Symbol("radix.slottable");function jQ(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===LQ}function FQ(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function UQ(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var VQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],P2=VQ.reduce((t,e)=>{const n=OQ(`Primitive.${e}`),r=v.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),BQ=v.createContext(void 0);function rS(t){const e=v.useContext(BQ);return t||e||"ltr"}var ck="rovingFocusGroup.onEntryFocus",zQ={bubbles:!1,cancelable:!0},Zy="RovingFocusGroup",[zT,A2,$Q]=r_(Zy),[WQ,iS]=Yo(Zy,[$Q]),[HQ,qQ]=WQ(Zy),I2=v.forwardRef((t,e)=>b.jsx(zT.Provider,{scope:t.__scopeRovingFocusGroup,children:b.jsx(zT.Slot,{scope:t.__scopeRovingFocusGroup,children:b.jsx(KQ,{...t,ref:e})})}));I2.displayName=Zy;var KQ=v.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...p}=t,y=v.useRef(null),S=MQ(e,y),k=rS(s),[C,E]=Zu({prop:o,defaultProp:a??null,onChange:c,caller:Zy}),[_,A]=v.useState(!1),M=Tl(d),I=A2(n),N=v.useRef(!1),[O,j]=v.useState(0);return v.useEffect(()=>{const V=y.current;if(V)return V.addEventListener(ck,M),()=>V.removeEventListener(ck,M)},[M]),b.jsx(HQ,{scope:n,orientation:r,dir:k,loop:i,currentTabStopId:C,onItemFocus:v.useCallback(V=>E(V),[E]),onItemShiftTab:v.useCallback(()=>A(!0),[]),onFocusableItemAdd:v.useCallback(()=>j(V=>V+1),[]),onFocusableItemRemove:v.useCallback(()=>j(V=>V-1),[]),children:b.jsx(P2.div,{tabIndex:_||O===0?-1:0,"data-orientation":r,...p,ref:S,style:{outline:"none",...t.style},onMouseDown:ft(t.onMouseDown,()=>{N.current=!0}),onFocus:ft(t.onFocus,V=>{const $=!N.current;if(V.target===V.currentTarget&&$&&!_){const W=new CustomEvent(ck,zQ);if(V.currentTarget.dispatchEvent(W),!W.defaultPrevented){const J=I().filter(le=>le.focusable),Y=J.find(le=>le.active),pe=J.find(le=>le.id===C),Ee=[Y,pe,...J].filter(Boolean).map(le=>le.ref.current);O2(Ee,h)}}N.current=!1}),onBlur:ft(t.onBlur,()=>A(!1))})})}),N2="RovingFocusGroupItem",M2=v.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,c=bl(),d=s||c,h=qQ(N2,n),p=h.currentTabStopId===d,y=A2(n),{onFocusableItemAdd:S,onFocusableItemRemove:k,currentTabStopId:C}=h;return v.useEffect(()=>{if(r)return S(),()=>k()},[r,S,k]),b.jsx(zT.ItemSlot,{scope:n,id:d,focusable:r,active:i,children:b.jsx(P2.span,{tabIndex:p?0:-1,"data-orientation":h.orientation,...a,ref:e,onMouseDown:ft(t.onMouseDown,E=>{r?h.onItemFocus(d):E.preventDefault()}),onFocus:ft(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:ft(t.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){h.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const _=QQ(E,h.orientation,h.dir);if(_!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let M=y().filter(I=>I.focusable).map(I=>I.ref.current);if(_==="last")M.reverse();else if(_==="prev"||_==="next"){_==="prev"&&M.reverse();const I=M.indexOf(E.currentTarget);M=h.loop?JQ(M,I+1):M.slice(I+1)}setTimeout(()=>O2(M))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:C!=null}):o})})});M2.displayName=N2;var GQ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function YQ(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function QQ(t,e,n){const r=YQ(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return GQ[r]}function O2(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function JQ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var D2=I2,L2=M2;function i_(t){const[e,n]=v.useState(void 0);return qi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const c=s.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,a=d.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}function s_(t){const e=v.useRef({value:t,previous:t});return v.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var o_="Radio",[XQ,j2]=Yo(o_),[ZQ,eJ]=XQ(o_),F2=v.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:i=!1,required:s,disabled:o,value:a="on",onCheck:c,form:d,...h}=t,[p,y]=v.useState(null),S=n_(e,E=>y(E)),k=v.useRef(!1),C=p?d||!!p.closest("form"):!0;return b.jsxs(ZQ,{scope:n,checked:i,disabled:o,children:[b.jsx(nS.button,{type:"button",role:"radio","aria-checked":i,"data-state":z2(i),"data-disabled":o?"":void 0,disabled:o,value:a,...h,ref:S,onClick:ft(t.onClick,E=>{i||c==null||c(),C&&(k.current=E.isPropagationStopped(),k.current||E.stopPropagation())})}),C&&b.jsx(B2,{control:p,bubbles:!k.current,name:r,value:a,checked:i,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});F2.displayName=o_;var U2="RadioIndicator",V2=v.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...i}=t,s=eJ(U2,n);return b.jsx(Al,{present:r||s.checked,children:b.jsx(nS.span,{"data-state":z2(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e})})});V2.displayName=U2;var tJ="RadioBubbleInput",B2=v.forwardRef(({__scopeRadio:t,control:e,checked:n,bubbles:r=!0,...i},s)=>{const o=v.useRef(null),a=n_(o,s),c=s_(n),d=i_(e);return v.useEffect(()=>{const h=o.current;if(!h)return;const p=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==n&&S){const k=new Event("click",{bubbles:r});S.call(h,n),h.dispatchEvent(k)}},[c,n,r]),b.jsx(nS.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});B2.displayName=tJ;function z2(t){return t?"checked":"unchecked"}var nJ=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],sS="RadioGroup",[rJ,jge]=Yo(sS,[iS,j2]),$2=iS(),W2=j2(),[iJ,sJ]=rJ(sS),H2=v.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:i,value:s,required:o=!1,disabled:a=!1,orientation:c,dir:d,loop:h=!0,onValueChange:p,...y}=t,S=$2(n),k=rS(d),[C,E]=Zu({prop:s,defaultProp:i??null,onChange:p,caller:sS});return b.jsx(iJ,{scope:n,name:r,required:o,disabled:a,value:C,onValueChange:E,children:b.jsx(D2,{asChild:!0,...S,orientation:c,dir:k,loop:h,children:b.jsx(nS.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":a?"":void 0,dir:k,...y,ref:e})})})});H2.displayName=sS;var q2="RadioGroupItem",K2=v.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...i}=t,s=sJ(q2,n),o=s.disabled||r,a=$2(n),c=W2(n),d=v.useRef(null),h=n_(e,d),p=s.value===i.value,y=v.useRef(!1);return v.useEffect(()=>{const S=C=>{nJ.includes(C.key)&&(y.current=!0)},k=()=>y.current=!1;return document.addEventListener("keydown",S),document.addEventListener("keyup",k),()=>{document.removeEventListener("keydown",S),document.removeEventListener("keyup",k)}},[]),b.jsx(L2,{asChild:!0,...a,focusable:!o,active:p,children:b.jsx(F2,{disabled:o,required:s.required,checked:p,...c,...i,name:s.name,ref:h,onCheck:()=>s.onValueChange(i.value),onKeyDown:ft(S=>{S.key==="Enter"&&S.preventDefault()}),onFocus:ft(i.onFocus,()=>{var S;y.current&&((S=d.current)==null||S.click())})})})});K2.displayName=q2;var oJ="RadioGroupIndicator",G2=v.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,i=W2(n);return b.jsx(V2,{...i,...r,ref:e})});G2.displayName=oJ;var Y2=H2,Q2=K2,aJ=G2;const J2=v.forwardRef(({className:t,...e},n)=>b.jsx(Y2,{className:Vt("grid gap-2",t),...e,ref:n}));J2.displayName=Y2.displayName;const px=v.forwardRef(({className:t,...e},n)=>b.jsx(Q2,{ref:n,className:Vt("aspect-square size-16 rounded-full border border-primary text-primary ring-offset-background focus:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:b.jsx(aJ,{className:"flex items-center justify-center",children:b.jsx(_L,{className:"size-[10px] fill-current text-current"})})}));px.displayName=Q2.displayName;function _I(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function X2(...t){return e=>{let n=!1;const r=t.map(i=>{const s=_I(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():_I(t[i],null)}}}}function Z2(...t){return v.useCallback(X2(...t),t)}const lJ=["top","right","bottom","left"],nd=Math.min,fo=Math.max,tw=Math.round,Wb=Math.floor,wl=t=>({x:t,y:t}),cJ={left:"right",right:"left",bottom:"top",top:"bottom"},uJ={start:"end",end:"start"};function $T(t,e,n){return fo(t,nd(e,n))}function Pc(t,e){return typeof t=="function"?t(e):t}function Ac(t){return t.split("-")[0]}function Qm(t){return t.split("-")[1]}function a_(t){return t==="x"?"y":"x"}function l_(t){return t==="y"?"height":"width"}function rd(t){return["top","bottom"].includes(Ac(t))?"y":"x"}function c_(t){return a_(rd(t))}function dJ(t,e,n){n===void 0&&(n=!1);const r=Qm(t),i=c_(t),s=l_(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=nw(o)),[o,nw(o)]}function fJ(t){const e=nw(t);return[WT(t),e,WT(e)]}function WT(t){return t.replace(/start|end/g,e=>uJ[e])}function hJ(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function pJ(t,e,n,r){const i=Qm(t);let s=hJ(Ac(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(WT)))),s}function nw(t){return t.replace(/left|right|bottom|top/g,e=>cJ[e])}function mJ(t){return{top:0,right:0,bottom:0,left:0,...t}}function eF(t){return typeof t!="number"?mJ(t):{top:t,right:t,bottom:t,left:t}}function rw(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function RI(t,e,n){let{reference:r,floating:i}=t;const s=rd(e),o=c_(e),a=l_(o),c=Ac(e),d=s==="y",h=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,y=r[a]/2-i[a]/2;let S;switch(c){case"top":S={x:h,y:r.y-i.height};break;case"bottom":S={x:h,y:r.y+r.height};break;case"right":S={x:r.x+r.width,y:p};break;case"left":S={x:r.x-i.width,y:p};break;default:S={x:r.x,y:r.y}}switch(Qm(e)){case"start":S[o]-=y*(n&&d?-1:1);break;case"end":S[o]+=y*(n&&d?-1:1);break}return S}const gJ=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:h,y:p}=RI(d,r,c),y=r,S={},k=0;for(let C=0;C<a.length;C++){const{name:E,fn:_}=a[C],{x:A,y:M,data:I,reset:N}=await _({x:h,y:p,initialPlacement:r,placement:y,strategy:i,middlewareData:S,rects:d,platform:o,elements:{reference:t,floating:e}});h=A??h,p=M??p,S={...S,[E]:{...S[E],...I}},N&&k<=50&&(k++,typeof N=="object"&&(N.placement&&(y=N.placement),N.rects&&(d=N.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):N.rects),{x:h,y:p}=RI(d,y,c)),C=-1)}return{x:h,y:p,placement:y,strategy:i,middlewareData:S}};async function hy(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:y=!1,padding:S=0}=Pc(e,t),k=eF(S),E=a[y?p==="floating"?"reference":"floating":p],_=rw(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(E)))==null||n?E:E.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:d,rootBoundary:h,strategy:c})),A=p==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,M=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),I=await(s.isElement==null?void 0:s.isElement(M))?await(s.getScale==null?void 0:s.getScale(M))||{x:1,y:1}:{x:1,y:1},N=rw(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:A,offsetParent:M,strategy:c}):A);return{top:(_.top-N.top+k.top)/I.y,bottom:(N.bottom-_.bottom+k.bottom)/I.y,left:(_.left-N.left+k.left)/I.x,right:(N.right-_.right+k.right)/I.x}}const vJ=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:c}=e,{element:d,padding:h=0}=Pc(t,e)||{};if(d==null)return{};const p=eF(h),y={x:n,y:r},S=c_(i),k=l_(S),C=await o.getDimensions(d),E=S==="y",_=E?"top":"left",A=E?"bottom":"right",M=E?"clientHeight":"clientWidth",I=s.reference[k]+s.reference[S]-y[S]-s.floating[k],N=y[S]-s.reference[S],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let j=O?O[M]:0;(!j||!await(o.isElement==null?void 0:o.isElement(O)))&&(j=a.floating[M]||s.floating[k]);const V=I/2-N/2,$=j/2-C[k]/2-1,W=nd(p[_],$),J=nd(p[A],$),Y=W,pe=j-C[k]-J,fe=j/2-C[k]/2+V,Ee=$T(Y,fe,pe),le=!c.arrow&&Qm(i)!=null&&fe!==Ee&&s.reference[k]/2-(fe<Y?W:J)-C[k]/2<0,Se=le?fe<Y?fe-Y:fe-pe:0;return{[S]:y[S]+Se,data:{[S]:Ee,centerOffset:fe-Ee-Se,...le&&{alignmentOffset:Se}},reset:le}}}),yJ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:y,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:C=!0,...E}=Pc(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const _=Ac(i),A=rd(a),M=Ac(a)===a,I=await(c.isRTL==null?void 0:c.isRTL(d.floating)),N=y||(M||!C?[nw(a)]:fJ(a)),O=k!=="none";!y&&O&&N.push(...pJ(a,C,k,I));const j=[a,...N],V=await hy(e,E),$=[];let W=((r=s.flip)==null?void 0:r.overflows)||[];if(h&&$.push(V[_]),p){const fe=dJ(i,o,I);$.push(V[fe[0]],V[fe[1]])}if(W=[...W,{placement:i,overflows:$}],!$.every(fe=>fe<=0)){var J,Y;const fe=(((J=s.flip)==null?void 0:J.index)||0)+1,Ee=j[fe];if(Ee)return{data:{index:fe,overflows:W},reset:{placement:Ee}};let le=(Y=W.filter(Se=>Se.overflows[0]<=0).sort((Se,q)=>Se.overflows[1]-q.overflows[1])[0])==null?void 0:Y.placement;if(!le)switch(S){case"bestFit":{var pe;const Se=(pe=W.filter(q=>{if(O){const te=rd(q.placement);return te===A||te==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(te=>te>0).reduce((te,ae)=>te+ae,0)]).sort((q,te)=>q[1]-te[1])[0])==null?void 0:pe[0];Se&&(le=Se);break}case"initialPlacement":le=a;break}if(i!==le)return{reset:{placement:le}}}return{}}}};function PI(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function AI(t){return lJ.some(e=>t[e]>=0)}const bJ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Pc(t,e);switch(r){case"referenceHidden":{const s=await hy(e,{...i,elementContext:"reference"}),o=PI(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:AI(o)}}}case"escaped":{const s=await hy(e,{...i,altBoundary:!0}),o=PI(s,n.floating);return{data:{escapedOffsets:o,escaped:AI(o)}}}default:return{}}}}};async function xJ(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ac(n),a=Qm(n),c=rd(n)==="y",d=["left","top"].includes(o)?-1:1,h=s&&c?-1:1,p=Pc(e,t);let{mainAxis:y,crossAxis:S,alignmentAxis:k}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return a&&typeof k=="number"&&(S=a==="end"?k*-1:k),c?{x:S*h,y:y*d}:{x:y*d,y:S*h}}const wJ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,c=await xJ(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},SJ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:E=>{let{x:_,y:A}=E;return{x:_,y:A}}},...c}=Pc(t,e),d={x:n,y:r},h=await hy(e,c),p=rd(Ac(i)),y=a_(p);let S=d[y],k=d[p];if(s){const E=y==="y"?"top":"left",_=y==="y"?"bottom":"right",A=S+h[E],M=S-h[_];S=$T(A,S,M)}if(o){const E=p==="y"?"top":"left",_=p==="y"?"bottom":"right",A=k+h[E],M=k-h[_];k=$T(A,k,M)}const C=a.fn({...e,[y]:S,[p]:k});return{...C,data:{x:C.x-n,y:C.y-r,enabled:{[y]:s,[p]:o}}}}}},CJ=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:d=!0}=Pc(t,e),h={x:n,y:r},p=rd(i),y=a_(p);let S=h[y],k=h[p];const C=Pc(a,e),E=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(c){const M=y==="y"?"height":"width",I=s.reference[y]-s.floating[M]+E.mainAxis,N=s.reference[y]+s.reference[M]-E.mainAxis;S<I?S=I:S>N&&(S=N)}if(d){var _,A;const M=y==="y"?"width":"height",I=["top","left"].includes(Ac(i)),N=s.reference[p]-s.floating[M]+(I&&((_=o.offset)==null?void 0:_[p])||0)+(I?0:E.crossAxis),O=s.reference[p]+s.reference[M]+(I?0:((A=o.offset)==null?void 0:A[p])||0)-(I?E.crossAxis:0);k<N?k=N:k>O&&(k=O)}return{[y]:S,[p]:k}}}},kJ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:c=()=>{},...d}=Pc(t,e),h=await hy(e,d),p=Ac(i),y=Qm(i),S=rd(i)==="y",{width:k,height:C}=s.floating;let E,_;p==="top"||p==="bottom"?(E=p,_=y===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=p,E=y==="end"?"top":"bottom");const A=C-h.top-h.bottom,M=k-h.left-h.right,I=nd(C-h[E],A),N=nd(k-h[_],M),O=!e.middlewareData.shift;let j=I,V=N;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(V=M),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(j=A),O&&!y){const W=fo(h.left,0),J=fo(h.right,0),Y=fo(h.top,0),pe=fo(h.bottom,0);S?V=k-2*(W!==0||J!==0?W+J:fo(h.left,h.right)):j=C-2*(Y!==0||pe!==0?Y+pe:fo(h.top,h.bottom))}await c({...e,availableWidth:V,availableHeight:j});const $=await o.getDimensions(a.floating);return k!==$.width||C!==$.height?{reset:{rects:!0}}:{}}}};function oS(){return typeof window<"u"}function Jm(t){return tF(t)?(t.nodeName||"").toLowerCase():"#document"}function go(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Il(t){var e;return(e=(tF(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function tF(t){return oS()?t instanceof Node||t instanceof go(t).Node:!1}function _a(t){return oS()?t instanceof Element||t instanceof go(t).Element:!1}function El(t){return oS()?t instanceof HTMLElement||t instanceof go(t).HTMLElement:!1}function II(t){return!oS()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof go(t).ShadowRoot}function e0(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Ra(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function TJ(t){return["table","td","th"].includes(Jm(t))}function aS(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function u_(t){const e=d_(),n=_a(t)?Ra(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function EJ(t){let e=id(t);for(;El(e)&&!Rm(e);){if(u_(e))return e;if(aS(e))return null;e=id(e)}return null}function d_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Rm(t){return["html","body","#document"].includes(Jm(t))}function Ra(t){return go(t).getComputedStyle(t)}function lS(t){return _a(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function id(t){if(Jm(t)==="html")return t;const e=t.assignedSlot||t.parentNode||II(t)&&t.host||Il(t);return II(e)?e.host:e}function nF(t){const e=id(t);return Rm(e)?t.ownerDocument?t.ownerDocument.body:t.body:El(e)&&e0(e)?e:nF(e)}function py(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=nF(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=go(i);if(s){const a=HT(o);return e.concat(o,o.visualViewport||[],e0(i)?i:[],a&&n?py(a):[])}return e.concat(i,py(i,[],n))}function HT(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function rF(t){const e=Ra(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=El(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=tw(n)!==s||tw(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function f_(t){return _a(t)?t:t.contextElement}function Jp(t){const e=f_(t);if(!El(e))return wl(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=rF(e);let o=(s?tw(n.width):n.width)/r,a=(s?tw(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const _J=wl(0);function iF(t){const e=go(t);return!d_()||!e.visualViewport?_J:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function RJ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==go(t)?!1:e}function $f(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=f_(t);let o=wl(1);e&&(r?_a(r)&&(o=Jp(r)):o=Jp(t));const a=RJ(s,n,r)?iF(s):wl(0);let c=(i.left+a.x)/o.x,d=(i.top+a.y)/o.y,h=i.width/o.x,p=i.height/o.y;if(s){const y=go(s),S=r&&_a(r)?go(r):r;let k=y,C=HT(k);for(;C&&r&&S!==k;){const E=Jp(C),_=C.getBoundingClientRect(),A=Ra(C),M=_.left+(C.clientLeft+parseFloat(A.paddingLeft))*E.x,I=_.top+(C.clientTop+parseFloat(A.paddingTop))*E.y;c*=E.x,d*=E.y,h*=E.x,p*=E.y,c+=M,d+=I,k=go(C),C=HT(k)}}return rw({width:h,height:p,x:c,y:d})}function h_(t,e){const n=lS(t).scrollLeft;return e?e.left+n:$f(Il(t)).left+n}function sF(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:h_(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function PJ(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Il(r),a=e?aS(e.floating):!1;if(r===o||a&&s)return n;let c={scrollLeft:0,scrollTop:0},d=wl(1);const h=wl(0),p=El(r);if((p||!p&&!s)&&((Jm(r)!=="body"||e0(o))&&(c=lS(r)),El(r))){const S=$f(r);d=Jp(r),h.x=S.x+r.clientLeft,h.y=S.y+r.clientTop}const y=o&&!p&&!s?sF(o,c,!0):wl(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+h.x+y.x,y:n.y*d.y-c.scrollTop*d.y+h.y+y.y}}function AJ(t){return Array.from(t.getClientRects())}function IJ(t){const e=Il(t),n=lS(t),r=t.ownerDocument.body,i=fo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=fo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+h_(t);const a=-n.scrollTop;return Ra(r).direction==="rtl"&&(o+=fo(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function NJ(t,e){const n=go(t),r=Il(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const d=d_();(!d||d&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a,y:c}}function MJ(t,e){const n=$f(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=El(t)?Jp(t):wl(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,c=i*s.x,d=r*s.y;return{width:o,height:a,x:c,y:d}}function NI(t,e,n){let r;if(e==="viewport")r=NJ(t,n);else if(e==="document")r=IJ(Il(t));else if(_a(e))r=MJ(e,n);else{const i=iF(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return rw(r)}function oF(t,e){const n=id(t);return n===e||!_a(n)||Rm(n)?!1:Ra(n).position==="fixed"||oF(n,e)}function OJ(t,e){const n=e.get(t);if(n)return n;let r=py(t,[],!1).filter(a=>_a(a)&&Jm(a)!=="body"),i=null;const s=Ra(t).position==="fixed";let o=s?id(t):t;for(;_a(o)&&!Rm(o);){const a=Ra(o),c=u_(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||e0(o)&&!c&&oF(t,o))?r=r.filter(h=>h!==o):i=a,o=id(o)}return e.set(t,r),r}function DJ(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?aS(e)?[]:OJ(e,this._c):[].concat(n),r],a=o[0],c=o.reduce((d,h)=>{const p=NI(e,h,i);return d.top=fo(p.top,d.top),d.right=nd(p.right,d.right),d.bottom=nd(p.bottom,d.bottom),d.left=fo(p.left,d.left),d},NI(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function LJ(t){const{width:e,height:n}=rF(t);return{width:e,height:n}}function jJ(t,e,n){const r=El(e),i=Il(e),s=n==="fixed",o=$f(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=wl(0);if(r||!r&&!s)if((Jm(e)!=="body"||e0(i))&&(a=lS(e)),r){const y=$f(e,!0,s,e);c.x=y.x+e.clientLeft,c.y=y.y+e.clientTop}else i&&(c.x=h_(i));const d=i&&!r&&!s?sF(i,a):wl(0),h=o.left+a.scrollLeft-c.x-d.x,p=o.top+a.scrollTop-c.y-d.y;return{x:h,y:p,width:o.width,height:o.height}}function uk(t){return Ra(t).position==="static"}function MI(t,e){if(!El(t)||Ra(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Il(t)===n&&(n=n.ownerDocument.body),n}function aF(t,e){const n=go(t);if(aS(t))return n;if(!El(t)){let i=id(t);for(;i&&!Rm(i);){if(_a(i)&&!uk(i))return i;i=id(i)}return n}let r=MI(t,e);for(;r&&TJ(r)&&uk(r);)r=MI(r,e);return r&&Rm(r)&&uk(r)&&!u_(r)?n:r||EJ(t)||n}const FJ=async function(t){const e=this.getOffsetParent||aF,n=this.getDimensions,r=await n(t.floating);return{reference:jJ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function UJ(t){return Ra(t).direction==="rtl"}const VJ={convertOffsetParentRelativeRectToViewportRelativeRect:PJ,getDocumentElement:Il,getClippingRect:DJ,getOffsetParent:aF,getElementRects:FJ,getClientRects:AJ,getDimensions:LJ,getScale:Jp,isElement:_a,isRTL:UJ};function lF(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function BJ(t,e){let n=null,r;const i=Il(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const d=t.getBoundingClientRect(),{left:h,top:p,width:y,height:S}=d;if(a||e(),!y||!S)return;const k=Wb(p),C=Wb(i.clientWidth-(h+y)),E=Wb(i.clientHeight-(p+S)),_=Wb(h),M={rootMargin:-k+"px "+-C+"px "+-E+"px "+-_+"px",threshold:fo(0,nd(1,c))||1};let I=!0;function N(O){const j=O[0].intersectionRatio;if(j!==c){if(!I)return o();j?o(!1,j):r=setTimeout(()=>{o(!1,1e-7)},1e3)}j===1&&!lF(d,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(N,{...M,root:i.ownerDocument})}catch{n=new IntersectionObserver(N,M)}n.observe(t)}return o(!0),s}function zJ(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=f_(t),h=i||s?[...d?py(d):[],...py(e)]:[];h.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const p=d&&a?BJ(d,n):null;let y=-1,S=null;o&&(S=new ResizeObserver(_=>{let[A]=_;A&&A.target===d&&S&&(S.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var M;(M=S)==null||M.observe(e)})),n()}),d&&!c&&S.observe(d),S.observe(e));let k,C=c?$f(t):null;c&&E();function E(){const _=$f(t);C&&!lF(C,_)&&n(),C=_,k=requestAnimationFrame(E)}return n(),()=>{var _;h.forEach(A=>{i&&A.removeEventListener("scroll",n),s&&A.removeEventListener("resize",n)}),p==null||p(),(_=S)==null||_.disconnect(),S=null,c&&cancelAnimationFrame(k)}}const $J=wJ,WJ=SJ,HJ=yJ,qJ=kJ,KJ=bJ,OI=vJ,GJ=CJ,YJ=(t,e,n)=>{const r=new Map,i={platform:VJ,...n},s={...i.platform,_c:r};return gJ(t,e,{...i,platform:s})};var mx=typeof document<"u"?v.useLayoutEffect:v.useEffect;function iw(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!iw(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!iw(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function cF(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function DI(t,e){const n=cF(t);return Math.round(e*n)/n}function dk(t){const e=v.useRef(t);return mx(()=>{e.current=t}),e}function QJ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:c,open:d}=t,[h,p]=v.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[y,S]=v.useState(r);iw(y,r)||S(r);const[k,C]=v.useState(null),[E,_]=v.useState(null),A=v.useCallback(q=>{q!==O.current&&(O.current=q,C(q))},[]),M=v.useCallback(q=>{q!==j.current&&(j.current=q,_(q))},[]),I=s||k,N=o||E,O=v.useRef(null),j=v.useRef(null),V=v.useRef(h),$=c!=null,W=dk(c),J=dk(i),Y=dk(d),pe=v.useCallback(()=>{if(!O.current||!j.current)return;const q={placement:e,strategy:n,middleware:y};J.current&&(q.platform=J.current),YJ(O.current,j.current,q).then(te=>{const ae={...te,isPositioned:Y.current!==!1};fe.current&&!iw(V.current,ae)&&(V.current=ae,Xf.flushSync(()=>{p(ae)}))})},[y,e,n,J,Y]);mx(()=>{d===!1&&V.current.isPositioned&&(V.current.isPositioned=!1,p(q=>({...q,isPositioned:!1})))},[d]);const fe=v.useRef(!1);mx(()=>(fe.current=!0,()=>{fe.current=!1}),[]),mx(()=>{if(I&&(O.current=I),N&&(j.current=N),I&&N){if(W.current)return W.current(I,N,pe);pe()}},[I,N,pe,W,$]);const Ee=v.useMemo(()=>({reference:O,floating:j,setReference:A,setFloating:M}),[A,M]),le=v.useMemo(()=>({reference:I,floating:N}),[I,N]),Se=v.useMemo(()=>{const q={position:n,left:0,top:0};if(!le.floating)return q;const te=DI(le.floating,h.x),ae=DI(le.floating,h.y);return a?{...q,transform:"translate("+te+"px, "+ae+"px)",...cF(le.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:te,top:ae}},[n,a,le.floating,h.x,h.y]);return v.useMemo(()=>({...h,update:pe,refs:Ee,elements:le,floatingStyles:Se}),[h,pe,Ee,le,Se])}const JJ=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?OI({element:r.current,padding:i}).fn(n):{}:r?OI({element:r,padding:i}).fn(n):{}}}},XJ=(t,e)=>({...$J(t),options:[t,e]}),ZJ=(t,e)=>({...WJ(t),options:[t,e]}),eX=(t,e)=>({...GJ(t),options:[t,e]}),tX=(t,e)=>({...HJ(t),options:[t,e]}),nX=(t,e)=>({...qJ(t),options:[t,e]}),rX=(t,e)=>({...KJ(t),options:[t,e]}),iX=(t,e)=>({...JJ(t),options:[t,e]});function LI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function sX(...t){return e=>{let n=!1;const r=t.map(i=>{const s=LI(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():LI(t[i],null)}}}}function oX(t){const e=aX(t),n=v.forwardRef((r,i)=>{const{children:s,...o}=r,a=v.Children.toArray(s),c=a.find(cX);if(c){const d=c.props.children,h=a.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return b.jsx(e,{...o,ref:i,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function aX(t){const e=v.forwardRef((n,r)=>{const{children:i,...s}=n;if(v.isValidElement(i)){const o=dX(i),a=uX(s,i.props);return i.type!==v.Fragment&&(a.ref=r?sX(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var lX=Symbol("radix.slottable");function cX(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===lX}function uX(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function dX(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var fX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],hX=fX.reduce((t,e)=>{const n=oX(`Primitive.${e}`),r=v.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),pX="Arrow",uF=v.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return b.jsx(hX.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:b.jsx("polygon",{points:"0,0 30,0 15,10"})})});uF.displayName=pX;var mX=uF;function jI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function dF(...t){return e=>{let n=!1;const r=t.map(i=>{const s=jI(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():jI(t[i],null)}}}}function fF(...t){return v.useCallback(dF(...t),t)}function gX(t){const e=vX(t),n=v.forwardRef((r,i)=>{const{children:s,...o}=r,a=v.Children.toArray(s),c=a.find(bX);if(c){const d=c.props.children,h=a.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return b.jsx(e,{...o,ref:i,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function vX(t){const e=v.forwardRef((n,r)=>{const{children:i,...s}=n;if(v.isValidElement(i)){const o=wX(i),a=xX(s,i.props);return i.type!==v.Fragment&&(a.ref=r?dF(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var yX=Symbol("radix.slottable");function bX(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===yX}function xX(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function wX(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var SX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],hF=SX.reduce((t,e)=>{const n=gX(`Primitive.${e}`),r=v.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),p_="Popper",[pF,Xm]=Yo(p_),[CX,mF]=pF(p_),gF=t=>{const{__scopePopper:e,children:n}=t,[r,i]=v.useState(null);return b.jsx(CX,{scope:e,anchor:r,onAnchorChange:i,children:n})};gF.displayName=p_;var vF="PopperAnchor",yF=v.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=mF(vF,n),o=v.useRef(null),a=fF(e,o),c=v.useRef(null);return v.useEffect(()=>{const d=c.current;c.current=(r==null?void 0:r.current)||o.current,d!==c.current&&s.onAnchorChange(c.current)}),r?null:b.jsx(hF.div,{...i,ref:a})});yF.displayName=vF;var m_="PopperContent",[kX,TX]=pF(m_),bF=v.forwardRef((t,e)=>{var ie,be,Le,$e,Je,pt;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:y=!1,updatePositionStrategy:S="optimized",onPlaced:k,...C}=t,E=mF(m_,n),[_,A]=v.useState(null),M=fF(e,Et=>A(Et)),[I,N]=v.useState(null),O=i_(I),j=(O==null?void 0:O.width)??0,V=(O==null?void 0:O.height)??0,$=r+(s!=="center"?"-"+s:""),W=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},J=Array.isArray(d)?d:[d],Y=J.length>0,pe={padding:W,boundary:J.filter(_X),altBoundary:Y},{refs:fe,floatingStyles:Ee,placement:le,isPositioned:Se,middlewareData:q}=QJ({strategy:"fixed",placement:$,whileElementsMounted:(...Et)=>zJ(...Et,{animationFrame:S==="always"}),elements:{reference:E.anchor},middleware:[XJ({mainAxis:i+V,alignmentAxis:o}),c&&ZJ({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?eX():void 0,...pe}),c&&tX({...pe}),nX({...pe,apply:({elements:Et,rects:wt,availableWidth:_n,availableHeight:er})=>{const{width:dn,height:tn}=wt.reference,Nn=Et.floating.style;Nn.setProperty("--radix-popper-available-width",`${_n}px`),Nn.setProperty("--radix-popper-available-height",`${er}px`),Nn.setProperty("--radix-popper-anchor-width",`${dn}px`),Nn.setProperty("--radix-popper-anchor-height",`${tn}px`)}}),I&&iX({element:I,padding:a}),RX({arrowWidth:j,arrowHeight:V}),y&&rX({strategy:"referenceHidden",...pe})]}),[te,ae]=SF(le),B=Tl(k);qi(()=>{Se&&(B==null||B())},[Se,B]);const de=(ie=q.arrow)==null?void 0:ie.x,se=(be=q.arrow)==null?void 0:be.y,me=((Le=q.arrow)==null?void 0:Le.centerOffset)!==0,[Te,Re]=v.useState();return qi(()=>{_&&Re(window.getComputedStyle(_).zIndex)},[_]),b.jsx("div",{ref:fe.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ee,transform:Se?Ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Te,"--radix-popper-transform-origin":[($e=q.transformOrigin)==null?void 0:$e.x,(Je=q.transformOrigin)==null?void 0:Je.y].join(" "),...((pt=q.hide)==null?void 0:pt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:b.jsx(kX,{scope:n,placedSide:te,onArrowChange:N,arrowX:de,arrowY:se,shouldHideArrow:me,children:b.jsx(hF.div,{"data-side":te,"data-align":ae,...C,ref:M,style:{...C.style,animation:Se?void 0:"none"}})})})});bF.displayName=m_;var xF="PopperArrow",EX={top:"bottom",right:"left",bottom:"top",left:"right"},wF=v.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=TX(xF,r),o=EX[s.placedSide];return b.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:b.jsx(mX,{...i,ref:n,style:{...i.style,display:"block"}})})});wF.displayName=xF;function _X(t){return t!==null}var RX=t=>({name:"transformOrigin",options:t,fn(e){var E,_,A;const{placement:n,rects:r,middlewareData:i}=e,o=((E=i.arrow)==null?void 0:E.centerOffset)!==0,a=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[d,h]=SF(n),p={start:"0%",center:"50%",end:"100%"}[h],y=(((_=i.arrow)==null?void 0:_.x)??0)+a/2,S=(((A=i.arrow)==null?void 0:A.y)??0)+c/2;let k="",C="";return d==="bottom"?(k=o?p:`${y}px`,C=`${-c}px`):d==="top"?(k=o?p:`${y}px`,C=`${r.floating.height+c}px`):d==="right"?(k=`${-c}px`,C=o?p:`${S}px`):d==="left"&&(k=`${r.floating.width+c}px`,C=o?p:`${S}px`),{data:{x:k,y:C}}}});function SF(t){const[e,n="center"]=t.split("-");return[e,n]}var g_=gF,v_=yF,y_=bF,b_=wF;function PX(t){const e=AX(t),n=v.forwardRef((r,i)=>{const{children:s,...o}=r,a=v.Children.toArray(s),c=a.find(NX);if(c){const d=c.props.children,h=a.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return b.jsx(e,{...o,ref:i,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function AX(t){const e=v.forwardRef((n,r)=>{const{children:i,...s}=n;if(v.isValidElement(i)){const o=OX(i),a=MX(s,i.props);return i.type!==v.Fragment&&(a.ref=r?X2(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var CF=Symbol("radix.slottable");function IX(t){const e=({children:n})=>b.jsx(b.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=CF,e}function NX(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===CF}function MX(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function OX(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var DX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],LX=DX.reduce((t,e)=>{const n=PX(`Primitive.${e}`),r=v.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function FI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function jX(...t){return e=>{let n=!1;const r=t.map(i=>{const s=FI(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():FI(t[i],null)}}}}function FX(t){const e=UX(t),n=v.forwardRef((r,i)=>{const{children:s,...o}=r,a=v.Children.toArray(s),c=a.find(BX);if(c){const d=c.props.children,h=a.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return b.jsx(e,{...o,ref:i,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function UX(t){const e=v.forwardRef((n,r)=>{const{children:i,...s}=n;if(v.isValidElement(i)){const o=$X(i),a=zX(s,i.props);return i.type!==v.Fragment&&(a.ref=r?jX(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var VX=Symbol("radix.slottable");function BX(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===VX}function zX(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function $X(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var WX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],HX=WX.reduce((t,e)=>{const n=FX(`Primitive.${e}`),r=v.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),kF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),qX="VisuallyHidden",TF=v.forwardRef((t,e)=>b.jsx(HX.span,{...t,ref:e,style:{...kF,...t.style}}));TF.displayName=qX;var KX=TF,[cS,Fge]=Yo("Tooltip",[Xm]),uS=Xm(),EF="TooltipProvider",GX=700,qT="tooltip.open",[YX,x_]=cS(EF),_F=t=>{const{__scopeTooltip:e,delayDuration:n=GX,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=v.useRef(!0),a=v.useRef(!1),c=v.useRef(0);return v.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),b.jsx(YX,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:v.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:v.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:v.useCallback(d=>{a.current=d},[]),disableHoverableContent:i,children:s})};_F.displayName=EF;var my="Tooltip",[QX,dS]=cS(my),RF=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=t,c=x_(my,t.__scopeTooltip),d=uS(e),[h,p]=v.useState(null),y=bl(),S=v.useRef(0),k=o??c.disableHoverableContent,C=a??c.delayDuration,E=v.useRef(!1),[_,A]=Zu({prop:r,defaultProp:i??!1,onChange:j=>{j?(c.onOpen(),document.dispatchEvent(new CustomEvent(qT))):c.onClose(),s==null||s(j)},caller:my}),M=v.useMemo(()=>_?E.current?"delayed-open":"instant-open":"closed",[_]),I=v.useCallback(()=>{window.clearTimeout(S.current),S.current=0,E.current=!1,A(!0)},[A]),N=v.useCallback(()=>{window.clearTimeout(S.current),S.current=0,A(!1)},[A]),O=v.useCallback(()=>{window.clearTimeout(S.current),S.current=window.setTimeout(()=>{E.current=!0,A(!0),S.current=0},C)},[C,A]);return v.useEffect(()=>()=>{S.current&&(window.clearTimeout(S.current),S.current=0)},[]),b.jsx(g_,{...d,children:b.jsx(QX,{scope:e,contentId:y,open:_,stateAttribute:M,trigger:h,onTriggerChange:p,onTriggerEnter:v.useCallback(()=>{c.isOpenDelayedRef.current?O():I()},[c.isOpenDelayedRef,O,I]),onTriggerLeave:v.useCallback(()=>{k?N():(window.clearTimeout(S.current),S.current=0)},[N,k]),onOpen:I,onClose:N,disableHoverableContent:k,children:n})})};RF.displayName=my;var KT="TooltipTrigger",PF=v.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=dS(KT,n),s=x_(KT,n),o=uS(n),a=v.useRef(null),c=Z2(e,a,i.onTriggerChange),d=v.useRef(!1),h=v.useRef(!1),p=v.useCallback(()=>d.current=!1,[]);return v.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),b.jsx(v_,{asChild:!0,...o,children:b.jsx(LX.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:ft(t.onPointerMove,y=>{y.pointerType!=="touch"&&!h.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),h.current=!0)}),onPointerLeave:ft(t.onPointerLeave,()=>{i.onTriggerLeave(),h.current=!1}),onPointerDown:ft(t.onPointerDown,()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:ft(t.onFocus,()=>{d.current||i.onOpen()}),onBlur:ft(t.onBlur,i.onClose),onClick:ft(t.onClick,i.onClose)})})});PF.displayName=KT;var JX="TooltipPortal",[Uge,XX]=cS(JX,{forceMount:void 0}),Pm="TooltipContent",AF=v.forwardRef((t,e)=>{const n=XX(Pm,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=dS(Pm,t.__scopeTooltip);return b.jsx(Al,{present:r||o.open,children:o.disableHoverableContent?b.jsx(IF,{side:i,...s,ref:e}):b.jsx(ZX,{side:i,...s,ref:e})})}),ZX=v.forwardRef((t,e)=>{const n=dS(Pm,t.__scopeTooltip),r=x_(Pm,t.__scopeTooltip),i=v.useRef(null),s=Z2(e,i),[o,a]=v.useState(null),{trigger:c,onClose:d}=n,h=i.current,{onPointerInTransitChange:p}=r,y=v.useCallback(()=>{a(null),p(!1)},[p]),S=v.useCallback((k,C)=>{const E=k.currentTarget,_={x:k.clientX,y:k.clientY},A=iZ(_,E.getBoundingClientRect()),M=sZ(_,A),I=oZ(C.getBoundingClientRect()),N=lZ([...M,...I]);a(N),p(!0)},[p]);return v.useEffect(()=>()=>y(),[y]),v.useEffect(()=>{if(c&&h){const k=E=>S(E,h),C=E=>S(E,c);return c.addEventListener("pointerleave",k),h.addEventListener("pointerleave",C),()=>{c.removeEventListener("pointerleave",k),h.removeEventListener("pointerleave",C)}}},[c,h,S,y]),v.useEffect(()=>{if(o){const k=C=>{const E=C.target,_={x:C.clientX,y:C.clientY},A=(c==null?void 0:c.contains(E))||(h==null?void 0:h.contains(E)),M=!aZ(_,o);A?y():M&&(y(),d())};return document.addEventListener("pointermove",k),()=>document.removeEventListener("pointermove",k)}},[c,h,o,d,y]),b.jsx(IF,{...t,ref:s})}),[eZ,tZ]=cS(my,{isInside:!1}),nZ=IX("TooltipContent"),IF=v.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,c=dS(Pm,n),d=uS(n),{onClose:h}=c;return v.useEffect(()=>(document.addEventListener(qT,h),()=>document.removeEventListener(qT,h)),[h]),v.useEffect(()=>{if(c.trigger){const p=y=>{const S=y.target;S!=null&&S.contains(c.trigger)&&h()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[c.trigger,h]),b.jsx(Yy,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:p=>p.preventDefault(),onDismiss:h,children:b.jsxs(y_,{"data-state":c.stateAttribute,...d,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[b.jsx(nZ,{children:r}),b.jsx(eZ,{scope:n,isInside:!0,children:b.jsx(KX,{id:c.contentId,role:"tooltip",children:i||r})})]})})});AF.displayName=Pm;var NF="TooltipArrow",rZ=v.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=uS(n);return tZ(NF,n).isInside?null:b.jsx(b_,{...i,...r,ref:e})});rZ.displayName=NF;function iZ(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function sZ(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function oZ(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function aZ(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],c=e[o],d=a.x,h=a.y,p=c.x,y=c.y;h>r!=y>r&&n<(p-d)*(r-h)/(y-h)+d&&(i=!i)}return i}function lZ(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),cZ(e)}function cZ(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var uZ=_F,dZ=RF,fZ=PF,MF=AF;const hZ=uZ,gy=({delayDuration:t=10,...e})=>b.jsx(dZ,{delayDuration:t,...e}),vy=fZ,Am=v.forwardRef(({className:t,sideOffset:e=4,size:n="md",...r},i)=>{const s={sm:"w-[180px]",md:"w-[320px]",lg:"w-[460px]"}[n];return b.jsx(MF,{ref:i,sideOffset:e,className:Vt("z-50 overflow-hidden rounded-md border bg-popover px-12 py-[6px] text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t,s),...r})});Am.displayName=MF.displayName;function UI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function OF(...t){return e=>{let n=!1;const r=t.map(i=>{const s=UI(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():UI(t[i],null)}}}}function DF(...t){return v.useCallback(OF(...t),t)}function pZ(t){const e=mZ(t),n=v.forwardRef((r,i)=>{const{children:s,...o}=r,a=v.Children.toArray(s),c=a.find(vZ);if(c){const d=c.props.children,h=a.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return b.jsx(e,{...o,ref:i,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function mZ(t){const e=v.forwardRef((n,r)=>{const{children:i,...s}=n;if(v.isValidElement(i)){const o=bZ(i),a=yZ(s,i.props);return i.type!==v.Fragment&&(a.ref=r?OF(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var gZ=Symbol("radix.slottable");function vZ(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===gZ}function yZ(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function bZ(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var xZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],LF=xZ.reduce((t,e)=>{const n=pZ(`Primitive.${e}`),r=v.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),fS="Switch",[wZ,Vge]=Yo(fS),[SZ,CZ]=wZ(fS),jF=v.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:c="on",onCheckedChange:d,form:h,...p}=t,[y,S]=v.useState(null),k=DF(e,M=>S(M)),C=v.useRef(!1),E=y?h||!!y.closest("form"):!0,[_,A]=Zu({prop:i,defaultProp:s??!1,onChange:d,caller:fS});return b.jsxs(SZ,{scope:n,checked:_,disabled:a,children:[b.jsx(LF.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":BF(_),"data-disabled":a?"":void 0,disabled:a,value:c,...p,ref:k,onClick:ft(t.onClick,M=>{A(I=>!I),E&&(C.current=M.isPropagationStopped(),C.current||M.stopPropagation())})}),E&&b.jsx(VF,{control:y,bubbles:!C.current,name:r,value:c,checked:_,required:o,disabled:a,form:h,style:{transform:"translateX(-100%)"}})]})});jF.displayName=fS;var FF="SwitchThumb",UF=v.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=CZ(FF,n);return b.jsx(LF.span,{"data-state":BF(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});UF.displayName=FF;var kZ="SwitchBubbleInput",VF=v.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},s)=>{const o=v.useRef(null),a=DF(o,s),c=s_(n),d=i_(e);return v.useEffect(()=>{const h=o.current;if(!h)return;const p=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==n&&S){const k=new Event("click",{bubbles:r});S.call(h,n),h.dispatchEvent(k)}},[c,n,r]),b.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});VF.displayName=kZ;function BF(t){return t?"checked":"unchecked"}var zF=jF,TZ=UF;const hS=v.forwardRef(({className:t,...e},n)=>b.jsx(zF,{className:Vt("peer inline-flex h-20 w-40 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:b.jsx(TZ,{className:Vt("pointer-events-none block size-16 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));hS.displayName=zF.displayName;const EZ=({roomID:t,isHost:e,settings:n})=>{const{strict_mode:r,invitation_expiry:i,invite_permission:s}=n,o=b2({invitation_expiry:iQ(["30","90","180"]),invite_permission:y2()}),a=r?!1:s||!1,c=eS({resolver:w2(o),defaultValues:{invitation_expiry:i||"30",invite_permission:a}}),d=Ju({mutationFn:y=>bL(t,{...n,invitation_expiry:y.invitation_expiry,invite_permission:y.invite_permission,strict_mode:y.strict_mode})}),h=(y,S)=>{c.setValue(y,S);const k=c.getValues(),C=y==="invite_permission"&&S===!0&&r?!1:n.strict_mode;d.mutate({...k,strict_mode:C})},p=li("flex flex-col border border-slate-200 rounded-8 p-12",{"gap-12":e,"gap-4":!e});return b.jsx(C2,{...c,children:b.jsxs("div",{className:"flex flex-col flex-1 gap-8",children:[b.jsxs("div",{className:p,children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsxs(gy,{children:[b.jsx(vy,{asChild:!0,children:b.jsx(Sm,{size:16,className:"text-purple-500"})}),b.jsx(Am,{side:"left",children:"The current invitation will expire after the selected duration, rendering it invalid. A new invitation will be automatically generated to ensure continuous access."})]}),b.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Invitation expiry:"})]}),b.jsx("div",{className:"ml-20",children:e?b.jsx(BT,{control:c.control,name:"invitation_expiry",render:({field:y})=>b.jsx(mf,{children:b.jsx(gf,{children:b.jsxs(J2,{onValueChange:S=>{h("invitation_expiry",S)},defaultValue:y.value,className:"flex flex-col space-y-4",children:[b.jsxs(mf,{className:"flex items-center space-x-12 space-y-0",children:[b.jsx(gf,{children:b.jsx(px,{value:"30"})}),b.jsx(hx,{className:"font-normal",children:"30 minutes"})]}),b.jsxs(mf,{className:"flex items-center space-x-12 space-y-0",children:[b.jsx(gf,{children:b.jsx(px,{value:"90"})}),b.jsx(hx,{className:"font-normal",children:"90 minutes"})]}),b.jsxs(mf,{className:"flex items-center space-x-12 space-y-0",children:[b.jsx(gf,{children:b.jsx(px,{value:"180"})}),b.jsx(hx,{className:"font-normal",children:"3 hours"})]})]})})})}):b.jsxs("p",{className:"text-sm text-slate-600 font-medium italic",children:["The invitation will expire after ",i," minutes."]})})]}),b.jsxs("div",{className:p,children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsxs(gy,{children:[b.jsx(vy,{asChild:!0,children:b.jsx(Sm,{size:16,className:"text-purple-500"})}),b.jsx(Am,{side:"left",children:"When enabled, users aside from the host can invite other users to join the room."})]}),b.jsx("span",{className:"text-sm font-medium",children:"Invite permission:"})]}),b.jsx("div",{className:"flex items-center gap-8 ml-20",children:e?b.jsxs("div",{className:"flex flex-col gap-4",children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx(BT,{control:c.control,name:"invite_permission",render:({field:y})=>b.jsx(mf,{children:b.jsx(gf,{children:b.jsx(hS,{id:"invite_permission",checked:y.value,onCheckedChange:S=>{h("invite_permission",S)}})})})}),b.jsx(t_,{htmlFor:"invite_permission",className:"mb-4 text-sm font-medium",children:c.watch("invite_permission")?"Allow":"Disallow"})]}),r&&b.jsx("p",{className:"text-xs text-yellow-500",children:"Enabling this setting will disable strict mode."})]}):b.jsx("p",{className:"mb-4 text-sm text-slate-600 font-medium italic",children:s?"Anyone can invite":"Only host can invite"})})]})]})})},_Z=()=>b.jsxs("section",{className:"rounded-2xl border border-purple-200 p-12 bg-gradient-to-br from-purple-50 to-purple-100 shadow-sm mb-4",children:[b.jsxs("div",{className:"flex items-center gap-8 mb-8",children:[b.jsx("div",{className:"size-36 rounded-xl bg-purple-600 text-white flex items-center justify-center shadow-md",children:b.jsx(Hm,{size:16})}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-sm font-semibold text-purple-900",children:"NFT Login Access"}),b.jsx("p",{className:"text-[11px] text-purple-700 -mt-0.5",children:"Add wallet-based login verification"})]})]}),b.jsxs("div",{className:"space-y-2 mt-3",children:[b.jsx("label",{className:"text-[11px] font-medium text-purple-900",children:"NFT Collection Address"}),b.jsx(Cm,{className:"w-full border bg-white px-3 py-2 text-xs outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"0x123abc..."})]}),b.jsxs("div",{className:"space-y-2 mt-3",children:[b.jsx("label",{className:"text-[11px] font-medium text-purple-900",children:"Minimum NFTs Needed"}),b.jsx(Cm,{type:"number",defaultValue:1})]}),b.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[b.jsx("p",{className:"text-[11px] text-purple-700 max-w-[70%] leading-snug",children:"Only users holding the required NFT will be allowed to log in."}),b.jsx("button",{className:"shrink-0 inline-flex items-center rounded-full bg-purple-600 text-white px-3 py-1.5 text-[10px] font-medium shadow hover:bg-purple-700 active:bg-purple-800 transition",children:"Enable"})]})]});function VI(t,[e,n]){return Math.min(n,Math.max(e,t))}function BI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function $F(...t){return e=>{let n=!1;const r=t.map(i=>{const s=BI(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():BI(t[i],null)}}}}function Nl(...t){return v.useCallback($F(...t),t)}function WF(t){const e=RZ(t),n=v.forwardRef((r,i)=>{const{children:s,...o}=r,a=v.Children.toArray(s),c=a.find(AZ);if(c){const d=c.props.children,h=a.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return b.jsx(e,{...o,ref:i,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function RZ(t){const e=v.forwardRef((n,r)=>{const{children:i,...s}=n;if(v.isValidElement(i)){const o=NZ(i),a=IZ(s,i.props);return i.type!==v.Fragment&&(a.ref=r?$F(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var PZ=Symbol("radix.slottable");function AZ(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===PZ}function IZ(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function NZ(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var MZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],yo=MZ.reduce((t,e)=>{const n=WF(`Primitive.${e}`),r=v.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),OZ=[" ","Enter","ArrowUp","ArrowDown"],DZ=[" ","Enter"],Wf="Select",[pS,mS,LZ]=r_(Wf),[Zm,Bge]=Yo(Wf,[LZ,Xm]),gS=Xm(),[jZ,dd]=Zm(Wf),[FZ,UZ]=Zm(Wf),HF=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:c,dir:d,name:h,autoComplete:p,disabled:y,required:S,form:k}=t,C=gS(e),[E,_]=v.useState(null),[A,M]=v.useState(null),[I,N]=v.useState(!1),O=rS(d),[j,V]=Zu({prop:r,defaultProp:i??!1,onChange:s,caller:Wf}),[$,W]=Zu({prop:o,defaultProp:a,onChange:c,caller:Wf}),J=v.useRef(null),Y=E?k||!!E.closest("form"):!0,[pe,fe]=v.useState(new Set),Ee=Array.from(pe).map(le=>le.props.value).join(";");return b.jsx(g_,{...C,children:b.jsxs(jZ,{required:S,scope:e,trigger:E,onTriggerChange:_,valueNode:A,onValueNodeChange:M,valueNodeHasChildren:I,onValueNodeHasChildrenChange:N,contentId:bl(),value:$,onValueChange:W,open:j,onOpenChange:V,dir:O,triggerPointerDownPosRef:J,disabled:y,children:[b.jsx(pS.Provider,{scope:e,children:b.jsx(FZ,{scope:t.__scopeSelect,onNativeOptionAdd:v.useCallback(le=>{fe(Se=>new Set(Se).add(le))},[]),onNativeOptionRemove:v.useCallback(le=>{fe(Se=>{const q=new Set(Se);return q.delete(le),q})},[]),children:n})}),Y?b.jsxs(hU,{"aria-hidden":!0,required:S,tabIndex:-1,name:h,autoComplete:p,value:$,onChange:le=>W(le.target.value),disabled:y,form:k,children:[$===void 0?b.jsx("option",{value:""}):null,Array.from(pe)]},Ee):null]})})};HF.displayName=Wf;var qF="SelectTrigger",KF=v.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=gS(n),o=dd(qF,n),a=o.disabled||r,c=Nl(e,o.onTriggerChange),d=mS(n),h=v.useRef("touch"),[p,y,S]=mU(C=>{const E=d().filter(M=>!M.disabled),_=E.find(M=>M.value===o.value),A=gU(E,C,_);A!==void 0&&o.onValueChange(A.value)}),k=C=>{a||(o.onOpenChange(!0),S()),C&&(o.triggerPointerDownPosRef.current={x:Math.round(C.pageX),y:Math.round(C.pageY)})};return b.jsx(v_,{asChild:!0,...s,children:b.jsx(yo.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":pU(o.value)?"":void 0,...i,ref:c,onClick:ft(i.onClick,C=>{C.currentTarget.focus(),h.current!=="mouse"&&k(C)}),onPointerDown:ft(i.onPointerDown,C=>{h.current=C.pointerType;const E=C.target;E.hasPointerCapture(C.pointerId)&&E.releasePointerCapture(C.pointerId),C.button===0&&C.ctrlKey===!1&&C.pointerType==="mouse"&&(k(C),C.preventDefault())}),onKeyDown:ft(i.onKeyDown,C=>{const E=p.current!=="";!(C.ctrlKey||C.altKey||C.metaKey)&&C.key.length===1&&y(C.key),!(E&&C.key===" ")&&OZ.includes(C.key)&&(k(),C.preventDefault())})})})});KF.displayName=qF;var GF="SelectValue",YF=v.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,c=dd(GF,n),{onValueNodeHasChildrenChange:d}=c,h=s!==void 0,p=Nl(e,c.onValueNodeChange);return qi(()=>{d(h)},[d,h]),b.jsx(yo.span,{...a,ref:p,style:{pointerEvents:"none"},children:pU(c.value)?b.jsx(b.Fragment,{children:o}):s})});YF.displayName=GF;var VZ="SelectIcon",QF=v.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return b.jsx(yo.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});QF.displayName=VZ;var BZ="SelectPortal",JF=t=>b.jsx(qw,{asChild:!0,...t});JF.displayName=BZ;var Hf="SelectContent",XF=v.forwardRef((t,e)=>{const n=dd(Hf,t.__scopeSelect),[r,i]=v.useState();if(qi(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?Xf.createPortal(b.jsx(ZF,{scope:t.__scopeSelect,children:b.jsx(pS.Slot,{scope:t.__scopeSelect,children:b.jsx("div",{children:t.children})})}),s):null}return b.jsx(eU,{...t,ref:e})});XF.displayName=Hf;var ga=10,[ZF,fd]=Zm(Hf),zZ="SelectContentImpl",$Z=WF("SelectContent.RemoveScroll"),eU=v.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:c,align:d,alignOffset:h,arrowPadding:p,collisionBoundary:y,collisionPadding:S,sticky:k,hideWhenDetached:C,avoidCollisions:E,..._}=t,A=dd(Hf,n),[M,I]=v.useState(null),[N,O]=v.useState(null),j=Nl(e,ie=>I(ie)),[V,$]=v.useState(null),[W,J]=v.useState(null),Y=mS(n),[pe,fe]=v.useState(!1),Ee=v.useRef(!1);v.useEffect(()=>{if(M)return LE(M)},[M]),DE();const le=v.useCallback(ie=>{const[be,...Le]=Y().map(pt=>pt.ref.current),[$e]=Le.slice(-1),Je=document.activeElement;for(const pt of ie)if(pt===Je||(pt==null||pt.scrollIntoView({block:"nearest"}),pt===be&&N&&(N.scrollTop=0),pt===$e&&N&&(N.scrollTop=N.scrollHeight),pt==null||pt.focus(),document.activeElement!==Je))return},[Y,N]),Se=v.useCallback(()=>le([V,M]),[le,V,M]);v.useEffect(()=>{pe&&Se()},[pe,Se]);const{onOpenChange:q,triggerPointerDownPosRef:te}=A;v.useEffect(()=>{if(M){let ie={x:0,y:0};const be=$e=>{var Je,pt;ie={x:Math.abs(Math.round($e.pageX)-(((Je=te.current)==null?void 0:Je.x)??0)),y:Math.abs(Math.round($e.pageY)-(((pt=te.current)==null?void 0:pt.y)??0))}},Le=$e=>{ie.x<=10&&ie.y<=10?$e.preventDefault():M.contains($e.target)||q(!1),document.removeEventListener("pointermove",be),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",be),document.addEventListener("pointerup",Le,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",be),document.removeEventListener("pointerup",Le,{capture:!0})}}},[M,q,te]),v.useEffect(()=>{const ie=()=>q(!1);return window.addEventListener("blur",ie),window.addEventListener("resize",ie),()=>{window.removeEventListener("blur",ie),window.removeEventListener("resize",ie)}},[q]);const[ae,B]=mU(ie=>{const be=Y().filter(Je=>!Je.disabled),Le=be.find(Je=>Je.ref.current===document.activeElement),$e=gU(be,ie,Le);$e&&setTimeout(()=>$e.ref.current.focus())}),de=v.useCallback((ie,be,Le)=>{const $e=!Ee.current&&!Le;(A.value!==void 0&&A.value===be||$e)&&($(ie),$e&&(Ee.current=!0))},[A.value]),se=v.useCallback(()=>M==null?void 0:M.focus(),[M]),me=v.useCallback((ie,be,Le)=>{const $e=!Ee.current&&!Le;(A.value!==void 0&&A.value===be||$e)&&J(ie)},[A.value]),Te=r==="popper"?GT:tU,Re=Te===GT?{side:a,sideOffset:c,align:d,alignOffset:h,arrowPadding:p,collisionBoundary:y,collisionPadding:S,sticky:k,hideWhenDetached:C,avoidCollisions:E}:{};return b.jsx(ZF,{scope:n,content:M,viewport:N,onViewportChange:O,itemRefCallback:de,selectedItem:V,onItemLeave:se,itemTextRefCallback:me,focusSelectedItem:Se,selectedItemText:W,position:r,isPositioned:pe,searchRef:ae,children:b.jsx(Gw,{as:$Z,allowPinchZoom:!0,children:b.jsx(Hw,{asChild:!0,trapped:A.open,onMountAutoFocus:ie=>{ie.preventDefault()},onUnmountAutoFocus:ft(i,ie=>{var be;(be=A.trigger)==null||be.focus({preventScroll:!0}),ie.preventDefault()}),children:b.jsx(Yy,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:ie=>ie.preventDefault(),onDismiss:()=>A.onOpenChange(!1),children:b.jsx(Te,{role:"listbox",id:A.contentId,"data-state":A.open?"open":"closed",dir:A.dir,onContextMenu:ie=>ie.preventDefault(),..._,...Re,onPlaced:()=>fe(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:ft(_.onKeyDown,ie=>{const be=ie.ctrlKey||ie.altKey||ie.metaKey;if(ie.key==="Tab"&&ie.preventDefault(),!be&&ie.key.length===1&&B(ie.key),["ArrowUp","ArrowDown","Home","End"].includes(ie.key)){let $e=Y().filter(Je=>!Je.disabled).map(Je=>Je.ref.current);if(["ArrowUp","End"].includes(ie.key)&&($e=$e.slice().reverse()),["ArrowUp","ArrowDown"].includes(ie.key)){const Je=ie.target,pt=$e.indexOf(Je);$e=$e.slice(pt+1)}setTimeout(()=>le($e)),ie.preventDefault()}})})})})})})});eU.displayName=zZ;var WZ="SelectItemAlignedPosition",tU=v.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=dd(Hf,n),o=fd(Hf,n),[a,c]=v.useState(null),[d,h]=v.useState(null),p=Nl(e,j=>h(j)),y=mS(n),S=v.useRef(!1),k=v.useRef(!0),{viewport:C,selectedItem:E,selectedItemText:_,focusSelectedItem:A}=o,M=v.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&d&&C&&E&&_){const j=s.trigger.getBoundingClientRect(),V=d.getBoundingClientRect(),$=s.valueNode.getBoundingClientRect(),W=_.getBoundingClientRect();if(s.dir!=="rtl"){const Je=W.left-V.left,pt=$.left-Je,Et=j.left-pt,wt=j.width+Et,_n=Math.max(wt,V.width),er=window.innerWidth-ga,dn=VI(pt,[ga,Math.max(ga,er-_n)]);a.style.minWidth=wt+"px",a.style.left=dn+"px"}else{const Je=V.right-W.right,pt=window.innerWidth-$.right-Je,Et=window.innerWidth-j.right-pt,wt=j.width+Et,_n=Math.max(wt,V.width),er=window.innerWidth-ga,dn=VI(pt,[ga,Math.max(ga,er-_n)]);a.style.minWidth=wt+"px",a.style.right=dn+"px"}const J=y(),Y=window.innerHeight-ga*2,pe=C.scrollHeight,fe=window.getComputedStyle(d),Ee=parseInt(fe.borderTopWidth,10),le=parseInt(fe.paddingTop,10),Se=parseInt(fe.borderBottomWidth,10),q=parseInt(fe.paddingBottom,10),te=Ee+le+pe+q+Se,ae=Math.min(E.offsetHeight*5,te),B=window.getComputedStyle(C),de=parseInt(B.paddingTop,10),se=parseInt(B.paddingBottom,10),me=j.top+j.height/2-ga,Te=Y-me,Re=E.offsetHeight/2,ie=E.offsetTop+Re,be=Ee+le+ie,Le=te-be;if(be<=me){const Je=J.length>0&&E===J[J.length-1].ref.current;a.style.bottom="0px";const pt=d.clientHeight-C.offsetTop-C.offsetHeight,Et=Math.max(Te,Re+(Je?se:0)+pt+Se),wt=be+Et;a.style.height=wt+"px"}else{const Je=J.length>0&&E===J[0].ref.current;a.style.top="0px";const Et=Math.max(me,Ee+C.offsetTop+(Je?de:0)+Re)+Le;a.style.height=Et+"px",C.scrollTop=be-me+C.offsetTop}a.style.margin=`${ga}px 0`,a.style.minHeight=ae+"px",a.style.maxHeight=Y+"px",r==null||r(),requestAnimationFrame(()=>S.current=!0)}},[y,s.trigger,s.valueNode,a,d,C,E,_,s.dir,r]);qi(()=>M(),[M]);const[I,N]=v.useState();qi(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const O=v.useCallback(j=>{j&&k.current===!0&&(M(),A==null||A(),k.current=!1)},[M,A]);return b.jsx(qZ,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:S,onScrollButtonChange:O,children:b.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:b.jsx(yo.div,{...i,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});tU.displayName=WZ;var HZ="SelectPopperPosition",GT=v.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=ga,...s}=t,o=gS(n);return b.jsx(y_,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});GT.displayName=HZ;var[qZ,w_]=Zm(Hf,{}),YT="SelectViewport",nU=v.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=fd(YT,n),o=w_(YT,n),a=Nl(e,s.onViewportChange),c=v.useRef(0);return b.jsxs(b.Fragment,{children:[b.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),b.jsx(pS.Slot,{scope:n,children:b.jsx(yo.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ft(i.onScroll,d=>{const h=d.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:y}=o;if(y!=null&&y.current&&p){const S=Math.abs(c.current-h.scrollTop);if(S>0){const k=window.innerHeight-ga*2,C=parseFloat(p.style.minHeight),E=parseFloat(p.style.height),_=Math.max(C,E);if(_<k){const A=_+S,M=Math.min(k,A),I=A-M;p.style.height=M+"px",p.style.bottom==="0px"&&(h.scrollTop=I>0?I:0,p.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});nU.displayName=YT;var rU="SelectGroup",[KZ,GZ]=Zm(rU),YZ=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=bl();return b.jsx(KZ,{scope:n,id:i,children:b.jsx(yo.div,{role:"group","aria-labelledby":i,...r,ref:e})})});YZ.displayName=rU;var iU="SelectLabel",QZ=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=GZ(iU,n);return b.jsx(yo.div,{id:i.id,...r,ref:e})});QZ.displayName=iU;var sw="SelectItem",[JZ,sU]=Zm(sw),oU=v.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=dd(sw,n),c=fd(sw,n),d=a.value===r,[h,p]=v.useState(s??""),[y,S]=v.useState(!1),k=Nl(e,A=>{var M;return(M=c.itemRefCallback)==null?void 0:M.call(c,A,r,i)}),C=bl(),E=v.useRef("touch"),_=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return b.jsx(JZ,{scope:n,value:r,disabled:i,textId:C,isSelected:d,onItemTextChange:v.useCallback(A=>{p(M=>M||((A==null?void 0:A.textContent)??"").trim())},[]),children:b.jsx(pS.ItemSlot,{scope:n,value:r,disabled:i,textValue:h,children:b.jsx(yo.div,{role:"option","aria-labelledby":C,"data-highlighted":y?"":void 0,"aria-selected":d&&y,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:k,onFocus:ft(o.onFocus,()=>S(!0)),onBlur:ft(o.onBlur,()=>S(!1)),onClick:ft(o.onClick,()=>{E.current!=="mouse"&&_()}),onPointerUp:ft(o.onPointerUp,()=>{E.current==="mouse"&&_()}),onPointerDown:ft(o.onPointerDown,A=>{E.current=A.pointerType}),onPointerMove:ft(o.onPointerMove,A=>{var M;E.current=A.pointerType,i?(M=c.onItemLeave)==null||M.call(c):E.current==="mouse"&&A.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ft(o.onPointerLeave,A=>{var M;A.currentTarget===document.activeElement&&((M=c.onItemLeave)==null||M.call(c))}),onKeyDown:ft(o.onKeyDown,A=>{var I;((I=c.searchRef)==null?void 0:I.current)!==""&&A.key===" "||(DZ.includes(A.key)&&_(),A.key===" "&&A.preventDefault())})})})})});oU.displayName=sw;var Bv="SelectItemText",aU=v.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=dd(Bv,n),a=fd(Bv,n),c=sU(Bv,n),d=UZ(Bv,n),[h,p]=v.useState(null),y=Nl(e,_=>p(_),c.onItemTextChange,_=>{var A;return(A=a.itemTextRefCallback)==null?void 0:A.call(a,_,c.value,c.disabled)}),S=h==null?void 0:h.textContent,k=v.useMemo(()=>b.jsx("option",{value:c.value,disabled:c.disabled,children:S},c.value),[c.disabled,c.value,S]),{onNativeOptionAdd:C,onNativeOptionRemove:E}=d;return qi(()=>(C(k),()=>E(k)),[C,E,k]),b.jsxs(b.Fragment,{children:[b.jsx(yo.span,{id:c.textId,...s,ref:y}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Xf.createPortal(s.children,o.valueNode):null]})});aU.displayName=Bv;var lU="SelectItemIndicator",cU=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return sU(lU,n).isSelected?b.jsx(yo.span,{"aria-hidden":!0,...r,ref:e}):null});cU.displayName=lU;var QT="SelectScrollUpButton",uU=v.forwardRef((t,e)=>{const n=fd(QT,t.__scopeSelect),r=w_(QT,t.__scopeSelect),[i,s]=v.useState(!1),o=Nl(e,r.onScrollButtonChange);return qi(()=>{if(n.viewport&&n.isPositioned){let a=function(){const d=c.scrollTop>0;s(d)};const c=n.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?b.jsx(fU,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=n;a&&c&&(a.scrollTop=a.scrollTop-c.offsetHeight)}}):null});uU.displayName=QT;var JT="SelectScrollDownButton",dU=v.forwardRef((t,e)=>{const n=fd(JT,t.__scopeSelect),r=w_(JT,t.__scopeSelect),[i,s]=v.useState(!1),o=Nl(e,r.onScrollButtonChange);return qi(()=>{if(n.viewport&&n.isPositioned){let a=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;s(h)};const c=n.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?b.jsx(fU,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=n;a&&c&&(a.scrollTop=a.scrollTop+c.offsetHeight)}}):null});dU.displayName=JT;var fU=v.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=fd("SelectScrollButton",n),o=v.useRef(null),a=mS(n),c=v.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return v.useEffect(()=>()=>c(),[c]),qi(()=>{var h;const d=a().find(p=>p.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[a]),b.jsx(yo.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:ft(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ft(i.onPointerMove,()=>{var d;(d=s.onItemLeave)==null||d.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ft(i.onPointerLeave,()=>{c()})})}),XZ="SelectSeparator",ZZ=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return b.jsx(yo.div,{"aria-hidden":!0,...r,ref:e})});ZZ.displayName=XZ;var XT="SelectArrow",eee=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=gS(n),s=dd(XT,n),o=fd(XT,n);return s.open&&o.position==="popper"?b.jsx(b_,{...i,...r,ref:e}):null});eee.displayName=XT;var tee="SelectBubbleInput",hU=v.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=v.useRef(null),s=Nl(r,i),o=s_(e);return v.useEffect(()=>{const a=i.current;if(!a)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&h){const p=new Event("change",{bubbles:!0});h.call(a,e),a.dispatchEvent(p)}},[o,e]),b.jsx(yo.select,{...n,style:{...kF,...n.style},ref:s,defaultValue:e})});hU.displayName=tee;function pU(t){return t===""||t===void 0}function mU(t){const e=Tl(t),n=v.useRef(""),r=v.useRef(0),i=v.useCallback(o=>{const a=n.current+o;e(a),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(a)},[e]),s=v.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function gU(t,e,n){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=nee(t,Math.max(s,0));i.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function nee(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var ree=HF,iee=KF,see=YF,oee=QF,aee=JF,lee=XF,cee=nU,uee=oU,dee=aU,fee=cU,hee=uU,pee=dU;function zI({...t}){return b.jsx(ree,{"data-slot":"select",...t})}function $I({...t}){return b.jsx(see,{"data-slot":"select-value",...t})}function WI({className:t,size:e="default",children:n,...r}){return b.jsxs(iee,{"data-slot":"select-trigger","data-size":e,className:Vt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-8 rounded-md border bg-transparent px-12 py-8 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-36 data-[size=sm]:h-32 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-16",t),...r,children:[n,b.jsx(oee,{asChild:!0,children:b.jsx(TL,{className:"size-16 opacity-50"})})]})}function HI({className:t,children:e,position:n="popper",...r}){return b.jsx(aee,{children:b.jsxs(lee,{"data-slot":"select-content",className:Vt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[b.jsx(mee,{}),b.jsx(cee,{className:Vt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),b.jsx(gee,{})]})})}function qI({className:t,children:e,...n}){return b.jsxs(uee,{"data-slot":"select-item",className:Vt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[b.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:b.jsx(fee,{children:b.jsx(aq,{className:"size-4"})})}),b.jsx(dee,{children:e})]})}function mee({className:t,...e}){return b.jsx(hee,{"data-slot":"select-scroll-up-button",className:Vt("flex cursor-default items-center justify-center py-1",t),...e,children:b.jsx(RT,{className:"size-4"})})}function gee({className:t,...e}){return b.jsx(pee,{"data-slot":"select-scroll-down-button",className:Vt("flex cursor-default items-center justify-center py-1",t),...e,children:b.jsx(TL,{className:"size-4"})})}var KI={};function vee(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}var yee=Object.defineProperty,bee=(t,e,n)=>e in t?yee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,GI=(t,e,n)=>bee(t,typeof e!="symbol"?e+"":e,n);class zs{constructor(){GI(this,"_locking"),GI(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(i=>e=()=>{this._locks-=1,i()}),r=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),r}}function Rr(t,e){if(!t)throw new Error(e)}const xee=34028234663852886e22,wee=-34028234663852886e22,See=4294967295,Cee=2147483647,kee=-2147483648;function gx(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>Cee||t<kee)throw new Error("invalid int 32: "+t)}function ZT(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>See||t<0)throw new Error("invalid uint 32: "+t)}function vU(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>xee||t<wee))throw new Error("invalid float 32: "+t)}const yU=Symbol("@bufbuild/protobuf/enum-type");function Tee(t){const e=t[yU];return Rr(e,"missing enum type on enum object"),e}function bU(t,e,n,r){t[yU]=xU(e,n.map(i=>({no:i.no,name:i.name,localName:t[i.no]})))}function xU(t,e,n){const r=Object.create(null),i=Object.create(null),s=[];for(const o of e){const a=wU(o);s.push(a),r[o.name]=a,i[o.no]=a}return{typeName:t,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function Eee(t,e,n){const r={};for(const i of e){const s=wU(i);r[s.localName]=s.no,r[s.no]=s.localName}return bU(r,t,e),r}function wU(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}let S_=class{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(n);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,n){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(n);return i.readMessage(r,e,s,this),this}fromJsonString(e,n){let r;try{r=JSON.parse(e)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(e){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var n;const r=this.toJson(e);return JSON.stringify(r,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}};function _ee(t,e,n,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[s]:function(a){t.util.initFields(this),t.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new S_),Object.assign(o,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(a,c){return new o().fromBinary(a,c)},fromJson(a,c){return new o().fromJson(a,c)},fromJsonString(a,c){return new o().fromJsonString(a,c)},equals(a,c){return t.util.equals(o,a,c)}}),o}function Ree(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,(i&128)==0)return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,(n&128)==0)return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,(i&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function fk(t,e,n){for(let s=0;s<28;s=s+7){const o=t>>>s,a=!(!(o>>>7)&&e==0),c=(a?o|128:o)&255;if(n.push(c),!a)return}const r=t>>>28&15|(e&7)<<4,i=e>>3!=0;if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),c=(a?o|128:o)&255;if(n.push(c),!a)return}n.push(e>>>31&1)}}const vx=4294967296;function YI(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let r=0,i=0;function s(o,a){const c=Number(t.slice(o,a));i*=n,r=r*n+c,r>=vx&&(i=i+(r/vx|0),r=r%vx)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?CU(r,i):C_(r,i)}function Pee(t,e){let n=C_(t,e);const r=n.hi&2147483648;r&&(n=CU(n.lo,n.hi));const i=SU(n.lo,n.hi);return r?"-"+i:i}function SU(t,e){if({lo:t,hi:e}=Aee(t,e),e<=2097151)return String(vx*e+t);const n=t&16777215,r=(t>>>24|e<<8)&16777215,i=e>>16&65535;let s=n+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const c=1e7;return s>=c&&(o+=Math.floor(s/c),s%=c),o>=c&&(a+=Math.floor(o/c),o%=c),a.toString()+QI(o)+QI(s)}function Aee(t,e){return{lo:t>>>0,hi:e>>>0}}function C_(t,e){return{lo:t|0,hi:e|0}}function CU(t,e){return e=~e,t?t=~t+1:e+=1,C_(t,e)}const QI=t=>{const e=String(t);return"0000000".slice(e.length)+e};function JI(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function Iee(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;(t&128)!==0&&n<10;n++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function Nee(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof KI!="object"||KI.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(c){const d=typeof c=="bigint"?c:BigInt(c);if(d>s||d<i)throw new Error("int64 invalid: ".concat(c));return d},uParse(c){const d=typeof c=="bigint"?c:BigInt(c);if(d>a||d<o)throw new Error("uint64 invalid: ".concat(c));return d},enc(c){return t.setBigInt64(0,this.parse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(c){return t.setBigInt64(0,this.uParse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(c,d){return t.setInt32(0,c,!0),t.setInt32(4,d,!0),t.getBigInt64(0,!0)},uDec(c,d){return t.setInt32(0,c,!0),t.setInt32(4,d,!0),t.getBigUint64(0,!0)}}}const n=i=>Rr(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>Rr(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),YI(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),YI(i)},dec(i,s){return Pee(i,s)},uDec(i,s){return SU(i,s)}}}const ar=Nee();var De;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(De||(De={}));var sd;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(sd||(sd={}));function Su(t,e,n){if(e===n)return!0;if(t==De.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case De.UINT64:case De.FIXED64:case De.INT64:case De.SFIXED64:case De.SINT64:return e==n}return!1}function Im(t,e){switch(t){case De.BOOL:return!1;case De.UINT64:case De.FIXED64:case De.INT64:case De.SFIXED64:case De.SINT64:return e==0?ar.zero:"0";case De.DOUBLE:case De.FLOAT:return 0;case De.BYTES:return new Uint8Array(0);case De.STRING:return"";default:return 0}}function kU(t,e){switch(t){case De.BOOL:return e===!1;case De.STRING:return e==="";case De.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var jr;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(jr||(jr={}));class Mee{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(ZT(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return gx(e),JI(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){vU(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){ZT(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){gx(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return gx(e),e=(e<<1^e>>31)>>>0,JI(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=ar.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=ar.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=ar.enc(e);return fk(n.lo,n.hi,this.buf),this}sint64(e){let n=ar.enc(e),r=n.hi>>31,i=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return fk(i,s,this.buf),this}uint64(e){let n=ar.uEnc(e);return fk(n.lo,n.hi,this.buf),this}}class Oee{constructor(e,n){this.varint64=Ree,this.uint32=Iee,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e,n){let r=this.pos;switch(e){case jr.Varint:for(;this.buf[this.pos++]&128;);break;case jr.Bit64:this.pos+=4;case jr.Bit32:this.pos+=4;break;case jr.LengthDelimited:let i=this.uint32();this.pos+=i;break;case jr.StartGroup:for(;;){const[s,o]=this.tag();if(o===jr.EndGroup){if(n!==void 0&&s!==n)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return ar.dec(...this.varint64())}uint64(){return ar.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,ar.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return ar.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return ar.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function Dee(t,e,n,r){let i;return{typeName:e,extendee:n,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=e.split(".").pop(),s.jsonName="[".concat(e,"]"),i=t.util.newFieldList([s]).list()[0]}return i},runtime:t}}function TU(t){const e=t.field.localName,n=Object.create(null);return n[e]=Lee(t),[n,()=>n[e]]}function Lee(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Im(e.T,e.L);case"message":const n=e.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function jee(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let Sc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),vS=[];for(let t=0;t<Sc.length;t++)vS[Sc[t].charCodeAt(0)]=t;vS[45]=Sc.indexOf("+");vS[95]=Sc.indexOf("/");const EU={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<t.length;a++){if(s=vS[t.charCodeAt(a)],s===void 0)switch(t[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:n[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:n[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:n[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,i=0;for(let s=0;s<t.length;s++)switch(r=t[s],n){case 0:e+=Sc[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=Sc[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=Sc[i|r>>6],e+=Sc[r&63],n=0;break}return n&&(e+=Sc[i],e+="=",n==1&&(e+="=")),e}};function Fee(t,e,n){RU(e,t);const r=e.runtime.bin.makeReadOptions(n),i=jee(t.getType().runtime.bin.listUnknownFields(t),e.field),[s,o]=TU(e);for(const a of i)e.runtime.bin.readField(s,r.readerFactory(a.data),e.field,a.wireType,r);return o()}function Uee(t,e,n,r){RU(e,t);const i=e.runtime.bin.makeReadOptions(r),s=e.runtime.bin.makeWriteOptions(r);if(_U(t,e)){const d=t.getType().runtime.bin.listUnknownFields(t).filter(h=>h.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const h of d)t.getType().runtime.bin.onUnknownField(t,h.no,h.wireType,h.data)}const o=s.writerFactory();let a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,n,o,s);const c=i.readerFactory(o.finish());for(;c.pos<c.len;){const[d,h]=c.tag(),p=c.skip(h,d);t.getType().runtime.bin.onUnknownField(t,d,h,p)}}function _U(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(r=>r.no==e.field.no)}function RU(t,e){Rr(t.extendee.typeName==e.getType().typeName,"extension ".concat(t.typeName," can only be applied to message ").concat(t.extendee.typeName))}function PU(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!kU(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function XI(t,e){const n=t.localName,r=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=r?t.T.values[0].no:void 0;break;case"scalar":e[n]=r?Im(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function Cc(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(S_.prototype).every(r=>r in t&&typeof t[r]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function AU(t,e){return Cc(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}De.DOUBLE,De.FLOAT,De.INT64,De.UINT64,De.INT32,De.UINT32,De.BOOL,De.STRING,De.BYTES;const ZI={ignoreUnknownFields:!1},eN={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Vee(t){return t?Object.assign(Object.assign({},ZI),t):ZI}function Bee(t){return t?Object.assign(Object.assign({},eN),t):eN}const ow=Symbol(),yx=Symbol();function zee(){return{makeReadOptions:Vee,makeWriteOptions:Bee,readMessage(t,e,n,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(t.typeName," from JSON: ").concat(ul(e)));r=r??new t;const i=new Map,s=n.typeRegistry;for(const[o,a]of Object.entries(e)){const c=t.fields.findJsonName(o);if(c){if(c.oneof){if(a===null&&c.kind=="scalar")continue;const d=i.get(c.oneof);if(d!==void 0)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: multiple keys for oneof "').concat(c.oneof.name,'" present: "').concat(d,'", "').concat(o,'"'));i.set(c.oneof,o)}tN(r,a,c,n,t)}else{let d=!1;if(s!=null&&s.findExtension&&o.startsWith("[")&&o.endsWith("]")){const h=s.findExtension(o.substring(1,o.length-1));if(h&&h.extendee.typeName==t.typeName){d=!0;const[p,y]=TU(h);tN(p,a,h.field,n,h),Uee(r,h,y(),n)}}if(!d&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: key "').concat(o,'" is unknown'))}}return r},writeMessage(t,e){const n=t.getType(),r={};let i;try{for(i of n.fields.byNumber()){if(!PU(i,t)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!Wee(i))continue}const o=i.oneof?t[i.oneof.localName].value:t[i.localName],a=nN(i,o,e);a!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=a)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const o of n.runtime.bin.listUnknownFields(t)){const a=s.findExtensionFor(n.typeName,o.no);if(a&&_U(t,a)){const c=Fee(t,a,e),d=nN(a.field,c,e);d!==void 0&&(r[a.field.jsonName]=d)}}}catch(s){const o=i?"cannot encode field ".concat(n.typeName,".").concat(i.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),a=s instanceof Error?s.message:String(s);throw new Error(o+(a.length>0?": ".concat(a):""))}return r},readScalar(t,e,n){return Qv(t,e,n??sd.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||kU(t,e)))return bx(t,e)},debug:ul}}function ul(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function tN(t,e,n,r,i){let s=n.localName;if(n.repeated){if(Rr(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ul(e)));const o=t[s];for(const a of e){if(a===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ul(a)));switch(n.kind){case"message":o.push(n.T.fromJson(a,r));break;case"enum":const c=hk(n.T,a,r.ignoreUnknownFields,!0);c!==yx&&o.push(c);break;case"scalar":try{o.push(Qv(n.T,a,n.L,!0))}catch(d){let h="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ul(a));throw d instanceof Error&&d.message.length>0&&(h+=": ".concat(d.message)),new Error(h)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ul(e)));const o=t[s];for(const[a,c]of Object.entries(e)){if(c===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: map value null"));let d;try{d=$ee(n.K,a)}catch(h){let p="cannot decode map key for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ul(e));throw h instanceof Error&&h.message.length>0&&(p+=": ".concat(h.message)),new Error(p)}switch(n.V.kind){case"message":o[d]=n.V.T.fromJson(c,r);break;case"enum":const h=hk(n.V.T,c,r.ignoreUnknownFields,!0);h!==yx&&(o[d]=h);break;case"scalar":try{o[d]=Qv(n.V.T,c,sd.BIGINT,!0)}catch(p){let y="cannot decode map value for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ul(e));throw p instanceof Error&&p.message.length>0&&(y+=": ".concat(p.message)),new Error(y)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:s},s="value"),n.kind){case"message":const o=n.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let a=t[s];Cc(a)?a.fromJson(e,r):(t[s]=a=o.fromJson(e,r),o.fieldWrapper&&!n.oneof&&(t[s]=o.fieldWrapper.unwrapField(a)));break;case"enum":const c=hk(n.T,e,r.ignoreUnknownFields,!1);switch(c){case ow:XI(n,t);break;case yx:break;default:t[s]=c;break}break;case"scalar":try{const d=Qv(n.T,e,n.L,!1);switch(d){case ow:XI(n,t);break;default:t[s]=d;break}}catch(d){let h="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(ul(e));throw d instanceof Error&&d.message.length>0&&(h+=": ".concat(d.message)),new Error(h)}break}}function $ee(t,e){if(t===De.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Qv(t,e,sd.BIGINT,!0).toString()}function Qv(t,e,n,r){if(e===null)return r?Im(t,n):ow;switch(t){case De.DOUBLE:case De.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return t==De.FLOAT&&vU(i),i;case De.INT32:case De.FIXED32:case De.SFIXED32:case De.SINT32:case De.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return t==De.UINT32||t==De.FIXED32?ZT(s):gx(s),s;case De.INT64:case De.SFIXED64:case De.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=ar.parse(e);return n?o.toString():o;case De.FIXED64:case De.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=ar.uParse(e);return n?a.toString():a;case De.BOOL:if(typeof e!="boolean")break;return e;case De.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case De.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return EU.dec(e)}throw new Error}function hk(t,e,n,r){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:r?t.values[0].no:ow;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=t.findName(e);if(i!==void 0)return i.no;if(n)return yx;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(ul(e)))}function Wee(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function nN(t,e,n){if(t.kind=="map"){Rr(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(t.V.kind){case"scalar":for(const[o,a]of i)r[o.toString()]=bx(t.V.T,a);break;case"message":for(const[o,a]of i)r[o.toString()]=a.toJson(n);break;case"enum":const s=t.V.T;for(const[o,a]of i)r[o.toString()]=pk(s,a,n.enumAsInteger);break}return n.emitDefaultValues||i.length>0?r:void 0}if(t.repeated){Rr(Array.isArray(e));const r=[];switch(t.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(bx(t.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(pk(t.T,e[i],n.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(n));break}return n.emitDefaultValues||r.length>0?r:void 0}switch(t.kind){case"scalar":return bx(t.T,e);case"enum":return pk(t.T,e,n.enumAsInteger);case"message":return AU(t.T,e).toJson(n)}}function pk(t,e,n){var r;if(Rr(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const i=t.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function bx(t,e){switch(t){case De.INT32:case De.SFIXED32:case De.SINT32:case De.FIXED32:case De.UINT32:return Rr(typeof e=="number"),e;case De.FLOAT:case De.DOUBLE:return Rr(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case De.STRING:return Rr(typeof e=="string"),e;case De.BOOL:return Rr(typeof e=="boolean"),e;case De.UINT64:case De.FIXED64:case De.INT64:case De.SFIXED64:case De.SINT64:return Rr(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case De.BYTES:return Rr(e instanceof Uint8Array),EU.enc(e)}}const Pp=Symbol("@bufbuild/protobuf/unknown-fields"),rN={readUnknownFields:!0,readerFactory:t=>new Oee(t)},iN={writeUnknownFields:!0,writerFactory:()=>new Mee};function Hee(t){return t?Object.assign(Object.assign({},rN),t):rN}function qee(t){return t?Object.assign(Object.assign({},iN),t):iN}function Kee(){return{makeReadOptions:Hee,makeWriteOptions:qee,listUnknownFields(t){var e;return(e=t[Pp])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[Pp]},writeUnknownFields(t,e){const r=t[Pp];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(t,e,n,r){const i=t;Array.isArray(i[Pp])||(i[Pp]=[]),i[Pp].push({no:e,wireType:n,data:r})},readMessage(t,e,n,r,i){const s=t.getType(),o=i?e.len:e.pos+n;let a,c;for(;e.pos<o&&([a,c]=e.tag(),!(i===!0&&c==jr.EndGroup));){const d=s.fields.find(a);if(!d){const h=e.skip(c,a);r.readUnknownFields&&this.onUnknownField(t,a,c,h);continue}sN(t,e,d,c,r)}if(i&&(c!=jr.EndGroup||a!==n))throw new Error("invalid end group tag")},readField:sN,writeMessage(t,e,n){const r=t.getType();for(const i of r.fields.byNumber()){if(!PU(i,t)){if(i.req)throw new Error("cannot encode field ".concat(r.typeName,".").concat(i.name," to binary: required field not set"));continue}const s=i.oneof?t[i.oneof.localName].value:t[i.localName];oN(i,s,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,r){e!==void 0&&oN(t,e,n,r)}}}function sN(t,e,n,r,i){let{repeated:s,localName:o}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=o&&delete t.value,t.case=o,o="value"),n.kind){case"scalar":case"enum":const a=n.kind=="enum"?De.INT32:n.T;let c=aw;if(n.kind=="scalar"&&n.L>0&&(c=Yee),s){let y=t[o];if(r==jr.LengthDelimited&&a!=De.STRING&&a!=De.BYTES){let k=e.uint32()+e.pos;for(;e.pos<k;)y.push(c(e,a))}else y.push(c(e,a))}else t[o]=c(e,a);break;case"message":const d=n.T;s?t[o].push(xx(e,new d,i,n)):Cc(t[o])?xx(e,t[o],i,n):(t[o]=xx(e,new d,i,n),d.fieldWrapper&&!n.oneof&&!n.repeated&&(t[o]=d.fieldWrapper.unwrapField(t[o])));break;case"map":let[h,p]=Gee(n,e,i);t[o][h]=p;break}}function xx(t,e,n,r){const i=e.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(e,t,s?r.no:t.uint32(),n,s),e}function Gee(t,e,n){const r=e.uint32(),i=e.pos+r;let s,o;for(;e.pos<i;){const[a]=e.tag();switch(a){case 1:s=aw(e,t.K);break;case 2:switch(t.V.kind){case"scalar":o=aw(e,t.V.T);break;case"enum":o=e.int32();break;case"message":o=xx(e,new t.V.T,n,void 0);break}break}}if(s===void 0&&(s=Im(t.K,sd.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(t.V.kind){case"scalar":o=Im(t.V.T,sd.BIGINT);break;case"enum":o=t.V.T.values[0].no;break;case"message":o=new t.V.T;break}return[s,o]}function Yee(t,e){const n=aw(t,e);return typeof n=="bigint"?n.toString():n}function aw(t,e){switch(e){case De.STRING:return t.string();case De.BOOL:return t.bool();case De.DOUBLE:return t.double();case De.FLOAT:return t.float();case De.INT32:return t.int32();case De.INT64:return t.int64();case De.UINT64:return t.uint64();case De.FIXED64:return t.fixed64();case De.BYTES:return t.bytes();case De.FIXED32:return t.fixed32();case De.SFIXED32:return t.sfixed32();case De.SFIXED64:return t.sfixed64();case De.SINT64:return t.sint64();case De.UINT32:return t.uint32();case De.SINT32:return t.sint32()}}function oN(t,e,n,r){Rr(e!==void 0);const i=t.repeated;switch(t.kind){case"scalar":case"enum":let s=t.kind=="enum"?De.INT32:t.T;if(i)if(Rr(Array.isArray(e)),t.packed)Jee(n,s,t.no,e);else for(const o of e)Jv(n,s,t.no,o);else Jv(n,s,t.no,e);break;case"message":if(i){Rr(Array.isArray(e));for(const o of e)aN(n,r,t,o)}else aN(n,r,t,e);break;case"map":Rr(typeof e=="object"&&e!=null);for(const[o,a]of Object.entries(e))Qee(n,r,t,o,a);break}}function Qee(t,e,n,r,i){t.tag(n.no,jr.LengthDelimited),t.fork();let s=r;switch(n.K){case De.INT32:case De.FIXED32:case De.UINT32:case De.SFIXED32:case De.SINT32:s=Number.parseInt(r);break;case De.BOOL:Rr(r=="true"||r=="false"),s=r=="true";break}switch(Jv(t,n.K,1,s),n.V.kind){case"scalar":Jv(t,n.V.T,2,i);break;case"enum":Jv(t,De.INT32,2,i);break;case"message":Rr(i!==void 0),t.tag(2,jr.LengthDelimited).bytes(i.toBinary(e));break}t.join()}function aN(t,e,n,r){const i=AU(n.T,r);n.delimited?t.tag(n.no,jr.StartGroup).raw(i.toBinary(e)).tag(n.no,jr.EndGroup):t.tag(n.no,jr.LengthDelimited).bytes(i.toBinary(e))}function Jv(t,e,n,r){Rr(r!==void 0);let[i,s]=IU(e);t.tag(n,i)[s](r)}function Jee(t,e,n,r){if(!r.length)return;t.tag(n,jr.LengthDelimited).fork();let[,i]=IU(e);for(let s=0;s<r.length;s++)t[i](r[s]);t.join()}function IU(t){let e=jr.Varint;switch(t){case De.BYTES:case De.STRING:e=jr.LengthDelimited;break;case De.DOUBLE:case De.FIXED64:case De.SFIXED64:e=jr.Bit64;break;case De.FIXED32:case De.SFIXED32:case De.FLOAT:e=jr.Bit32;break}const n=De[t].toLowerCase();return[e,n]}function Xee(){return{setEnumType:bU,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const r of n.fields.byMember()){const i=r.localName,s=e,o=t;if(o[i]!=null)switch(r.kind){case"oneof":const a=o[i].case;if(a===void 0)continue;const c=r.findField(a);let d=o[i].value;c&&c.kind=="message"&&!Cc(d,c.T)?d=new c.T(d):c&&c.kind==="scalar"&&c.T===De.BYTES&&(d=Rv(d)),s[i]={case:a,value:d};break;case"scalar":case"enum":let h=o[i];r.T===De.BYTES&&(h=r.repeated?h.map(Rv):Rv(h)),s[i]=h;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===De.BYTES)for(const[S,k]of Object.entries(o[i]))s[i][S]=Rv(k);else Object.assign(s[i],o[i]);break;case"message":const y=r.V.T;for(const S of Object.keys(o[i])){let k=o[i][S];y.fieldWrapper||(k=new y(k)),s[i][S]=k}break}break;case"message":const p=r.T;if(r.repeated)s[i]=o[i].map(y=>Cc(y,p)?y:new p(y));else{const y=o[i];p.fieldWrapper?p.typeName==="google.protobuf.BytesValue"?s[i]=Rv(y):s[i]=y:s[i]=Cc(y,p)?y:new p(y)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(r=>{const i=e[r.localName],s=n[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,a)=>r.T.equals(o,s[a]));case"scalar":return i.every((o,a)=>Su(r.T,o,s[a]));case"enum":return i.every((o,a)=>Su(De.INT32,o,s[a]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":let o=i,a=s;return r.T.fieldWrapper&&(o!==void 0&&!Cc(o)&&(o=r.T.fieldWrapper.wrapField(o)),a!==void 0&&!Cc(a)&&(a=r.T.fieldWrapper.wrapField(a))),r.T.equals(o,a);case"enum":return Su(De.INT32,i,s);case"scalar":return Su(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const c=r.findField(i.case);if(c===void 0)return!0;switch(c.kind){case"message":return c.T.equals(i.value,s.value);case"enum":return Su(De.INT32,i.value,s.value);case"scalar":return Su(c.T,i.value,s.value)}throw new Error("oneof cannot contain ".concat(c.kind));case"map":const d=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const h=r.V.T;return d.every(y=>h.equals(i[y],s[y]));case"enum":return d.every(y=>Su(De.INT32,i[y],s[y]));case"scalar":const p=r.V.T;return d.every(y=>Su(p,i[y],s[y]))}break}})},clone(t){const e=t.getType(),n=new e,r=n;for(const i of e.fields.byMember()){const s=t[i.localName];let o;if(i.repeated)o=s.map(Hb);else if(i.kind=="map"){o=r[i.localName];for(const[a,c]of Object.entries(s))o[a]=Hb(c)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:Hb(s.value)}:{case:void 0}:o=Hb(s);r[i.localName]=o}for(const i of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return n}}}function Hb(t){if(t===void 0)return t;if(Cc(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function Rv(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function Zee(t,e,n){return{syntax:t,json:zee(),bin:Kee(),util:Object.assign(Object.assign({},Xee()),{newFieldList:e,initFields:n}),makeMessageType(r,i,s){return _ee(this,r,i,s)},makeEnum:Eee,makeEnumType:xU,getEnumType:Tee,makeExtension(r,i,s){return Dee(this,r,i,s)}}}class ete{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}}function NU(t,e){const n=MU(t);return e?n:ote(ste(n))}function tte(t){return NU(t,!1)}const nte=MU;function MU(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const rte=new Set(["constructor","toString","toJSON","valueOf"]),ite=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),OU=t=>"".concat(t,"$"),ste=t=>ite.has(t)?OU(t):t,ote=t=>rte.has(t)?OU(t):t;class ate{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=tte(e)}addField(e){Rr(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function lte(t,e){var n,r,i,s,o,a;const c=[];let d;for(const h of typeof t=="function"?t():t){const p=h;if(p.localName=NU(h.name,h.oneof!==void 0),p.jsonName=(n=h.jsonName)!==null&&n!==void 0?n:nte(h.name),p.repeated=(r=h.repeated)!==null&&r!==void 0?r:!1,h.kind=="scalar"&&(p.L=(i=h.L)!==null&&i!==void 0?i:sd.BIGINT),p.delimited=(s=h.delimited)!==null&&s!==void 0?s:!1,p.req=(o=h.req)!==null&&o!==void 0?o:!1,p.opt=(a=h.opt)!==null&&a!==void 0?a:!1,h.packed===void 0&&(p.packed=h.kind=="enum"||h.kind=="scalar"&&h.T!=De.BYTES&&h.T!=De.STRING),h.oneof!==void 0){const y=typeof h.oneof=="string"?h.oneof:h.oneof.name;(!d||d.name!=y)&&(d=new ate(y)),p.oneof=d,d.addField(p)}c.push(p)}return c}const ye=Zee("proto3",t=>new ete(t,e=>lte(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=Im(e.T,e.L);break}}});class Ls extends S_{constructor(e){super(),this.seconds=ar.zero,this.nanos=0,ye.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(ye.json.debug(e)));const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=ar.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Ls.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new Ls({seconds:ar.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new Ls().fromBinary(e,n)}static fromJson(e,n){return new Ls().fromJson(e,n)}static fromJsonString(e,n){return new Ls().fromJsonString(e,n)}static equals(e,n){return ye.util.equals(Ls,e,n)}}Ls.runtime=ye;Ls.typeName="google.protobuf.Timestamp";Ls.fields=ye.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const cte=ye.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:Ls},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:ute,repeated:!0},{no:5,name:"events",kind:"message",T:fte,repeated:!0}]),ute=ye.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:dte,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),dte=ye.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:Ls},{no:3,name:"value",kind:"scalar",T:2}]),fte=ye.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:Ls},{no:7,name:"normalized_end_timestamp",kind:"message",T:Ls,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),DU=ye.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),Ca=ye.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),Yr=ye.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),k_=ye.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),zv=ye.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),yy=ye.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),Ta=ye.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),df=ye.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),hte=ye.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),Si=ye.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),yS=ye.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:lw,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:GU}]),lw=ye.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),pte=ye.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:ye.getEnumType(Yr),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),qf=ye.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ye.getEnumType(Xp)},{no:4,name:"tracks",kind:"message",T:Fp,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:pte},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:ye.getEnumType(by)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:ye.getEnumType(Ta)},{no:18,name:"kind_details",kind:"enum",T:ye.getEnumType(mte),repeated:!0}]),Xp=ye.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),by=ye.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"},{no:7,name:"CONNECTOR"}]),mte=ye.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),ai=ye.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),gte=ye.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Gu,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:ye.getEnumType(LU)},{no:6,name:"sdp_cid",kind:"scalar",T:9}]),Fp=ye.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:ye.getEnumType(Ca)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:ye.getEnumType(Yr)},{no:10,name:"layers",kind:"message",T:Gu,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:gte,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:ye.getEnumType(ai)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:GU},{no:19,name:"audio_features",kind:"enum",T:ye.getEnumType(Si),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:ye.getEnumType(DU)}]),Gu=ye.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:ye.getEnumType(k_)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),LU=ye.makeEnum("livekit.VideoLayer.Mode",[{no:0,name:"MODE_UNUSED"},{no:1,name:"ONE_SPATIAL_LAYER_PER_STREAM"},{no:2,name:"MULTIPLE_SPATIAL_LAYERS_PER_STREAM"},{no:3,name:"ONE_SPATIAL_LAYER_PER_STREAM_INCOMPLETE_RTCP_SR"}]),as=ye.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:ye.getEnumType(en)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:T_,oneof:"value"},{no:3,name:"speaker",kind:"message",T:vte,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:VU,oneof:"value"},{no:7,name:"transcription",kind:"message",T:yte,oneof:"value"},{no:8,name:"metrics",kind:"message",T:cte,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:cw,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:E_,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:__,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:R_,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:uw,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:dw,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:fw,oneof:"value"},{no:18,name:"encrypted_packet",kind:"message",T:jU,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),en=ye.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),jU=ye.makeMessageType("livekit.EncryptedPacket",()=>[{no:1,name:"encryption_type",kind:"enum",T:ye.getEnumType(ai)},{no:2,name:"iv",kind:"scalar",T:12},{no:3,name:"key_index",kind:"scalar",T:13},{no:4,name:"encrypted_value",kind:"scalar",T:12}]),FU=ye.makeMessageType("livekit.EncryptedPacketPayload",()=>[{no:1,name:"user",kind:"message",T:T_,oneof:"value"},{no:3,name:"chat_message",kind:"message",T:cw,oneof:"value"},{no:4,name:"rpc_request",kind:"message",T:E_,oneof:"value"},{no:5,name:"rpc_ack",kind:"message",T:__,oneof:"value"},{no:6,name:"rpc_response",kind:"message",T:R_,oneof:"value"},{no:7,name:"stream_header",kind:"message",T:uw,oneof:"value"},{no:8,name:"stream_chunk",kind:"message",T:dw,oneof:"value"},{no:9,name:"stream_trailer",kind:"message",T:fw,oneof:"value"}]),vte=ye.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:UU,repeated:!0}]),UU=ye.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),T_=ye.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),VU=ye.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),yte=ye.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:bte,repeated:!0}]),bte=ye.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),cw=ye.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),E_=ye.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),__=ye.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),R_=ye.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:BU,oneof:"value"}]),BU=ye.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),zU=ye.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),$U=ye.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:ye.getEnumType(WU)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),WU=ye.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),HU=ye.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:ye.getEnumType(qU)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),qU=ye.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),KU=ye.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:lN},{no:2,name:"screen",kind:"message",T:lN},{no:3,name:"resume_connection",kind:"enum",T:ye.getEnumType(yy)},{no:4,name:"disabled_codecs",kind:"message",T:xte},{no:5,name:"force_relay",kind:"enum",T:ye.getEnumType(yy)}]),lN=ye.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:ye.getEnumType(yy)}]),xte=ye.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:lw,repeated:!0},{no:2,name:"publish",kind:"message",T:lw,repeated:!0}]),GU=ye.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),e1=ye.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),YU=ye.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:ye.getEnumType(e1)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),QU=ye.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),uw=ye.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:ye.getEnumType(ai)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:YU,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:QU,oneof:"content_header"}],{localName:"DataStream_Header"}),dw=ye.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),fw=ye.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),wte=ye.makeMessageType("livekit.SubscribedAudioCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"enabled",kind:"scalar",T:8}]),ka=ye.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),t1=ye.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),Ste=ye.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),Cte=ye.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:od,oneof:"message"},{no:2,name:"answer",kind:"message",T:od,oneof:"message"},{no:3,name:"trickle",kind:"message",T:bS,oneof:"message"},{no:4,name:"add_track",kind:"message",T:xy,oneof:"message"},{no:5,name:"mute",kind:"message",T:xS,oneof:"message"},{no:6,name:"subscription",kind:"message",T:wS,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:JU,oneof:"message"},{no:8,name:"leave",kind:"message",T:SS,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:ZU,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:n3,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:M_,oneof:"message"},{no:13,name:"simulate",kind:"message",T:cl,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:I_,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:s3,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:A_,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:XU,oneof:"message"}]),cN=ye.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:kte,oneof:"message"},{no:2,name:"answer",kind:"message",T:od,oneof:"message"},{no:3,name:"offer",kind:"message",T:od,oneof:"message"},{no:4,name:"trickle",kind:"message",T:bS,oneof:"message"},{no:5,name:"update",kind:"message",T:_te,oneof:"message"},{no:6,name:"track_published",kind:"message",T:P_,oneof:"message"},{no:8,name:"leave",kind:"message",T:SS,oneof:"message"},{no:9,name:"mute",kind:"message",T:xS,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:Rte,oneof:"message"},{no:11,name:"room_update",kind:"message",T:Pte,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:Ite,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:Mte,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:Dte,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:jte,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:Ete,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:Tte,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:Ute,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:zte,oneof:"message"},{no:22,name:"request_response",kind:"message",T:$te,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:Wte,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:Fte,oneof:"message"},{no:25,name:"media_sections_requirement",kind:"message",T:Gte,oneof:"message"},{no:26,name:"subscribed_audio_codec_update",kind:"message",T:Lte,oneof:"message"}]),n1=ye.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Gu,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:ye.getEnumType(LU)}]),xy=ye.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:ye.getEnumType(Ca)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:ye.getEnumType(Yr)},{no:9,name:"layers",kind:"message",T:Gu,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:n1,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:ye.getEnumType(ai)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:ye.getEnumType(DU)},{no:17,name:"audio_features",kind:"enum",T:ye.getEnumType(Si),repeated:!0}]),bS=ye.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:ye.getEnumType(ka)},{no:3,name:"final",kind:"scalar",T:8}]),xS=ye.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),kte=ye.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:yS},{no:2,name:"participant",kind:"message",T:qf},{no:3,name:"other_participants",kind:"message",T:qf,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:e3,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:KU},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:$U},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:lw,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),Tte=ye.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:e3,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:KU},{no:3,name:"server_info",kind:"message",T:$U},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),P_=ye.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:Fp}]),Ete=ye.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),od=ye.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13},{no:4,name:"mid_to_track_id",kind:"map",K:9,V:{kind:"scalar",T:9}}]),_te=ye.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:qf,repeated:!0}]),wS=ye.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:zU,repeated:!0}]),JU=ye.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:ye.getEnumType(k_)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),A_=ye.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:ye.getEnumType(Si),repeated:!0}]),XU=ye.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),SS=ye.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:ye.getEnumType(Ta)},{no:3,name:"action",kind:"enum",T:ye.getEnumType(Zp)},{no:4,name:"regions",kind:"message",T:Vte}]),Zp=ye.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),ZU=ye.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:Gu,repeated:!0}]),I_=ye.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),e3=ye.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),Rte=ye.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:UU,repeated:!0}]),Pte=ye.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:yS}]),Ate=ye.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:ye.getEnumType(zv)},{no:3,name:"score",kind:"scalar",T:2}]),Ite=ye.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:Ate,repeated:!0}]),Nte=ye.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ye.getEnumType(t1)}]),Mte=ye.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:Nte,repeated:!0}]),N_=ye.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:ye.getEnumType(k_)},{no:2,name:"enabled",kind:"scalar",T:8}]),Ote=ye.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:N_,repeated:!0}]),Dte=ye.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:N_,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:Ote,repeated:!0}]),Lte=ye.makeMessageType("livekit.SubscribedAudioCodecUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_audio_codecs",kind:"message",T:wte,repeated:!0}]),t3=ye.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),n3=ye.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:t3,repeated:!0}]),jte=ye.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),Fte=ye.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:yS},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:qf},{no:4,name:"other_participants",kind:"message",T:qf,repeated:!0}]),M_=ye.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:od},{no:2,name:"subscription",kind:"message",T:wS},{no:3,name:"publish_tracks",kind:"message",T:P_,repeated:!0},{no:4,name:"data_channels",kind:"message",T:i3,repeated:!0},{no:5,name:"offer",kind:"message",T:od},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:r3,repeated:!0}]),r3=ye.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),i3=ye.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:ye.getEnumType(ka)}]),cl=ye.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:ye.getEnumType(Ste),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),s3=ye.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),Ute=ye.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),Vte=ye.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:Bte,repeated:!0}]),Bte=ye.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),zte=ye.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:ye.getEnumType(hte)}]),$te=ye.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:ye.getEnumType(O_)},{no:3,name:"message",kind:"scalar",T:9},{no:4,name:"trickle",kind:"message",T:bS,oneof:"request"},{no:5,name:"add_track",kind:"message",T:xy,oneof:"request"},{no:6,name:"mute",kind:"message",T:xS,oneof:"request"},{no:7,name:"update_metadata",kind:"message",T:I_,oneof:"request"},{no:8,name:"update_audio_track",kind:"message",T:A_,oneof:"request"},{no:9,name:"update_video_track",kind:"message",T:XU,oneof:"request"}]),O_=ye.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"},{no:4,name:"QUEUED"},{no:5,name:"UNSUPPORTED_TYPE"},{no:6,name:"UNCLASSIFIED_ERROR"}]),Wte=ye.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),o3=ye.makeMessageType("livekit.ConnectionSettings",()=>[{no:1,name:"auto_subscribe",kind:"scalar",T:8},{no:2,name:"adaptive_stream",kind:"scalar",T:8},{no:3,name:"subscriber_allow_pause",kind:"scalar",T:8,opt:!0},{no:4,name:"disable_ice_lite",kind:"scalar",T:8}]),Hte=ye.makeMessageType("livekit.JoinRequest",()=>[{no:1,name:"client_info",kind:"message",T:HU},{no:2,name:"connection_settings",kind:"message",T:o3},{no:3,name:"metadata",kind:"scalar",T:9},{no:4,name:"participant_attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"add_track_requests",kind:"message",T:xy,repeated:!0},{no:6,name:"publisher_offer",kind:"message",T:od},{no:7,name:"reconnect",kind:"scalar",T:8},{no:8,name:"reconnect_reason",kind:"enum",T:ye.getEnumType(df)},{no:9,name:"participant_sid",kind:"scalar",T:9},{no:10,name:"sync_state",kind:"message",T:M_}]),qte=ye.makeMessageType("livekit.WrappedJoinRequest",()=>[{no:1,name:"compression",kind:"enum",T:ye.getEnumType(Kte)},{no:2,name:"join_request",kind:"scalar",T:12}]),Kte=ye.makeEnum("livekit.WrappedJoinRequest.Compression",[{no:0,name:"NONE"},{no:1,name:"GZIP"}]),Gte=ye.makeMessageType("livekit.MediaSectionsRequirement",()=>[{no:1,name:"num_audios",kind:"scalar",T:13},{no:2,name:"num_videos",kind:"scalar",T:13}]);function Yte(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wx={exports:{}},Qte=wx.exports,uN;function Jte(){return uN||(uN=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(Qte,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},o=null;function a(C,E){var _=C[E];if(typeof _.bind=="function")return _.bind(C);try{return Function.prototype.bind.call(_,C)}catch{return function(){return Function.prototype.apply.apply(_,[C,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(C){return C==="debug"&&(C="log"),typeof console===n?!1:C==="trace"&&r?c:console[C]!==void 0?a(console,C):console.log!==void 0?a(console,"log"):e}function h(){for(var C=this.getLevel(),E=0;E<i.length;E++){var _=i[E];this[_]=E<C?e:this.methodFactory(_,C,this.name)}if(this.log=this.debug,typeof console===n&&C<this.levels.SILENT)return"No console available for logging"}function p(C){return function(){typeof console!==n&&(h.call(this),this[C].apply(this,arguments))}}function y(C,E,_){return d(C)||p.apply(this,arguments)}function S(C,E){var _=this,A,M,I,N="loglevel";typeof C=="string"?N+=":"+C:typeof C=="symbol"&&(N=void 0);function O(J){var Y=(i[J]||"silent").toUpperCase();if(!(typeof window===n||!N)){try{window.localStorage[N]=Y;return}catch{}try{window.document.cookie=encodeURIComponent(N)+"="+Y+";"}catch{}}}function j(){var J;if(!(typeof window===n||!N)){try{J=window.localStorage[N]}catch{}if(typeof J===n)try{var Y=window.document.cookie,pe=encodeURIComponent(N),fe=Y.indexOf(pe+"=");fe!==-1&&(J=/^([^;]+)/.exec(Y.slice(fe+pe.length+1))[1])}catch{}return _.levels[J]===void 0&&(J=void 0),J}}function V(){if(!(typeof window===n||!N)){try{window.localStorage.removeItem(N)}catch{}try{window.document.cookie=encodeURIComponent(N)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function $(J){var Y=J;if(typeof Y=="string"&&_.levels[Y.toUpperCase()]!==void 0&&(Y=_.levels[Y.toUpperCase()]),typeof Y=="number"&&Y>=0&&Y<=_.levels.SILENT)return Y;throw new TypeError("log.setLevel() called with invalid level: "+J)}_.name=C,_.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},_.methodFactory=E||y,_.getLevel=function(){return I??M??A},_.setLevel=function(J,Y){return I=$(J),Y!==!1&&O(I),h.call(_)},_.setDefaultLevel=function(J){M=$(J),j()||_.setLevel(J,!1)},_.resetLevel=function(){I=null,V(),h.call(_)},_.enableAll=function(J){_.setLevel(_.levels.TRACE,J)},_.disableAll=function(J){_.setLevel(_.levels.SILENT,J)},_.rebuild=function(){if(o!==_&&(A=$(o.getLevel())),h.call(_),o===_)for(var J in s)s[J].rebuild()},A=$(o?o.getLevel():"WARN");var W=j();W!=null&&(I=$(W)),h.call(_)}o=new S,o.getLogger=function(E){if(typeof E!="symbol"&&typeof E!="string"||E==="")throw new TypeError("You must supply a name when creating a logger.");var _=s[E];return _||(_=s[E]=new S(E,o.methodFactory)),_};var k=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=k),o},o.getLoggers=function(){return s},o.default=o,o})}(wx)),wx.exports}var CS=Jte(),r1;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(r1||(r1={}));var Pa;(function(t){t.Default="livekit",t.Room="livekit-room",t.TokenSource="livekit-token-source",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(Pa||(Pa={}));let sn=CS.getLogger("livekit");Object.values(Pa).map(t=>CS.getLogger(t));sn.setDefaultLevel(r1.info);function Ic(t){const e=CS.getLogger(t);return e.setDefaultLevel(sn.getLevel()),e}const Xte=CS.getLogger("lk-e2ee"),Pv=7e3,Zte=[0,300,2*2*300,3*3*300,4*4*300,Pv,Pv,Pv,Pv,Pv];class ene{constructor(e){this._retryDelays=e!==void 0?[...e]:Zte}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function tne(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function K(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(p){o(p)}}function c(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((r=r.apply(t,e||[])).next())})}function dN(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function kc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof dN=="function"?dN(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}var qb={exports:{}},fN;function nne(){if(fN)return qb.exports;fN=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(N,O,j){return Function.prototype.apply.call(N,O,j)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:n=function(N){return Object.getOwnPropertyNames(N)};function r(I){console&&console.warn&&console.warn(I)}var i=Number.isNaN||function(N){return N!==N};function s(){s.init.call(this)}qb.exports=s,qb.exports.once=_,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(I){if(typeof I!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof I)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(I){if(typeof I!="number"||I<0||i(I))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+I+".");o=I}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(N){if(typeof N!="number"||N<0||i(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this};function c(I){return I._maxListeners===void 0?s.defaultMaxListeners:I._maxListeners}s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(N){for(var O=[],j=1;j<arguments.length;j++)O.push(arguments[j]);var V=N==="error",$=this._events;if($!==void 0)V=V&&$.error===void 0;else if(!V)return!1;if(V){var W;if(O.length>0&&(W=O[0]),W instanceof Error)throw W;var J=new Error("Unhandled error."+(W?" ("+W.message+")":""));throw J.context=W,J}var Y=$[N];if(Y===void 0)return!1;if(typeof Y=="function")e(Y,this,O);else for(var pe=Y.length,fe=k(Y,pe),j=0;j<pe;++j)e(fe[j],this,O);return!0};function d(I,N,O,j){var V,$,W;if(a(O),$=I._events,$===void 0?($=I._events=Object.create(null),I._eventsCount=0):($.newListener!==void 0&&(I.emit("newListener",N,O.listener?O.listener:O),$=I._events),W=$[N]),W===void 0)W=$[N]=O,++I._eventsCount;else if(typeof W=="function"?W=$[N]=j?[O,W]:[W,O]:j?W.unshift(O):W.push(O),V=c(I),V>0&&W.length>V&&!W.warned){W.warned=!0;var J=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(N)+" listeners added. Use emitter.setMaxListeners() to increase limit");J.name="MaxListenersExceededWarning",J.emitter=I,J.type=N,J.count=W.length,r(J)}return I}s.prototype.addListener=function(N,O){return d(this,N,O,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(N,O){return d(this,N,O,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(I,N,O){var j={fired:!1,wrapFn:void 0,target:I,type:N,listener:O},V=h.bind(j);return V.listener=O,j.wrapFn=V,V}s.prototype.once=function(N,O){return a(O),this.on(N,p(this,N,O)),this},s.prototype.prependOnceListener=function(N,O){return a(O),this.prependListener(N,p(this,N,O)),this},s.prototype.removeListener=function(N,O){var j,V,$,W,J;if(a(O),V=this._events,V===void 0)return this;if(j=V[N],j===void 0)return this;if(j===O||j.listener===O)--this._eventsCount===0?this._events=Object.create(null):(delete V[N],V.removeListener&&this.emit("removeListener",N,j.listener||O));else if(typeof j!="function"){for($=-1,W=j.length-1;W>=0;W--)if(j[W]===O||j[W].listener===O){J=j[W].listener,$=W;break}if($<0)return this;$===0?j.shift():C(j,$),j.length===1&&(V[N]=j[0]),V.removeListener!==void 0&&this.emit("removeListener",N,J||O)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(N){var O,j,V;if(j=this._events,j===void 0)return this;if(j.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):j[N]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete j[N]),this;if(arguments.length===0){var $=Object.keys(j),W;for(V=0;V<$.length;++V)W=$[V],W!=="removeListener"&&this.removeAllListeners(W);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(O=j[N],typeof O=="function")this.removeListener(N,O);else if(O!==void 0)for(V=O.length-1;V>=0;V--)this.removeListener(N,O[V]);return this};function y(I,N,O){var j=I._events;if(j===void 0)return[];var V=j[N];return V===void 0?[]:typeof V=="function"?O?[V.listener||V]:[V]:O?E(V):k(V,V.length)}s.prototype.listeners=function(N){return y(this,N,!0)},s.prototype.rawListeners=function(N){return y(this,N,!1)},s.listenerCount=function(I,N){return typeof I.listenerCount=="function"?I.listenerCount(N):S.call(I,N)},s.prototype.listenerCount=S;function S(I){var N=this._events;if(N!==void 0){var O=N[I];if(typeof O=="function")return 1;if(O!==void 0)return O.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function k(I,N){for(var O=new Array(N),j=0;j<N;++j)O[j]=I[j];return O}function C(I,N){for(;N+1<I.length;N++)I[N]=I[N+1];I.pop()}function E(I){for(var N=new Array(I.length),O=0;O<N.length;++O)N[O]=I[O].listener||I[O];return N}function _(I,N){return new Promise(function(O,j){function V(W){I.removeListener(N,$),j(W)}function $(){typeof I.removeListener=="function"&&I.removeListener("error",V),O([].slice.call(arguments))}M(I,N,$,{once:!0}),N!=="error"&&A(I,V,{once:!0})})}function A(I,N,O){typeof I.on=="function"&&M(I,"error",N,O)}function M(I,N,O,j){if(typeof I.on=="function")j.once?I.once(N,O):I.on(N,O);else if(typeof I.addEventListener=="function")I.addEventListener(N,function V($){j.once&&I.removeEventListener(N,V),O($)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof I)}return qb.exports}var Ml=nne();let a3=!0,l3=!0;function $v(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function Zf(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return i.apply(this,arguments);const c=d=>{const h=n(d);h&&(a.handleEvent?a.handleEvent(h):a(h))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,c),i.apply(this,[o,c])};const s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);const c=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function rne(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(a3=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function ine(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(l3=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function c3(){if(typeof window=="object"){if(a3)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function D_(t,e){l3&&console.warn(t+" is deprecated, please use "+e+" instead.")}function sne(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt($v(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt($v(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt($v(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=$v(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function hN(t){return Object.prototype.toString.call(t)==="[object Object]"}function u3(t){return hN(t)?Object.keys(t).reduce(function(e,n){const r=hN(t[n]),i=r?u3(t[n]):t[n],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,{[n]:i})},{}):t}function i1(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?i1(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{i1(t,t.get(i),n)})}))}function pN(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const s=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{t.forEach(a=>{a.type===r&&a.trackId===o.id&&i1(t,a,i)})}),i}const mN=c3;function d3(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(d=>{if(d==="require"||d==="advanced"||d==="mediaSource")return;const h=typeof a[d]=="object"?a[d]:{ideal:a[d]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const p=function(y,S){return y?y+S.charAt(0).toUpperCase()+S.slice(1):S==="deviceId"?"sourceId":S};if(h.ideal!==void 0){c.optional=c.optional||[];let y={};typeof h.ideal=="number"?(y[p("min",d)]=h.ideal,c.optional.push(y),y={},y[p("max",d)]=h.ideal,c.optional.push(y)):(y[p("",d)]=h.ideal,c.optional.push(y))}h.exact!==void 0&&typeof h.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[p("",d)]=h.exact):["min","max"].forEach(y=>{h[y]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[p(y,d)]=h[y])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(e.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const d=function(h,p,y){p in h&&!(y in h)&&(h[y]=h[p],delete h[p])};a=JSON.parse(JSON.stringify(a)),d(a.audio,"autoGainControl","googAutoGainControl"),d(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let d=a.video.facingMode;d=d&&(typeof d=="object"?d:{ideal:d});const h=e.version<66;if(d&&(d.exact==="user"||d.exact==="environment"||d.ideal==="user"||d.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete a.video.facingMode;let p;if(d.exact==="environment"||d.ideal==="environment"?p=["back","rear"]:(d.exact==="user"||d.ideal==="user")&&(p=["front"]),p)return n.mediaDevices.enumerateDevices().then(y=>{y=y.filter(k=>k.kind==="videoinput");let S=y.find(k=>p.some(C=>k.label.toLowerCase().includes(C)));return!S&&y.length&&p.includes("back")&&(S=y[y.length-1]),S&&(a.video.deviceId=d.exact?{exact:S.deviceId}:{ideal:S.deviceId}),a.video=r(a.video),mN("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return mN("chrome: "+JSON.stringify(a)),c(a)},s=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,c,d){i(a,h=>{n.webkitGetUserMedia(h,c,p=>{d&&d(s(p))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,d=>a(d).then(h=>{if(d.audio&&!h.getAudioTracks().length||d.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(p=>{p.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(s(h))))}}}function f3(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function h3(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Zf(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function p3(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,c){let d=i.apply(this,arguments);return d||(d=e(this,a),this._senders.push(d)),d};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(c=>c.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function m3(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>pN(o,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),Zf(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>pN(s,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function g3(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(d=>{if(this.getSenders().find(p=>p.track===d))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(d=>a.indexOf(d)===-1);this._shimmedLocalStreams[o.id]=[o].concat(c)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(o);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function v3(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return g3(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const h=n.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(p=>this._reverseStreams[p.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(p=>{if(this.getSenders().find(S=>S.track===p))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const p=new t.MediaStream(h.getTracks());this._streams[h.id]=p,this._reverseStreams[p.id]=h,h=p}r.apply(this,[h])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},t.RTCPeerConnection.prototype.addTrack=function(h,p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(C=>C===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(C=>C.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const k=this._streams[p.id];if(k)k.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const C=new t.MediaStream([h]);this._streams[p.id]=C,this._reverseStreams[C.id]=p,this.addStream(C)}return this.getSenders().find(C=>C.track===h)};function s(d,h){let p=h.sdp;return Object.keys(d._reverseStreams||[]).forEach(y=>{const S=d._reverseStreams[y],k=d._streams[S.id];p=p.replace(new RegExp(k.id,"g"),S.id)}),new RTCSessionDescription({type:h.type,sdp:p})}function o(d,h){let p=h.sdp;return Object.keys(d._reverseStreams||[]).forEach(y=>{const S=d._reverseStreams[y],k=d._streams[S.id];p=p.replace(new RegExp(S.id,"g"),k.id)}),new RTCSessionDescription({type:h.type,sdp:p})}["createOffer","createAnswer"].forEach(function(d){const h=t.RTCPeerConnection.prototype[d],p={[d](){const y=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[k=>{const C=s(this,k);y[0].apply(null,[C])},k=>{y[1]&&y[1].apply(null,k)},arguments[2]]):h.apply(this,arguments).then(k=>s(this,k))}};t.RTCPeerConnection.prototype[d]=p[d]});const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const d=c.get.apply(this);return d.type===""?d:s(this,d)}}),t.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let y;Object.keys(this._streams).forEach(S=>{this._streams[S].getTracks().find(C=>h.track===C)&&(y=this._streams[S])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s1(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function y3(t,e){Zf(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var gN=Object.freeze({__proto__:null,fixNegotiationNeeded:y3,shimAddTrackRemoveTrack:v3,shimAddTrackRemoveTrackWithNative:g3,shimGetSendersWithDtmf:p3,shimGetUserMedia:d3,shimMediaStream:f3,shimOnTrack:h3,shimPeerConnection:s1,shimSenderReceiverGetStats:m3});function b3(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){D_("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(o,a,c){a in o&&!(c in o)&&(o[c]=o[a],delete o[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function one(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function x3(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function o1(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=t.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=o[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return r.apply(this,[s||null]).then(c=>{if(e.version<53&&!o)try{c.forEach(d=>{d.type=n[d.type]||d.type})}catch(d){if(d.name!=="TypeError")throw d;c.forEach((h,p)=>{c.set(p,Object.assign({},h,{type:n[h.type]||h.type}))})}return c}).then(o,a)}}function w3(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function S3(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Zf(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function C3(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){D_("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function k3(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function T3(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function E3(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function _3(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function R3(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var vN=Object.freeze({__proto__:null,shimAddTransceiver:T3,shimCreateAnswer:R3,shimCreateOffer:_3,shimGetDisplayMedia:one,shimGetParameters:E3,shimGetUserMedia:b3,shimOnTrack:x3,shimPeerConnection:o1,shimRTCDataChannel:k3,shimReceiverGetStats:S3,shimRemoveStream:C3,shimSenderGetStats:w3});function P3(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return s&&s.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function A3(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function I3(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(d,h){const p=arguments.length>=2?arguments[2]:arguments[0],y=n.apply(this,[p]);return h?(y.then(d,h),Promise.resolve()):y},e.createAnswer=function(d,h){const p=arguments.length>=2?arguments[2]:arguments[0],y=r.apply(this,[p]);return h?(y.then(d,h),Promise.resolve()):y};let a=function(c,d,h){const p=i.apply(this,[c]);return h?(p.then(d,h),Promise.resolve()):p};e.setLocalDescription=a,a=function(c,d,h){const p=s.apply(this,[c]);return h?(p.then(d,h),Promise.resolve()):p},e.setRemoteDescription=a,a=function(c,d,h){const p=o.apply(this,[c]);return h?(p.then(d,h),Promise.resolve()):p},e.addIceCandidate=a}function N3(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(M3(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}).bind(e))}function M3(t){return t&&t.video!==void 0?Object.assign({},t,{video:u3(t.video)}):t}function O3(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(D_("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function D3(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function L3(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function j3(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var yN=Object.freeze({__proto__:null,shimAudioContext:j3,shimCallbacksAPI:I3,shimConstraints:M3,shimCreateOfferLegacy:L3,shimGetUserMedia:N3,shimLocalStreamsAPI:P3,shimRTCIceServerUrls:O3,shimRemoteStreamsAPI:A3,shimTrackEventTransceiver:D3}),mk={exports:{}},bN;function ane(){return bN||(bN=1,function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?s.push(o+"="+n.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],s=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(n)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const c=s[a],d=e.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(d){const h=e.parseRtpMap(d),p=e.matchPrefix(n,"a=fmtp:"+c+" ");switch(h.parameters=p.length?e.parseFmtp(p[0]):{},h.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),r.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(h.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const o=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{o.forEach(c=>{a.rtcpFeedback.find(h=>h.type===c.type&&h.parameter===c.parameter)||a.rtcpFeedback.push(c)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=e.writeRtpMap(o),i+=e.writeFmtp(o),i+=e.writeRtcpFb(o)});let s=0;return r.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=e.writeExtmap(o)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(y=>e.parseSsrcMedia(y)).filter(y=>y.attribute==="cname"),c=a.length>0&&a[0].ssrc;let d;const h=e.matchPrefix(n,"a=ssrc-group:FID").map(y=>y.substring(17).split(" ").map(k=>parseInt(k,10)));h.length>0&&h[0].length>1&&h[0][0]===c&&(d=h[0][1]),i.codecs.forEach(y=>{if(y.name.toUpperCase()==="RTX"&&y.parameters.apt){let S={ssrc:c,codecPayloadType:parseInt(y.parameters.apt,10)};c&&d&&(S.rtx={ssrc:d}),r.push(S),s&&(S=JSON.parse(JSON.stringify(S)),S.fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},r.push(S))}}),r.length===0&&c&&r.push({ssrc:c});let p=e.matchPrefix(n,"b=");return p.length&&(p[0].indexOf("b=TIAS:")===0?p=parseInt(p[0].substring(7),10):p[0].indexOf("b=AS:")===0?p=parseInt(p[0].substring(5),10)*1e3*.95-50*40*8:p=void 0,r.forEach(y=>{y.maxBitrate=p})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const o=e.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=e.matchPrefix(n,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const o=e.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const a=e.matchPrefix(n,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:s}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let s;const o=r!==void 0?r:2;return n?s=n:s=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e}(mk)),mk.exports}var F3=ane(),em=Yte(F3),lne=vee({__proto__:null,default:em},[F3]);function Sx(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),s=em.parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,Zf(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function a1(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Zf(t,"icecandidate",e=>{if(e.candidate){const n=em.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function Cx(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const c=em.splitSections(a.sdp);return c.shift(),c.some(d=>{const h=em.parseMLine(d);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const d=parseInt(c[1],10);return d!==d?-1:d},i=function(a){let c=65536;return e.browser==="firefox"&&(e.version<57?a===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},s=function(a,c){let d=65536;e.browser==="firefox"&&e.version===57&&(d=65535);const h=em.matchPrefix(a.sdp,"a=max-message-size:");return h.length>0?d=parseInt(h[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(d=2147483637),d},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),d=i(c),h=s(arguments[0],c);let p;d===0&&h===0?p=Number.POSITIVE_INFINITY:d===0||h===0?p=Math.max(d,h):p=Math.min(d,h);const y={};Object.defineProperty(y,"maxMessageSize",{get(){return p}}),this._sctp=y}return o.apply(this,arguments)}}function kx(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},Zf(t,"datachannel",r=>(e(r.channel,r.target),r))}function l1(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function c1(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function Tx(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Ex(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}var cne=Object.freeze({__proto__:null,removeExtmapAllowMixed:c1,shimAddIceCandidateNullOrEmpty:Tx,shimConnectionState:l1,shimMaxMessageSize:Cx,shimParameterlessSetLocalDescription:Ex,shimRTCIceCandidate:Sx,shimRTCIceCandidateRelayProtocol:a1,shimSendThrowTypeError:kx});function une(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=c3,r=sne(t),i={browserDetails:r,commonShim:cne,extractVersion:$v,disableLog:rne,disableWarnings:ine,sdp:lne};switch(r.browser){case"chrome":if(!gN||!s1||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=gN,Tx(t,r),Ex(t),d3(t,r),f3(t),s1(t,r),h3(t),v3(t,r),p3(t),m3(t),y3(t,r),Sx(t),a1(t),l1(t),Cx(t,r),kx(t),c1(t,r);break;case"firefox":if(!vN||!o1||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=vN,Tx(t,r),Ex(t),b3(t,r),o1(t,r),x3(t),C3(t),w3(t),S3(t),k3(t),T3(t),E3(t),_3(t),R3(t),Sx(t),l1(t),Cx(t,r),kx(t);break;case"safari":if(!yN||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=yN,Tx(t,r),Ex(t),O3(t),L3(t),I3(t),P3(t),A3(t),D3(t),N3(t),j3(t),Sx(t),a1(t),Cx(t,r),kx(t),c1(t,r);break;default:n("Unsupported browser!");break}return i}une({window:typeof window>"u"?void 0:window});const dne=10,Av="lk_e2ee",fne="LKFrameEncryptionKey",hne={sharedKey:!1,ratchetSalt:fne,ratchetWindowSize:8,failureTolerance:dne,keyringSize:16};var Yu;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(Yu||(Yu={}));var xN;(function(t){t.KeyRatcheted="keyRatcheted"})(xN||(xN={}));var Hu;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(Hu||(Hu={}));var wN;(function(t){t.Error="cryptorError"})(wN||(wN={}));function pne(){return mne()||u1()}function u1(){return typeof window.RTCRtpScriptTransform<"u"}function mne(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}function gne(t){var e,n,r,i,s;if(((e=t.value)===null||e===void 0?void 0:e.case)!=="sipDtmf"&&((n=t.value)===null||n===void 0?void 0:n.case)!=="metrics"&&((r=t.value)===null||r===void 0?void 0:r.case)!=="speaker"&&((i=t.value)===null||i===void 0?void 0:i.case)!=="transcription"&&((s=t.value)===null||s===void 0?void 0:s.case)!=="encryptedPacket")return new FU({value:t.value})}class $ge extends Ml.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r,i)=>{sn.debug("key ratcheted event received",{ratchetResult:n,participantId:r,keyIndex:i})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},hne),e),this.on(Yu.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,r){const i={key:e,participantIdentity:n,keyIndex:r};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(Yu.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(Yu.RatchetRequest,e,n)}}class Dc extends Error{constructor(e,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=e}}var fn;(function(t){t[t.NotAllowed=0]="NotAllowed",t[t.ServerUnreachable=1]="ServerUnreachable",t[t.InternalError=2]="InternalError",t[t.Cancelled=3]="Cancelled",t[t.LeaveRequest=4]="LeaveRequest",t[t.Timeout=5]="Timeout"})(fn||(fn={}));class An extends Dc{constructor(e,n,r,i){super(1,e),this.name="ConnectionError",this.status=r,this.reason=n,this.context=i,this.reasonName=fn[n]}}class L_ extends Dc{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class Tc extends Dc{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class vne extends Dc{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class si extends Dc{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class d1 extends Dc{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class SN extends Dc{constructor(e,n){super(15,e),this.name="PublishTrackError",this.status=n}}class CN extends Dc{constructor(e,n){super(15,e),this.reason=n,this.reasonName=typeof n=="string"?n:O_[n]}}var ss;(function(t){t[t.AlreadyOpened=0]="AlreadyOpened",t[t.AbnormalEnd=1]="AbnormalEnd",t[t.DecodeFailed=2]="DecodeFailed",t[t.LengthExceeded=3]="LengthExceeded",t[t.Incomplete=4]="Incomplete",t[t.HandlerAlreadyRegistered=7]="HandlerAlreadyRegistered",t[t.EncryptionTypeMismatch=8]="EncryptionTypeMismatch"})(ss||(ss={}));class Bo extends Dc{constructor(e,n){super(16,e),this.name="DataStreamError",this.reason=n,this.reasonName=ss[n]}}var hw;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(hw||(hw={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(hw||(hw={}));var kN;(function(t){t[t.InvalidKey=0]="InvalidKey",t[t.MissingKey=1]="MissingKey",t[t.InternalError=2]="InternalError"})(kN||(kN={}));var Ie;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.Moved="moved",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.ParticipantAttributesChanged="participantAttributesChanged",t.ParticipantActive="participantActive",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged",t.ChatMessage="chatMessage",t.LocalTrackSubscribed="localTrackSubscribed",t.MetricsReceived="metricsReceived"})(Ie||(Ie={}));var Ue;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackCpuConstrained="localTrackCpuConstrained",t.LocalSenderCreated="localSenderCreated",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.TrackCpuConstrained="trackCpuConstrained",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded",t.AttributesChanged="attributesChanged",t.LocalTrackSubscribed="localTrackSubscribed",t.ChatMessage="chatMessage",t.Active="active"})(Ue||(Ue={}));var Xe;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackSubscribed="localTrackSubscribed",t.Offline="offline",t.SignalRequestResponse="signalRequestResponse",t.SignalConnected="signalConnected",t.RoomMoved="roomMoved"})(Xe||(Xe={}));var Ye;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.CpuConstrained="cpuConstrained",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed",t.TrackProcessorUpdate="trackProcessorUpdate",t.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",t.TranscriptionReceived="transcriptionReceived",t.TimeSyncUpdate="timeSyncUpdate",t.PreConnectBufferFlushed="preConnectBufferFlushed"})(Ye||(Ye={}));function yne(t){return typeof t>"u"?t:typeof structuredClone=="function"?typeof t=="object"&&t!==null?structuredClone(Object.assign({},t)):structuredClone(t):JSON.parse(JSON.stringify(t))}const bne=/version\/(\d+(\.?_?\d+)+)/i;let gk;function $s(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(gk===void 0||e){const r=xne.find(i=>{let{test:s}=i;return s.test(n)});gk=r==null?void 0:r.describe(n)}return gk}const xne=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:_x(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:vk(t)}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:_x(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0,osVersion:vk(t)}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:_x(bne,t),os:t.includes("mobile/")?"iOS":"macOS",osVersion:vk(t)}}}];function _x(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=e.match(t);return r&&r.length>=n&&r[n]||""}function vk(t){return t.includes("mac os")?_x(/\(.+?(\d+_\d+(:?_\d+)?)/,t,1).replace(/_/g,"."):void 0}var wne="2.15.11";const Sne=wne,Cne=16;class Di{}Di.setTimeout=function(){return setTimeout(...arguments)};Di.setInterval=function(){return setInterval(...arguments)};Di.clearTimeout=function(){return clearTimeout(...arguments)};Di.clearInterval=function(){return clearInterval(...arguments)};const kne=5e3,Iv=[];var mo;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"})(mo||(mo={}));class _e extends Ml.EventEmitter{get streamState(){return this._streamState}setStreamState(e){this._streamState=e}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this._streamState=_e.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=sn,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),kne):this.handleAppVisibilityChanged()},this.log=Ic((i=r.loggerName)!==null&&i!==void 0?i:Pa.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=_e.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),ln(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===_e.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===_e.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(Iv.forEach(s=>{s.parentElement===null&&!e&&(e=s)}),e&&Iv.splice(Iv.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),Up(this.mediaStreamTrack,e);const r=e.srcObject.getTracks(),i=r.some(s=>s.kind==="audio");return e.play().then(()=>{this.emit(i?Ye.AudioPlaybackStarted:Ye.VideoPlaybackStarted)}).catch(s=>{s.name==="NotAllowedError"?this.emit(i?Ye.AudioPlaybackFailed:Ye.VideoPlaybackFailed,s):s.name==="AbortError"?sn.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):sn.warn("could not playback ".concat(i?"audio":"video"),s),i&&e&&r.some(o=>o.kind==="video")&&s.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(Ye.ElementAttached,e),e}detach(e){try{if(e){tm(this.mediaStreamTrack,e);const r=this.attachedElements.indexOf(e);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(e),this.emit(Ye.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(r=>{tm(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(Ye.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=Ic(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),Iv.forEach(r=>{r.parentElement||(n=!1)}),n&&Iv.push(e)}}handleAppVisibilityChanged(){return K(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===_e.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){js()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){js()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function Up(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let r;t.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(t)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(t)),(!Gf()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(Gf()||Kf())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function tm(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(d){d.Audio="audio",d.Video="video",d.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(d){d.Camera="camera",d.Microphone="microphone",d.ScreenShare="screen_share",d.ScreenShareAudio="screen_share_audio",d.Unknown="unknown"})(n=t.Source||(t.Source={}));let r;(function(d){d.Active="active",d.Paused="paused",d.Unknown="unknown"})(r=t.StreamState||(t.StreamState={}));function i(d){switch(d){case e.Audio:return Ca.AUDIO;case e.Video:return Ca.VIDEO;default:return Ca.DATA}}t.kindToProto=i;function s(d){switch(d){case Ca.AUDIO:return e.Audio;case Ca.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=s;function o(d){switch(d){case n.Camera:return Yr.CAMERA;case n.Microphone:return Yr.MICROPHONE;case n.ScreenShare:return Yr.SCREEN_SHARE;case n.ScreenShareAudio:return Yr.SCREEN_SHARE_AUDIO;default:return Yr.UNKNOWN}}t.sourceToProto=o;function a(d){switch(d){case Yr.CAMERA:return n.Camera;case Yr.MICROPHONE:return n.Microphone;case Yr.SCREEN_SHARE:return n.ScreenShare;case Yr.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=a;function c(d){switch(d){case t1.ACTIVE:return r.Active;case t1.PAUSED:return r.Paused;default:return r.Unknown}}t.streamStateFromProto=c})(_e||(_e={}));class Wn{constructor(e,n,r,i,s){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(n!==void 0&&r!==void 0)this.width=e,this.height=n,this.aspectRatio=e/n,this.encoding={maxBitrate:r,maxFramerate:i,priority:s};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const Tne=["vp8","h264"],Ene=["vp8","h264","vp9","av1","h265"];function _ne(t){return!!Tne.find(e=>e===t)}const Rne=_ne;var TN;(function(t){t[t.PREFER_REGRESSION=0]="PREFER_REGRESSION",t[t.SIMULCAST=1]="SIMULCAST",t[t.REGRESSION=2]="REGRESSION"})(TN||(TN={}));var pw;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:24e3},t.music={maxBitrate:48e3},t.musicStereo={maxBitrate:64e3},t.musicHighQuality={maxBitrate:96e3},t.musicHighQualityStereo={maxBitrate:128e3}})(pw||(pw={}));const Nm={h90:new Wn(160,90,9e4,20),h180:new Wn(320,180,16e4,20),h216:new Wn(384,216,18e4,20),h360:new Wn(640,360,45e4,20),h540:new Wn(960,540,8e5,25),h720:new Wn(1280,720,17e5,30),h1080:new Wn(1920,1080,3e6,30),h1440:new Wn(2560,1440,5e6,30),h2160:new Wn(3840,2160,8e6,30)},f1={h120:new Wn(160,120,7e4,20),h180:new Wn(240,180,125e3,20),h240:new Wn(320,240,14e4,20),h360:new Wn(480,360,33e4,20),h480:new Wn(640,480,5e5,20),h540:new Wn(720,540,6e5,25),h720:new Wn(960,720,13e5,30),h1080:new Wn(1440,1080,23e5,30),h1440:new Wn(1920,1440,38e5,30)},j_={h360fps3:new Wn(640,360,2e5,3,"medium"),h360fps15:new Wn(640,360,4e5,15,"medium"),h720fps5:new Wn(1280,720,8e5,5,"medium"),h720fps15:new Wn(1280,720,15e5,15,"medium"),h720fps30:new Wn(1280,720,2e6,30,"medium"),h1080fps15:new Wn(1920,1080,25e5,15,"medium"),h1080fps30:new Wn(1920,1080,5e6,30,"medium"),original:new Wn(0,0,7e6,30,"medium")},Pne="|",EN="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function Ane(t){const e=t.split(Pne);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function us(t){return K(this,void 0,void 0,function*(){return new Promise(e=>Di.setTimeout(e,t))})}function h1(){return"addTransceiver"in RTCPeerConnection.prototype}function p1(){return"addTrack"in RTCPeerConnection.prototype}function Ine(){if(!("getCapabilities"in RTCRtpSender)||Gf()||Kf())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType.toLowerCase()==="video/av1"){e=!0;break}}return e}function Nne(){if(!("getCapabilities"in RTCRtpSender)||Kf())return!1;if(Gf()){const n=$s();if(n!=null&&n.version&&Rl(n.version,"16")<0||(n==null?void 0:n.os)==="iOS"&&(n!=null&&n.osVersion)&&Rl(n.osVersion,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType.toLowerCase()==="video/vp9"){e=!0;break}}return e}function ml(t){return t==="av1"||t==="vp9"}function m1(t){return!document||wy()?!1:(t||(t=document.createElement("audio")),"setSinkId"in t)}function Mne(){return typeof RTCPeerConnection>"u"?!1:h1()||p1()}function Kf(){var t;return((t=$s())===null||t===void 0?void 0:t.name)==="Firefox"}function Gf(){var t;return((t=$s())===null||t===void 0?void 0:t.name)==="Safari"}function wy(){const t=$s();return(t==null?void 0:t.name)==="Safari"||(t==null?void 0:t.os)==="iOS"}function One(){const t=$s();return(t==null?void 0:t.name)==="Safari"&&t.version.startsWith("17.")||(t==null?void 0:t.os)==="iOS"&&!!(t!=null&&t.osVersion)&&Rl(t.osVersion,"17")>=0}function Dne(t){return t||(t=$s()),(t==null?void 0:t.name)==="Safari"&&Rl(t.version,"18.3")>0||(t==null?void 0:t.os)==="iOS"&&!!(t!=null&&t.osVersion)&&Rl(t.osVersion,"18.3")>0}function U3(){var t,e;return js()?(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function Lne(){const t=$s(),e="17.2";if(t)return t.name!=="Safari"&&t.os!=="iOS"||t.os==="iOS"&&t.osVersion&&Rl(t.osVersion,e)>=0?!0:t.name==="Safari"&&Rl(t.version,e)>=0}function js(){return typeof document<"u"}function _l(){return navigator.product=="ReactNative"}function g1(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function V3(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function B3(){if(!_l())return;let t=V3();if(t)return t.platform}function _N(){if(js())return window.devicePixelRatio;if(_l()){let t=V3();if(t)return t.devicePixelRatio}return 1}function Rl(t,e){const n=t.split("."),r=e.split("."),i=Math.min(n.length,r.length);for(let s=0;s<i;++s){const o=parseInt(n[s],10),a=parseInt(r[s],10);if(o>a)return 1;if(o<a)return-1;if(s===i-1&&o===a)return 0}return t===""&&e!==""?-1:e===""?1:n.length==r.length?0:n.length<r.length?-1:1}function jne(t){for(const e of t)e.target.handleResize(e)}function Fne(t){for(const e of t)e.target.handleVisibilityChanged(e)}let yk=null;const RN=()=>(yk||(yk=new ResizeObserver(jne)),yk);let bk=null;const PN=()=>(bk||(bk=new IntersectionObserver(Fne,{root:null,rootMargin:"0px"})),bk);function Une(){var t;const e=new HU({sdk:qU.JS,protocol:Cne,version:Sne});return _l()&&(e.os=(t=B3())!==null&&t!==void 0?t:""),e}function AN(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=t,i.height=e;const s=i.getContext("2d");s==null||s.fillRect(0,0,i.width,i.height),r&&s&&(s.beginPath(),s.arc(t/2,e/2,50,0,Math.PI*2,!0),s.closePath(),s.fillStyle="grey",s.fill());const o=i.captureStream(),[a]=o.getTracks();if(!a)throw Error("Could not get empty media stream video track");return a.enabled=n,a}let Nv;function xk(){if(!Nv){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const r=t.createMediaStreamDestination();if(e.connect(n),n.connect(r),e.start(),[Nv]=r.stream.getAudioTracks(),!Nv)throw Error("Could not get empty media stream audio track");Nv.enabled=!1}return Nv.clone()}class Ho{get isResolved(){return this._isResolved}constructor(e,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((r,i)=>K(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,e&&(yield e(r,i))})).finally(()=>{var r;this._isResolved=!0,(r=this.onFinally)===null||r===void 0||r.call(this)})}}function Vne(t){return Ene.includes(t)}function Qu(t){if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))return t[0];if(t.exact!==void 0)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal!==void 0)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function Bne(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function v1(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}function zne(t,e){return t.segments.map(n=>{let{id:r,text:i,language:s,startTime:o,endTime:a,final:c}=n;var d;const h=(d=e.get(r))!==null&&d!==void 0?d:Date.now(),p=Date.now();return c?e.delete(r):e.set(r,h),{id:r,text:i,startTime:Number.parseInt(o.toString()),endTime:Number.parseInt(a.toString()),final:c,language:s,firstReceivedTime:h,lastReceivedTime:p}})}function $ne(t){const{id:e,timestamp:n,message:r,editTimestamp:i}=t;return{id:e,timestamp:Number.parseInt(n.toString()),editTimestamp:i?Number.parseInt(i.toString()):void 0,message:r}}function IN(t){switch(t.reason){case fn.LeaveRequest:return t.context;case fn.Cancelled:return Ta.CLIENT_INITIATED;case fn.NotAllowed:return Ta.USER_REJECTED;case fn.ServerUnreachable:return Ta.JOIN_FAILURE;default:return Ta.UNKNOWN_REASON}}function Rx(t){return t!==void 0?Number(t):void 0}function ff(t){return t!==void 0?BigInt(t):void 0}function nm(t){return!!t&&!(t instanceof MediaStreamTrack)&&t.isLocal}function Sl(t){return!!t&&t.kind==_e.Kind.Audio}function hd(t){return!!t&&t.kind==_e.Kind.Video}function Cu(t){return nm(t)&&hd(t)}function mc(t){return nm(t)&&Sl(t)}function y1(t){return!!t&&!t.isLocal}function Wne(t){return!!t&&!t.isLocal}function wk(t){return y1(t)&&hd(t)}function Hne(t){return t.isLocal}function qne(t,e){const n=[];let r=new TextEncoder().encode(t);for(;r.length>e;){let i=e;for(;i>0;){const s=r[i];if(s!==void 0&&(s&192)!==128)break;i--}n.push(r.slice(0,i)),r=r.slice(i)}return r.length>0&&n.push(r),n}function z3(t,e,n){var r,i,s,o;const{optionsWithoutProcessor:a,audioProcessor:c,videoProcessor:d}=H3(t??{}),h=e==null?void 0:e.processor,p=n==null?void 0:n.processor,y=a??{};return y.audio===!0&&(y.audio={}),y.video===!0&&(y.video={}),y.audio&&(b1(y.audio,e),(r=(s=y.audio).deviceId)!==null&&r!==void 0||(s.deviceId={ideal:"default"}),(c||h)&&(y.audio.processor=c??h)),y.video&&(b1(y.video,n),(i=(o=y.video).deviceId)!==null&&i!==void 0||(o.deviceId={ideal:"default"}),(d||p)&&(y.video.processor=d??p)),y}function b1(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function F_(t){var e,n,r,i;const s={};if(t.video)if(typeof t.video=="object"){const o={},a=o,c=t.video;Object.keys(c).forEach(d=>{switch(d){case"resolution":b1(a,c.resolution);break;default:a[d]=c[d]}}),s.video=o,(e=(r=s.video).deviceId)!==null&&e!==void 0||(r.deviceId={ideal:"default"})}else s.video=t.video?{deviceId:{ideal:"default"}}:!1;else s.video=!1;return t.audio?typeof t.audio=="object"?(s.audio=t.audio,(n=(i=s.audio).deviceId)!==null&&n!==void 0||(i.deviceId={ideal:"default"})):s.audio={deviceId:{ideal:"default"}}:s.audio=!1,s}function $3(t){return K(this,arguments,void 0,function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const r=W3();if(r){const i=r.createAnalyser();i.fftSize=2048;const s=i.frequencyBinCount,o=new Uint8Array(s);r.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(i),yield us(n),i.getByteTimeDomainData(o);const c=o.some(d=>d!==128&&d!==0);return r.close(),!c}return!1}()})}function W3(){var t;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const n=new e({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((t=window.document)===null||t===void 0)&&t.body)){const r=()=>K(this,void 0,void 0,function*(){var i;try{n.state==="suspended"&&(yield n.resume())}catch(s){console.warn("Error trying to auto-resume audio context",s)}finally{(i=window.document.body)===null||i===void 0||i.removeEventListener("click",r)}});n.addEventListener("statechange",()=>{var i;n.state==="closed"&&((i=window.document.body)===null||i===void 0||i.removeEventListener("click",r))}),window.document.body.addEventListener("click",r)}return n}}function Kne(t){return t==="audioinput"?_e.Source.Microphone:t==="videoinput"?_e.Source.Camera:_e.Source.Unknown}function x1(t){return t===_e.Source.Microphone?"audioinput":t===_e.Source.Camera?"videoinput":void 0}function Gne(t){var e,n;let r=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(r=typeof r=="boolean"?{}:r,Gf()?r=Object.assign(Object.assign({},r),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:r,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio,preferCurrentTab:t.preferCurrentTab}}function Xv(t){return t.split("/")[1].toLowerCase()}function Yne(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new P_({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function ln(t){return"mediaStreamTrack"in t?{trackID:t.sid,source:t.source,muted:t.isMuted,enabled:t.mediaStreamTrack.enabled,kind:t.kind,streamID:t.mediaStreamID,streamTrackID:t.mediaStreamTrack.id}:{trackID:t.trackSid,enabled:t.isEnabled,muted:t.isMuted,trackInfo:Object.assign({mimeType:t.mimeType,name:t.trackName,encrypted:t.isEncrypted,kind:t.kind,source:t.source},t.track?ln(t.track):{})}}function Qne(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function Jne(t,e){var n;t===void 0&&(t={}),e===void 0&&(e={});const r=[...Object.keys(e),...Object.keys(t)],i={};for(const s of r)t[s]!==e[s]&&(i[s]=(n=e[s])!==null&&n!==void 0?n:"");return i}function H3(t){const e=Object.assign({},t);let n,r;return typeof e.audio=="object"&&e.audio.processor&&(n=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(r=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:n,videoProcessor:r,optionsWithoutProcessor:yne(e)}}function Xne(t){switch(t){case Yr.CAMERA:return _e.Source.Camera;case Yr.MICROPHONE:return _e.Source.Microphone;case Yr.SCREEN_SHARE:return _e.Source.ScreenShare;case Yr.SCREEN_SHARE_AUDIO:return _e.Source.ScreenShareAudio;default:return _e.Source.Unknown}}function NN(t,e){return t.width*t.height<e.width*e.height}function Zne(t,e){var n;return(n=t.layers)===null||n===void 0?void 0:n.find(r=>r.quality===e)}class ere extends Ml.EventEmitter{constructor(e,n){super(),this.decryptDataRequests=new Map,this.encryptDataRequests=new Map,this.onWorkerMessage=r=>{var i,s;const{kind:o,data:a}=r.data;switch(o){case"error":sn.error(a.error.message),this.emit(Hu.EncryptionError,a.error);break;case"initAck":a.enabled&&this.keyProvider.getKeys().forEach(h=>{this.postKey(h)});break;case"enable":if(a.enabled&&this.keyProvider.getKeys().forEach(h=>{this.postKey(h)}),this.encryptionEnabled!==a.enabled&&a.participantIdentity===((i=this.room)===null||i===void 0?void 0:i.localParticipant.identity))this.emit(Hu.ParticipantEncryptionStatusChanged,a.enabled,this.room.localParticipant),this.encryptionEnabled=a.enabled;else if(a.participantIdentity){const h=(s=this.room)===null||s===void 0?void 0:s.getParticipantByIdentity(a.participantIdentity);if(!h)throw TypeError("couldn't set encryption status, participant not found".concat(a.participantIdentity));this.emit(Hu.ParticipantEncryptionStatusChanged,a.enabled,h)}break;case"ratchetKey":this.keyProvider.emit(Yu.KeyRatcheted,a.ratchetResult,a.participantIdentity,a.keyIndex);break;case"decryptDataResponse":const c=this.decryptDataRequests.get(a.uuid);c!=null&&c.resolve&&c.resolve(a);break;case"encryptDataResponse":const d=this.encryptDataRequests.get(a.uuid);d!=null&&d.resolve&&d.resolve(a);break}},this.onWorkerError=r=>{sn.error("e2ee worker encountered an error:",{error:r.error}),this.emit(Hu.EncryptionError,r.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1,this.dataChannelEncryptionEnabled=n}get isEnabled(){return this.encryptionEnabled}get isDataChannelEncryptionEnabled(){return this.isEnabled&&this.dataChannelEncryptionEnabled}setup(e){if(!pne())throw new L_("tried to setup end-to-end encryption on an unsupported browser");if(sn.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:Xte.getLevel()}};this.worker&&(sn.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){sn.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?sn.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(Xe.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(Ie.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==ai.NONE,i.identity)),e.on(Ie.ConnectionStateChanged,r=>{r===Tn.Connected&&e.remoteParticipants.forEach(i=>{i.trackPublications.forEach(s=>{this.setParticipantCryptorEnabled(s.trackInfo.encryption!==ai.NONE,i.identity)})})}).on(Ie.TrackUnsubscribed,(r,i,s)=>{var o;const a={kind:"removeTransform",data:{participantIdentity:s.identity,trackId:r.mediaStreamID}};(o=this.worker)===null||o===void 0||o.postMessage(a)}).on(Ie.TrackSubscribed,(r,i,s)=>{this.setupE2EEReceiver(r,s.identity,i.trackInfo)}).on(Ie.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(r=>{this.postKey(r)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(Ue.LocalSenderCreated,(r,i)=>K(this,void 0,void 0,function*(){this.setupE2EESender(i,r)})),e.localParticipant.on(Ue.LocalTrackPublished,r=>{if(!hd(r.track)||!wy())return;const i={kind:"updateCodec",data:{trackId:r.track.mediaStreamID,codec:Xv(r.trackInfo.codecs[0].mimeType),participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(i)}),n.on(Yu.SetKey,r=>this.postKey(r)).on(Yu.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}encryptData(e){return K(this,void 0,void 0,function*(){if(!this.worker)throw Error("could not encrypt data, worker is missing");const n=crypto.randomUUID(),r={kind:"encryptDataRequest",data:{uuid:n,payload:e,participantIdentity:this.room.localParticipant.identity}},i=new Ho;return i.onFinally=()=>{this.encryptDataRequests.delete(n)},this.encryptDataRequests.set(n,i),this.worker.postMessage(r),i.promise})}handleEncryptedData(e,n,r,i){if(!this.worker)throw Error("could not handle encrypted data, worker is missing");const s=crypto.randomUUID(),o={kind:"decryptDataRequest",data:{uuid:s,payload:e,iv:n,participantIdentity:r,keyIndex:i}},a=new Ho;return a.onFinally=()=>{this.decryptDataRequests.delete(s)},this.decryptDataRequests.set(s,a),this.worker.postMessage(o),a.promise}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(r)}postKey(e){let{key:n,participantIdentity:r,keyIndex:i}=e;var s;if(!this.worker)throw Error("could not set key, worker is missing");const o={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((s=this.room)===null||s===void 0?void 0:s.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(o)}postEnable(e,n){if(this.worker){const r={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,r){if(e.receiver){if(!(r!=null&&r.mimeType)||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?Xv(r.mimeType):void 0)}}setupE2EESender(e,n){if(!nm(e)||!n){n||sn.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,r,i){return K(this,void 0,void 0,function*(){if(this.worker){if(u1()){const s={kind:"decode",participantIdentity:r,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,s)}else{if(Av in e&&i){const c={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(c);return}let s=e.writableStream,o=e.readableStream;if(!s||!o){const c=e.createEncodedStreams();e.writableStream=c.writable,s=c.writable,e.readableStream=c.readable,o=c.readable}const a={kind:"decode",data:{readableStream:o,writableStream:s,trackId:n,codec:i,participantIdentity:r,isReuse:Av in e}};this.worker.postMessage(a,[o,s])}e[Av]=!0}})}handleSender(e,n,r){var i;if(!(Av in e||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(u1()){sn.info("initialize script transform");const s={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,s)}else{sn.info("initialize encoded streams");const s=e.createEncodedStreams(),o={kind:"encode",data:{readableStream:s.readable,writableStream:s.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(o,[s.readable,s.writable])}e[Av]=!0}}}const Sk="default";class Ci{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new Ci),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return K(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var s;if(((s=Ci.userMediaPromiseMap)===null||s===void 0?void 0:s.size)>0){sn.debug("awaiting getUserMedia promise");try{n?yield Ci.userMediaPromiseMap.get(n):yield Promise.all(Ci.userMediaPromiseMap.values())}catch{sn.warn("error waiting for media permissons")}}let o=yield navigator.mediaDevices.enumerateDevices();if(i&&!(Gf()&&r.hasDeviceInUse(n))&&(o.filter(c=>c.kind===n).length===0||o.some(c=>{const d=c.label==="",h=n?c.kind===n:!0;return d&&h}))){const c={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},d=yield navigator.mediaDevices.getUserMedia(c);o=yield navigator.mediaDevices.enumerateDevices(),d.getTracks().forEach(h=>{h.stop()})}return r._previousDevices=o,n&&(o=o.filter(a=>a.kind===n)),o}()})}normalizeDeviceId(e,n,r){return K(this,void 0,void 0,function*(){if(n!==Sk)return n;const i=yield this.getDevices(e),s=i.find(a=>a.deviceId===Sk);if(!s){sn.warn("could not reliably determine default device");return}const o=i.find(a=>a.deviceId!==Sk&&a.groupId===(r??s.groupId));if(!o){sn.warn("could not reliably determine default device");return}return o==null?void 0:o.deviceId})}hasDeviceInUse(e){return e?Ci.userMediaPromiseMap.has(e):Ci.userMediaPromiseMap.size>0}}Ci.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];Ci.userMediaPromiseMap=new Map;var Zv;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(Zv||(Zv={}));class tre{constructor(){this.pendingTasks=new Map,this.taskMutex=new zs,this.nextTaskIndex=0}run(e){return K(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Zv.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Zv.RUNNING,yield e()}finally{n.status=Zv.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return K(this,void 0,void 0,function*(){return this.run(()=>K(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}class nre{get readyState(){return this.ws.readyState}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r,i;if(!((r=n.signal)===null||r===void 0)&&r.aborted)throw new DOMException("This operation was aborted","AbortError");this.url=e;const s=new WebSocket(e,(i=n.protocols)!==null&&i!==void 0?i:[]);s.binaryType="arraybuffer",this.ws=s;const o=function(){let{closeCode:a,reason:c}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return s.close(a,c)};this.opened=new Promise((a,c)=>{s.onopen=()=>{a({readable:new ReadableStream({start(d){s.onmessage=h=>{let{data:p}=h;return d.enqueue(p)},s.onerror=h=>d.error(h)},cancel:o}),writable:new WritableStream({write(d){s.send(d)},abort(){s.close()},close:o}),protocol:s.protocol,extensions:s.extensions}),s.removeEventListener("error",c)},s.addEventListener("error",c)}),this.closed=new Promise((a,c)=>{const d=()=>K(this,void 0,void 0,function*(){const h=new Promise(y=>{s.readyState!==WebSocket.CLOSED&&s.addEventListener("close",S=>{y(S)},{once:!0})}),p=yield Promise.race([us(250),h]);p?a(p):c(new Error("Encountered unspecified websocket error without a timely close event"))});s.onclose=h=>{let{code:p,reason:y}=h;a({closeCode:p,reason:y}),s.removeEventListener("error",d)},s.addEventListener("error",d)}),n.signal&&(n.signal.onabort=()=>s.close()),this.close=o}}function rre(t,e){const n=new URL(Bne(t));return e.forEach((r,i)=>{n.searchParams.set(i,r)}),q3(n,"rtc")}function ire(t){const e=new URL(v1(t));return q3(e,"validate")}function sre(t){return t.endsWith("/")?t:"".concat(t,"/")}function q3(t,e){return t.pathname="".concat(sre(t.pathname)).concat(e),t.toString()}function MN(t){if(typeof t=="string")return cN.fromJson(JSON.parse(t),{ignoreUnknownFields:!0});if(t instanceof ArrayBuffer)return cN.fromBinary(new Uint8Array(t));throw new Error("could not decode websocket message: ".concat(typeof t))}function ore(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Unknown reason";if(!(t instanceof AbortSignal))return e;const n=t.reason;switch(typeof n){case"string":return n;case"object":return n instanceof Error?n.message:e;default:return"toString"in n?n.toString():e}}const are=["syncState","trickle","offer","answer","simulate","leave"];function lre(t){const e=are.indexOf(t.case)>=0;return sn.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var mr;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(mr||(mr={}));const cre=250;class U_{get currentState(){return this.state}get isDisconnected(){return this.state===mr.DISCONNECTING||this.state===mr.DISCONNECTED}get isEstablishingConnection(){return this.state===mr.CONNECTING||this.state===mr.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=mr.DISCONNECTED,this.log=sn,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0,this.onMediaSectionsRequirement=void 0},this.log=Ic((r=n.loggerName)!==null&&r!==void 0?r:Pa.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new tre,this.queuedRequests=[],this.closingLock=new zs,this.connectionLock=new zs,this.state=mr.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,r,i){return K(this,void 0,void 0,function*(){return this.state=mr.CONNECTING,this.options=r,yield this.connect(e,n,r,i)})}reconnect(e,n,r,i){return K(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=mr.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(e,n,r,i){return K(this,void 0,void 0,function*(){const s=yield this.connectionLock.lock();this.connectOptions=r;const o=Une(),a=r.singlePeerConnection?dre(n,o,r):ure(n,o,r),c=rre(e,a),d=ire(c);return new Promise((h,p)=>K(this,void 0,void 0,function*(){var y,S;try{const k=new AbortController,C=i?[k.signal,i]:[k.signal],E=AbortSignal.any(C),_=N=>K(this,void 0,void 0,function*(){const O=N.currentTarget,j=ore(O,"Abort handler called");this.streamWriter&&!this.isDisconnected?this.sendLeave().then(()=>this.close(j)).catch(V=>{this.log.error(V),this.close()}):this.close(),clearTimeout(A),p(O instanceof AbortSignal?O.reason:O)});E.addEventListener("abort",_);const A=setTimeout(()=>{k.abort(new An("room connection has timed out (signal)",fn.ServerUnreachable))},r.websocketTimeout),M=(N,O)=>{this.handleSignalConnected(N,A,O)},I=new URL(c);I.searchParams.has("access_token")&&I.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(I),Object.assign({reconnect:r.reconnect,reconnectReason:r.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new nre(c);try{this.ws.closed.then(J=>{this.isEstablishingConnection&&p(new An("Websocket got closed during a (re)connection attempt: ".concat(J.reason),fn.InternalError)),J.closeCode!==1e3&&this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:J.reason,code:J.closeCode,wasClean:J.closeCode===1e3,state:this.state}))}).catch(J=>{this.isEstablishingConnection&&p(new An("Websocket error during a (re)connection attempt: ".concat(J),fn.InternalError))});const N=yield this.ws.opened.catch(J=>K(this,void 0,void 0,function*(){if(this.state!==mr.CONNECTED){this.state=mr.DISCONNECTED,clearTimeout(A);const Y=yield this.handleConnectionError(J,d);p(Y);return}this.handleWSError(J),p(J)}));if(clearTimeout(A),!N)return;const O=N.readable.getReader();this.streamWriter=N.writable.getWriter();const j=yield O.read();if(O.releaseLock(),!j.value)throw new An("no message received as first message",fn.InternalError);const V=MN(j.value),$=this.validateFirstMessage(V,(y=r.reconnect)!==null&&y!==void 0?y:!1);if(!$.isValid){p($.error);return}((S=V.message)===null||S===void 0?void 0:S.case)==="join"&&(this.pingTimeoutDuration=V.message.value.pingTimeout,this.pingIntervalDuration=V.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})));const W=$.shouldProcessFirstMessage?V:void 0;M(N,W),h($.response)}catch(N){clearTimeout(A),p(N)}}finally{s()}}))})}startReadingLoop(e,n){return K(this,void 0,void 0,function*(){for(n&&this.handleSignalResponse(n);;){this.signalLatency&&(yield us(this.signalLatency));const{done:r,value:i}=yield e.read();if(r)break;const s=MN(i);this.handleSignalResponse(s)}})}close(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Close method called on signal client";return function*(){const i=yield e.closingLock.lock();try{if(e.clearPingInterval(),n&&(e.state=mr.DISCONNECTING),e.ws){e.ws.close({closeCode:1e3,reason:r});const s=e.ws.closed;e.ws=void 0,e.streamWriter=void 0,yield Promise.race([s,us(cre)])}}catch(s){e.log.debug("websocket error while closing",Object.assign(Object.assign({},e.logContext),{error:s}))}finally{n&&(e.state=mr.DISCONNECTED),i()}}()})}sendOffer(e,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:Vp(e,n)})}sendAnswer(e,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:Vp(e,n)})}sendIceCandidate(e,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new bS({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new xS({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return K(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const a=s.getNextRequestId();return yield s.sendRequest({case:"updateMetadata",value:new I_({requestId:a,metadata:r,name:i,attributes:o})}),a}()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new ZU({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new n3({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:ar.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new s3({timestamp:ar.parse(Date.now()),rtt:ar.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,n){return this.sendRequest({case:"updateAudioTrack",value:new A_({trackSid:e,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new SS({reason:Ta.CLIENT_INITIATED,action:Zp.DISCONNECT})})}sendRequest(e){return K(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!i&&!lre(n)&&r.state===mr.RECONNECTING){r.queuedRequests.push(()=>K(r,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(i||(yield r.requestQueue.flush()),r.signalLatency&&(yield us(r.signalLatency)),r.isDisconnected){r.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!r.streamWriter){r.log.error("cannot send signal request before connected, type: ".concat(n==null?void 0:n.case),r.logContext);return}const o=new Cte({message:n});try{r.useJSON?yield r.streamWriter.write(o.toJsonString()):yield r.streamWriter.write(o.toBinary())}catch(a){r.log.error("error sending signal message",Object.assign(Object.assign({},r.logContext),{error:a}))}}()})}handleSignalResponse(e){var n,r;const i=e.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let s=!1;if(i.case==="answer"){const o=ON(i.value);this.onAnswer&&this.onAnswer(o,i.value.id,i.value.midToTrackId)}else if(i.case==="offer"){const o=ON(i.value);this.onOffer&&this.onOffer(o,i.value.id,i.value.midToTrackId)}else if(i.case==="trickle"){const o=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(o,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),s=!0):i.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(i.value):i.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(i.value.trackSid):i.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(i.value.token),this.onRoomMoved&&this.onRoomMoved(i.value)):i.case==="mediaSectionsRequirement"?this.onMediaSectionsRequirement&&this.onMediaSectionsRequirement(i.value):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));s||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return K(this,void 0,void 0,function*(){if(this.state===mr.DISCONNECTED)return;const n=this.onClose;yield this.close(void 0,e),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=Di.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Di.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=Di.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&Di.clearInterval(this.pingInterval)}handleSignalConnected(e,n,r){this.state=mr.CONNECTED,clearTimeout(n),this.startPingInterval(),this.startReadingLoop(e.readable.getReader(),r)}validateFirstMessage(e,n){var r,i,s,o,a;return((r=e.message)===null||r===void 0?void 0:r.case)==="join"?{isValid:!0,response:e.message.value}:this.state===mr.RECONNECTING&&((i=e.message)===null||i===void 0?void 0:i.case)!=="leave"?((s=e.message)===null||s===void 0?void 0:s.case)==="reconnect"?{isValid:!0,response:e.message.value}:(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),{isValid:!0,response:void 0,shouldProcessFirstMessage:!0}):this.isEstablishingConnection&&((o=e.message)===null||o===void 0?void 0:o.case)==="leave"?{isValid:!1,error:new An("Received leave request while trying to (re)connect",fn.LeaveRequest,void 0,e.message.value.reason)}:n?{isValid:!1,error:new An("Unexpected first message",fn.InternalError)}:{isValid:!1,error:new An("did not receive join response, got ".concat((a=e.message)===null||a===void 0?void 0:a.case," instead"),fn.InternalError)}}handleConnectionError(e,n){return K(this,void 0,void 0,function*(){try{const r=yield fetch(n);if(r.status.toFixed(0).startsWith("4")){const i=yield r.text();return new An(i,fn.NotAllowed,r.status)}else return e instanceof An?e:new An("Encountered unknown websocket error during connection: ".concat(e),fn.InternalError,r.status)}catch(r){return r instanceof An?r:new An(r instanceof Error?r.message:"server was not reachable",fn.ServerUnreachable)}})}}function ON(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function Vp(t,e){return new od({sdp:t.sdp,type:t.type,id:e})}function ure(t,e,n){var r;const i=new URLSearchParams;return i.set("access_token",t),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",_l()?"reactnative":"js"),i.set("version",e.version),i.set("protocol",e.protocol.toString()),e.deviceModel&&i.set("device_model",e.deviceModel),e.os&&i.set("os",e.os),e.osVersion&&i.set("os_version",e.osVersion),e.browser&&i.set("browser",e.browser),e.browserVersion&&i.set("browser_version",e.browserVersion),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),i}function dre(t,e,n){const r=new URLSearchParams;r.set("access_token",t);const i=new Hte({clientInfo:e,connectionSettings:new o3({autoSubscribe:!!n.autoSubscribe,adaptiveStream:!!n.adaptiveStream}),reconnect:!!n.reconnect,participantSid:n.sid?n.sid:void 0});n.reconnectReason&&(i.reconnectReason=n.reconnectReason);const s=new qte({joinRequest:i.toBinary()});return r.set("join_request",btoa(new TextDecoder("utf-8").decode(s.toBinary()))),r}class DN{constructor(){this.buffer=[],this._totalSize=0}push(e){this.buffer.push(e),this._totalSize+=e.data.byteLength}pop(){const e=this.buffer.shift();return e&&(this._totalSize-=e.data.byteLength),e}getAll(){return this.buffer.slice()}popToSequence(e){for(;this.buffer.length>0&&this.buffer[0].sequence<=e;)this.pop()}alignBufferedAmount(e){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=e)break;this.pop()}}get length(){return this.buffer.length}}class fre{constructor(e){this._map=new Map,this._lastCleanup=0,this.ttl=e}set(e,n){const r=Date.now();r-this._lastCleanup>this.ttl/2&&this.cleanup();const i=r+this.ttl;return this._map.set(e,{value:n,expiresAt:i}),this}get(e){const n=this._map.get(e);if(n){if(n.expiresAt<Date.now()){this._map.delete(e);return}return n.value}}has(e){const n=this._map.get(e);return n?n.expiresAt<Date.now()?(this._map.delete(e),!1):!0:!1}delete(e){return this._map.delete(e)}clear(){this._map.clear()}cleanup(){const e=Date.now();for(const[n,r]of this._map.entries())r.expiresAt<e&&this._map.delete(n);this._lastCleanup=e}get size(){return this.cleanup(),this._map.size}forEach(e){this.cleanup();for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&e(r.value,n,this.asValueMap())}map(e){this.cleanup();const n=[],r=this.asValueMap();for(const[i,s]of r.entries())n.push(e(s,i,r));return n}asValueMap(){const e=new Map;for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&e.set(n,r.value);return e}}var ma={},Ck={},kk={exports:{}},LN;function V_(){if(LN)return kk.exports;LN=1;var t=kk.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var n=t[e];n.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})}),kk.exports}var jN;function hre(){return jN||(jN=1,function(t){var e=function(a){return String(Number(a))===a?Number(a):a},n=function(a,c,d,h){if(h&&!d)c[h]=e(a[1]);else for(var p=0;p<d.length;p+=1)a[p+1]!=null&&(c[d[p]]=e(a[p+1]))},r=function(a,c,d){var h=a.name&&a.names;a.push&&!c[a.push]?c[a.push]=[]:h&&!c[a.name]&&(c[a.name]={});var p=a.push?{}:h?c[a.name]:c;n(d.match(a.reg),p,a.names,a.name),a.push&&c[a.push].push(p)},i=V_(),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(a){var c={},d=[],h=c;return a.split(/(\r\n|\r|\n)/).filter(s).forEach(function(p){var y=p[0],S=p.slice(2);y==="m"&&(d.push({rtp:[],fmtp:[]}),h=d[d.length-1]);for(var k=0;k<(i[y]||[]).length;k+=1){var C=i[y][k];if(C.reg.test(S))return r(C,h,S)}}),c.media=d,c};var o=function(a,c){var d=c.split(/=(.+)/,2);return d.length===2?a[d[0]]=e(d[1]):d.length===1&&c.length>1&&(a[d[0]]=void 0),a};t.parseParams=function(a){return a.split(/;\s?/).reduce(o,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(a){return a.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(a){for(var c=[],d=a.split(" ").map(e),h=0;h<d.length;h+=3)c.push({component:d[h],ip:d[h+1],port:d[h+2]});return c},t.parseImageAttributes=function(a){return a.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(o,{})})},t.parseSimulcastStreamList=function(a){return a.split(";").map(function(c){return c.split(",").map(function(d){var h,p=!1;return d[0]!=="~"?h=e(d):(h=e(d.substring(1,d.length)),p=!0),{scid:h,paused:p}})})}}(Ck)),Ck}var Tk,FN;function pre(){if(FN)return Tk;FN=1;var t=V_(),e=/%[sdv%]/g,n=function(o){var a=1,c=arguments,d=c.length;return o.replace(e,function(h){if(a>=d)return h;var p=c[a];switch(a+=1,h){case"%%":return"%";case"%s":return String(p);case"%d":return Number(p);case"%v":return""}})},r=function(o,a,c){var d=a.format instanceof Function?a.format(a.push?c:c[a.name]):a.format,h=[o+"="+d];if(a.names)for(var p=0;p<a.names.length;p+=1){var y=a.names[p];a.name?h.push(c[a.name][y]):h.push(c[a.names[p]])}else h.push(c[a.name]);return n.apply(null,h)},i=["v","o","s","i","u","e","p","c","b","t","r","z","a"],s=["i","c","b","a"];return Tk=function(o,a){a=a||{},o.version==null&&(o.version=0),o.name==null&&(o.name=" "),o.media.forEach(function(p){p.payloads==null&&(p.payloads="")});var c=a.outerOrder||i,d=a.innerOrder||s,h=[];return c.forEach(function(p){t[p].forEach(function(y){y.name in o&&o[y.name]!=null?h.push(r(p,y,o)):y.push in o&&o[y.push]!=null&&o[y.push].forEach(function(S){h.push(r(p,y,S))})})}),o.media.forEach(function(p){h.push(r("m",t.m[0],p)),d.forEach(function(y){t[y].forEach(function(S){S.name in p&&p[S.name]!=null?h.push(r(y,S,p)):S.push in p&&p[S.push]!=null&&p[S.push].forEach(function(k){h.push(r(y,S,k))})})})}),h.join(`\r
`)+`\r
`},Tk}var UN;function mre(){if(UN)return ma;UN=1;var t=hre(),e=pre(),n=V_();return ma.grammar=n,ma.write=e,ma.parse=t.parse,ma.parseParams=t.parseParams,ma.parseFmtpConfig=t.parseFmtpConfig,ma.parsePayloads=t.parsePayloads,ma.parseRemoteCandidates=t.parseRemoteCandidates,ma.parseImageAttributes=t.parseImageAttributes,ma.parseSimulcastStreamList=t.parseSimulcastStreamList,ma}var _u=mre();function B_(t,e,n){var r,i,s;e===void 0&&(e=50),n===void 0&&(n={});var o=(r=n.isImmediate)!=null&&r,a=(i=n.callback)!=null&&i,c=n.maxWait,d=Date.now(),h=[];function p(){if(c!==void 0){var S=Date.now()-d;if(S+e>=c)return c-S}return e}var y=function(){var S=[].slice.call(arguments),k=this;return new Promise(function(C,E){var _=o&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,d=Date.now(),!o){var M=t.apply(k,S);a&&a(M),h.forEach(function(I){return(0,I.resolve)(M)}),h=[]}},p()),_){var A=t.apply(k,S);return a&&a(A),C(A)}h.push({resolve:C,reject:E})})};return y.cancel=function(S){s!==void 0&&clearTimeout(s),h.forEach(function(k){return(0,k.reject)(S)}),h=[]},y}const gre=.7,vre=20,rm={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class VN extends Ml.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;super(),this.log=sn,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=B_(i=>K(this,void 0,void 0,function*(){this.emit(rm.NegotiationStarted);try{yield this.createAndSendOffer()}catch(s){if(i)i(s);else throw s}}),vre),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Ic((r=n.loggerName)!==null&&r!==void 0?r:Pa.PCTransport),this.loggerOptions=n,this.config=e,this._pc=this.createPC(),this.offerLock=new zs}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},e.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},e.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return K(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e,n){return K(this,void 0,void 0,function*(){var r;if(e.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let i;if(e.type==="offer"){let{stereoMids:s,nackMids:o}=yre(e);this.remoteStereoMids=s,this.remoteNackMids=o}else if(e.type==="answer"){const s=_u.parse((r=e.sdp)!==null&&r!==void 0?r:"");s.media.forEach(o=>{const a=z_(o.mid);o.type==="audio"&&this.trackBitrates.some(c=>{if(!c.transceiver||a!=c.transceiver.mid)return!1;let d=0;if(o.rtp.some(p=>p.codec.toUpperCase()===c.codec.toUpperCase()?(d=p.payload,!0):!1),d===0)return!0;let h=!1;for(const p of o.fmtp)if(p.payload===d){p.config=p.config.split(";").filter(y=>!y.includes("maxaveragebitrate")).join(";"),c.maxbr>0&&(p.config+=";maxaveragebitrate=".concat(c.maxbr*1e3)),h=!0;break}return h||c.maxbr>0&&o.fmtp.push({payload:d,config:"maxaveragebitrate=".concat(c.maxbr*1e3)}),!0})}),i=_u.write(s)}return yield this.setMungedSDP(e,i,!0),this.pendingCandidates.forEach(s=>{this.pc.addIceCandidate(s)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(rm.NegotiationComplete),e.sdp&&_u.parse(e.sdp).media.forEach(o=>{o.type==="video"&&this.emit(rm.RTPVideoPayloadTypes,o.rtp)})),!0})}createAndSendOffer(e){return K(this,void 0,void 0,function*(){var n;const r=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const a=this._pc.remoteDescription;if(e!=null&&e.iceRestart&&a)yield this._pc.setRemoteDescription(a);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const i=this.latestOfferId+1;this.latestOfferId=i;const s=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:s.sdp},this.logContext));const o=_u.parse((n=s.sdp)!==null&&n!==void 0?n:"");if(o.media.forEach(a=>{zN(a),a.type==="audio"?BN(a,["all"],[]):a.type==="video"&&this.trackBitrates.some(c=>{if(!a.msid||!c.cid||!a.msid.includes(c.cid))return!1;let d=0;if(a.rtp.some(p=>p.codec.toUpperCase()===c.codec.toUpperCase()?(d=p.payload,!0):!1),d===0||(ml(c.codec)&&!Gf()&&this.ensureVideoDDExtensionForSVC(a,o),c.codec!=="av1"))return!0;const h=Math.round(c.maxbr*gre);for(const p of a.fmtp)if(p.payload===d){p.config.includes("x-google-start-bitrate")||(p.config+=";x-google-start-bitrate=".concat(h));break}return!0})}),this.latestOfferId>i){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:i}));return}yield this.setMungedSDP(s,_u.write(o)),this.onOffer(s,this.latestOfferId)}finally{r()}})}createAndSetAnswer(){return K(this,void 0,void 0,function*(){var e;const n=yield this.pc.createAnswer(),r=_u.parse((e=n.sdp)!==null&&e!==void 0?e:"");return r.media.forEach(i=>{zN(i),i.type==="audio"&&BN(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,_u.write(r)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTransceiverOfKind(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new si("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new si("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return K(this,void 0,void 0,function*(){var e;if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(a=>{switch(a.type){case"transport":n=a.selectedCandidatePairId;break;case"candidate-pair":n===""&&a.selected&&(n=a.id),r.set(a.id,a);break;case"remote-candidate":i.set(a.id,"".concat(a.address,":").concat(a.port));break}}),n==="")return;const o=(e=r.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(o!==void 0)return i.get(o)})}setMungedSDP(e,n,r){return K(this,void 0,void 0,function*(){if(n){const i=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(s){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:s,sdp:n})),e.sdp=i}}try{r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(i){let s="unknown error";i instanceof Error?s=i.message:typeof i=="string"&&(s=i);const o={error:s,sdp:e.sdp};throw!r&&this.pc.remoteDescription&&(o.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:o})),new d1(s)}})}ensureVideoDDExtensionForSVC(e,n){var r,i;if(!((r=e.ext)===null||r===void 0?void 0:r.some(o=>o.uri===EN))){if(this.ddExtID===0){let o=0;n.media.forEach(a=>{var c;a.type==="video"&&((c=a.ext)===null||c===void 0||c.forEach(d=>{d.value>o&&(o=d.value)}))}),this.ddExtID=o+1}(i=e.ext)===null||i===void 0||i.push({value:this.ddExtID,uri:EN})}}}function BN(t,e,n){const r=z_(t.mid);let i=0;t.rtp.some(s=>s.codec==="opus"?(i=s.payload,!0):!1),i>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(r)&&!t.rtcpFb.some(s=>s.payload===i&&s.type==="nack")&&t.rtcpFb.push({payload:i,type:"nack"}),(e.includes(r)||e.length===1&&e[0]==="all")&&t.fmtp.some(s=>s.payload===i?(s.config.includes("stereo=1")||(s.config+=";stereo=1"),!0):!1))}function yre(t){var e;const n=[],r=[],i=_u.parse((e=t.sdp)!==null&&e!==void 0?e:"");let s=0;return i.media.forEach(o=>{var a;const c=z_(o.mid);o.type==="audio"&&(o.rtp.some(d=>d.codec==="opus"?(s=d.payload,!0):!1),!((a=o.rtcpFb)===null||a===void 0)&&a.some(d=>d.payload===s&&d.type==="nack")&&r.push(c),o.fmtp.some(d=>d.payload===s?(d.config.includes("sprop-stereo=1")&&n.push(c),!0):!1))}),{stereoMids:n,nackMids:r}}function zN(t){if(t.connection){const e=t.connection.ip.indexOf(":")>=0;(t.connection.version===4&&e||t.connection.version===6&&!e)&&(t.connection.ip="0.0.0.0",t.connection.version=4)}}function z_(t){return typeof t=="number"?t.toFixed(0):t}const w1="vp8",bre={audioPreset:pw.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:j_.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:w1,backupCodec:!0,preConnectBuffer:!1},K3={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},G3={deviceId:{ideal:"default"},resolution:Nm.h720.resolution},xre={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new ene,disconnectOnPageLeave:!0,webAudioMix:!1,singlePeerConnection:!1},$_={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var kr;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(kr||(kr={}));class wre{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,r){var i;this.peerConnectionTimeout=$_.peerConnectionTimeout,this.log=sn,this.updateState=()=>{var s,o;const a=this.state,c=this.requiredTransports.map(d=>d.getConnectionState());c.every(d=>d==="connected")?this.state=kr.CONNECTED:c.some(d=>d==="failed")?this.state=kr.FAILED:c.some(d=>d==="connecting")?this.state=kr.CONNECTING:c.every(d=>d==="closed")?this.state=kr.CLOSED:c.some(d=>d==="closed")?this.state=kr.CLOSING:c.every(d=>d==="new")&&(this.state=kr.NEW),a!==this.state&&(this.log.debug("pc state change: from ".concat(kr[a]," to ").concat(kr[this.state]),this.logContext),(s=this.onStateChange)===null||s===void 0||s.call(this,this.state,this.publisher.getConnectionState(),(o=this.subscriber)===null||o===void 0?void 0:o.getConnectionState()))},this.log=Ic((i=r.loggerName)!==null&&i!==void 0?i:Pa.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=n!=="subscriber-primary",this.isSubscriberConnectionRequired=n==="subscriber-primary",this.publisher=new VN(e,r),n!=="publisher-only"&&(this.subscriber=new VN(e,r),this.subscriber.onConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.subscriber.onIceCandidate=s=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,s,ka.SUBSCRIBER)},this.subscriber.onDataChannel=s=>{var o;(o=this.onDataChannel)===null||o===void 0||o.call(this,s)},this.subscriber.onTrack=s=>{var o;(o=this.onTrack)===null||o===void 0||o.call(this,s)}),this.publisher.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=s=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,s,ka.PUBLISHER)},this.publisher.onTrack=s=>{var o;(o=this.onTrack)===null||o===void 0||o.call(this,s)},this.publisher.onOffer=(s,o)=>{var a;(a=this.onPublisherOffer)===null||a===void 0||a.call(this,s,o)},this.state=kr.NEW,this.connectionLock=new zs,this.remoteOfferLock=new zs}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e,n){return this.publisher.setRemoteDescription(e,n)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return K(this,void 0,void 0,function*(){var e;if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const n=this.publisher;for(const r of n.getSenders())try{n.canRemoveTrack()&&n.removeTrack(r)}catch(i){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:i}))}}yield Promise.all([this.publisher.close(),(e=this.subscriber)===null||e===void 0?void 0:e.close()]),this.updateState()})}triggerIceRestart(){return K(this,void 0,void 0,function*(){this.subscriber&&(this.subscriber.restartingIce=!0),this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return K(this,void 0,void 0,function*(){var r;n===ka.PUBLISHER?yield this.publisher.addIceCandidate(e):yield(r=this.subscriber)===null||r===void 0?void 0:r.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e,n){return K(this,void 0,void 0,function*(){var r,i,s;this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:(r=this.subscriber)===null||r===void 0?void 0:r.getSignallingState().toString()}));const o=yield this.remoteOfferLock.lock();try{return(yield(i=this.subscriber)===null||i===void 0?void 0:i.setRemoteDescription(e,n))?yield(s=this.subscriber)===null||s===void 0?void 0:s.createAndSetAnswer():void 0}finally{o()}})}updateConfiguration(e,n){var r;this.publisher.setConfiguration(e),(r=this.subscriber)===null||r===void 0||r.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){return K(this,void 0,void 0,function*(){var r;const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(s=>this.ensureTransportConnected(s,e,n)))}finally{i()}})}negotiate(e){return K(this,void 0,void 0,function*(){return new Promise((n,r)=>K(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),s=()=>{clearTimeout(i),r("negotiation aborted")};e.signal.addEventListener("abort",s),this.publisher.once(rm.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(rm.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(o=>{clearTimeout(i),r(o)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTransceiverOfKind(e,n){return this.publisher.addTransceiverOfKind(e,n)}getMidForReceiver(e){const r=(this.subscriber?this.subscriber.getTransceivers():this.publisher.getTransceivers()).find(i=>i.receiver===e);return r==null?void 0:r.mid}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===ka.PUBLISHER?this.publisher.getConnectedAddress():e===ka.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&this.subscriber&&e.push(this.subscriber),e}ensureTransportConnected(e,n){return K(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(r.getConnectionState()!=="connected")return new Promise((c,d)=>K(s,void 0,void 0,function*(){const h=()=>{this.log.warn("abort transport connection",this.logContext),Di.clearTimeout(p),d(new An("room connection has been cancelled",fn.Cancelled))};i!=null&&i.signal.aborted&&h(),i==null||i.signal.addEventListener("abort",h);const p=Di.setTimeout(()=>{i==null||i.signal.removeEventListener("abort",h),d(new An("could not establish pc connection",fn.InternalError))},o);for(;this.state!==kr.CONNECTED;)if(yield us(50),i!=null&&i.signal.aborted){d(new An("room connection has been cancelled",fn.Cancelled));return}Di.clearTimeout(p),i==null||i.signal.removeEventListener("abort",h),c()}))}()})}}class Pr extends Error{constructor(e,n,r){super(n),this.code=e,this.message=$N(n,Pr.MAX_MESSAGE_BYTES),this.data=r?$N(r,Pr.MAX_DATA_BYTES):void 0}static fromProto(e){return new Pr(e.code,e.message,e.data)}toProto(){return new BU({code:this.code,message:this.message,data:this.data})}static builtIn(e,n){return new Pr(Pr.ErrorCode[e],Pr.ErrorMessage[e],n)}}Pr.MAX_MESSAGE_BYTES=256;Pr.MAX_DATA_BYTES=15360;Pr.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};Pr.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const Y3=15360;function W_(t){return new TextEncoder().encode(t).length}function $N(t,e){if(W_(t)<=e)return t;let n=0,r=t.length;const i=new TextEncoder;for(;n<r;){const s=Math.floor((n+r+1)/2);i.encode(t.slice(0,s)).length<=e?n=s:r=s-1}return t.slice(0,n)}const H_=2e3;function kS(t,e){if(!e)return 0;let n,r;return"bytesReceived"in t?(n=t.bytesReceived,r=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,r=e.bytesSent),n===void 0||r===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-r)*8*1e3/(t.timestamp-e.timestamp)}const q_=typeof MediaRecorder<"u";class Sre{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const Cre=q_?MediaRecorder:Sre;class kre extends Cre{constructor(e,n){if(!q_)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([e.mediaStreamTrack]),n);let r,i;const s=()=>i===void 0,o=()=>{this.removeEventListener("dataavailable",r),this.removeEventListener("stop",o),this.removeEventListener("error",a),i==null||i.close(),i=void 0},a=c=>{i==null||i.error(c),this.removeEventListener("dataavailable",r),this.removeEventListener("stop",o),this.removeEventListener("error",a),i=void 0};this.byteStream=new ReadableStream({start:c=>{i=c,r=d=>K(this,void 0,void 0,function*(){let h;if(d.data.arrayBuffer){const p=yield d.data.arrayBuffer();h=new Uint8Array(p)}else if(d.data.byteArray)h=d.data.byteArray;else throw new Error("no data available!");s()||c.enqueue(h)}),this.addEventListener("dataavailable",r)},cancel:()=>{o()}}),this.addEventListener("stop",o),this.addEventListener("error",a)}}function Tre(){return q_}const Ere=1e3,_re=1e4;class Q3 extends _e{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=arguments.length>4?arguments[4]:void 0;super(e,n,s),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=B_(()=>K(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>K(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(Ye.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new zs,this.pauseUpstreamLock=new zs,this.trackChangeLock=new zs,this.trackChangeLock.lock().then(o=>K(this,void 0,void 0,function*(){try{yield this.setMediaStreamTrack(e,!0)}finally{o()}})),this._constraints=e.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==_e.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,n){return K(this,void 0,void 0,function*(){var r;if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(s=>{tm(this._mediaStreamTrack,s)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let i;if(this.processor&&e){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(Up(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),i=this.processor.processedTrack}this.sender&&((r=this.sender.transport)===null||r===void 0?void 0:r.state)!=="closed"&&(yield this.sender.replaceTrack(i??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(s=>{Up(i??e,s)}))})}waitForDimensions(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ere;return function*(){var r;if(e.kind===_e.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((r=$s())===null||r===void 0?void 0:r.os)==="iOS"&&(yield us(10));const i=Date.now();for(;Date.now()-i<n;){const s=e.dimensions;if(s)return s;yield us(50)}throw new Tc("unable to get track dimensions after timeout")}()})}setDeviceId(e){return K(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===Qu(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),Qu(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if(e.source===_e.Source.ScreenShare)return;const{deviceId:r,groupId:i}=e._mediaStreamTrack.getSettings(),s=e.kind===_e.Kind.Audio?"audioinput":"videoinput";return n?Ci.getInstance().normalizeDeviceId(s,r,i):r}()})}mute(){return K(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return K(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,n){return K(this,void 0,void 0,function*(){const r=yield this.trackChangeLock.lock();try{if(!this.sender)throw new Tc("unable to replace an unpublished track");let i,s;return typeof n=="boolean"?i=n:n!==void 0&&(i=n.userProvidedTrack,s=n.stopProcessor),this.providedByUser=i??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),s&&this.processor&&(yield this.internalStopProcessor()),this}finally{r()}})}restart(e){return K(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.trackChangeLock.lock();try{e||(e=this._constraints);const{deviceId:r,facingMode:i}=e,s=tne(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const o={audio:!1,video:!1};this.kind===_e.Kind.Video?o.video=r||i?{deviceId:r,facingMode:i}:!0:o.audio=r?Object.assign({deviceId:r},s):!0,this.attachedElements.forEach(d=>{tm(this.mediaStreamTrack,d)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const c=(yield navigator.mediaDevices.getUserMedia(o)).getTracks()[0];return this.kind===_e.Kind.Video&&(yield c.applyConstraints(s)),c.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(c),this._constraints=e,this.emit(Ye.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?Ye.Muted:Ye.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return K(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),U3()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return K(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(Ye.UpstreamPaused,this);const r=$s();if((r==null?void 0:r.name)==="Safari"&&Rl(r.version,"12.0")<0)throw new L_("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return K(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(Ye.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return K(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return K(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var s;const o=yield r.trackChangeLock.lock();try{r.log.debug("setting up processor",r.logContext);const a=document.createElement(r.kind),c={kind:r.kind,track:r._mediaStreamTrack,element:a,audioContext:r.audioContext};if(yield n.init(c),r.log.debug("processor initialized",r.logContext),r.processor&&(yield r.internalStopProcessor()),r.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(Up(r._mediaStreamTrack,a),a.muted=!0,a.play().catch(d=>{d instanceof DOMException&&d.name==="AbortError"?(r.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},r.logContext),{error:d})),setTimeout(()=>{a.play().catch(h=>{r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{err:h}))})},100)):r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{error:d}))}),r.processor=n,r.processorElement=a,r.processor.processedTrack){for(const d of r.attachedElements)d!==r.processorElement&&i&&(tm(r._mediaStreamTrack,d),Up(r.processor.processedTrack,d));yield(s=r.sender)===null||s===void 0?void 0:s.replaceTrack(r.processor.processedTrack)}r.emit(Ye.TrackProcessorUpdate,r.processor)}finally{o()}}()})}getProcessor(){return this.processor}stopProcessor(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const r=yield e.trackChangeLock.lock();try{yield e.internalStopProcessor(n)}finally{r()}}()})}internalStopProcessor(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var r,i;e.processor&&(e.log.debug("stopping processor",e.logContext),(r=e.processor.processedTrack)===null||r===void 0||r.stop(),yield e.processor.destroy(),e.processor=void 0,n||((i=e.processorElement)===null||i===void 0||i.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(Ye.TrackProcessorUpdate))}()})}startPreConnectBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!Tre()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new kre(this,{mimeType:n})}this.localTrackRecorder.start(e),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},_re)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.byteStream}getPreConnectBufferMimeType(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.mimeType}}class mw extends Q3{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;super(e,_e.Kind.Audio,n,r,s),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>K(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}o&&this.prevStats&&(this._currentBitrate=kS(o,this.prevStats)),this.prevStats=o}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(Ye.AudioTrackFeatureUpdate,this,Si.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(Ye.AudioTrackFeatureUpdate,this,Si.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=i,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return K(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===_e.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return K(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Qu(this._constraints.deviceId);return this.source===_e.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return K(this,void 0,void 0,function*(){let n;if(e){const r=F_({audio:e});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return K(this,void 0,void 0,function*(){const r=yield n.restart.call(this,e);return this.checkForSilence(),r})}startMonitor(){js()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},H_)))}setProcessor(e){return K(this,void 0,void 0,function*(){var n;const r=yield this.trackChangeLock.lock();try{if(!_l()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.internalStopProcessor());const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(i),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(Ye.TrackProcessorUpdate,this.processor)}finally{r()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return K(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return K(this,void 0,void 0,function*(){const e=yield $3(this);return e&&(this.isMuted||this.log.debug("silence detected on local audio track",this.logContext),this.emit(Ye.AudioSilenceDetected)),e})}}function Rre(t,e,n){switch(t.kind){case"audio":return new mw(t,e,!1,void 0,n);case"video":return new gw(t,e,!1,n);default:throw new Tc("unsupported track type: ".concat(t.kind))}}const Pre=Object.values(Nm),Are=Object.values(f1),Ire=Object.values(j_),Nre=[Nm.h180,Nm.h360],Mre=[f1.h180,f1.h360],Ore=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var r,i;return new Wn(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=t.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=n.fps)!==null&&i!==void 0?i:30))))),n.fps,t.encoding.priority)}),S1=["q","h","f"];function C1(t,e,n,r){var i,s;let o=r==null?void 0:r.videoEncoding;t&&(o=r==null?void 0:r.screenShareEncoding);const a=r==null?void 0:r.simulcast,c=r==null?void 0:r.scalabilityMode,d=r==null?void 0:r.videoCodec;if(!o&&!a&&!c||!e||!n)return[{}];o||(o=Lre(t,e,n,d),sn.debug("using video encoding",o));const h=o.maxFramerate,p=new Wn(e,n,o.maxBitrate,o.maxFramerate,o.priority);if(c&&ml(d)){const k=new J3(c),C=[];if(k.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(c));const E=$s();if(wy()||_l()||(E==null?void 0:E.name)==="Chrome"&&Rl(E==null?void 0:E.version,"113")<0){const _=k.suffix=="h"?2:3,A=Dne(E);for(let M=0;M<k.spatial;M+=1)C.push({rid:S1[2-M],maxBitrate:o.maxBitrate/Math.pow(_,M),maxFramerate:p.encoding.maxFramerate,scaleResolutionDownBy:A?Math.pow(2,M):void 0});C[0].scalabilityMode=c}else C.push({maxBitrate:o.maxBitrate,maxFramerate:p.encoding.maxFramerate,scalabilityMode:c});return p.encoding.priority&&(C[0].priority=p.encoding.priority,C[0].networkPriority=p.encoding.priority),sn.debug("using svc encoding",{encodings:C}),C}if(!a)return[o];let y=[];t?y=(i=HN(r==null?void 0:r.screenShareSimulcastLayers))!==null&&i!==void 0?i:WN(t,p):y=(s=HN(r==null?void 0:r.videoSimulcastLayers))!==null&&s!==void 0?s:WN(t,p);let S;if(y.length>0){const k=y[0];y.length>1&&([,S]=y);const C=Math.max(e,n);if(C>=960&&S)return Ek(e,n,[k,S,p],h);if(C>=480)return Ek(e,n,[k,p],h)}return Ek(e,n,[p])}function Dre(t,e,n){var r,i,s,o;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&sn.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const a=t.mediaStreamTrack.getSettings(),c=(r=a.width)!==null&&r!==void 0?r:(i=t.dimensions)===null||i===void 0?void 0:i.width,d=(s=a.height)!==null&&s!==void 0?s:(o=t.dimensions)===null||o===void 0?void 0:o.height;return t.source===_e.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),C1(t.source===_e.Source.ScreenShare,c,d,n)}function Lre(t,e,n,r){const i=jre(t,e,n);let{encoding:s}=i[0];const o=Math.max(e,n);for(let a=0;a<i.length;a+=1){const c=i[a];if(s=c.encoding,c.width>=o)break}if(r)switch(r){case"av1":case"h265":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.7;break;case"vp9":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.85;break}return s}function jre(t,e,n){if(t)return Ire;const r=e>n?e/n:n/e;return Math.abs(r-16/9)<Math.abs(r-4/3)?Pre:Are}function WN(t,e){if(t)return Ore(e);const{width:n,height:r}=e,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?Nre:Mre}function Ek(t,e,n,r){const i=[];if(n.forEach((s,o)=>{if(o>=S1.length)return;const a=Math.min(t,e),d={rid:S1[o],scaleResolutionDownBy:Math.max(1,a/Math.min(s.width,s.height)),maxBitrate:s.encoding.maxBitrate},h=r&&s.encoding.maxFramerate?Math.min(r,s.encoding.maxFramerate):s.encoding.maxFramerate;h&&(d.maxFramerate=h);const p=Kf()||o===0;s.encoding.priority&&p&&(d.priority=s.encoding.priority,d.networkPriority=s.encoding.priority),i.push(d)}),_l()&&B3()==="ios"){let s;i.forEach(a=>{s?a.maxFramerate&&a.maxFramerate>s&&(s=a.maxFramerate):s=a.maxFramerate});let o=!0;i.forEach(a=>{var c;a.maxFramerate!=s&&(o&&(o=!1,sn.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),sn.info('Setting framerate of encoding "'.concat((c=a.rid)!==null&&c!==void 0?c:"",'" to ').concat(s)),a.maxFramerate=s)})}return i}function HN(t){if(t)return t.sort((e,n)=>{const{encoding:r}=e,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class J3{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function Fre(t){return t.source===_e.Source.ScreenShare||t.constraints.height&&Qu(t.constraints.height)>=1080?"maintain-resolution":"balanced"}const Ure=5e3;class gw extends Q3{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(e,_e.Kind.Video,n,r,i),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>K(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(c){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:c}));return}const o=new Map(s.map(c=>[c.rid,c])),a=s.some(c=>c.qualityLimitationReason==="cpu");if(a!==this.isCpuConstrained&&(this.isCpuConstrained=a,this.isCpuConstrained&&this.emit(Ye.CpuConstrained)),this.prevStats){let c=0;o.forEach((d,h)=>{var p;const y=(p=this.prevStats)===null||p===void 0?void 0:p.get(h);c+=kS(d,y)}),this._currentBitrate=c}this.prevStats=o}),this.senderLock=new zs}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!js())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},H_))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return K(this,void 0,void 0,function*(){var n,r,i,s,o;yield e.pauseUpstream.call(this);try{for(var a=!0,c=kc(this.simulcastCodecs.values()),d;d=yield c.next(),n=d.done,!n;a=!0)s=d.value,a=!1,yield(o=s.sender)===null||o===void 0?void 0:o.replaceTrack(null)}catch(h){r={error:h}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return K(this,void 0,void 0,function*(){var n,r,i,s,o;yield e.resumeUpstream.call(this);try{for(var a=!0,c=kc(this.simulcastCodecs.values()),d;d=yield c.next(),n=d.done,!n;a=!0){s=d.value,a=!1;const h=s;yield(o=h.sender)===null||o===void 0?void 0:o.replaceTrack(h.mediaStreamTrack)}}catch(h){r={error:h}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return K(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===_e.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return K(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===_e.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){return K(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var s;if(i.type==="outbound-rtp"){const o={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationDurations:i.qualityLimitationDurations,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges,rid:(s=i.rid)!==null&&s!==void 0?s:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,targetBitrate:i.targetBitrate,timestamp:i.timestamp},a=r.get(i.remoteId);a&&(o.jitter=a.jitter,o.packetsLost=a.packetsLost,o.roundTripTime=a.roundTripTime),n.push(o)}}),n.sort((i,s)=>{var o,a;return((o=s.frameWidth)!==null&&o!==void 0?o:0)-((a=i.frameWidth)!==null&&a!==void 0?a:0)}),n})}setPublishingQuality(e){const n=[];for(let r=mo.LOW;r<=mo.HIGH;r+=1)n.push(new N_({quality:r,enabled:r<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(ml(this.codec),n)}restartTrack(e){return K(this,void 0,void 0,function*(){var n,r,i,s,o;let a;if(e){const p=F_({video:e});typeof p.video!="boolean"&&(a=p.video)}yield this.restart(a),this.isCpuConstrained=!1;try{for(var c=!0,d=kc(this.simulcastCodecs.values()),h;h=yield d.next(),n=h.done,!n;c=!0){s=h.value,c=!1;const p=s;p.sender&&((o=p.sender.transport)===null||o===void 0?void 0:o.state)!=="closed"&&(p.mediaStreamTrack=this.mediaStreamTrack.clone(),yield p.sender.replaceTrack(p.mediaStreamTrack))}}catch(p){r={error:p}}finally{try{!c&&!n&&(i=d.return)&&(yield i.call(d))}finally{if(r)throw r.error}}})}setProcessor(e){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return K(this,arguments,void 0,function(r){var i=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var o,a,c,d,h,p;if(yield n.setProcessor.call(i,r,s),!((h=i.processor)===null||h===void 0)&&h.processedTrack)try{for(var y=!0,S=kc(i.simulcastCodecs.values()),k;k=yield S.next(),o=k.done,!o;y=!0)d=k.value,y=!1,yield(p=d.sender)===null||p===void 0?void 0:p.replaceTrack(i.processor.processedTrack)}catch(C){a={error:C}}finally{try{!y&&!o&&(c=S.return)&&(yield c.call(S))}finally{if(a)throw a.error}}}()})}setDegradationPreference(e){return K(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const n=this.sender.getParameters();n.degradationPreference=e,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const r={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,r),r}setSimulcastTrackSender(e,n){const r=this.simulcastCodecs.get(e);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},Ure))}setPublishingCodecs(e){return K(this,void 0,void 0,function*(){var n,r,i,s,o,a,c;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(ml(e[0].codec),e[0].qualities),[];this.subscribedCodecs=e;const d=[];try{for(n=!0,r=kc(e);i=yield r.next(),s=i.done,!s;n=!0){c=i.value,n=!1;const h=c;if(!this.codec||this.codec===h.codec)yield this.setPublishingLayers(ml(h.codec),h.qualities);else{const p=this.simulcastCodecs.get(h.codec);if(this.log.debug("try setPublishingCodec for ".concat(h.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:p})),!p||!p.sender){for(const y of h.qualities)if(y.enabled){d.push(h.codec);break}}else p.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(h.codec),this.logContext),yield qN(p.sender,p.encodings,h.qualities,this.senderLock,ml(h.codec),this.log,this.logContext))}}}catch(h){o={error:h}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return d})}setPublishingLayers(e,n){return K(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield qN(this.sender,this.encodings,n,this.senderLock,e,this.log,this.logContext))})}prioritizePerformance(){return K(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const e=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((r,i)=>{var s;return Object.assign(Object.assign({},r),{active:i===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((s=this.mediaStreamTrack.getSettings().height)!==null&&s!==void 0?s:360)/360)),scalabilityMode:i===0&&ml(this.codec)?"L1T3":void 0,maxFramerate:i===0?15:0,maxBitrate:i===0?r.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{e()}})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return K(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),U3()&&this.isInBackground&&this.source===_e.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function qN(t,e,n,r,i,s,o){return K(this,void 0,void 0,function*(){const a=yield r.lock();s.debug("setPublishingLayersForSender",Object.assign(Object.assign({},o),{sender:t,qualities:n,senderEncodings:e}));try{const c=t.getParameters(),{encodings:d}=c;if(!d)return;if(d.length!==e.length){s.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},o),{encodings:d,senderEncodings:e}));return}let h=!1;!1&&d[0].scalabilityMode||(i&&n.some(S=>S.enabled)&&n.forEach(S=>S.enabled=!0),d.forEach((y,S)=>{var k;let C=(k=y.rid)!==null&&k!==void 0?k:"";C===""&&(C="q");const E=X3(C),_=n.find(A=>A.quality===E);_&&y.active!==_.enabled&&(h=!0,y.active=_.enabled,s.debug("setting layer ".concat(_.quality," to ").concat(y.active?"enabled":"disabled"),o),Kf()&&(_.enabled?(y.scaleResolutionDownBy=e[S].scaleResolutionDownBy,y.maxBitrate=e[S].maxBitrate,y.maxFrameRate=e[S].maxFrameRate):(y.scaleResolutionDownBy=4,y.maxBitrate=10,y.maxFrameRate=2)))})),h&&(c.encodings=d,s.debug("setting encodings",Object.assign(Object.assign({},o),{encodings:c.encodings})),yield t.setParameters(c))}finally{a()}})}function X3(t){switch(t){case"f":return mo.HIGH;case"h":return mo.MEDIUM;case"q":return mo.LOW;default:return mo.HIGH}}function KN(t,e,n,r){if(!n)return[new Gu({quality:mo.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,s=new J3(i),o=[],a=s.suffix=="h"?1.5:2,c=s.suffix=="h"?2:3;for(let d=0;d<s.spatial;d+=1)o.push(new Gu({quality:Math.min(mo.HIGH,s.spatial-1)-d,width:Math.ceil(t/Math.pow(a,d)),height:Math.ceil(e/Math.pow(a,d)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(c,d)):0,ssrc:0}));return o}return n.map(i=>{var s,o,a;const c=(s=i.scaleResolutionDownBy)!==null&&s!==void 0?s:1;let d=X3((o=i.rid)!==null&&o!==void 0?o:"");return new Gu({quality:d,width:Math.ceil(t/c),height:Math.ceil(e/c),bitrate:(a=i.maxBitrate)!==null&&a!==void 0?a:0,ssrc:0})})}const GN="_lossy",YN="_reliable",Vre=2*1e3,_k="leave-reconnect",Bre=3e4;var Uo;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(Uo||(Uo={}));class zre extends Ml.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=$_.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=Uo.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=sn,this.reliableDataSequence=1,this.reliableMessageBuffer=new DN,this.reliableReceivedState=new fre(Bre),this.midToTrackId={},this.handleDataChannel=r=>K(this,[r],void 0,function(i){var s=this;let{channel:o}=i;return function*(){if(o){if(o.label===YN)s.reliableDCSub=o;else if(o.label===GN)s.lossyDCSub=o;else return;s.log.debug("on data channel ".concat(o.id,", ").concat(o.label),s.logContext),o.onmessage=s.handleDataMessage}}()}),this.handleDataMessage=r=>K(this,void 0,void 0,function*(){var i,s,o,a,c;const d=yield this.dataProcessLock.lock();try{let h;if(r.data instanceof ArrayBuffer)h=r.data;else if(r.data instanceof Blob)h=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const p=as.fromBinary(new Uint8Array(h));if(p.sequence>0&&p.participantSid!==""){const y=this.reliableReceivedState.get(p.participantSid);if(y&&p.sequence<=y)return;this.reliableReceivedState.set(p.participantSid,p.sequence)}if(((i=p.value)===null||i===void 0?void 0:i.case)==="speaker")this.emit(Xe.ActiveSpeakersUpdate,p.value.value.speakers);else if(((s=p.value)===null||s===void 0?void 0:s.case)==="encryptedPacket"){if(!this.e2eeManager){this.log.error("Received encrypted packet but E2EE not set up",this.logContext);return}const y=yield(o=this.e2eeManager)===null||o===void 0?void 0:o.handleEncryptedData(p.value.value.encryptedValue,p.value.value.iv,p.participantIdentity,p.value.value.keyIndex),S=FU.fromBinary(y.payload),k=new as({value:S.value,participantIdentity:p.participantIdentity,participantSid:p.participantSid});((a=k.value)===null||a===void 0?void 0:a.case)==="user"&&QN(k,k.value.value),this.emit(Xe.DataPacketReceived,k,p.value.value.encryptionType)}else((c=p.value)===null||c===void 0?void 0:c.case)==="user"&&QN(p,p.value.value),this.emit(Xe.DataPacketReceived,p,ai.NONE)}finally{d()}}),this.handleDataError=r=>{const s=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:o}=r.error;this.log.error("DataChannel error on ".concat(s,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:o}))}else this.log.error("Unknown DataChannel error on ".concat(s),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const s=r.currentTarget.maxRetransmits===0?en.LOSSY:en.RELIABLE;this.updateAndEmitDCBufferStatus(s)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const s=c=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(c,"ms. giving up"),this.logContext),this.emit(Xe.Disconnected),this.close()},o=Date.now()-this.reconnectStart;let a=this.getNextRetryDelay({elapsedMs:o,retryCount:this.reconnectAttempts});if(a===null){s(o);return}r===_k&&(a=0),this.log.debug("reconnecting in ".concat(a,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Di.setTimeout(()=>this.attemptReconnect(i).finally(()=>this.reconnectTimeout=void 0),a)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===Uo.Connected&&r();const s=()=>{this.off(Xe.Disconnected,o),r()},o=()=>{this.off(Xe.Restarted,s),i()};this.once(Xe.Restarted,s),this.once(Xe.Disconnected,o)}),this.updateAndEmitDCBufferStatus=r=>{const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(Xe.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return r===en.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(i.bufferedAmount),i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===mr.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(df.RR_SIGNAL_DISCONNECTED))},this.log=Ic((n=e.loggerName)!==null&&n!==void 0?n:Pa.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new U_(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.closingLock=new zs,this.dataProcessLock=new zs,this.dcBufferStatus=new Map([[en.LOSSY,!0],[en.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(Xe.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(Xe.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(Xe.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(Xe.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(Xe.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(Xe.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(Xe.StreamStateChanged,r),this.client.onRequestResponse=r=>this.emit(Xe.SignalRequestResponse,r)}get logContext(){var e,n,r,i,s,o;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomID:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,participant:(o=(s=this.latestJoinResponse)===null||s===void 0?void 0:s.participant)===null||o===void 0?void 0:o.identity,pID:this.participantSid}}join(e,n,r,i){return K(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const s=yield this.client.join(e,n,r,i);return this._isClosed=!1,this.latestJoinResponse=s,this.subscriberPrimary=s.subscriberPrimary,this.pcManager||(yield this.configure(s)),(!this.subscriberPrimary||s.fastPublish)&&this.negotiate().catch(o=>{sn.error(o,this.logContext)}),this.registerOnLineListener(),this.clientConfiguration=s.clientConfiguration,this.emit(Xe.SignalConnected,s),s}catch(s){if(s instanceof An&&s.reason===fn.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,r,i);throw s}})}close(){return K(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(Xe.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return K(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new DN,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return K(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new Tc("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],r(new An("publication of local track timed out, no response from server",fn.Timeout))},1e4);this.pendingTrackResolvers[e.cid]={resolve:s=>{clearTimeout(i),n(s)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return K(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return K(this,void 0,void 0,function*(){var n,r;if(this.pcManager&&this.pcManager.currentState!==kr.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const i=this.makeRTCConfiguration(e);this.pcManager=new wre(i,this.options.singlePeerConnection?"publisher-only":e.subscriberPrimary?"subscriber-primary":"publisher-primary",this.loggerOptions),this.emit(Xe.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(s,o)=>{this.client.sendIceCandidate(s,o)},this.pcManager.onPublisherOffer=(s,o)=>{this.client.sendOffer(s,o)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(s,o,a)=>K(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(s),this.logContext),["closed","disconnected","failed"].includes(o)&&(this.publisherConnectionPromise=void 0),s===kr.CONNECTED){const h=this.pcState===Uo.New;this.pcState=Uo.Connected,h&&this.emit(Xe.Connected,e)}else s===kr.FAILED&&(this.pcState===Uo.Connected||this.pcState===Uo.Reconnecting)&&(this.pcState=Uo.Disconnected,this.handleDisconnect("peerconnection failed",a==="failed"?df.RR_SUBSCRIBER_FAILED:df.RR_PUBLISHER_FAILED));const c=this.client.isDisconnected||this.client.currentState===mr.RECONNECTING,d=[kr.FAILED,kr.CLOSING,kr.CLOSED].includes(s);c&&d&&!this._isClosed&&this.emit(Xe.Offline)}),this.pcManager.onTrack=s=>{s.streams.length!==0&&this.emit(Xe.MediaTrackAdded,s.track,s.streams[0],s.receiver)},$re((r=e.serverInfo)===null||r===void 0?void 0:r.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(e,n,r)=>K(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,midToTrackId:r})),this.midToTrackId=r,yield this.pcManager.setPublisherAnswer(e,n))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=(e,n,r)=>K(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;this.midToTrackId=r;const i=yield this.pcManager.createSubscriberAnswerFromOffer(e,n);i&&this.client.sendAnswer(i,n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:r}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],r(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(Xe.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(Xe.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(Xe.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(Xe.SubscribedQualityUpdate,e)},this.client.onRoomMoved=e=>{var n;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=e.room),this.emit(Xe.RoomMoved,e)},this.client.onMediaSectionsRequirement=e=>{var n,r;const i={direction:"recvonly"};for(let s=0;s<e.numAudios;s++)(n=this.pcManager)===null||n===void 0||n.addPublisherTransceiverOfKind("audio",i);for(let s=0;s<e.numVideos;s++)(r=this.pcManager)===null||r===void 0||r.addPublisherTransceiverOfKind("video",i);this.negotiate()},this.client.onClose=()=>{this.handleDisconnect("signal",df.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e==null?void 0:e.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case Zp.DISCONNECT:this.emit(Xe.Disconnected,e==null?void 0:e.reason),this.close();break;case Zp.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(_k);break;case Zp.RESUME:this.handleDisconnect(_k)}}}makeRTCConfiguration(e){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),e.iceServers&&!r.iceServers){const i=[];e.iceServers.forEach(s=>{const o={urls:s.urls};s.username&&(o.username=s.username),s.credential&&(o.credential=s.credential),i.push(o)}),r.iceServers=i}return e.clientConfiguration&&e.clientConfiguration.forceRelay===yy.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(GN,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(YN,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,n,r){return K(this,void 0,void 0,function*(){if(h1())return yield this.createTransceiverRTCRtpSender(e,n,r);if(p1())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new si("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,r,i){return K(this,void 0,void 0,function*(){if(h1())return this.createSimulcastTransceiverSender(e,n,r,i);if(p1())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new si("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,r){return K(this,void 0,void 0,function*(){if(!this.pcManager)throw new si("publisher is closed");const i=[];e.mediaStream&&i.push(e.mediaStream),hd(e)&&(e.codec=n.videoCodec);const s={direction:"sendonly",streams:i};return r&&(s.sendEncodings=r),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,s)).sender})}createSimulcastTransceiverSender(e,n,r,i){return K(this,void 0,void 0,function*(){if(!this.pcManager)throw new si("publisher is closed");const s={direction:"sendonly"};i&&(s.sendEncodings=i);const o=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,s);if(r.videoCodec)return e.setSimulcastTrackSender(r.videoCodec,o.sender),o.sender})}createRTCRtpSender(e){return K(this,void 0,void 0,function*(){if(!this.pcManager)throw new si("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return K(this,void 0,void 0,function*(){var n,r,i;if(!this._isClosed){if(this.attemptingReconnect){sn.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===yy.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:kr.NEW)===kr.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(s){this.reconnectAttempts+=1;let o=!0;s instanceof si?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:s})),o=!1):s instanceof Ap||(this.fullReconnectOnNext=!0),o?this.handleDisconnect("reconnect",df.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(Xe.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){return K(this,void 0,void 0,function*(){var n,r,i;try{if(!this.url||!this.token)throw new si("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(Xe.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let s;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new Ap;s=yield this.join(e??this.url,this.token,this.signalOpts)}catch(o){throw o instanceof An&&o.reason===fn.NotAllowed?new si("could not reconnect, token might be expired"):new Ap}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(Xe.SignalRestarted,s),yield this.waitForPCReconnected(),this.client.currentState!==mr.CONNECTED)throw new Ap("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(Xe.Restarted)}catch(s){const o=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(o){yield this.restartConnection(o);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),s}})}resumeConnection(e){return K(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new si("could not reconnect, url or token not saved");if(!this.pcManager)throw new si("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(Xe.Resuming);let r;try{this.setupSignalClientCallbacks(),r=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(i){let s="";throw i instanceof Error&&(s=i.message,this.log.error(i.message,Object.assign(Object.assign({},this.logContext),{error:i}))),i instanceof An&&i.reason===fn.NotAllowed?new si("could not reconnect, token might be expired"):i instanceof An&&i.reason===fn.LeaveRequest?i:new Ap(s)}if(this.emit(Xe.SignalResumed),r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=r.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==mr.CONNECTED)throw new Ap("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),r!=null&&r.lastMessageSeq&&this.resendReliableMessagesForResume(r.lastMessageSeq),this.emit(Xe.Resumed)})}waitForPCInitialConnection(e,n){return K(this,void 0,void 0,function*(){if(!this.pcManager)throw new si("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return K(this,void 0,void 0,function*(){this.pcState=Uo.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield us(Vre),!this.pcManager)throw new si("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=Uo.Connected}catch(e){throw this.pcState=Uo.Disconnected,new An("could not establish PC connection, ".concat(e.message),fn.InternalError)}})}publishRpcResponse(e,n,r,i){return K(this,void 0,void 0,function*(){const s=new as({destinationIdentities:[e],kind:en.RELIABLE,value:{case:"rpcResponse",value:new R_({requestId:n,value:i?{case:"error",value:i.toProto()}:{case:"payload",value:r??""}})}});yield this.sendDataPacket(s,en.RELIABLE)})}publishRpcAck(e,n){return K(this,void 0,void 0,function*(){const r=new as({destinationIdentities:[e],kind:en.RELIABLE,value:{case:"rpcAck",value:new __({requestId:n})}});yield this.sendDataPacket(r,en.RELIABLE)})}sendDataPacket(e,n){return K(this,void 0,void 0,function*(){if(yield this.ensurePublisherConnected(n),this.e2eeManager&&this.e2eeManager.isDataChannelEncryptionEnabled){const s=gne(e);if(s){const o=yield this.e2eeManager.encryptData(s.toBinary());e.value={case:"encryptedPacket",value:new jU({encryptedValue:o.payload,iv:o.iv,keyIndex:o.keyIndex})}}}n===en.RELIABLE&&(e.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const r=e.toBinary(),i=this.dataChannelForKind(n);if(i){if(n===en.RELIABLE&&this.reliableMessageBuffer.push({data:r,sequence:e.sequence}),this.attemptingReconnect)return;i.send(r)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(e){return K(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(en.RELIABLE);const n=this.dataChannelForKind(en.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(e),this.reliableMessageBuffer.getAll().forEach(r=>{n.send(r.data)})),this.updateAndEmitDCBufferStatus(en.RELIABLE)})}waitForBufferStatusLow(e){return new Promise((n,r)=>K(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))n();else{const i=()=>r("Engine closed");for(this.once(Xe.Closing,i);!this.dcBufferStatus.get(e);)yield us(10);this.off(Xe.Closing,i),n()}}))}ensureDataTransportConnected(e){return K(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var s;if(!r.pcManager)throw new si("PC manager is closed");const o=i?r.pcManager.subscriber:r.pcManager.publisher,a=i?"Subscriber":"Publisher";if(!o)throw new An("".concat(a," connection not set"),fn.InternalError);let c=!1;!i&&!r.dataChannelForKind(n,i)&&(r.createDataChannels(),c=!0),!c&&!i&&!r.pcManager.publisher.isICEConnected&&r.pcManager.publisher.getICEConnectionState()!=="checking"&&(c=!0),c&&r.negotiate().catch(p=>{sn.error(p,r.logContext)});const d=r.dataChannelForKind(n,i);if((d==null?void 0:d.readyState)==="open")return;const h=new Date().getTime()+r.peerConnectionTimeout;for(;new Date().getTime()<h;){if(o.isICEConnected&&((s=r.dataChannelForKind(n,i))===null||s===void 0?void 0:s.readyState)==="open")return;yield us(50)}throw new An("could not establish ".concat(a," connection, state: ").concat(o.getICEConnectionState()),fn.InternalError)}()})}ensurePublisherConnected(e){return K(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==kr.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return K(this,void 0,void 0,function*(){return new Promise((e,n)=>K(this,void 0,void 0,function*(){if(!this.pcManager){n(new d1("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(Xe.Closing,i),this.pcManager.publisher.once(rm.RTPVideoPayloadTypes,s=>{const o=new Map;s.forEach(a=>{const c=a.codec.toLowerCase();Vne(c)&&o.set(a.payload,c)}),this.emit(Xe.RTPVideoMapUpdate,o)});try{yield this.pcManager.negotiate(r),e()}catch(s){s instanceof d1&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",df.RR_UNKNOWN),n(s)}finally{this.off(Xe.Closing,i)}}))})}dataChannelForKind(e,n){if(n){if(e===en.LOSSY)return this.lossyDCSub;if(e===en.RELIABLE)return this.reliableDCSub}else{if(e===en.LOSSY)return this.lossyDC;if(e===en.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var r,i,s,o;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const a=this.pcManager.publisher.getLocalDescription(),c=this.pcManager.publisher.getRemoteDescription(),d=(r=this.pcManager.subscriber)===null||r===void 0?void 0:r.getRemoteDescription(),h=(i=this.pcManager.subscriber)===null||i===void 0?void 0:i.getLocalDescription(),p=(o=(s=this.signalOpts)===null||s===void 0?void 0:s.autoSubscribe)!==null&&o!==void 0?o:!0,y=new Array,S=new Array;e.forEach(k=>{k.isDesired!==p&&y.push(k.trackSid),k.isEnabled||S.push(k.trackSid)}),this.client.sendSyncState(new M_({answer:this.options.singlePeerConnection?c?Vp({sdp:c.sdp,type:c.type}):void 0:h?Vp({sdp:h.sdp,type:h.type}):void 0,offer:this.options.singlePeerConnection?a?Vp({sdp:a.sdp,type:a.type}):void 0:d?Vp({sdp:d.sdp,type:d.type}):void 0,subscription:new wS({trackSids:y,subscribe:!p,participantTracks:[]}),publishTracks:Yne(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:S,datachannelReceiveStates:this.reliableReceivedState.map((k,C)=>new r3({publisherSid:C,lastSeq:k}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(r,i)=>{(r==null?void 0:r.id)!==void 0&&r.id!==null&&e.push(new i3({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(en.LOSSY),ka.PUBLISHER),n(this.dataChannelForKind(en.RELIABLE),ka.PUBLISHER),n(this.dataChannelForKind(en.LOSSY,!0),ka.SUBSCRIBER),n(this.dataChannelForKind(en.RELIABLE,!0),ka.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&Di.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){js()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){js()&&window.removeEventListener("online",this.handleBrowserOnLine)}getTrackIdForReceiver(e){var n;const r=(n=this.pcManager)===null||n===void 0?void 0:n.getMidForReceiver(e);if(r){const i=Object.entries(this.midToTrackId).find(s=>{let[o]=s;return o===r});if(i)return i[1]}}}class Ap extends Error{}function $re(t){return t!==void 0&&t>13}function QN(t,e){const n=t.participantIdentity?t.participantIdentity:e.participantIdentity;t.participantIdentity=n,e.participantIdentity=n;const r=t.destinationIdentities.length!==0?t.destinationIdentities:e.destinationIdentities;t.destinationIdentities=r,e.destinationIdentities=r}class k1{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return g1(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return K(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(i=>i.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),sn.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return K(this,void 0,void 0,function*(){const n=yield fetch("".concat(Wre(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new An("Could not fetch region settings: ".concat(n.statusText),n.status===401?fn.NotAllowed:fn.InternalError,n.status)})}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}function Wre(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}class Z3{get info(){return this._info}validateBytesReceived(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(typeof this.totalByteSize!="number"||this.totalByteSize===0)){if(e&&this.bytesReceived<this.totalByteSize)throw new Bo("Not enough chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, only received ").concat(this.bytesReceived," bytes"),ss.Incomplete);if(this.bytesReceived>this.totalByteSize)throw new Bo("Extra chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, received ").concat(this.bytesReceived," bytes"),ss.LengthExceeded)}}constructor(e,n,r,i){this.reader=n,this.totalByteSize=r,this._info=e,this.bytesReceived=0,this.outOfBandFailureRejectingFuture=i}}class Hre extends Z3{handleChunkReceived(e){var n;this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const r=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,r)}[Symbol.asyncIterator](){const e=this.reader.getReader();let n=new Ho,r=null,i=null;if(this.signal){const o=this.signal;i=()=>{var a;(a=n.reject)===null||a===void 0||a.call(n,o.reason)},o.addEventListener("abort",i),r=o}const s=()=>{e.releaseLock(),r&&i&&r.removeEventListener("abort",i),this.signal=void 0};return{next:()=>K(this,void 0,void 0,function*(){var o,a;try{const{done:c,value:d}=yield Promise.race([e.read(),n.promise,(a=(o=this.outOfBandFailureRejectingFuture)===null||o===void 0?void 0:o.promise)!==null&&a!==void 0?a:new Promise(()=>{})]);return c?(this.validateBytesReceived(!0),{done:!0,value:void 0}):(this.handleChunkReceived(d),{done:!1,value:d.content})}catch(c){throw s(),c}}),return(){return K(this,void 0,void 0,function*(){return s(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){var r,i,s,o;let a=new Set;const c=n.signal?e.withAbortSignal(n.signal):e;try{for(var d=!0,h=kc(c),p;p=yield h.next(),r=p.done,!r;d=!0){o=p.value,d=!1;const y=o;a.add(y)}}catch(y){i={error:y}}finally{try{!d&&!r&&(s=h.return)&&(yield s.call(h))}finally{if(i)throw i.error}}return Array.from(a)}()})}}class qre extends Z3{constructor(e,n,r,i){super(e,n,r,i),this.receivedChunks=new Map}handleChunkReceived(e){var n;const r=Rx(e.chunkIndex),i=this.receivedChunks.get(r);if(i&&i.version>e.version)return;this.receivedChunks.set(r,e),this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const s=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,s)}[Symbol.asyncIterator](){const e=this.reader.getReader(),n=new TextDecoder("utf-8",{fatal:!0});let r=new Ho,i=null,s=null;if(this.signal){const a=this.signal;s=()=>{var c;(c=r.reject)===null||c===void 0||c.call(r,a.reason)},a.addEventListener("abort",s),i=a}const o=()=>{e.releaseLock(),i&&s&&i.removeEventListener("abort",s),this.signal=void 0};return{next:()=>K(this,void 0,void 0,function*(){var a,c;try{const{done:d,value:h}=yield Promise.race([e.read(),r.promise,(c=(a=this.outOfBandFailureRejectingFuture)===null||a===void 0?void 0:a.promise)!==null&&c!==void 0?c:new Promise(()=>{})]);if(d)return this.validateBytesReceived(!0),{done:!0,value:void 0};{this.handleChunkReceived(h);let p;try{p=n.decode(h.content)}catch(y){throw new Bo("Cannot decode datastream chunk ".concat(h.chunkIndex," as text: ").concat(y),ss.DecodeFailed)}return{done:!1,value:p}}}catch(d){throw o(),d}}),return(){return K(this,void 0,void 0,function*(){return o(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){var r,i,s,o;let a="";const c=n.signal?e.withAbortSignal(n.signal):e;try{for(var d=!0,h=kc(c),p;p=yield h.next(),r=p.done,!r;d=!0)o=p.value,d=!1,a+=o}catch(y){i={error:y}}finally{try{!d&&!r&&(s=h.return)&&(yield s.call(h))}finally{if(i)throw i.error}}return a}()})}}class Kre{constructor(){this.log=sn,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map}registerTextStreamHandler(e,n){if(this.textStreamHandlers.has(e))throw new Bo('A text stream handler for topic "'.concat(e,'" has already been set.'),ss.HandlerAlreadyRegistered);this.textStreamHandlers.set(e,n)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,n){if(this.byteStreamHandlers.has(e))throw new Bo('A byte stream handler for topic "'.concat(e,'" has already been set.'),ss.HandlerAlreadyRegistered);this.byteStreamHandlers.set(e,n)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}clearHandlersAndControllers(){this.byteStreamControllers.clear(),this.textStreamControllers.clear(),this.byteStreamHandlers.clear(),this.textStreamHandlers.clear()}validateParticipantHasNoActiveDataStreams(e){var n,r,i,s;const o=Array.from(this.textStreamControllers.entries()).filter(c=>c[1].sendingParticipantIdentity===e),a=Array.from(this.byteStreamControllers.entries()).filter(c=>c[1].sendingParticipantIdentity===e);if(o.length>0||a.length>0){const c=new Bo("Participant ".concat(e," unexpectedly disconnected in the middle of sending data"),ss.AbnormalEnd);for(const[d,h]of a)(r=(n=h.outOfBandFailureRejectingFuture).reject)===null||r===void 0||r.call(n,c),this.byteStreamControllers.delete(d);for(const[d,h]of o)(s=(i=h.outOfBandFailureRejectingFuture).reject)===null||s===void 0||s.call(i,c),this.textStreamControllers.delete(d)}}handleDataStreamPacket(e,n){return K(this,void 0,void 0,function*(){switch(e.value.case){case"streamHeader":return this.handleStreamHeader(e.value.value,e.participantIdentity,n);case"streamChunk":return this.handleStreamChunk(e.value.value,n);case"streamTrailer":return this.handleStreamTrailer(e.value.value,n);default:throw new Error('DataPacket of value "'.concat(e.value.case,'" is not data stream related!'))}})}handleStreamHeader(e,n,r){return K(this,void 0,void 0,function*(){var i;if(e.contentHeader.case==="byteHeader"){const s=this.byteStreamHandlers.get(e.topic);if(!s){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let o;const a=new Ho;a.promise.catch(h=>{this.log.error(h)});const c={id:e.streamId,name:(i=e.contentHeader.value.name)!==null&&i!==void 0?i:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Rx(e.timestamp),attributes:e.attributes,encryptionType:r},d=new ReadableStream({start:h=>{if(o=h,this.textStreamControllers.has(e.streamId))throw new Bo("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),ss.AlreadyOpened);this.byteStreamControllers.set(e.streamId,{info:c,controller:o,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:a})}});s(new Hre(c,d,Rx(e.totalLength),a),{identity:n})}else if(e.contentHeader.case==="textHeader"){const s=this.textStreamHandlers.get(e.topic);if(!s){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let o;const a=new Ho;a.promise.catch(h=>{this.log.error(h)});const c={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes,encryptionType:r},d=new ReadableStream({start:h=>{if(o=h,this.textStreamControllers.has(e.streamId))throw new Bo("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),ss.AlreadyOpened);this.textStreamControllers.set(e.streamId,{info:c,controller:o,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:a})}});s(new qre(c,d,Rx(e.totalLength),a),{identity:n})}})}handleStreamChunk(e,n){const r=this.byteStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?(r.controller.error(new Bo("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),ss.EncryptionTypeMismatch)),this.byteStreamControllers.delete(e.streamId)):e.content.length>0&&r.controller.enqueue(e));const i=this.textStreamControllers.get(e.streamId);i&&(i.info.encryptionType!==n?(i.controller.error(new Bo("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),ss.EncryptionTypeMismatch)),this.textStreamControllers.delete(e.streamId)):e.content.length>0&&i.controller.enqueue(e))}handleStreamTrailer(e,n){const r=this.textStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?r.controller.error(new Bo("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),ss.EncryptionTypeMismatch)):(r.info.attributes=Object.assign(Object.assign({},r.info.attributes),e.attributes),r.controller.close(),this.textStreamControllers.delete(e.streamId)));const i=this.byteStreamControllers.get(e.streamId);i&&(i.info.encryptionType!==n?i.controller.error(new Bo("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),ss.EncryptionTypeMismatch)):(i.info.attributes=Object.assign(Object.assign({},i.info.attributes),e.attributes),i.controller.close()),this.byteStreamControllers.delete(e.streamId))}}class e4{constructor(e,n,r){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=r,this.info=n}write(e){return this.defaultWriter.write(e)}close(){return K(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class Gre extends e4{}class Yre extends e4{}const JN=15e3;class Qre{constructor(e,n){this.engine=e,this.log=n}setupEngine(e){this.engine=e}sendText(e,n){return K(this,void 0,void 0,function*(){var r;const i=crypto.randomUUID(),o=new TextEncoder().encode(e).byteLength,a=(r=n==null?void 0:n.attachments)===null||r===void 0?void 0:r.map(()=>crypto.randomUUID()),c=new Array(a?a.length+1:1).fill(0),d=(p,y)=>{var S;c[y]=p;const k=c.reduce((C,E)=>C+E,0);(S=n==null?void 0:n.onProgress)===null||S===void 0||S.call(n,k)},h=yield this.streamText({streamId:i,totalSize:o,destinationIdentities:n==null?void 0:n.destinationIdentities,topic:n==null?void 0:n.topic,attachedStreamIds:a,attributes:n==null?void 0:n.attributes});return yield h.write(e),d(1,0),yield h.close(),n!=null&&n.attachments&&a&&(yield Promise.all(n.attachments.map((p,y)=>K(this,void 0,void 0,function*(){return this._sendFile(a[y],p,{topic:n.topic,mimeType:p.type,onProgress:S=>{d(S,y+1)}})})))),h.info})}streamText(e){return K(this,void 0,void 0,function*(){var n,r,i;const s=(n=e==null?void 0:e.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),o={id:s,mimeType:"text/plain",timestamp:Date.now(),topic:(r=e==null?void 0:e.topic)!==null&&r!==void 0?r:"",size:e==null?void 0:e.totalSize,attributes:e==null?void 0:e.attributes,encryptionType:!((i=this.engine.e2eeManager)===null||i===void 0)&&i.isDataChannelEncryptionEnabled?ai.GCM:ai.NONE},a=new uw({streamId:s,mimeType:o.mimeType,topic:o.topic,timestamp:ff(o.timestamp),totalLength:ff(e==null?void 0:e.totalSize),attributes:o.attributes,contentHeader:{case:"textHeader",value:new YU({version:e==null?void 0:e.version,attachedStreamIds:e==null?void 0:e.attachedStreamIds,replyToStreamId:e==null?void 0:e.replyToStreamId,operationType:(e==null?void 0:e.type)==="update"?e1.UPDATE:e1.CREATE})}}),c=e==null?void 0:e.destinationIdentities,d=new as({destinationIdentities:c,value:{case:"streamHeader",value:a}});yield this.engine.sendDataPacket(d,en.RELIABLE);let h=0;const p=this.engine,y=new WritableStream({write(C){return K(this,void 0,void 0,function*(){for(const E of qne(C,JN)){yield p.waitForBufferStatusLow(en.RELIABLE);const _=new dw({content:E,streamId:s,chunkIndex:ff(h)}),A=new as({destinationIdentities:c,value:{case:"streamChunk",value:_}});yield p.sendDataPacket(A,en.RELIABLE),h+=1}})},close(){return K(this,void 0,void 0,function*(){const C=new fw({streamId:s}),E=new as({destinationIdentities:c,value:{case:"streamTrailer",value:C}});yield p.sendDataPacket(E,en.RELIABLE)})},abort(C){console.log("Sink error:",C)}});let S=()=>K(this,void 0,void 0,function*(){yield k.close()});p.once(Xe.Closing,S);const k=new Gre(y,o,()=>this.engine.off(Xe.Closing,S));return k})}sendFile(e,n){return K(this,void 0,void 0,function*(){const r=crypto.randomUUID();return yield this._sendFile(r,e,n),{id:r}})}_sendFile(e,n,r){return K(this,void 0,void 0,function*(){var i;const s=yield this.streamBytes({streamId:e,totalSize:n.size,name:n.name,mimeType:(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:n.type,topic:r==null?void 0:r.topic,destinationIdentities:r==null?void 0:r.destinationIdentities}),o=n.stream().getReader();for(;;){const{done:a,value:c}=yield o.read();if(a)break;yield s.write(c)}return yield s.close(),s.info})}streamBytes(e){return K(this,void 0,void 0,function*(){var n,r,i,s,o,a;const c=(n=e==null?void 0:e.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),d=e==null?void 0:e.destinationIdentities,h={id:c,mimeType:(r=e==null?void 0:e.mimeType)!==null&&r!==void 0?r:"application/octet-stream",topic:(i=e==null?void 0:e.topic)!==null&&i!==void 0?i:"",timestamp:Date.now(),attributes:e==null?void 0:e.attributes,size:e==null?void 0:e.totalSize,name:(s=e==null?void 0:e.name)!==null&&s!==void 0?s:"unknown",encryptionType:!((o=this.engine.e2eeManager)===null||o===void 0)&&o.isDataChannelEncryptionEnabled?ai.GCM:ai.NONE},p=new uw({totalLength:ff((a=h.size)!==null&&a!==void 0?a:0),mimeType:h.mimeType,streamId:c,topic:h.topic,timestamp:ff(Date.now()),attributes:h.attributes,contentHeader:{case:"byteHeader",value:new QU({name:h.name})}}),y=new as({destinationIdentities:d,value:{case:"streamHeader",value:p}});yield this.engine.sendDataPacket(y,en.RELIABLE);let S=0;const k=new zs,C=this.engine,E=this.log,_=new WritableStream({write(M){return K(this,void 0,void 0,function*(){const I=yield k.lock();let N=0;try{for(;N<M.byteLength;){const O=M.slice(N,N+JN);yield C.waitForBufferStatusLow(en.RELIABLE);const j=new as({destinationIdentities:d,value:{case:"streamChunk",value:new dw({content:O,streamId:c,chunkIndex:ff(S)})}});yield C.sendDataPacket(j,en.RELIABLE),S+=1,N+=O.byteLength}}finally{I()}})},close(){return K(this,void 0,void 0,function*(){const M=new fw({streamId:c}),I=new as({destinationIdentities:d,value:{case:"streamTrailer",value:M}});yield C.sendDataPacket(I,en.RELIABLE)})},abort(M){E.error("Sink error:",M)}});return new Yre(_,h)})}}class t4 extends _e{constructor(e,n,r,i,s){super(e,r,s),this.sid=n,this.receiver=i}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?Ye.Muted:Ye.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=r=>{r.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(Ye.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return K(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),H_)),Qne()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>e());const r=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(r){const{timestamp:i,rtpTimestamp:s}=r;s&&this.rtpTimestamp!==s&&(this.emit(Ye.TimeSyncUpdate,{timestamp:i,rtpTimestamp:s}),this.rtpTimestamp=s)}};e()}}class Jre extends t4{constructor(e,n,r,i,s,o){super(e,n,_e.Kind.Audio,r,o),this.monitorReceiver=()=>K(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=kS(a,this.prevStats)),this.prevStats=a}),this.audioContext=i,this.webAudioPluginNodes=[],s&&(this.sinkId=s.deviceId)}setVolume(e){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):r.volume=e;_l()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(_l())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return K(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(m1(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&m1(e)&&e.setSinkId(this.sinkId).catch(r=>{this.log.error("Failed to set sink id on remote audio track",r,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=e.createGain(),r.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(Ye.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(Ye.AudioPlaybackFailed,i)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return K(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",streamId:r.id,timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const Rk=100;class Xre extends t4{constructor(e,n,r,i,s){super(e,n,_e.Kind.Video,r,s),this.elementInfos=[],this.monitorReceiver=()=>K(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const o=yield this.getReceiverStats();o&&this.prevStats&&this.receiver&&(this._currentBitrate=kS(o,this.prevStats)),this.prevStats=o}),this.debouncedHandleResize=B_(()=>{this.updateDimensions()},Rk),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}setStreamState(e){super.setStreamState(e),console.log("setStreamState",e),e===_e.StreamState.Active&&this.updateVisibility()}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?tm(this._mediaStreamTrack,n):Up(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new Zre(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===e);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return K(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,r="",i=new Map;return e.forEach(s=>{s.type==="inbound-rtp"?(r=s.codecId,n={type:"video",streamId:s.id,framesDecoded:s.framesDecoded,framesDropped:s.framesDropped,framesReceived:s.framesReceived,packetsReceived:s.packetsReceived,packetsLost:s.packetsLost,frameWidth:s.frameWidth,frameHeight:s.frameHeight,pliCount:s.pliCount,firCount:s.firCount,nackCount:s.nackCount,jitter:s.jitter,timestamp:s.timestamp,bytesReceived:s.bytesReceived,decoderImplementation:s.decoderImplementation}):s.type==="codec"&&i.set(s.id,s)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(r=>r.element===e);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return K(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(e){var n,r;const i=this.elementInfos.reduce((c,d)=>Math.max(c,d.visibilityChangedAt||0),0),s=!((r=(n=this.adaptiveStreamSettings)===null||n===void 0?void 0:n.pauseVideoInBackground)!==null&&r!==void 0)||r?this.isInBackground:!1,o=this.elementInfos.some(c=>c.pictureInPicture),a=this.elementInfos.some(c=>c.visible)&&!s||o;if(!(this.lastVisible===a&&!e)){if(!a&&Date.now()-i<Rk){Di.setTimeout(()=>{this.updateVisibility()},Rk);return}this.lastVisible=a,this.emit(Ye.VisibilityChanged,a,this)}}updateDimensions(){var e,n;let r=0,i=0;const s=this.getPixelDensity();for(const o of this.elementInfos){const a=o.width()*s,c=o.height()*s;a+c>r+i&&(r=a,i=c)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(Ye.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?_N():n||(_N()>2?2:1)}}class Zre{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=r=>{var i;const{target:s,isIntersecting:o}=r;s===this.element&&(this.isIntersecting=o,this.isPiP=Mv(this.element),this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r,i,s;(i=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP),this.isPiP=Mv(this.element),(s=this.handleVisibilityChanged)===null||s===void 0||s.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=Mv(this.element),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=e,this.isIntersecting=n??T1(e),this.isPiP=js()&&Mv(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,n,r;this.isIntersecting=T1(this.element),this.isPiP=Mv(this.element),this.element.handleResize=()=>{var i;(i=this.handleResize)===null||i===void 0||i.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,PN().observe(this.element),RN().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(r=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,n,r,i,s;(e=PN())===null||e===void 0||e.unobserve(this.element),(n=RN())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(r=window.documentPictureInPicture)===null||r===void 0||r.removeEventListener("enter",this.onEnterPiP),(s=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||s===void 0||s.removeEventListener("pagehide",this.onLeavePiP)}}function Mv(t){var e,n;return document.pictureInPictureElement===t?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?T1(t,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function T1(t,e){const n=e||window;let r=t.offsetTop,i=t.offsetLeft;const s=t.offsetWidth,o=t.offsetHeight,{hidden:a}=t,{display:c}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,r+=t.offsetTop,i+=t.offsetLeft;return r<n.pageYOffset+n.innerHeight&&i<n.pageXOffset+n.innerWidth&&r+o>n.pageYOffset&&i+s>n.pageXOffset&&!a&&c!=="none"}class gc extends Ml.EventEmitter{constructor(e,n,r,i){var s;super(),this.metadataMuted=!1,this.encryption=ai.NONE,this.log=sn,this.handleMuted=()=>{this.emit(Ye.Muted)},this.handleUnmuted=()=>{this.emit(Ye.Unmuted)},this.log=Ic((s=i==null?void 0:i.loggerName)!==null&&s!==void 0?s:Pa.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=r,this.source=_e.Source.Unknown}setTrack(e){this.track&&(this.track.off(Ye.Muted,this.handleMuted),this.track.off(Ye.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(Ye.Muted,this.handleMuted),e.on(Ye.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),ln(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==ai.NONE}get audioTrack(){if(Sl(this.track))return this.track}get videoTrack(){if(hd(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=_e.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===_e.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(gc||(gc={}));class E1 extends gc{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(Ye.Ended)},this.handleCpuConstrained=()=>{this.track&&hd(this.track)&&this.emit(Ye.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(r)}setTrack(e){this.track&&(this.track.off(Ye.Ended,this.handleTrackEnded),this.track.off(Ye.CpuConstrained,this.handleCpuConstrained)),super.setTrack(e),e&&(e.on(Ye.Ended,this.handleTrackEnded),e.on(Ye.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return K(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return K(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return K(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return K(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(Sl(this.track)){const n=this.track.getSourceTrackSettings(),r=new Set;return n.autoGainControl&&r.add(Si.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&r.add(Si.TF_ECHO_CANCELLATION),n.noiseSuppression&&r.add(Si.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&r.add(Si.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||r.add(Si.TF_NO_DTX),this.track.enhancedNoiseCancellation&&r.add(Si.TF_ENHANCED_NOISE_CANCELLATION),Array.from(r.values())}else return[]}}function TS(t,e){return K(this,void 0,void 0,function*(){t??(t={});let n=!1;const{audioProcessor:r,videoProcessor:i,optionsWithoutProcessor:s}=H3(t);let o=s.audio,a=s.video;if(r&&typeof s.audio=="object"&&(s.audio.processor=r),i&&typeof s.video=="object"&&(s.video.processor=i),t.audio&&typeof s.audio=="object"&&typeof s.audio.deviceId=="string"){const p=s.audio.deviceId;s.audio.deviceId={exact:p},n=!0,o=Object.assign(Object.assign({},s.audio),{deviceId:{ideal:p}})}if(s.video&&typeof s.video=="object"&&typeof s.video.deviceId=="string"){const p=s.video.deviceId;s.video.deviceId={exact:p},n=!0,a=Object.assign(Object.assign({},s.video),{deviceId:{ideal:p}})}(s.audio===!0||typeof s.audio=="object"&&!s.audio.deviceId)&&(s.audio={deviceId:"default"}),s.video===!0?s.video={deviceId:"default"}:typeof s.video=="object"&&!s.video.deviceId&&(s.video.deviceId="default");const c=z3(s,K3,G3),d=F_(c),h=navigator.mediaDevices.getUserMedia(d);s.audio&&(Ci.userMediaPromiseMap.set("audioinput",h),h.catch(()=>Ci.userMediaPromiseMap.delete("audioinput"))),s.video&&(Ci.userMediaPromiseMap.set("videoinput",h),h.catch(()=>Ci.userMediaPromiseMap.delete("videoinput")));try{const p=yield h;return yield Promise.all(p.getTracks().map(y=>K(this,void 0,void 0,function*(){const S=y.kind==="audio";let k=S?c.audio:c.video;(typeof k=="boolean"||!k)&&(k={});let C;const E=S?d.audio:d.video;typeof E!="boolean"&&(C=E);const _=y.getSettings().deviceId;C!=null&&C.deviceId&&Qu(C.deviceId)!==_?C.deviceId=_:C||(C={deviceId:_});const A=Rre(y,C,e);return A.kind===_e.Kind.Video?A.source=_e.Source.Camera:A.kind===_e.Kind.Audio&&(A.source=_e.Source.Microphone),A.mediaStream=p,Sl(A)&&r?yield A.setProcessor(r):hd(A)&&i&&(yield A.setProcessor(i)),A})))}catch(p){if(!n)throw p;return TS(Object.assign(Object.assign({},t),{audio:o,video:a}),e)}})}function n4(t){return K(this,void 0,void 0,function*(){return(yield TS({audio:!1,video:t??!0}))[0]})}function eie(t){return K(this,void 0,void 0,function*(){return(yield TS({audio:!0,video:!1}))[0]})}var Nu;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(Nu||(Nu={}));function tie(t){switch(t){case zv.EXCELLENT:return Nu.Excellent;case zv.GOOD:return Nu.Good;case zv.POOR:return Nu.Poor;case zv.LOST:return Nu.Lost;default:return Nu.Unknown}}class r4 extends Ml.EventEmitter{get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===by.AGENT}get isActive(){var e;return((e=this.participantInfo)===null||e===void 0?void 0:e.state)===Xp.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,n,r,i,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:by.STANDARD;var c;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=Nu.Unknown,this.log=sn,this.log=Ic((c=o==null?void 0:o.loggerName)!==null&&c!==void 0?c:Pa.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=r,this.metadata=i,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=a,this._attributes=s??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,n]of this.trackPublications)if(n.source===e)return n}getTrackPublicationByName(e){for(const[,n]of this.trackPublications)if(n.trackName===e)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new Ho,this.once(Ue.Active,()=>{var e,n;(n=(e=this.activeFuture)===null||e===void 0?void 0:e.resolve)===null||n===void 0||n.call(e),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrackPublication(_e.Source.Camera);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrackPublication(_e.Source.Microphone);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(_e.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){var n;return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.state===Xp.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==Xp.ACTIVE&&this.emit(Ue.Active),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,!0)}_setMetadata(e){const n=this.metadata!==e,r=this.metadata;this.metadata=e,n&&this.emit(Ue.ParticipantMetadataChanged,r)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(Ue.ParticipantNameChanged,e)}_setAttributes(e){const n=Jne(this.attributes,e);this._attributes=e,Object.keys(n).length>0&&this.emit(Ue.AttributesChanged,n)}setPermissions(e){var n,r,i,s,o,a;const c=this.permissions,d=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||e.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||e.hidden!==((s=this.permissions)===null||s===void 0?void 0:s.hidden)||e.recorder!==((o=this.permissions)===null||o===void 0?void 0:o.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((h,p)=>{var y;return h!==((y=this.permissions)===null||y===void 0?void 0:y.canPublishSources[p])})||e.canSubscribeMetrics!==((a=this.permissions)===null||a===void 0?void 0:a.canSubscribeMetrics);return this.permissions=e,d&&this.emit(Ue.ParticipantPermissionsChanged,c),d}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(Ue.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=tie(e),n!==this._connectionQuality&&this.emit(Ue.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var e,n;this.activeFuture&&((n=(e=this.activeFuture).reject)===null||n===void 0||n.call(e,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(n=>Sl(n.track)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(Ye.Muted,()=>{this.emit(Ue.TrackMuted,e)}),e.on(Ye.Unmuted,()=>{this.emit(Ue.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case _e.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case _e.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function nie(t){var e,n,r;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new t3({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=t.allowAll)!==null&&r!==void 0?r:!1,trackSids:t.allowedTrackSids||[]})}class rie extends r4{constructor(e,n,r,i,s,o){super(e,n,void 0,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=ai.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Ho)},this.handleReconnected=()=>{var a,c;(c=(a=this.reconnectFuture)===null||a===void 0?void 0:a.resolve)===null||c===void 0||c.call(a),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var a,c,d,h,p,y;this.reconnectFuture&&(this.reconnectFuture.promise.catch(S=>this.log.warn(S.message,this.logContext)),(c=(a=this.reconnectFuture)===null||a===void 0?void 0:a.reject)===null||c===void 0||c.call(a,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((h=(d=this.signalConnectedFuture).reject)===null||h===void 0||h.call(d,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(y=(p=this.activeAgentFuture)===null||p===void 0?void 0:p.reject)===null||y===void 0||y.call(p,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=a=>{var c,d;a.participant&&this.updateInfo(a.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new Ho),(d=(c=this.signalConnectedFuture).resolve)===null||d===void 0||d.call(c)},this.handleSignalRequestResponse=a=>{const{requestId:c,reason:d,message:h}=a,p=this.pendingSignalRequests.get(c);p&&(d!==O_.OK&&p.reject(new CN(h,d)),this.pendingSignalRequests.delete(c))},this.handleDataPacket=a=>{switch(a.value.case){case"rpcResponse":let c=a.value.value,d=null,h=null;c.value.case==="payload"?d=c.value.value:c.value.case==="error"&&(h=Pr.fromProto(c.value.value)),this.handleIncomingRpcResponse(c.requestId,d,h);break;case"rpcAck":let p=a.value.value;this.handleIncomingRpcAck(p.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(a=>nie(a)))},this.onTrackUnmuted=a=>{this.onTrackMuted(a,a.isUpstreamPaused)},this.onTrackMuted=(a,c)=>{if(c===void 0&&(c=!0),!a.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),ln(a)));return}this.engine.updateMuteStatus(a.sid,c)},this.onTrackUpstreamPaused=a=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),ln(a))),this.onTrackMuted(a,!0)},this.onTrackUpstreamResumed=a=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),ln(a))),this.onTrackMuted(a,a.isMuted)},this.onTrackFeatureUpdate=a=>{const c=this.audioTrackPublications.get(a.sid);if(!c){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(a.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(c.trackSid,c.getTrackFeatures())},this.onTrackCpuConstrained=(a,c)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),ln(c))),this.emit(Ue.LocalTrackCpuConstrained,a,c)},this.handleSubscribedQualityUpdate=a=>K(this,void 0,void 0,function*(){var c,d,h,p,y;if(!(!((y=this.roomOptions)===null||y===void 0)&&y.dynacast))return;const S=this.videoTrackPublications.get(a.trackSid);if(!S){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:a.trackSid}));return}if(!S.videoTrack)return;const k=yield S.videoTrack.setPublishingCodecs(a.subscribedCodecs);try{for(var C=!0,E=kc(k),_;_=yield E.next(),c=_.done,!c;C=!0){p=_.value,C=!1;const A=p;Rne(A)&&(this.log.debug("publish ".concat(A," for ").concat(S.videoTrack.sid),Object.assign(Object.assign({},this.logContext),ln(S))),yield this.publishAdditionalCodecForTrack(S.videoTrack,A,S.options))}}catch(A){d={error:A}}finally{try{!C&&!c&&(h=E.return)&&(yield h.call(E))}finally{if(d)throw d.error}}}),this.handleLocalTrackUnpublished=a=>{const c=this.trackPublications.get(a.trackSid);if(!c){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:a.trackSid}));return}this.unpublishTrack(c.track)},this.handleTrackEnded=a=>K(this,void 0,void 0,function*(){if(a.source===_e.Source.ScreenShare||a.source===_e.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),ln(a))),this.unpublishTrack(a);else if(a.isUserProvided)yield a.mute();else if(mc(a)||Cu(a))try{if(js())try{const c=yield navigator==null?void 0:navigator.permissions.query({name:a.source===_e.Source.Camera?"camera":"microphone"});if(c&&c.state==="denied")throw this.log.warn("user has revoked access to ".concat(a.source),Object.assign(Object.assign({},this.logContext),ln(a))),c.onchange=()=>{c.state!=="denied"&&(a.isMuted||a.restartTrack(),c.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}a.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),ln(a))),mc(a)?yield a.restartTrack({deviceId:"default"}):yield a.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),ln(a))),yield a.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=s,this.roomOutgoingDataStreamManager=o}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==ai.NONE}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setupEngine(e){var n;this.engine=e,this.engine.on(Xe.RemoteMute,(r,i)=>{const s=this.trackPublications.get(r);!s||!s.track||(i?s.mute():s.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(Xe.Connected,this.handleReconnected).on(Xe.SignalConnected,this.handleSignalConnected).on(Xe.SignalRestarted,this.handleReconnected).on(Xe.SignalResumed,this.handleReconnected).on(Xe.Restarting,this.handleReconnecting).on(Xe.Resuming,this.handleReconnecting).on(Xe.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(Xe.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(Xe.Closing,this.handleClosing).on(Xe.SignalRequestResponse,this.handleSignalRequestResponse).on(Xe.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return K(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return K(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return K(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return K(this,arguments,void 0,function(n){var r=this;let{metadata:i,name:s,attributes:o}=n;return function*(){return new Promise((a,c)=>K(r,void 0,void 0,function*(){var d,h;try{let p=!1;const y=yield this.engine.client.sendUpdateLocalMetadata((d=i??this.metadata)!==null&&d!==void 0?d:"",(h=s??this.name)!==null&&h!==void 0?h:"",o),S=performance.now();for(this.pendingSignalRequests.set(y,{resolve:a,reject:k=>{c(k),p=!0},values:{name:s,metadata:i,attributes:o}});performance.now()-S<5e3&&!p;){if((!s||this.name===s)&&(!i||this.metadata===i)&&(!o||Object.entries(o).every(k=>{let[C,E]=k;return this.attributes[C]===E||E===""&&!this.attributes[C]}))){this.pendingSignalRequests.delete(y),a();return}yield us(50)}c(new CN("Request to update local metadata timed out","TimeoutError"))}catch(p){p instanceof Error&&c(p)}}))}()})}setCameraEnabled(e,n,r){return this.setTrackEnabled(_e.Source.Camera,e,n,r)}setMicrophoneEnabled(e,n,r){return this.setTrackEnabled(_e.Source.Microphone,e,n,r)}setScreenShareEnabled(e,n,r){return this.setTrackEnabled(_e.Source.ScreenShare,e,n,r)}setE2EEEnabled(e){return K(this,void 0,void 0,function*(){this.encryptionType=e?ai.GCM:ai.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,r,i){return K(this,void 0,void 0,function*(){var s,o;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n})),this.republishPromise&&(yield this.republishPromise);let a=this.getTrackPublication(e);if(n)if(a)yield a.unmute();else{let c;if(this.pendingPublishing.has(e)){const d=yield this.waitForPendingPublicationOfSource(e);return d||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield d==null?void 0:d.unmute(),d}this.pendingPublishing.add(e);try{switch(e){case _e.Source.Camera:c=yield this.createTracks({video:(s=r)!==null&&s!==void 0?s:!0});break;case _e.Source.Microphone:c=yield this.createTracks({audio:(o=r)!==null&&o!==void 0?o:!0});break;case _e.Source.ScreenShare:c=yield this.createScreenTracks(Object.assign({},r));break;default:throw new Tc(e)}}catch(d){throw c==null||c.forEach(h=>{h.stop()}),d instanceof Error&&this.emit(Ue.MediaDevicesError,d,x1(e)),this.pendingPublishing.delete(e),d}for(const d of c){const h=Object.assign(Object.assign({},this.roomOptions.publishDefaults),r);e===_e.Source.Microphone&&Sl(d)&&h.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),d.startPreConnectBuffer())}try{const d=[];for(const p of c)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),ln(p))),d.push(this.publishTrack(p,i));[a]=yield Promise.all(d)}catch(d){throw c==null||c.forEach(h=>{h.stop()}),d}finally{this.pendingPublishing.delete(e)}}else if(!(a!=null&&a.track)&&this.pendingPublishing.has(e)&&(a=yield this.waitForPendingPublicationOfSource(e),a||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),a&&a.track)if(e===_e.Source.ScreenShare){a=yield this.unpublishTrack(a.track);const c=this.getTrackPublication(_e.Source.ScreenShareAudio);c&&c.track&&this.unpublishTrack(c.track)}else yield a.mute();return a})}enableCameraAndMicrophone(){return K(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(_e.Source.Camera)||this.pendingPublishing.has(_e.Source.Microphone))){this.pendingPublishing.add(_e.Source.Camera),this.pendingPublishing.add(_e.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(_e.Source.Camera),this.pendingPublishing.delete(_e.Source.Microphone)}}})}createTracks(e){return K(this,void 0,void 0,function*(){var n,r;e??(e={});const i=z3(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults);try{return(yield TS(i,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(a=>(Sl(a)&&(this.microphoneError=void 0,a.setAudioContext(this.audioContext),a.source=_e.Source.Microphone,this.emit(Ue.AudioStreamAcquired)),hd(a)&&(this.cameraError=void 0,a.source=_e.Source.Camera),a))}catch(s){throw s instanceof Error&&(e.audio&&(this.microphoneError=s),e.video&&(this.cameraError=s)),s}})}createScreenTracks(e){return K(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new L_("getDisplayMedia not supported");e.resolution===void 0&&!One()&&(e.resolution=j_.h1080fps30.resolution);const n=Gne(e),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new Tc("no video track found");const s=new gw(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});s.source=_e.Source.ScreenShare,e.contentHint&&(s.mediaStreamTrack.contentHint=e.contentHint);const o=[s];if(r.getAudioTracks().length>0){this.emit(Ue.AudioStreamAcquired);const a=new mw(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=_e.Source.ScreenShareAudio,o.push(a)}return o})}publishTrack(e,n){return K(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,n)})}publishOrRepublishTrack(e,n){return K(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var a,c,d,h;mc(r)&&r.setAudioContext(s.audioContext),yield(a=s.reconnectFuture)===null||a===void 0?void 0:a.promise,s.republishPromise&&!o&&(yield s.republishPromise),nm(r)&&s.pendingPublishPromises.has(r)&&(yield s.pendingPublishPromises.get(r));let p;if(r instanceof MediaStreamTrack)p=r.getConstraints();else{p=r.constraints;let _;switch(r.source){case _e.Source.Microphone:_="audioinput";break;case _e.Source.Camera:_="videoinput"}_&&s.activeDeviceMap.has(_)&&(p=Object.assign(Object.assign({},p),{deviceId:s.activeDeviceMap.get(_)}))}if(r instanceof MediaStreamTrack)switch(r.kind){case"audio":r=new mw(r,p,!0,s.audioContext,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;case"video":r=new gw(r,p,!0,{loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});break;default:throw new Tc("unsupported MediaStreamTrack kind ".concat(r.kind))}else r.updateLoggerOptions({loggerName:s.roomOptions.loggerName,loggerContextCb:()=>s.logContext});let y;if(s.trackPublications.forEach(_=>{_.track&&_.track===r&&(y=_)}),y)return s.log.warn("track has already been published, skipping",Object.assign(Object.assign({},s.logContext),ln(y))),y;const S=Object.assign(Object.assign({},s.roomOptions.publishDefaults),i),k="channelCount"in r.mediaStreamTrack.getSettings()&&r.mediaStreamTrack.getSettings().channelCount===2||r.mediaStreamTrack.getConstraints().channelCount===2,C=(c=S.forceStereo)!==null&&c!==void 0?c:k;C&&(S.dtx===void 0&&s.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},s.logContext),ln(r))),S.red===void 0&&s.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(d=S.dtx)!==null&&d!==void 0||(S.dtx=!1),(h=S.red)!==null&&h!==void 0||(S.red=!1)),!Lne()&&s.roomOptions.e2ee&&(s.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},s.logContext)),S.simulcast=!1),S.source&&(r.source=S.source);const E=new Promise((_,A)=>K(s,void 0,void 0,function*(){try{if(this.engine.client.currentState!==mr.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:ln(r)}));const M=setTimeout(()=>{A(new SN("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(M);const I=yield this.publish(r,S,C);_(I)}else try{const M=yield this.publish(r,S,C);_(M)}catch(M){A(M)}}catch(M){A(M)}}));s.pendingPublishPromises.set(r,E);try{return yield E}catch(_){throw _}finally{s.pendingPublishPromises.delete(r)}}()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new Ho),this.signalConnectedFuture.promise}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),ln(e))),!1;const{canPublish:n,canPublishSources:r}=this.permissions;return n&&(r.length===0||r.map(i=>Xne(i)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),ln(e))),!1)}publish(e,n,r){return K(this,void 0,void 0,function*(){var i,s,o,a,c,d,h,p,y,S;if(!this.hasPermissionsToPublish(e))throw new SN("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find($=>nm(e)&&$.source===e.source)&&e.source!==_e.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),ln(e))),n.stopMicTrackOnMute&&Sl(e)&&(e.stopOnMute=!0),e.source===_e.Source.ScreenShare&&Kf()&&(n.simulcast=!1),n.videoCodec==="av1"&&!Ine()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!Nne()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=w1),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some($=>n.videoCodec===Xv($.mime))||(n.videoCodec=Xv(this.enabledPublishVideoCodecs[0].mime)));const C=n.videoCodec;e.on(Ye.Muted,this.onTrackMuted),e.on(Ye.Unmuted,this.onTrackUnmuted),e.on(Ye.Ended,this.handleTrackEnded),e.on(Ye.UpstreamPaused,this.onTrackUpstreamPaused),e.on(Ye.UpstreamResumed,this.onTrackUpstreamResumed),e.on(Ye.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const E=[],_=!(!((i=n.dtx)!==null&&i!==void 0)||i),A=e.getSourceTrackSettings();A.autoGainControl&&E.push(Si.TF_AUTO_GAIN_CONTROL),A.echoCancellation&&E.push(Si.TF_ECHO_CANCELLATION),A.noiseSuppression&&E.push(Si.TF_NOISE_SUPPRESSION),A.channelCount&&A.channelCount>1&&E.push(Si.TF_STEREO),_&&E.push(Si.TF_NO_DTX),mc(e)&&e.hasPreConnectBuffer&&E.push(Si.TF_PRECONNECT_BUFFER);const M=new xy({cid:e.mediaStreamTrack.id,name:n.name,type:_e.kindToProto(e.kind),muted:e.isMuted,source:_e.sourceToProto(e.source),disableDtx:_,encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((s=n.red)!==null&&s!==void 0)||s),stream:n==null?void 0:n.stream,backupCodecPolicy:n==null?void 0:n.backupCodecPolicy,audioFeatures:E});let I;if(e.kind===_e.Kind.Video){let $={width:0,height:0};try{$=yield e.waitForDimensions()}catch{const J=(a=(o=this.roomOptions.videoCaptureDefaults)===null||o===void 0?void 0:o.resolution)!==null&&a!==void 0?a:Nm.h720.resolution;$={width:J.width,height:J.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),ln(e)),{dims:$}))}M.width=$.width,M.height=$.height,Cu(e)&&(ml(C)&&(e.source===_e.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),ln(e))))),n.scalabilityMode=(c=n.scalabilityMode)!==null&&c!==void 0?c:"L3T3_KEY"),M.simulcastCodecs=[new n1({codec:C,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:w1}),n.backupCodec&&C!==n.backupCodec.codec&&M.encryption===ai.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),M.simulcastCodecs.push(new n1({codec:n.backupCodec.codec,cid:""})))),I=C1(e.source===_e.Source.ScreenShare,M.width,M.height,n),M.layers=KN(M.width,M.height,I,ml(n.videoCodec))}else e.kind===_e.Kind.Audio&&(I=[{maxBitrate:(d=n.audioPreset)===null||d===void 0?void 0:d.maxBitrate,priority:(p=(h=n.audioPreset)===null||h===void 0?void 0:h.priority)!==null&&p!==void 0?p:"high",networkPriority:(S=(y=n.audioPreset)===null||y===void 0?void 0:y.priority)!==null&&S!==void 0?S:"high"}]);if(!this.engine||this.engine.isClosed)throw new si("cannot publish track when not connected");const N=()=>K(this,void 0,void 0,function*(){var $,W,J;if(!this.engine.pcManager)throw new si("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,n,I),this.emit(Ue.LocalSenderCreated,e.sender,e),Cu(e)&&(($=n.degradationPreference)!==null&&$!==void 0||(n.degradationPreference=Fre(e)),e.setDegradationPreference(n.degradationPreference)),I)if(Kf()&&e.kind===_e.Kind.Audio){let Y;for(const pe of this.engine.pcManager.publisher.getTransceivers())if(pe.sender===e.sender){Y=pe;break}Y&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:Y,codec:"opus",maxbr:!((W=I[0])===null||W===void 0)&&W.maxBitrate?I[0].maxBitrate/1e3:0})}else e.codec&&ml(e.codec)&&(!((J=I[0])===null||J===void 0)&&J.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:M.cid,codec:e.codec,maxbr:I[0].maxBitrate/1e3});yield this.engine.negotiate()});let O;const j=new Promise(($,W)=>K(this,void 0,void 0,function*(){var J;try{O=yield this.engine.addTrack(M),$(O)}catch(Y){e.sender&&(!((J=this.engine.pcManager)===null||J===void 0)&&J.publisher)&&(this.engine.pcManager.publisher.removeTrack(e.sender),yield this.engine.negotiate().catch(pe=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),ln(e)),{error:pe}))})),W(Y)}}));if(this.enabledPublishVideoCodecs.length>0)O=(yield Promise.all([j,N()]))[0];else{O=yield j;let $;if(O.codecs.forEach(W=>{$===void 0&&($=W.mimeType)}),$&&e.kind===_e.Kind.Video){const W=Xv($);W!==C&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),ln(e)),{codec:W})),n.videoCodec=W,I=C1(e.source===_e.Source.ScreenShare,M.width,M.height,n))}yield N()}const V=new E1(e.kind,O,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(V.on(Ye.CpuConstrained,$=>this.onTrackCpuConstrained($,V)),V.options=n,e.sid=O.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:I,trackInfo:O})),Cu(e)?e.startMonitor(this.engine.client):mc(e)&&e.startMonitor(),this.addTrackPublication(V),this.emit(Ue.LocalTrackPublished,V),mc(e)&&O.audioFeatures.includes(Si.TF_PRECONNECT_BUFFER)){const $=e.getPreConnectBuffer(),W=e.getPreConnectBufferMimeType();this.on(Ue.LocalTrackSubscribed,J=>{if(J.trackSid===O.sid){if(!e.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),ln(e))),e.stopPreConnectBuffer()}}),$&&new Promise((Y,pe)=>K(this,void 0,void 0,function*(){var fe,Ee,le,Se,q,te;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),ln(e)));const se=setTimeout(()=>{pe(new Error("agent not active within 10 seconds"))},1e4),me=yield this.waitUntilActiveAgentPresent();clearTimeout(se),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),ln(e)));const Te=yield this.streamBytes({name:"preconnect-buffer",mimeType:W,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[me.identity],attributes:{trackId:V.trackSid,sampleRate:String((q=A.sampleRate)!==null&&q!==void 0?q:"48000"),channels:String((te=A.channelCount)!==null&&te!==void 0?te:"1")}});try{for(var ae=!0,B=kc($),de;de=yield B.next(),fe=de.done,!fe;ae=!0){Se=de.value,ae=!1;const Re=Se;yield Te.write(Re)}}catch(Re){Ee={error:Re}}finally{try{!ae&&!fe&&(le=B.return)&&(yield le.call(B))}finally{if(Ee)throw Ee.error}}yield Te.close(),Y()}catch(se){pe(se)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),ln(e)))}).catch(Y=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),ln(e)),{error:Y}))})}return V})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,r){return K(this,void 0,void 0,function*(){var i;if(this.encryptionType!==ai.NONE)return;let s;if(this.trackPublications.forEach(S=>{S.track&&S.track===e&&(s=S)}),!s)throw new Tc("track is not published");if(!Cu(e))throw new Tc("track is not a video track");const o=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),a=Dre(e,n,o);if(!a){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),ln(e)));return}const c=e.addSimulcastTrack(n,a);if(!c)return;const d=new xy({cid:c.mediaStreamTrack.id,type:_e.kindToProto(e.kind),muted:e.isMuted,source:_e.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:o.videoCodec,cid:c.mediaStreamTrack.id}]});if(d.layers=KN(d.width,d.height,a),!this.engine||this.engine.isClosed)throw new si("cannot publish track when not connected");const h=()=>K(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,c,o,a),yield this.engine.negotiate()}),y=(yield Promise.all([this.engine.addTrack(d),h()]))[0];this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:a,trackInfo:y}))})}unpublishTrack(e,n){return K(this,void 0,void 0,function*(){var r,i;if(nm(e)){const d=this.pendingPublishPromises.get(e);d&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),ln(e))),yield d)}const s=this.getPublicationForTrack(e),o=s?ln(s):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),o)),!s||!s.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),o));return}e=s.track,e.off(Ye.Muted,this.onTrackMuted),e.off(Ye.Unmuted,this.onTrackUnmuted),e.off(Ye.Ended,this.handleTrackEnded),e.off(Ye.UpstreamPaused,this.onTrackUpstreamPaused),e.off(Ye.UpstreamResumed,this.onTrackUpstreamResumed),e.off(Ye.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n?e.stop():e.stopMonitor();let a=!1;const c=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<kr.FAILED&&c)try{for(const d of this.engine.pcManager.publisher.getTransceivers())d.sender===c&&(d.direction="inactive",a=!0);if(this.engine.removeTrack(c)&&(a=!0),Cu(e)){for(const[,d]of e.simulcastCodecs)d.sender&&(this.engine.removeTrack(d.sender)&&(a=!0),d.sender=void 0);e.simulcastCodecs.clear()}}catch(d){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),o),{error:d}))}switch(this.trackPublications.delete(s.trackSid),s.kind){case _e.Kind.Audio:this.audioTrackPublications.delete(s.trackSid);break;case _e.Kind.Video:this.videoTrackPublications.delete(s.trackSid);break}return this.emit(Ue.LocalTrackUnpublished,s),s.setTrack(void 0),a&&(yield this.engine.negotiate()),s})}unpublishTracks(e){return K(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>this.unpublishTrack(r)))).filter(r=>!!r)})}republishAllTracks(e){return K(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){r.republishPromise&&(yield r.republishPromise),r.republishPromise=new Promise((s,o)=>K(r,void 0,void 0,function*(){try{const a=[];this.trackPublications.forEach(c=>{c.track&&(n&&(c.options=Object.assign(Object.assign({},c.options),n)),a.push(c))}),yield Promise.all(a.map(c=>K(this,void 0,void 0,function*(){const d=c.track;yield this.unpublishTrack(d,!1),i&&!d.isMuted&&d.source!==_e.Source.ScreenShare&&d.source!==_e.Source.ScreenShareAudio&&(mc(d)||Cu(d))&&!d.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:c.trackSid})),yield d.restartTrack()),yield this.publishOrRepublishTrack(d,c.options,!0)}))),s()}catch(a){o(a)}finally{this.republishPromise=void 0}})),yield r.republishPromise}()})}publishData(e){return K(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const s=i.reliable?en.RELIABLE:en.LOSSY,o=i.destinationIdentities,a=i.topic;let c=new T_({participantIdentity:r.identity,payload:n,destinationIdentities:o,topic:a});const d=new as({kind:s,value:{case:"user",value:c}});yield r.engine.sendDataPacket(d,s)}()})}publishDtmf(e,n){return K(this,void 0,void 0,function*(){const r=new as({kind:en.RELIABLE,value:{case:"sipDtmf",value:new VU({code:e,digit:n})}});yield this.engine.sendDataPacket(r,en.RELIABLE)})}sendChatMessage(e,n){return K(this,void 0,void 0,function*(){const r={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:n==null?void 0:n.attachments},i=new as({value:{case:"chatMessage",value:new cw(Object.assign(Object.assign({},r),{timestamp:ar.parse(r.timestamp)}))}});return yield this.engine.sendDataPacket(i,en.RELIABLE),this.emit(Ue.ChatMessage,r),r})}editChatMessage(e,n){return K(this,void 0,void 0,function*(){const r=Object.assign(Object.assign({},n),{message:e,editTimestamp:Date.now()}),i=new as({value:{case:"chatMessage",value:new cw(Object.assign(Object.assign({},r),{timestamp:ar.parse(r.timestamp),editTimestamp:ar.parse(r.editTimestamp)}))}});return yield this.engine.sendDataPacket(i,en.RELIABLE),this.emit(Ue.ChatMessage,r),r})}sendText(e,n){return K(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendText(e,n)})}streamText(e){return K(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamText(e)})}sendFile(e,n){return K(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendFile(e,n)})}streamBytes(e){return K(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamBytes(e)})}performRpc(e){return K(this,arguments,void 0,function(n){var r=this;let{destinationIdentity:i,method:s,payload:o,responseTimeout:a=15e3}=n;return function*(){return new Promise((h,p)=>K(r,void 0,void 0,function*(){var y,S,k,C;if(W_(o)>Y3){p(Pr.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((S=(y=this.engine.latestJoinResponse)===null||y===void 0?void 0:y.serverInfo)===null||S===void 0)&&S.version&&Rl((C=(k=this.engine.latestJoinResponse)===null||k===void 0?void 0:k.serverInfo)===null||C===void 0?void 0:C.version,"1.8.0")<0){p(Pr.builtIn("UNSUPPORTED_SERVER"));return}const E=Math.max(a,8e3),_=crypto.randomUUID();yield this.publishRpcRequest(i,_,s,o,E);const A=setTimeout(()=>{this.pendingAcks.delete(_),p(Pr.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(_),clearTimeout(M)},7e3);this.pendingAcks.set(_,{resolve:()=>{clearTimeout(A)},participantIdentity:i});const M=setTimeout(()=>{this.pendingResponses.delete(_),p(Pr.builtIn("RESPONSE_TIMEOUT"))},a);this.pendingResponses.set(_,{resolve:(I,N)=>{clearTimeout(M),this.pendingAcks.has(_)&&(console.warn("RPC response received before ack",_),this.pendingAcks.delete(_),clearTimeout(A)),N?p(N):h(I??"")},participantIdentity:i})}))}()})}registerRpcMethod(e,n){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const n=this.pendingAcks.get(e);n?(n.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,n,r){const i=this.pendingResponses.get(e);i?(i.resolve(n,r),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,n,r,i,s){return K(this,void 0,void 0,function*(){const o=new as({destinationIdentities:[e],kind:en.RELIABLE,value:{case:"rpcRequest",value:new E_({id:n,method:r,payload:i,responseTimeoutMs:s,version:1})}});yield this.engine.sendDataPacket(o,en.RELIABLE)})}handleParticipantDisconnected(e){for(const[n,{participantIdentity:r}]of this.pendingAcks)r===e&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:r,resolve:i}]of this.pendingResponses)r===e&&(i(null,Pr.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return super.updateInfo(e)?(e.tracks.forEach(n=>{var r,i;const s=this.trackPublications.get(n.sid);if(s){const o=s.isMuted||((i=(r=s.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);o!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),ln(s)),{mutedOnServer:o})),this.engine.client.sendMuteTrack(n.sid,o))}}),!0):!1}setActiveAgent(e){var n,r,i,s;this.firstActiveAgent=e,e&&!this.firstActiveAgent&&(this.firstActiveAgent=e),e?(r=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||r===void 0||r.call(n,e):(s=(i=this.activeAgentFuture)===null||i===void 0?void 0:i.reject)===null||s===void 0||s.call(i,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new Ho),this.activeAgentFuture.promise)}getPublicationForTrack(e){let n;return this.trackPublications.forEach(r=>{const i=r.track;i&&(e instanceof MediaStreamTrack?(mc(i)||Cu(i))&&i.mediaStreamTrack===e&&(n=r):e===i&&(n=r))}),n}waitForPendingPublicationOfSource(e){return K(this,void 0,void 0,function*(){const r=Date.now();for(;Date.now()<r+1e4;){const i=Array.from(this.pendingPublishPromises.entries()).find(s=>{let[o]=s;return o.source===e});if(i)return i[1];yield us(20)}})}}class iie extends gc{constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=s=>{this.setTrack(void 0),this.emit(Ye.Ended,s)},this.handleVisibilityChange=s=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(s),this.logContext),this.visible=s,this.emitTrackUpdate()},this.handleVideoDimensionsChange=s=>{this.log.debug("adaptivestream video dimensions ".concat(s.width,"x").concat(s.height),this.logContext),this.videoDimensionsAdaptiveStream=s,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const i=new wS({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new zU({participantSid:"",trackSids:[this.trackSid]})]});this.emit(Ye.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?gc.SubscriptionStatus.Unsubscribed:super.isSubscribed?gc.SubscriptionStatus.Subscribed:gc.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?gc.PermissionStatus.Allowed:gc.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.requestedDisabled===!e||(this.requestedDisabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.requestedMaxQuality===e||(this.requestedMaxQuality=e,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,r;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((r=this.requestedVideoDimensions)===null||r===void 0?void 0:r.height)===e.height||(wk(this.track)&&(this.requestedVideoDimensions=e),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&wk(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){var e;return(e=this.requestedMaxQuality)!==null&&e!==void 0?e:mo.HIGH}setTrack(e){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(Ye.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(Ye.VisibilityChanged,this.handleVisibilityChange),i.off(Ye.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(Ye.Unsubscribed,i)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(Ye.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(Ye.VisibilityChanged,this.handleVisibilityChange),e.on(Ye.Ended,this.handleEnded),this.emit(Ye.Subscribed,e)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(Ye.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?Ye.Muted:Ye.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(Ye.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(Ye.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return wk(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new JU({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===_e.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)NN(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const r=Zne(this.trackInfo,this.requestedMaxQuality);r&&NN(this.videoDimensionsAdaptiveStream,r)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(e.width=Math.ceil(n.width),e.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),e.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:mo.HIGH})),e.quality=mo.HIGH)}this.emit(Ye.UpdateSettings,e)}}class vw extends r4{static fromParticipantInfo(e,n,r){return new vw(e,n.sid,n.identity,n.name,n.metadata,n.attributes,r,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,n,r,i,s,o,a){let c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:by.STANDARD;super(n,r||"",i,s,o,a,c),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(Ye.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),ln(e)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),e.on(Ye.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(Ye.SubscriptionPermissionChanged,n=>{this.emit(Ue.TrackSubscriptionPermissionChanged,e,n)}),e.on(Ye.SubscriptionStatusChanged,n=>{this.emit(Ue.TrackSubscriptionStatusChanged,e,n)}),e.on(Ye.Subscribed,n=>{this.emit(Ue.TrackSubscribed,n,e)}),e.on(Ye.Unsubscribed,n=>{this.emit(Ue.TrackUnsubscribed,n,e)}),e.on(Ye.SubscriptionFailed,n=>{this.emit(Ue.TrackSubscriptionFailed,e.trackSid,n)})}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_e.Source.Microphone;this.volumeMap.set(n,e);const r=this.getTrackPublication(n);r&&r.track&&r.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_e.Source.Microphone;const n=this.getTrackPublication(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,r,i,s,o){let a=this.getTrackPublicationBySid(n);if(a||n.startsWith("TR")||this.trackPublications.forEach(h=>{!a&&e.kind===h.kind.toString()&&(a=h)}),!a){if(o===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(Ue.TrackSubscriptionFailed,n);return}o===void 0&&(o=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,r,i,s,o-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),ln(a))),this.emit(Ue.TrackSubscriptionFailed,n);return}const c=e.kind==="video";let d;return c?d=new Xre(e,n,i,s):d=new Jre(e,n,i,this.audioContext,this.audioOutput),d.source=a.source,d.isMuted=a.isMuted,d.setMediaStream(r),d.start(),a.setTrack(d),this.volumeMap.has(a.source)&&y1(d)&&Sl(d)&&d.setVolume(this.volumeMap.get(a.source)),a}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,r=new Map;return e.tracks.forEach(i=>{var s,o;let a=this.getTrackPublicationBySid(i.sid);if(a)a.updateInfo(i);else{const c=_e.kindFromProto(i.type);if(!c)return;a=new iie(c,i,(s=this.signalClient.connectOptions)===null||s===void 0?void 0:s.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(o=this.loggerOptions)===null||o===void 0?void 0:o.loggerName}),a.updateInfo(i),r.set(i.sid,a);const d=Array.from(this.trackPublications.values()).find(h=>h.source===(a==null?void 0:a.source));d&&a.source!==_e.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(a.source),Object.assign(Object.assign({},this.logContext),{oldTrack:ln(d),newTrack:ln(a)})),this.addTrackPublication(a)}n.set(i.sid,a)}),this.trackPublications.forEach(i=>{n.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),ln(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit(Ue.TrackPublished,i)}),!0}unpublishTrack(e,n){const r=this.trackPublications.get(e);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.trackPublications.delete(e),r.kind){case _e.Kind.Audio:this.audioTrackPublications.delete(e);break;case _e.Kind.Video:this.videoTrackPublications.delete(e);break}n&&this.emit(Ue.TrackUnpublished,r)}setAudioOutput(e){return K(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTrackPublications.forEach(r=>{var i;Sl(r.track)&&y1(r.track)&&n.push(r.track.setSinkId((i=e.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:r})),super.emit(e,...r)}}var Tn;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting"})(Tn||(Tn={}));const sie=4*1e3;let Mm=class _1 extends Ml.EventEmitter{get hasE2EESetup(){return this.e2eeManager!==void 0}constructor(e){var n,r,i,s;if(super(),n=this,this.state=Tn.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=sn,this.bufferedEvents=[],this.isResuming=!1,this.rpcHandlers=new Map,this.connect=(o,a,c)=>K(this,void 0,void 0,function*(){var d;if(!Mne())throw _l()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const h=yield this.disconnectLock.lock();if(this.state===Tn.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),h(),Promise.resolve();if(this.connectFuture)return h(),this.connectFuture.promise;this.setAndEmitConnectionState(Tn.Connecting),((d=this.regionUrlProvider)===null||d===void 0?void 0:d.getServerUrl().toString())!==o&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),g1(new URL(o))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new k1(o,a):this.regionUrlProvider.updateToken(a),this.regionUrlProvider.fetchRegionSettings().then(S=>{var k;(k=this.regionUrlProvider)===null||k===void 0||k.setServerReportedRegions(S)}).catch(S=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:S}))}));const p=(S,k,C)=>K(this,void 0,void 0,function*(){var E,_;this.abortController&&this.abortController.abort();const A=new AbortController;this.abortController=A,h==null||h();try{yield this.attemptConnection(C??o,a,c,A),this.abortController=void 0,S()}catch(M){if(this.regionUrlProvider&&M instanceof An&&M.reason!==fn.Cancelled&&M.reason!==fn.NotAllowed){let I=null;try{I=yield this.regionUrlProvider.getNextBestRegionUrl((E=this.abortController)===null||E===void 0?void 0:E.signal)}catch(N){if(N instanceof An&&(N.status===401||N.reason===fn.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),k(N);return}}I&&!(!((_=this.abortController)===null||_===void 0)&&_.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(M.message,". Retrying with another region: ").concat(I),this.logContext),this.recreateEngine(),yield p(S,k,I)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,IN(M)),k(M))}else{let I=Ta.UNKNOWN_REASON;M instanceof An&&(I=IN(M)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,I),k(M)}}}),y=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new Ho((S,k)=>{p(S,k,y)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(o,a,c,d,h,p)=>K(this,void 0,void 0,function*(){var y,S,k;const C=yield c.join(o,a,{autoSubscribe:d.autoSubscribe,adaptiveStream:typeof h.adaptiveStream=="object"?!0:h.adaptiveStream,maxRetries:d.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:d.websocketTimeout,singlePeerConnection:h.singlePeerConnection},p.signal);let E=C.serverInfo;if(E||(E={version:C.serverVersion,region:C.serverRegion}),this.serverInfo=E,this.log.debug("connected to Livekit Server ".concat(Object.entries(E).map(_=>{let[A,M]=_;return"".concat(A,": ").concat(M)}).join(", ")),{room:(y=C.room)===null||y===void 0?void 0:y.name,roomSid:(S=C.room)===null||S===void 0?void 0:S.sid,identity:(k=C.participant)===null||k===void 0?void 0:k.identity}),!E.version)throw new vne("unknown server version");return E.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),h.dynacast=!1),C}),this.applyJoinResponse=o=>{const a=o.participant;if(this.localParticipant.sid=a.sid,this.localParticipant.identity=a.identity,this.localParticipant.setEnabledPublishCodecs(o.enabledPublishCodecs),this.e2eeManager)try{this.e2eeManager.setSifTrailer(o.sifTrailer)}catch(c){this.log.error(c instanceof Error?c.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:c}))}this.handleParticipantUpdates([a,...o.otherParticipants]),o.room&&this.handleRoomUpdate(o.room)},this.attemptConnection=(o,a,c,d)=>K(this,void 0,void 0,function*(){var h,p;this.state===Tn.Reconnecting||this.isResuming||!((h=this.engine)===null||h===void 0)&&h.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((p=this.regionUrlProvider)===null||p===void 0)&&p.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},$_),c),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const y=yield this.connectSignal(o,a,this.engine,this.connOptions,this.options,d);this.applyJoinResponse(y),this.setupLocalParticipantEvents(),this.emit(Ie.SignalConnected)}catch(y){yield this.engine.close(),this.recreateEngine();const S=new An("could not establish signal connection",fn.ServerUnreachable);throw y instanceof Error&&(S.message="".concat(S.message,": ").concat(y.message)),y instanceof An&&(S.reason=y.reason,S.status=y.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:y})),S}if(d.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new An("Connection attempt aborted",fn.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,d)}catch(y){throw yield this.engine.close(),this.recreateEngine(),y}js()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),js()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(Tn.Connected),this.emit(Ie.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return K(n,[...a],void 0,function(){var d=this;let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var p,y,S,k;const C=yield d.disconnectLock.lock();try{if(d.state===Tn.Disconnected){d.log.debug("already disconnected",d.logContext);return}if(d.log.info("disconnect from room",Object.assign({},d.logContext)),d.state===Tn.Connecting||d.state===Tn.Reconnecting||d.isResuming){const E="Abort connection attempt due to user initiated disconnect";d.log.warn(E,d.logContext),(p=d.abortController)===null||p===void 0||p.abort(E),(S=(y=d.connectFuture)===null||y===void 0?void 0:y.reject)===null||S===void 0||S.call(y,new An("Client initiated disconnect",fn.Cancelled)),d.connectFuture=void 0}!((k=d.engine)===null||k===void 0)&&k.client.isDisconnected||(yield d.engine.client.sendLeave()),d.engine&&(yield d.engine.close()),d.handleDisconnect(h,Ta.CLIENT_INITIATED),d.engine=void 0}finally{C()}}()})},this.onPageLeave=()=>K(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>K(this,void 0,void 0,function*(){const o=[],a=$s();if(a&&a.os==="iOS"){const c="livekit-dummy-audio-el";let d=document.getElementById(c);if(!d){d=document.createElement("audio"),d.id=c,d.autoplay=!0,d.hidden=!0;const h=xk();h.enabled=!0;const p=new MediaStream([h]);d.srcObject=p,document.addEventListener("visibilitychange",()=>{d&&(d.srcObject=document.hidden?null:p,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(d),this.once(Ie.Disconnected,()=>{d==null||d.remove(),d=null})}o.push(d)}this.remoteParticipants.forEach(c=>{c.audioTrackPublications.forEach(d=>{d.track&&d.track.attachedElements.forEach(h=>{o.push(h)})})});try{yield Promise.all([this.acquireAudioContext(),...o.map(c=>(c.muted=!1,c.play()))]),this.handleAudioPlaybackStarted()}catch(c){throw this.handleAudioPlaybackFailed(c),c}}),this.startVideo=()=>K(this,void 0,void 0,function*(){const o=[];for(const a of this.remoteParticipants.values())a.videoTrackPublications.forEach(c=>{var d;(d=c.track)===null||d===void 0||d.attachedElements.forEach(h=>{o.includes(h)||o.push(h)})});yield Promise.all(o.map(a=>a.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(a=>{a.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const o of this.remoteParticipants.values())this.handleParticipantDisconnected(o.identity,o);this.setAndEmitConnectionState(Tn.Reconnecting)&&this.emit(Ie.Reconnecting)},this.handleSignalRestarted=o=>K(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(o.serverRegion),Object.assign(Object.assign({},this.logContext),{region:o.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(o);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(a){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:a}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:o.serverRegion}))}catch{return}this.setAndEmitConnectionState(Tn.Connected),this.emit(Ie.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=o=>{o.forEach(a=>{var c;if(a.identity===this.localParticipant.identity){this.localParticipant.updateInfo(a);return}a.identity===""&&(a.identity=(c=this.sidToIdentity.get(a.sid))!==null&&c!==void 0?c:"");let d=this.remoteParticipants.get(a.identity);a.state===Xp.DISCONNECTED?this.handleParticipantDisconnected(a.identity,d):d=this.getOrCreateParticipant(a.identity,a)})},this.handleActiveSpeakersUpdate=o=>{const a=[],c={};o.forEach(d=>{if(c[d.sid]=!0,d.sid===this.localParticipant.sid)this.localParticipant.audioLevel=d.level,this.localParticipant.setIsSpeaking(!0),a.push(this.localParticipant);else{const h=this.getRemoteParticipantBySid(d.sid);h&&(h.audioLevel=d.level,h.setIsSpeaking(!0),a.push(h))}}),c[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(d=>{c[d.sid]||(d.audioLevel=0,d.setIsSpeaking(!1))}),this.activeSpeakers=a,this.emitWhenConnected(Ie.ActiveSpeakersChanged,a)},this.handleSpeakersChanged=o=>{const a=new Map;this.activeSpeakers.forEach(d=>{const h=this.remoteParticipants.get(d.identity);h&&h.sid!==d.sid||a.set(d.sid,d)}),o.forEach(d=>{let h=this.getRemoteParticipantBySid(d.sid);d.sid===this.localParticipant.sid&&(h=this.localParticipant),h&&(h.audioLevel=d.level,h.setIsSpeaking(d.active),d.active?a.set(d.sid,h):a.delete(d.sid))});const c=Array.from(a.values());c.sort((d,h)=>h.audioLevel-d.audioLevel),this.activeSpeakers=c,this.emitWhenConnected(Ie.ActiveSpeakersChanged,c)},this.handleStreamStateUpdate=o=>{o.streamStates.forEach(a=>{const c=this.getRemoteParticipantBySid(a.participantSid);if(!c)return;const d=c.getTrackPublicationBySid(a.trackSid);if(!d||!d.track)return;const h=_e.streamStateFromProto(a.state);d.track.setStreamState(h),h!==d.track.streamState&&(c.emit(Ue.TrackStreamStateChanged,d,d.track.streamState),this.emitWhenConnected(Ie.TrackStreamStateChanged,d,d.track.streamState,c))})},this.handleSubscriptionPermissionUpdate=o=>{const a=this.getRemoteParticipantBySid(o.participantSid);if(!a)return;const c=a.getTrackPublicationBySid(o.trackSid);c&&c.setAllowed(o.allowed)},this.handleSubscriptionError=o=>{const a=Array.from(this.remoteParticipants.values()).find(d=>d.trackPublications.has(o.trackSid));if(!a)return;const c=a.getTrackPublicationBySid(o.trackSid);c&&c.setSubscriptionError(o.err)},this.handleDataPacket=(o,a)=>{const c=this.remoteParticipants.get(o.participantIdentity);if(o.value.case==="user")this.handleUserPacket(c,o.value.value,o.kind,a);else if(o.value.case==="transcription")this.handleTranscription(c,o.value.value);else if(o.value.case==="sipDtmf")this.handleSipDtmf(c,o.value.value);else if(o.value.case==="chatMessage")this.handleChatMessage(c,o.value.value);else if(o.value.case==="metrics")this.handleMetrics(o.value.value,c);else if(o.value.case==="streamHeader"||o.value.case==="streamChunk"||o.value.case==="streamTrailer")this.handleDataStream(o,a);else if(o.value.case==="rpcRequest"){const d=o.value.value;this.handleIncomingRpcRequest(o.participantIdentity,d.id,d.method,d.payload,d.responseTimeoutMs,d.version)}},this.handleUserPacket=(o,a,c,d)=>{this.emit(Ie.DataReceived,a.payload,o,c,a.topic,d),o==null||o.emit(Ue.DataReceived,a.payload,c,d)},this.handleSipDtmf=(o,a)=>{this.emit(Ie.SipDTMFReceived,a,o),o==null||o.emit(Ue.SipDTMFReceived,a)},this.handleTranscription=(o,a)=>{const c=a.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(a.transcribedParticipantIdentity),d=c==null?void 0:c.trackPublications.get(a.trackId),h=zne(a,this.transcriptionReceivedTimes);d==null||d.emit(Ye.TranscriptionReceived,h),c==null||c.emit(Ue.TranscriptionReceived,h,d),this.emit(Ie.TranscriptionReceived,h,c,d)},this.handleChatMessage=(o,a)=>{const c=$ne(a);this.emit(Ie.ChatMessage,c,o)},this.handleMetrics=(o,a)=>{this.emit(Ie.MetricsReceived,o,a)},this.handleDataStream=(o,a)=>{this.incomingDataStreamManager.handleDataStreamPacket(o,a)},this.bufferedSegments=new Map,this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(Ie.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=o=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:o})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(Ie.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(Ie.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(Ie.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>K(this,void 0,void 0,function*(){var o;((o=$s())===null||o===void 0?void 0:o.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(Ie.MediaDevicesChanged)}),this.handleRoomUpdate=o=>{const a=this.roomInfo;this.roomInfo=o,a&&a.metadata!==o.metadata&&this.emitWhenConnected(Ie.RoomMetadataChanged,o.metadata),(a==null?void 0:a.activeRecording)!==o.activeRecording&&this.emitWhenConnected(Ie.RecordingStatusChanged,o.activeRecording)},this.handleConnectionQualityUpdate=o=>{o.updates.forEach(a=>{if(a.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(a.quality);return}const c=this.getRemoteParticipantBySid(a.participantSid);c&&c.setConnectionQuality(a.quality)})},this.onLocalParticipantMetadataChanged=o=>{this.emit(Ie.ParticipantMetadataChanged,o,this.localParticipant)},this.onLocalParticipantNameChanged=o=>{this.emit(Ie.ParticipantNameChanged,o,this.localParticipant)},this.onLocalAttributesChanged=o=>{this.emit(Ie.ParticipantAttributesChanged,o,this.localParticipant)},this.onLocalTrackMuted=o=>{this.emit(Ie.TrackMuted,o,this.localParticipant)},this.onLocalTrackUnmuted=o=>{this.emit(Ie.TrackUnmuted,o,this.localParticipant)},this.onTrackProcessorUpdate=o=>{var a;(a=o==null?void 0:o.onPublish)===null||a===void 0||a.call(o,this)},this.onLocalTrackPublished=o=>K(this,void 0,void 0,function*(){var a,c,d,h,p,y;(a=o.track)===null||a===void 0||a.on(Ye.TrackProcessorUpdate,this.onTrackProcessorUpdate),(c=o.track)===null||c===void 0||c.on(Ye.Restarted,this.onLocalTrackRestarted),(p=(h=(d=o.track)===null||d===void 0?void 0:d.getProcessor())===null||h===void 0?void 0:h.onPublish)===null||p===void 0||p.call(h,this),this.emit(Ie.LocalTrackPublished,o,this.localParticipant),mc(o.track)&&(yield o.track.checkForSilence())&&this.emit(Ie.LocalAudioSilenceDetected,o);const S=yield(y=o.track)===null||y===void 0?void 0:y.getDeviceId(!1),k=x1(o.source);k&&S&&S!==this.localParticipant.activeDeviceMap.get(k)&&(this.localParticipant.activeDeviceMap.set(k,S),this.emit(Ie.ActiveDeviceChanged,k,S))}),this.onLocalTrackUnpublished=o=>{var a,c;(a=o.track)===null||a===void 0||a.off(Ye.TrackProcessorUpdate,this.onTrackProcessorUpdate),(c=o.track)===null||c===void 0||c.off(Ye.Restarted,this.onLocalTrackRestarted),this.emit(Ie.LocalTrackUnpublished,o,this.localParticipant)},this.onLocalTrackRestarted=o=>K(this,void 0,void 0,function*(){const a=yield o.getDeviceId(!1),c=x1(o.source);c&&a&&a!==this.localParticipant.activeDeviceMap.get(c)&&(this.log.debug("local track restarted, setting ".concat(c," ").concat(a," active"),this.logContext),this.localParticipant.activeDeviceMap.set(c,a),this.emit(Ie.ActiveDeviceChanged,c,a))}),this.onLocalConnectionQualityChanged=o=>{this.emit(Ie.ConnectionQualityChanged,o,this.localParticipant)},this.onMediaDevicesError=(o,a)=>{this.emit(Ie.MediaDevicesError,o,a)},this.onLocalParticipantPermissionsChanged=o=>{this.emit(Ie.ParticipantPermissionsChanged,o,this.localParticipant)},this.onLocalChatMessageSent=o=>{this.emit(Ie.ChatMessage,o,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},xre),e),this.log=Ic((r=this.options.loggerName)!==null&&r!==void 0?r:Pa.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},K3),e==null?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},G3),e==null?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},bre),e==null?void 0:e.publishDefaults),this.maybeCreateEngine(),this.incomingDataStreamManager=new Kre,this.outgoingDataStreamManager=new Qre(this.engine,this.log),this.disconnectLock=new zs,this.localParticipant=new rie("","",this.engine,this.options,this.rpcHandlers,this.outgoingDataStreamManager),(this.options.e2ee||this.options.encryption)&&this.setupE2EE(),this.engine.e2eeManager=this.e2eeManager,this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Qu(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Qu(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",Qu(this.options.audioOutput.deviceId)).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),js()){const o=new AbortController;(s=navigator.mediaDevices)===null||s===void 0||s.addEventListener("devicechange",this.handleDeviceChange,{signal:o.signal}),_1.cleanupRegistry&&_1.cleanupRegistry.register(this,()=>{o.abort()})}}registerTextStreamHandler(e,n){return this.incomingDataStreamManager.registerTextStreamHandler(e,n)}unregisterTextStreamHandler(e){return this.incomingDataStreamManager.unregisterTextStreamHandler(e)}registerByteStreamHandler(e,n){return this.incomingDataStreamManager.registerByteStreamHandler(e,n)}unregisterByteStreamHandler(e){return this.incomingDataStreamManager.unregisterByteStreamHandler(e)}registerRpcMethod(e,n){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setE2EEEnabled(e){return K(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;const n=!!this.options.encryption,r=this.options.encryption||this.options.e2ee;r&&("e2eeManager"in r?(this.e2eeManager=r.e2eeManager,this.e2eeManager.isDataChannelEncryptionEnabled=n):this.e2eeManager=new ere(r,n),this.e2eeManager.on(Hu.ParticipantEncryptionStatusChanged,(i,s)=>{Hne(s)&&(this.isE2EEEnabled=i),this.emit(Ie.ParticipantEncryptionStatusChanged,i,s)}),this.e2eeManager.on(Hu.EncryptionError,i=>this.emit(Ie.EncryptionError,i)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return K(this,void 0,void 0,function*(){return this.state===Tn.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,n)=>{const r=i=>{i.sid!==""&&(this.engine.off(Xe.RoomUpdate,r),e(i.sid))};this.engine.on(Xe.RoomUpdate,r),this.once(Ie.Disconnected,()=>{this.engine.off(Xe.RoomUpdate,r),n("Room disconnected before room server id was available")})})})}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new zre(this.options),this.engine.e2eeManager=this.e2eeManager,this.engine.on(Xe.ParticipantUpdate,this.handleParticipantUpdates).on(Xe.RoomUpdate,this.handleRoomUpdate).on(Xe.SpeakersChanged,this.handleSpeakersChanged).on(Xe.StreamStateChanged,this.handleStreamStateUpdate).on(Xe.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(Xe.SubscriptionError,this.handleSubscriptionError).on(Xe.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(Xe.MediaTrackAdded,(e,n,r)=>{this.onTrackAdded(e,n,r)}).on(Xe.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(Xe.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(Xe.DataPacketReceived,this.handleDataPacket).on(Xe.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(Tn.SignalReconnecting)&&this.emit(Ie.SignalReconnecting)}).on(Xe.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(Tn.Connected)&&this.emit(Ie.Reconnected)}).on(Xe.SignalResumed,()=>{this.bufferedEvents=[],(this.state===Tn.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(Xe.Restarting,this.handleRestarting).on(Xe.SignalRestarted,this.handleSignalRestarted).on(Xe.Offline,()=>{this.setAndEmitConnectionState(Tn.Reconnecting)&&this.emit(Ie.Reconnecting)}).on(Xe.DCBufferStatusChanged,(e,n)=>{this.emit(Ie.DCBufferStatusChanged,e,n)}).on(Xe.LocalTrackSubscribed,e=>{const n=this.localParticipant.getTrackPublications().find(r=>{let{trackSid:i}=r;return i===e});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(Ue.LocalTrackSubscribed,n),this.emitWhenConnected(Ie.LocalTrackSubscribed,n,this.localParticipant)}).on(Xe.RoomMoved,e=>{this.log.debug("room moved",e),e.room&&this.handleRoomUpdate(e.room),this.remoteParticipants.forEach((n,r)=>{this.handleParticipantDisconnected(r,n)}),this.emit(Ie.Moved,e.room.name),e.participant?this.handleParticipantUpdates([e.participant,...e.otherParticipants]):this.handleParticipantUpdates(e.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine),this.outgoingDataStreamManager&&this.outgoingDataStreamManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ci.getInstance().getDevices(e,n)}prepareConnection(e,n){return K(this,void 0,void 0,function*(){if(this.state===Tn.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(g1(new URL(e))&&n){this.regionUrlProvider=new k1(e,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===Tn.Disconnected&&(this.regionUrl=r,yield fetch(v1(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(v1(e),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return K(this,void 0,void 0,function*(){let r=()=>K(this,void 0,void 0,function*(){}),i;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new cl({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new cl({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new cl({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new cl({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>K(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new cl({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>K(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new cl({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new cl({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),r=()=>K(this,void 0,void 0,function*(){const s=this.engine.client.onLeave;s&&s(new SS({reason:Ta.CLIENT_INITIATED,action:Zp.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new cl({scenario:{case:"subscriberBandwidth",value:ff(n)}});break;case"leave-full-reconnect":i=new cl({scenario:{case:"leaveRequestFullReconnect",value:!0}})}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){return K(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return function*(){var a,c,d,h,p,y,S;let k=!0,C=!1;const E=o?{exact:i}:i;if(r==="audioinput"){C=s.localParticipant.audioTrackPublications.size===0;const _=(a=s.getActiveDevice(r))!==null&&a!==void 0?a:s.options.audioCaptureDefaults.deviceId;s.options.audioCaptureDefaults.deviceId=E;const A=Array.from(s.localParticipant.audioTrackPublications.values()).filter(I=>I.source===_e.Source.Microphone);try{k=(yield Promise.all(A.map(I=>{var N;return(N=I.audioTrack)===null||N===void 0?void 0:N.setDeviceId(E)}))).every(I=>I===!0)}catch(I){throw s.options.audioCaptureDefaults.deviceId=_,I}const M=A.some(I=>{var N,O;return(O=(N=I.track)===null||N===void 0?void 0:N.isMuted)!==null&&O!==void 0?O:!1});k&&M&&(C=!0)}else if(r==="videoinput"){C=s.localParticipant.videoTrackPublications.size===0;const _=(c=s.getActiveDevice(r))!==null&&c!==void 0?c:s.options.videoCaptureDefaults.deviceId;s.options.videoCaptureDefaults.deviceId=E;const A=Array.from(s.localParticipant.videoTrackPublications.values()).filter(I=>I.source===_e.Source.Camera);try{k=(yield Promise.all(A.map(I=>{var N;return(N=I.videoTrack)===null||N===void 0?void 0:N.setDeviceId(E)}))).every(I=>I===!0)}catch(I){throw s.options.videoCaptureDefaults.deviceId=_,I}const M=A.some(I=>{var N,O;return(O=(N=I.track)===null||N===void 0?void 0:N.isMuted)!==null&&O!==void 0?O:!1});k&&M&&(C=!0)}else if(r==="audiooutput"){if(C=!0,!m1()&&!s.options.webAudioMix||s.options.webAudioMix&&s.audioContext&&!("setSinkId"in s.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");s.options.webAudioMix&&(i=(d=yield Ci.getInstance().normalizeDeviceId("audiooutput",i))!==null&&d!==void 0?d:""),(h=(S=s.options).audioOutput)!==null&&h!==void 0||(S.audioOutput={});const _=(p=s.getActiveDevice(r))!==null&&p!==void 0?p:s.options.audioOutput.deviceId;s.options.audioOutput.deviceId=i;try{s.options.webAudioMix&&((y=s.audioContext)===null||y===void 0||y.setSinkId(i)),yield Promise.all(Array.from(s.remoteParticipants.values()).map(A=>A.setAudioOutput({deviceId:i})))}catch(A){throw s.options.audioOutput.deviceId=_,A}}return C&&(s.localParticipant.activeDeviceMap.set(r,i),s.emit(Ie.ActiveDeviceChanged,r,i)),k}()})}setupLocalParticipantEvents(){this.localParticipant.on(Ue.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(Ue.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(Ue.AttributesChanged,this.onLocalAttributesChanged).on(Ue.TrackMuted,this.onLocalTrackMuted).on(Ue.TrackUnmuted,this.onLocalTrackUnmuted).on(Ue.LocalTrackPublished,this.onLocalTrackPublished).on(Ue.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(Ue.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(Ue.MediaDevicesError,this.onMediaDevicesError).on(Ue.AudioStreamAcquired,this.startAudio).on(Ue.ChatMessage,this.onLocalChatMessageSent).on(Ue.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,r){if(this.state===Tn.Connecting||this.state===Tn.Reconnecting){const p=()=>{this.log.debug("deferring on track for later",{mediaTrackId:e.id,mediaStreamId:n.id,tracksInStream:n.getTracks().map(S=>S.id)}),this.onTrackAdded(e,n,r),y()},y=()=>{this.off(Ie.Reconnected,p),this.off(Ie.Connected,p),this.off(Ie.Disconnected,y)};this.once(Ie.Reconnected,p),this.once(Ie.Connected,p),this.once(Ie.Disconnected,y);return}if(this.state===Tn.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const i=Ane(n.id),s=i[0];let o=i[1],a=e.id;if(o&&o.startsWith("TR")&&(a=o),s===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const c=Array.from(this.remoteParticipants.values()).find(p=>p.sid===s);if(!c){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(s),this.logContext);return}if(!a.startsWith("TR")){const p=this.engine.getTrackIdForReceiver(r);if(!p){this.log.error("Tried to add a track whose 'sid' could not be found for a participant, that's not present. Sid: ".concat(s),this.logContext);return}a=p}a.startsWith("TR")||this.log.warn("Tried to add a track whose 'sid' could not be determined for a participant, that's not present. Sid: ".concat(s,", streamId: ").concat(o,", trackId: ").concat(a),Object.assign(Object.assign({},this.logContext),{rpID:s,streamId:o,trackId:a}));let d;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?d=this.options.adaptiveStream:d={});const h=c.addSubscribedMediaTrack(e,a,n,r,d);h!=null&&h.isEncrypted&&!this.e2eeManager&&this.emit(Ie.EncryptionError,new Error("Encrypted ".concat(h.source," track received from participant ").concat(c.sid,", but room does not have encryption enabled!")))}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.incomingDataStreamManager.clearHandlersAndControllers(),this.state!==Tn.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(i=>{i.trackPublications.forEach(s=>{i.unpublishTrack(s.trackSid)})}),this.localParticipant.trackPublications.forEach(i=>{var s,o,a;i.track&&this.localParticipant.unpublishTrack(i.track,e),e?((s=i.track)===null||s===void 0||s.detach(),(o=i.track)===null||o===void 0||o.stop()):(a=i.track)===null||a===void 0||a.stopMonitor()}),this.localParticipant.off(Ue.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(Ue.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(Ue.AttributesChanged,this.onLocalAttributesChanged).off(Ue.TrackMuted,this.onLocalTrackMuted).off(Ue.TrackUnmuted,this.onLocalTrackUnmuted).off(Ue.LocalTrackPublished,this.onLocalTrackPublished).off(Ue.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(Ue.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(Ue.MediaDevicesError,this.onMediaDevicesError).off(Ue.AudioStreamAcquired,this.startAudio).off(Ue.ChatMessage,this.onLocalChatMessageSent).off(Ue.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),js()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(Tn.Disconnected),this.emit(Ie.Disconnected,n)}}}handleParticipantDisconnected(e,n){var r;this.remoteParticipants.delete(e),n&&(this.incomingDataStreamManager.validateParticipantHasNoActiveDataStreams(e),n.trackPublications.forEach(i=>{n.unpublishTrack(i.trackSid,!0)}),this.emit(Ie.ParticipantDisconnected,n),n.setDisconnected(),(r=this.localParticipant)===null||r===void 0||r.handleParticipantDisconnected(n.identity))}handleIncomingRpcRequest(e,n,r,i,s,o){return K(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,n),o!==1){yield this.engine.publishRpcResponse(e,n,null,Pr.builtIn("UNSUPPORTED_VERSION"));return}const a=this.rpcHandlers.get(r);if(!a){yield this.engine.publishRpcResponse(e,n,null,Pr.builtIn("UNSUPPORTED_METHOD"));return}let c=null,d=null;try{const h=yield a({requestId:n,callerIdentity:e,payload:i,responseTimeout:s});W_(h)>Y3?(c=Pr.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(r))):d=h}catch(h){h instanceof Pr?c=h:(console.warn("Uncaught error returned by RPC handler for ".concat(r,". Returning APPLICATION_ERROR instead."),h),c=Pr.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,n,d,c)})}selectDefaultDevices(){return K(this,void 0,void 0,function*(){var e,n,r;const i=Ci.getInstance().previousDevices,s=yield Ci.getInstance().getDevices(void 0,!1),o=$s();if((o==null?void 0:o.name)==="Chrome"&&o.os!=="iOS")for(let c of s){const d=i.find(h=>h.deviceId===c.deviceId);d&&d.label!==""&&d.kind===c.kind&&d.label!==c.label&&this.getActiveDevice(c.kind)==="default"&&this.emit(Ie.ActiveDeviceChanged,c.kind,c.deviceId)}const a=["audiooutput","audioinput","videoinput"];for(let c of a){const d=Kne(c),h=this.localParticipant.getTrackPublication(d);if(h&&(!((e=h.track)===null||e===void 0)&&e.isUserProvided))continue;const p=s.filter(S=>S.kind===c),y=this.getActiveDevice(c);if(y===((n=i.filter(S=>S.kind===c)[0])===null||n===void 0?void 0:n.deviceId)&&p.length>0&&((r=p[0])===null||r===void 0?void 0:r.deviceId)!==y){yield this.switchActiveDevice(c,p[0].deviceId);continue}c==="audioinput"&&!wy()||c==="videoinput"||p.length>0&&!p.find(S=>S.deviceId===this.getActiveDevice(c))&&(c!=="audiooutput"||!wy())&&(yield this.switchActiveDevice(c,p[0].deviceId))}})}acquireAudioContext(){return K(this,void 0,void 0,function*(){var e,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=W3())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),us(200)])}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(Ie.AudioPlaybackStatusChanged,r))})}createParticipant(e,n){var r;let i;return n?i=vw.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):i=new vw(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(s=>this.log.warn("Could not set audio output: ".concat(s.message),this.logContext)),i}getOrCreateParticipant(e,n){if(this.remoteParticipants.has(e)){const i=this.remoteParticipants.get(e);return n&&i.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),i}const r=this.createParticipant(e,n);return this.remoteParticipants.set(e,r),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(Ie.ParticipantConnected,r),r.on(Ue.TrackPublished,i=>{this.emitWhenConnected(Ie.TrackPublished,i,r)}).on(Ue.TrackSubscribed,(i,s)=>{i.kind===_e.Kind.Audio?(i.on(Ye.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(Ye.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===_e.Kind.Video&&(i.on(Ye.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(Ye.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(Ie.TrackSubscribed,i,s,r)}).on(Ue.TrackUnpublished,i=>{this.emit(Ie.TrackUnpublished,i,r)}).on(Ue.TrackUnsubscribed,(i,s)=>{this.emit(Ie.TrackUnsubscribed,i,s,r)}).on(Ue.TrackMuted,i=>{this.emitWhenConnected(Ie.TrackMuted,i,r)}).on(Ue.TrackUnmuted,i=>{this.emitWhenConnected(Ie.TrackUnmuted,i,r)}).on(Ue.ParticipantMetadataChanged,i=>{this.emitWhenConnected(Ie.ParticipantMetadataChanged,i,r)}).on(Ue.ParticipantNameChanged,i=>{this.emitWhenConnected(Ie.ParticipantNameChanged,i,r)}).on(Ue.AttributesChanged,i=>{this.emitWhenConnected(Ie.ParticipantAttributesChanged,i,r)}).on(Ue.ConnectionQualityChanged,i=>{this.emitWhenConnected(Ie.ConnectionQualityChanged,i,r)}).on(Ue.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(Ie.ParticipantPermissionsChanged,i,r)}).on(Ue.TrackSubscriptionStatusChanged,(i,s)=>{this.emitWhenConnected(Ie.TrackSubscriptionStatusChanged,i,s,r)}).on(Ue.TrackSubscriptionFailed,(i,s)=>{this.emit(Ie.TrackSubscriptionFailed,i,r,s)}).on(Ue.TrackSubscriptionPermissionChanged,(i,s)=>{this.emitWhenConnected(Ie.TrackSubscriptionPermissionChanged,i,s,r)}).on(Ue.Active,()=>{this.emitWhenConnected(Ie.ParticipantActive,r),r.kind===by.AGENT&&this.localParticipant.setActiveAgent(r)}),n&&r.updateInfo(n),r}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((r,i)=>(r.push(...i.getTrackPublications()),r),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const n of e.videoTrackPublications.values())n.isSubscribed&&Wne(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(e){const n=this.sidToIdentity.get(e);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=Di.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Ta.STATE_MISMATCH))):e=0},sie)}clearConnectionReconcile(){this.connectionReconcileInterval&&Di.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(Ie.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,r]=e;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.state===Tn.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,r]);else if(this.state===Tn.Connected)return this.emit(e,...r);return!1}simulateParticipants(e){return K(this,void 0,void 0,function*(){var n,r;const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),s=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new yS({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:ar.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new qf({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(Ie.SignalConnected),this.emit(Ie.Connected),this.setAndEmitConnectionState(Tn.Connected),i.video){const o=new E1(_e.Kind.Video,new Fp({source:Yr.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Ca.AUDIO,name:"video-dummy"}),new gw(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:AN(160*((n=s.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(Ue.LocalTrackPublished,o)}if(i.audio){const o=new E1(_e.Kind.Audio,new Fp({source:Yr.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Ca.AUDIO}),new mw(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:xk(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(Ue.LocalTrackPublished,o)}for(let o=0;o<s.count-1;o+=1){let a=new qf({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(o),state:Xp.ACTIVE,tracks:[],joinedAt:ar.parse(Date.now())});const c=this.getOrCreateParticipant(a.identity,a);if(s.video){const d=AN(160*((r=s.aspectRatios[o%s.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),h=new Fp({source:Yr.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Ca.AUDIO});c.addSubscribedMediaTrack(d,h.sid,new MediaStream([d]),new RTCRtpReceiver),a.tracks=[...a.tracks,h]}if(s.audio){const d=xk(),h=new Fp({source:Yr.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Ca.AUDIO});c.addSubscribedMediaTrack(d,h.sid,new MediaStream([d]),new RTCRtpReceiver),a.tracks=[...a.tracks,h]}c.updateInfo(a)}})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e!==Ie.ActiveSpeakersChanged&&e!==Ie.TranscriptionReceived){const s=i4(r).filter(o=>o!==void 0);(e===Ie.TrackSubscribed||e===Ie.TrackUnsubscribed)&&this.log.trace("subscribe trace: ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:s})),this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:s}))}return super.emit(e,...r)}};Mm.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(t=>{t()});function i4(t){return t.map(e=>{if(e)return Array.isArray(e)?i4(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var xa;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(xa||(xa={}));class pd extends Ml.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=xa.IDLE,this.logs=[],this.options={},this.url=e,this.token=n,this.name=this.constructor.name,this.room=new Mm(r.roomOptions),this.connectOptions=r.connectOptions,this.options=r}run(e){return K(this,void 0,void 0,function*(){if(this.status!==xa.IDLE)throw Error("check is running already");this.setStatus(xa.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==xa.SKIPPED&&this.setStatus(this.isSuccess()?xa.SUCCESS:xa.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return K(this,void 0,void 0,function*(){return this.room.state===Tn.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return K(this,void 0,void 0,function*(){this.room&&this.room.state!==Tn.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(xa.SKIPPED)}switchProtocol(e){return K(this,void 0,void 0,function*(){let n=!1,r=!1;if(this.room.on(Ie.Reconnecting,()=>{n=!0}),this.room.once(Ie.Reconnected,()=>{r=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(s=>setTimeout(s,1e3)),!n)return;const i=Date.now()+1e4;for(;Date.now()<i;){if(r)return;yield us(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class oie extends pd{get description(){return"Cloud regions"}perform(){return K(this,void 0,void 0,function*(){const e=new k1(this.url,this.token);if(!e.isCloud()){this.skip();return}const n=[],r=new Set;for(let s=0;s<3;s++){const o=yield e.getNextBestRegionUrl();if(!o)break;if(r.has(o))continue;r.add(o);const a=yield this.checkCloudRegion(o);this.appendMessage("".concat(a.region," RTT: ").concat(a.rtt,"ms, duration: ").concat(a.duration,"ms")),n.push(a)}n.sort((s,o)=>(s.duration-o.duration)*.5+(s.rtt-o.rtt)*.5);const i=n[0];this.bestStats=i,this.appendMessage("best Cloud region: ".concat(i.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return K(this,void 0,void 0,function*(){var n,r;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const i=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!i)throw new Error("Region not found");const s=yield this.room.localParticipant.streamText({topic:"test"}),o=1e3,c=1e6/o,d="A".repeat(o),h=Date.now();for(let k=0;k<c;k++)yield s.write(d);yield s.close();const p=Date.now(),y=yield(r=this.room.engine.pcManager)===null||r===void 0?void 0:r.publisher.getStats(),S={region:i,rtt:1e4,duration:p-h};return y==null||y.forEach(k=>{k.type==="candidate-pair"&&k.nominated&&(S.rtt=k.currentRoundTripTime*1e3)}),yield this.disconnect(),S})}}const Pk=1e4;class aie extends pd{get description(){return"Connection via UDP vs TCP"}perform(){return K(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-n.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const r=this.bestStats;this.appendMessage("upstream bitrate: ".concat((r.bitrateTotal/r.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((r.rttTotal/r.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((r.jitterTotal/r.count*1e3).toFixed(2)," ms")),r.packetsLost>0&&this.appendWarning("packets lost: ".concat((r.packetsLost/r.packetsSent*100).toFixed(2),"%")),r.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((r.qualityLimitationDurations.bandwidth/(Pk/1e3)*100).toFixed(2),"%")),r.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((r.qualityLimitationDurations.cpu/(Pk/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return K(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const r=n.getContext("2d");if(!r)throw new Error("Could not get canvas context");let i=0;const s=()=>{i=(i+1)%360,r.fillStyle="hsl(".concat(i,", 100%, 50%)"),r.fillRect(0,0,n.width,n.height),requestAnimationFrame(s)};s();const a=n.captureStream(30).getVideoTracks()[0],d=(yield this.room.localParticipant.publishTrack(a,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,h={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},p=setInterval(()=>K(this,void 0,void 0,function*(){const y=yield d.getRTCStatsReport();y==null||y.forEach(S=>{S.type==="outbound-rtp"?(h.packetsSent=S.packetsSent,h.qualityLimitationDurations=S.qualityLimitationDurations,h.bitrateTotal+=S.targetBitrate,h.count++):S.type==="remote-inbound-rtp"&&(h.packetsLost=S.packetsLost,h.rttTotal+=S.roundTripTime,h.jitterTotal+=S.jitter)})}),1e3);return yield new Promise(y=>setTimeout(y,Pk)),clearInterval(p),a.stop(),n.remove(),yield this.disconnect(),h})}}class lie extends pd{get description(){return"Can publish audio"}perform(){return K(this,void 0,void 0,function*(){var e;const n=yield this.connect(),r=yield eie();if(yield $3(r,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(r),yield new Promise(a=>setTimeout(a,3e3));const s=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!s)throw new Error("Could not get RTCStats");let o=0;if(s.forEach(a=>{a.type==="outbound-rtp"&&(a.kind==="audio"||!a.kind&&a.mediaType==="audio")&&(o=a.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," audio packets"))})}}class cie extends pd{get description(){return"Can publish video"}perform(){return K(this,void 0,void 0,function*(){var e;const n=yield this.connect(),r=yield n4();yield this.checkForVideo(r.mediaStreamTrack),n.localParticipant.publishTrack(r),yield new Promise(o=>setTimeout(o,5e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let s=0;if(i.forEach(o=>{o.type==="outbound-rtp"&&(o.kind==="video"||!o.kind&&o.mediaType==="video")&&(s+=o.packetsSent)}),s===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(s," video packets"))})}checkForVideo(e){return K(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(e.clone());const r=document.createElement("video");r.srcObject=n,r.muted=!0,r.autoplay=!0,r.playsInline=!0,r.setAttribute("playsinline","true"),document.body.appendChild(r),yield new Promise(i=>{r.onplay=()=>{setTimeout(()=>{var s,o,a,c;const d=document.createElement("canvas"),h=e.getSettings(),p=(o=(s=h.width)!==null&&s!==void 0?s:r.videoWidth)!==null&&o!==void 0?o:1280,y=(c=(a=h.height)!==null&&a!==void 0?a:r.videoHeight)!==null&&c!==void 0?c:720;d.width=p,d.height=y;const S=d.getContext("2d");S.drawImage(r,0,0);const C=S.getImageData(0,0,d.width,d.height).data;let E=!0;for(let _=0;_<C.length;_+=4)if(C[_]!==0||C[_+1]!==0||C[_+2]!==0){E=!1;break}E?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),i()},1e3)},r.play()}),n.getTracks().forEach(i=>i.stop()),r.remove()})}}class uie extends pd{get description(){return"Resuming connection after interruption"}perform(){return K(this,void 0,void 0,function*(){var e;const n=yield this.connect();let r=!1,i=!1,s;const o=new Promise(d=>{setTimeout(d,5e3),s=d}),a=()=>{r=!0};n.on(Ie.SignalReconnecting,a).on(Ie.Reconnecting,a).on(Ie.Reconnected,()=>{i=!0,s(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const c=n.engine.client.onClose;if(c&&c(""),yield o,r){if(!i||n.state!==Tn.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class die extends pd{get description(){return"Can connect via TURN"}perform(){return K(this,void 0,void 0,function*(){var e,n;const r=new U_,i=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});let s=!1,o=!1,a=!1;for(let c of i.iceServers)for(let d of c.urls)d.startsWith("turn:")?(o=!0,a=!0):d.startsWith("turns:")&&(o=!0,a=!0,s=!0),d.startsWith("stun:")&&(a=!0);a?o&&!s&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||o?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(c=>setTimeout(c,0)))})}}class fie extends pd{get description(){return"Establishing WebRTC connection"}perform(){return K(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(Ie.SignalConnected,()=>{var r;const i=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(s,o)=>{if(s.candidate){const a=new RTCIceCandidate(s);let c="".concat(a.protocol," ").concat(a.address,":").concat(a.port," ").concat(a.type);a.address&&(hie(a.address)?c+=" (private)":a.protocol==="tcp"&&a.tcpType==="passive"?(e=!0,c+=" (passive)"):a.protocol==="udp"&&(n=!0)),this.appendMessage(c)}i&&i(s,o)},!((r=this.room.engine.pcManager)===null||r===void 0)&&r.subscriber&&(this.room.engine.pcManager.subscriber.onIceCandidateError=s=>{s instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(s.errorCode," ").concat(s.errorText," ").concat(s.url))})});try{yield this.connect(),sn.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function hie(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class pie extends pd{get description(){return"Connecting to signal connection via WebSocket"}perform(){return K(this,void 0,void 0,function*(){var e,n,r;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new U_;const s=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});this.appendMessage("Connected to server, version ".concat(s.serverVersion,".")),((e=s.serverInfo)===null||e===void 0?void 0:e.edition)===WU.Cloud&&(!((n=s.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=s.serverInfo)===null||r===void 0?void 0:r.region)),yield i.close()})}}class Wge extends Ml.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=n,this.options=r}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:xa.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==xa.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return K(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new e(this.url,this.token,this.options),i=o=>{this.updateCheck(n,o)};r.on("update",i);const s=yield r.run();return r.off("update",i),s})}checkWebsocket(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(pie)})}checkWebRTC(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(fie)})}checkTURN(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(die)})}checkReconnect(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(uie)})}checkPublishAudio(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(lie)})}checkPublishVideo(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(cie)})}checkConnectionProtocol(){return K(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(aie);if(e.data&&"protocol"in e.data){const n=e.data;this.options.protocol=n.protocol}return e})}checkCloudRegion(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(oie)})}}function un(t,e,n){return(e=gie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gie(t){var e=mie(t,"string");return typeof e=="symbol"?e:e+""}new TextEncoder;new TextDecoder;class ds extends Error{constructor(e,n){var r;super(e,n),un(this,"code","ERR_JOSE_GENERIC"),this.name=this.constructor.name,(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,this.constructor)}}un(ds,"code","ERR_JOSE_GENERIC");class vie extends ds{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:r,reason:i,payload:n}}),un(this,"code","ERR_JWT_CLAIM_VALIDATION_FAILED"),un(this,"claim",void 0),un(this,"reason",void 0),un(this,"payload",void 0),this.claim=r,this.reason=i,this.payload=n}}un(vie,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");class yie extends ds{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:r,reason:i,payload:n}}),un(this,"code","ERR_JWT_EXPIRED"),un(this,"claim",void 0),un(this,"reason",void 0),un(this,"payload",void 0),this.claim=r,this.reason=i,this.payload=n}}un(yie,"code","ERR_JWT_EXPIRED");class bie extends ds{constructor(){super(...arguments),un(this,"code","ERR_JOSE_ALG_NOT_ALLOWED")}}un(bie,"code","ERR_JOSE_ALG_NOT_ALLOWED");class xie extends ds{constructor(){super(...arguments),un(this,"code","ERR_JOSE_NOT_SUPPORTED")}}un(xie,"code","ERR_JOSE_NOT_SUPPORTED");class wie extends ds{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"decryption operation failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),un(this,"code","ERR_JWE_DECRYPTION_FAILED")}}un(wie,"code","ERR_JWE_DECRYPTION_FAILED");class Sie extends ds{constructor(){super(...arguments),un(this,"code","ERR_JWE_INVALID")}}un(Sie,"code","ERR_JWE_INVALID");class Cie extends ds{constructor(){super(...arguments),un(this,"code","ERR_JWS_INVALID")}}un(Cie,"code","ERR_JWS_INVALID");class kie extends ds{constructor(){super(...arguments),un(this,"code","ERR_JWT_INVALID")}}un(kie,"code","ERR_JWT_INVALID");class Tie extends ds{constructor(){super(...arguments),un(this,"code","ERR_JWK_INVALID")}}un(Tie,"code","ERR_JWK_INVALID");class Eie extends ds{constructor(){super(...arguments),un(this,"code","ERR_JWKS_INVALID")}}un(Eie,"code","ERR_JWKS_INVALID");class _ie extends ds{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"no applicable key found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),un(this,"code","ERR_JWKS_NO_MATCHING_KEY")}}un(_ie,"code","ERR_JWKS_NO_MATCHING_KEY");class Rie extends ds{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"multiple matching keys found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),un(this,Symbol.asyncIterator,void 0),un(this,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS")}}un(Rie,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS");class Pie extends ds{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"request timed out",n=arguments.length>1?arguments[1]:void 0;super(e,n),un(this,"code","ERR_JWKS_TIMEOUT")}}un(Pie,"code","ERR_JWKS_TIMEOUT");class Aie extends ds{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"signature verification failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),un(this,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED")}}un(Aie,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED");function Iie(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var R1={exports:{}},Nie=R1.exports,XN;function Mie(){return XN||(XN=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(Nie,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},o=null;function a(C,E){var _=C[E];if(typeof _.bind=="function")return _.bind(C);try{return Function.prototype.bind.call(_,C)}catch{return function(){return Function.prototype.apply.apply(_,[C,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(C){return C==="debug"&&(C="log"),typeof console===n?!1:C==="trace"&&r?c:console[C]!==void 0?a(console,C):console.log!==void 0?a(console,"log"):e}function h(){for(var C=this.getLevel(),E=0;E<i.length;E++){var _=i[E];this[_]=E<C?e:this.methodFactory(_,C,this.name)}if(this.log=this.debug,typeof console===n&&C<this.levels.SILENT)return"No console available for logging"}function p(C){return function(){typeof console!==n&&(h.call(this),this[C].apply(this,arguments))}}function y(C,E,_){return d(C)||p.apply(this,arguments)}function S(C,E){var _=this,A,M,I,N="loglevel";typeof C=="string"?N+=":"+C:typeof C=="symbol"&&(N=void 0);function O(J){var Y=(i[J]||"silent").toUpperCase();if(!(typeof window===n||!N)){try{window.localStorage[N]=Y;return}catch{}try{window.document.cookie=encodeURIComponent(N)+"="+Y+";"}catch{}}}function j(){var J;if(!(typeof window===n||!N)){try{J=window.localStorage[N]}catch{}if(typeof J===n)try{var Y=window.document.cookie,pe=encodeURIComponent(N),fe=Y.indexOf(pe+"=");fe!==-1&&(J=/^([^;]+)/.exec(Y.slice(fe+pe.length+1))[1])}catch{}return _.levels[J]===void 0&&(J=void 0),J}}function V(){if(!(typeof window===n||!N)){try{window.localStorage.removeItem(N)}catch{}try{window.document.cookie=encodeURIComponent(N)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function $(J){var Y=J;if(typeof Y=="string"&&_.levels[Y.toUpperCase()]!==void 0&&(Y=_.levels[Y.toUpperCase()]),typeof Y=="number"&&Y>=0&&Y<=_.levels.SILENT)return Y;throw new TypeError("log.setLevel() called with invalid level: "+J)}_.name=C,_.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},_.methodFactory=E||y,_.getLevel=function(){return I??M??A},_.setLevel=function(J,Y){return I=$(J),Y!==!1&&O(I),h.call(_)},_.setDefaultLevel=function(J){M=$(J),j()||_.setLevel(J,!1)},_.resetLevel=function(){I=null,V(),h.call(_)},_.enableAll=function(J){_.setLevel(_.levels.TRACE,J)},_.disableAll=function(J){_.setLevel(_.levels.SILENT,J)},_.rebuild=function(){if(o!==_&&(A=$(o.getLevel())),h.call(_),o===_)for(var J in s)s[J].rebuild()},A=$(o?o.getLevel():"WARN");var W=j();W!=null&&(I=$(W)),h.call(_)}o=new S,o.getLogger=function(C){if(typeof C!="symbol"&&typeof C!="string"||C==="")throw new TypeError("You must supply a name when creating a logger.");var E=s[C];return E||(E=s[C]=new S(C,o.methodFactory)),E};var k=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=k),o},o.getLoggers=function(){return s},o.default=o,o})}(R1)),R1.exports}var Oie=Mie();const Die=Iie(Oie);var P1=function(t,e){return P1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},P1(t,e)};function Lc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");P1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Lie(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(p){o(p)}}function c(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((r=r.apply(t,[])).next())})}function s4(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(d){return function(h){return c([d,h])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(h){d=[6,h],i=0}finally{r=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Om(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yw(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function bw(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function im(t){return this instanceof im?(this.v=t,this):new im(t)}function jie(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(S){return function(k){return Promise.resolve(k).then(S,p)}}function a(S,k){r[S]&&(i[S]=function(C){return new Promise(function(E,_){s.push([S,C,E,_])>1||c(S,C)})},k&&(i[S]=k(i[S])))}function c(S,k){try{d(r[S](k))}catch(C){y(s[0][3],C)}}function d(S){S.value instanceof im?Promise.resolve(S.value.v).then(h,p):y(s[0][2],S)}function h(S){c("next",S)}function p(S){c("throw",S)}function y(S,k){S(k),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Fie(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Om=="function"?Om(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}function ci(t){return typeof t=="function"}function K_(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ak=K_(function(t){return function(e){t(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,r){return r+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function xw(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var t0=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Om(o),c=a.next();!c.done;c=a.next()){var d=c.value;d.remove(this)}}catch(C){e={error:C}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else o.remove(this);var h=this.initialTeardown;if(ci(h))try{h()}catch(C){s=C instanceof Ak?C.errors:[C]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var y=Om(p),S=y.next();!S.done;S=y.next()){var k=S.value;try{ZN(k)}catch(C){s=s??[],C instanceof Ak?s=bw(bw([],yw(s)),yw(C.errors)):s.push(C)}}}catch(C){r={error:C}}finally{try{S&&!S.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}}if(s)throw new Ak(s)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)ZN(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&xw(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&xw(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),o4=t0.EMPTY;function a4(t){return t instanceof t0||t&&"closed"in t&&ci(t.remove)&&ci(t.add)&&ci(t.unsubscribe)}function ZN(t){ci(t)?t():t.unsubscribe()}var Uie={Promise:void 0},Vie={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,bw([t,e],yw(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function l4(t){Vie.setTimeout(function(){throw t})}function eM(){}function Px(t){t()}var G_=function(t){Lc(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,a4(n)&&n.add(r)):r.destination=$ie,r}return e.create=function(n,r,i){return new A1(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(t0),Bie=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){Kb(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){Kb(r)}else Kb(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Kb(n)}},t}(),A1=function(t){Lc(e,t);function e(n,r,i){var s=t.call(this)||this,o;return ci(n)||!n?o={next:n??void 0,error:r??void 0,complete:i??void 0}:o=n,s.destination=new Bie(o),s}return e}(G_);function Kb(t){l4(t)}function zie(t){throw t}var $ie={closed:!0,next:eM,error:zie,complete:eM},Y_=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function c4(t){return t}function Wie(t){return t.length===0?c4:t.length===1?t[0]:function(e){return t.reduce(function(n,r){return r(n)},e)}}var Hs=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,s=qie(e)?e:new A1(e,n,r);return Px(function(){var o=i,a=o.operator,c=o.source;s.add(a?a.call(s,c):c?i._subscribe(s):i._trySubscribe(s))}),s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=tM(n),new n(function(i,s){var o=new A1({next:function(a){try{e(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});r.subscribe(o)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[Y_]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Wie(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=tM(e),new e(function(r,i){var s;n.subscribe(function(o){return s=o},function(o){return i(o)},function(){return r(s)})})},t.create=function(e){return new t(e)},t}();function tM(t){var e;return(e=t??Uie.Promise)!==null&&e!==void 0?e:Promise}function Hie(t){return t&&ci(t.next)&&ci(t.error)&&ci(t.complete)}function qie(t){return t&&t instanceof G_||Hie(t)&&a4(t)}function Kie(t){return ci(t==null?void 0:t.lift)}function n0(t){return function(e){if(Kie(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Sy(t,e,n,r,i){return new Gie(t,e,n,r,i)}var Gie=function(t){Lc(e,t);function e(n,r,i,s,o,a){var c=t.call(this,n)||this;return c.onFinalize=o,c.shouldUnsubscribe=a,c._next=r?function(d){try{r(d)}catch(h){n.error(h)}}:t.prototype._next,c._error=s?function(d){try{s(d)}catch(h){n.error(h)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=i?function(){try{i()}catch(d){n.error(d)}finally{this.unsubscribe()}}:t.prototype._complete,c}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(G_),Yie=K_(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),u4=function(t){Lc(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new nM(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new Yie},e.prototype.next=function(n){var r=this;Px(function(){var i,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=Om(r.currentObservers),a=o.next();!a.done;a=o.next()){var c=a.value;c.next(n)}}catch(d){i={error:d}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;Px(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;Px(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,s=i.hasError,o=i.isStopped,a=i.observers;return s||o?o4:(this.currentObservers=null,a.push(n),new t0(function(){r.currentObservers=null,xw(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,s=r.thrownError,o=r.isStopped;i?n.error(s):o&&n.complete()},e.prototype.asObservable=function(){var n=new Hs;return n.source=this,n},e.create=function(n,r){return new nM(n,r)},e}(Hs),nM=function(t){Lc(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:o4},e}(u4),Qie=function(t){Lc(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,s=n._value;if(r)throw i;return this._throwIfClosed(),s},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(u4),Jie={now:function(){return Date.now()}},Xie=function(t){Lc(e,t);function e(n,r){return t.call(this)||this}return e.prototype.schedule=function(n,r){return this},e}(t0),rM={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,bw([t,e],yw(n)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},Zie=function(t){Lc(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var s=this.id,o=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(o,s,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,r),this},e.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),rM.setInterval(n.flush.bind(n,this),i)},e.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&rM.clearInterval(r)},e.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,r){var i=!1,s;try{this.work(n)}catch(o){i=!0,s=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,xw(s,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(Xie),iM=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(r,n)},t.now=Jie.now,t}(),ese=function(t){Lc(e,t);function e(n,r){r===void 0&&(r=iM.now);var i=t.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},e}(iM);new ese(Zie);function tse(t){return t&&ci(t.schedule)}function nse(t){return t[t.length-1]}function rse(t){return tse(nse(t))?t.pop():void 0}var d4=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function f4(t){return ci(t==null?void 0:t.then)}function h4(t){return ci(t[Y_])}function p4(t){return Symbol.asyncIterator&&ci(t==null?void 0:t[Symbol.asyncIterator])}function m4(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function ise(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var g4=ise();function v4(t){return ci(t==null?void 0:t[g4])}function y4(t){return jie(this,arguments,function(){var e,n,r,i;return s4(this,function(s){switch(s.label){case 0:e=t.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,im(e.read())];case 3:return n=s.sent(),r=n.value,i=n.done,i?[4,im(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,im(r)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function b4(t){return ci(t==null?void 0:t.getReader)}function r0(t){if(t instanceof Hs)return t;if(t!=null){if(h4(t))return sse(t);if(d4(t))return ose(t);if(f4(t))return ase(t);if(p4(t))return x4(t);if(v4(t))return lse(t);if(b4(t))return cse(t)}throw m4(t)}function sse(t){return new Hs(function(e){var n=t[Y_]();if(ci(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ose(t){return new Hs(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function ase(t){return new Hs(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,l4)})}function lse(t){return new Hs(function(e){var n,r;try{for(var i=Om(t),s=i.next();!s.done;s=i.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function x4(t){return new Hs(function(e){use(t,e).catch(function(n){return e.error(n)})})}function cse(t){return x4(y4(t))}function use(t,e){var n,r,i,s;return Lie(this,void 0,void 0,function(){var o,a;return s4(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=Fie(t),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(o=r.value,e.next(o),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Of(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function w4(t,e){return e===void 0&&(e=0),n0(function(n,r){n.subscribe(Sy(r,function(i){return Of(r,t,function(){return r.next(i)},e)},function(){return Of(r,t,function(){return r.complete()},e)},function(i){return Of(r,t,function(){return r.error(i)},e)}))})}function S4(t,e){return e===void 0&&(e=0),n0(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function dse(t,e){return r0(t).pipe(S4(e),w4(e))}function fse(t,e){return r0(t).pipe(S4(e),w4(e))}function hse(t,e){return new Hs(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function pse(t,e){return new Hs(function(n){var r;return Of(n,e,function(){r=t[g4](),Of(n,e,function(){var i,s,o;try{i=r.next(),s=i.value,o=i.done}catch(a){n.error(a);return}o?n.complete():n.next(s)},0,!0)}),function(){return ci(r==null?void 0:r.return)&&r.return()}})}function C4(t,e){if(!t)throw new Error("Iterable cannot be null");return new Hs(function(n){Of(n,e,function(){var r=t[Symbol.asyncIterator]();Of(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function mse(t,e){return C4(y4(t),e)}function gse(t,e){if(t!=null){if(h4(t))return dse(t,e);if(d4(t))return hse(t,e);if(f4(t))return fse(t,e);if(p4(t))return C4(t,e);if(v4(t))return pse(t,e);if(b4(t))return mse(t,e)}throw m4(t)}function vse(t,e){return e?gse(t,e):r0(t)}K_(function(t){return function(e){e===void 0&&(e=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}});function k4(t,e){return n0(function(n,r){var i=0;n.subscribe(Sy(r,function(s){r.next(t.call(e,s,i++))}))})}function yse(t,e,n,r,i,s,o,a){var c=[],d=0,h=0,p=!1,y=function(){p&&!c.length&&!d&&e.complete()},S=function(C){return d<r?k(C):c.push(C)},k=function(C){d++;var E=!1;r0(n(C,h++)).subscribe(Sy(e,function(_){e.next(_)},function(){E=!0},void 0,function(){if(E)try{d--;for(var _=function(){var A=c.shift();o||k(A)};c.length&&d<r;)_();y()}catch(A){e.error(A)}}))};return t.subscribe(Sy(e,S,function(){p=!0,y()})),function(){}}function T4(t,e,n){return n===void 0&&(n=1/0),ci(e)?T4(function(r,i){return k4(function(s,o){return e(r,s,i,o)})(r0(t(r,i)))},n):(typeof e=="number"&&(n=e),n0(function(r,i){return yse(r,i,t,n)}))}function bse(t){return T4(c4,t)}function xse(){return bse(1)}function wse(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return xse()(vse(t,rse(t)))}function Sse(t,e){return n0(function(n,r){var i=0;n.subscribe(Sy(r,function(s){return t.call(e,s,i++)&&r.next(s)}))})}var E4=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(d){i(d)}},o=c=>{try{a(n.throw(c))}catch(d){i(d)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())}),Cse="lk",kse=[Ie.ConnectionStateChanged,Ie.RoomMetadataChanged,Ie.ActiveSpeakersChanged,Ie.ConnectionQualityChanged,Ie.ParticipantConnected,Ie.ParticipantDisconnected,Ie.ParticipantPermissionsChanged,Ie.ParticipantMetadataChanged,Ie.ParticipantNameChanged,Ie.ParticipantAttributesChanged,Ie.TrackMuted,Ie.TrackUnmuted,Ie.TrackPublished,Ie.TrackUnpublished,Ie.TrackStreamStateChanged,Ie.TrackSubscriptionFailed,Ie.TrackSubscriptionPermissionChanged,Ie.TrackSubscriptionStatusChanged];[...kse,Ie.LocalTrackPublished,Ie.LocalTrackUnpublished];Ue.TrackPublished,Ue.TrackUnpublished,Ue.TrackMuted,Ue.TrackUnmuted,Ue.TrackStreamStateChanged,Ue.TrackSubscribed,Ue.TrackUnsubscribed,Ue.TrackSubscriptionPermissionChanged,Ue.TrackSubscriptionFailed,Ue.LocalTrackPublished,Ue.LocalTrackUnpublished;var Tse=[Ue.ConnectionQualityChanged,Ue.IsSpeakingChanged,Ue.ParticipantMetadataChanged,Ue.ParticipantPermissionsChanged,Ue.TrackMuted,Ue.TrackUnmuted,Ue.TrackPublished,Ue.TrackUnpublished,Ue.TrackStreamStateChanged,Ue.TrackSubscriptionFailed,Ue.TrackSubscriptionPermissionChanged,Ue.TrackSubscriptionStatusChanged];[...Tse,Ue.LocalTrackPublished,Ue.LocalTrackUnpublished];var sm=Die.getLogger("lk-components-js");sm.setDefaultLevel("WARN");function Ese(t){return`${Cse}-${t}`}function _se(t,e){return new Hs(n=>{const r=(...i)=>{n.next(i)};return t.on(e,r),()=>{t.off(e,r)}})}function Rse(t,e,n=!0){const r=new Hs(s=>{Mm.getLocalDevices(t,n).then(o=>{s.next(o),s.complete()}).catch(o=>{e==null||e(o),s.next([]),s.complete()})}),i=new Hs(s=>{var o;const a=()=>E4(this,null,function*(){try{const c=yield Mm.getLocalDevices(t,n);s.next(c)}catch(c){e==null||e(c)}});if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(o=navigator==null?void 0:navigator.mediaDevices)==null||o.addEventListener("devicechange",a)}return()=>{var c;(c=navigator==null?void 0:navigator.mediaDevices)==null||c.removeEventListener("devicechange",a)}});return wse(r,i)}function Pse(t,e){return _se(t,Ie.ActiveDeviceChanged).pipe(Sse(([n])=>n===e),k4(([n,r])=>(sm.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:r}),r)))}function Ase(t,e,n){const r=new Qie(void 0),i=Pse(e,t),s=(o,...a)=>E4(this,[o,...a],function*(c,d={}){var h,p,y;if(e){const S=$s();if(t==="audiooutput"&&((S==null?void 0:S.name)==="Safari"||(S==null?void 0:S.os)==="iOS")){sm.warn("Switching audio output device is not supported on Safari and iOS.");return}sm.debug(`Switching active device of kind "${t}" with id ${c}.`),yield e.switchActiveDevice(t,c,d.exact);const k=(h=e.getActiveDevice(t))!=null?h:c;k!==c&&c!=="default"&&sm.info(`We tried to select the device with id (${c}), but the browser decided to select the device with id (${k}) instead.`);let C;t==="audioinput"?C=(p=e.localParticipant.getTrackPublication(_e.Source.Microphone))==null?void 0:p.track:t==="videoinput"&&(C=(y=e.localParticipant.getTrackPublication(_e.Source.Camera))==null?void 0:y.track);const E=c==="default"&&!C||c==="default"&&(C==null?void 0:C.mediaStreamTrack.label.startsWith("Default"));r.next(E?c:k)}});return{className:Ese("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:s}}v.createContext(void 0);v.createContext(void 0);v.createContext(void 0);const Ise=v.createContext(void 0);function Nse(){return v.useContext(Ise)}v.createContext(void 0);function Mse(t,e,n=!0){const[r,i]=v.useState(e);return v.useEffect(()=>{if(n&&i(e),typeof window>"u"||!t)return;const s=t.subscribe(i);return()=>s.unsubscribe()},[t,n]),r}function ww({kind:t,room:e,track:n,requestPermissions:r,onError:i}){const s=Nse(),o=v.useMemo(()=>e??s??new Mm,[e,s]),a=v.useMemo(()=>Rse(t,i,r),[t,r,i]),c=Mse(a,[]),[d,h]=v.useState((o==null?void 0:o.getActiveDevice(t))??"default"),{className:p,activeDeviceObservable:y,setActiveMediaDevice:S}=v.useMemo(()=>Ase(t,o),[t,o,n]);return v.useEffect(()=>{const k=y.subscribe(C=>{C&&(sm.info("setCurrentDeviceId",C),h(C))});return()=>{k==null||k.unsubscribe()}},[y]),{devices:c,className:p,activeDeviceId:d,setActiveMediaDevice:S}}const Ose=()=>{const{devices:t,activeDeviceId:e}=ww({kind:"audioinput"}),{devices:n,activeDeviceId:r,setActiveMediaDevice:i}=ww({kind:"videoinput"});v.useEffect(()=>{if(n.length>0&&(!r||r==="default")){const d=n[0];i(d.deviceId)}},[n,r,i]);const s=t.find(d=>d.deviceId===e),o=n.find(d=>d.deviceId===r),a=(s==null?void 0:s.label)||"Select an audio device",c=(o==null?void 0:o.label)||"Select a video device";return b.jsx("div",{className:"flex flex-col gap-12",children:b.jsxs("div",{className:"flex flex-col gap-12 p-12 border border-slate-200 rounded-8",children:[b.jsx("span",{className:"text-sm font-medium",children:"Media Device Permissions"}),b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx("span",{className:"text-sm",children:"Audio: "}),b.jsxs(zI,{children:[b.jsx(WI,{className:"w-[300px]",children:b.jsx($I,{defaultValue:e,placeholder:a})}),b.jsx(HI,{children:t.map(d=>b.jsx(qI,{value:d.deviceId,children:d.label},d.deviceId))})]})]}),b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx("span",{className:"text-sm",children:"Video: "}),b.jsxs(zI,{children:[b.jsx(WI,{className:"w-[300px]",children:b.jsx($I,{defaultValue:r,placeholder:c})}),b.jsx(HI,{children:n.map(d=>b.jsx(qI,{value:d.deviceId,children:d.label},d.deviceId))})]})]})]})})},Dse=()=>{const t="flex flex-col gap-12 border border-slate-200 rounded-8 p-12";return b.jsxs("div",{className:"flex flex-col gap-8",children:[b.jsx("div",{className:t,children:b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsxs(gy,{children:[b.jsx(vy,{asChild:!0,children:b.jsx(Sm,{size:16,className:"text-purple-500"})}),b.jsx(Am,{side:"left",children:"When enabled, everyone in the room can send messages."})]}),b.jsx("span",{className:"text-sm font-medium",children:"Let everyone send messages"})]})}),b.jsx("div",{className:t,children:b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsxs(gy,{children:[b.jsx(vy,{asChild:!0,children:b.jsx(Sm,{size:16,className:"text-purple-500"})}),b.jsx(Am,{side:"left",children:"When enabled, all members can share their screen."})]}),b.jsx("span",{className:"text-sm font-medium",children:"Allow members to share their screen"})]})})]})},_4=()=>{const{settings:t}=zw(),[e,n]=v.useState("invitation"),{pathname:r}=qs(),i=r.split("/")[2],s=ki.get("rsCookie"),{data:o}=po({queryKey:["me",i],queryFn:()=>qy(i,s),enabled:!!i&&!!s}),a=o==null?void 0:o.isHost,c=()=>{switch(e){case"media":return b.jsx(Ose,{});case"invitation":return a!==void 0&&b.jsx(EZ,{roomID:i,isHost:a,settings:t||{invitation_expiry:"30",invite_permission:!1}});case"nft":return b.jsx(_Z,{});case"chat":return b.jsx(uY,{});case"permissions":return b.jsx(Dse,{});default:return null}},d=()=>{switch(e){case"media":return"Configure your camera and microphone devices";case"invitation":return a?"Manage room invitation settings and permissions":"View current invitation settings set by the host";case"chat":return"Configure conversation settings";case"nft":return"Configure NFT login access";case"permissions":return a?"Manage various permissions for room members":"View current room permissions set by the host"}},h=li("flex items-center p-12 rounded-full bg-gray-100 hover:bg-gray-200 duration-300 ease-in-out cursor-pointer hover:scale-105",{"border border-slate-200":!r.includes("/call")}),p=S=>li("flex items-center w-full px-8 py-4 text-md cursor-pointer rounded-4 duration-150 ease-in-out",{"bg-black text-white":S,"hover:bg-slate-100":!S}),y=(t==null?void 0:t.strict_mode)||!1;return b.jsxs(Jy,{children:[b.jsx(Jw,{children:b.jsx("div",{className:h,children:b.jsx(gA,{size:16})})}),b.jsxs(Km,{className:"max-w-[600px]",children:[b.jsx(Gm,{children:b.jsxs(Ym,{children:[b.jsxs("div",{className:"flex items-center gap-28",children:[b.jsxs("div",{className:"flex items-center gap-4",children:["Settings ",b.jsx(gA,{className:"size-16"})]}),y&&b.jsxs("div",{className:"flex items-center gap-4 text-xs text-yellow-500",children:[b.jsx(Hm,{size:12,className:"text-yellow-500"}),b.jsx("span",{children:"Strict mode is enabled."})]})]}),b.jsx(Bs,{className:"w-full mt-8"})]})}),b.jsxs("div",{className:"flex h-[340px] mt-16",children:[b.jsxs("div",{className:"flex flex-col gap-4 w-[140px]",children:[b.jsx("div",{className:p(e==="media"),onClick:()=>n("media"),children:b.jsx("span",{className:"text-sm",children:"Media Devices"})}),b.jsx("div",{className:p(e==="invitation"),onClick:()=>n("invitation"),children:b.jsx("span",{className:"text-sm",children:"Invitation"})}),b.jsx("div",{className:p(e==="chat"),onClick:()=>n("chat"),children:b.jsx("span",{className:"text-sm",children:"Conversation"})}),b.jsx("div",{className:p(e==="nft"),onClick:()=>n("nft"),children:b.jsx("span",{className:"text-sm",children:"NFT Access"})}),b.jsx("div",{className:p(e==="permissions"),onClick:()=>n("permissions"),children:b.jsx("span",{className:"text-sm",children:"Permissions"})})]}),b.jsx(Bs,{orientation:"vertical",className:"ml-12 mr-16"}),b.jsxs("div",{className:"flex flex-col flex-1 gap-12",children:[b.jsxs("div",{className:"flex flex-col gap-4",children:[b.jsx("span",{className:"text-sm",children:d()}),b.jsx(Bs,{})]}),b.jsxs("div",{className:"flex flex-col gap-12",children:[b.jsx(cY,{isHost:a,settingsPanel:e}),c()]})]})]})]})]})},Ik=({children:t})=>{const e=Ia(),{id:n}=Jf();return n?(v.useEffect(()=>{if(!nq(n)){e("/whoops");return}j9(n)},[n,e]),b.jsxs(b.Fragment,{children:[t||b.jsx(wW,{}),b.jsx(GG,{})]})):null};function Lse(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const jse=t=>{switch(t){case"success":return Vse;case"info":return zse;case"warning":return Bse;case"error":return $se;default:return null}},Fse=Array(12).fill(0),Use=({visible:t,className:e})=>Pe.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Pe.createElement("div",{className:"sonner-spinner"},Fse.map((n,r)=>Pe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Vse=Pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Bse=Pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Pe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),zse=Pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),$se=Pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Wse=Pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Pe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Pe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Hse=()=>{const[t,e]=Pe.useState(document.hidden);return Pe.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let I1=1;class qse{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:I1++,o=this.toasts.find(c=>c.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(c=>c.id===s?(this.publish({...c,...e,id:s,title:r}),{...c,...e,id:s,dismissible:a,title:r}):c):this.addToast({title:r,...i,dismissible:a,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let s=r!==void 0,o;const a=i.then(async d=>{if(o=["resolve",d],Pe.isValidElement(d))s=!1,this.create({id:r,type:"default",message:d});else if(Gse(d)&&!d.ok){s=!1;const p=typeof n.error=="function"?await n.error(`HTTP error! status: ${d.status}`):n.error,y=typeof n.description=="function"?await n.description(`HTTP error! status: ${d.status}`):n.description,k=typeof p=="object"&&!Pe.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:y,...k})}else if(d instanceof Error){s=!1;const p=typeof n.error=="function"?await n.error(d):n.error,y=typeof n.description=="function"?await n.description(d):n.description,k=typeof p=="object"&&!Pe.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:y,...k})}else if(n.success!==void 0){s=!1;const p=typeof n.success=="function"?await n.success(d):n.success,y=typeof n.description=="function"?await n.description(d):n.description,k=typeof p=="object"&&!Pe.isValidElement(p)?p:{message:p};this.create({id:r,type:"success",description:y,...k})}}).catch(async d=>{if(o=["reject",d],n.error!==void 0){s=!1;const h=typeof n.error=="function"?await n.error(d):n.error,p=typeof n.description=="function"?await n.description(d):n.description,S=typeof h=="object"&&!Pe.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...S})}}).finally(()=>{s&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),c=()=>new Promise((d,h)=>a.then(()=>o[0]==="reject"?h(o[1]):d(o[1])).catch(h));return typeof r!="string"&&typeof r!="number"?{unwrap:c}:Object.assign(r,{unwrap:c})},this.custom=(e,n)=>{const r=(n==null?void 0:n.id)||I1++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ms=new qse,Kse=(t,e)=>{const n=(e==null?void 0:e.id)||I1++;return Ms.addToast({title:t,...e,id:n}),n},Gse=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Yse=Kse,Qse=()=>Ms.toasts,Jse=()=>Ms.getActiveToasts(),Gb=Object.assign(Yse,{success:Ms.success,info:Ms.info,warning:Ms.warning,error:Ms.error,custom:Ms.custom,message:Ms.message,promise:Ms.promise,dismiss:Ms.dismiss,loading:Ms.loading},{getHistory:Qse,getToasts:Jse});Lse("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Yb(t){return t.label!==void 0}const Xse=3,Zse="24px",eoe="16px",sM=4e3,toe=356,noe=14,roe=45,ioe=200;function ll(...t){return t.filter(Boolean).join(" ")}function soe(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const ooe=t=>{var e,n,r,i,s,o,a,c,d;const{invert:h,toast:p,unstyled:y,interacting:S,setHeights:k,visibleToasts:C,heights:E,index:_,toasts:A,expanded:M,removeToast:I,defaultRichColors:N,closeButton:O,style:j,cancelButtonStyle:V,actionButtonStyle:$,className:W="",descriptionClassName:J="",duration:Y,position:pe,gap:fe,expandByDefault:Ee,classNames:le,icons:Se,closeButtonAriaLabel:q="Close toast"}=t,[te,ae]=Pe.useState(null),[B,de]=Pe.useState(null),[se,me]=Pe.useState(!1),[Te,Re]=Pe.useState(!1),[ie,be]=Pe.useState(!1),[Le,$e]=Pe.useState(!1),[Je,pt]=Pe.useState(!1),[Et,wt]=Pe.useState(0),[_n,er]=Pe.useState(0),dn=Pe.useRef(p.duration||Y||sM),tn=Pe.useRef(null),Nn=Pe.useRef(null),Q=_===0,ce=_+1<=C,ve=p.type,qe=p.dismissible!==!1,Ge=p.className||"",Be=p.descriptionClassName||"",Ze=Pe.useMemo(()=>E.findIndex(Dt=>Dt.toastId===p.id)||0,[E,p.id]),kt=Pe.useMemo(()=>{var Dt;return(Dt=p.closeButton)!=null?Dt:O},[p.closeButton,O]),Ft=Pe.useMemo(()=>p.duration||Y||sM,[p.duration,Y]),We=Pe.useRef(0),Ut=Pe.useRef(0),Qt=Pe.useRef(0),hn=Pe.useRef(null),[Hn,It]=pe.split("-"),xn=Pe.useMemo(()=>E.reduce((Dt,Vn,Yn)=>Yn>=Ze?Dt:Dt+Vn.height,0),[E,Ze]),Rn=Hse(),sr=p.invert||h,Br=ve==="loading";Ut.current=Pe.useMemo(()=>Ze*fe+xn,[Ze,xn]),Pe.useEffect(()=>{dn.current=Ft},[Ft]),Pe.useEffect(()=>{me(!0)},[]),Pe.useEffect(()=>{const Dt=Nn.current;if(Dt){const Vn=Dt.getBoundingClientRect().height;return er(Vn),k(Yn=>[{toastId:p.id,height:Vn,position:p.position},...Yn]),()=>k(Yn=>Yn.filter(Ir=>Ir.toastId!==p.id))}},[k,p.id]),Pe.useLayoutEffect(()=>{if(!se)return;const Dt=Nn.current,Vn=Dt.style.height;Dt.style.height="auto";const Yn=Dt.getBoundingClientRect().height;Dt.style.height=Vn,er(Yn),k(Ir=>Ir.find(G=>G.toastId===p.id)?Ir.map(G=>G.toastId===p.id?{...G,height:Yn}:G):[{toastId:p.id,height:Yn,position:p.position},...Ir])},[se,p.title,p.description,k,p.id,p.jsx,p.action,p.cancel]);const cr=Pe.useCallback(()=>{Re(!0),wt(Ut.current),k(Dt=>Dt.filter(Vn=>Vn.toastId!==p.id)),setTimeout(()=>{I(p)},ioe)},[p,I,k,Ut]);Pe.useEffect(()=>{if(p.promise&&ve==="loading"||p.duration===1/0||p.type==="loading")return;let Dt;return M||S||Rn?(()=>{if(Qt.current<We.current){const Ir=new Date().getTime()-We.current;dn.current=dn.current-Ir}Qt.current=new Date().getTime()})():(()=>{dn.current!==1/0&&(We.current=new Date().getTime(),Dt=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),cr()},dn.current))})(),()=>clearTimeout(Dt)},[M,S,p,ve,Rn,cr]),Pe.useEffect(()=>{p.delete&&(cr(),p.onDismiss==null||p.onDismiss.call(p,p))},[cr,p.delete]);function Jo(){var Dt;if(Se!=null&&Se.loading){var Vn;return Pe.createElement("div",{className:ll(le==null?void 0:le.loader,p==null||(Vn=p.classNames)==null?void 0:Vn.loader,"sonner-loader"),"data-visible":ve==="loading"},Se.loading)}return Pe.createElement(Use,{className:ll(le==null?void 0:le.loader,p==null||(Dt=p.classNames)==null?void 0:Dt.loader),visible:ve==="loading"})}const Ks=p.icon||(Se==null?void 0:Se[ve])||jse(ve);var Ki,Ol;return Pe.createElement("li",{tabIndex:0,ref:Nn,className:ll(W,Ge,le==null?void 0:le.toast,p==null||(e=p.classNames)==null?void 0:e.toast,le==null?void 0:le.default,le==null?void 0:le[ve],p==null||(n=p.classNames)==null?void 0:n[ve]),"data-sonner-toast":"","data-rich-colors":(Ki=p.richColors)!=null?Ki:N,"data-styled":!(p.jsx||p.unstyled||y),"data-mounted":se,"data-promise":!!p.promise,"data-swiped":Je,"data-removed":Te,"data-visible":ce,"data-y-position":Hn,"data-x-position":It,"data-index":_,"data-front":Q,"data-swiping":ie,"data-dismissible":qe,"data-type":ve,"data-invert":sr,"data-swipe-out":Le,"data-swipe-direction":B,"data-expanded":!!(M||Ee&&se),"data-testid":p.testId,style:{"--index":_,"--toasts-before":_,"--z-index":A.length-_,"--offset":`${Te?Et:Ut.current}px`,"--initial-height":Ee?"auto":`${_n}px`,...j,...p.style},onDragEnd:()=>{be(!1),ae(null),hn.current=null},onPointerDown:Dt=>{Dt.button!==2&&(Br||!qe||(tn.current=new Date,wt(Ut.current),Dt.target.setPointerCapture(Dt.pointerId),Dt.target.tagName!=="BUTTON"&&(be(!0),hn.current={x:Dt.clientX,y:Dt.clientY})))},onPointerUp:()=>{var Dt,Vn,Yn;if(Le||!qe)return;hn.current=null;const Ir=Number(((Dt=Nn.current)==null?void 0:Dt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),bo=Number(((Vn=Nn.current)==null?void 0:Vn.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),G=new Date().getTime()-((Yn=tn.current)==null?void 0:Yn.getTime()),re=te==="x"?Ir:bo,we=Math.abs(re)/G;if(Math.abs(re)>=roe||we>.11){wt(Ut.current),p.onDismiss==null||p.onDismiss.call(p,p),de(te==="x"?Ir>0?"right":"left":bo>0?"down":"up"),cr(),$e(!0);return}else{var Oe,He;(Oe=Nn.current)==null||Oe.style.setProperty("--swipe-amount-x","0px"),(He=Nn.current)==null||He.style.setProperty("--swipe-amount-y","0px")}pt(!1),be(!1),ae(null)},onPointerMove:Dt=>{var Vn,Yn,Ir;if(!hn.current||!qe||((Vn=window.getSelection())==null?void 0:Vn.toString().length)>0)return;const G=Dt.clientY-hn.current.y,re=Dt.clientX-hn.current.x;var we;const Oe=(we=t.swipeDirections)!=null?we:soe(pe);!te&&(Math.abs(re)>1||Math.abs(G)>1)&&ae(Math.abs(re)>Math.abs(G)?"x":"y");let He={x:0,y:0};const ct=st=>1/(1.5+Math.abs(st)/20);if(te==="y"){if(Oe.includes("top")||Oe.includes("bottom"))if(Oe.includes("top")&&G<0||Oe.includes("bottom")&&G>0)He.y=G;else{const st=G*ct(G);He.y=Math.abs(st)<Math.abs(G)?st:G}}else if(te==="x"&&(Oe.includes("left")||Oe.includes("right")))if(Oe.includes("left")&&re<0||Oe.includes("right")&&re>0)He.x=re;else{const st=re*ct(re);He.x=Math.abs(st)<Math.abs(re)?st:re}(Math.abs(He.x)>0||Math.abs(He.y)>0)&&pt(!0),(Yn=Nn.current)==null||Yn.style.setProperty("--swipe-amount-x",`${He.x}px`),(Ir=Nn.current)==null||Ir.style.setProperty("--swipe-amount-y",`${He.y}px`)}},kt&&!p.jsx&&ve!=="loading"?Pe.createElement("button",{"aria-label":q,"data-disabled":Br,"data-close-button":!0,onClick:Br||!qe?()=>{}:()=>{cr(),p.onDismiss==null||p.onDismiss.call(p,p)},className:ll(le==null?void 0:le.closeButton,p==null||(r=p.classNames)==null?void 0:r.closeButton)},(Ol=Se==null?void 0:Se.close)!=null?Ol:Wse):null,(ve||p.icon||p.promise)&&p.icon!==null&&((Se==null?void 0:Se[ve])!==null||p.icon)?Pe.createElement("div",{"data-icon":"",className:ll(le==null?void 0:le.icon,p==null||(i=p.classNames)==null?void 0:i.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Jo():null,p.type!=="loading"?Ks:null):null,Pe.createElement("div",{"data-content":"",className:ll(le==null?void 0:le.content,p==null||(s=p.classNames)==null?void 0:s.content)},Pe.createElement("div",{"data-title":"",className:ll(le==null?void 0:le.title,p==null||(o=p.classNames)==null?void 0:o.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?Pe.createElement("div",{"data-description":"",className:ll(J,Be,le==null?void 0:le.description,p==null||(a=p.classNames)==null?void 0:a.description)},typeof p.description=="function"?p.description():p.description):null),Pe.isValidElement(p.cancel)?p.cancel:p.cancel&&Yb(p.cancel)?Pe.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||V,onClick:Dt=>{Yb(p.cancel)&&qe&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,Dt),cr())},className:ll(le==null?void 0:le.cancelButton,p==null||(c=p.classNames)==null?void 0:c.cancelButton)},p.cancel.label):null,Pe.isValidElement(p.action)?p.action:p.action&&Yb(p.action)?Pe.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||$,onClick:Dt=>{Yb(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,Dt),!Dt.defaultPrevented&&cr())},className:ll(le==null?void 0:le.actionButton,p==null||(d=p.classNames)==null?void 0:d.actionButton)},p.action.label):null)};function oM(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function aoe(t,e){const n={};return[t,e].forEach((r,i)=>{const s=i===1,o=s?"--mobile-offset":"--offset",a=s?eoe:Zse;function c(d){["top","right","bottom","left"].forEach(h=>{n[`${o}-${h}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?n[`${o}-${d}`]=a:n[`${o}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):c(a)}),n}const loe=Pe.forwardRef(function(e,n){const{id:r,invert:i,position:s="bottom-right",hotkey:o=["altKey","KeyT"],expand:a,closeButton:c,className:d,offset:h,mobileOffset:p,theme:y="light",richColors:S,duration:k,style:C,visibleToasts:E=Xse,toastOptions:_,dir:A=oM(),gap:M=noe,icons:I,containerAriaLabel:N="Notifications"}=e,[O,j]=Pe.useState([]),V=Pe.useMemo(()=>r?O.filter(se=>se.toasterId===r):O.filter(se=>!se.toasterId),[O,r]),$=Pe.useMemo(()=>Array.from(new Set([s].concat(V.filter(se=>se.position).map(se=>se.position)))),[V,s]),[W,J]=Pe.useState([]),[Y,pe]=Pe.useState(!1),[fe,Ee]=Pe.useState(!1),[le,Se]=Pe.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),q=Pe.useRef(null),te=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),ae=Pe.useRef(null),B=Pe.useRef(!1),de=Pe.useCallback(se=>{j(me=>{var Te;return(Te=me.find(Re=>Re.id===se.id))!=null&&Te.delete||Ms.dismiss(se.id),me.filter(({id:Re})=>Re!==se.id)})},[]);return Pe.useEffect(()=>Ms.subscribe(se=>{if(se.dismiss){requestAnimationFrame(()=>{j(me=>me.map(Te=>Te.id===se.id?{...Te,delete:!0}:Te))});return}setTimeout(()=>{HD.flushSync(()=>{j(me=>{const Te=me.findIndex(Re=>Re.id===se.id);return Te!==-1?[...me.slice(0,Te),{...me[Te],...se},...me.slice(Te+1)]:[se,...me]})})})}),[O]),Pe.useEffect(()=>{if(y!=="system"){Se(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Se("dark"):Se("light")),typeof window>"u")return;const se=window.matchMedia("(prefers-color-scheme: dark)");try{se.addEventListener("change",({matches:me})=>{Se(me?"dark":"light")})}catch{se.addListener(({matches:Te})=>{try{Se(Te?"dark":"light")}catch(Re){console.error(Re)}})}},[y]),Pe.useEffect(()=>{O.length<=1&&pe(!1)},[O]),Pe.useEffect(()=>{const se=me=>{var Te;if(o.every(be=>me[be]||me.code===be)){var ie;pe(!0),(ie=q.current)==null||ie.focus()}me.code==="Escape"&&(document.activeElement===q.current||(Te=q.current)!=null&&Te.contains(document.activeElement))&&pe(!1)};return document.addEventListener("keydown",se),()=>document.removeEventListener("keydown",se)},[o]),Pe.useEffect(()=>{if(q.current)return()=>{ae.current&&(ae.current.focus({preventScroll:!0}),ae.current=null,B.current=!1)}},[q.current]),Pe.createElement("section",{ref:n,"aria-label":`${N} ${te}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},$.map((se,me)=>{var Te;const[Re,ie]=se.split("-");return V.length?Pe.createElement("ol",{key:se,dir:A==="auto"?oM():A,tabIndex:-1,ref:q,className:d,"data-sonner-toaster":!0,"data-sonner-theme":le,"data-y-position":Re,"data-x-position":ie,style:{"--front-toast-height":`${((Te=W[0])==null?void 0:Te.height)||0}px`,"--width":`${toe}px`,"--gap":`${M}px`,...C,...aoe(h,p)},onBlur:be=>{B.current&&!be.currentTarget.contains(be.relatedTarget)&&(B.current=!1,ae.current&&(ae.current.focus({preventScroll:!0}),ae.current=null))},onFocus:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||B.current||(B.current=!0,ae.current=be.relatedTarget)},onMouseEnter:()=>pe(!0),onMouseMove:()=>pe(!0),onMouseLeave:()=>{fe||pe(!1)},onDragEnd:()=>pe(!1),onPointerDown:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||Ee(!0)},onPointerUp:()=>Ee(!1)},V.filter(be=>!be.position&&me===0||be.position===se).map((be,Le)=>{var $e,Je;return Pe.createElement(ooe,{key:be.id,icons:I,index:Le,toast:be,defaultRichColors:S,duration:($e=_==null?void 0:_.duration)!=null?$e:k,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:i,visibleToasts:E,closeButton:(Je=_==null?void 0:_.closeButton)!=null?Je:c,interacting:fe,position:se,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,closeButtonAriaLabel:_==null?void 0:_.closeButtonAriaLabel,removeToast:de,toasts:V.filter(pt=>pt.position==be.position),heights:W.filter(pt=>pt.position==be.position),setHeights:J,expandByDefault:a,gap:M,expanded:Y,swipeDirections:e.swipeDirections})})):null}))}),Q_=v.createContext({});function J_(t){const e=v.useRef(null);return e.current===null&&(e.current=t()),e.current}const X_=typeof window<"u",R4=X_?v.useLayoutEffect:v.useEffect,ES=v.createContext(null);function Z_(t,e){t.indexOf(e)===-1&&t.push(e)}function eR(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Nc=(t,e,n)=>n>e?e:n<t?t:n;let tR=()=>{};const Mc={},P4=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function A4(t){return typeof t=="object"&&t!==null}const I4=t=>/^0[^.\s]+$/u.test(t);function nR(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ko=t=>t,coe=(t,e)=>n=>e(t(n)),i0=(...t)=>t.reduce(coe),Cy=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class rR{constructor(){this.subscriptions=[]}add(e){return Z_(this.subscriptions,e),()=>eR(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Cl=t=>t*1e3,qo=t=>t/1e3;function N4(t,e){return e?t*(1e3/e):0}const M4=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,uoe=1e-7,doe=12;function foe(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=M4(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>uoe&&++a<doe);return o}function s0(t,e,n,r){if(t===e&&n===r)return Ko;const i=s=>foe(s,0,1,t,n);return s=>s===0||s===1?s:M4(i(s),e,r)}const O4=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,D4=t=>e=>1-t(1-e),L4=s0(.33,1.53,.69,.99),iR=D4(L4),j4=O4(iR),F4=t=>(t*=2)<1?.5*iR(t):.5*(2-Math.pow(2,-10*(t-1))),sR=t=>1-Math.sin(Math.acos(t)),U4=D4(sR),V4=O4(sR),hoe=s0(.42,0,1,1),poe=s0(0,0,.58,1),B4=s0(.42,0,.58,1),moe=t=>Array.isArray(t)&&typeof t[0]!="number",z4=t=>Array.isArray(t)&&typeof t[0]=="number",goe={linear:Ko,easeIn:hoe,easeInOut:B4,easeOut:poe,circIn:sR,circInOut:V4,circOut:U4,backIn:iR,backInOut:j4,backOut:L4,anticipate:F4},voe=t=>typeof t=="string",aM=t=>{if(z4(t)){tR(t.length===4);const[e,n,r,i]=t;return s0(e,n,r,i)}else if(voe(t))return goe[t];return t},Qb=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function yoe(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function c(h){o.has(h)&&(d.schedule(h),t()),h(a)}const d={schedule:(h,p=!1,y=!1)=>{const k=y&&i?n:r;return p&&o.add(h),k.has(h)||k.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(a=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,s&&(s=!1,d.process(h))}};return d}const boe=40;function $4(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Qb.reduce((M,I)=>(M[I]=yoe(s),M),{}),{setup:a,read:c,resolveKeyframes:d,preUpdate:h,update:p,preRender:y,render:S,postRender:k}=o,C=()=>{const M=Mc.useManualTiming?i.timestamp:performance.now();n=!1,Mc.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(M-i.timestamp,boe),1)),i.timestamp=M,i.isProcessing=!0,a.process(i),c.process(i),d.process(i),h.process(i),p.process(i),y.process(i),S.process(i),k.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(C))},E=()=>{n=!0,r=!0,i.isProcessing||t(C)};return{schedule:Qb.reduce((M,I)=>{const N=o[I];return M[I]=(O,j=!1,V=!1)=>(n||E(),N.schedule(O,j,V)),M},{}),cancel:M=>{for(let I=0;I<Qb.length;I++)o[Qb[I]].cancel(M)},state:i,steps:o}}const{schedule:lr,cancel:ad,state:Oi,steps:Nk}=$4(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ko,!0);let Ax;function xoe(){Ax=void 0}const Fs={now:()=>(Ax===void 0&&Fs.set(Oi.isProcessing||Mc.useManualTiming?Oi.timestamp:performance.now()),Ax),set:t=>{Ax=t,queueMicrotask(xoe)}},W4=t=>e=>typeof e=="string"&&e.startsWith(t),oR=W4("--"),woe=W4("var(--"),aR=t=>woe(t)?Soe.test(t.split("/*")[0].trim()):!1,Soe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,eg={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ky={...eg,transform:t=>Nc(0,1,t)},Jb={...eg,default:1},ey=t=>Math.round(t*1e5)/1e5,lR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Coe(t){return t==null}const koe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,cR=(t,e)=>n=>!!(typeof n=="string"&&koe.test(n)&&n.startsWith(t)||e&&!Coe(n)&&Object.prototype.hasOwnProperty.call(n,e)),H4=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(lR);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Toe=t=>Nc(0,255,t),Mk={...eg,transform:t=>Math.round(Toe(t))},Sf={test:cR("rgb","red"),parse:H4("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Mk.transform(t)+", "+Mk.transform(e)+", "+Mk.transform(n)+", "+ey(ky.transform(r))+")"};function Eoe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const N1={test:cR("#"),parse:Eoe,transform:Sf.transform},o0=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ru=o0("deg"),kl=o0("%"),Lt=o0("px"),_oe=o0("vh"),Roe=o0("vw"),lM={...kl,parse:t=>kl.parse(t)/100,transform:t=>kl.transform(t*100)},Bp={test:cR("hsl","hue"),parse:H4("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+kl.transform(ey(e))+", "+kl.transform(ey(n))+", "+ey(ky.transform(r))+")"},Gr={test:t=>Sf.test(t)||N1.test(t)||Bp.test(t),parse:t=>Sf.test(t)?Sf.parse(t):Bp.test(t)?Bp.parse(t):N1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Sf.transform(t):Bp.transform(t),getAnimatableNone:t=>{const e=Gr.parse(t);return e.alpha=0,Gr.transform(e)}},Poe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Aoe(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(lR))==null?void 0:e.length)||0)+(((n=t.match(Poe))==null?void 0:n.length)||0)>0}const q4="number",K4="color",Ioe="var",Noe="var(",cM="${}",Moe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ty(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(Moe,c=>(Gr.test(c)?(r.color.push(s),i.push(K4),n.push(Gr.parse(c))):c.startsWith(Noe)?(r.var.push(s),i.push(Ioe),n.push(c)):(r.number.push(s),i.push(q4),n.push(parseFloat(c))),++s,cM)).split(cM);return{values:n,split:a,indexes:r,types:i}}function G4(t){return Ty(t).values}function Y4(t){const{split:e,types:n}=Ty(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===q4?s+=ey(i[o]):a===K4?s+=Gr.transform(i[o]):s+=i[o]}return s}}const Ooe=t=>typeof t=="number"?0:Gr.test(t)?Gr.getAnimatableNone(t):t;function Doe(t){const e=G4(t);return Y4(t)(e.map(Ooe))}const ld={test:Aoe,parse:G4,createTransformer:Y4,getAnimatableNone:Doe};function Ok(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Loe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;i=Ok(c,a,t+1/3),s=Ok(c,a,t),o=Ok(c,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Sw(t,e){return n=>n>0?e:t}const gr=(t,e,n)=>t+(e-t)*n,Dk=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},joe=[N1,Sf,Bp],Foe=t=>joe.find(e=>e.test(t));function uM(t){const e=Foe(t);if(!e)return!1;let n=e.parse(t);return e===Bp&&(n=Loe(n)),n}const dM=(t,e)=>{const n=uM(t),r=uM(e);if(!n||!r)return Sw(t,e);const i={...n};return s=>(i.red=Dk(n.red,r.red,s),i.green=Dk(n.green,r.green,s),i.blue=Dk(n.blue,r.blue,s),i.alpha=gr(n.alpha,r.alpha,s),Sf.transform(i))},M1=new Set(["none","hidden"]);function Uoe(t,e){return M1.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Voe(t,e){return n=>gr(t,e,n)}function uR(t){return typeof t=="number"?Voe:typeof t=="string"?aR(t)?Sw:Gr.test(t)?dM:$oe:Array.isArray(t)?Q4:typeof t=="object"?Gr.test(t)?dM:Boe:Sw}function Q4(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>uR(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function Boe(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=uR(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function zoe(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const $oe=(t,e)=>{const n=ld.createTransformer(e),r=Ty(t),i=Ty(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?M1.has(t)&&!i.values.length||M1.has(e)&&!r.values.length?Uoe(t,e):i0(Q4(zoe(r,i),i.values),n):Sw(t,e)};function J4(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?gr(t,e,n):uR(t)(t,e)}const Woe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>lr.update(e,n),stop:()=>ad(e),now:()=>Oi.isProcessing?Oi.timestamp:Fs.now()}},X4=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Cw=2e4;function dR(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Cw;)e+=n,r=t.next(e);return e>=Cw?1/0:e}function Hoe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(dR(r),Cw);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:qo(i)}}const qoe=5;function Z4(t,e,n){const r=Math.max(e-qoe,0);return N4(n-t(r),e-r)}const Tr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fM=.001;function Koe({duration:t=Tr.duration,bounce:e=Tr.bounce,velocity:n=Tr.velocity,mass:r=Tr.mass}){let i,s,o=1-e;o=Nc(Tr.minDamping,Tr.maxDamping,o),t=Nc(Tr.minDuration,Tr.maxDuration,qo(t)),o<1?(i=d=>{const h=d*o,p=h*t,y=h-n,S=O1(d,o),k=Math.exp(-p);return fM-y/S*k},s=d=>{const p=d*o*t,y=p*n+n,S=Math.pow(o,2)*Math.pow(d,2)*t,k=Math.exp(-p),C=O1(Math.pow(d,2),o);return(-i(d)+fM>0?-1:1)*((y-S)*k)/C}):(i=d=>{const h=Math.exp(-d*t),p=(d-n)*t+1;return-.001+h*p},s=d=>{const h=Math.exp(-d*t),p=(n-d)*(t*t);return h*p});const a=5/t,c=Yoe(i,s,a);if(t=Cl(t),isNaN(c))return{stiffness:Tr.stiffness,damping:Tr.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const Goe=12;function Yoe(t,e,n){let r=n;for(let i=1;i<Goe;i++)r=r-t(r)/e(r);return r}function O1(t,e){return t*Math.sqrt(1-e*e)}const Qoe=["duration","bounce"],Joe=["stiffness","damping","mass"];function hM(t,e){return e.some(n=>t[n]!==void 0)}function Xoe(t){let e={velocity:Tr.velocity,stiffness:Tr.stiffness,damping:Tr.damping,mass:Tr.mass,isResolvedFromDuration:!1,...t};if(!hM(t,Joe)&&hM(t,Qoe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Nc(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Tr.mass,stiffness:i,damping:s}}else{const n=Koe(t);e={...e,...n,mass:Tr.mass},e.isResolvedFromDuration=!0}return e}function kw(t=Tr.visualDuration,e=Tr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:c,damping:d,mass:h,duration:p,velocity:y,isResolvedFromDuration:S}=Xoe({...n,velocity:-qo(n.velocity||0)}),k=y||0,C=d/(2*Math.sqrt(c*h)),E=o-s,_=qo(Math.sqrt(c/h)),A=Math.abs(E)<5;r||(r=A?Tr.restSpeed.granular:Tr.restSpeed.default),i||(i=A?Tr.restDelta.granular:Tr.restDelta.default);let M;if(C<1){const N=O1(_,C);M=O=>{const j=Math.exp(-C*_*O);return o-j*((k+C*_*E)/N*Math.sin(N*O)+E*Math.cos(N*O))}}else if(C===1)M=N=>o-Math.exp(-_*N)*(E+(k+_*E)*N);else{const N=_*Math.sqrt(C*C-1);M=O=>{const j=Math.exp(-C*_*O),V=Math.min(N*O,300);return o-j*((k+C*_*E)*Math.sinh(V)+N*E*Math.cosh(V))/N}}const I={calculatedDuration:S&&p||null,next:N=>{const O=M(N);if(S)a.done=N>=p;else{let j=N===0?k:0;C<1&&(j=N===0?Cl(k):Z4(M,N,O));const V=Math.abs(j)<=r,$=Math.abs(o-O)<=i;a.done=V&&$}return a.value=a.done?o:O,a},toString:()=>{const N=Math.min(dR(I),Cw),O=X4(j=>I.next(N*j).value,N,30);return N+"ms "+O},toTransition:()=>{}};return I}kw.applyToOptions=t=>{const e=Hoe(t,100,kw);return t.ease=e.ease,t.duration=Cl(e.duration),t.type="keyframes",t};function D1({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:c,restDelta:d=.5,restSpeed:h}){const p=t[0],y={done:!1,value:p},S=V=>a!==void 0&&V<a||c!==void 0&&V>c,k=V=>a===void 0?c:c===void 0||Math.abs(a-V)<Math.abs(c-V)?a:c;let C=n*e;const E=p+C,_=o===void 0?E:o(E);_!==E&&(C=_-p);const A=V=>-C*Math.exp(-V/r),M=V=>_+A(V),I=V=>{const $=A(V),W=M(V);y.done=Math.abs($)<=d,y.value=y.done?_:W};let N,O;const j=V=>{S(y.value)&&(N=V,O=kw({keyframes:[y.value,k(y.value)],velocity:Z4(M,V,y.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return j(0),{calculatedDuration:null,next:V=>{let $=!1;return!O&&N===void 0&&($=!0,I(V),j(V)),N!==void 0&&V>=N?O.next(V-N):(!$&&I(V),y)}}}function Zoe(t,e,n){const r=[],i=n||Mc.mix||J4,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Ko:e;a=i0(c,a)}r.push(a)}return r}function eae(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(tR(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Zoe(e,r,i),c=a.length,d=h=>{if(o&&h<t[0])return e[0];let p=0;if(c>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const y=Cy(t[p],t[p+1],h);return a[p](y)};return n?h=>d(Nc(t[0],t[s-1],h)):d}function tae(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Cy(0,e,r);t.push(gr(n,1,i))}}function nae(t){const e=[0];return tae(e,t.length-1),e}function rae(t,e){return t.map(n=>n*e)}function iae(t,e){return t.map(()=>e||B4).splice(0,t.length-1)}function ty({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=moe(r)?r.map(aM):aM(r),s={done:!1,value:e[0]},o=rae(n&&n.length===e.length?n:nae(e),t),a=eae(o,e,{ease:Array.isArray(i)?i:iae(e,i)});return{calculatedDuration:t,next:c=>(s.value=a(c),s.done=c>=t,s)}}const sae=t=>t!==null;function fR(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(sae),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const oae={decay:D1,inertia:D1,tween:ty,keyframes:ty,spring:kw};function eV(t){typeof t.type=="string"&&(t.type=oae[t.type])}class hR{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const aae=t=>t/100;class pR extends hR{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Fs.now()&&this.tick(Fs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;eV(e);const{type:n=ty,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const c=n||ty;c!==ty&&typeof a[0]!="number"&&(this.mixKeyframes=i0(aae,J4(a[0],a[1])),a=[0,100]);const d=c({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...a].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=dR(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:p,repeatType:y,repeatDelay:S,type:k,onUpdate:C,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const _=this.currentTime-d*(this.playbackSpeed>=0?1:-1),A=this.playbackSpeed>=0?_<0:_>i;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let M=this.currentTime,I=r;if(p){const V=Math.min(this.currentTime,i)/a;let $=Math.floor(V),W=V%1;!W&&V>=1&&(W=1),W===1&&$--,$=Math.min($,p+1),!!($%2)&&(y==="reverse"?(W=1-W,S&&(W-=S/a)):y==="mirror"&&(I=o)),M=Nc(0,1,W)*a}const N=A?{done:!1,value:h[0]}:I.next(M);s&&(N.value=s(N.value));let{done:O}=N;!A&&c!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return j&&k!==D1&&(N.value=fR(h,this.options,E,this.speed)),C&&C(N.value),j&&this.finish(),N}then(e,n){return this.finished.then(e,n)}get duration(){return qo(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+qo(e)}get time(){return qo(this.currentTime)}set time(e){var n;e=Cl(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Fs.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=qo(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=Woe,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Fs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function lae(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Cf=t=>t*180/Math.PI,L1=t=>{const e=Cf(Math.atan2(t[1],t[0]));return j1(e)},cae={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:L1,rotateZ:L1,skewX:t=>Cf(Math.atan(t[1])),skewY:t=>Cf(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},j1=t=>(t=t%360,t<0&&(t+=360),t),pM=L1,mM=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),gM=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),uae={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:mM,scaleY:gM,scale:t=>(mM(t)+gM(t))/2,rotateX:t=>j1(Cf(Math.atan2(t[6],t[5]))),rotateY:t=>j1(Cf(Math.atan2(-t[2],t[0]))),rotateZ:pM,rotate:pM,skewX:t=>Cf(Math.atan(t[4])),skewY:t=>Cf(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function F1(t){return t.includes("scale")?1:0}function U1(t,e){if(!t||t==="none")return F1(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=uae,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=cae,i=a}if(!i)return F1(e);const s=r[e],o=i[1].split(",").map(fae);return typeof s=="function"?s(o):o[s]}const dae=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return U1(n,e)};function fae(t){return parseFloat(t.trim())}const tg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ng=new Set(tg),vM=t=>t===eg||t===Lt,hae=new Set(["x","y","z"]),pae=tg.filter(t=>!hae.has(t));function mae(t){const e=[];return pae.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Df={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>U1(e,"x"),y:(t,{transform:e})=>U1(e,"y")};Df.translateX=Df.x;Df.translateY=Df.y;const Lf=new Set;let V1=!1,B1=!1,z1=!1;function tV(){if(B1){const t=Array.from(Lf).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=mae(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}B1=!1,V1=!1,Lf.forEach(t=>t.complete(z1)),Lf.clear()}function nV(){Lf.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(B1=!0)})}function gae(){z1=!0,nV(),tV(),z1=!1}class mR{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Lf.add(this),V1||(V1=!0,lr.read(nV),lr.resolveKeyframes(tV))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}lae(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Lf.delete(this)}cancel(){this.state==="scheduled"&&(Lf.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const vae=t=>t.startsWith("--");function yae(t,e,n){vae(e)?t.style.setProperty(e,n):t.style[e]=n}const bae=nR(()=>window.ScrollTimeline!==void 0),xae={};function wae(t,e){const n=nR(t);return()=>xae[e]??n()}const rV=wae(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Wv=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,yM={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wv([0,.65,.55,1]),circOut:Wv([.55,0,1,.45]),backIn:Wv([.31,.01,.66,-.59]),backOut:Wv([.33,1.53,.69,.99])};function iV(t,e){if(t)return typeof t=="function"?rV()?X4(t,e):"ease-out":z4(t)?Wv(t):Array.isArray(t)?t.map(n=>iV(n,e)||yM.easeOut):yM[t]}function Sae(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:c}={},d=void 0){const h={[e]:n};c&&(h.offset=c);const p=iV(a,i);Array.isArray(p)&&(h.easing=p);const y={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(y.pseudoElement=d),t.animate(h,y)}function sV(t){return typeof t=="function"&&"applyToOptions"in t}function Cae({type:t,...e}){return sV(t)&&rV()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class kae extends hR{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:c}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,tR(typeof e.type!="string");const d=Cae(e);this.animation=Sae(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=fR(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):yae(n,r,h),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return qo(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+qo(e)}get time(){return qo(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Cl(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&bae()?(this.animation.timeline=e,Ko):n(this)}}const oV={anticipate:F4,backInOut:j4,circInOut:V4};function Tae(t){return t in oV}function Eae(t){typeof t.ease=="string"&&Tae(t.ease)&&(t.ease=oV[t.ease])}const bM=10;class _ae extends kae{constructor(e){Eae(e),eV(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new pR({...o,autoplay:!1}),c=Cl(this.finishedTime??this.time);n.setWithVelocity(a.sample(c-bM).value,a.sample(c).value,bM),a.stop()}}const xM=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ld.test(t)||t==="0")&&!t.startsWith("url("));function Rae(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Pae(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=xM(i,e),a=xM(s,e);return!o||!a?!1:Rae(t)||(n==="spring"||sV(n))&&r}function $1(t){t.duration=0,t.type="keyframes"}const Aae=new Set(["opacity","clipPath","filter","transform"]),Iae=nR(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Nae(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return Iae()&&n&&Aae.has(n)&&(n!=="transform"||!d)&&!c&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const Mae=40;class Oae extends hR{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:c,motionValue:d,element:h,...p}){var k;super(),this.stop=()=>{var C,E;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=Fs.now();const y={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:c,motionValue:d,element:h,...p},S=(h==null?void 0:h.KeyframeResolver)||mR;this.keyframeResolver=new S(a,(C,E,_)=>this.onKeyframesResolved(C,E,y,!_),c,d,h),(k=this.keyframeResolver)==null||k.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:c,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Fs.now(),Pae(e,s,o,a)||((Mc.instantAnimations||!c)&&(h==null||h(fR(e,r,n))),e[0]=e[e.length-1],$1(r),r.repeat=0);const y={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Mae?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},S=!d&&Nae(y)?new _ae({...y,element:y.motionValue.owner.current}):new pR(y);S.finished.then(()=>this.notifyFinished()).catch(Ko),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),gae()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Dae=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Lae(t){const e=Dae.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function aV(t,e,n=1){const[r,i]=Lae(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return P4(o)?parseFloat(o):o}return aR(i)?aV(i,e,n+1):i}function gR(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const lV=new Set(["width","height","top","left","right","bottom",...tg]),jae={test:t=>t==="auto",parse:t=>t},cV=t=>e=>e.test(t),uV=[eg,Lt,kl,Ru,Roe,_oe,jae],wM=t=>uV.find(cV(t));function Fae(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||I4(t):!0}const Uae=new Set(["brightness","contrast","saturate","opacity"]);function Vae(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(lR)||[];if(!r)return t;const i=n.replace(r,"");let s=Uae.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const Bae=/\b([a-z-]*)\(.*?\)/gu,W1={...ld,getAnimatableNone:t=>{const e=t.match(Bae);return e?e.map(Vae).join(" "):t}},SM={...eg,transform:Math.round},zae={rotate:Ru,rotateX:Ru,rotateY:Ru,rotateZ:Ru,scale:Jb,scaleX:Jb,scaleY:Jb,scaleZ:Jb,skew:Ru,skewX:Ru,skewY:Ru,distance:Lt,translateX:Lt,translateY:Lt,translateZ:Lt,x:Lt,y:Lt,z:Lt,perspective:Lt,transformPerspective:Lt,opacity:ky,originX:lM,originY:lM,originZ:Lt},vR={borderWidth:Lt,borderTopWidth:Lt,borderRightWidth:Lt,borderBottomWidth:Lt,borderLeftWidth:Lt,borderRadius:Lt,radius:Lt,borderTopLeftRadius:Lt,borderTopRightRadius:Lt,borderBottomRightRadius:Lt,borderBottomLeftRadius:Lt,width:Lt,maxWidth:Lt,height:Lt,maxHeight:Lt,top:Lt,right:Lt,bottom:Lt,left:Lt,padding:Lt,paddingTop:Lt,paddingRight:Lt,paddingBottom:Lt,paddingLeft:Lt,margin:Lt,marginTop:Lt,marginRight:Lt,marginBottom:Lt,marginLeft:Lt,backgroundPositionX:Lt,backgroundPositionY:Lt,...zae,zIndex:SM,fillOpacity:ky,strokeOpacity:ky,numOctaves:SM},$ae={...vR,color:Gr,backgroundColor:Gr,outlineColor:Gr,fill:Gr,stroke:Gr,borderColor:Gr,borderTopColor:Gr,borderRightColor:Gr,borderBottomColor:Gr,borderLeftColor:Gr,filter:W1,WebkitFilter:W1},dV=t=>$ae[t];function fV(t,e){let n=dV(t);return n!==W1&&(n=ld),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Wae=new Set(["auto","none","0"]);function Hae(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!Wae.has(s)&&Ty(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=fV(n,i)}class qae extends mR{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),aR(d))){const h=aV(d,n.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!lV.has(r)||e.length!==2)return;const[i,s]=e,o=wM(i),a=wM(s);if(o!==a)if(vM(o)&&vM(a))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else Df[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||Fae(e[i]))&&r.push(i);r.length&&Hae(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Df[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Df[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function Kae(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const hV=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function pV(t){return A4(t)&&"offsetHeight"in t}const CM=30,Gae=t=>!isNaN(parseFloat(t));class Yae{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Fs.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Fs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Gae(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new rR);const r=this.events[e].add(n);return e==="change"?()=>{r(),lr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Fs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>CM)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,CM);return N4(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Dm(t,e){return new Yae(t,e)}const{schedule:yR}=$4(queueMicrotask,!1),va={x:!1,y:!1};function mV(){return va.x||va.y}function Qae(t){return t==="x"||t==="y"?va[t]?null:(va[t]=!0,()=>{va[t]=!1}):va.x||va.y?null:(va.x=va.y=!0,()=>{va.x=va.y=!1})}function gV(t,e){const n=Kae(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function kM(t){return!(t.pointerType==="touch"||mV())}function Jae(t,e,n={}){const[r,i,s]=gV(t,n),o=a=>{if(!kM(a))return;const{target:c}=a,d=e(c,a);if(typeof d!="function"||!c)return;const h=p=>{kM(p)&&(d(p),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const vV=(t,e)=>e?t===e?!0:vV(t,e.parentElement):!1,bR=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Xae=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Zae(t){return Xae.has(t.tagName)||t.tabIndex!==-1}const Ix=new WeakSet;function TM(t){return e=>{e.key==="Enter"&&t(e)}}function Lk(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ele=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=TM(()=>{if(Ix.has(n))return;Lk(n,"down");const i=TM(()=>{Lk(n,"up")}),s=()=>Lk(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function EM(t){return bR(t)&&!mV()}function tle(t,e,n={}){const[r,i,s]=gV(t,n),o=a=>{const c=a.currentTarget;if(!EM(a))return;Ix.add(c);const d=e(c,a),h=(S,k)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",y),Ix.has(c)&&Ix.delete(c),EM(S)&&typeof d=="function"&&d(S,{success:k})},p=S=>{h(S,c===window||c===document||n.useGlobalTarget||vV(c,S.target))},y=S=>{h(S,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",y,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),pV(a)&&(a.addEventListener("focus",d=>ele(d,i)),!Zae(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function yV(t){return A4(t)&&"ownerSVGElement"in t}function nle(t){return yV(t)&&t.tagName==="svg"}const Hi=t=>!!(t&&t.getVelocity),rle=[...uV,Gr,ld],ile=t=>rle.find(cV(t)),xR=v.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function _M(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function sle(...t){return e=>{let n=!1;const r=t.map(i=>{const s=_M(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():_M(t[i],null)}}}}function ole(...t){return v.useCallback(sle(...t),t)}class ale extends v.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=pV(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function lle({children:t,isPresent:e,anchorX:n,root:r}){const i=v.useId(),s=v.useRef(null),o=v.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=v.useContext(xR),c=ole(s,t==null?void 0:t.ref);return v.useInsertionEffect(()=>{const{width:d,height:h,top:p,left:y,right:S}=o.current;if(e||!s.current||!d||!h)return;const k=n==="left"?`left: ${y}`:`right: ${S}`;s.current.dataset.motionPopId=i;const C=document.createElement("style");a&&(C.nonce=a);const E=r??document.head;return E.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${k}px !important;
            top: ${p}px !important;
          }
        `),()=>{E.contains(C)&&E.removeChild(C)}},[e]),b.jsx(ale,{isPresent:e,childRef:s,sizeRef:o,children:v.cloneElement(t,{ref:c})})}const cle=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:c})=>{const d=J_(ule),h=v.useId();let p=!0,y=v.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:S=>{d.set(S,!0);for(const k of d.values())if(!k)return;r&&r()},register:S=>(d.set(S,!1),()=>d.delete(S))}),[n,d,r]);return s&&p&&(y={...y}),v.useMemo(()=>{d.forEach((S,k)=>d.set(k,!1))},[n]),v.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(t=b.jsx(lle,{isPresent:n,anchorX:a,root:c,children:t})),b.jsx(ES.Provider,{value:y,children:t})};function ule(){return new Map}function bV(t=!0){const e=v.useContext(ES);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=v.useId();v.useEffect(()=>{if(t)return i(s)},[t]);const o=v.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Xb=t=>t.key||"";function RM(t){const e=[];return v.Children.forEach(t,n=>{v.isValidElement(n)&&e.push(n)}),e}const dle=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:c})=>{const[d,h]=bV(o),p=v.useMemo(()=>RM(t),[t]),y=o&&!d?[]:p.map(Xb),S=v.useRef(!0),k=v.useRef(p),C=J_(()=>new Map),[E,_]=v.useState(p),[A,M]=v.useState(p);R4(()=>{S.current=!1,k.current=p;for(let O=0;O<A.length;O++){const j=Xb(A[O]);y.includes(j)?C.delete(j):C.get(j)!==!0&&C.set(j,!1)}},[A,y.length,y.join("-")]);const I=[];if(p!==E){let O=[...p];for(let j=0;j<A.length;j++){const V=A[j],$=Xb(V);y.includes($)||(O.splice(j,0,V),I.push(V))}return s==="wait"&&I.length&&(O=I),M(RM(O)),_(p),null}const{forceRender:N}=v.useContext(Q_);return b.jsx(b.Fragment,{children:A.map(O=>{const j=Xb(O),V=o&&!d?!1:p===A||y.includes(j),$=()=>{if(C.has(j))C.set(j,!0);else return;let W=!0;C.forEach(J=>{J||(W=!1)}),W&&(N==null||N(),M(k.current),o&&(h==null||h()),r&&r())};return b.jsx(cle,{isPresent:V,initial:!S.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:c,onExitComplete:V?void 0:$,anchorX:a,children:O},j)})})},xV=v.createContext({strict:!1}),PM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Lm={};for(const t in PM)Lm[t]={isEnabled:e=>PM[t].some(n=>!!e[n])};function fle(t){for(const e in t)Lm[e]={...Lm[e],...t[e]}}const hle=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Tw(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||hle.has(t)}let wV=t=>!Tw(t);function ple(t){typeof t=="function"&&(wV=e=>e.startsWith("on")?!Tw(e):t(e))}try{ple(require("@emotion/is-prop-valid").default)}catch{}function mle(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(wV(i)||n===!0&&Tw(i)||!e&&!Tw(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const _S=v.createContext({});function RS(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ey(t){return typeof t=="string"||Array.isArray(t)}const wR=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],SR=["initial",...wR];function PS(t){return RS(t.animate)||SR.some(e=>Ey(t[e]))}function SV(t){return!!(PS(t)||t.variants)}function gle(t,e){if(PS(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ey(n)?n:void 0,animate:Ey(r)?r:void 0}}return t.inherit!==!1?e:{}}function vle(t){const{initial:e,animate:n}=gle(t,v.useContext(_S));return v.useMemo(()=>({initial:e,animate:n}),[AM(e),AM(n)])}function AM(t){return Array.isArray(t)?t.join(" "):t}const _y={};function yle(t){for(const e in t)_y[e]=t[e],oR(e)&&(_y[e].isCSSVariable=!0)}function CV(t,{layout:e,layoutId:n}){return ng.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!_y[t]||t==="opacity")}const ble={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xle=tg.length;function wle(t,e,n){let r="",i=!0;for(let s=0;s<xle;s++){const o=tg[s],a=t[o];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(o.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||n){const d=hV(a,vR[o]);if(!c){i=!1;const h=ble[o]||o;r+=`${h}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function CR(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const c in e){const d=e[c];if(ng.has(c)){o=!0;continue}else if(oR(c)){i[c]=d;continue}else{const h=hV(d,vR[c]);c.startsWith("origin")?(a=!0,s[c]=h):r[c]=h}}if(e.transform||(o||n?r.transform=wle(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:c="50%",originY:d="50%",originZ:h=0}=s;r.transformOrigin=`${c} ${d} ${h}`}}const kR=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function kV(t,e,n){for(const r in e)!Hi(e[r])&&!CV(r,n)&&(t[r]=e[r])}function Sle({transformTemplate:t},e){return v.useMemo(()=>{const n=kR();return CR(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Cle(t,e){const n=t.style||{},r={};return kV(r,n,t),Object.assign(r,Sle(t,e)),r}function kle(t,e){const n={},r=Cle(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Tle={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ele={offset:"strokeDashoffset",array:"strokeDasharray"};function _le(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Tle:Ele;t[s.offset]=Lt.transform(-r);const o=Lt.transform(e),a=Lt.transform(n);t[s.array]=`${o} ${a}`}function TV(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},c,d,h){if(CR(t,a,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:y}=t;p.transform&&(y.transform=p.transform,delete p.transform),(y.transform||p.transformOrigin)&&(y.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),y.transform&&(y.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&_le(p,i,s,o,!1)}const EV=()=>({...kR(),attrs:{}}),_V=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Rle(t,e,n,r){const i=v.useMemo(()=>{const s=EV();return TV(s,e,_V(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};kV(s,t.style,t),i.style={...s,...i.style}}return i}const Ple=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function TR(t){return typeof t!="string"||t.includes("-")?!1:!!(Ple.indexOf(t)>-1||/[A-Z]/u.test(t))}function Ale(t,e,n,{latestValues:r},i,s=!1){const a=(TR(t)?Rle:kle)(e,r,i,t),c=mle(e,typeof t=="string",s),d=t!==v.Fragment?{...c,...a,ref:n}:{},{children:h}=e,p=v.useMemo(()=>Hi(h)?h.get():h,[h]);return v.createElement(t,{...d,children:p})}function IM(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function ER(t,e,n,r){if(typeof e=="function"){const[i,s]=IM(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=IM(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Nx(t){return Hi(t)?t.get():t}function Ile({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:Nle(n,r,i,t),renderState:e()}}function Nle(t,e,n,r){const i={},s=r(t,{});for(const y in s)i[y]=Nx(s[y]);let{initial:o,animate:a}=t;const c=PS(t),d=SV(t);e&&d&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const p=h?a:o;if(p&&typeof p!="boolean"&&!RS(p)){const y=Array.isArray(p)?p:[p];for(let S=0;S<y.length;S++){const k=ER(t,y[S]);if(k){const{transitionEnd:C,transition:E,..._}=k;for(const A in _){let M=_[A];if(Array.isArray(M)){const I=h?M.length-1:0;M=M[I]}M!==null&&(i[A]=M)}for(const A in C)i[A]=C[A]}}}return i}const RV=t=>(e,n)=>{const r=v.useContext(_S),i=v.useContext(ES),s=()=>Ile(t,e,r,i);return n?s():J_(s)};function _R(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(Hi(r[o])||e.style&&Hi(e.style[o])||CV(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const Mle=RV({scrapeMotionValuesFromProps:_R,createRenderState:kR});function PV(t,e,n){const r=_R(t,e,n);for(const i in t)if(Hi(t[i])||Hi(e[i])){const s=tg.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const Ole=RV({scrapeMotionValuesFromProps:PV,createRenderState:EV}),Dle=Symbol.for("motionComponentSymbol");function zp(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Lle(t,e,n){return v.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):zp(n)&&(n.current=r))},[e])}const RR=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),jle="framerAppearId",AV="data-"+RR(jle),IV=v.createContext({});function Fle(t,e,n,r,i){var C,E;const{visualElement:s}=v.useContext(_S),o=v.useContext(xV),a=v.useContext(ES),c=v.useContext(xR).reducedMotion,d=v.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:c}));const h=d.current,p=v.useContext(IV);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&Ule(d.current,n,i,p);const y=v.useRef(!1);v.useInsertionEffect(()=>{h&&y.current&&h.update(n,a)});const S=n[AV],k=v.useRef(!!S&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,S))&&((E=window.MotionHasOptimisedAnimation)==null?void 0:E.call(window,S)));return R4(()=>{h&&(y.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),k.current&&h.animationState&&h.animationState.animateChanges())}),v.useEffect(()=>{h&&(!k.current&&h.animationState&&h.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)==null||_.call(window,S)}),k.current=!1),h.enteringChildren=void 0)}),h}function Ule(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:NV(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&zp(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:c,layoutRoot:d})}function NV(t){if(t)return t.options.allowProjection!==!1?t.projection:NV(t.parent)}function jk(t,{forwardMotionProps:e=!1}={},n,r){n&&fle(n);const i=TR(t)?Ole:Mle;function s(a,c){let d;const h={...v.useContext(xR),...a,layoutId:Vle(a)},{isStatic:p}=h,y=vle(a),S=i(a,p);if(!p&&X_){Ble();const k=zle(h);d=k.MeasureLayout,y.visualElement=Fle(t,S,h,r,k.ProjectionNode)}return b.jsxs(_S.Provider,{value:y,children:[d&&y.visualElement?b.jsx(d,{visualElement:y.visualElement,...h}):null,Ale(t,a,Lle(S,y.visualElement,c),S,p,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=v.forwardRef(s);return o[Dle]=t,o}function Vle({layoutId:t}){const e=v.useContext(Q_).id;return e&&t!==void 0?e+"-"+t:t}function Ble(t,e){v.useContext(xV).strict}function zle(t){const{drag:e,layout:n}=Lm;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function $le(t,e){if(typeof Proxy>"u")return jk;const n=new Map,r=(s,o)=>jk(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,jk(o,void 0,t,e)),n.get(o))})}function MV({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Wle({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Hle(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Fk(t){return t===void 0||t===1}function H1({scale:t,scaleX:e,scaleY:n}){return!Fk(t)||!Fk(e)||!Fk(n)}function hf(t){return H1(t)||OV(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function OV(t){return NM(t.x)||NM(t.y)}function NM(t){return t&&t!=="0%"}function Ew(t,e,n){const r=t-n,i=e*r;return n+i}function MM(t,e,n,r,i){return i!==void 0&&(t=Ew(t,i,r)),Ew(t,n,r)+e}function q1(t,e=0,n=1,r,i){t.min=MM(t.min,e,n,r,i),t.max=MM(t.max,e,n,r,i)}function DV(t,{x:e,y:n}){q1(t.x,e.translate,e.scale,e.originPoint),q1(t.y,n.translate,n.scale,n.originPoint)}const OM=.999999999999,DM=1.0000000000001;function qle(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Wp(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,DV(t,o)),r&&hf(s.latestValues)&&Wp(t,s.latestValues))}e.x<DM&&e.x>OM&&(e.x=1),e.y<DM&&e.y>OM&&(e.y=1)}function $p(t,e){t.min=t.min+e,t.max=t.max+e}function LM(t,e,n,r,i=.5){const s=gr(t.min,t.max,i);q1(t,e,n,s,r)}function Wp(t,e){LM(t.x,e.x,e.scaleX,e.scale,e.originX),LM(t.y,e.y,e.scaleY,e.scale,e.originY)}function LV(t,e){return MV(Hle(t.getBoundingClientRect(),e))}function Kle(t,e,n){const r=LV(t,n),{scroll:i}=e;return i&&($p(r.x,i.offset.x),$p(r.y,i.offset.y)),r}const jM=()=>({translate:0,scale:1,origin:0,originPoint:0}),Hp=()=>({x:jM(),y:jM()}),FM=()=>({min:0,max:0}),Lr=()=>({x:FM(),y:FM()}),K1={current:null},jV={current:!1};function Gle(){if(jV.current=!0,!!X_)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>K1.current=t.matches;t.addEventListener("change",e),e()}else K1.current=!1}const Yle=new WeakMap;function Qle(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Hi(i))t.addValue(r,i);else if(Hi(s))t.addValue(r,Dm(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Dm(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const UM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Jle{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=mR,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Fs.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,lr.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=PS(n),this.isVariantNode=SV(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in p){const S=p[y];c[y]!==void 0&&Hi(S)&&S.set(c[y])}}mount(e){var n;this.current=e,Yle.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),jV.current||Gle(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:K1.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),ad(this.notifyUpdate),ad(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ng.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&lr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Lm){const n=Lm[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Lr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<UM.length;r++){const i=UM[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Qle(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Dm(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(P4(r)||I4(r))?r=parseFloat(r):!ile(r)&&ld.test(n)&&(r=fV(e,n)),this.setBaseTarget(e,Hi(r)?r.get():r)),Hi(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=ER(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Hi(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new rR),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){yR.render(this.render)}}class FV extends Jle{constructor(){super(...arguments),this.KeyframeResolver=qae}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Hi(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function UV(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function Xle(t){return window.getComputedStyle(t)}class Zle extends FV{constructor(){super(...arguments),this.type="html",this.renderInstance=UV}readValueFromInstance(e,n){var r;if(ng.has(n))return(r=this.projection)!=null&&r.isProjecting?F1(n):dae(e,n);{const i=Xle(e),s=(oR(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return LV(e,n)}build(e,n,r){CR(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return _R(e,n,r)}}const VV=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ece(t,e,n,r){UV(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(VV.has(i)?i:RR(i),e.attrs[i])}class tce extends FV{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Lr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ng.has(n)){const r=dV(n);return r&&r.default||0}return n=VV.has(n)?n:RR(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return PV(e,n,r)}build(e,n,r){TV(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){ece(e,n,r,i)}mount(e){this.isSVGTag=_V(e.tagName),super.mount(e)}}const nce=(t,e)=>TR(t)?new tce(e):new Zle(e,{allowProjection:t!==v.Fragment});function om(t,e,n){const r=t.getProps();return ER(r,e,n!==void 0?n:r.custom,t)}const G1=t=>Array.isArray(t);function rce(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Dm(n))}function ice(t){return G1(t)?t[t.length-1]||0:t}function sce(t,e){const n=om(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=ice(s[o]);rce(t,o,a)}}function oce(t){return!!(Hi(t)&&t.add)}function Y1(t,e){const n=t.getValue("willChange");if(oce(n))return n.add(e);if(!n&&Mc.WillChange){const r=new Mc.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function BV(t){return t.props[AV]}const ace=t=>t!==null;function lce(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(ace),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const cce={type:"spring",stiffness:500,damping:25,restSpeed:10},uce=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),dce={type:"keyframes",duration:.8},fce={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},hce=(t,{keyframes:e})=>e.length>2?dce:ng.has(t)?t.startsWith("scale")?uce(e[1]):cce:fce;function pce({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const PR=(t,e,n,r={},i,s)=>o=>{const a=gR(r,t)||{},c=a.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Cl(c);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-d,onUpdate:y=>{e.set(y),a.onUpdate&&a.onUpdate(y)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};pce(a)||Object.assign(h,hce(t,h)),h.duration&&(h.duration=Cl(h.duration)),h.repeatDelay&&(h.repeatDelay=Cl(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&($1(h),h.delay===0&&(p=!0)),(Mc.instantAnimations||Mc.skipAnimations)&&(p=!0,$1(h),h.delay=0),h.allowFlatten=!a.type&&!a.ease,p&&!s&&e.get()!==void 0){const y=lce(h.keyframes,a);if(y!==void 0){lr.update(()=>{h.onUpdate(y),h.onComplete()});return}}return a.isSync?new pR(h):new Oae(h)};function mce({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function zV(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const c=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const p=t.getValue(h,t.latestValues[h]??null),y=a[h];if(y===void 0||d&&mce(d,h))continue;const S={delay:n,...gR(s||{},h)},k=p.get();if(k!==void 0&&!p.isAnimating&&!Array.isArray(y)&&y===k&&!S.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const _=BV(t);if(_){const A=window.MotionHandoffAnimation(_,h,lr);A!==null&&(S.startTime=A,C=!0)}}Y1(t,h),p.start(PR(h,p,y,t.shouldReduceMotion&&lV.has(h)?{type:!1}:S,t,C));const E=p.animation;E&&c.push(E)}return o&&Promise.all(c).then(()=>{lr.update(()=>{o&&sce(t,o)})}),c}function $V(t,e,n,r=0,i=1){const s=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function Q1(t,e,n={}){var c;const r=om(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(zV(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:y}=i;return gce(t,e,d,h,p,y,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[d,h]=a==="beforeChildren"?[s,o]:[o,s];return d().then(()=>h())}else return Promise.all([s(),o(n.delay)])}function gce(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),a.push(Q1(c,e,{...o,delay:n+(typeof r=="function"?0:r)+$V(t.variantChildren,c,r,i,s)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(a)}function vce(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Q1(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Q1(t,e,n);else{const i=typeof e=="function"?om(t,e,n.custom):e;r=Promise.all(zV(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function WV(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const yce=SR.length;function HV(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?HV(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<yce;n++){const r=SR[n],i=t.props[r];(Ey(i)||i===!1)&&(e[r]=i)}return e}const bce=[...wR].reverse(),xce=wR.length;function wce(t){return e=>Promise.all(e.map(({animation:n,options:r})=>vce(t,n,r)))}function Sce(t){let e=wce(t),n=VM(),r=!0;const i=c=>(d,h)=>{var y;const p=om(t,h,c==="exit"?(y=t.presenceContext)==null?void 0:y.custom:void 0);if(p){const{transition:S,transitionEnd:k,...C}=p;d={...d,...C,...k}}return d};function s(c){e=c(t)}function o(c){const{props:d}=t,h=HV(t.parent)||{},p=[],y=new Set;let S={},k=1/0;for(let E=0;E<xce;E++){const _=bce[E],A=n[_],M=d[_]!==void 0?d[_]:h[_],I=Ey(M),N=_===c?A.isActive:null;N===!1&&(k=E);let O=M===h[_]&&M!==d[_]&&I;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),A.protectedKeys={...S},!A.isActive&&N===null||!M&&!A.prevProp||RS(M)||typeof M=="boolean")continue;const j=Cce(A.prevProp,M);let V=j||_===c&&A.isActive&&!O&&I||E>k&&I,$=!1;const W=Array.isArray(M)?M:[M];let J=W.reduce(i(_),{});N===!1&&(J={});const{prevResolvedValues:Y={}}=A,pe={...Y,...J},fe=Se=>{V=!0,y.has(Se)&&($=!0,y.delete(Se)),A.needsAnimating[Se]=!0;const q=t.getValue(Se);q&&(q.liveStyle=!1)};for(const Se in pe){const q=J[Se],te=Y[Se];if(S.hasOwnProperty(Se))continue;let ae=!1;G1(q)&&G1(te)?ae=!WV(q,te):ae=q!==te,ae?q!=null?fe(Se):y.add(Se):q!==void 0&&y.has(Se)?fe(Se):A.protectedKeys[Se]=!0}A.prevProp=M,A.prevResolvedValues=J,A.isActive&&(S={...S,...J}),r&&t.blockInitialAnimation&&(V=!1);const Ee=O&&j;V&&(!Ee||$)&&p.push(...W.map(Se=>{const q={type:_};if(typeof Se=="string"&&r&&!Ee&&t.manuallyAnimateOnMount&&t.parent){const{parent:te}=t,ae=om(te,Se);if(te.enteringChildren&&ae){const{delayChildren:B}=ae.transition||{};q.delay=$V(te.enteringChildren,t,B)}}return{animation:Se,options:q}}))}if(y.size){const E={};if(typeof d.initial!="boolean"){const _=om(t,Array.isArray(d.initial)?d.initial[0]:d.initial);_&&_.transition&&(E.transition=_.transition)}y.forEach(_=>{const A=t.getBaseTarget(_),M=t.getValue(_);M&&(M.liveStyle=!0),E[_]=A??null}),p.push({animation:E})}let C=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(p):Promise.resolve()}function a(c,d){var p;if(n[c].isActive===d)return Promise.resolve();(p=t.variantChildren)==null||p.forEach(y=>{var S;return(S=y.animationState)==null?void 0:S.setActive(c,d)}),n[c].isActive=d;const h=o(c);for(const y in n)n[y].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=VM()}}}function Cce(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!WV(e,t):!1}function cf(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function VM(){return{animate:cf(!0),whileInView:cf(),whileHover:cf(),whileTap:cf(),whileDrag:cf(),whileFocus:cf(),exit:cf()}}class md{constructor(e){this.isMounted=!1,this.node=e}update(){}}class kce extends md{constructor(e){super(e),e.animationState||(e.animationState=Sce(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();RS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Tce=0;class Ece extends md{constructor(){super(...arguments),this.id=Tce++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const _ce={animation:{Feature:kce},exit:{Feature:Ece}};function Ry(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function a0(t){return{point:{x:t.pageX,y:t.pageY}}}const Rce=t=>e=>bR(e)&&t(e,a0(e));function ny(t,e,n,r){return Ry(t,e,Rce(n),r)}const qV=1e-4,Pce=1-qV,Ace=1+qV,KV=.01,Ice=0-KV,Nce=0+KV;function cs(t){return t.max-t.min}function Mce(t,e,n){return Math.abs(t-e)<=n}function BM(t,e,n,r=.5){t.origin=r,t.originPoint=gr(e.min,e.max,t.origin),t.scale=cs(n)/cs(e),t.translate=gr(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Pce&&t.scale<=Ace||isNaN(t.scale))&&(t.scale=1),(t.translate>=Ice&&t.translate<=Nce||isNaN(t.translate))&&(t.translate=0)}function ry(t,e,n,r){BM(t.x,e.x,n.x,r?r.originX:void 0),BM(t.y,e.y,n.y,r?r.originY:void 0)}function zM(t,e,n){t.min=n.min+e.min,t.max=t.min+cs(e)}function Oce(t,e,n){zM(t.x,e.x,n.x),zM(t.y,e.y,n.y)}function $M(t,e,n){t.min=e.min-n.min,t.max=t.min+cs(e)}function iy(t,e,n){$M(t.x,e.x,n.x),$M(t.y,e.y,n.y)}function Vo(t){return[t("x"),t("y")]}const GV=({current:t})=>t?t.ownerDocument.defaultView:null,WM=(t,e)=>Math.abs(t-e);function Dce(t,e){const n=WM(t.x,e.x),r=WM(t.y,e.y);return Math.sqrt(n**2+r**2)}class YV{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Vk(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,k=Dce(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!k)return;const{point:C}=y,{timestamp:E}=Oi;this.history.push({...C,timestamp:E});const{onStart:_,onMove:A}=this.handlers;S||(_&&_(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,y)},this.handlePointerMove=(y,S)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Uk(S,this.transformPagePoint),lr.update(this.updatePoint,!0)},this.handlePointerUp=(y,S)=>{this.end();const{onEnd:k,onSessionEnd:C,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Vk(y.type==="pointercancel"?this.lastMoveEventInfo:Uk(S,this.transformPagePoint),this.history);this.startEvent&&k&&k(y,_),C&&C(y,_)},!bR(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=a0(e),c=Uk(a,this.transformPagePoint),{point:d}=c,{timestamp:h}=Oi;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=n;p&&p(e,Vk(c,this.history)),this.removeListeners=i0(ny(this.contextWindow,"pointermove",this.handlePointerMove),ny(this.contextWindow,"pointerup",this.handlePointerUp),ny(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ad(this.updatePoint)}}function Uk(t,e){return e?{point:e(t.point)}:t}function HM(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Vk({point:t},e){return{point:t,delta:HM(t,QV(e)),offset:HM(t,Lce(e)),velocity:jce(e,.1)}}function Lce(t){return t[0]}function QV(t){return t[t.length-1]}function jce(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=QV(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Cl(e)));)n--;if(!r)return{x:0,y:0};const s=qo(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Fce(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?gr(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?gr(n,t,r.max):Math.min(t,n)),t}function qM(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Uce(t,{top:e,left:n,bottom:r,right:i}){return{x:qM(t.x,n,i),y:qM(t.y,e,r)}}function KM(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Vce(t,e){return{x:KM(t.x,e.x),y:KM(t.y,e.y)}}function Bce(t,e){let n=.5;const r=cs(t),i=cs(e);return i>r?n=Cy(e.min,e.max-r,t.min):r>i&&(n=Cy(t.min,t.max-i,e.min)),Nc(0,1,n)}function zce(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const J1=.35;function $ce(t=J1){return t===!1?t=0:t===!0&&(t=J1),{x:GM(t,"left","right"),y:GM(t,"top","bottom")}}function GM(t,e,n){return{min:YM(t,e),max:YM(t,n)}}function YM(t,e){return typeof t=="number"?t:t[e]||0}const Wce=new WeakMap;class Hce{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Lr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(a0(p).point)},o=(p,y)=>{const{drag:S,dragPropagation:k,onDragStart:C}=this.getProps();if(S&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Qae(S),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vo(_=>{let A=this.getAxisMotionValue(_).get()||0;if(kl.test(A)){const{projection:M}=this.visualElement;if(M&&M.layout){const I=M.layout.layoutBox[_];I&&(A=cs(I)*(parseFloat(A)/100))}}this.originPoint[_]=A}),C&&lr.postRender(()=>C(p,y)),Y1(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},a=(p,y)=>{this.latestPointerEvent=p,this.latestPanInfo=y;const{dragPropagation:S,dragDirectionLock:k,onDirectionLock:C,onDrag:E}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:_}=y;if(k&&this.currentDirection===null){this.currentDirection=qce(_),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",y.point,_),this.updateAxis("y",y.point,_),this.visualElement.render(),E&&E(p,y)},c=(p,y)=>{this.latestPointerEvent=p,this.latestPanInfo=y,this.stop(p,y),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Vo(p=>{var y;return this.getAnimationState(p)==="paused"&&((y=this.getAxisMotionValue(p).animation)==null?void 0:y.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new YV(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:GV(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&lr.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Zb(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Fce(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&zp(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Uce(r.layoutBox,e):this.constraints=!1,this.elastic=$ce(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Vo(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=zce(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!zp(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Kle(r,i.root,this.visualElement.getTransformPagePoint());let o=Vce(i.layout.layoutBox,s);if(n){const a=n(Wle(o));this.hasMutatedConstraints=!!a,a&&(o=MV(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},d=Vo(h=>{if(!Zb(h,n,this.currentDirection))return;let p=c&&c[h]||{};o&&(p={min:0,max:0});const y=i?200:1e6,S=i?40:1e7,k={type:"inertia",velocity:r?e[h]:0,bounceStiffness:y,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,k)});return Promise.all(d).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Y1(this.visualElement,e),r.start(PR(e,r,0,n,this.visualElement,!1))}stopAnimation(){Vo(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Vo(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Vo(n=>{const{drag:r}=this.getProps();if(!Zb(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-gr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!zp(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Vo(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const c=a.get();i[o]=Bce({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Vo(o=>{if(!Zb(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];a.set(gr(c,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;Wce.set(this.visualElement,this);const e=this.visualElement.current,n=ny(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();zp(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),lr.read(r);const o=Ry(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Vo(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=c[h].translate,p.set(p.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=J1,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Zb(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function qce(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Kce extends md{constructor(e){super(e),this.removeGroupControls=Ko,this.removeListeners=Ko,this.controls=new Hce(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ko}unmount(){this.removeGroupControls(),this.removeListeners()}}const QM=t=>(e,n)=>{t&&lr.postRender(()=>t(e,n))};class Gce extends md{constructor(){super(...arguments),this.removePointerDownListener=Ko}onPointerDown(e){this.session=new YV(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:GV(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:QM(e),onStart:QM(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&lr.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=ny(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Mx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function JM(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ov={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Lt.test(t))t=parseFloat(t);else return t;const n=JM(t,e.target.x),r=JM(t,e.target.y);return`${n}% ${r}%`}},Yce={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ld.parse(t);if(i.length>5)return r;const s=ld.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=c;const d=gr(a,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};let Bk=!1;class Qce extends v.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;yle(Jce),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),Bk&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Mx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,Bk=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||lr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),yR.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Bk=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function JV(t){const[e,n]=bV(),r=v.useContext(Q_);return b.jsx(Qce,{...t,layoutGroup:r,switchLayoutGroup:v.useContext(IV),isPresent:e,safeToRemove:n})}const Jce={borderRadius:{...Ov,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ov,borderTopRightRadius:Ov,borderBottomLeftRadius:Ov,borderBottomRightRadius:Ov,boxShadow:Yce};function Xce(t,e,n){const r=Hi(t)?t:Dm(t);return r.start(PR("",r,e,n)),r.animation}const Zce=(t,e)=>t.depth-e.depth;class eue{constructor(){this.children=[],this.isDirty=!1}add(e){Z_(this.children,e),this.isDirty=!0}remove(e){eR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Zce),this.isDirty=!1,this.children.forEach(e)}}function tue(t,e){const n=Fs.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ad(r),t(s-e))};return lr.setup(r,!0),()=>ad(r)}const XV=["TopLeft","TopRight","BottomLeft","BottomRight"],nue=XV.length,XM=t=>typeof t=="string"?parseFloat(t):t,ZM=t=>typeof t=="number"||Lt.test(t);function rue(t,e,n,r,i,s){i?(t.opacity=gr(0,n.opacity??1,iue(r)),t.opacityExit=gr(e.opacity??1,0,sue(r))):s&&(t.opacity=gr(e.opacity??1,n.opacity??1,r));for(let o=0;o<nue;o++){const a=`border${XV[o]}Radius`;let c=eO(e,a),d=eO(n,a);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||ZM(c)===ZM(d)?(t[a]=Math.max(gr(XM(c),XM(d),r),0),(kl.test(d)||kl.test(c))&&(t[a]+="%")):t[a]=d}(e.rotate||n.rotate)&&(t.rotate=gr(e.rotate||0,n.rotate||0,r))}function eO(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const iue=ZV(0,.5,U4),sue=ZV(.5,.95,Ko);function ZV(t,e,n){return r=>r<t?0:r>e?1:n(Cy(t,e,r))}function tO(t,e){t.min=e.min,t.max=e.max}function Fo(t,e){tO(t.x,e.x),tO(t.y,e.y)}function nO(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function rO(t,e,n,r,i){return t-=e,t=Ew(t,1/n,r),i!==void 0&&(t=Ew(t,1/i,r)),t}function oue(t,e=0,n=1,r=.5,i,s=t,o=t){if(kl.test(e)&&(e=parseFloat(e),e=gr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=gr(s.min,s.max,r);t===s&&(a-=e),t.min=rO(t.min,e,n,a,i),t.max=rO(t.max,e,n,a,i)}function iO(t,e,[n,r,i],s,o){oue(t,e[n],e[r],e[i],e.scale,s,o)}const aue=["x","scaleX","originX"],lue=["y","scaleY","originY"];function sO(t,e,n,r){iO(t.x,e,aue,n?n.x:void 0,r?r.x:void 0),iO(t.y,e,lue,n?n.y:void 0,r?r.y:void 0)}function oO(t){return t.translate===0&&t.scale===1}function eB(t){return oO(t.x)&&oO(t.y)}function aO(t,e){return t.min===e.min&&t.max===e.max}function cue(t,e){return aO(t.x,e.x)&&aO(t.y,e.y)}function lO(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function tB(t,e){return lO(t.x,e.x)&&lO(t.y,e.y)}function cO(t){return cs(t.x)/cs(t.y)}function uO(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class uue{constructor(){this.members=[]}add(e){Z_(this.members,e),e.scheduleRender()}remove(e){if(eR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function due(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:y,skewX:S,skewY:k}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),y&&(r+=`rotateY(${y}deg) `),S&&(r+=`skewX(${S}deg) `),k&&(r+=`skewY(${k}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return(a!==1||c!==1)&&(r+=`scale(${a}, ${c})`),r||"none"}const zk=["","X","Y","Z"],fue=1e3;let hue=0;function $k(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function nB(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=BV(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",lr,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&nB(r)}function rB({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=hue++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(gue),this.nodes.forEach(xue),this.nodes.forEach(wue),this.nodes.forEach(vue)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new eue)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new rR),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=yV(o)&&!nle(o),this.instance=o;const{layoutId:a,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||a)&&(this.isLayoutDirty=!0),t){let h,p=0;const y=()=>this.root.updateBlockedByResize=!1;lr.read(()=>{p=window.innerWidth}),t(o,()=>{const S=window.innerWidth;S!==p&&(p=S,this.root.updateBlockedByResize=!0,h&&h(),h=tue(y,250),Mx.hasAnimatedSinceResize&&(Mx.hasAnimatedSinceResize=!1,this.nodes.forEach(hO)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&d&&(a||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:y,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||d.getDefaultTransition()||Eue,{onLayoutAnimationStart:C,onLayoutAnimationComplete:E}=d.getProps(),_=!this.targetLayout||!tB(this.targetLayout,S),A=!p&&y;if(this.options.layoutRoot||this.resumeFrom||A||p&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...gR(k,"layout"),onPlay:C,onComplete:E};(d.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(h,A)}else p||hO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ad(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Sue),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&nB(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(dO);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(fO);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(bue),this.nodes.forEach(pue),this.nodes.forEach(mue)):this.nodes.forEach(fO),this.clearAllSnapshots();const a=Fs.now();Oi.delta=Nc(0,1e3/60,a-Oi.timestamp),Oi.timestamp=a,Oi.isProcessing=!0,Nk.update.process(Oi),Nk.preRender.process(Oi),Nk.render.process(Oi),Oi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,yR.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(yue),this.sharedNodes.forEach(Cue)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,lr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){lr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!cs(this.snapshot.measuredBox.x)&&!cs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Lr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!eB(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(a||hf(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),_ue(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return Lr();const a=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(Rue))){const{scroll:h}=this.root;h&&($p(a.x,h.offset.x),$p(a.y,h.offset.y))}return a}removeElementScroll(o){var c;const a=Lr();if(Fo(a,o),(c=this.scroll)!=null&&c.wasRoot)return a;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:p,options:y}=h;h!==this.root&&p&&y.layoutScroll&&(p.wasRoot&&Fo(a,o),$p(a.x,p.offset.x),$p(a.y,p.offset.y))}return a}applyTransform(o,a=!1){const c=Lr();Fo(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Wp(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),hf(h.latestValues)&&Wp(c,h.latestValues)}return hf(this.latestValues)&&Wp(c,this.latestValues),c}removeTransform(o){const a=Lr();Fo(a,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!hf(d.latestValues))continue;H1(d.latestValues)&&d.updateSnapshot();const h=Lr(),p=d.measurePageBox();Fo(h,p),sO(a,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return hf(this.latestValues)&&sO(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Oi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var y;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=Oi.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Lr(),this.relativeTargetOrigin=Lr(),iy(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),Fo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Lr(),this.targetWithTransforms=Lr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Oce(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Fo(this.target,this.layout.layoutBox),DV(this.target,this.targetDelta)):Fo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Lr(),this.relativeTargetOrigin=Lr(),iy(this.relativeTargetOrigin,this.target,S.target),Fo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||H1(this.parent.latestValues)||OV(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var k;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Oi.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Fo(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,y=this.treeScale.y;qle(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Lr());const{target:S}=o;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(nO(this.prevProjectionDelta.x,this.projectionDelta.x),nO(this.prevProjectionDelta.y,this.projectionDelta.y)),ry(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==y||!uO(this.projectionDelta.x,this.prevProjectionDelta.x)||!uO(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Hp(),this.projectionDelta=Hp(),this.projectionDeltaWithTransform=Hp()}setAnimationOrigin(o,a=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},p=Hp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const y=Lr(),S=c?c.source:void 0,k=this.layout?this.layout.source:void 0,C=S!==k,E=this.getStack(),_=!E||E.members.length<=1,A=!!(C&&!_&&this.options.crossfade===!0&&!this.path.some(Tue));this.animationProgress=0;let M;this.mixTargetDelta=I=>{const N=I/1e3;pO(p.x,o.x,N),pO(p.y,o.y,N),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(iy(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kue(this.relativeTarget,this.relativeTargetOrigin,y,N),M&&cue(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Lr()),Fo(M,this.relativeTarget)),C&&(this.animationValues=h,rue(h,d,this.latestValues,N,A,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,c,d;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(ad(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=lr.update(()=>{Mx.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Dm(0)),this.currentAnimation=Xce(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(fue),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:d,latestValues:h}=o;if(!(!a||!c||!d)){if(this!==o&&this.layout&&d&&iB(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Lr();const p=cs(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+p;const y=cs(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+y}Fo(a,c),Wp(a,h),ry(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new uue),this.sharedNodes.get(o).add(a);const d=a.options.initialPromotionConfig;a.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const d={};c.z&&$k("z",o,d,this.animationValues);for(let h=0;h<zk.length;h++)$k(`rotate${zk[h]}`,o,d,this.animationValues),$k(`skew${zk[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Nx(a==null?void 0:a.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Nx(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!hf(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=due(this.projectionDeltaWithTransform,this.treeScale,h);c&&(p=c(h,p)),o.transform=p;const{x:y,y:S}=this.projectionDelta;o.transformOrigin=`${y.origin*100}% ${S.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const k in _y){if(h[k]===void 0)continue;const{correct:C,applyTo:E,isCSSVariable:_}=_y[k],A=p==="none"?h[k]:C(h[k],d);if(E){const M=E.length;for(let I=0;I<M;I++)o[E[I]]=A}else _?this.options.visualElement.renderState.vars[k]=A:o[k]=A}this.options.layoutId&&(o.pointerEvents=d===this?Nx(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(dO),this.root.sharedNodes.clear()}}}function pue(t){t.updateLayout()}function mue(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Vo(p=>{const y=o?e.measuredBox[p]:e.layoutBox[p],S=cs(y);y.min=r[p].min,y.max=y.min+S}):iB(s,e.layoutBox,r)&&Vo(p=>{const y=o?e.measuredBox[p]:e.layoutBox[p],S=cs(r[p]);y.max=y.min+S,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+S)});const a=Hp();ry(a,r,e.layoutBox);const c=Hp();o?ry(c,t.applyTransform(i,!0),e.measuredBox):ry(c,r,e.layoutBox);const d=!eB(a);let h=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:y,layout:S}=p;if(y&&S){const k=Lr();iy(k,e.layoutBox,y.layoutBox);const C=Lr();iy(C,r,S.layoutBox),tB(k,C)||(h=!0),p.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=k,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:a,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function gue(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function vue(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function yue(t){t.clearSnapshot()}function dO(t){t.clearMeasurements()}function fO(t){t.isLayoutDirty=!1}function bue(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function hO(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function xue(t){t.resolveTargetDelta()}function wue(t){t.calcProjection()}function Sue(t){t.resetSkewAndRotation()}function Cue(t){t.removeLeadSnapshot()}function pO(t,e,n){t.translate=gr(e.translate,0,n),t.scale=gr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function mO(t,e,n,r){t.min=gr(e.min,n.min,r),t.max=gr(e.max,n.max,r)}function kue(t,e,n,r){mO(t.x,e.x,n.x,r),mO(t.y,e.y,n.y,r)}function Tue(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Eue={duration:.45,ease:[.4,0,.1,1]},gO=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),vO=gO("applewebkit/")&&!gO("chrome/")?Math.round:Ko;function yO(t){t.min=vO(t.min),t.max=vO(t.max)}function _ue(t){yO(t.x),yO(t.y)}function iB(t,e,n){return t==="position"||t==="preserve-aspect"&&!Mce(cO(e),cO(n),.2)}function Rue(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Pue=rB({attachResizeListener:(t,e)=>Ry(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Wk={current:void 0},sB=rB({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Wk.current){const t=new Pue({});t.mount(window),t.setOptions({layoutScroll:!0}),Wk.current=t}return Wk.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Aue={pan:{Feature:Gce},drag:{Feature:Kce,ProjectionNode:sB,MeasureLayout:JV}};function bO(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&lr.postRender(()=>s(e,a0(e)))}class Iue extends md{mount(){const{current:e}=this.node;e&&(this.unmount=Jae(e,(n,r)=>(bO(this.node,r,"Start"),i=>bO(this.node,i,"End"))))}unmount(){}}class Nue extends md{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=i0(Ry(this.node.current,"focus",()=>this.onFocus()),Ry(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function xO(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&lr.postRender(()=>s(e,a0(e)))}class Mue extends md{mount(){const{current:e}=this.node;e&&(this.unmount=tle(e,(n,r)=>(xO(this.node,r,"Start"),(i,{success:s})=>xO(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const X1=new WeakMap,Hk=new WeakMap,Oue=t=>{const e=X1.get(t.target);e&&e(t)},Due=t=>{t.forEach(Oue)};function Lue({root:t,...e}){const n=t||document;Hk.has(n)||Hk.set(n,{});const r=Hk.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Due,{root:t,...e})),r[i]}function jue(t,e,n){const r=Lue(e);return X1.set(t,n),r.observe(t),()=>{X1.delete(t),r.unobserve(t)}}const Fue={some:0,all:1};class Uue extends md{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Fue[i]},a=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),y=d?h:p;y&&y(c)};return jue(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Vue(e,n))&&this.startObserver()}unmount(){}}function Vue({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Bue={inView:{Feature:Uue},tap:{Feature:Mue},focus:{Feature:Nue},hover:{Feature:Iue}},zue={layout:{ProjectionNode:sB,MeasureLayout:JV}},$ue={..._ce,...Bue,...Aue,...zue},wO=$le($ue,nce),Wue=1,Hue=1e6;let qk=0;function que(){return qk=(qk+1)%Number.MAX_SAFE_INTEGER,qk.toString()}const Kk=new Map,SO=t=>{if(Kk.has(t))return;const e=setTimeout(()=>{Kk.delete(t),sy({type:"REMOVE_TOAST",toastId:t})},Hue);Kk.set(t,e)},Kue=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Wue)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?SO(n):t.toasts.forEach(r=>{SO(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Ox=[];let Dx={toasts:[]};function sy(t){Dx=Kue(Dx,t),Ox.forEach(e=>{e(Dx)})}function oB({...t}){const e=que(),n=i=>sy({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>sy({type:"DISMISS_TOAST",toastId:e});return sy({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function Gue(){const[t,e]=v.useState(Dx);return v.useEffect(()=>(Ox.push(e),()=>{const n=Ox.indexOf(e);n>-1&&Ox.splice(n,1)}),[t]),{...t,toast:oB,dismiss:n=>sy({type:"DISMISS_TOAST",toastId:n})}}const AR="/assets/catgpt-CLCMo7yA.png",Yue=()=>{const t=Ia(),{register:e,watch:n,setValue:r,formState:{errors:i,isValid:s}}=eS({mode:"onChange",defaultValues:{invitationCode:""}}),o=n("invitationCode"),[a,c]=v.useState(void 0),[d,h]=v.useState(void 0),{mutate:p,isPending:y}=Ju({mutationFn:()=>F9(),onSuccess:_=>{const{id:A,participants:M}=_;ki.set("rsCookie",M.jwt),t(`/room/${A}`),oB({title:"Created a room! ",description:"You can now join in. "})},onError:_=>{console.error("err: ",_)}}),S=()=>i.invitationCode?b.jsx(wO.span,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"ml-4 text-xs text-red-500 block",children:"Invalid invitation format. Try Again."}):null,k=s&&o!=="",C=_=>{const A=_.target.value,M=A.match(/code=([^&]+)/),I=A.match(/room=([^&]+)/);if(M&&I){const N=M[1],O=I[1];r("invitationCode",N),c(N),h(O)}},E=Oq("(max-width: 1500px)");return b.jsxs("div",{className:"flex flex-col gap-32 relative min-h-screen bg-gradient-to-br text-gray-900 px-4 py-12 items-center justify-center",children:[b.jsxs("header",{className:"absolute top-40 left-[104px] flex flex-col items-center text-gray-800",children:[b.jsx("p",{className:"text-4xl font-bold font-mono",children:"Whispurr"}),b.jsx("img",{src:AR,alt:"logo",width:E?124:300})]}),b.jsx(wO.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"w-full flex gap-40 justify-center items-center",children:b.jsxs("div",{className:"flex flex-col gap-12 w-[780px] text-left space-y-8 transition-all duration-500 ease-in-out",children:[b.jsxs("h1",{className:"text-5xl font-extrabold leading-tight text-gray-900",children:["Spin Up a Room. ",b.jsx("span",{className:"text-green-600",children:""}),b.jsx("br",{}),"Start Talking. ",b.jsx("span",{className:"text-green-600",children:""}),b.jsx("br",{}),"Stay Anonymous. ",b.jsx("span",{className:"text-green-600",children:""})]}),b.jsx("h1",{className:"text-4xl text-gray-500",children:"Create a room, share the link, and start talking. Private, encrypted, and zero setup."}),b.jsxs("p",{className:"text-xl text-gray-600",children:["Whispurr (pronounced"," ",b.jsx("span",{className:"text-yellow-600",children:"/wspr/"}),', like "whisper") is a web-based video chat platform that allows you to host encrypted meetings with a single click.']}),b.jsx("p",{className:"text-xl text-gray-600",children:"No sign-ups, no downloads  just being fast and anonymous."}),b.jsxs("div",{className:"flex items-center gap-12",children:[b.jsxs(ls,{onClick:()=>p(),disabled:y,className:"px-24 text-white rounded-xl",children:[b.jsx(bq,{className:"mr-8 size-20"}),y?"Creating room...":"Create Room"]}),b.jsx(Bs,{orientation:"vertical",className:"h-28 bg-gray-300"}),b.jsx("div",{className:"flex flex-col gap-4",children:b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx(Cm,{size:24,placeholder:"Enter your invitation ",value:o,...e("invitationCode",{pattern:{value:/^[\w-]{16}$/,message:"Code must be 16 characters long"},onChange:C})}),b.jsxs(ls,{variant:"call",disabled:!k,onClick:()=>{window.open(`/room-invite?code=${a}&room=${d}&external=false`,"_blank")},className:"w-full px-24",children:[b.jsx(AL,{className:"mr-8 size-20"}),"Join Room"]})]})}),b.jsx(dle,{children:S()})]})]})})]})},Mi=[];for(let t=0;t<256;++t)Mi.push((t+256).toString(16).slice(1));function Que(t,e=0){return(Mi[t[e+0]]+Mi[t[e+1]]+Mi[t[e+2]]+Mi[t[e+3]]+"-"+Mi[t[e+4]]+Mi[t[e+5]]+"-"+Mi[t[e+6]]+Mi[t[e+7]]+"-"+Mi[t[e+8]]+Mi[t[e+9]]+"-"+Mi[t[e+10]]+Mi[t[e+11]]+Mi[t[e+12]]+Mi[t[e+13]]+Mi[t[e+14]]+Mi[t[e+15]]).toLowerCase()}let Gk;const Jue=new Uint8Array(16);function Xue(){if(!Gk){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Gk=crypto.getRandomValues.bind(crypto)}return Gk(Jue)}const Zue=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),CO={randomUUID:Zue};function ede(t,e,n){var i;if(CO.randomUUID&&!t)return CO.randomUUID();t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??Xue();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Que(r)}const Yk=["bg-green-500","bg-red-800","bg-amber-300","bg-blue-500","bg-orange-500","bg-blue-800","bg-yellow-400","bg-cyan-500","bg-lime-300","bg-teal-500","bg-fuchsia-700","bg-rose-500","bg-emerald-500"],jm=v.forwardRef(({className:t,value:e,size:n="lg",editingMode:r=!1,src:i=null,onGetSrc:s},o)=>{const[a,c]=v.useState(),[d,h]=v.useState(""),[p,y]=v.useState("bg-green-500"),S=()=>({"bg-green-500":"0 0 80px 8px rgba(34, 197, 94, 0.6)","bg-red-800":"0 0 80px 8px rgba(153, 27, 27, 0.6)","bg-amber-300":"0 0 80px 8px rgba(252, 211, 77, 0.6)","bg-blue-500":"0 0 80px 8px rgba(59, 130, 246, 0.6)","bg-orange-500":"0 0 80px 8px rgba(249, 115, 22, 0.6)","bg-blue-800":"0 0 80px 8px rgba(30, 64, 175, 0.6)","bg-yellow-400":"0 0 80px 8px rgba(250, 204, 21, 0.6)","bg-cyan-500":"0 0 80px 8px rgba(6, 182, 212, 0.6)","bg-lime-300":"0 0 80px 8px rgba(190, 242, 100, 0.6)","bg-teal-500":"0 0 80px 8px rgba(20, 184, 166, 0.6)","bg-fuchsia-700":"0 0 80px 8px rgba(162, 28, 175, 0.6)","bg-rose-500":"0 0 80px 8px rgba(244, 63, 94, 0.6)","bg-emerald-500":"0 0 80px 8px rgba(16, 185, 129, 0.6)"})[p||"bg-green-500"]||"0 0 80px 8px rgba(34, 197, 94, 0.6)",k=li("flex items-center justify-center rounded-full",{"size-[208px]":n=="lg","size-[72px]":n=="md","size-[28px]":n=="sm","shadow-lg":n=="lg"||n=="md"},p,t),C=li("text-white",{"text-6xl":n=="lg","text-xl":n=="md","text-xs":n=="sm"});v.useEffect(()=>{var M;h(""),y(Yk[0]);const A=e==null?void 0:e.trim();if(A){const I=A.trim().split(""),N=I.includes(" "),O=Math.floor(Math.random()*Yk.length),j=Yk[O];y(j);const V=(M=I[0])==null?void 0:M.toUpperCase();if(N){const $=I.lastIndexOf(" ")+1,W=I[$].toUpperCase(),J=V.concat(W);h(J)}else h(V)}},[e]),v.useEffect(()=>{if(e){const A=ede(),M=qE.join([A,d,p],":");s&&s(M)}},[e,d,p,s]);const _=(()=>{const A=i==null?void 0:i.split(":"),M=A==null?void 0:A.at(0),I=A==null?void 0:A.at(1),N=A==null?void 0:A.at(2);return{id:M,value:I,color:N}})();return v.useEffect(()=>{i&&(c(_.id),h(_.value),y(_.color))},[i,_.id,_.value,_.color]),b.jsx("div",{children:(i||r)&&b.jsx("div",{id:a,ref:o,className:k,style:{boxShadow:n=="lg"?S():"none",filter:n=="lg"?"drop-shadow(0 0 10px currentColor)":"none"},children:b.jsx("div",{className:C,children:d})})})}),Z1=({size:t="md"})=>{const e=li("rounded-full border-violet-300 border-t-violet-700 animate-spin",{"size-16 border-[2px]":t==="sm","size-28 border-4":t==="md","size-64 border-4":t==="lg"});return b.jsx("div",{className:"flex items-center justify-center",children:b.jsx("div",{className:"flex flex-col items-center animate-pulse",children:b.jsx("div",{className:e})})})},IR=v.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:Vt("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));IR.displayName="Card";const aB=v.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:Vt("flex flex-col space-y-1.5 p-6",t),...e}));aB.displayName="CardHeader";const tde=v.forwardRef(({className:t,...e},n)=>b.jsx("h3",{ref:n,className:Vt("text-2xl font-semibold leading-none tracking-tight",t),...e}));tde.displayName="CardTitle";const nde=v.forwardRef(({className:t,...e},n)=>b.jsx("p",{ref:n,className:Vt("text-sm text-muted-foreground",t),...e}));nde.displayName="CardDescription";const lB=v.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:Vt("p-6 pt-0",t),...e}));lB.displayName="CardContent";const rde=v.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:Vt("flex items-center p-6 pt-0",t),...e}));rde.displayName="CardFooter";const ide=()=>{const t=Ia(),[e]=ZW(),n=e.get("external")!=="false",{toast:r}=Gue(),[i,s]=v.useState(null),[o,a]=v.useState(!1),c=e.get("code"),d=e.get("room"),{data:h,isLoading:p,isError:y}=po({queryKey:["authorization",c,d],queryFn:()=>Y9(c,d)}),{mutate:S,isPending:k}=Ju({mutationFn:()=>U9(d),onSuccess:A=>{a(!0),ki.set("rsCookie",A.participant.jwt),t(`/room/${d}`,{state:{roomID:d},replace:!0}),r({description:"Successfully joined in! "})},onError:()=>{a(!1),s("Failed to join room. Something went wrong..")}}),{isValid:C,hasExpired:E}=h||{isValid:!1,hasExpired:!1};v.useEffect(()=>{C||(a(!1),s("Your invitation format is invalid. Please contact the host.")),E&&(a(!1),s("Your invitation has expired or does not exist. Please contact the host.")),y&&(a(!1),s("An error occurred while validating your invitation.")),!E&&C&&!y&&(s(null),a(!0))},[C,E,y]);const _=()=>{if(p)return b.jsxs("div",{className:"flex flex-col items-center gap-8",children:[b.jsx("p",{className:"text-sm animate-pulse text-orange-400",children:"Validating your invitation.."}),b.jsx(Z1,{})]});if(i||y)return b.jsxs("div",{className:"flex flex-col items-center gap-8",children:[b.jsx("p",{className:"text-sm text-red-600",children:i}),b.jsx("div",{className:"animate-circle-entrance",children:b.jsx(uq,{className:"size-32 text-red-600"})})]});if(o)return b.jsxs("div",{className:"flex flex-col items-center gap-8",children:[b.jsx("div",{className:"animate-circle-entrance",children:b.jsx(EL,{className:"size-32 text-green-600"})}),b.jsxs("div",{className:"flex flex-col items-center gap-4",children:[b.jsx("p",{className:"text-sm text-green-600",children:"Invitation is valid!"}),n&&b.jsx("p",{className:"text-sm",children:"You can now join in the room."})]})]})};return b.jsx("div",{className:"flex justify-center items-center mt-[160px]",children:b.jsxs(IR,{className:"w-[500px]",children:[b.jsx(aB,{children:b.jsx("span",{className:"text-xl self-center",children:"Authorization"})}),b.jsxs(lB,{className:"flex flex-col items-center gap-12",children:[b.jsxs("p",{className:"text-sm",children:["Your invitation code: ",c]}),_(),o&&!p&&b.jsxs("div",{className:"flex flex-col items-center gap-12",children:[b.jsxs(ls,{variant:"call",className:"mt-12",onClick:()=>S(),children:[b.jsx(AL,{className:"size-20 mr-8 text-white"}),k?"Joining...":"Join Room"]}),b.jsx("p",{className:"text-xs",children:"By joining a room, you agree to our Terms of Service and Privacy Statement."})]})]})]})})},NR=({message:t,onBeforeLeave:e,shouldBlock:n=!0,allowedPaths:r=[]})=>{const i=qs(),s=v.useRef(!1),o=hW(({currentLocation:a,nextLocation:c})=>!n||s.current?!1:a.pathname.includes("/post-call")?a.pathname!==c.pathname:r.some(h=>c.pathname.includes(h))?!1:a.pathname!==c.pathname);return v.useEffect(()=>{if(o.state==="blocked"){if(i.pathname.includes("/call")||i.pathname.includes("/post-call")){window.confirm(t)?(s.current=!0,e==null||e(),o.proceed()):o.reset();return}window.confirm(t)?(e==null||e(),o.proceed()):o.reset()}},[o,t,e]),v.useEffect(()=>{if(!n)return;const a=c=>{if(i.pathname.includes("/call")||i.pathname.includes("/post-call")){e==null||e(),c.preventDefault();return}c.preventDefault()};return window.addEventListener("beforeunload",a),()=>{window.removeEventListener("beforeunload",a)}},[t,n,e,i.pathname]),{isBlocked:o.state==="blocked"}};function kO(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function cB(...t){return e=>{let n=!1;const r=t.map(i=>{const s=kO(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():kO(t[i],null)}}}}function sde(t){const e=ode(t),n=v.forwardRef((r,i)=>{const{children:s,...o}=r,a=v.Children.toArray(s),c=a.find(lde);if(c){const d=c.props.children,h=a.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return b.jsx(e,{...o,ref:i,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function ode(t){const e=v.forwardRef((n,r)=>{const{children:i,...s}=n;if(v.isValidElement(i)){const o=ude(i),a=cde(s,i.props);return i.type!==v.Fragment&&(a.ref=r?cB(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var ade=Symbol("radix.slottable");function lde(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ade}function cde(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function ude(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var dde=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],fde=dde.reduce((t,e)=>{const n=sde(`Primitive.${e}`),r=v.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function TO(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function MR(...t){return e=>{let n=!1;const r=t.map(i=>{const s=TO(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():TO(t[i],null)}}}}function l0(...t){return v.useCallback(MR(...t),t)}function uB(t){const e=hde(t),n=v.forwardRef((r,i)=>{const{children:s,...o}=r,a=v.Children.toArray(s),c=a.find(mde);if(c){const d=c.props.children,h=a.map(p=>p===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:p);return b.jsx(e,{...o,ref:i,children:v.isValidElement(d)?v.cloneElement(d,void 0,h):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function hde(t){const e=v.forwardRef((n,r)=>{const{children:i,...s}=n;if(v.isValidElement(i)){const o=vde(i),a=gde(s,i.props);return i.type!==v.Fragment&&(a.ref=r?MR(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var pde=Symbol("radix.slottable");function mde(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===pde}function gde(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function vde(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var yde=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],c0=yde.reduce((t,e)=>{const n=uB(`Primitive.${e}`),r=v.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function bde(t,e){t&&Xf.flushSync(()=>t.dispatchEvent(e))}var eE=["Enter"," "],xde=["ArrowDown","PageUp","Home"],dB=["ArrowUp","PageDown","End"],wde=[...xde,...dB],Sde={ltr:[...eE,"ArrowRight"],rtl:[...eE,"ArrowLeft"]},Cde={ltr:["ArrowLeft"],rtl:["ArrowRight"]},u0="Menu",[Py,kde,Tde]=r_(u0),[eh,fB]=Yo(u0,[Tde,Xm,iS]),AS=Xm(),hB=iS(),[Ede,th]=eh(u0),[_de,d0]=eh(u0),pB=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=AS(e),[c,d]=v.useState(null),h=v.useRef(!1),p=Tl(s),y=rS(i);return v.useEffect(()=>{const S=()=>{h.current=!0,document.addEventListener("pointerdown",k,{capture:!0,once:!0}),document.addEventListener("pointermove",k,{capture:!0,once:!0})},k=()=>h.current=!1;return document.addEventListener("keydown",S,{capture:!0}),()=>{document.removeEventListener("keydown",S,{capture:!0}),document.removeEventListener("pointerdown",k,{capture:!0}),document.removeEventListener("pointermove",k,{capture:!0})}},[]),b.jsx(g_,{...a,children:b.jsx(Ede,{scope:e,open:n,onOpenChange:p,content:c,onContentChange:d,children:b.jsx(_de,{scope:e,onClose:v.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:h,dir:y,modal:o,children:r})})})};pB.displayName=u0;var Rde="MenuAnchor",OR=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=AS(n);return b.jsx(v_,{...i,...r,ref:e})});OR.displayName=Rde;var DR="MenuPortal",[Pde,mB]=eh(DR,{forceMount:void 0}),gB=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=th(DR,e);return b.jsx(Pde,{scope:e,forceMount:n,children:b.jsx(Al,{present:n||s.open,children:b.jsx(qw,{asChild:!0,container:i,children:r})})})};gB.displayName=DR;var Go="MenuContent",[Ade,LR]=eh(Go),vB=v.forwardRef((t,e)=>{const n=mB(Go,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=th(Go,t.__scopeMenu),o=d0(Go,t.__scopeMenu);return b.jsx(Py.Provider,{scope:t.__scopeMenu,children:b.jsx(Al,{present:r||s.open,children:b.jsx(Py.Slot,{scope:t.__scopeMenu,children:o.modal?b.jsx(Ide,{...i,ref:e}):b.jsx(Nde,{...i,ref:e})})})})}),Ide=v.forwardRef((t,e)=>{const n=th(Go,t.__scopeMenu),r=v.useRef(null),i=l0(e,r);return v.useEffect(()=>{const s=r.current;if(s)return LE(s)},[]),b.jsx(jR,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ft(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Nde=v.forwardRef((t,e)=>{const n=th(Go,t.__scopeMenu);return b.jsx(jR,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Mde=uB("MenuContent.ScrollLock"),jR=v.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:y,onDismiss:S,disableOutsideScroll:k,...C}=t,E=th(Go,n),_=d0(Go,n),A=AS(n),M=hB(n),I=kde(n),[N,O]=v.useState(null),j=v.useRef(null),V=l0(e,j,E.onContentChange),$=v.useRef(0),W=v.useRef(""),J=v.useRef(0),Y=v.useRef(null),pe=v.useRef("right"),fe=v.useRef(0),Ee=k?Gw:v.Fragment,le=k?{as:Mde,allowPinchZoom:!0}:void 0,Se=te=>{var ie,be;const ae=W.current+te,B=I().filter(Le=>!Le.disabled),de=document.activeElement,se=(ie=B.find(Le=>Le.ref.current===de))==null?void 0:ie.textValue,me=B.map(Le=>Le.textValue),Te=Hde(me,ae,se),Re=(be=B.find(Le=>Le.textValue===Te))==null?void 0:be.ref.current;(function Le($e){W.current=$e,window.clearTimeout($.current),$e!==""&&($.current=window.setTimeout(()=>Le(""),1e3))})(ae),Re&&setTimeout(()=>Re.focus())};v.useEffect(()=>()=>window.clearTimeout($.current),[]),DE();const q=v.useCallback(te=>{var B,de;return pe.current===((B=Y.current)==null?void 0:B.side)&&Kde(te,(de=Y.current)==null?void 0:de.area)},[]);return b.jsx(Ade,{scope:n,searchRef:W,onItemEnter:v.useCallback(te=>{q(te)&&te.preventDefault()},[q]),onItemLeave:v.useCallback(te=>{var ae;q(te)||((ae=j.current)==null||ae.focus(),O(null))},[q]),onTriggerLeave:v.useCallback(te=>{q(te)&&te.preventDefault()},[q]),pointerGraceTimerRef:J,onPointerGraceIntentChange:v.useCallback(te=>{Y.current=te},[]),children:b.jsx(Ee,{...le,children:b.jsx(Hw,{asChild:!0,trapped:i,onMountAutoFocus:ft(s,te=>{var ae;te.preventDefault(),(ae=j.current)==null||ae.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:b.jsx(Yy,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:y,onDismiss:S,children:b.jsx(D2,{asChild:!0,...M,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:N,onCurrentTabStopIdChange:O,onEntryFocus:ft(c,te=>{_.isUsingKeyboardRef.current||te.preventDefault()}),preventScrollOnEntryFocus:!0,children:b.jsx(y_,{role:"menu","aria-orientation":"vertical","data-state":MB(E.open),"data-radix-menu-content":"",dir:_.dir,...A,...C,ref:V,style:{outline:"none",...C.style},onKeyDown:ft(C.onKeyDown,te=>{const B=te.target.closest("[data-radix-menu-content]")===te.currentTarget,de=te.ctrlKey||te.altKey||te.metaKey,se=te.key.length===1;B&&(te.key==="Tab"&&te.preventDefault(),!de&&se&&Se(te.key));const me=j.current;if(te.target!==me||!wde.includes(te.key))return;te.preventDefault();const Re=I().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);dB.includes(te.key)&&Re.reverse(),$de(Re)}),onBlur:ft(t.onBlur,te=>{te.currentTarget.contains(te.target)||(window.clearTimeout($.current),W.current="")}),onPointerMove:ft(t.onPointerMove,Ay(te=>{const ae=te.target,B=fe.current!==te.clientX;if(te.currentTarget.contains(ae)&&B){const de=te.clientX>fe.current?"right":"left";pe.current=de,fe.current=te.clientX}}))})})})})})})});vB.displayName=Go;var Ode="MenuGroup",FR=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return b.jsx(c0.div,{role:"group",...r,ref:e})});FR.displayName=Ode;var Dde="MenuLabel",yB=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return b.jsx(c0.div,{...r,ref:e})});yB.displayName=Dde;var _w="MenuItem",EO="menu.itemSelect",IS=v.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=v.useRef(null),o=d0(_w,t.__scopeMenu),a=LR(_w,t.__scopeMenu),c=l0(e,s),d=v.useRef(!1),h=()=>{const p=s.current;if(!n&&p){const y=new CustomEvent(EO,{bubbles:!0,cancelable:!0});p.addEventListener(EO,S=>r==null?void 0:r(S),{once:!0}),bde(p,y),y.defaultPrevented?d.current=!1:o.onClose()}};return b.jsx(bB,{...i,ref:c,disabled:n,onClick:ft(t.onClick,h),onPointerDown:p=>{var y;(y=t.onPointerDown)==null||y.call(t,p),d.current=!0},onPointerUp:ft(t.onPointerUp,p=>{var y;d.current||(y=p.currentTarget)==null||y.click()}),onKeyDown:ft(t.onKeyDown,p=>{const y=a.searchRef.current!=="";n||y&&p.key===" "||eE.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});IS.displayName=_w;var bB=v.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=LR(_w,n),a=hB(n),c=v.useRef(null),d=l0(e,c),[h,p]=v.useState(!1),[y,S]=v.useState("");return v.useEffect(()=>{const k=c.current;k&&S((k.textContent??"").trim())},[s.children]),b.jsx(Py.ItemSlot,{scope:n,disabled:r,textValue:i??y,children:b.jsx(L2,{asChild:!0,...a,focusable:!r,children:b.jsx(c0.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:d,onPointerMove:ft(t.onPointerMove,Ay(k=>{r?o.onItemLeave(k):(o.onItemEnter(k),k.defaultPrevented||k.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ft(t.onPointerLeave,Ay(k=>o.onItemLeave(k))),onFocus:ft(t.onFocus,()=>p(!0)),onBlur:ft(t.onBlur,()=>p(!1))})})})}),Lde="MenuCheckboxItem",xB=v.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return b.jsx(TB,{scope:t.__scopeMenu,checked:n,children:b.jsx(IS,{role:"menuitemcheckbox","aria-checked":Rw(n)?"mixed":n,...i,ref:e,"data-state":VR(n),onSelect:ft(i.onSelect,()=>r==null?void 0:r(Rw(n)?!0:!n),{checkForDefaultPrevented:!1})})})});xB.displayName=Lde;var wB="MenuRadioGroup",[jde,Fde]=eh(wB,{value:void 0,onValueChange:()=>{}}),SB=v.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=Tl(r);return b.jsx(jde,{scope:t.__scopeMenu,value:n,onValueChange:s,children:b.jsx(FR,{...i,ref:e})})});SB.displayName=wB;var CB="MenuRadioItem",kB=v.forwardRef((t,e)=>{const{value:n,...r}=t,i=Fde(CB,t.__scopeMenu),s=n===i.value;return b.jsx(TB,{scope:t.__scopeMenu,checked:s,children:b.jsx(IS,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":VR(s),onSelect:ft(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});kB.displayName=CB;var UR="MenuItemIndicator",[TB,Ude]=eh(UR,{checked:!1}),EB=v.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=Ude(UR,n);return b.jsx(Al,{present:r||Rw(s.checked)||s.checked===!0,children:b.jsx(c0.span,{...i,ref:e,"data-state":VR(s.checked)})})});EB.displayName=UR;var Vde="MenuSeparator",_B=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return b.jsx(c0.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});_B.displayName=Vde;var Bde="MenuArrow",RB=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=AS(n);return b.jsx(b_,{...i,...r,ref:e})});RB.displayName=Bde;var zde="MenuSub",[qge,PB]=eh(zde),Hv="MenuSubTrigger",AB=v.forwardRef((t,e)=>{const n=th(Hv,t.__scopeMenu),r=d0(Hv,t.__scopeMenu),i=PB(Hv,t.__scopeMenu),s=LR(Hv,t.__scopeMenu),o=v.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=s,d={__scopeMenu:t.__scopeMenu},h=v.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return v.useEffect(()=>h,[h]),v.useEffect(()=>{const p=a.current;return()=>{window.clearTimeout(p),c(null)}},[a,c]),b.jsx(OR,{asChild:!0,...d,children:b.jsx(bB,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":MB(n.open),...t,ref:MR(e,i.onTriggerChange),onClick:p=>{var y;(y=t.onClick)==null||y.call(t,p),!(t.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ft(t.onPointerMove,Ay(p=>{s.onItemEnter(p),!p.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:ft(t.onPointerLeave,Ay(p=>{var S,k;h();const y=(S=n.content)==null?void 0:S.getBoundingClientRect();if(y){const C=(k=n.content)==null?void 0:k.dataset.side,E=C==="right",_=E?-5:5,A=y[E?"left":"right"],M=y[E?"right":"left"];s.onPointerGraceIntentChange({area:[{x:p.clientX+_,y:p.clientY},{x:A,y:y.top},{x:M,y:y.top},{x:M,y:y.bottom},{x:A,y:y.bottom}],side:C}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(p),p.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ft(t.onKeyDown,p=>{var S;const y=s.searchRef.current!=="";t.disabled||y&&p.key===" "||Sde[r.dir].includes(p.key)&&(n.onOpenChange(!0),(S=n.content)==null||S.focus(),p.preventDefault())})})})});AB.displayName=Hv;var IB="MenuSubContent",NB=v.forwardRef((t,e)=>{const n=mB(Go,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=th(Go,t.__scopeMenu),o=d0(Go,t.__scopeMenu),a=PB(IB,t.__scopeMenu),c=v.useRef(null),d=l0(e,c);return b.jsx(Py.Provider,{scope:t.__scopeMenu,children:b.jsx(Al,{present:r||s.open,children:b.jsx(Py.Slot,{scope:t.__scopeMenu,children:b.jsx(jR,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var p;o.isUsingKeyboardRef.current&&((p=c.current)==null||p.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:ft(t.onFocusOutside,h=>{h.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ft(t.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:ft(t.onKeyDown,h=>{var S;const p=h.currentTarget.contains(h.target),y=Cde[o.dir].includes(h.key);p&&y&&(s.onOpenChange(!1),(S=a.trigger)==null||S.focus(),h.preventDefault())})})})})})});NB.displayName=IB;function MB(t){return t?"open":"closed"}function Rw(t){return t==="indeterminate"}function VR(t){return Rw(t)?"indeterminate":t?"checked":"unchecked"}function $de(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Wde(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Hde(t,e,n){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Wde(t,Math.max(s,0));i.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function qde(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],c=e[o],d=a.x,h=a.y,p=c.x,y=c.y;h>r!=y>r&&n<(p-d)*(r-h)/(y-h)+d&&(i=!i)}return i}function Kde(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return qde(n,e)}function Ay(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Gde=pB,Yde=OR,Qde=gB,Jde=vB,Xde=FR,Zde=yB,efe=IS,tfe=xB,nfe=SB,rfe=kB,ife=EB,sfe=_B,ofe=RB,afe=AB,lfe=NB,NS="DropdownMenu",[cfe,Kge]=Yo(NS,[fB]),fs=fB(),[ufe,OB]=cfe(NS),DB=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,c=fs(e),d=v.useRef(null),[h,p]=Zu({prop:i,defaultProp:s??!1,onChange:o,caller:NS});return b.jsx(ufe,{scope:e,triggerId:bl(),triggerRef:d,contentId:bl(),open:h,onOpenChange:p,onOpenToggle:v.useCallback(()=>p(y=>!y),[p]),modal:a,children:b.jsx(Gde,{...c,open:h,onOpenChange:p,dir:r,modal:a,children:n})})};DB.displayName=NS;var LB="DropdownMenuTrigger",jB=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=OB(LB,n),o=fs(n);return b.jsx(Yde,{asChild:!0,...o,children:b.jsx(fde.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:cB(e,s.triggerRef),onPointerDown:ft(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ft(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});jB.displayName=LB;var dfe="DropdownMenuPortal",FB=t=>{const{__scopeDropdownMenu:e,...n}=t,r=fs(e);return b.jsx(Qde,{...r,...n})};FB.displayName=dfe;var UB="DropdownMenuContent",VB=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=OB(UB,n),s=fs(n),o=v.useRef(!1);return b.jsx(Jde,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:ft(t.onCloseAutoFocus,a=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ft(t.onInteractOutside,a=>{const c=a.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,h=c.button===2||d;(!i.modal||h)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});VB.displayName=UB;var ffe="DropdownMenuGroup",BB=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fs(n);return b.jsx(Xde,{...i,...r,ref:e})});BB.displayName=ffe;var hfe="DropdownMenuLabel",zB=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fs(n);return b.jsx(Zde,{...i,...r,ref:e})});zB.displayName=hfe;var pfe="DropdownMenuItem",$B=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fs(n);return b.jsx(efe,{...i,...r,ref:e})});$B.displayName=pfe;var mfe="DropdownMenuCheckboxItem",gfe=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fs(n);return b.jsx(tfe,{...i,...r,ref:e})});gfe.displayName=mfe;var vfe="DropdownMenuRadioGroup",WB=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fs(n);return b.jsx(nfe,{...i,...r,ref:e})});WB.displayName=vfe;var yfe="DropdownMenuRadioItem",HB=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fs(n);return b.jsx(rfe,{...i,...r,ref:e})});HB.displayName=yfe;var bfe="DropdownMenuItemIndicator",qB=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fs(n);return b.jsx(ife,{...i,...r,ref:e})});qB.displayName=bfe;var xfe="DropdownMenuSeparator",KB=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fs(n);return b.jsx(sfe,{...i,...r,ref:e})});KB.displayName=xfe;var wfe="DropdownMenuArrow",Sfe=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fs(n);return b.jsx(ofe,{...i,...r,ref:e})});Sfe.displayName=wfe;var Cfe="DropdownMenuSubTrigger",kfe=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fs(n);return b.jsx(afe,{...i,...r,ref:e})});kfe.displayName=Cfe;var Tfe="DropdownMenuSubContent",Efe=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fs(n);return b.jsx(lfe,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Efe.displayName=Tfe;var _fe=DB,Rfe=jB,Pfe=FB,Afe=VB,Ife=BB,Nfe=zB,Mfe=$B,Ofe=WB,Dfe=HB,Lfe=qB,jfe=KB;function tE({...t}){return b.jsx(_fe,{"data-slot":"dropdown-menu",...t})}function nE({...t}){return b.jsx(Rfe,{"data-slot":"dropdown-menu-trigger",...t})}function GB({className:t,sideOffset:e=4,...n}){return b.jsx(Pfe,{children:b.jsx(Afe,{"data-slot":"dropdown-menu-content",sideOffset:e,className:Vt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function Ffe({...t}){return b.jsx(Ife,{"data-slot":"dropdown-menu-group",...t})}function Ufe({className:t,inset:e,variant:n="default",...r}){return b.jsx(Mfe,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":n,className:Vt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function Vfe({...t}){return b.jsx(Ofe,{"data-slot":"dropdown-menu-radio-group",...t})}function Bfe({className:t,children:e,...n}){return b.jsxs(Dfe,{"data-slot":"dropdown-menu-radio-item",className:Vt("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-8 rounded-sm py-8 pr-8 pl-24 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[b.jsx("span",{className:"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center",children:b.jsx(Lfe,{children:b.jsx(_L,{className:"size-2 fill-current"})})}),e]})}function zfe({className:t,inset:e,...n}){return b.jsx(Nfe,{"data-slot":"dropdown-menu-label","data-inset":e,className:Vt("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...n})}function $fe({className:t,...e}){return b.jsx(jfe,{"data-slot":"dropdown-menu-separator",className:Vt("bg-border -mx-1 my-1 h-px",t),...e})}const Wfe=({settings:t,isHost:e,audioDevices:n,videoDevices:r,audioActiveDeviceId:i,videoActiveDeviceId:s,setAudioActiveDevice:o,setVideoActiveDevice:a,mediaState:c,setAudioState:d,setVideoState:h})=>{const{invite_permission:p}=t,y=async _=>{o(_)},S=async _=>{a(_)},k=_=>{const A=_?n:r,M=_?i:s;return b.jsxs(GB,{side:"bottom",align:"start",children:[b.jsx(zfe,{children:_?"Audio Device":"Video Device"}),b.jsx($fe,{}),A.map(I=>{const N=M===I.deviceId;return b.jsx(Vfe,{value:M,onValueChange:O=>_?y(O):S(O),children:b.jsx(Bfe,{value:I.deviceId,disabled:N,children:I.label},I.deviceId)},I.deviceId)})]})},C=li("size-40 rounded-full flex items-center justify-center cursor-pointer transition-all duration-200 hover:scale-105",{"bg-gray-100 border border-gray-200 text-gray-700 hover:bg-gray-200":c.audio,"bg-red-500 border border-red-500 text-white hover:bg-red-600":!c.audio}),E=li("size-40 rounded-full flex items-center justify-center cursor-pointer transition-all duration-200 hover:scale-105",{"bg-gray-100 border border-gray-200 text-gray-700 hover:bg-gray-200":c.video,"bg-red-500 border border-red-500 text-white hover:bg-red-600":!c.video});return b.jsxs("div",{className:"flex items-center justify-center gap-8 mt-16",children:[b.jsxs("div",{className:"relative",children:[b.jsx("button",{className:C,onClick:()=>d(!c.audio),children:c.audio?b.jsx(Gy,{size:16}):b.jsx($w,{size:16})}),b.jsxs(tE,{children:[b.jsx(nE,{asChild:!0,children:b.jsx("button",{className:"absolute -bottom-4 -right-4 size-20 rounded-full border border-gray-300 bg-white hover:bg-gray-100 transition-colors duration-200 flex items-center justify-center shadow-sm",children:b.jsx(RT,{className:"size-8 text-gray-600 rotate-180"})})}),k(!0)]})]}),b.jsxs("div",{className:"relative",children:[b.jsx("button",{className:E,onClick:()=>h(!c.video),children:c.video?b.jsx(Ww,{size:16}):b.jsx(PE,{size:16})}),b.jsxs(tE,{children:[b.jsx(nE,{asChild:!0,children:b.jsx("button",{className:"absolute -bottom-4 -right-4 size-20 rounded-full border border-gray-300 bg-white hover:bg-gray-100 transition-colors duration-200 flex items-center justify-center shadow-sm",children:b.jsx(RT,{className:"size-8 text-gray-600 rotate-180"})})}),k(!1)]})]}),b.jsx(Bs,{orientation:"vertical",className:"h-6 bg-gray-200"}),b.jsxs("div",{className:"flex items-center gap-8",children:[(p||e)&&b.jsx(_j,{}),b.jsx(_4,{})]})]})},Hfe="/assets/join_tone-RSu01O8x.mp3",qfe=({isHost:t,username:e,setUsername:n,avatarSrc:r,isCallActive:i})=>{const{sendSystemEvent:s}=Wm(),{register:o,watch:a,formState:{isValid:c},reset:d}=eS({mode:"onChange",defaultValues:{username:e||""}}),h=a("username");v.useEffect(()=>{d({username:e||""})},[e,d]);const{pathname:p}=qs(),y=Ia(),S=p.split("/")[2],k=ki.get("rsCookie"),{mutate:C,isPending:E}=Ju({mutationFn:()=>V9(S),retry:!0}),_=async()=>{try{const I=await G9(S,k);await q9(S,h,r,k),t&&C();const N=new Audio(Hfe);N.volume=.6,N.play(),s({type:"user.joined",payload:{}}),y(`/room/${S}/call`,{state:{roomID:S,sessionID:I},replace:!0})}catch(I){console.error(I)}},A=()=>E?"Starting call...":t?"Start Call":"Join Call",M=!c||!i&&!t||E;return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"mb-16",children:[b.jsx(Cm,{placeholder:"Enter your name",...o("username",{required:!0,minLength:{value:3,message:"Username must be at least 3 characters long."},maxLength:{value:16,message:"Username should not exceed over 16 characters length."}}),onChange:I=>n(I.target.value)}),b.jsx("div",{className:" mt-8 ml-12 flex items-center gap-4 text-xs text-muted-foreground line-clamp-2",children:" Username must be between 3 and 16 characters long and will be your display name throughout the call."})]}),b.jsx(ls,{variant:"call",className:"w-full",disabled:M,onClick:_,children:A()}),!i&&!t&&b.jsx("div",{className:"flex justify-center mt-8",children:b.jsx("span",{className:"text-xs text-muted-foreground text-center",children:"Please wait for the host to start the call."})})]})},YB=6048e5,Kfe=864e5,Gfe=6e4,Yfe=36e5,Qfe=1e3,ex=43200,_O=1440,RO=Symbol.for("constructDateFrom");function ui(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&RO in t?t[RO](e):t instanceof Date?new t.constructor(e):new Date(e)}function Zn(t,e){return ui(e||t,t)}function QB(t,e,n){const r=Zn(t,n==null?void 0:n.in);return isNaN(e)?ui((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}let Jfe={};function nh(){return Jfe}function cd(t,e){var a,c,d,h;const n=nh(),r=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,i=Zn(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Fm(t,e){return cd(t,{...e,weekStartsOn:1})}function JB(t,e){const n=Zn(t,e==null?void 0:e.in),r=n.getFullYear(),i=ui(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Fm(i),o=ui(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Fm(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function Um(t){const e=Zn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function MS(t,...e){const n=ui.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function PO(t,e){const n=Zn(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function Xfe(t,e,n){const[r,i]=MS(n==null?void 0:n.in,t,e),s=PO(r),o=PO(i),a=+s-Um(s),c=+o-Um(o);return Math.round((a-c)/Kfe)}function Zfe(t,e){const n=JB(t,e),r=ui(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Fm(r)}function Lx(t,e){const n=+Zn(t)-+Zn(e);return n<0?-1:n>0?1:n}function ehe(t){return ui(t,Date.now())}function the(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function nhe(t){return!(!the(t)&&typeof t!="number"||isNaN(+Zn(t)))}function rhe(t,e,n){const[r,i]=MS(n==null?void 0:n.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function ihe(t){return e=>{const n=Math.trunc,r=n(e);return r===0?0:r}}function she(t,e){return+Zn(t)-+Zn(e)}function ohe(t,e){const n=Zn(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function ahe(t,e){const n=Zn(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function lhe(t,e){const n=Zn(t,e==null?void 0:e.in);return+ohe(n,e)==+ahe(n,e)}function che(t,e,n){const[r,i,s]=MS(n==null?void 0:n.in,t,t,e),o=Lx(i,s),a=Math.abs(rhe(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let c=Lx(i,s)===-o;lhe(r)&&a===1&&Lx(r,s)===1&&(c=!1);const d=o*(a-+c);return d===0?0:d}function uhe(t,e,n){const r=she(t,e)/1e3;return ihe()(r)}function dhe(t,e){const n=Zn(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const fhe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},hhe=(t,e,n)=>{let r;const i=fhe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Qk(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const phe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},mhe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ghe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},vhe={date:Qk({formats:phe,defaultWidth:"full"}),time:Qk({formats:mhe,defaultWidth:"full"}),dateTime:Qk({formats:ghe,defaultWidth:"full"})},yhe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},bhe=(t,e,n,r)=>yhe[t];function Dv(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const xhe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},whe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},She={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Che={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},khe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},The={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ehe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},_he={ordinalNumber:Ehe,era:Dv({values:xhe,defaultWidth:"wide"}),quarter:Dv({values:whe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Dv({values:She,defaultWidth:"wide"}),day:Dv({values:Che,defaultWidth:"wide"}),dayPeriod:Dv({values:khe,defaultWidth:"wide",formattingValues:The,defaultFormattingWidth:"wide"})};function Lv(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(a)?Phe(a,p=>p.test(o)):Rhe(a,p=>p.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const h=e.slice(o.length);return{value:d,rest:h}}}function Rhe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Phe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Ahe(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const Ihe=/^(\d+)(th|st|nd|rd)?/i,Nhe=/\d+/i,Mhe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ohe={any:[/^b/i,/^(a|c)/i]},Dhe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Lhe={any:[/1/i,/2/i,/3/i,/4/i]},jhe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Fhe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Uhe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Vhe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Bhe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zhe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$he={ordinalNumber:Ahe({matchPattern:Ihe,parsePattern:Nhe,valueCallback:t=>parseInt(t,10)}),era:Lv({matchPatterns:Mhe,defaultMatchWidth:"wide",parsePatterns:Ohe,defaultParseWidth:"any"}),quarter:Lv({matchPatterns:Dhe,defaultMatchWidth:"wide",parsePatterns:Lhe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Lv({matchPatterns:jhe,defaultMatchWidth:"wide",parsePatterns:Fhe,defaultParseWidth:"any"}),day:Lv({matchPatterns:Uhe,defaultMatchWidth:"wide",parsePatterns:Vhe,defaultParseWidth:"any"}),dayPeriod:Lv({matchPatterns:Bhe,defaultMatchWidth:"any",parsePatterns:zhe,defaultParseWidth:"any"})},BR={code:"en-US",formatDistance:hhe,formatLong:vhe,formatRelative:bhe,localize:_he,match:$he,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Whe(t,e){const n=Zn(t,e==null?void 0:e.in);return Xfe(n,dhe(n))+1}function XB(t,e){const n=Zn(t,e==null?void 0:e.in),r=+Fm(n)-+Zfe(n);return Math.round(r/YB)+1}function zR(t,e){var h,p,y,S;const n=Zn(t,e==null?void 0:e.in),r=n.getFullYear(),i=nh(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((S=(y=i.locale)==null?void 0:y.options)==null?void 0:S.firstWeekContainsDate)??1,o=ui((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=cd(o,e),c=ui((e==null?void 0:e.in)||t,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const d=cd(c,e);return+n>=+a?r+1:+n>=+d?r:r-1}function Hhe(t,e){var a,c,d,h;const n=nh(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,i=zR(t,e),s=ui((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),cd(s,e)}function ZB(t,e){const n=Zn(t,e==null?void 0:e.in),r=+cd(n,e)-+Hhe(n,e);return Math.round(r/YB)+1}function Un(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ku={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Un(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Un(n+1,2)},d(t,e){return Un(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Un(t.getHours()%12||12,e.length)},H(t,e){return Un(t.getHours(),e.length)},m(t,e){return Un(t.getMinutes(),e.length)},s(t,e){return Un(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Un(i,e.length)}},Ip={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},AO={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ku.y(t,e)},Y:function(t,e,n,r){const i=zR(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Un(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Un(s,e.length)},R:function(t,e){const n=JB(t);return Un(n,e.length)},u:function(t,e){const n=t.getFullYear();return Un(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Un(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Un(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ku.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Un(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=ZB(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Un(i,e.length)},I:function(t,e,n){const r=XB(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Un(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ku.d(t,e)},D:function(t,e,n){const r=Whe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Un(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Un(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Un(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Un(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Ip.noon:r===0?i=Ip.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Ip.evening:r>=12?i=Ip.afternoon:r>=4?i=Ip.morning:i=Ip.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ku.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ku.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Un(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Un(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ku.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ku.s(t,e)},S:function(t,e){return ku.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return NO(r);case"XXXX":case"XX":return pf(r);case"XXXXX":case"XXX":default:return pf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return NO(r);case"xxxx":case"xx":return pf(r);case"xxxxx":case"xxx":default:return pf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+IO(r,":");case"OOOO":default:return"GMT"+pf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+IO(r,":");case"zzzz":default:return"GMT"+pf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Un(r,e.length)},T:function(t,e,n){return Un(+t,e.length)}};function IO(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Un(s,2)}function NO(t,e){return t%60===0?(t>0?"-":"+")+Un(Math.abs(t)/60,2):pf(t,e)}function pf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Un(Math.trunc(r/60),2),s=Un(r%60,2);return n+i+e+s}const MO=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ez=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},qhe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return MO(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",MO(r,e)).replace("{{time}}",ez(i,e))},rE={p:ez,P:qhe},Khe=/^D+$/,Ghe=/^Y+$/,Yhe=["D","DD","YY","YYYY"];function tz(t){return Khe.test(t)}function nz(t){return Ghe.test(t)}function iE(t,e,n){const r=Qhe(t,e,n);if(console.warn(r),Yhe.includes(t))throw new RangeError(r)}function Qhe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Jhe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Xhe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Zhe=/^'([^]*?)'?$/,epe=/''/g,tpe=/[a-zA-Z]/;function rz(t,e,n){var h,p,y,S;const r=nh(),i=r.locale??BR,s=r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=r.weekStartsOn??((S=(y=r.locale)==null?void 0:y.options)==null?void 0:S.weekStartsOn)??0,a=Zn(t,n==null?void 0:n.in);if(!nhe(a))throw new RangeError("Invalid time value");let c=e.match(Xhe).map(k=>{const C=k[0];if(C==="p"||C==="P"){const E=rE[C];return E(k,i.formatLong)}return k}).join("").match(Jhe).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const C=k[0];if(C==="'")return{isToken:!1,value:npe(k)};if(AO[C])return{isToken:!0,value:k};if(C.match(tpe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:k}});i.localize.preprocessor&&(c=i.localize.preprocessor(a,c));const d={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return c.map(k=>{if(!k.isToken)return k.value;const C=k.value;(nz(C)||tz(C))&&iE(C,e,String(t));const E=AO[C[0]];return E(a,C,i.localize,d)}).join("")}function npe(t){const e=t.match(Zhe);return e?e[1].replace(epe,"'"):t}function rpe(t,e,n){const r=nh(),i=(n==null?void 0:n.locale)??r.locale??BR,s=2520,o=Lx(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o}),[c,d]=MS(n==null?void 0:n.in,...o>0?[e,t]:[t,e]),h=uhe(d,c),p=(Um(d)-Um(c))/1e3,y=Math.round((h-p)/60);let S;if(y<2)return y===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",y,a);if(y<45)return i.formatDistance("xMinutes",y,a);if(y<90)return i.formatDistance("aboutXHours",1,a);if(y<_O){const k=Math.round(y/60);return i.formatDistance("aboutXHours",k,a)}else{if(y<s)return i.formatDistance("xDays",1,a);if(y<ex){const k=Math.round(y/_O);return i.formatDistance("xDays",k,a)}else if(y<ex*2)return S=Math.round(y/ex),i.formatDistance("aboutXMonths",S,a)}if(S=che(d,c),S<12){const k=Math.round(y/ex);return i.formatDistance("xMonths",k,a)}else{const k=S%12,C=Math.trunc(S/12);return k<3?i.formatDistance("aboutXYears",C,a):k<9?i.formatDistance("overXYears",C,a):i.formatDistance("almostXYears",C+1,a)}}function Jk(t,e){return rpe(t,ehe(t),e)}function ipe(){return Object.assign({},nh())}function spe(t,e){const n=Zn(t,e==null?void 0:e.in).getDay();return n===0?7:n}function ope(t,e){const n=ape(e)?new e(0):ui(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function ape(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const lpe=10;class iz{constructor(){lt(this,"subPriority",0)}validate(e,n){return!0}}class cpe extends iz{constructor(e,n,r,i,s){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class upe extends iz{constructor(n,r){super();lt(this,"priority",lpe);lt(this,"subPriority",-1);this.context=n||(i=>ui(r,i))}set(n,r){return r.timestampIsSet?n:ui(n,ope(n,this.context))}}class In{run(e,n,r,i){const s=this.parse(e,n,r,i);return s?{setter:new cpe(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,n,r){return!0}}class dpe extends In{constructor(){super(...arguments);lt(this,"priority",140);lt(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const Fr={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},gl={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ur(t,e){return t&&{value:e(t.value),rest:t.rest}}function vr(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function vl(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*Yfe+s*Gfe+o*Qfe),rest:e.slice(n[0].length)}}function sz(t){return vr(Fr.anyDigitsSigned,t)}function Ar(t,e){switch(t){case 1:return vr(Fr.singleDigit,e);case 2:return vr(Fr.twoDigits,e);case 3:return vr(Fr.threeDigits,e);case 4:return vr(Fr.fourDigits,e);default:return vr(new RegExp("^\\d{1,"+t+"}"),e)}}function Pw(t,e){switch(t){case 1:return vr(Fr.singleDigitSigned,e);case 2:return vr(Fr.twoDigitsSigned,e);case 3:return vr(Fr.threeDigitsSigned,e);case 4:return vr(Fr.fourDigitsSigned,e);default:return vr(new RegExp("^-?\\d{1,"+t+"}"),e)}}function $R(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function oz(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function az(t){return t%400===0||t%4===0&&t%100!==0}class fpe extends In{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return Ur(Ar(4,n),s);case"yo":return Ur(i.ordinalNumber(n,{unit:"year"}),s);default:return Ur(Ar(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const s=n.getFullYear();if(i.isTwoDigitYear){const a=oz(i.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class hpe extends In{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Ur(Ar(4,n),s);case"Yo":return Ur(i.ordinalNumber(n,{unit:"year"}),s);default:return Ur(Ar(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,s){const o=zR(n,s);if(i.isTwoDigitYear){const c=oz(i.year,o);return n.setFullYear(c,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),cd(n,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),cd(n,s)}}class ppe extends In{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return Pw(r==="R"?4:r.length,n)}set(n,r,i){const s=ui(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Fm(s)}}class mpe extends In{constructor(){super(...arguments);lt(this,"priority",130);lt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return Pw(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class gpe extends In{constructor(){super(...arguments);lt(this,"priority",120);lt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return Ar(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class vpe extends In{constructor(){super(...arguments);lt(this,"priority",120);lt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return Ar(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class ype extends In{constructor(){super(...arguments);lt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);lt(this,"priority",110)}parse(n,r,i){const s=o=>o-1;switch(r){case"M":return Ur(vr(Fr.month,n),s);case"MM":return Ur(Ar(2,n),s);case"Mo":return Ur(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class bpe extends In{constructor(){super(...arguments);lt(this,"priority",110);lt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const s=o=>o-1;switch(r){case"L":return Ur(vr(Fr.month,n),s);case"LL":return Ur(Ar(2,n),s);case"Lo":return Ur(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function xpe(t,e,n){const r=Zn(t,n==null?void 0:n.in),i=ZB(r,n)-e;return r.setDate(r.getDate()-i*7),Zn(r,n==null?void 0:n.in)}class wpe extends In{constructor(){super(...arguments);lt(this,"priority",100);lt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return vr(Fr.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return Ar(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,s){return cd(xpe(n,i,s),s)}}function Spe(t,e,n){const r=Zn(t,n==null?void 0:n.in),i=XB(r,n)-e;return r.setDate(r.getDate()-i*7),r}class Cpe extends In{constructor(){super(...arguments);lt(this,"priority",100);lt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return vr(Fr.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return Ar(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return Fm(Spe(n,i))}}const kpe=[31,28,31,30,31,30,31,31,30,31,30,31],Tpe=[31,29,31,30,31,30,31,31,30,31,30,31];class Epe extends In{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"subPriority",1);lt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return vr(Fr.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return Ar(r.length,n)}}validate(n,r){const i=n.getFullYear(),s=az(i),o=n.getMonth();return s?r>=1&&r<=Tpe[o]:r>=1&&r<=kpe[o]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class _pe extends In{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"subpriority",1);lt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return vr(Fr.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return Ar(r.length,n)}}validate(n,r){const i=n.getFullYear();return az(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function WR(t,e,n){var p,y,S,k;const r=nh(),i=(n==null?void 0:n.weekStartsOn)??((y=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((k=(S=r.locale)==null?void 0:S.options)==null?void 0:k.weekStartsOn)??0,s=Zn(t,n==null?void 0:n.in),o=s.getDay(),c=(e%7+7)%7,d=7-i,h=e<0||e>6?e-(o+d)%7:(c+d)%7-(o+d)%7;return QB(s,h,n)}class Rpe extends In{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=WR(n,i,s),n.setHours(0,0,0,0),n}}class Ppe extends In{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,s){const o=a=>{const c=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+c};switch(r){case"e":case"ee":return Ur(Ar(r.length,n),o);case"eo":return Ur(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=WR(n,i,s),n.setHours(0,0,0,0),n}}class Ape extends In{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,s){const o=a=>{const c=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+c};switch(r){case"c":case"cc":return Ur(Ar(r.length,n),o);case"co":return Ur(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=WR(n,i,s),n.setHours(0,0,0,0),n}}function Ipe(t,e,n){const r=Zn(t,n==null?void 0:n.in),i=spe(r,n),s=e-i;return QB(r,s,n)}class Npe extends In{constructor(){super(...arguments);lt(this,"priority",90);lt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return Ar(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return Ur(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return Ur(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Ur(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Ur(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=Ipe(n,i),n.setHours(0,0,0,0),n}}class Mpe extends In{constructor(){super(...arguments);lt(this,"priority",80);lt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours($R(i),0,0,0),n}}class Ope extends In{constructor(){super(...arguments);lt(this,"priority",80);lt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours($R(i),0,0,0),n}}class Dpe extends In{constructor(){super(...arguments);lt(this,"priority",80);lt(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours($R(i),0,0,0),n}}class Lpe extends In{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return vr(Fr.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return Ar(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const s=n.getHours()>=12;return s&&i<12?n.setHours(i+12,0,0,0):!s&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class jpe extends In{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return vr(Fr.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return Ar(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class Fpe extends In{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return vr(Fr.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return Ar(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class Upe extends In{constructor(){super(...arguments);lt(this,"priority",70);lt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return vr(Fr.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return Ar(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const s=i<=24?i%24:i;return n.setHours(s,0,0,0),n}}class Vpe extends In{constructor(){super(...arguments);lt(this,"priority",60);lt(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return vr(Fr.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return Ar(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class Bpe extends In{constructor(){super(...arguments);lt(this,"priority",50);lt(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return vr(Fr.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return Ar(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class zpe extends In{constructor(){super(...arguments);lt(this,"priority",30);lt(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Ur(Ar(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class $pe extends In{constructor(){super(...arguments);lt(this,"priority",10);lt(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return vl(gl.basicOptionalMinutes,n);case"XX":return vl(gl.basic,n);case"XXXX":return vl(gl.basicOptionalSeconds,n);case"XXXXX":return vl(gl.extendedOptionalSeconds,n);case"XXX":default:return vl(gl.extended,n)}}set(n,r,i){return r.timestampIsSet?n:ui(n,n.getTime()-Um(n)-i)}}class Wpe extends In{constructor(){super(...arguments);lt(this,"priority",10);lt(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return vl(gl.basicOptionalMinutes,n);case"xx":return vl(gl.basic,n);case"xxxx":return vl(gl.basicOptionalSeconds,n);case"xxxxx":return vl(gl.extendedOptionalSeconds,n);case"xxx":default:return vl(gl.extended,n)}}set(n,r,i){return r.timestampIsSet?n:ui(n,n.getTime()-Um(n)-i)}}class Hpe extends In{constructor(){super(...arguments);lt(this,"priority",40);lt(this,"incompatibleTokens","*")}parse(n){return sz(n)}set(n,r,i){return[ui(n,i*1e3),{timestampIsSet:!0}]}}class qpe extends In{constructor(){super(...arguments);lt(this,"priority",20);lt(this,"incompatibleTokens","*")}parse(n){return sz(n)}set(n,r,i){return[ui(n,i),{timestampIsSet:!0}]}}const Kpe={G:new dpe,y:new fpe,Y:new hpe,R:new ppe,u:new mpe,Q:new gpe,q:new vpe,M:new ype,L:new bpe,w:new wpe,I:new Cpe,d:new Epe,D:new _pe,E:new Rpe,e:new Ppe,c:new Ape,i:new Npe,a:new Mpe,b:new Ope,B:new Dpe,h:new Lpe,H:new jpe,K:new Fpe,k:new Upe,m:new Vpe,s:new Bpe,S:new zpe,X:new $pe,x:new Wpe,t:new Hpe,T:new qpe},Gpe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ype=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Qpe=/^'([^]*?)'?$/,Jpe=/''/g,Xpe=/\S/,Zpe=/[a-zA-Z]/;function eme(t,e,n,r){var E,_,A,M;const i=()=>ui(n,NaN),s=ipe(),o=s.locale??BR,a=s.firstWeekContainsDate??((_=(E=s.locale)==null?void 0:E.options)==null?void 0:_.firstWeekContainsDate)??1,c=s.weekStartsOn??((M=(A=s.locale)==null?void 0:A.options)==null?void 0:M.weekStartsOn)??0,d={firstWeekContainsDate:a,weekStartsOn:c,locale:o},h=[new upe(r==null?void 0:r.in,n)],p=e.match(Ype).map(I=>{const N=I[0];if(N in rE){const O=rE[N];return O(I,o.formatLong)}return I}).join("").match(Gpe),y=[];for(let I of p){nz(I)&&iE(I,e,t),tz(I)&&iE(I,e,t);const N=I[0],O=Kpe[N];if(O){const{incompatibleTokens:j}=O;if(Array.isArray(j)){const $=y.find(W=>j.includes(W.token)||W.token===N);if($)throw new RangeError(`The format string mustn't contain \`${$.fullToken}\` and \`${I}\` at the same time`)}else if(O.incompatibleTokens==="*"&&y.length>0)throw new RangeError(`The format string mustn't contain \`${I}\` and any other token at the same time`);y.push({token:N,fullToken:I});const V=O.run(t,I,o.match,d);if(!V)return i();h.push(V.setter),t=V.rest}else{if(N.match(Zpe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");if(I==="''"?I="'":N==="'"&&(I=tme(I)),t.indexOf(I)===0)t=t.slice(I.length);else return i()}}if(t.length>0&&Xpe.test(t))return i();const S=h.map(I=>I.priority).sort((I,N)=>N-I).filter((I,N,O)=>O.indexOf(I)===N).map(I=>h.filter(N=>N.priority===I).sort((N,O)=>O.subPriority-N.subPriority)).map(I=>I[0]);let k=Zn(n,r==null?void 0:r.in);if(isNaN(+k))return i();const C={};for(const I of S){if(!I.validate(k,d))return i();const N=I.set(k,C,d);Array.isArray(N)?(k=N[0],Object.assign(C,N[1])):k=N}return k}function tme(t){return t.match(Qpe)[1].replace(Jpe,"'")}const nme=({isHost:t,host:e,createdAt:n,isCallActive:r,callStartedAt:i})=>t?b.jsxs("div",{className:"flex items-center justify-center gap-4 mt-24",children:[b.jsx(wm,{size:12,className:"text-yellow-600"}),b.jsx("span",{className:"text-xs text-gray-600",children:"You are the host of this call."})]}):b.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 mt-24",children:[b.jsxs("div",{className:"flex items-center justify-center gap-4",children:[b.jsx(wm,{size:12,className:"text-yellow-600"}),b.jsx("span",{className:"text-xs text-gray-600",children:e?`${e} created this room, ${Jk(new Date(n))} ago.`:`Room was created ${Jk(new Date(n))} ago.`})]}),r&&b.jsxs("div",{className:"flex items-center justify-center gap-4",children:[b.jsx(vq,{size:12,className:"text-green-600"}),b.jsxs("span",{className:"text-xs text-gray-600",children:["Call started, ",Jk(new Date(i))," ago."]})]})]}),rme=()=>b.jsxs("section",{className:"rounded-8 border border-purple-200 p-12 mt-20 bg-gradient-to-br from-purple-50 to-purple-100 shadow-sm",children:[b.jsxs("div",{className:"flex items-center gap-8 mb-8",children:[b.jsx("div",{className:"size-36 rounded-xl bg-purple-600 text-white flex items-center justify-center shadow-md",children:b.jsx(Eq,{size:16})}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-sm font-semibold text-purple-900",children:"NFT Login Access"}),b.jsx("p",{className:"text-[11px] text-purple-700 -mt-0.5",children:"Add wallet-based login verification"})]})]}),b.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[b.jsx("p",{className:"text-[11px] text-purple-700 max-w-[70%] leading-snug",children:"Only users holding the required NFT will aquire access to this room."}),b.jsx("button",{className:"shrink-0 inline-flex items-center rounded-full bg-purple-600 text-white px-3 py-1.5 text-[10px] font-medium shadow hover:bg-purple-700 active:bg-purple-800 transition",children:"Enable"})]})]}),ime=({selectedAudioDevice:t,selectedVideoDevice:e})=>{const n=r=>r?r.label:b.jsx("p",{className:"text-xs text-yellow-600",children:"Requires media permission"});return b.jsxs("div",{className:`flex flex-col gap-8 p-8 mt-24 outline outline-slate-200 rounded-4 
                shadow-[0_4px_20px_-4px_rgba(0,0,255,0.1)]
                transition-shadow duration-300`,children:[b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx("span",{className:"text-xs",children:"Audio:"}),b.jsx("span",{className:"text-xs text-muted-foreground",children:n(t)})]}),b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx("span",{className:"text-xs",children:"Video:"}),b.jsx("span",{className:"text-xs text-muted-foreground",children:n(e)})]})]})},OO=({participant:t,participantsInCall:e,isLobby:n})=>b.jsx("div",{children:b.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-8 hover:bg-gray-100 duration-150",children:[t.avatar_src&&b.jsx(jm,{size:"sm",src:t.avatar_src}),b.jsx("div",{className:"flex flex-col",children:b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("span",{children:t.username}),t.isHost&&b.jsx(wm,{size:12,className:"text-yellow-600"}),n&&(e==null?void 0:e.length)===0&&b.jsx("span",{className:"text-xs text-gray-500",children:"Waiting in lobby"})]})})]})},t.id),sme=({guests:t,participantsInLobby:e,participantsInCall:n})=>{const r=t.length+e.length;return b.jsxs(Jy,{children:[b.jsx(Jw,{asChild:!0,children:b.jsx("div",{className:"text-sm font-light text-blue-600 hover:text-blue-700 duration-150 cursor-pointer",children:"View All"})}),b.jsxs(Km,{className:"max-w-[400px]",children:[b.jsx(Gm,{children:b.jsx(Ym,{children:b.jsxs("div",{className:"flex items-center gap-4",children:["Participants ",b.jsx(NL,{className:"size-16"})]})})}),b.jsx(Bs,{}),b.jsxs("div",{className:"flex gap-24 mt-8",children:[n.length>0&&b.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[b.jsxs("div",{className:"text-xs font-medium text-gray-600",children:["IN CALL (",n.length,")"]}),b.jsx("div",{className:"flex flex-col gap-4 text-sm",children:n.map(i=>b.jsx(OO,{participant:i},i.id))})]}),n.length>0&&e.length>0&&b.jsx(Bs,{orientation:"vertical"}),r>0&&b.jsx(b.Fragment,{children:b.jsxs("div",{className:"flex flex-col gap-4 text-left w-full",children:[b.jsxs("div",{className:"text-xs text-left font-medium text-gray-600",children:["IN LOBBY (",r,")"]}),b.jsx("div",{className:"flex flex-col gap-4 text-sm",children:e.map(i=>b.jsx(OO,{participant:i,participantsInCall:n,isLobby:!0},i.id))})]})})]})]})]})},DO=({participant:t})=>b.jsxs("div",{className:"flex items-center gap-4",children:[t.isHost&&b.jsx(wm,{size:12,className:"text-yellow-600"}),t.username]}),ome=({guests:t,participants:e,participantsInCall:n})=>{const r=e.length+t.length+n.length,i=e.filter(a=>!n.some(c=>c.session_id===a.session_id)),s=()=>n.length===0?null:b.jsxs("div",{className:"flex flex-col gap-4",children:[b.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["IN CALL (",n.length,")"]}),b.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:n.map(a=>b.jsx(DO,{participant:a},a.id))})]}),o=()=>{if(t.length===0&&i.length===0)return null;if(i.length>0){const a=i.length+t.length;return b.jsxs(b.Fragment,{children:[n.length>0&&b.jsx(Bs,{}),b.jsxs("div",{className:"flex flex-col gap-4 ",children:[b.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["IN LOBBY (",a,")"]}),b.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 max-w-[328px] overflow-x-auto",children:[i.slice(0,3).map((c,d)=>b.jsxs(v.Fragment,{children:[b.jsx(DO,{participant:c}),d<i.length-1&&b.jsx(Bs,{orientation:"vertical"})]},c.id)),i.length>3&&b.jsxs("div",{className:"text-xs text-gray-500",children:["+",i.length-3," others"]})]})]})]})}};return b.jsxs("div",{className:"flex flex-col gap-4 p-12 mt-12 border border-gray-200 rounded-8",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("span",{className:"font-medium",children:"Participants"}),r>0&&b.jsx(sme,{guests:t,participantsInLobby:i,participantsInCall:n})]}),b.jsxs("div",{className:"flex flex-col gap-8",children:[s(),o()]})]})},ame=({username:t,mediaState:e,videoTrack:n,onGetSrc:r})=>{const i=v.useRef(null),s=i.current;return v.useEffect(()=>{n&&s&&(s.srcObject=n.mediaStream)},[n,s]),b.jsxs("div",{className:"relative size-full rounded-3xl bg-black z-50 mx-auto",children:[b.jsxs("div",{className:"relative size-full",children:[b.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 hidden sm:block",children:b.jsx(jm,{size:"lg",value:t,editingMode:!0,onGetSrc:r})}),e.video&&b.jsx("video",{ref:i,muted:!e.audio,autoPlay:!0,playsInline:!0,className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 size-full object-cover rounded-3xl"})]}),b.jsxs("div",{className:"absolute bottom-24 left-24 flex gap-8 items-center text-xs text-green-400",children:[e.audio&&b.jsx("div",{className:"p-8 bg-green-400/20 rounded-full",children:b.jsx(Gy,{size:20,className:"text-green-400"})}),e.video&&b.jsx("div",{className:"p-8 bg-green-400/20 rounded-full",children:b.jsx(Ww,{size:20,className:"text-green-400"})})]})]})},lme=b2({strict_mode:y2()}),cme=({roomID:t,isHost:e})=>{const{settings:n}=zw(),r=(n==null?void 0:n.strict_mode)||!1,i=eS({resolver:w2(lme),defaultValues:{strict_mode:r}});v.useEffect(()=>{i.setValue("strict_mode",r)},[r,i]);const s=Ju({mutationFn:d=>bL(t,{...n,strict_mode:d.strict_mode})}),o=(d,h)=>{i.setValue(d,h);const p=i.getValues();s.mutate(p)},a=()=>e?b.jsxs("span",{children:["Strict mode means ",b.jsx("span",{className:"font-bold",children:"only the host"})," can"," ",b.jsx("span",{className:"font-bold",children:"invite"}),","," ",b.jsx("span",{className:"font-bold",children:"chat"}),", or"," ",b.jsx("span",{className:"font-bold",children:"share screen"})," by default. You can adjust these settings ",b.jsx("span",{className:"font-bold",children:"anytime"}),"."]}):b.jsxs("span",{children:["Strict mode means ",b.jsx("span",{className:"font-bold",children:"only the host"})," can"," ",b.jsx("span",{className:"font-bold",children:"invite"}),","," ",b.jsx("span",{className:"font-bold",children:"chat"}),", or"," ",b.jsx("span",{className:"font-bold",children:"share screen"})," by default. These settings can be adjusted by the host"," ",b.jsx("span",{className:"font-bold",children:"anytime"}),"."]}),c=li("flex flex-col justify-between gap-8 w-full p-12 mt-12 border rounded-8",{"border-orange-200":e,"border-yellow-400":!e&&(n==null?void 0:n.strict_mode)});return b.jsxs("div",{className:c,children:[b.jsxs("div",{className:"flex items-center justify-between h-20",children:[b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsxs(gy,{children:[b.jsx(vy,{asChild:!0,children:b.jsx(Sm,{size:16,className:"text-purple-500"})}),b.jsx(Am,{side:"top",children:a()})]}),b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx(Hm,{size:16,className:"text-yellow-600"}),b.jsx("span",{className:"text-sm text-gray-600 font-medium whitespace-nowrap",children:"Strict mode"})]})]}),e?b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx(t_,{htmlFor:"strict_mode",className:"text-sm text-gray-400 font-light whitespace-nowrap",children:i.watch("strict_mode")?"Enabled":"Disabled"}),b.jsx(C2,{...i,children:b.jsx(BT,{control:i.control,name:"strict_mode",render:({field:d})=>b.jsx(mf,{children:b.jsx(gf,{children:b.jsx(hS,{id:"strict_mode",checked:d.value,onCheckedChange:h=>{o("strict_mode",h)},className:"mt-4"})})})})})]}):b.jsx("span",{className:"text-sm text-gray-400 font-light whitespace-nowrap",children:qE.capitalize(n!=null&&n.strict_mode?"enabled":"disabled")})]}),b.jsx("span",{className:"text-xs text-gray-500 font-light",children:"Strict mode, when set by the host, restricts participant actions to host-only permissions."})]})},ume=()=>{const{pathname:t}=qs(),{connectSystemEvents:e,latestRoomKilled:n}=Wm(),{mediaState:r,setAudioState:i,setVideoState:s,setVideoTrack:o,videoTrack:a}=CE(),{connectSettings:c,settings:d}=zw(),h=d||{strict_mode:!1,invite_permission:!1,invitation_expiry:"30"},[p,y]=v.useState([]),[S,k]=v.useState(""),[C,E]=v.useState(null),_=ki.get("rsCookie"),A=t.split("/")[2];v.useEffect(()=>{A&&c(A)},[A,c]);const M=v.useRef(null);NR({message:"Are you sure you want to leave the lobby? You will be disconnected from the room.",onBeforeLeave:()=>{var me;a&&a.stop(),((me=M.current)==null?void 0:me.readyState)===WebSocket.OPEN&&M.current.close(1e3,"Component unmounting"),Wx(A)},shouldBlock:!n,allowedPaths:["/call"]}),v.useEffect(()=>{e(A)},[A,e]),v.useEffect(()=>{if(M.current=new WebSocket(`${By}/ws/participants/${A}`),!!M.current)return M.current.onmessage=async me=>{const Te=JSON.parse(me.data);y(Te)},()=>{var me;((me=M.current)==null?void 0:me.readyState)===WebSocket.OPEN&&M.current.close(1e3,"Component unmounting"),M.current=null}},[A]);const{data:I}=po({queryKey:["roomInfo",A],queryFn:()=>H9(A),enabled:!!A}),{data:N}=po({queryKey:["me",A],queryFn:()=>qy(A,_),enabled:!!A&&!!_}),{data:O}=po({queryKey:["participants",A],queryFn:()=>xL(A),enabled:!!A}),j=(O==null?void 0:O.participants)||[],V=(O==null?void 0:O.participantsInCall)||[],$=I==null?void 0:I.host_id,W=j.find(me=>me.id===$),J=(I==null?void 0:I.created_at)||new Date().toISOString(),Y=N==null?void 0:N.isHost,{data:pe}=po({queryKey:["callState",A],queryFn:()=>yL(A),enabled:!!N&&!Y}),fe=(pe==null?void 0:pe.is_active)||!1,Ee=(pe==null?void 0:pe.started_at)||"",{devices:le,activeDeviceId:Se,setActiveMediaDevice:q}=ww({kind:"audioinput"}),{devices:te,activeDeviceId:ae,setActiveMediaDevice:B}=ww({kind:"videoinput"}),de=le.find(me=>me.deviceId===Se),se=te.find(me=>me.deviceId===ae);return v.useEffect(()=>{N!=null&&N.username&&!S&&k(N.username)},[N==null?void 0:N.username]),v.useEffect(()=>{if(te.length>0&&(!ae||ae==="default")){const me=te[0];B(me.deviceId)}},[te,ae,B]),v.useEffect(()=>(ae&&(async()=>{a&&a.stop();try{if(r.video){const Te=await n4({deviceId:ae});o(Te)}else o(null)}catch(Te){console.error("Failed to create video track:",Te)}})(),()=>{a&&a.stop()}),[ae,r.video]),b.jsx(b.Fragment,{children:b.jsxs("div",{className:"grid grid-cols-4 gap-24 p-32 h-screen md:bg-gradient-to-br from-white via-white to-orange-300",children:[b.jsx("div",{className:"col-span-4 md:col-span-1 flex items-center justify-center",children:b.jsxs("div",{className:"flex flex-col items-center size-full",children:[b.jsxs("div",{className:"flex flex-col items-center mb-12",children:[b.jsx("h1",{className:"text-3xl font-mono",children:"Whispurr"}),b.jsx("img",{src:AR,alt:"logo",width:100})]}),b.jsxs("div",{className:"flex flex-col flex-1 justify-center",children:[b.jsx("h3",{className:"mb-12 text-center text-2xl font-semibold tracking-tight",children:Y?"Start Call":"Join Call"}),b.jsx(qfe,{isHost:Y,username:S,setUsername:k,avatarSrc:C,isCallActive:fe}),b.jsx(Wfe,{settings:h,isHost:Y,mediaState:r,setAudioState:i,setVideoState:s,audioDevices:le,videoDevices:te,audioActiveDeviceId:Se,videoActiveDeviceId:ae,setAudioActiveDevice:q,setVideoActiveDevice:B}),b.jsx(nme,{isHost:Y,host:W==null?void 0:W.username,createdAt:J,isCallActive:fe,callStartedAt:Ee}),b.jsx(rme,{}),b.jsx(cme,{roomID:A,isHost:Y}),fe&&b.jsx(ome,{guests:p,participants:j,participantsInCall:V}),b.jsx(ime,{selectedAudioDevice:de,selectedVideoDevice:se})]})]})}),b.jsx("div",{className:"col-span-4 md:col-span-3 hidden md:block m-20",children:b.jsx(ame,{username:S,mediaState:r,videoTrack:a,onGetSrc:E})}),b.jsxs("div",{className:"md:absolute bottom-20 lg:flex hidden items-center gap-8",onClick:()=>window.open("https://github.com/Panos61/videocall-app-client/issues/new","_blank"),children:[b.jsx("span",{className:"text-sm text-gray-600 underline cursor-pointer hover:text-gray-900",children:"Report an issue"}),b.jsx(RL,{className:"size-16"})]})]})})},dme=({activeSpeakers:t,remoteTracks:e})=>{const[n,r]=v.useState([]),[i,s]=v.useState({});return v.useEffect(()=>{const o=Date.now(),a={...i};t.forEach(d=>{a[d]=o}),s(a);const c=[...e].sort((d,h)=>{const p=t.includes(d.participantIdentity),y=t.includes(h.participantIdentity);if(p&&!y)return-1;if(!p&&y)return 1;const S=a[d.participantIdentity]||0;return(a[h.participantIdentity]||0)-S});r(c)},[t,e]),n},fme=({selectedParticipant:t})=>{const{id:e}=Jf(),n=ki.get("rsCookie"),[r,i]=v.useState(!1),{data:s}=po({queryKey:["me",e,n],queryFn:()=>qy(e,n),enabled:!!e&&!!n}),o=s==null?void 0:s.id,{mutate:a,isPending:c,isError:d}=Ju({mutationFn:({currentHostID:h,participantID:p})=>$9(e,h,p),onSuccess:()=>{i(!1)},onError:h=>{console.error("err: ",h)}});return b.jsxs(b.Fragment,{children:[b.jsxs(tE,{modal:!1,children:[b.jsx(nE,{asChild:!0,children:b.jsx(fq,{className:"size-12 text-gray-500 cursor-pointer hover:text-gray-700"})}),b.jsx(GB,{align:"end",children:b.jsx(Ffe,{children:b.jsxs(Ufe,{onSelect:()=>i(!0),children:["Assign as Host",b.jsx(mA,{className:"size-16 text-blue-500"})]})})})]}),b.jsx(Jy,{open:r,onOpenChange:i,children:b.jsxs(Km,{className:"sm:max-w-[425px]",children:[b.jsxs(Gm,{children:[b.jsx(Ym,{children:"Assign as Host"}),b.jsxs("div",{className:"flex flex-col items-center gap-12 mb-16",children:["Are you sure you want to assign this participant as the host?",b.jsxs("div",{className:"flex items-center gap-8 w-full bg-gray-100 rounded-8 p-8",children:[b.jsx(jm,{size:"sm",src:t.avatar_src}),b.jsx("span",{className:"text-lg text-black",children:t.username})]}),b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx(Sm,{size:44,className:"text-blue-500"}),b.jsx("p",{className:"text-xs text-black",children:"Important: This action is irreversible. The selected participant will become the new host. Host actions will be performed by the new host."})]})]})]}),b.jsx(WE,{children:b.jsxs("div",{className:"flex flex-col gap-8",children:[b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx(PG,{asChild:!0,children:b.jsx(ls,{variant:"outline",children:"Cancel"})}),b.jsxs(ls,{type:"submit",disabled:c,onClick:()=>a({currentHostID:o,participantID:t.id}),children:["Assign as Host",b.jsx(mA,{className:"ml-4 size-16 text-blue-500"})]})]}),d&&b.jsx("div",{className:"text-xs text-red-500",children:"Something went wrong. Try again."})]})})]})})]})},lz=({title:t,children:e,open:n,onClose:r})=>{const{isChatExpanded:i}=Ky(),s=li("absolute top-0 right-0 bottom-0 w-[340px] bg-zinc-950 shadow-lg transform transition-all duration-300 ease-in-out",{"translate-x-0 opacity-100 visible":n,"translate-x-full opacity-0 invisible":!n,"w-[340px]":!i,"w-[800px]":i});return b.jsx(b.Fragment,{children:b.jsx("div",{className:s,children:b.jsxs("div",{className:"flex flex-col h-full mx-8",children:[b.jsxs("div",{className:"flex items-center justify-between p-16",children:[b.jsx("p",{className:"text-white",children:t}),b.jsx(ML,{size:"20px",onClick:r,className:"text-white"})]}),e,t==="Conversation"&&b.jsxs("div",{className:"flex items-center",children:[b.jsx("span",{className:"m-8 text-xs text-slate-300",children:"Conversation is encrypted"}),b.jsx(Hm,{size:16,className:"text-purple-700"})]})]})})})},hme=({open:t,participants:e,participantID:n,invitePermission:r,isHost:i,mediaState:s,remoteMediaStates:o,isActiveSpeaker:a,onClose:c})=>{const d=(p,y)=>{var k,C;return n===p?s:!p||!y?{audio:!1,video:!1}:{audio:((k=o[p])==null?void 0:k.audio)??!1,video:((C=o[p])==null?void 0:C.video)??!1}},h=(p,y)=>li("flex items-center gap-8 py-4 px-8 rounded-12 cursor-default duration-500",{"bg-orange-200/75":p.isHost&&!y,"hover:bg-orange-300":p.isHost,"bg-green-200/75":y});return b.jsx(lz,{title:"Participants",open:t,onClose:c,children:b.jsxs(b.Fragment,{children:[(r||i)&&b.jsx(_j,{}),!r&&!i&&b.jsxs("div",{className:"ml-16 w-fit outline outline-gray-700 rounded-8 p-8 flex items-center gap-8",children:[b.jsx(Hm,{className:"size-12 text-orange-400"}),b.jsx("span",{className:"text-xs text-muted italic",children:"Only host can invite participants."})]}),b.jsxs("p",{className:"p-16 text-xs text-white font-bold",children:["IN MEETING (",e.length,")"]}),b.jsx(Bs,{className:"mb-12 bg-gray-700 outline"}),b.jsx("div",{className:"flex flex-col gap-4 py-8 px-12 mx-4 bg-white rounded-16",children:e.map(p=>b.jsxs("div",{className:h(p,a),children:[b.jsx(jm,{size:"sm",src:p.avatar_src}),b.jsxs("div",{className:"flex items-center gap-4",children:[p.isHost&&b.jsx(wm,{size:12,className:"text-yellow-600"}),b.jsx("p",{className:"text-sm text-black break-all",children:p.username}),p.isHost&&b.jsx("span",{className:"text-xs text-black font-bold",children:p.isHost&&"(Host)"})]}),b.jsxs("div",{className:"flex items-center gap-8 ml-auto",children:[d(p.id,p).audio?b.jsx(Gy,{color:"#000000",className:"size-12"}):b.jsx($w,{color:"#dc2626",className:"size-12"}),d(p.id,p).video?b.jsx(Ww,{color:"#000000",className:"size-12"}):b.jsx(PE,{color:"#dc2626",className:"size-12"}),i&&n!==p.id&&b.jsx(fme,{selectedParticipant:p})]})]},p.id))})]})})},tx=({index:t,isSidePanel:e,participant:n,track:r,audioTracks:i,remoteIdentity:s,isLocal:o,isActiveSpeaker:a,responsiveWidth:c,mediaState:d,remoteMediaStates:h})=>{var Se;const{events:{raisedHandEvents:p}}=Na(),y=o?"local-video":`${s}-video`,S=v.useRef(null),k=v.useRef(null),C=v.useRef(null),E=v.useRef(null),[_,A]=v.useState(!1),[M,I]=v.useState(o),N=v.useRef(!1),O=()=>{let q="lg",te="lg",ae=20;return e?(c=c||0,c<185?(q="sm",te="sm",ae=16):c<250?(q="md",te="sm",ae=16):c<590&&(q="md",te="lg",ae=20),{avatarSize:q,usernameSize:te,iconSize:ae}):{avatarSize:q,usernameSize:te,iconSize:ae}},{avatarSize:j,usernameSize:V,iconSize:$}=O(),W=v.useCallback(q=>{k.current=q,A(!!q)},[]);v.useEffect(()=>{if(o)return;const q=C.current;if(!q)return;const te=new IntersectionObserver(([ae])=>{N.current=ae.isIntersecting,ae.isIntersecting&&!M&&setTimeout(()=>{I(!0)},1e3)},{threshold:.1});return te.observe(q),()=>{te.unobserve(q)}},[o,M,n==null?void 0:n.username,s]);const J=()=>r&&(d!=null&&d.video)?b.jsx("div",{id:"video-wrapper",className:"relative size-full",children:b.jsx("video",{id:y,ref:S,muted:!(d!=null&&d.audio),autoPlay:!0,className:"absolute size-full object-cover"},t)}):b.jsx("div",{className:"absolute inset-0 size-full flex items-center justify-center",children:b.jsx(jm,{src:n==null?void 0:n.avatar_src,className:"size-24 object-cover",size:j})}),Y=()=>{var te,ae;if(!s||!n)return;if(M&&r&&((te=h[s])!=null&&te.video))return M?b.jsx("video",{id:y,ref:W,muted:!((ae=h[s])!=null&&ae.audio),autoPlay:!0,className:"absolute size-full object-cover"},t):b.jsx("div",{className:"absolute inset-0 flex items-center justify-center size-full",children:b.jsx(Z1,{size:"lg"})});const q=li("absolute inset-0 size-full flex items-center justify-center duration-1000",{"bg-zinc-800":!M,"bg-zinc-900":M});return b.jsx("div",{className:q,children:b.jsxs("div",{className:"flex flex-col items-center gap-4",children:[!M&&b.jsx(Z1,{size:e?"md":"lg"}),M&&b.jsx(jm,{src:n.avatar_src,className:"size-24 object-cover",size:j})]})})};v.useEffect(()=>{E.current&&r&&(d!=null&&d.audio)&&r.attach(E.current);const q=E.current;return()=>{r&&q&&r.detach(q)}},[r,d==null?void 0:d.audio]),v.useEffect(()=>{S.current&&r&&(d!=null&&d.video)&&r.attach(S.current);const q=S.current;return()=>{r&&q&&r.detach(q)}},[r,d==null?void 0:d.video]),v.useEffect(()=>{var te;const q=k.current;if(s){const ae=(te=h[s])==null?void 0:te.video;q&&(r&&ae?r.attach(q):r.detach(q))}return()=>{r&&q&&r.detach(q)}},[r,h,s,_]),v.useEffect(()=>{var te;if(!i||!s)return;const q=i.find(ae=>ae.participantIdentity===s);return E.current&&q&&((te=h[s])!=null&&te.audio)&&q.track.attach(E.current),()=>{E.current&&q&&q.track.detach(E.current)}},[i,h,s]);const pe=()=>{var q;return o?d:!s||!n?{audio:!1}:{audio:(q=h[s])==null?void 0:q.audio}},fe=p.some(q=>q.username===(n==null?void 0:n.username)),Ee=li("relative flex items-center justify-center size-full rounded-8 overflow-hidden bg-zinc-900 text-gr",{"transition-transform duration-1000 ease-out":!fe,"outline outline-yellow-500":fe,"outline outline-green-500":a}),le=li("absolute bottom-4 right-12 px-12 py-4 rounded-md text-white bg-black bg-opacity-45 z-50",{"w-48 text-xs bg-black/80 truncate":V==="sm","text-sm":V==="lg"});return b.jsxs("div",{ref:C,className:Ee,children:[fe&&b.jsx(_E,{size:e?16:24,className:"absolute top-12 right-12 text-yellow-500 z-10"}),o?J():Y(),b.jsx("div",{className:le,children:n==null?void 0:n.username}),b.jsx("div",{className:"absolute bottom-4 left-12 py-4 z-50",children:(Se=pe())!=null&&Se.audio?b.jsx(Gy,{color:"#e5e7eb",className:`size-${$}`}):b.jsx($w,{color:"#dc2626",className:`size-${$}`})})]})},LO=({isSidePanel:t,screenShareTrack:e})=>{const n=v.useRef(null),{events:{shareScreenEvents:r}}=Na();if(v.useEffect(()=>{const s=n.current,o=e==null?void 0:e.track;return s&&o&&(console.warn("Attaching screen share track to video element"),o.attach(s)),()=>{s&&o&&(console.warn("Detaching screen share track from video element"),o.detach(s))}},[e]),!e)return null;const i=li("absolute bottom-4 right-12 flex items-center gap-8 px-12 py-4 rounded-md text-sm text-white bg-black z-50",{"bg-black/45":t,"bg-black":!t});return b.jsxs("div",{className:"relative flex items-center justify-center size-full rounded-8 overflow-hidden bg-zinc-900 text-gr outline outline-green-500/45 transition-all duration-1000 ease-out",children:[b.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute size-full object-contain"}),b.jsxs("div",{className:i,children:[!t&&r.length>0&&b.jsxs("span",{children:[r[0].username,"'s shared screen"]}),b.jsx(RE,{size:t?12:20,className:"text-green-500"})]})]})},jO=({hostEventType:t})=>{const[e,{startCountdown:n}]=IE({countStart:5}),r=v.useRef(null);return v.useEffect(()=>{n()},[n]),v.useEffect(()=>{e===0&&r.current&&Gb.dismiss(r.current)},[e]),v.useEffect(()=>(r.current=Gb.info(t==="left"?"Previous Host has left the room, you are randomly promoted to host.":"Previous Host has been replaced by a new host.",{duration:1/0}),()=>{r.current&&Gb.dismiss(r.current)}),[]),v.useEffect(()=>{r.current&&e>0&&Gb.info(t==="left"?"Previous Host has left the room, you are randomly promoted to host.":"Previous Host has been replaced by a new host.",{id:r.current})},[e,t]),null};function FO({className:t,...e}){return b.jsx("kbd",{"data-slot":"kbd",className:Vt("bg-muted text-muted-foreground pointer-events-none inline-flex h-5 w-fit min-w-5 select-none items-center justify-center gap-1 rounded-sm px-1 font-sans text-xs font-medium","[&_svg:not([class*='size-'])]:size-3","[[data-slot=tooltip-content]_&]:bg-background/20 [[data-slot=tooltip-content]_&]:text-background dark:[[data-slot=tooltip-content]_&]:bg-background/10",t),...e})}function pme({className:t,...e}){return b.jsx("kbd",{"data-slot":"kbd-group",className:Vt("inline-flex items-center gap-1",t),...e})}const mme=()=>b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx(dq,{size:14,className:"text-gray-600"}),b.jsx("span",{className:"text-xs text-gray-600",children:"58s"})]}),gme=[{id:1,emoji:""},{id:2,emoji:""},{id:3,emoji:""},{id:4,emoji:""},{id:5,emoji:""},{id:6,emoji:""},{id:7,emoji:""}],vme=()=>{const{sendUserEvent:t}=Na(),[e,n]=v.useState(!1),r=v.useRef(null),i=o=>{t({type:"reaction.sent",payload:{reaction_type:o}})},s=b.jsx("div",{className:"absolute bottom-12 right-full w-[172px] flex items-center justify-between gap-8 p-4 overflow-hidden z-10 rounded-8 bg-white shadow-elevation-low",children:gme.map(o=>b.jsx("div",{className:"flex items-center justify -center size-28 rounded-full hover:scale-110 duration-150 ease-in-out cursor-pointer",onClick:()=>i(o.emoji),children:b.jsx("span",{className:"text-xl",children:o.emoji})},o.id))});return b.jsxs("div",{ref:r,className:"flex items-center rounded-full bg-white hover:bg-slate-200 duration-300 ease-in-out cursor-pointer z-50 relative",children:[b.jsx(IL,{size:16,onClick:()=>n(!0)}),e&&s]})},yme=({message:t,index:e})=>{const[n,r]=v.useState(null);return b.jsxs("div",{className:"flex flex-col gap-4",children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("span",{className:"text-xs text-gray-600 font-bold",children:"You"}),b.jsx("span",{className:"text-xs text-gray-500",children:rz(new Date,"HH:mm")}),b.jsx(EL,{size:14,className:"text-green-700"})]}),b.jsxs("div",{onMouseEnter:()=>r(e),onMouseLeave:()=>r(null),className:"flex items-center gap-4",children:[b.jsx("div",{className:"p-8 w-[74%] h-auto bg-green-100 rounded-lg text-sm break-all",children:t}),n===e&&b.jsx(vme,{}),b.jsx(mme,{})]},e)]})},bme=({open:t,onClose:e})=>{const{isChatExpanded:n,setIsChatExpanded:r}=Ky(),{id:i}=Jf(),[s,o]=v.useState([]),[a,c]=v.useState([]),[d,h]=v.useState(""),p=v.useRef(null),y=v.useRef(null),S=v.useCallback(()=>{if(!i||p.current)return;const A=new WebSocket(`${By}/ws/chat/${i}`);p.current=A,A.onopen=()=>{console.log("chat socket has opened!")},A.onclose=()=>{console.warn("Chat WebSocket closed")},A.onerror=()=>{console.error("chat socket has closed!")},A.onmessage=M=>{try{const I=JSON.parse(M.data);o(N=>[...N,I.payload]),c(N=>[...N,I])}catch(I){console.error(I)}}},[i]);v.useEffect(()=>(S(),()=>{var A;((A=p.current)==null?void 0:A.readyState)===WebSocket.OPEN&&p.current.close(),p.current=null}),[S]);const k=()=>{const A=d.trim();if(!A)return;const M=p.current;!M||M.readyState!==WebSocket.OPEN||(M.send(JSON.stringify({payload:A})),h(""),y.current&&(y.current.style.height="auto"))},C=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),k())},E=v.useRef(null),_=()=>{var A;(A=E.current)==null||A.scrollIntoView({behavior:"smooth"})};return v.useEffect(()=>{_()},[s]),b.jsx(lz,{title:"Conversation",open:t,onClose:e,children:b.jsx("div",{className:"h-[calc(100%-100px)] flex flex-col",children:b.jsxs("div",{className:"flex-1 flex flex-col justify-between items-center gap-4 w-full py-8 px-12 bg-white rounded-16 overflow-y-auto",children:[b.jsxs("div",{className:"flex flex-col items-center gap-4 w-full ",children:[b.jsxs("div",{className:"flex items-center mt-4 self-start gap-24 w-full",children:[b.jsx("div",{className:"p-4 self-center rounded-8 bg-violet-100 hover:bg-violet-200 duration-150 cursor-pointer",onClick:()=>r(!n),children:n?b.jsx(cq,{size:20,className:"text-violet-600"}):b.jsx(lq,{size:20,className:"text-violet-600"})}),b.jsx("div",{className:"flex items-center",children:b.jsxs("div",{className:"flex items-center gap-8 mr-8",children:[b.jsx("p",{className:"self-center text-xs text-slate-800",children:"Let everyone send messages"}),b.jsx(hS,{})]})})]}),b.jsx(Bs,{className:"mt-4"})]}),b.jsxs("div",{className:"flex-1 py-4 w-full overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-white",children:[b.jsx("div",{className:"flex flex-col gap-8",children:s.map((A,M)=>b.jsx(yme,{message:A,index:M},M))}),s.length>0&&b.jsx("div",{ref:E})]}),b.jsxs("div",{className:"flex gap-4 w-full",children:[b.jsx("textarea",{ref:y,rows:1,value:d,onChange:A=>h(A.target.value),onKeyDown:C,placeholder:"Send a message to everyone",className:"flex-1 py-12 px-4 rounded-12 text-sm font-light indent-16 bg-gray-200 outline-hidden duration-300 ease-in-out hover:bg-gray-100 focus:outline-hidden focus:bg-gray-100 resize-none overflow-hidden scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",onInput:A=>{const M=A.target;M.style.height="auto";const N=44*2.5;M.style.height=Math.min(M.scrollHeight,N)+"px",M.style.overflowY=M.scrollHeight>N?"auto":"hidden"}}),b.jsx("button",{onClick:k,className:"p-12 h-44 self-center rounded-8 duration-200 hover:bg-green-200",children:b.jsx(Sq,{size:20,className:"text-green-600"})})]}),b.jsxs(pme,{className:"flex gap-4 mt-4 text-xs text-gray-600",children:[b.jsx(FO,{children:""}),b.jsx("span",{className:"text-xs",children:"to send message &"}),b.jsx(FO,{children:"/poll"}),b.jsx("span",{className:"text-xs",children:"to create poll"})]})]})})})},xme=({username:t})=>{const e=v.useRef(1e4),[n,r]=v.useState(!0);return v.useEffect(()=>{setTimeout(()=>{e.current=0,r(!1)},e.current)},[]),n?b.jsxs("div",{className:"flex items-center justify-center gap-8 px-8 py-4 w-full border border-zinc-500 rounded-8 text-white hover:bg-zinc-500/20 duration-300 animate-circle-entrance",children:[b.jsx("span",{className:"text-sm",children:t}),b.jsx(_E,{size:20,className:"text-yellow-500"})]}):null},wme=({emoji:t,id:e,username:n,onAnimationEnd:r})=>{const[i,s]=v.useState(!1),o=Math.random()*100-50,a=4+Math.random()*2,c=h=>{h.animationName==="float-out"&&r(e)};v.useEffect(()=>{const h=setTimeout(()=>{s(!0)},a*1e3-500);return()=>clearTimeout(h)},[e,r,a]);const d=li("absolute bottom-20 left-1/2 pointer-events-none",{"animate-float-in":!i,"animate-float-out":i});return b.jsxs("div",{className:d,onAnimationEnd:c,style:{"--random-x-end":`${o}px`,"--duration":`${a}s`},children:[b.jsxs("div",{className:"flex flex-col gap-4 items-center",children:[b.jsx("div",{className:"text-4xl",children:t}),b.jsx("div",{className:"text-white text-sm font-medium bg-violet-300/45 bg-opacity-50 px-8 py-4 rounded-full whitespace-nowrap text-center",children:n})]}),b.jsx("style",{children:`
          @keyframes float-in {
            0% {
              transform: translate(-50%, 0) scale(0.6);
              opacity: 0;
            }
            15% {
              transform: translate(-50%, -50px) scale(1);
              opacity: 1;
            }
            100% {
              /* Move to -40vh (middle of screen) */
              transform: translate(calc(-40% + var(--random-x-end)), -40vh) scale(1);
              opacity: 1;
            }
          }
          @keyframes float-out {
            0% {
              /* Start fade out from wherever float-in ended (approx middle) */
              transform: translate(calc(-40% + var(--random-x-end)), -40vh) scale(1);
              opacity: 1;
            }
            100% {
              /* Continue floating up a bit while fading out */
              transform: translate(calc(-40% + var(--random-x-end)), -40vh) scale(1);
              opacity: 0;
            }
          }
          .animate-float-in {
            animation: float-in var(--duration) linear forwards;
          }
          .animate-float-out {
            animation: float-out 0.5s ease-out forwards;
          }
        `})]})},Sme=()=>{const{events:{reactionEvents:t}}=Na(),e=v.useMemo(()=>t.map(s=>({id:s.id,emoji:s.reaction_type,username:s.username})),[t]),[n,r]=v.useState([]);v.useEffect(()=>{r(s=>{const o=e.filter(a=>!s.find(c=>c.id===a.id));return o.length>0?[...s,...o]:s})},[e]);const i=v.useCallback(s=>{r(o=>o.filter(a=>a.id!==s))},[]);return b.jsx("div",{className:"fixed inset-0 z-50 pointer-events-none",children:n.map(s=>b.jsx(wme,{id:s.id,emoji:s.emoji,username:s.username,onAnimationEnd:i},s.id))})},Cme=({participantsCount:t})=>{const{setShareScreenView:e}=Ky(),{events:{shareScreenEvents:n}}=Na();return b.jsxs("div",{className:"flex items-center gap-12",children:[b.jsxs("div",{className:"flex items-center gap-8 p-8 outline outline-zinc-800 rounded-8 text-sm text-white bg-zinc-900 hover:bg-zinc-800 duration-300 ease-in-out cursor-pointer",onClick:()=>e("participants"),children:[b.jsxs("span",{children:["Participants (",t,")"]}),b.jsx(PL,{size:16,className:"text-white"})]}),n&&n.map(r=>b.jsxs("div",{className:"flex items-center gap-8 p-8 outline outline-zinc-800 rounded-8 text-sm text-white bg-green-700/20 hover:bg-green-600/25 duration-300 ease-in-out cursor-pointer",onClick:()=>e([{trackSid:r.trackSid}]),children:[b.jsxs("span",{children:[r.username,"'s screen"]}),b.jsx(RE,{size:16,className:"text-green-500"})]},r.trackSid))]})},kme=()=>{const{id:t}=Jf(),e=v.useRef(null),[n,r]=v.useState(0),{data:i,isLoading:s}=po({queryKey:["callState",t],queryFn:()=>yL(t),enabled:!!t});v.useEffect(()=>{if(i&&e.current===null)try{const c=eme(i.started_at,"eee MMM dd yyyy HH:mm:ss 'GMT'xx (zzzz)",new Date);if(!isNaN(c.getTime()))e.current=c;else{const d=new Date(i.started_at);isNaN(d.getTime())?console.error("Failed to parse date:",i.started_at):e.current=d}}catch(c){console.error("Error parsing date:",c)}return()=>{e.current=null}},[i]),v.useEffect(()=>{if(!e.current)return;const c=setInterval(()=>{const h=Math.floor((new Date().getTime()-e.current.getTime())/1e3);r(h)},1e3);return()=>clearInterval(c)},[e.current]);const o=c=>{if(c<0)return"00:00";const d=Math.floor(c/3600),h=Math.floor(c%3600/60),p=c%60,y=String(h).padStart(2,"0"),S=String(p).padStart(2,"0");return d>0?`${String(d).padStart(2,"0")}:${y}:${S}`:`${y}:${S}`},a=s||!e.current?"00:00":o(n);return b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx("div",{className:"min-w-[36px] text-xs text-gray-300 font-mono",children:a}),b.jsx("span",{className:"text-gray-300",children:"-"}),b.jsx("p",{className:"text-xs text-white",children:"Call in progress"}),b.jsx("div",{className:"size-8 rounded-full bg-green-500 animate-pulse"})]})},Tme=({isSharingScreen:t,participantsCount:e})=>{const{events:{raisedHandEvents:n}}=Na(),r=[...new Set(n.map(i=>i.username))];return b.jsxs("header",{className:"flex items-center justify-between h-52 px-48 border-b border-zinc-800",children:[b.jsxs("div",{className:"flex items-center gap-72",children:[b.jsx("div",{className:"text-lg text-white font-mono",children:"Whispurr"}),b.jsx("div",{className:"flex items-center gap-8",children:r.map(i=>b.jsx(xme,{username:i},i))})]}),t&&b.jsx(Cme,{participantsCount:e}),b.jsx(kme,{})]})},Eme=v.forwardRef(({children:t},e)=>b.jsx("div",{className:"overflow-hidden size-full bg-black",children:b.jsx("div",{ref:e,className:"flex flex-col gap-8 size-full px-12 py-8 overflow-y-auto hover:bg-zinc-800/40 duration-500 ease-out scrollbar-thin scrollbar-track-black scrollbar-thumb-zinc-600",children:v.Children.toArray(t).filter(Boolean).map((n,r)=>b.jsx("div",{className:"w-full aspect-video",children:n},r))})})),_me=()=>{const[t,e]=v.useState(new Date);return v.useEffect(()=>{const n=setInterval(()=>{e(new Date)},1e3);return()=>clearInterval(n)},[]),b.jsx("div",{className:"w-auto text-md lg:text-lg text-white font-medium",children:rz(t,"h:mm aa")})},Rme=()=>b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx(Cq,{size:18,className:"text-green-500 stroke-3"}),b.jsx("p",{className:"text-xs text-white",children:"Connection"})]}),Pme=[{id:1,emoji:""},{id:2,emoji:""},{id:3,emoji:""},{id:4,emoji:""},{id:5,emoji:""},{id:6,emoji:""},{id:7,emoji:""}],Ame=({sessionID:t})=>{const{sendUserEvent:e}=Na(),[n,r]=v.useState(!1),i=v.useRef(null);Lq(i,()=>r(!1));const s=a=>{e({type:"reaction.sent",senderID:t,payload:{reaction_type:a}})},o=b.jsx("div",{className:"absolute bottom-full left-[120px] -translate-x-1/2 flex items-center justify-between gap-8 p-4 w-[280px] rounded-8 bg-white shadow-elevation-low",children:Pme.map(a=>b.jsx("div",{className:"flex items-center justify-center size-32 rounded-full hover:bg-violet-200 duration-150 ease-in-out cursor-pointer",onClick:()=>s(a.emoji),children:b.jsx("span",{className:"text-xl",children:a.emoji})},a.id))});return b.jsxs("div",{ref:i,className:"flex items-center p-12 rounded-full bg-white hover:bg-slate-200 duration-300 ease-in-out cursor-pointer z-50 relative",onClick:()=>r(!n),children:[b.jsx(IL,{size:16}),n&&o]})},Ime=({sessionID:t})=>{const{sendUserEvent:e}=Na(),n=()=>{e({type:"raisedhand.sent",senderID:t,payload:{raised_hand:!0}})};return b.jsx("div",{className:"flex items-center p-12 rounded-full bg-white hover:bg-slate-200 duration-300 ease-in-out cursor-pointer hover:scale-105",onClick:n,children:b.jsx(_E,{size:16,className:"text-yellow-500"})})},Nme=({sessionID:t,room:e,onScreenShareChange:n})=>{const{sendUserEvent:r,events:{shareScreenEvents:i}}=Na(),[s,o]=v.useState(!1);v.useEffect(()=>{if(!(e!=null&&e.localParticipant))return;const d=()=>{const y=Array.from(e.localParticipant.videoTrackPublications.values()).find(k=>k.source===_e.Source.ScreenShare),S=!!y;o(S),n&&(S&&y?n(!0,{track:y.videoTrack,participantIdentity:t,kind:_e.Kind.Video}):n(!1))};d();const h=y=>{y.source===_e.Source.ScreenShare&&setTimeout(d,100)},p=()=>{setTimeout(d,100)};return e.localParticipant.on("trackPublished",h),e.localParticipant.on("trackUnpublished",p),()=>{e.localParticipant.off("trackPublished",h),e.localParticipant.off("trackUnpublished",p)}},[e,n,t,i]);const a=async()=>{if(!(e!=null&&e.localParticipant))return;let d="";try{if(s)await e.localParticipant.setScreenShareEnabled(!1),o(!1),r({type:"share_screen.ended",senderID:t,payload:{active:!1,track_sid:null}});else{const h=await e.localParticipant.setScreenShareEnabled(!0);if(!h||!h.track)return;d=h.track.sid||"",setTimeout(()=>{const y=Array.from(e.localParticipant.videoTrackPublications.values()).find(S=>S.source===_e.Source.ScreenShare);y&&(o(!0),n&&n(!0,{track:y.videoTrack,participantIdentity:t,kind:_e.Kind.Video}))},200),r({type:"share_screen.started",senderID:t,payload:{active:!0,track_sid:d}})}}catch(h){console.error("Error toggling screen share:",h)}},c=li("flex items-center p-12 rounded-full duration-300 ease-in-out cursor-pointer hover:scale-105",{"bg-red-500 hover:bg-red-600":s,"bg-white hover:bg-slate-200":!s});return b.jsx("div",{className:c,onClick:a,children:s?b.jsx(wq,{size:16,className:"text-white"}):b.jsx(RE,{size:16,className:"text-green-500"})})},Mme=({room:t,sessionID:e,participantID:n,mediaState:r,setAudioState:i,setVideoState:s,activePanel:o,setActivePanel:a,onScreenShareChange:c})=>{const{sendSystemEvent:d}=Wm(),{videoTrack:h,setVideoTrack:p}=CE(),{setIsChatExpanded:y,setIsFocusView:S,isFocusView:k}=Ky(),C=Ia(),{id:E}=Jf();if(!E)return null;const _=ki.get("rsCookie"),A=async()=>{i(!r.audio,n),t!=null&&t.localParticipant&&await t.localParticipant.setMicrophoneEnabled(!r.audio)},M=async()=>{s(!r.video,n),t!=null&&t.localParticipant&&await t.localParticipant.setCameraEnabled(!r.video)},I=async()=>{try{t!=null&&t.localParticipant&&(await t.localParticipant.setCameraEnabled(!1),await t.localParticipant.setMicrophoneEnabled(!1)),t&&await t.disconnect(),d({type:"user.left",payload:{}}),h&&(h.stop(),p(null)),i(!1,n),s(!1,n),await B9(E,_),C(`/room/${E}/post-call`,{replace:!0})}catch(O){console.error("Error during leave:",O)}finally{C(`/room/${E}/post-call`,{replace:!0})}},N="flex items-center p-12 rounded-full bg-white hover:bg-slate-200 duration-300 ease-in-out cursor-pointer hover:scale-105";return b.jsxs("div",{className:"flex items-center w-full px-24",children:[b.jsx("div",{className:"flex-1 mr-16",children:b.jsxs("div",{className:"flex items-center gap-8",children:[b.jsx(_me,{}),b.jsx(Bs,{orientation:"vertical",className:"h-28 bg-zinc-500"}),b.jsx(Rme,{})]})}),b.jsx("div",{className:"flex-shrink-0",children:b.jsxs("div",{className:"flex items-center justify-center gap-8 p-8 border border-t-0 border-b-0 border-zinc-700 rounded-12",children:[b.jsxs("div",{className:"flex items-center gap-4 p-4 border border-zinc-500 rounded-16 text-xs bg-zinc-800 hover:bg-zinc-600/20 duration-300 ease-in-out cursor-pointer",onClick:()=>S(!k),children:[b.jsx("div",{className:"p-4 bg-white rounded-full",children:k?b.jsx(PL,{size:16}):b.jsx(pq,{size:16})}),b.jsx("span",{className:"text-zinc-200",children:k?"Focus view":"Tile view"})]}),b.jsx(Bs,{orientation:"vertical",className:"h-28 bg-zinc-700"}),b.jsx("div",{className:N,onClick:A,children:r.audio?b.jsx(Gy,{size:16}):b.jsx($w,{color:"#dc2626",size:16})}),b.jsx("div",{className:N,onClick:M,children:r.video?b.jsx(Ww,{size:16}):b.jsx(PE,{color:"#dc2626",size:16})}),b.jsx(Ime,{sessionID:e}),b.jsx(Ame,{sessionID:e}),b.jsx(Nme,{sessionID:e,room:t,onScreenShareChange:c}),b.jsx("div",{className:N,onClick:()=>a(o==="chat"?null:"chat"),children:b.jsx(mq,{size:16,className:"text-violet-500"})}),b.jsx("div",{className:N,onClick:()=>{a(o==="participants"?null:"participants"),y(!1)},children:b.jsx(NL,{size:16})}),b.jsx(_4,{}),b.jsx("div",{className:li(N,"!bg-red-500"),onClick:I,children:b.jsx(yq,{size:16,color:"white"})})]})}),b.jsx("div",{className:"flex-1"})]})},OS=v.createContext(null);OS.displayName="PanelGroupContext";const _r={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},HR=10,jf=v.useLayoutEffect,UO=Mw.useId,Ome=typeof UO=="function"?UO:()=>null;let Dme=0;function qR(t=null){const e=Ome(),n=v.useRef(t||e||null);return n.current===null&&(n.current=""+Dme++),t??n.current}function cz({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:s,id:o,maxSize:a,minSize:c,onCollapse:d,onExpand:h,onResize:p,order:y,style:S,tagName:k="div",...C}){const E=v.useContext(OS);if(E===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:_,expandPanel:A,getPanelSize:M,getPanelStyle:I,groupId:N,isPanelCollapsed:O,reevaluatePanelConstraints:j,registerPanel:V,resizePanel:$,unregisterPanel:W}=E,J=qR(o),Y=v.useRef({callbacks:{onCollapse:d,onExpand:h,onResize:p},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:a,minSize:c},id:J,idIsFromProps:o!==void 0,order:y});v.useRef({didLogMissingDefaultSizeWarning:!1}),jf(()=>{const{callbacks:fe,constraints:Ee}=Y.current,le={...Ee};Y.current.id=J,Y.current.idIsFromProps=o!==void 0,Y.current.order=y,fe.onCollapse=d,fe.onExpand=h,fe.onResize=p,Ee.collapsedSize=n,Ee.collapsible=r,Ee.defaultSize=i,Ee.maxSize=a,Ee.minSize=c,(le.collapsedSize!==Ee.collapsedSize||le.collapsible!==Ee.collapsible||le.maxSize!==Ee.maxSize||le.minSize!==Ee.minSize)&&j(Y.current,le)}),jf(()=>{const fe=Y.current;return V(fe),()=>{W(fe)}},[y,J,V,W]),v.useImperativeHandle(s,()=>({collapse:()=>{_(Y.current)},expand:fe=>{A(Y.current,fe)},getId(){return J},getSize(){return M(Y.current)},isCollapsed(){return O(Y.current)},isExpanded(){return!O(Y.current)},resize:fe=>{$(Y.current,fe)}}),[_,A,M,O,J,$]);const pe=I(Y.current,i);return v.createElement(k,{...C,children:t,className:e,id:J,style:{...pe,...S},[_r.groupId]:N,[_r.panel]:"",[_r.panelCollapsible]:r||void 0,[_r.panelId]:J,[_r.panelSize]:parseFloat(""+pe.flexGrow).toFixed(1)})}const uz=v.forwardRef((t,e)=>v.createElement(cz,{...t,forwardedRef:e}));cz.displayName="Panel";uz.displayName="forwardRef(Panel)";let sE=null,jx=-1,Mu=null;function Lme(t,e,n){const r=(e&mz)!==0,i=(e&gz)!==0,s=(e&vz)!==0,o=(e&yz)!==0;if(e){if(r)return s?"se-resize":o?"ne-resize":"e-resize";if(i)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function jme(){Mu!==null&&(document.head.removeChild(Mu),sE=null,Mu=null,jx=-1)}function Xk(t,e,n){var r,i;const s=Lme(t,e);if(sE!==s){if(sE=s,Mu===null&&(Mu=document.createElement("style"),document.head.appendChild(Mu)),jx>=0){var o;(o=Mu.sheet)===null||o===void 0||o.removeRule(jx)}jx=(r=(i=Mu.sheet)===null||i===void 0?void 0:i.insertRule(`*{cursor: ${s} !important;}`))!==null&&r!==void 0?r:-1}}function dz(t){return t.type==="keydown"}function fz(t){return t.type.startsWith("pointer")}function hz(t){return t.type.startsWith("mouse")}function DS(t){if(fz(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(hz(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function Fme(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Ume(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function Vme(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:zO(t),b:zO(e)};let r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;Zt(r,"Stacking order can only be calculated for elements with a common ancestor");const i={a:BO(VO(n.a)),b:BO(VO(n.b))};if(i.a===i.b){const s=r.childNodes,o={a:n.a.at(-1),b:n.b.at(-1)};let a=s.length;for(;a--;){const c=s[a];if(c===o.a)return 1;if(c===o.b)return-1}}return Math.sign(i.a-i.b)}const Bme=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function zme(t){var e;const n=getComputedStyle((e=pz(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function $me(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||zme(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||Bme.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function VO(t){let e=t.length;for(;e--;){const n=t[e];if(Zt(n,"Missing node"),$me(n))return n}return null}function BO(t){return t&&Number(getComputedStyle(t).zIndex)||0}function zO(t){const e=[];for(;t;)e.push(t),t=pz(t);return e}function pz(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const mz=1,gz=2,vz=4,yz=8,Wme=Fme()==="coarse";let Ea=[],am=!1,Ou=new Map,LS=new Map;const Iy=new Set;function Hme(t,e,n,r,i){var s;const{ownerDocument:o}=e,a={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:i},c=(s=Ou.get(o))!==null&&s!==void 0?s:0;return Ou.set(o,c+1),Iy.add(a),Aw(),function(){var h;LS.delete(t),Iy.delete(a);const p=(h=Ou.get(o))!==null&&h!==void 0?h:1;if(Ou.set(o,p-1),Aw(),p===1&&Ou.delete(o),Ea.includes(a)){const y=Ea.indexOf(a);y>=0&&Ea.splice(y,1),jS(),i("up",!0,null)}}}function qme(t){const{target:e}=t,{x:n,y:r}=DS(t);am=!0,KR({target:e,x:n,y:r}),Aw(),Ea.length>0&&(Iw("down",t),jS(),t.preventDefault(),bz(e)||t.stopImmediatePropagation())}function Zk(t){const{x:e,y:n}=DS(t);if(am&&t.type!=="pointerleave"&&t.buttons===0&&(am=!1,Iw("up",t)),!am){const{target:r}=t;KR({target:r,x:e,y:n})}Iw("move",t),jS(),Ea.length>0&&t.preventDefault()}function eT(t){const{target:e}=t,{x:n,y:r}=DS(t);LS.clear(),am=!1,Ea.length>0&&(t.preventDefault(),bz(e)||t.stopImmediatePropagation()),Iw("up",t),KR({target:e,x:n,y:r}),jS(),Aw()}function bz(t){let e=t;for(;e;){if(e.hasAttribute(_r.resizeHandle))return!0;e=e.parentElement}return!1}function KR({target:t,x:e,y:n}){Ea.splice(0);let r=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(r=t),Iy.forEach(i=>{const{element:s,hitAreaMargins:o}=i,a=s.getBoundingClientRect(),{bottom:c,left:d,right:h,top:p}=a,y=Wme?o.coarse:o.fine;if(e>=d-y&&e<=h+y&&n>=p-y&&n<=c+y){if(r!==null&&document.contains(r)&&s!==r&&!s.contains(r)&&!r.contains(s)&&Vme(r,s)>0){let k=r,C=!1;for(;k&&!k.contains(s);){if(Ume(k.getBoundingClientRect(),a)){C=!0;break}k=k.parentElement}if(C)return}Ea.push(i)}})}function tT(t,e){LS.set(t,e)}function jS(){let t=!1,e=!1;Ea.forEach(r=>{const{direction:i}=r;i==="horizontal"?t=!0:e=!0});let n=0;LS.forEach(r=>{n|=r}),t&&e?Xk("intersection",n):t?Xk("horizontal",n):e?Xk("vertical",n):jme()}let nT;function Aw(){var t;(t=nT)===null||t===void 0||t.abort(),nT=new AbortController;const e={capture:!0,signal:nT.signal};Iy.size&&(am?(Ea.length>0&&Ou.forEach((n,r)=>{const{body:i}=r;n>0&&(i.addEventListener("contextmenu",eT,e),i.addEventListener("pointerleave",Zk,e),i.addEventListener("pointermove",Zk,e))}),Ou.forEach((n,r)=>{const{body:i}=r;i.addEventListener("pointerup",eT,e),i.addEventListener("pointercancel",eT,e)})):Ou.forEach((n,r)=>{const{body:i}=r;n>0&&(i.addEventListener("pointerdown",qme,e),i.addEventListener("pointermove",Zk,e))}))}function Iw(t,e){Iy.forEach(n=>{const{setResizeHandlerState:r}=n,i=Ea.includes(n);r(t,i,e)})}function Kme(){const[t,e]=v.useState(0);return v.useCallback(()=>e(n=>n+1),[])}function Zt(t,e){if(!t)throw console.error(e),Error(e)}function Yf(t,e,n=HR){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function Ec(t,e,n=HR){return Yf(t,e,n)===0}function lo(t,e,n){return Yf(t,e,n)===0}function Gme(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const i=t[r],s=e[r];if(!lo(i,s,n))return!1}return!0}function qp({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];Zt(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:i=0,collapsible:s,maxSize:o=100,minSize:a=0}=r;if(Yf(n,a)<0)if(s){const c=(i+a)/2;Yf(n,c)<0?n=i:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(HR)),n}function qv({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:i,trigger:s}){if(lo(t,0))return e;const o=[...e],[a,c]=r;Zt(a!=null,"Invalid first pivot index"),Zt(c!=null,"Invalid second pivot index");let d=0;if(s==="keyboard"){{const p=t<0?c:a,y=n[p];Zt(y,`Panel constraints not found for index ${p}`);const{collapsedSize:S=0,collapsible:k,minSize:C=0}=y;if(k){const E=e[p];if(Zt(E!=null,`Previous layout not found for panel index ${p}`),lo(E,S)){const _=C-E;Yf(_,Math.abs(t))>0&&(t=t<0?0-_:_)}}}{const p=t<0?a:c,y=n[p];Zt(y,`No panel constraints found for index ${p}`);const{collapsedSize:S=0,collapsible:k,minSize:C=0}=y;if(k){const E=e[p];if(Zt(E!=null,`Previous layout not found for panel index ${p}`),lo(E,C)){const _=E-S;Yf(_,Math.abs(t))>0&&(t=t<0?0-_:_)}}}}{const p=t<0?1:-1;let y=t<0?c:a,S=0;for(;;){const C=e[y];Zt(C!=null,`Previous layout not found for panel index ${y}`);const _=qp({panelConstraints:n,panelIndex:y,size:100})-C;if(S+=_,y+=p,y<0||y>=n.length)break}const k=Math.min(Math.abs(t),Math.abs(S));t=t<0?0-k:k}{let y=t<0?a:c;for(;y>=0&&y<n.length;){const S=Math.abs(t)-Math.abs(d),k=e[y];Zt(k!=null,`Previous layout not found for panel index ${y}`);const C=k-S,E=qp({panelConstraints:n,panelIndex:y,size:C});if(!lo(k,E)&&(d+=k-E,o[y]=E,d.toFixed(3).localeCompare(Math.abs(t).toFixed(3),void 0,{numeric:!0})>=0))break;t<0?y--:y++}}if(Gme(i,o))return i;{const p=t<0?c:a,y=e[p];Zt(y!=null,`Previous layout not found for panel index ${p}`);const S=y+d,k=qp({panelConstraints:n,panelIndex:p,size:S});if(o[p]=k,!lo(k,S)){let C=S-k,_=t<0?c:a;for(;_>=0&&_<n.length;){const A=o[_];Zt(A!=null,`Previous layout not found for panel index ${_}`);const M=A+C,I=qp({panelConstraints:n,panelIndex:_,size:M});if(lo(A,I)||(C-=I-A,o[_]=I),lo(C,0))break;t>0?_--:_++}}}const h=o.reduce((p,y)=>y+p,0);return lo(h,100)?o:i}function Yme({layout:t,panelsArray:e,pivotIndices:n}){let r=0,i=100,s=0,o=0;const a=n[0];Zt(a!=null,"No pivot index found"),e.forEach((p,y)=>{const{constraints:S}=p,{maxSize:k=100,minSize:C=0}=S;y===a?(r=C,i=k):(s+=C,o+=k)});const c=Math.min(i,100-s),d=Math.max(r,100-o),h=t[a];return{valueMax:c,valueMin:d,valueNow:h}}function Ny(t,e=document){return Array.from(e.querySelectorAll(`[${_r.resizeHandleId}][data-panel-group-id="${t}"]`))}function xz(t,e,n=document){const i=Ny(t,n).findIndex(s=>s.getAttribute(_r.resizeHandleId)===e);return i??null}function wz(t,e,n){const r=xz(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function Qme(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function Sz(t,e=document){if(Qme(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function FS(t,e=document){const n=e.querySelector(`[${_r.resizeHandleId}="${t}"]`);return n||null}function Jme(t,e,n,r=document){var i,s,o,a;const c=FS(e,r),d=Ny(t,r),h=c?d.indexOf(c):-1,p=(i=(s=n[h])===null||s===void 0?void 0:s.id)!==null&&i!==void 0?i:null,y=(o=(a=n[h+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[p,y]}function Xme({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:i,panelGroupElement:s,setLayout:o}){v.useRef({didWarnAboutMissingResizeHandle:!1}),jf(()=>{if(!s)return;const a=Ny(n,s);for(let c=0;c<i.length-1;c++){const{valueMax:d,valueMin:h,valueNow:p}=Yme({layout:r,panelsArray:i,pivotIndices:[c,c+1]}),y=a[c];if(y!=null){const S=i[c];Zt(S,`No panel data found for index "${c}"`),y.setAttribute("aria-controls",S.id),y.setAttribute("aria-valuemax",""+Math.round(d)),y.setAttribute("aria-valuemin",""+Math.round(h)),y.setAttribute("aria-valuenow",p!=null?""+Math.round(p):"")}}return()=>{a.forEach((c,d)=>{c.removeAttribute("aria-controls"),c.removeAttribute("aria-valuemax"),c.removeAttribute("aria-valuemin"),c.removeAttribute("aria-valuenow")})}},[n,r,i,s]),v.useEffect(()=>{if(!s)return;const a=e.current;Zt(a,"Eager values not found");const{panelDataArray:c}=a,d=Sz(n,s);Zt(d!=null,`No group found for id "${n}"`);const h=Ny(n,s);Zt(h,`No resize handles found for group id "${n}"`);const p=h.map(y=>{const S=y.getAttribute(_r.resizeHandleId);Zt(S,"Resize handle element has no handle id attribute");const[k,C]=Jme(n,S,c,s);if(k==null||C==null)return()=>{};const E=_=>{if(!_.defaultPrevented)switch(_.key){case"Enter":{_.preventDefault();const A=c.findIndex(M=>M.id===k);if(A>=0){const M=c[A];Zt(M,`No panel data found for index ${A}`);const I=r[A],{collapsedSize:N=0,collapsible:O,minSize:j=0}=M.constraints;if(I!=null&&O){const V=qv({delta:lo(I,N)?j-N:N-I,initialLayout:r,panelConstraints:c.map($=>$.constraints),pivotIndices:wz(n,S,s),prevLayout:r,trigger:"keyboard"});r!==V&&o(V)}}break}}};return y.addEventListener("keydown",E),()=>{y.removeEventListener("keydown",E)}});return()=>{p.forEach(y=>y())}},[s,t,e,n,r,i,o])}function $O(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Cz(t,e){const n=t==="horizontal",{x:r,y:i}=DS(e);return n?r:i}function Zme(t,e,n,r,i){const s=n==="horizontal",o=FS(e,i);Zt(o,`No resize handle element found for id "${e}"`);const a=o.getAttribute(_r.groupId);Zt(a,"Resize handle element has no group id attribute");let{initialCursorPosition:c}=r;const d=Cz(n,t),h=Sz(a,i);Zt(h,`No group element found for id "${a}"`);const p=h.getBoundingClientRect(),y=s?p.width:p.height;return(d-c)/y*100}function ege(t,e,n,r,i,s){if(dz(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:i!=null?a=i:a=10;let c=0;switch(t.key){case"ArrowDown":c=o?0:a;break;case"ArrowLeft":c=o?-a:0;break;case"ArrowRight":c=o?a:0;break;case"ArrowUp":c=o?0:-a;break;case"End":c=100;break;case"Home":c=-100;break}return c}else return r==null?0:Zme(t,e,n,r,s)}function tge({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let r=0,i=100;for(let s=0;s<t.length;s++){const o=n[s];Zt(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;a!=null&&(r++,e[s]=a,i-=a)}for(let s=0;s<t.length;s++){const o=n[s];Zt(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;if(a!=null)continue;const c=t.length-r,d=i/c;r++,e[s]=d,i-=d}return e}function Np(t,e,n){e.forEach((r,i)=>{const s=t[i];Zt(s,`Panel data not found for index ${i}`);const{callbacks:o,constraints:a,id:c}=s,{collapsedSize:d=0,collapsible:h}=a,p=n[c];if(p==null||r!==p){n[c]=r;const{onCollapse:y,onExpand:S,onResize:k}=o;k&&k(r,p),h&&(y||S)&&(S&&(p==null||Ec(p,d))&&!Ec(r,d)&&S(),y&&(p==null||!Ec(p,d))&&Ec(r,d)&&y())}})}function nx(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function nge({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:i,precision:s=3}){const o=n[i];let a;return o==null?a=t!=null?t.toFixed(s):"1":r.length===1?a="1":a=o.toFixed(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function rge(t,e=10){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...i)},e)}}function WO(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function kz(t){return`react-resizable-panels:${t}`}function Tz(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:i,order:s}=e;return i?r:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function Ez(t,e){try{const n=kz(t),r=e.getItem(n);if(r){const i=JSON.parse(r);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function ige(t,e,n){var r,i;const s=(r=Ez(t,n))!==null&&r!==void 0?r:{},o=Tz(e);return(i=s[o])!==null&&i!==void 0?i:null}function sge(t,e,n,r,i){var s;const o=kz(t),a=Tz(e),c=(s=Ez(t,i))!==null&&s!==void 0?s:{};c[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(o,JSON.stringify(c))}catch(d){console.error(d)}}function HO({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!lo(r,100)&&n.length>0)for(let s=0;s<e.length;s++){const o=n[s];Zt(o!=null,`No layout data found for index ${s}`);const a=100/r*o;n[s]=a}let i=0;for(let s=0;s<e.length;s++){const o=n[s];Zt(o!=null,`No layout data found for index ${s}`);const a=qp({panelConstraints:e,panelIndex:s,size:o});o!=a&&(i+=o-a,n[s]=a)}if(!lo(i,0))for(let s=0;s<e.length;s++){const o=n[s];Zt(o!=null,`No layout data found for index ${s}`);const a=o+i,c=qp({panelConstraints:e,panelIndex:s,size:a});if(o!==c&&(i-=c-o,n[s]=c,lo(i,0)))break}return n}const oge=100,Kv={getItem:t=>(WO(Kv),Kv.getItem(t)),setItem:(t,e)=>{WO(Kv),Kv.setItem(t,e)}},qO={};function _z({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:i,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:c=Kv,style:d,tagName:h="div",...p}){const y=qR(s),S=v.useRef(null),[k,C]=v.useState(null),[E,_]=v.useState([]),A=Kme(),M=v.useRef({}),I=v.useRef(new Map),N=v.useRef(0),O=v.useRef({autoSaveId:t,direction:r,dragState:k,id:y,keyboardResizeBy:a,onLayout:o,storage:c}),j=v.useRef({layout:E,panelDataArray:[],panelDataArrayChanged:!1});v.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),v.useImperativeHandle(i,()=>({getId:()=>O.current.id,getLayout:()=>{const{layout:se}=j.current;return se},setLayout:se=>{const{onLayout:me}=O.current,{layout:Te,panelDataArray:Re}=j.current,ie=HO({layout:se,panelConstraints:Re.map(be=>be.constraints)});$O(Te,ie)||(_(ie),j.current.layout=ie,me&&me(ie),Np(Re,ie,M.current))}}),[]),jf(()=>{O.current.autoSaveId=t,O.current.direction=r,O.current.dragState=k,O.current.id=y,O.current.onLayout=o,O.current.storage=c}),Xme({committedValuesRef:O,eagerValuesRef:j,groupId:y,layout:E,panelDataArray:j.current.panelDataArray,setLayout:_,panelGroupElement:S.current}),v.useEffect(()=>{const{panelDataArray:se}=j.current;if(t){if(E.length===0||E.length!==se.length)return;let me=qO[t];me==null&&(me=rge(sge,oge),qO[t]=me);const Te=[...se],Re=new Map(I.current);me(t,Te,Re,E,c)}},[t,E,c]),v.useEffect(()=>{});const V=v.useCallback(se=>{const{onLayout:me}=O.current,{layout:Te,panelDataArray:Re}=j.current;if(se.constraints.collapsible){const ie=Re.map(Je=>Je.constraints),{collapsedSize:be=0,panelSize:Le,pivotIndices:$e}=uf(Re,se,Te);if(Zt(Le!=null,`Panel size not found for panel "${se.id}"`),!Ec(Le,be)){I.current.set(se.id,Le);const pt=jp(Re,se)===Re.length-1?Le-be:be-Le,Et=qv({delta:pt,initialLayout:Te,panelConstraints:ie,pivotIndices:$e,prevLayout:Te,trigger:"imperative-api"});nx(Te,Et)||(_(Et),j.current.layout=Et,me&&me(Et),Np(Re,Et,M.current))}}},[]),$=v.useCallback((se,me)=>{const{onLayout:Te}=O.current,{layout:Re,panelDataArray:ie}=j.current;if(se.constraints.collapsible){const be=ie.map(wt=>wt.constraints),{collapsedSize:Le=0,panelSize:$e=0,minSize:Je=0,pivotIndices:pt}=uf(ie,se,Re),Et=me??Je;if(Ec($e,Le)){const wt=I.current.get(se.id),_n=wt!=null&&wt>=Et?wt:Et,dn=jp(ie,se)===ie.length-1?$e-_n:_n-$e,tn=qv({delta:dn,initialLayout:Re,panelConstraints:be,pivotIndices:pt,prevLayout:Re,trigger:"imperative-api"});nx(Re,tn)||(_(tn),j.current.layout=tn,Te&&Te(tn),Np(ie,tn,M.current))}}},[]),W=v.useCallback(se=>{const{layout:me,panelDataArray:Te}=j.current,{panelSize:Re}=uf(Te,se,me);return Zt(Re!=null,`Panel size not found for panel "${se.id}"`),Re},[]),J=v.useCallback((se,me)=>{const{panelDataArray:Te}=j.current,Re=jp(Te,se);return nge({defaultSize:me,dragState:k,layout:E,panelData:Te,panelIndex:Re})},[k,E]),Y=v.useCallback(se=>{const{layout:me,panelDataArray:Te}=j.current,{collapsedSize:Re=0,collapsible:ie,panelSize:be}=uf(Te,se,me);return Zt(be!=null,`Panel size not found for panel "${se.id}"`),ie===!0&&Ec(be,Re)},[]),pe=v.useCallback(se=>{const{layout:me,panelDataArray:Te}=j.current,{collapsedSize:Re=0,collapsible:ie,panelSize:be}=uf(Te,se,me);return Zt(be!=null,`Panel size not found for panel "${se.id}"`),!ie||Yf(be,Re)>0},[]),fe=v.useCallback(se=>{const{panelDataArray:me}=j.current;me.push(se),me.sort((Te,Re)=>{const ie=Te.order,be=Re.order;return ie==null&&be==null?0:ie==null?-1:be==null?1:ie-be}),j.current.panelDataArrayChanged=!0,A()},[A]);jf(()=>{if(j.current.panelDataArrayChanged){j.current.panelDataArrayChanged=!1;const{autoSaveId:se,onLayout:me,storage:Te}=O.current,{layout:Re,panelDataArray:ie}=j.current;let be=null;if(se){const $e=ige(se,ie,Te);$e&&(I.current=new Map(Object.entries($e.expandToSizes)),be=$e.layout)}be==null&&(be=tge({panelDataArray:ie}));const Le=HO({layout:be,panelConstraints:ie.map($e=>$e.constraints)});$O(Re,Le)||(_(Le),j.current.layout=Le,me&&me(Le),Np(ie,Le,M.current))}}),jf(()=>{const se=j.current;return()=>{se.layout=[]}},[]);const Ee=v.useCallback(se=>{let me=!1;const Te=S.current;return Te&&window.getComputedStyle(Te,null).getPropertyValue("direction")==="rtl"&&(me=!0),function(ie){ie.preventDefault();const be=S.current;if(!be)return()=>null;const{direction:Le,dragState:$e,id:Je,keyboardResizeBy:pt,onLayout:Et}=O.current,{layout:wt,panelDataArray:_n}=j.current,{initialLayout:er}=$e??{},dn=wz(Je,se,be);let tn=ege(ie,se,Le,$e,pt,be);const Nn=Le==="horizontal";Nn&&me&&(tn=-tn);const Q=_n.map(qe=>qe.constraints),ce=qv({delta:tn,initialLayout:er??wt,panelConstraints:Q,pivotIndices:dn,prevLayout:wt,trigger:dz(ie)?"keyboard":"mouse-or-touch"}),ve=!nx(wt,ce);(fz(ie)||hz(ie))&&N.current!=tn&&(N.current=tn,!ve&&tn!==0?Nn?tT(se,tn<0?mz:gz):tT(se,tn<0?vz:yz):tT(se,0)),ve&&(_(ce),j.current.layout=ce,Et&&Et(ce),Np(_n,ce,M.current))}},[]),le=v.useCallback((se,me)=>{const{onLayout:Te}=O.current,{layout:Re,panelDataArray:ie}=j.current,be=ie.map(wt=>wt.constraints),{panelSize:Le,pivotIndices:$e}=uf(ie,se,Re);Zt(Le!=null,`Panel size not found for panel "${se.id}"`);const pt=jp(ie,se)===ie.length-1?Le-me:me-Le,Et=qv({delta:pt,initialLayout:Re,panelConstraints:be,pivotIndices:$e,prevLayout:Re,trigger:"imperative-api"});nx(Re,Et)||(_(Et),j.current.layout=Et,Te&&Te(Et),Np(ie,Et,M.current))},[]),Se=v.useCallback((se,me)=>{const{layout:Te,panelDataArray:Re}=j.current,{collapsedSize:ie=0,collapsible:be}=me,{collapsedSize:Le=0,collapsible:$e,maxSize:Je=100,minSize:pt=0}=se.constraints,{panelSize:Et}=uf(Re,se,Te);Et!=null&&(be&&$e&&Ec(Et,ie)?Ec(ie,Le)||le(se,Le):Et<pt?le(se,pt):Et>Je&&le(se,Je))},[le]),q=v.useCallback((se,me)=>{const{direction:Te}=O.current,{layout:Re}=j.current;if(!S.current)return;const ie=FS(se,S.current);Zt(ie,`Drag handle element not found for id "${se}"`);const be=Cz(Te,me);C({dragHandleId:se,dragHandleRect:ie.getBoundingClientRect(),initialCursorPosition:be,initialLayout:Re})},[]),te=v.useCallback(()=>{C(null)},[]),ae=v.useCallback(se=>{const{panelDataArray:me}=j.current,Te=jp(me,se);Te>=0&&(me.splice(Te,1),delete M.current[se.id],j.current.panelDataArrayChanged=!0,A())},[A]),B=v.useMemo(()=>({collapsePanel:V,direction:r,dragState:k,expandPanel:$,getPanelSize:W,getPanelStyle:J,groupId:y,isPanelCollapsed:Y,isPanelExpanded:pe,reevaluatePanelConstraints:Se,registerPanel:fe,registerResizeHandle:Ee,resizePanel:le,startDragging:q,stopDragging:te,unregisterPanel:ae,panelGroupElement:S.current}),[V,k,r,$,W,J,y,Y,pe,Se,fe,Ee,le,q,te,ae]),de={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return v.createElement(OS.Provider,{value:B},v.createElement(h,{...p,children:e,className:n,id:s,ref:S,style:{...de,...d},[_r.group]:"",[_r.groupDirection]:r,[_r.groupId]:y}))}const Rz=v.forwardRef((t,e)=>v.createElement(_z,{...t,forwardedRef:e}));_z.displayName="PanelGroup";Rz.displayName="forwardRef(PanelGroup)";function jp(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function uf(t,e,n){const r=jp(t,e),s=r===t.length-1?[r-1,r]:[r,r+1],o=n[r];return{...e.constraints,panelSize:o,pivotIndices:s}}function age({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){v.useEffect(()=>{if(t||n==null||r==null)return;const i=FS(e,r);if(i==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=i.getAttribute(_r.groupId);Zt(a,`No group element found for id "${a}"`);const c=Ny(a,r),d=xz(a,e,r);Zt(d!==null,`No resize element found for id "${e}"`);const h=o.shiftKey?d>0?d-1:c.length-1:d+1<c.length?d+1:0;c[h].focus();break}}};return i.addEventListener("keydown",s),()=>{i.removeEventListener("keydown",s)}},[r,t,e,n])}function Pz({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:i,onBlur:s,onClick:o,onDragging:a,onFocus:c,onPointerDown:d,onPointerUp:h,style:p={},tabIndex:y=0,tagName:S="div",...k}){var C,E;const _=v.useRef(null),A=v.useRef({onClick:o,onDragging:a,onPointerDown:d,onPointerUp:h});v.useEffect(()=>{A.current.onClick=o,A.current.onDragging=a,A.current.onPointerDown=d,A.current.onPointerUp=h});const M=v.useContext(OS);if(M===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:I,groupId:N,registerResizeHandle:O,startDragging:j,stopDragging:V,panelGroupElement:$}=M,W=qR(i),[J,Y]=v.useState("inactive"),[pe,fe]=v.useState(!1),[Ee,le]=v.useState(null),Se=v.useRef({state:J});jf(()=>{Se.current.state=J}),v.useEffect(()=>{if(n)le(null);else{const B=O(W);le(()=>B)}},[n,W,O]);const q=(C=r==null?void 0:r.coarse)!==null&&C!==void 0?C:15,te=(E=r==null?void 0:r.fine)!==null&&E!==void 0?E:5;v.useEffect(()=>{if(n||Ee==null)return;const B=_.current;Zt(B,"Element ref not attached");let de=!1;return Hme(W,B,I,{coarse:q,fine:te},(me,Te,Re)=>{if(!Te){Y("inactive");return}switch(me){case"down":{Y("drag"),de=!1,Zt(Re,'Expected event to be defined for "down" action'),j(W,Re);const{onDragging:ie,onPointerDown:be}=A.current;ie==null||ie(!0),be==null||be();break}case"move":{const{state:ie}=Se.current;de=!0,ie!=="drag"&&Y("hover"),Zt(Re,'Expected event to be defined for "move" action'),Ee(Re);break}case"up":{Y("hover"),V();const{onClick:ie,onDragging:be,onPointerUp:Le}=A.current;be==null||be(!1),Le==null||Le(),de||ie==null||ie();break}}})},[q,I,n,te,O,W,Ee,j,V]),age({disabled:n,handleId:W,resizeHandler:Ee,panelGroupElement:$});const ae={touchAction:"none",userSelect:"none"};return v.createElement(S,{...k,children:t,className:e,id:i,onBlur:()=>{fe(!1),s==null||s()},onFocus:()=>{fe(!0),c==null||c()},ref:_,role:"separator",style:{...ae,...p},tabIndex:y,[_r.groupDirection]:I,[_r.groupId]:N,[_r.resizeHandle]:"",[_r.resizeHandleActive]:J==="drag"?"pointer":pe?"keyboard":void 0,[_r.resizeHandleEnabled]:!n,[_r.resizeHandleId]:W,[_r.resizeHandleState]:J})}Pz.displayName="PanelResizeHandle";function lge({className:t,...e}){return b.jsx(Rz,{"data-slot":"resizable-panel-group",className:Vt("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...e})}function KO({...t}){return b.jsx(uz,{"data-slot":"resizable-panel",...t})}function cge({withHandle:t,className:e,...n}){return b.jsx(Pz,{"data-slot":"resizable-handle",className:Vt("focus-visible:ring-ring relative flex w-px items-center justify-center bg-transparent after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 [&[data-panel-group-direction=vertical]>div]:rotate-90",e),...n,children:t&&b.jsx("div",{className:"flex size-20 items-center justify-center rounded-xs z-10",children:b.jsx(oq,{className:"size-20 text-violet-500 hover:text-violet-600 duration-300"})})})}const uge=()=>{const{connectSettings:t,settings:e,disconnect:n}=zw(),{latestRoomKilled:r,latestHostLeft:i,latestHostUpdate:s}=Wm(),{ws:o,connectUserEvents:a,sendUserEvent:c,events:{shareScreenEvents:d}}=Na(),{connectMedia:h,mediaState:p,remoteMediaStates:y,setAudioState:S,setVideoState:k,setVideoTrack:C,audioTrack:E,setAudioTrack:_,videoTrack:A}=CE(),{isChatExpanded:M,shareScreenView:I,setShareScreenView:N,isFocusView:O}=Ky(),j=v.useRef(y);v.useEffect(()=>{j.current=y},[y]);const V=v.useRef(p);v.useEffect(()=>{V.current=p},[p]);const[$,W]=v.useState("participants"),[J,Y]=v.useState(new Map),[pe,fe]=v.useState([]),Ee=v.useRef(null),[le,Se]=v.useState(),[q,te]=v.useState([]),[ae,B]=v.useState([]),[de,se]=v.useState(null),[me,Te]=v.useState([]),Re=qs(),{id:ie}=Jf(),{sessionID:be}=Re.state||{},Le=ki.get("rsCookie");NR({message:"Are you sure you want to leave the call? You will be disconnected from the room too.",onBeforeLeave:()=>{const We=Ee.current;We&&We.disconnect(),A&&A.stop(),E&&E.stop(),n(),ie&&Wx(ie)},shouldBlock:!r,allowedPaths:["/post-call"]});const{data:$e}=po({queryKey:["me",ie],queryFn:()=>qy(ie,Le),enabled:!!ie&&!!Le}),Je=$e==null?void 0:$e.id,{data:pt,isError:Et}=po({queryKey:["lvkToken",ie],queryFn:()=>W9(ie,Je),enabled:!!ie&&!!Je});v.useEffect(()=>{pt?Se(pt):Et&&Se(void 0)},[pt,Et]),v.useEffect(()=>{ie&&Je&&be&&a(ie,Je,be)},[ie,Je,be]),v.useEffect(()=>{(async()=>{try{ie&&Je&&h(ie,Je)}catch(Ut){console.error("Failed to establish WebSocket connection:",Ut)}})()},[ie,Je]),v.useEffect(()=>{ie&&be&&t(ie)},[ie,t]),v.useEffect(()=>{Ee.current=new Mm({adaptiveStream:!0,dynacast:!0,disconnectOnPageLeave:!1,videoCaptureDefaults:{resolution:Nm.h720.resolution},audioCaptureDefaults:{autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},publishDefaults:{audioPreset:pw.speech,videoCodec:"vp8"}});const We=Ee.current,Ut=(It,xn,Rn)=>{It.kind===_e.Kind.Video&&xn.source===_e.Source.ScreenShare?se({track:It,participantIdentity:Rn.identity,kind:_e.Kind.Video}):It.kind===_e.Kind.Video?te(sr=>[...sr,{track:It,participantIdentity:Rn.identity,kind:_e.Kind.Video}]):It.kind===_e.Kind.Audio&&B(sr=>[...sr,{track:It,participantIdentity:Rn.identity,kind:_e.Kind.Audio}])},Qt=()=>{var xn,Rn,sr,Br;const It=Array.from(We.localParticipant.videoTrackPublications.values()).find(cr=>cr.source===_e.Source.ScreenShare);if(It&&It.videoTrack)se({track:It.videoTrack,participantIdentity:be,kind:_e.Kind.Video});else{if(A)C(A);else{const cr=(Rn=(xn=We==null?void 0:We.localParticipant)==null?void 0:xn.videoTrackPublications.values().next().value)==null?void 0:Rn.videoTrack;C(cr)}if(E)_(E);else{const cr=(Br=(sr=We==null?void 0:We.localParticipant)==null?void 0:sr.audioTrackPublications.values().next().value)==null?void 0:Br.audioTrack;_(cr)}}};We.localParticipant.on("trackPublished",Qt),We.on(Ie.TrackSubscribed,Ut),We.on(Ie.TrackUnsubscribed,wt),We.on(Ie.ActiveSpeakersChanged,It=>{Te(It.map(xn=>xn.identity))});const hn=It=>{const xn={...j.current,[Je]:V.current};c({type:"media.synced",participant_id:Je,payload:xn}),Y(Rn=>{const sr=new Map(Rn);return sr.set(It.identity,It),sr}),er()},Hn=()=>{c({type:"media.state.updated",participant_id:Je,payload:{audio:V.current.audio,video:V.current.video}}),c({type:"media.synced",participant_id:Je,payload:{}})};return We.on(Ie.ParticipantConnected,hn),We.on(Ie.Connected,Hn),We.on(Ie.ParticipantDisconnected,It=>{Y(xn=>{const Rn=new Map(xn);return Rn.delete(It.identity),Rn}),te(xn=>xn.filter(Rn=>Rn.participantIdentity!==It.identity)),B(xn=>xn.filter(Rn=>Rn.participantIdentity!==It.identity)),setTimeout(()=>{er()},200)}),We.on(Ie.Disconnected,()=>{Y(new Map),te([]),B([]),fe([]),Se(void 0),C(null),_(null),S(!1),k(!1)}),()=>{We.localParticipant.off("trackPublished",Qt),We.off(Ie.TrackSubscribed,Ut),We.off(Ie.TrackUnsubscribed,wt),We.off(Ie.ParticipantConnected,hn),We.off(Ie.Connected,Hn)}},[]);const wt=(We,Ut)=>{We.detach(),We.kind===_e.Kind.Video&&Ut.source===_e.Source.ScreenShare?se(null):We.kind===_e.Kind.Video?te(Qt=>Qt.filter(hn=>hn.track.sid!==We.sid)):We.kind===_e.Kind.Audio&&B(Qt=>Qt.filter(hn=>hn.track.sid!==We.sid))};v.useEffect(()=>{const We=Ee.current;if(!We)return;(async()=>{var Qt,hn;try{if(!le){console.error("Failed to get LiveKit token");return}if(We.state===Tn.Connected)return;const Hn="wss://rooms-dev-zamqmzo0.livekit.cloud";if(We==null||We.prepareConnection(Hn,le),await We.connect(Hn,le),await We.localParticipant.setCameraEnabled(!0),await We.localParticipant.setMicrophoneEnabled(!0),!p.video){const It=We.localParticipant.getTrackPublication(_e.Source.Camera);It&&It.track&&It.track.mute()}if(!p.audio){const It=We.localParticipant.getTrackPublication(_e.Source.Microphone);It&&It.track&&It.track.mute()}if(We!=null&&We.remoteParticipants){const It=new Map;We.remoteParticipants.forEach(xn=>{It.set(xn.identity,xn)}),Y(It)}if(A)C(A);else{const It=(hn=(Qt=We==null?void 0:We.localParticipant)==null?void 0:Qt.videoTrackPublications.values().next().value)==null?void 0:hn.videoTrack;C(It||null)}}catch(Hn){console.error("Error connecting to LiveKit room:",Hn)}})()},[ie,Je,le]);const{data:_n,refetch:er}=po({queryKey:["call-participants",ie],queryFn:()=>xL(ie)});v.useEffect(()=>{_n&&fe(_n.participantsInCall)},[_n,Je,J]);const dn=(e==null?void 0:e.invite_permission)||!1,tn=pe.find(We=>We.id==Je),Nn=(tn==null?void 0:tn.isHost)||!1,Q=Array.from(J.keys()).filter(We=>We!==Je),ce=We=>{const Ut=Q.find(Qt=>Qt===We);return pe.find(Qt=>Qt.id===Ut)},ve=v.useCallback((We,Ut)=>{We&&Ut?(se(Ut),N([{trackSid:Ut.track.sid}])):(se(null),N("participants"))},[N]);v.useEffect(()=>{d.length>0?N([{trackSid:(de==null?void 0:de.track.sid)||""}]):(se(null),N("participants"))},[d,N]),v.useEffect(()=>{var Qt;if(!de||!((Qt=Ee.current)!=null&&Qt.localParticipant))return;const Ut=setInterval(()=>{var Hn,It;Array.from(((It=(Hn=Ee.current)==null?void 0:Hn.localParticipant)==null?void 0:It.videoTrackPublications.values())||[]).find(xn=>xn.source===_e.Source.ScreenShare)||(c({type:"sharescreen.ended",senderID:be,payload:{active:!1,trackSid:de.track.sid,username:(tn==null?void 0:tn.username)||"Unknown"}}),se(null))},1e3);return()=>clearInterval(Ut)},[de,be,tn,c]);const qe=li("mx-4 mb-12 h-full transition-all duration-300 ease-in-out",{"mr-[348px]":$!==null,"mr-[800px]":M&&$==="chat"}),Ge=J.size+(O?0:1),Be={gridTemplateColumns:`repeat(${Math.ceil(Math.sqrt(Ge))}, 1fr)`},Ze=v.useRef(null),{width:kt=0}=jq({ref:Ze}),Ft=dme({activeSpeakers:me,remoteTracks:q});return b.jsxs("div",{className:"h-screen bg-black flex flex-col",children:[b.jsx(Tme,{isSharingScreen:d.length>0,participantsCount:pe.length}),b.jsxs("div",{className:"flex-1 relative overflow-hidden",children:[i&&b.jsx(jO,{hostEventType:"left"},i.received_at),s&&b.jsx(jO,{hostEventType:"updated"},s.received_at),b.jsxs(lge,{direction:"horizontal",className:"h-full",children:[b.jsx(KO,{defaultSize:8,minSize:8,maxSize:40,hidden:!O,children:b.jsxs(Eme,{ref:Ze,children:[d.length>0&&de&&b.jsx("div",{className:"h-full overscroll-auto",children:b.jsx(LO,{isSidePanel:!0,screenShareTrack:de})}),Ft.map((We,Ut)=>b.jsx(tx,{isSidePanel:!0,index:Ut,responsiveWidth:kt||0,participant:ce(We.participantIdentity),track:We.track,audioTracks:ae,remoteIdentity:We.participantIdentity,isLocal:!1,isActiveSpeaker:me.includes(We.participantIdentity),remoteMediaStates:y},`${We.participantIdentity}-${Ut}`)),b.jsx(tx,{isSidePanel:!0,participant:tn,responsiveWidth:kt||0,track:A,isLocal:!0,mediaState:p,audioTracks:ae,isActiveSpeaker:me.includes(Je),remoteMediaStates:y},"local-video")]})}),b.jsx(cge,{withHandle:!0,hidden:!O}),b.jsx(KO,{defaultSize:70,minSize:30,children:b.jsxs("div",{className:"h-full relative overflow-hidden",children:[b.jsx(Sme,{}),b.jsxs("div",{className:qe,children:[I!=="participants"&&de&&b.jsx("div",{className:"h-full p-8 overscroll-auto",children:b.jsx(LO,{isSidePanel:!1,screenShareTrack:de})}),I==="participants"&&b.jsxs("div",{className:"grid gap-8 h-full p-8 overflow-auto transition-all duration-300 ease-in-out",style:Be,children:[q.map((We,Ut)=>We.track.kind==="video"&&b.jsx(tx,{index:Ut,isSidePanel:!1,participant:ce(We.participantIdentity),track:We.track,audioTracks:ae,remoteIdentity:We.participantIdentity,isLocal:!1,isActiveSpeaker:me.includes(We.participantIdentity),remoteMediaStates:y},We.track.sid)),(q.length===0||!O)&&b.jsx(tx,{isSidePanel:!1,participant:tn,track:A,isLocal:!0,mediaState:p,audioTracks:ae,isActiveSpeaker:me.includes(Je),remoteMediaStates:y},"local-video")]})]})]})})]}),b.jsx(hme,{open:$==="participants",participants:pe,participantID:Je,invitePermission:dn,isHost:Nn,mediaState:p,remoteMediaStates:y,isActiveSpeaker:me.includes(Je),onClose:()=>W(null)}),b.jsx(bme,{open:$==="chat",onClose:()=>W(null)})]}),b.jsx("div",{className:"flex items-center border-t border-zinc-800 bg-zinc-950",children:b.jsx(Mme,{room:Ee.current,sessionID:be,participantID:Je,mediaState:p,setAudioState:S,setVideoState:k,activePanel:$,setActivePanel:W,onScreenShareChange:ve})})]})},dge=()=>{const{sendSystemEvent:t,disconnectSystemEvents:e}=Wm(),n=Ow(),r=Ia(),{id:i}=Jf(),[s,o]=v.useState(!1),a=ki.get("rsCookie");NR({message:"Are you sure you want to leave the room? All your data will be deleted.",onBeforeLeave:()=>{o(!0),e(),i&&Wx(i)},shouldBlock:!s,allowedPaths:[]});const{data:c}=po({queryKey:["me",i,a],queryFn:()=>qy(i,a),enabled:!!i&&!!a}),d=c==null?void 0:c.id,h=c==null?void 0:c.isHost,{mutate:p,isPending:y}=Ju({mutationFn:()=>Wx(i),onMutate:()=>{n.cancelQueries(),e(),o(!0)},onSuccess:()=>{ki.remove("rsCookie"),r("/",{replace:!0})},onError:()=>{ki.remove("rsCookie"),r("/",{replace:!0})}}),{mutate:S,isPending:k}=Ju({mutationFn:()=>z9(i,a),onMutate:()=>{n.cancelQueries(),e(),o(!0)},onSuccess:()=>{ki.remove("rsCookie"),r("/",{replace:!0})},onError:()=>{ki.remove("rsCookie"),r("/",{replace:!0})}}),C=()=>{o(!0),setTimeout(()=>r(`/room/${i}`,{replace:!0}),0)},E=()=>{d&&(t({type:"host.left",payload:{previous_host_id:d}}),p())},_=()=>{d&&(t({type:"host.left",payload:{previous_host_id:d}}),S())},[A,{startCountdown:M}]=IE({countStart:60});return v.useEffect(()=>{M(),A===0&&p()},[M,A]),!i||!a?null:b.jsxs("div",{className:"flex flex-col items-center gap-48 mt-72",children:[b.jsxs("header",{className:"absolute top-40 flex flex-col items-center",children:[b.jsx("p",{className:"text-2xl font-mono text-gray-800",children:"Whispurr"}),b.jsx("img",{src:AR,alt:"logo",width:80})]}),b.jsxs("div",{className:"flex flex-col items-center justify-center gap-28 mt-[120px]",children:[b.jsx("h1",{className:"text-4xl",children:"You left the call"}),b.jsxs("div",{className:"flex items-center justify-center gap-4",children:[b.jsx(wm,{size:12,className:"text-yellow-600"}),b.jsx("span",{className:"text-xs text-gray-600",children:"You are the host of this call."})]}),b.jsxs("div",{className:"flex items-center justify-center gap-12",children:[b.jsxs(ls,{variant:"outline",onClick:C,children:[b.jsx(hq,{size:20,className:"mr-8"}),"Stay in Lobby"]}),h?b.jsx(Jy,{children:b.jsxs("form",{children:[b.jsx(Jw,{asChild:!0,children:b.jsxs(ls,{variant:"destructive",children:[b.jsx(QC,{size:20,className:"mr-8"}),"Leave Room"]})}),b.jsxs(Km,{className:"flex flex-col gap-24 sm:max-w-[425px]",children:[b.jsxs(Gm,{children:[b.jsx(Ym,{children:"Leave the Room"}),b.jsx(HE,{className:"text-sm text-muted-foreground",children:"Youre the current host. If you leave, you can either hand over the session to others or end the call for everyone. Choose what happens next."})]}),b.jsxs(WE,{children:[b.jsxs(ls,{type:"submit",disabled:y,onClick:E,children:[b.jsx(QC,{size:16,className:"mr-8"}),y?"Leaving...":"Leave"]}),b.jsxs(ls,{type:"submit",variant:"destructive",disabled:k,onClick:_,children:[b.jsx(xq,{size:16,className:"mr-8"}),k?"Ending...":"End"]})]})]})]})}):b.jsxs(ls,{variant:"destructive",disabled:y,onClick:()=>p(),children:[b.jsx(QC,{size:20,className:"mr-8"}),"Leave Room"]})]}),b.jsxs("span",{className:"text-sm underline",children:["Returning to home screen in ",A," seconds."]})]}),b.jsxs("div",{className:"flex items-center justify-center gap-12",children:[b.jsx("span",{className:"text-sm",children:"Were you satisfied with your overall experience?"}),b.jsxs("div",{className:"flex items-center justify-center gap-12",children:[b.jsx(Tq,{size:20,className:"cursor-pointer hover:scale-105 duration-300 ease-in-out hover:text-green-500"}),b.jsx(kq,{size:20,className:"cursor-pointer hover:scale-105 duration-300 ease-in-out hover:text-red-500"})]})]}),b.jsx(IR,{className:"flex flex-row items-center justify-center gap-12 p-16 w-[384px] shadow-elevation-low",children:b.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[b.jsxs("div",{className:"flex items-center justify-center gap-4",children:[b.jsx(Hm,{size:20,className:"text-orange-500"}),b.jsx("h2",{className:"text-lg font-semibold",children:"No Trace Left Behind"})]}),b.jsx("span",{className:"text-sm text-muted-foreground",children:"Your session data and personal information have been securely erased. No trace of your participation remains on our servers, ensuring your privacy and digital footprint are fully protected."}),b.jsx("span",{className:"text-sm text-blue-500 underline cursor-pointer hover:text-blue-600 duration-300 ease-in-out",children:"Learn more"})]})}),b.jsxs("div",{className:"absolute bottom-16 flex items-center gap-8",onClick:()=>window.open("https://github.com/Panos61/videocall-app-client/issues/new","_blank"),children:[b.jsx("span",{className:"text-sm text-gray-600 underline cursor-pointer hover:text-gray-900",children:"Report an issue"}),b.jsx(RL,{className:"size-16"})]})]})},fge=()=>{const t=Ia(),[e,{startCountdown:n}]=IE({countStart:60});return v.useEffect(()=>{n(),e===0&&t("/",{replace:!0})},[n,e]),b.jsxs("div",{className:"flex flex-col justify-center items-center gap-24",children:[b.jsxs("div",{className:"flex flex-col gap-12 mt-[160px]",children:[b.jsxs("h1",{className:"max-w-[580px] text-center text-2xl font-mono font-medium",children:["Whoops.. This room cannot be found or the URL is invalid."," "]}),b.jsx("p",{className:"max-w-[580px] text-center text-md",children:"Make sure that you've entered the correct meeting room id in the URL, e.g. https://localhost:3000/room/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"})]}),b.jsx(ls,{onClick:()=>t("/",{replace:!0}),children:"Return to home screen"}),b.jsxs("span",{className:"mt-12 text-sm underline",children:["Returning to home screen in ",e," seconds."]})]})},hge=()=>{const t=Ia();return b.jsxs("div",{className:"flex flex-col justify-center items-center gap-24",children:[b.jsxs("div",{className:"flex flex-col gap-12 mt-[160px]",children:[b.jsxs("h1",{className:"max-w-[580px] text-center text-2xl font-mono font-medium",children:["Whoops..404 This page cannot be found."," "]}),b.jsx("p",{className:"max-w-[580px] text-center text-md",children:"The page you are looking for does not exist."})]}),b.jsx(ls,{onClick:()=>t("/"),children:"Return to home screen"})]})},pge=new M6,mge=()=>{const t=qW([{path:"/",element:b.jsx(Yue,{})},{path:"/room-invite",element:b.jsx(ide,{})},{path:"/room/:id",element:b.jsx(Ik,{children:b.jsx(ume,{})})},{path:"/room/:id/call",element:b.jsx(Ik,{children:b.jsx(uge,{})})},{path:"/room/:id/post-call",element:b.jsx(Ik,{children:b.jsx(dge,{})})},{path:"/whoops",element:b.jsx(fge,{})},{path:"*",element:b.jsx(hge,{})}]);return b.jsx(O6,{client:pge,children:b.jsx(tq,{children:b.jsx(J9,{children:b.jsx(oH,{children:b.jsx(aH,{children:b.jsxs(X9,{children:[b.jsx(hZ,{children:b.jsx(sH,{router:t})}),b.jsx(loe,{richColors:!0,position:"top-center"})]})})})})})})};u6.createRoot(document.getElementById("root")).render(b.jsx(Pe.StrictMode,{children:b.jsx(mge,{})}));
